const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CONFr0ka.js","assets/index-N-jDbwNP.js","assets/index-BXP3FPBy.js","assets/index-cN7DUi1W.js","assets/index-CASf0fm0.js","assets/index-DzxBRh44.js","assets/cpp-DwbdDzZz.js","assets/regexp-YoNQ8D_6.js","assets/glsl-BnhNDUde.js","assets/c-BEm9jPuR.js","assets/sql-BlMRzCLu.js","assets/graphql-CjpzR3J5.js","assets/javascript-DWkXfOmy.js","assets/typescript-CmcXfmKQ.js","assets/jsx-CYoryoa-.js","assets/tsx-CIOiSPxe.js","assets/haml-C6u1SEPK.js","assets/css-thMyhgoI.js","assets/html-Di0qV9e9.js","assets/julia-B_x4mOiC.js","assets/python-2_G7h5rp.js","assets/r-BG_ByPbL.js","assets/php-Li1gZcgm.js","assets/xml-CaEe8SME.js","assets/java-a6NgFDTw.js","assets/json-CAhrKACI.js","assets/pug-BeGtHBib.js","assets/scss-DJS4KECY.js","assets/svelte-CmLmIVpA.js","assets/postcss-B6Y8ymK-.js","assets/vue-BoDiZ8fk.js","assets/vue-html-CushlTAs.js","assets/latex-BooTHTNP.js","assets/lua-Dj7FURKN.js","assets/ruby-BTP7IeOl.js","assets/shellscript-lCllR1Hz.js","assets/yaml-D_2ZYnRV.js","assets/Canvas-WFRTPhL-.js","assets/Canvas-uRrMj70X.css"])))=>i.map(i=>d[i]);
function zde(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var WT={exports:{}},fy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bj;function Bde(){if(Bj)return fy;Bj=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,i){var s=null;if(i!==void 0&&(s=""+i),o.key!==void 0&&(s=""+o.key),"key"in o){i={};for(var a in o)a!=="key"&&(i[a]=o[a])}else i=o;return o=i.ref,{$$typeof:e,type:r,key:s,ref:o!==void 0?o:null,props:i}}return fy.Fragment=t,fy.jsx=n,fy.jsxs=n,fy}var Vj;function Vde(){return Vj||(Vj=1,WT.exports=Bde()),WT.exports}var w=Vde(),KT={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fj;function Fde(){if(Fj)return Ct;Fj=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function p(N){return N===null||typeof N!="object"?null:(N=f&&N[f]||N["@@iterator"],typeof N=="function"?N:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function x(N,U,ee){this.props=N,this.context=U,this.refs=b,this.updater=ee||m}x.prototype.isReactComponent={},x.prototype.setState=function(N,U){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,U,"setState")},x.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function S(){}S.prototype=x.prototype;function E(N,U,ee){this.props=N,this.context=U,this.refs=b,this.updater=ee||m}var T=E.prototype=new S;T.constructor=E,y(T,x.prototype),T.isPureReactComponent=!0;var A=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function O(N,U,ee,D,ae,oe){return ee=oe.ref,{$$typeof:e,type:N,key:U,ref:ee!==void 0?ee:null,props:oe}}function I(N,U){return O(N.type,U,void 0,void 0,void 0,N.props)}function L(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function $(N){var U={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ee){return U[ee]})}var B=/\/+/g;function H(N,U){return typeof N=="object"&&N!==null&&N.key!=null?$(""+N.key):U.toString(36)}function V(){}function W(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(V,V):(N.status="pending",N.then(function(U){N.status==="pending"&&(N.status="fulfilled",N.value=U)},function(U){N.status==="pending"&&(N.status="rejected",N.reason=U)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function K(N,U,ee,D,ae){var oe=typeof N;(oe==="undefined"||oe==="boolean")&&(N=null);var he=!1;if(N===null)he=!0;else switch(oe){case"bigint":case"string":case"number":he=!0;break;case"object":switch(N.$$typeof){case e:case t:he=!0;break;case u:return he=N._init,K(he(N._payload),U,ee,D,ae)}}if(he)return ae=ae(N),he=D===""?"."+H(N,0):D,A(ae)?(ee="",he!=null&&(ee=he.replace(B,"$&/")+"/"),K(ae,U,ee,"",function(Oe){return Oe})):ae!=null&&(L(ae)&&(ae=I(ae,ee+(ae.key==null||N&&N.key===ae.key?"":(""+ae.key).replace(B,"$&/")+"/")+he)),U.push(ae)),1;he=0;var le=D===""?".":D+":";if(A(N))for(var ge=0;ge<N.length;ge++)D=N[ge],oe=le+H(D,ge),he+=K(D,U,ee,oe,ae);else if(ge=p(N),typeof ge=="function")for(N=ge.call(N),ge=0;!(D=N.next()).done;)D=D.value,oe=le+H(D,ge++),he+=K(D,U,ee,oe,ae);else if(oe==="object"){if(typeof N.then=="function")return K(W(N),U,ee,D,ae);throw U=String(N),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return he}function z(N,U,ee){if(N==null)return N;var D=[],ae=0;return K(N,D,"","",function(oe){return U.call(ee,oe,ae++)}),D}function G(N){if(N._status===-1){var U=N._result;U=U(),U.then(function(ee){(N._status===0||N._status===-1)&&(N._status=1,N._result=ee)},function(ee){(N._status===0||N._status===-1)&&(N._status=2,N._result=ee)}),N._status===-1&&(N._status=0,N._result=U)}if(N._status===1)return N._result.default;throw N._result}var F=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Z(){}return Ct.Children={map:z,forEach:function(N,U,ee){z(N,function(){U.apply(this,arguments)},ee)},count:function(N){var U=0;return z(N,function(){U++}),U},toArray:function(N){return z(N,function(U){return U})||[]},only:function(N){if(!L(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ct.Component=x,Ct.Fragment=n,Ct.Profiler=o,Ct.PureComponent=E,Ct.StrictMode=r,Ct.Suspense=l,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(N){return M.H.useMemoCache(N)}},Ct.cache=function(N){return function(){return N.apply(null,arguments)}},Ct.cloneElement=function(N,U,ee){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var D=y({},N.props),ae=N.key,oe=void 0;if(U!=null)for(he in U.ref!==void 0&&(oe=void 0),U.key!==void 0&&(ae=""+U.key),U)!R.call(U,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&U.ref===void 0||(D[he]=U[he]);var he=arguments.length-2;if(he===1)D.children=ee;else if(1<he){for(var le=Array(he),ge=0;ge<he;ge++)le[ge]=arguments[ge+2];D.children=le}return O(N.type,ae,void 0,void 0,oe,D)},Ct.createContext=function(N){return N={$$typeof:s,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:i,_context:N},N},Ct.createElement=function(N,U,ee){var D,ae={},oe=null;if(U!=null)for(D in U.key!==void 0&&(oe=""+U.key),U)R.call(U,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(ae[D]=U[D]);var he=arguments.length-2;if(he===1)ae.children=ee;else if(1<he){for(var le=Array(he),ge=0;ge<he;ge++)le[ge]=arguments[ge+2];ae.children=le}if(N&&N.defaultProps)for(D in he=N.defaultProps,he)ae[D]===void 0&&(ae[D]=he[D]);return O(N,oe,void 0,void 0,null,ae)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(N){return{$$typeof:a,render:N}},Ct.isValidElement=L,Ct.lazy=function(N){return{$$typeof:u,_payload:{_status:-1,_result:N},_init:G}},Ct.memo=function(N,U){return{$$typeof:c,type:N,compare:U===void 0?null:U}},Ct.startTransition=function(N){var U=M.T,ee={};M.T=ee;try{var D=N(),ae=M.S;ae!==null&&ae(ee,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(Z,F)}catch(oe){F(oe)}finally{M.T=U}},Ct.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ct.use=function(N){return M.H.use(N)},Ct.useActionState=function(N,U,ee){return M.H.useActionState(N,U,ee)},Ct.useCallback=function(N,U){return M.H.useCallback(N,U)},Ct.useContext=function(N){return M.H.useContext(N)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(N,U){return M.H.useDeferredValue(N,U)},Ct.useEffect=function(N,U,ee){var D=M.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(N,U)},Ct.useId=function(){return M.H.useId()},Ct.useImperativeHandle=function(N,U,ee){return M.H.useImperativeHandle(N,U,ee)},Ct.useInsertionEffect=function(N,U){return M.H.useInsertionEffect(N,U)},Ct.useLayoutEffect=function(N,U){return M.H.useLayoutEffect(N,U)},Ct.useMemo=function(N,U){return M.H.useMemo(N,U)},Ct.useOptimistic=function(N,U){return M.H.useOptimistic(N,U)},Ct.useReducer=function(N,U,ee){return M.H.useReducer(N,U,ee)},Ct.useRef=function(N){return M.H.useRef(N)},Ct.useState=function(N){return M.H.useState(N)},Ct.useSyncExternalStore=function(N,U,ee){return M.H.useSyncExternalStore(N,U,ee)},Ct.useTransition=function(){return M.H.useTransition()},Ct.version="19.1.1",Ct}var Hj;function $b(){return Hj||(Hj=1,KT.exports=Fde()),KT.exports}var k=$b();const ie=Rd(k),Lb=zde({__proto__:null,default:ie},[k]);var YT={exports:{}},hy={},JT={exports:{}},XT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uj;function Hde(){return Uj||(Uj=1,(function(e){function t(z,G){var F=z.length;z.push(G);e:for(;0<F;){var Z=F-1>>>1,N=z[Z];if(0<o(N,G))z[Z]=G,z[F]=N,F=Z;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],F=z.pop();if(F!==G){z[0]=F;e:for(var Z=0,N=z.length,U=N>>>1;Z<U;){var ee=2*(Z+1)-1,D=z[ee],ae=ee+1,oe=z[ae];if(0>o(D,F))ae<N&&0>o(oe,D)?(z[Z]=oe,z[ae]=F,Z=ae):(z[Z]=D,z[ee]=F,Z=ee);else if(ae<N&&0>o(oe,F))z[Z]=oe,z[ae]=F,Z=ae;else break e}}return G}function o(z,G){var F=z.sortIndex-G.sortIndex;return F!==0?F:z.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,b=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(z){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=z)r(c),G.sortIndex=G.expirationTime,t(l,G);else break;G=n(c)}}function M(z){if(b=!1,A(z),!y)if(n(l)!==null)y=!0,R||(R=!0,H());else{var G=n(c);G!==null&&K(M,G.startTime-z)}}var R=!1,O=-1,I=5,L=-1;function $(){return x?!0:!(e.unstable_now()-L<I)}function B(){if(x=!1,R){var z=e.unstable_now();L=z;var G=!0;try{e:{y=!1,b&&(b=!1,E(O),O=-1),m=!0;var F=p;try{t:{for(A(z),f=n(l);f!==null&&!(f.expirationTime>z&&$());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var N=Z(f.expirationTime<=z);if(z=e.unstable_now(),typeof N=="function"){f.callback=N,A(z),G=!0;break t}f===n(l)&&r(l),A(z)}else r(l);f=n(l)}if(f!==null)G=!0;else{var U=n(c);U!==null&&K(M,U.startTime-z),G=!1}}break e}finally{f=null,p=F,m=!1}G=void 0}}finally{G?H():R=!1}}}var H;if(typeof T=="function")H=function(){T(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=B,H=function(){W.postMessage(null)}}else H=function(){S(B,0)};function K(z,G){O=S(function(){z(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(z){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var F=p;p=G;try{return z()}finally{p=F}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var F=p;p=z;try{return G()}finally{p=F}},e.unstable_scheduleCallback=function(z,G,F){var Z=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,z){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=F+N,z={id:u++,callback:G,priorityLevel:z,startTime:F,expirationTime:N,sortIndex:-1},F>Z?(z.sortIndex=F,t(c,z),n(l)===null&&z===n(c)&&(b?(E(O),O=-1):b=!0,K(M,F-Z))):(z.sortIndex=N,t(l,z),y||m||(y=!0,R||(R=!0,H()))),z},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(z){var G=p;return function(){var F=p;p=G;try{return z.apply(this,arguments)}finally{p=F}}}})(XT)),XT}var Gj;function Ude(){return Gj||(Gj=1,JT.exports=Hde()),JT.exports}var QT={exports:{}},Uo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qj;function Gde(){if(qj)return Uo;qj=1;var e=$b();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function i(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Uo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Uo.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(l,c,null,u)},Uo.flushSync=function(l){var c=s.T,u=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=c,r.p=u,r.d.f()}},Uo.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Uo.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Uo.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:m}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:p,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Uo.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Uo.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Uo.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Uo.requestFormReset=function(l){r.d.r(l)},Uo.unstable_batchedUpdates=function(l,c){return l(c)},Uo.useFormState=function(l,c,u){return s.H.useFormState(l,c,u)},Uo.useFormStatus=function(){return s.H.useHostTransitionStatus()},Uo.version="19.1.1",Uo}var Zj;function HU(){if(Zj)return QT.exports;Zj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),QT.exports=Gde(),QT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wj;function qde(){if(Wj)return hy;Wj=1;var e=Ude(),t=$b(),n=HU();function r(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function i(d){var h=d,g=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(g=h.return),d=h.return;while(d)}return h.tag===3?g:null}function s(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function a(d){if(i(d)!==d)throw Error(r(188))}function l(d){var h=d.alternate;if(!h){if(h=i(d),h===null)throw Error(r(188));return h!==d?null:d}for(var g=d,v=h;;){var C=g.return;if(C===null)break;var _=C.alternate;if(_===null){if(v=C.return,v!==null){g=v;continue}break}if(C.child===_.child){for(_=C.child;_;){if(_===g)return a(C),d;if(_===v)return a(C),h;_=_.sibling}throw Error(r(188))}if(g.return!==v.return)g=C,v=_;else{for(var P=!1,j=C.child;j;){if(j===g){P=!0,g=C,v=_;break}if(j===v){P=!0,v=C,g=_;break}j=j.sibling}if(!P){for(j=_.child;j;){if(j===g){P=!0,g=_,v=C;break}if(j===v){P=!0,v=_,g=C;break}j=j.sibling}if(!P)throw Error(r(189))}}if(g.alternate!==v)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?d:h}function c(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d;for(d=d.child;d!==null;){if(h=c(d),h!==null)return h;d=d.sibling}return null}var u=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function H(d){return d===null||typeof d!="object"?null:(d=B&&d[B]||d["@@iterator"],typeof d=="function"?d:null)}var V=Symbol.for("react.client.reference");function W(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===V?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case y:return"Fragment";case x:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList";case L:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case m:return"Portal";case T:return(d.displayName||"Context")+".Provider";case E:return(d._context.displayName||"Context")+".Consumer";case A:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case O:return h=d.displayName||null,h!==null?h:W(d.type)||"Memo";case I:h=d._payload,d=d._init;try{return W(d(h))}catch{}}return null}var K=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},Z=[],N=-1;function U(d){return{current:d}}function ee(d){0>N||(d.current=Z[N],Z[N]=null,N--)}function D(d,h){N++,Z[N]=d.current,d.current=h}var ae=U(null),oe=U(null),he=U(null),le=U(null);function ge(d,h){switch(D(he,h),D(oe,d),D(ae,null),h.nodeType){case 9:case 11:d=(d=h.documentElement)&&(d=d.namespaceURI)?pj(d):0;break;default:if(d=h.tagName,h=h.namespaceURI)h=pj(h),d=mj(h,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}ee(ae),D(ae,d)}function Oe(){ee(ae),ee(oe),ee(he)}function je(d){d.memoizedState!==null&&D(le,d);var h=ae.current,g=mj(h,d.type);h!==g&&(D(oe,d),D(ae,g))}function ye(d){oe.current===d&&(ee(ae),ee(oe)),le.current===d&&(ee(le),ay._currentValue=F)}var Ie=Object.prototype.hasOwnProperty,Le=e.unstable_scheduleCallback,$e=e.unstable_cancelCallback,me=e.unstable_shouldYield,Re=e.unstable_requestPaint,we=e.unstable_now,Pe=e.unstable_getCurrentPriorityLevel,Ze=e.unstable_ImmediatePriority,rt=e.unstable_UserBlockingPriority,Bn=e.unstable_NormalPriority,So=e.unstable_LowPriority,Sr=e.unstable_IdlePriority,Ir=e.log,Ft=e.unstable_setDisableYieldValue,fe=null,Se=null;function Be(d){if(typeof Ir=="function"&&Ft(d),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(fe,d)}catch{}}var De=Math.clz32?Math.clz32:Or,et=Math.log,an=Math.LN2;function Or(d){return d>>>=0,d===0?32:31-(et(d)/an|0)|0}var hn=256,kr=4194304;function xn(d){var h=d&42;if(h!==0)return h;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function pn(d,h,g){var v=d.pendingLanes;if(v===0)return 0;var C=0,_=d.suspendedLanes,P=d.pingedLanes;d=d.warmLanes;var j=v&134217727;return j!==0?(v=j&~_,v!==0?C=xn(v):(P&=j,P!==0?C=xn(P):g||(g=j&~d,g!==0&&(C=xn(g))))):(j=v&~_,j!==0?C=xn(j):P!==0?C=xn(P):g||(g=v&~d,g!==0&&(C=xn(g)))),C===0?0:h!==0&&h!==C&&(h&_)===0&&(_=C&-C,g=h&-h,_>=g||_===32&&(g&4194048)!==0)?h:C}function qn(d,h){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&h)===0}function Zn(d,h){switch(d){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function so(){var d=hn;return hn<<=1,(hn&4194048)===0&&(hn=256),d}function Ki(){var d=kr;return kr<<=1,(kr&62914560)===0&&(kr=4194304),d}function qr(d){for(var h=[],g=0;31>g;g++)h.push(d);return h}function Qn(d,h){d.pendingLanes|=h,h!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Si(d,h,g,v,C,_){var P=d.pendingLanes;d.pendingLanes=g,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=g,d.entangledLanes&=g,d.errorRecoveryDisabledLanes&=g,d.shellSuspendCounter=0;var j=d.entanglements,Y=d.expirationTimes,se=d.hiddenUpdates;for(g=P&~g;0<g;){var ve=31-De(g),Ce=1<<ve;j[ve]=0,Y[ve]=-1;var ce=se[ve];if(ce!==null)for(se[ve]=null,ve=0;ve<ce.length;ve++){var ue=ce[ve];ue!==null&&(ue.lane&=-536870913)}g&=~Ce}v!==0&&ao(d,v,0),_!==0&&C===0&&d.tag!==0&&(d.suspendedLanes|=_&~(P&~h))}function ao(d,h,g){d.pendingLanes|=h,d.suspendedLanes&=~h;var v=31-De(h);d.entangledLanes|=h,d.entanglements[v]=d.entanglements[v]|1073741824|g&4194090}function lr(d,h){var g=d.entangledLanes|=h;for(d=d.entanglements;g;){var v=31-De(g),C=1<<v;C&h|d[v]&h&&(d[v]|=h),g&=~C}}function ki(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Fe(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Zt(){var d=G.p;return d!==0?d:(d=window.event,d===void 0?32:Pj(d.type))}function Lo(d,h){var g=G.p;try{return G.p=d,h()}finally{G.p=g}}var er=Math.random().toString(36).slice(2),on="__reactFiber$"+er,Wt="__reactProps$"+er,jo="__reactContainer$"+er,Sn="__reactEvents$"+er,Yi="__reactListeners$"+er,zo="__reactHandles$"+er,mu="__reactResources$"+er,wa="__reactMarker$"+er;function Ds(d){delete d[on],delete d[Wt],delete d[Sn],delete d[Yi],delete d[zo]}function $s(d){var h=d[on];if(h)return h;for(var g=d.parentNode;g;){if(h=g[jo]||g[on]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(d=vj(d);d!==null;){if(g=d[on])return g;d=vj(d)}return h}d=g,g=d.parentNode}return null}function Ji(d){if(d=d[on]||d[jo]){var h=d.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return d}return null}function cr(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d.stateNode;throw Error(r(33))}function Xi(d){var h=d[mu];return h||(h=d[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Wn(d){d[wa]=!0}var xa=new Set,Sa={};function Bo(d,h){Cr(d,h),Cr(d+"Capture",h)}function Cr(d,h){for(Sa[d]=h,d=0;d<h.length;d++)xa.add(h[d])}var dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ka={},sc={};function Ud(d){return Ie.call(sc,d)?!0:Ie.call(ka,d)?!1:dl.test(d)?sc[d]=!0:(ka[d]=!0,!1)}function Qi(d,h,g){if(Ud(h))if(g===null)d.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":d.removeAttribute(h);return;case"boolean":var v=h.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){d.removeAttribute(h);return}}d.setAttribute(h,""+g)}}function es(d,h,g){if(g===null)d.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(h);return}d.setAttribute(h,""+g)}}function ii(d,h,g,v){if(v===null)d.removeAttribute(g);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(g);return}d.setAttributeNS(h,g,""+v)}}var Ls,si;function ts(d){if(Ls===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);Ls=h&&h[1]||"",si=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ls+d+si}var js=!1;function fl(d,h){if(!d||js)return"";js=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(h){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ue){var ce=ue}Reflect.construct(d,[],Ce)}else{try{Ce.call()}catch(ue){ce=ue}d.call(Ce.prototype)}}else{try{throw Error()}catch(ue){ce=ue}(Ce=d())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ue){if(ue&&ce&&typeof ue.stack=="string")return[ue.stack,ce.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=v.DetermineComponentFrameRoot(),P=_[0],j=_[1];if(P&&j){var Y=P.split(`
`),se=j.split(`
`);for(C=v=0;v<Y.length&&!Y[v].includes("DetermineComponentFrameRoot");)v++;for(;C<se.length&&!se[C].includes("DetermineComponentFrameRoot");)C++;if(v===Y.length||C===se.length)for(v=Y.length-1,C=se.length-1;1<=v&&0<=C&&Y[v]!==se[C];)C--;for(;1<=v&&0<=C;v--,C--)if(Y[v]!==se[C]){if(v!==1||C!==1)do if(v--,C--,0>C||Y[v]!==se[C]){var ve=`
`+Y[v].replace(" at new "," at ");return d.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",d.displayName)),ve}while(1<=v&&0<=C);break}}}finally{js=!1,Error.prepareStackTrace=g}return(g=d?d.displayName||d.name:"")?ts(g):""}function Gd(d){switch(d.tag){case 26:case 27:case 5:return ts(d.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 15:return fl(d.type,!1);case 11:return fl(d.type.render,!1);case 1:return fl(d.type,!0);case 31:return ts("Activity");default:return""}}function Ca(d){try{var h="";do h+=Gd(d),d=d.return;while(d);return h}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Er(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ci(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function hl(d){var h=Ci(d)?"checked":"value",g=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),v=""+d[h];if(!d.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,_=g.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return C.call(this)},set:function(P){v=""+P,_.call(this,P)}}),Object.defineProperty(d,h,{enumerable:g.enumerable}),{getValue:function(){return v},setValue:function(P){v=""+P},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function ko(d){d._valueTracker||(d._valueTracker=hl(d))}function zs(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var g=h.getValue(),v="";return d&&(v=Ci(d)?d.checked?"true":"false":d.value),d=v,d!==g?(h.setValue(d),!0):!1}function Ei(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var pl=/[\n"\\]/g;function lo(d){return d.replace(pl,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function ac(d,h,g,v,C,_,P,j){d.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?d.type=P:d.removeAttribute("type"),h!=null?P==="number"?(h===0&&d.value===""||d.value!=h)&&(d.value=""+Er(h)):d.value!==""+Er(h)&&(d.value=""+Er(h)):P!=="submit"&&P!=="reset"||d.removeAttribute("value"),h!=null?ns(d,P,Er(h)):g!=null?ns(d,P,Er(g)):v!=null&&d.removeAttribute("value"),C==null&&_!=null&&(d.defaultChecked=!!_),C!=null&&(d.checked=C&&typeof C!="function"&&typeof C!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?d.name=""+Er(j):d.removeAttribute("name")}function Ea(d,h,g,v,C,_,P,j){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(d.type=_),h!=null||g!=null){if(!(_!=="submit"&&_!=="reset"||h!=null))return;g=g!=null?""+Er(g):"",h=h!=null?""+Er(h):g,j||h===d.value||(d.value=h),d.defaultValue=h}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,d.checked=j?d.checked:!!v,d.defaultChecked=!!v,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(d.name=P)}function ns(d,h,g){h==="number"&&Ei(d.ownerDocument)===d||d.defaultValue===""+g||(d.defaultValue=""+g)}function Bs(d,h,g,v){if(d=d.options,h){h={};for(var C=0;C<g.length;C++)h["$"+g[C]]=!0;for(g=0;g<d.length;g++)C=h.hasOwnProperty("$"+d[g].value),d[g].selected!==C&&(d[g].selected=C),C&&v&&(d[g].defaultSelected=!0)}else{for(g=""+Er(g),h=null,C=0;C<d.length;C++){if(d[C].value===g){d[C].selected=!0,v&&(d[C].defaultSelected=!0);return}h!==null||d[C].disabled||(h=d[C])}h!==null&&(h.selected=!0)}}function Ta(d,h,g){if(h!=null&&(h=""+Er(h),h!==d.value&&(d.value=h),g==null)){d.defaultValue!==h&&(d.defaultValue=h);return}d.defaultValue=g!=null?""+Er(g):""}function Vs(d,h,g,v){if(h==null){if(v!=null){if(g!=null)throw Error(r(92));if(K(v)){if(1<v.length)throw Error(r(93));v=v[0]}g=v}g==null&&(g=""),h=g}g=Er(h),d.defaultValue=g,v=d.textContent,v===g&&v!==""&&v!==null&&(d.value=v)}function co(d,h){if(h){var g=d.firstChild;if(g&&g===d.lastChild&&g.nodeType===3){g.nodeValue=h;return}}d.textContent=h}var ai=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _a(d,h,g){var v=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?v?d.setProperty(h,""):h==="float"?d.cssFloat="":d[h]="":v?d.setProperty(h,g):typeof g!="number"||g===0||ai.has(h)?h==="float"?d.cssFloat=g:d[h]=(""+g).trim():d[h]=g+"px"}function lc(d,h,g){if(h!=null&&typeof h!="object")throw Error(r(62));if(d=d.style,g!=null){for(var v in g)!g.hasOwnProperty(v)||h!=null&&h.hasOwnProperty(v)||(v.indexOf("--")===0?d.setProperty(v,""):v==="float"?d.cssFloat="":d[v]="");for(var C in h)v=h[C],h.hasOwnProperty(C)&&g[C]!==v&&_a(d,C,v)}else for(var _ in h)h.hasOwnProperty(_)&&_a(d,_,h[_])}function Zr(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tr(d){return pt.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Co=null;function ml(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Ti=null,cc=null;function Dv(d){var h=Ji(d);if(h&&(d=h.stateNode)){var g=d[Wt]||null;e:switch(d=h.stateNode,h.type){case"input":if(ac(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=d;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+lo(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var v=g[h];if(v!==d&&v.form===d.form){var C=v[Wt]||null;if(!C)throw Error(r(90));ac(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(h=0;h<g.length;h++)v=g[h],v.form===d.form&&zs(v)}break e;case"textarea":Ta(d,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&Bs(d,!!g.multiple,h,!1)}}}var yu=!1;function $v(d,h,g){if(yu)return d(h,g);yu=!0;try{var v=d(h);return v}finally{if(yu=!1,(Ti!==null||cc!==null)&&(b1(),Ti&&(h=Ti,d=cc,cc=Ti=null,Dv(h),d)))for(h=0;h<d.length;h++)Dv(d[h])}}function uc(d,h){var g=d.stateNode;if(g===null)return null;var v=g[Wt]||null;if(v===null)return null;g=v[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(d=d.type,v=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!v;break e;default:d=!1}if(d)return null;if(g&&typeof g!="function")throw Error(r(231,h,typeof g));return g}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ph=!1;if(Aa)try{var bu={};Object.defineProperty(bu,"passive",{get:function(){Ph=!0}}),window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{Ph=!1}var Ma=null,dc=null,qd=null;function Lv(){if(qd)return qd;var d,h=dc,g=h.length,v,C="value"in Ma?Ma.value:Ma.textContent,_=C.length;for(d=0;d<g&&h[d]===C[d];d++);var P=g-d;for(v=1;v<=P&&h[g-v]===C[_-v];v++);return qd=C.slice(d,1<v?1-v:void 0)}function Dh(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function $h(){return!0}function q(){return!1}function Q(d){function h(g,v,C,_,P){this._reactName=g,this._targetInst=C,this.type=v,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var j in d)d.hasOwnProperty(j)&&(g=d[j],this[j]=g?g(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$h:q,this.isPropagationStopped=q,this}return u(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=$h)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=$h)},persist:function(){},isPersistent:$h}),h}var ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ze=Q(ke),tn=u({},ke,{view:0,detail:0}),gt=Q(tn),Nn,ur,nr,mn=u({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n2,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==nr&&(nr&&d.type==="mousemove"?(Nn=d.screenX-nr.screenX,ur=d.screenY-nr.screenY):ur=Nn=0,nr=d),Nn)},movementY:function(d){return"movementY"in d?d.movementY:ur}}),Vo=Q(mn),rs=u({},mn,{dataTransfer:0}),uo=Q(rs),_i=u({},tn,{relatedTarget:0}),Fo=Q(_i),gl=u({},ke,{animationName:0,elapsedTime:0,pseudoElement:0}),Ra=Q(gl),fc=u({},ke,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),jv=Q(fc),Lh=u({},ke,{data:0}),Zd=Q(Lh),Wce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jce(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=Yce[d])?!!h[d]:!1}function n2(){return Jce}var Xce=u({},tn,{key:function(d){if(d.key){var h=Wce[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=Dh(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Kce[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n2,charCode:function(d){return d.type==="keypress"?Dh(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Dh(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Qce=Q(Xce),eue=u({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S$=Q(eue),tue=u({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n2}),nue=Q(tue),rue=u({},ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),oue=Q(rue),iue=u({},mn,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),sue=Q(iue),aue=u({},ke,{newState:0,oldState:0}),lue=Q(aue),cue=[9,13,27,32],r2=Aa&&"CompositionEvent"in window,Cg=null;Aa&&"documentMode"in document&&(Cg=document.documentMode);var uue=Aa&&"TextEvent"in window&&!Cg,k$=Aa&&(!r2||Cg&&8<Cg&&11>=Cg),C$=" ",E$=!1;function T$(d,h){switch(d){case"keyup":return cue.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _$(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var jh=!1;function due(d,h){switch(d){case"compositionend":return _$(h);case"keypress":return h.which!==32?null:(E$=!0,C$);case"textInput":return d=h.data,d===C$&&E$?null:d;default:return null}}function fue(d,h){if(jh)return d==="compositionend"||!r2&&T$(d,h)?(d=Lv(),qd=dc=Ma=null,jh=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return k$&&h.locale!=="ko"?null:h.data;default:return null}}var hue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A$(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!hue[d.type]:h==="textarea"}function M$(d,h,g,v){Ti?cc?cc.push(v):cc=[v]:Ti=v,h=C1(h,"onChange"),0<h.length&&(g=new ze("onChange","change",null,g,v),d.push({event:g,listeners:h}))}var Eg=null,Tg=null;function pue(d){cj(d,0)}function zv(d){var h=cr(d);if(zs(h))return d}function R$(d,h){if(d==="change")return h}var N$=!1;if(Aa){var o2;if(Aa){var i2="oninput"in document;if(!i2){var I$=document.createElement("div");I$.setAttribute("oninput","return;"),i2=typeof I$.oninput=="function"}o2=i2}else o2=!1;N$=o2&&(!document.documentMode||9<document.documentMode)}function O$(){Eg&&(Eg.detachEvent("onpropertychange",P$),Tg=Eg=null)}function P$(d){if(d.propertyName==="value"&&zv(Tg)){var h=[];M$(h,Tg,d,ml(d)),$v(pue,h)}}function mue(d,h,g){d==="focusin"?(O$(),Eg=h,Tg=g,Eg.attachEvent("onpropertychange",P$)):d==="focusout"&&O$()}function gue(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return zv(Tg)}function yue(d,h){if(d==="click")return zv(h)}function bue(d,h){if(d==="input"||d==="change")return zv(h)}function vue(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var is=typeof Object.is=="function"?Object.is:vue;function _g(d,h){if(is(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var g=Object.keys(d),v=Object.keys(h);if(g.length!==v.length)return!1;for(v=0;v<g.length;v++){var C=g[v];if(!Ie.call(h,C)||!is(d[C],h[C]))return!1}return!0}function D$(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function $$(d,h){var g=D$(d);d=0;for(var v;g;){if(g.nodeType===3){if(v=d+g.textContent.length,d<=h&&v>=h)return{node:g,offset:h-d};d=v}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=D$(g)}}function L$(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?L$(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function j$(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var h=Ei(d.document);h instanceof d.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)d=h.contentWindow;else break;h=Ei(d.document)}return h}function s2(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var wue=Aa&&"documentMode"in document&&11>=document.documentMode,zh=null,a2=null,Ag=null,l2=!1;function z$(d,h,g){var v=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;l2||zh==null||zh!==Ei(v)||(v=zh,"selectionStart"in v&&s2(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ag&&_g(Ag,v)||(Ag=v,v=C1(a2,"onSelect"),0<v.length&&(h=new ze("onSelect","select",null,h,g),d.push({event:h,listeners:v}),h.target=zh)))}function Wd(d,h){var g={};return g[d.toLowerCase()]=h.toLowerCase(),g["Webkit"+d]="webkit"+h,g["Moz"+d]="moz"+h,g}var Bh={animationend:Wd("Animation","AnimationEnd"),animationiteration:Wd("Animation","AnimationIteration"),animationstart:Wd("Animation","AnimationStart"),transitionrun:Wd("Transition","TransitionRun"),transitionstart:Wd("Transition","TransitionStart"),transitioncancel:Wd("Transition","TransitionCancel"),transitionend:Wd("Transition","TransitionEnd")},c2={},B$={};Aa&&(B$=document.createElement("div").style,"AnimationEvent"in window||(delete Bh.animationend.animation,delete Bh.animationiteration.animation,delete Bh.animationstart.animation),"TransitionEvent"in window||delete Bh.transitionend.transition);function Kd(d){if(c2[d])return c2[d];if(!Bh[d])return d;var h=Bh[d],g;for(g in h)if(h.hasOwnProperty(g)&&g in B$)return c2[d]=h[g];return d}var V$=Kd("animationend"),F$=Kd("animationiteration"),H$=Kd("animationstart"),xue=Kd("transitionrun"),Sue=Kd("transitionstart"),kue=Kd("transitioncancel"),U$=Kd("transitionend"),G$=new Map,u2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");u2.push("scrollEnd");function Na(d,h){G$.set(d,h),Bo(h,[d])}var q$=new WeakMap;function Fs(d,h){if(typeof d=="object"&&d!==null){var g=q$.get(d);return g!==void 0?g:(h={value:d,source:h,stack:Ca(h)},q$.set(d,h),h)}return{value:d,source:h,stack:Ca(h)}}var Hs=[],Vh=0,d2=0;function Bv(){for(var d=Vh,h=d2=Vh=0;h<d;){var g=Hs[h];Hs[h++]=null;var v=Hs[h];Hs[h++]=null;var C=Hs[h];Hs[h++]=null;var _=Hs[h];if(Hs[h++]=null,v!==null&&C!==null){var P=v.pending;P===null?C.next=C:(C.next=P.next,P.next=C),v.pending=C}_!==0&&Z$(g,C,_)}}function Vv(d,h,g,v){Hs[Vh++]=d,Hs[Vh++]=h,Hs[Vh++]=g,Hs[Vh++]=v,d2|=v,d.lanes|=v,d=d.alternate,d!==null&&(d.lanes|=v)}function f2(d,h,g,v){return Vv(d,h,g,v),Fv(d)}function Fh(d,h){return Vv(d,null,null,h),Fv(d)}function Z$(d,h,g){d.lanes|=g;var v=d.alternate;v!==null&&(v.lanes|=g);for(var C=!1,_=d.return;_!==null;)_.childLanes|=g,v=_.alternate,v!==null&&(v.childLanes|=g),_.tag===22&&(d=_.stateNode,d===null||d._visibility&1||(C=!0)),d=_,_=_.return;return d.tag===3?(_=d.stateNode,C&&h!==null&&(C=31-De(g),d=_.hiddenUpdates,v=d[C],v===null?d[C]=[h]:v.push(h),h.lane=g|536870912),_):null}function Fv(d){if(50<Qg)throw Qg=0,bT=null,Error(r(185));for(var h=d.return;h!==null;)d=h,h=d.return;return d.tag===3?d.stateNode:null}var Hh={};function Cue(d,h,g,v){this.tag=d,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(d,h,g,v){return new Cue(d,h,g,v)}function h2(d){return d=d.prototype,!(!d||!d.isReactComponent)}function hc(d,h){var g=d.alternate;return g===null?(g=ss(d.tag,h,d.key,d.mode),g.elementType=d.elementType,g.type=d.type,g.stateNode=d.stateNode,g.alternate=d,d.alternate=g):(g.pendingProps=h,g.type=d.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=d.flags&65011712,g.childLanes=d.childLanes,g.lanes=d.lanes,g.child=d.child,g.memoizedProps=d.memoizedProps,g.memoizedState=d.memoizedState,g.updateQueue=d.updateQueue,h=d.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=d.sibling,g.index=d.index,g.ref=d.ref,g.refCleanup=d.refCleanup,g}function W$(d,h){d.flags&=65011714;var g=d.alternate;return g===null?(d.childLanes=0,d.lanes=h,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,h=g.dependencies,d.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),d}function Hv(d,h,g,v,C,_){var P=0;if(v=d,typeof d=="function")h2(d)&&(P=1);else if(typeof d=="string")P=Tde(d,g,ae.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case L:return d=ss(31,g,h,C),d.elementType=L,d.lanes=_,d;case y:return Yd(g.children,C,_,h);case b:P=8,C|=24;break;case x:return d=ss(12,g,h,C|2),d.elementType=x,d.lanes=_,d;case M:return d=ss(13,g,h,C),d.elementType=M,d.lanes=_,d;case R:return d=ss(19,g,h,C),d.elementType=R,d.lanes=_,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case S:case T:P=10;break e;case E:P=9;break e;case A:P=11;break e;case O:P=14;break e;case I:P=16,v=null;break e}P=29,g=Error(r(130,d===null?"null":typeof d,"")),v=null}return h=ss(P,g,h,C),h.elementType=d,h.type=v,h.lanes=_,h}function Yd(d,h,g,v){return d=ss(7,d,v,h),d.lanes=g,d}function p2(d,h,g){return d=ss(6,d,null,h),d.lanes=g,d}function m2(d,h,g){return h=ss(4,d.children!==null?d.children:[],d.key,h),h.lanes=g,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}var Uh=[],Gh=0,Uv=null,Gv=0,Us=[],Gs=0,Jd=null,pc=1,mc="";function Xd(d,h){Uh[Gh++]=Gv,Uh[Gh++]=Uv,Uv=d,Gv=h}function K$(d,h,g){Us[Gs++]=pc,Us[Gs++]=mc,Us[Gs++]=Jd,Jd=d;var v=pc;d=mc;var C=32-De(v)-1;v&=~(1<<C),g+=1;var _=32-De(h)+C;if(30<_){var P=C-C%5;_=(v&(1<<P)-1).toString(32),v>>=P,C-=P,pc=1<<32-De(h)+C|g<<C|v,mc=_+d}else pc=1<<_|g<<C|v,mc=d}function g2(d){d.return!==null&&(Xd(d,1),K$(d,1,0))}function y2(d){for(;d===Uv;)Uv=Uh[--Gh],Uh[Gh]=null,Gv=Uh[--Gh],Uh[Gh]=null;for(;d===Jd;)Jd=Us[--Gs],Us[Gs]=null,mc=Us[--Gs],Us[Gs]=null,pc=Us[--Gs],Us[Gs]=null}var li=null,dr=null,nn=!1,Qd=null,yl=!1,b2=Error(r(519));function ef(d){var h=Error(r(418,""));throw Ng(Fs(h,d)),b2}function Y$(d){var h=d.stateNode,g=d.type,v=d.memoizedProps;switch(h[on]=d,h[Wt]=v,g){case"dialog":$t("cancel",h),$t("close",h);break;case"iframe":case"object":case"embed":$t("load",h);break;case"video":case"audio":for(g=0;g<ty.length;g++)$t(ty[g],h);break;case"source":$t("error",h);break;case"img":case"image":case"link":$t("error",h),$t("load",h);break;case"details":$t("toggle",h);break;case"input":$t("invalid",h),Ea(h,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),ko(h);break;case"select":$t("invalid",h);break;case"textarea":$t("invalid",h),Vs(h,v.value,v.defaultValue,v.children),ko(h)}g=v.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||v.suppressHydrationWarning===!0||hj(h.textContent,g)?(v.popover!=null&&($t("beforetoggle",h),$t("toggle",h)),v.onScroll!=null&&$t("scroll",h),v.onScrollEnd!=null&&$t("scrollend",h),v.onClick!=null&&(h.onclick=E1),h=!0):h=!1,h||ef(d)}function J$(d){for(li=d.return;li;)switch(li.tag){case 5:case 13:yl=!1;return;case 27:case 3:yl=!0;return;default:li=li.return}}function Mg(d){if(d!==li)return!1;if(!nn)return J$(d),nn=!0,!1;var h=d.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=d.type,g=!(g!=="form"&&g!=="button")||PT(d.type,d.memoizedProps)),g=!g),g&&dr&&ef(d),J$(d),h===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8)if(g=d.data,g==="/$"){if(h===0){dr=Oa(d.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++;d=d.nextSibling}dr=null}}else h===27?(h=dr,Pu(d.type)?(d=jT,jT=null,dr=d):dr=h):dr=li?Oa(d.stateNode.nextSibling):null;return!0}function Rg(){dr=li=null,nn=!1}function X$(){var d=Qd;return d!==null&&(Ri===null?Ri=d:Ri.push.apply(Ri,d),Qd=null),d}function Ng(d){Qd===null?Qd=[d]:Qd.push(d)}var v2=U(null),tf=null,gc=null;function vu(d,h,g){D(v2,h._currentValue),h._currentValue=g}function yc(d){d._currentValue=v2.current,ee(v2)}function w2(d,h,g){for(;d!==null;){var v=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,v!==null&&(v.childLanes|=h)):v!==null&&(v.childLanes&h)!==h&&(v.childLanes|=h),d===g)break;d=d.return}}function x2(d,h,g,v){var C=d.child;for(C!==null&&(C.return=d);C!==null;){var _=C.dependencies;if(_!==null){var P=C.child;_=_.firstContext;e:for(;_!==null;){var j=_;_=C;for(var Y=0;Y<h.length;Y++)if(j.context===h[Y]){_.lanes|=g,j=_.alternate,j!==null&&(j.lanes|=g),w2(_.return,g,d),v||(P=null);break e}_=j.next}}else if(C.tag===18){if(P=C.return,P===null)throw Error(r(341));P.lanes|=g,_=P.alternate,_!==null&&(_.lanes|=g),w2(P,g,d),P=null}else P=C.child;if(P!==null)P.return=C;else for(P=C;P!==null;){if(P===d){P=null;break}if(C=P.sibling,C!==null){C.return=P.return,P=C;break}P=P.return}C=P}}function Ig(d,h,g,v){d=null;for(var C=h,_=!1;C!==null;){if(!_){if((C.flags&524288)!==0)_=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var P=C.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var j=C.type;is(C.pendingProps.value,P.value)||(d!==null?d.push(j):d=[j])}}else if(C===le.current){if(P=C.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(d!==null?d.push(ay):d=[ay])}C=C.return}d!==null&&x2(h,d,g,v),h.flags|=262144}function qv(d){for(d=d.firstContext;d!==null;){if(!is(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function nf(d){tf=d,gc=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Ho(d){return Q$(tf,d)}function Zv(d,h){return tf===null&&nf(d),Q$(d,h)}function Q$(d,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},gc===null){if(d===null)throw Error(r(308));gc=h,d.dependencies={lanes:0,firstContext:h},d.flags|=524288}else gc=gc.next=h;return g}var Eue=typeof AbortController<"u"?AbortController:function(){var d=[],h=this.signal={aborted:!1,addEventListener:function(g,v){d.push(v)}};this.abort=function(){h.aborted=!0,d.forEach(function(g){return g()})}},Tue=e.unstable_scheduleCallback,_ue=e.unstable_NormalPriority,Wr={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function S2(){return{controller:new Eue,data:new Map,refCount:0}}function Og(d){d.refCount--,d.refCount===0&&Tue(_ue,function(){d.controller.abort()})}var Pg=null,k2=0,qh=0,Zh=null;function Aue(d,h){if(Pg===null){var g=Pg=[];k2=0,qh=ET(),Zh={status:"pending",value:void 0,then:function(v){g.push(v)}}}return k2++,h.then(e5,e5),h}function e5(){if(--k2===0&&Pg!==null){Zh!==null&&(Zh.status="fulfilled");var d=Pg;Pg=null,qh=0,Zh=null;for(var h=0;h<d.length;h++)(0,d[h])()}}function Mue(d,h){var g=[],v={status:"pending",value:null,reason:null,then:function(C){g.push(C)}};return d.then(function(){v.status="fulfilled",v.value=h;for(var C=0;C<g.length;C++)(0,g[C])(h)},function(C){for(v.status="rejected",v.reason=C,C=0;C<g.length;C++)(0,g[C])(void 0)}),v}var t5=z.S;z.S=function(d,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Aue(d,h),t5!==null&&t5(d,h)};var rf=U(null);function C2(){var d=rf.current;return d!==null?d:In.pooledCache}function Wv(d,h){h===null?D(rf,rf.current):D(rf,h.pool)}function n5(){var d=C2();return d===null?null:{parent:Wr._currentValue,pool:d}}var Dg=Error(r(460)),r5=Error(r(474)),Kv=Error(r(542)),E2={then:function(){}};function o5(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Yv(){}function i5(d,h,g){switch(g=d[g],g===void 0?d.push(h):g!==h&&(h.then(Yv,Yv),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,a5(d),d;default:if(typeof h.status=="string")h.then(Yv,Yv);else{if(d=In,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=h,d.status="pending",d.then(function(v){if(h.status==="pending"){var C=h;C.status="fulfilled",C.value=v}},function(v){if(h.status==="pending"){var C=h;C.status="rejected",C.reason=v}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,a5(d),d}throw $g=h,Dg}}var $g=null;function s5(){if($g===null)throw Error(r(459));var d=$g;return $g=null,d}function a5(d){if(d===Dg||d===Kv)throw Error(r(483))}var wu=!1;function T2(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _2(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function xu(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Su(d,h,g){var v=d.updateQueue;if(v===null)return null;if(v=v.shared,(ln&2)!==0){var C=v.pending;return C===null?h.next=h:(h.next=C.next,C.next=h),v.pending=h,h=Fv(d),Z$(d,null,g),h}return Vv(d,v,h,g),Fv(d)}function Lg(d,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var v=h.lanes;v&=d.pendingLanes,g|=v,h.lanes=g,lr(d,g)}}function A2(d,h){var g=d.updateQueue,v=d.alternate;if(v!==null&&(v=v.updateQueue,g===v)){var C=null,_=null;if(g=g.firstBaseUpdate,g!==null){do{var P={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};_===null?C=_=P:_=_.next=P,g=g.next}while(g!==null);_===null?C=_=h:_=_.next=h}else C=_=h;g={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:_,shared:v.shared,callbacks:v.callbacks},d.updateQueue=g;return}d=g.lastBaseUpdate,d===null?g.firstBaseUpdate=h:d.next=h,g.lastBaseUpdate=h}var M2=!1;function jg(){if(M2){var d=Zh;if(d!==null)throw d}}function zg(d,h,g,v){M2=!1;var C=d.updateQueue;wu=!1;var _=C.firstBaseUpdate,P=C.lastBaseUpdate,j=C.shared.pending;if(j!==null){C.shared.pending=null;var Y=j,se=Y.next;Y.next=null,P===null?_=se:P.next=se,P=Y;var ve=d.alternate;ve!==null&&(ve=ve.updateQueue,j=ve.lastBaseUpdate,j!==P&&(j===null?ve.firstBaseUpdate=se:j.next=se,ve.lastBaseUpdate=Y))}if(_!==null){var Ce=C.baseState;P=0,ve=se=Y=null,j=_;do{var ce=j.lane&-536870913,ue=ce!==j.lane;if(ue?(Ht&ce)===ce:(v&ce)===ce){ce!==0&&ce===qh&&(M2=!0),ve!==null&&(ve=ve.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var ut=d,it=j;ce=h;var bn=g;switch(it.tag){case 1:if(ut=it.payload,typeof ut=="function"){Ce=ut.call(bn,Ce,ce);break e}Ce=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=it.payload,ce=typeof ut=="function"?ut.call(bn,Ce,ce):ut,ce==null)break e;Ce=u({},Ce,ce);break e;case 2:wu=!0}}ce=j.callback,ce!==null&&(d.flags|=64,ue&&(d.flags|=8192),ue=C.callbacks,ue===null?C.callbacks=[ce]:ue.push(ce))}else ue={lane:ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ve===null?(se=ve=ue,Y=Ce):ve=ve.next=ue,P|=ce;if(j=j.next,j===null){if(j=C.shared.pending,j===null)break;ue=j,j=ue.next,ue.next=null,C.lastBaseUpdate=ue,C.shared.pending=null}}while(!0);ve===null&&(Y=Ce),C.baseState=Y,C.firstBaseUpdate=se,C.lastBaseUpdate=ve,_===null&&(C.shared.lanes=0),Ru|=P,d.lanes=P,d.memoizedState=Ce}}function l5(d,h){if(typeof d!="function")throw Error(r(191,d));d.call(h)}function c5(d,h){var g=d.callbacks;if(g!==null)for(d.callbacks=null,d=0;d<g.length;d++)l5(g[d],h)}var Wh=U(null),Jv=U(0);function u5(d,h){d=Cc,D(Jv,d),D(Wh,h),Cc=d|h.baseLanes}function R2(){D(Jv,Cc),D(Wh,Wh.current)}function N2(){Cc=Jv.current,ee(Wh),ee(Jv)}var ku=0,At=null,gn=null,Pr=null,Xv=!1,Kh=!1,of=!1,Qv=0,Bg=0,Yh=null,Rue=0;function Tr(){throw Error(r(321))}function I2(d,h){if(h===null)return!1;for(var g=0;g<h.length&&g<d.length;g++)if(!is(d[g],h[g]))return!1;return!0}function O2(d,h,g,v,C,_){return ku=_,At=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,z.H=d===null||d.memoizedState===null?Z5:W5,of=!1,_=g(v,C),of=!1,Kh&&(_=f5(h,g,v,C)),d5(d),_}function d5(d){z.H=i1;var h=gn!==null&&gn.next!==null;if(ku=0,Pr=gn=At=null,Xv=!1,Bg=0,Yh=null,h)throw Error(r(300));d===null||fo||(d=d.dependencies,d!==null&&qv(d)&&(fo=!0))}function f5(d,h,g,v){At=d;var C=0;do{if(Kh&&(Yh=null),Bg=0,Kh=!1,25<=C)throw Error(r(301));if(C+=1,Pr=gn=null,d.updateQueue!=null){var _=d.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}z.H=Lue,_=h(g,v)}while(Kh);return _}function Nue(){var d=z.H,h=d.useState()[0];return h=typeof h.then=="function"?Vg(h):h,d=d.useState()[0],(gn!==null?gn.memoizedState:null)!==d&&(At.flags|=1024),h}function P2(){var d=Qv!==0;return Qv=0,d}function D2(d,h,g){h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~g}function $2(d){if(Xv){for(d=d.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}Xv=!1}ku=0,Pr=gn=At=null,Kh=!1,Bg=Qv=0,Yh=null}function Ai(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?At.memoizedState=Pr=d:Pr=Pr.next=d,Pr}function Dr(){if(gn===null){var d=At.alternate;d=d!==null?d.memoizedState:null}else d=gn.next;var h=Pr===null?At.memoizedState:Pr.next;if(h!==null)Pr=h,gn=d;else{if(d===null)throw At.alternate===null?Error(r(467)):Error(r(310));gn=d,d={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},Pr===null?At.memoizedState=Pr=d:Pr=Pr.next=d}return Pr}function L2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vg(d){var h=Bg;return Bg+=1,Yh===null&&(Yh=[]),d=i5(Yh,d,h),h=At,(Pr===null?h.memoizedState:Pr.next)===null&&(h=h.alternate,z.H=h===null||h.memoizedState===null?Z5:W5),d}function e1(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Vg(d);if(d.$$typeof===T)return Ho(d)}throw Error(r(438,String(d)))}function j2(d){var h=null,g=At.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var v=At.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(h={data:v.data.map(function(C){return C.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=L2(),At.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(d),v=0;v<d;v++)g[v]=$;return h.index++,g}function bc(d,h){return typeof h=="function"?h(d):h}function t1(d){var h=Dr();return z2(h,gn,d)}function z2(d,h,g){var v=d.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=g;var C=d.baseQueue,_=v.pending;if(_!==null){if(C!==null){var P=C.next;C.next=_.next,_.next=P}h.baseQueue=C=_,v.pending=null}if(_=d.baseState,C===null)d.memoizedState=_;else{h=C.next;var j=P=null,Y=null,se=h,ve=!1;do{var Ce=se.lane&-536870913;if(Ce!==se.lane?(Ht&Ce)===Ce:(ku&Ce)===Ce){var ce=se.revertLane;if(ce===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),Ce===qh&&(ve=!0);else if((ku&ce)===ce){se=se.next,ce===qh&&(ve=!0);continue}else Ce={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},Y===null?(j=Y=Ce,P=_):Y=Y.next=Ce,At.lanes|=ce,Ru|=ce;Ce=se.action,of&&g(_,Ce),_=se.hasEagerState?se.eagerState:g(_,Ce)}else ce={lane:Ce,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},Y===null?(j=Y=ce,P=_):Y=Y.next=ce,At.lanes|=Ce,Ru|=Ce;se=se.next}while(se!==null&&se!==h);if(Y===null?P=_:Y.next=j,!is(_,d.memoizedState)&&(fo=!0,ve&&(g=Zh,g!==null)))throw g;d.memoizedState=_,d.baseState=P,d.baseQueue=Y,v.lastRenderedState=_}return C===null&&(v.lanes=0),[d.memoizedState,v.dispatch]}function B2(d){var h=Dr(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var v=g.dispatch,C=g.pending,_=h.memoizedState;if(C!==null){g.pending=null;var P=C=C.next;do _=d(_,P.action),P=P.next;while(P!==C);is(_,h.memoizedState)||(fo=!0),h.memoizedState=_,h.baseQueue===null&&(h.baseState=_),g.lastRenderedState=_}return[_,v]}function h5(d,h,g){var v=At,C=Dr(),_=nn;if(_){if(g===void 0)throw Error(r(407));g=g()}else g=h();var P=!is((gn||C).memoizedState,g);P&&(C.memoizedState=g,fo=!0),C=C.queue;var j=g5.bind(null,v,C,d);if(Fg(2048,8,j,[d]),C.getSnapshot!==h||P||Pr!==null&&Pr.memoizedState.tag&1){if(v.flags|=2048,Jh(9,n1(),m5.bind(null,v,C,g,h),null),In===null)throw Error(r(349));_||(ku&124)!==0||p5(v,h,g)}return g}function p5(d,h,g){d.flags|=16384,d={getSnapshot:h,value:g},h=At.updateQueue,h===null?(h=L2(),At.updateQueue=h,h.stores=[d]):(g=h.stores,g===null?h.stores=[d]:g.push(d))}function m5(d,h,g,v){h.value=g,h.getSnapshot=v,y5(h)&&b5(d)}function g5(d,h,g){return g(function(){y5(h)&&b5(d)})}function y5(d){var h=d.getSnapshot;d=d.value;try{var g=h();return!is(d,g)}catch{return!0}}function b5(d){var h=Fh(d,2);h!==null&&ds(h,d,2)}function V2(d){var h=Ai();if(typeof d=="function"){var g=d;if(d=g(),of){Be(!0);try{g()}finally{Be(!1)}}}return h.memoizedState=h.baseState=d,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:d},h}function v5(d,h,g,v){return d.baseState=g,z2(d,gn,typeof v=="function"?v:bc)}function Iue(d,h,g,v,C){if(o1(d))throw Error(r(485));if(d=h.action,d!==null){var _={payload:C,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){_.listeners.push(P)}};z.T!==null?g(!0):_.isTransition=!1,v(_),g=h.pending,g===null?(_.next=h.pending=_,w5(h,_)):(_.next=g.next,h.pending=g.next=_)}}function w5(d,h){var g=h.action,v=h.payload,C=d.state;if(h.isTransition){var _=z.T,P={};z.T=P;try{var j=g(C,v),Y=z.S;Y!==null&&Y(P,j),x5(d,h,j)}catch(se){F2(d,h,se)}finally{z.T=_}}else try{_=g(C,v),x5(d,h,_)}catch(se){F2(d,h,se)}}function x5(d,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(v){S5(d,h,v)},function(v){return F2(d,h,v)}):S5(d,h,g)}function S5(d,h,g){h.status="fulfilled",h.value=g,k5(h),d.state=g,h=d.pending,h!==null&&(g=h.next,g===h?d.pending=null:(g=g.next,h.next=g,w5(d,g)))}function F2(d,h,g){var v=d.pending;if(d.pending=null,v!==null){v=v.next;do h.status="rejected",h.reason=g,k5(h),h=h.next;while(h!==v)}d.action=null}function k5(d){d=d.listeners;for(var h=0;h<d.length;h++)(0,d[h])()}function C5(d,h){return h}function E5(d,h){if(nn){var g=In.formState;if(g!==null){e:{var v=At;if(nn){if(dr){t:{for(var C=dr,_=yl;C.nodeType!==8;){if(!_){C=null;break t}if(C=Oa(C.nextSibling),C===null){C=null;break t}}_=C.data,C=_==="F!"||_==="F"?C:null}if(C){dr=Oa(C.nextSibling),v=C.data==="F!";break e}}ef(v)}v=!1}v&&(h=g[0])}}return g=Ai(),g.memoizedState=g.baseState=h,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C5,lastRenderedState:h},g.queue=v,g=U5.bind(null,At,v),v.dispatch=g,v=V2(!1),_=Z2.bind(null,At,!1,v.queue),v=Ai(),C={state:h,dispatch:null,action:d,pending:null},v.queue=C,g=Iue.bind(null,At,C,_,g),C.dispatch=g,v.memoizedState=d,[h,g,!1]}function T5(d){var h=Dr();return _5(h,gn,d)}function _5(d,h,g){if(h=z2(d,h,C5)[0],d=t1(bc)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var v=Vg(h)}catch(P){throw P===Dg?Kv:P}else v=h;h=Dr();var C=h.queue,_=C.dispatch;return g!==h.memoizedState&&(At.flags|=2048,Jh(9,n1(),Oue.bind(null,C,g),null)),[v,_,d]}function Oue(d,h){d.action=h}function A5(d){var h=Dr(),g=gn;if(g!==null)return _5(h,g,d);Dr(),h=h.memoizedState,g=Dr();var v=g.queue.dispatch;return g.memoizedState=d,[h,v,!1]}function Jh(d,h,g,v){return d={tag:d,create:g,deps:v,inst:h,next:null},h=At.updateQueue,h===null&&(h=L2(),At.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=d.next=d:(v=g.next,g.next=d,d.next=v,h.lastEffect=d),d}function n1(){return{destroy:void 0,resource:void 0}}function M5(){return Dr().memoizedState}function r1(d,h,g,v){var C=Ai();v=v===void 0?null:v,At.flags|=d,C.memoizedState=Jh(1|h,n1(),g,v)}function Fg(d,h,g,v){var C=Dr();v=v===void 0?null:v;var _=C.memoizedState.inst;gn!==null&&v!==null&&I2(v,gn.memoizedState.deps)?C.memoizedState=Jh(h,_,g,v):(At.flags|=d,C.memoizedState=Jh(1|h,_,g,v))}function R5(d,h){r1(8390656,8,d,h)}function N5(d,h){Fg(2048,8,d,h)}function I5(d,h){return Fg(4,2,d,h)}function O5(d,h){return Fg(4,4,d,h)}function P5(d,h){if(typeof h=="function"){d=d();var g=h(d);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function D5(d,h,g){g=g!=null?g.concat([d]):null,Fg(4,4,P5.bind(null,h,d),g)}function H2(){}function $5(d,h){var g=Dr();h=h===void 0?null:h;var v=g.memoizedState;return h!==null&&I2(h,v[1])?v[0]:(g.memoizedState=[d,h],d)}function L5(d,h){var g=Dr();h=h===void 0?null:h;var v=g.memoizedState;if(h!==null&&I2(h,v[1]))return v[0];if(v=d(),of){Be(!0);try{d()}finally{Be(!1)}}return g.memoizedState=[v,h],v}function U2(d,h,g){return g===void 0||(ku&1073741824)!==0?d.memoizedState=h:(d.memoizedState=g,d=BL(),At.lanes|=d,Ru|=d,g)}function j5(d,h,g,v){return is(g,h)?g:Wh.current!==null?(d=U2(d,g,v),is(d,h)||(fo=!0),d):(ku&42)===0?(fo=!0,d.memoizedState=g):(d=BL(),At.lanes|=d,Ru|=d,h)}function z5(d,h,g,v,C){var _=G.p;G.p=_!==0&&8>_?_:8;var P=z.T,j={};z.T=j,Z2(d,!1,h,g);try{var Y=C(),se=z.S;if(se!==null&&se(j,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ve=Mue(Y,v);Hg(d,h,ve,us(d))}else Hg(d,h,v,us(d))}catch(Ce){Hg(d,h,{then:function(){},status:"rejected",reason:Ce},us())}finally{G.p=_,z.T=P}}function Pue(){}function G2(d,h,g,v){if(d.tag!==5)throw Error(r(476));var C=B5(d).queue;z5(d,C,h,F,g===null?Pue:function(){return V5(d),g(v)})}function B5(d){var h=d.memoizedState;if(h!==null)return h;h={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:F},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:g},next:null},d.memoizedState=h,d=d.alternate,d!==null&&(d.memoizedState=h),h}function V5(d){var h=B5(d).next.queue;Hg(d,h,{},us())}function q2(){return Ho(ay)}function F5(){return Dr().memoizedState}function H5(){return Dr().memoizedState}function Due(d){for(var h=d.return;h!==null;){switch(h.tag){case 24:case 3:var g=us();d=xu(g);var v=Su(h,d,g);v!==null&&(ds(v,h,g),Lg(v,h,g)),h={cache:S2()},d.payload=h;return}h=h.return}}function $ue(d,h,g){var v=us();g={lane:v,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},o1(d)?G5(h,g):(g=f2(d,h,g,v),g!==null&&(ds(g,d,v),q5(g,h,v)))}function U5(d,h,g){var v=us();Hg(d,h,g,v)}function Hg(d,h,g,v){var C={lane:v,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(o1(d))G5(h,C);else{var _=d.alternate;if(d.lanes===0&&(_===null||_.lanes===0)&&(_=h.lastRenderedReducer,_!==null))try{var P=h.lastRenderedState,j=_(P,g);if(C.hasEagerState=!0,C.eagerState=j,is(j,P))return Vv(d,h,C,0),In===null&&Bv(),!1}catch{}finally{}if(g=f2(d,h,C,v),g!==null)return ds(g,d,v),q5(g,h,v),!0}return!1}function Z2(d,h,g,v){if(v={lane:2,revertLane:ET(),action:v,hasEagerState:!1,eagerState:null,next:null},o1(d)){if(h)throw Error(r(479))}else h=f2(d,g,v,2),h!==null&&ds(h,d,2)}function o1(d){var h=d.alternate;return d===At||h!==null&&h===At}function G5(d,h){Kh=Xv=!0;var g=d.pending;g===null?h.next=h:(h.next=g.next,g.next=h),d.pending=h}function q5(d,h,g){if((g&4194048)!==0){var v=h.lanes;v&=d.pendingLanes,g|=v,h.lanes=g,lr(d,g)}}var i1={readContext:Ho,use:e1,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useLayoutEffect:Tr,useInsertionEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useSyncExternalStore:Tr,useId:Tr,useHostTransitionStatus:Tr,useFormState:Tr,useActionState:Tr,useOptimistic:Tr,useMemoCache:Tr,useCacheRefresh:Tr},Z5={readContext:Ho,use:e1,useCallback:function(d,h){return Ai().memoizedState=[d,h===void 0?null:h],d},useContext:Ho,useEffect:R5,useImperativeHandle:function(d,h,g){g=g!=null?g.concat([d]):null,r1(4194308,4,P5.bind(null,h,d),g)},useLayoutEffect:function(d,h){return r1(4194308,4,d,h)},useInsertionEffect:function(d,h){r1(4,2,d,h)},useMemo:function(d,h){var g=Ai();h=h===void 0?null:h;var v=d();if(of){Be(!0);try{d()}finally{Be(!1)}}return g.memoizedState=[v,h],v},useReducer:function(d,h,g){var v=Ai();if(g!==void 0){var C=g(h);if(of){Be(!0);try{g(h)}finally{Be(!1)}}}else C=h;return v.memoizedState=v.baseState=C,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:C},v.queue=d,d=d.dispatch=$ue.bind(null,At,d),[v.memoizedState,d]},useRef:function(d){var h=Ai();return d={current:d},h.memoizedState=d},useState:function(d){d=V2(d);var h=d.queue,g=U5.bind(null,At,h);return h.dispatch=g,[d.memoizedState,g]},useDebugValue:H2,useDeferredValue:function(d,h){var g=Ai();return U2(g,d,h)},useTransition:function(){var d=V2(!1);return d=z5.bind(null,At,d.queue,!0,!1),Ai().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,h,g){var v=At,C=Ai();if(nn){if(g===void 0)throw Error(r(407));g=g()}else{if(g=h(),In===null)throw Error(r(349));(Ht&124)!==0||p5(v,h,g)}C.memoizedState=g;var _={value:g,getSnapshot:h};return C.queue=_,R5(g5.bind(null,v,_,d),[d]),v.flags|=2048,Jh(9,n1(),m5.bind(null,v,_,g,h),null),g},useId:function(){var d=Ai(),h=In.identifierPrefix;if(nn){var g=mc,v=pc;g=(v&~(1<<32-De(v)-1)).toString(32)+g,h=""+h+"R"+g,g=Qv++,0<g&&(h+="H"+g.toString(32)),h+=""}else g=Rue++,h=""+h+"r"+g.toString(32)+"";return d.memoizedState=h},useHostTransitionStatus:q2,useFormState:E5,useActionState:E5,useOptimistic:function(d){var h=Ai();h.memoizedState=h.baseState=d;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=Z2.bind(null,At,!0,g),g.dispatch=h,[d,h]},useMemoCache:j2,useCacheRefresh:function(){return Ai().memoizedState=Due.bind(null,At)}},W5={readContext:Ho,use:e1,useCallback:$5,useContext:Ho,useEffect:N5,useImperativeHandle:D5,useInsertionEffect:I5,useLayoutEffect:O5,useMemo:L5,useReducer:t1,useRef:M5,useState:function(){return t1(bc)},useDebugValue:H2,useDeferredValue:function(d,h){var g=Dr();return j5(g,gn.memoizedState,d,h)},useTransition:function(){var d=t1(bc)[0],h=Dr().memoizedState;return[typeof d=="boolean"?d:Vg(d),h]},useSyncExternalStore:h5,useId:F5,useHostTransitionStatus:q2,useFormState:T5,useActionState:T5,useOptimistic:function(d,h){var g=Dr();return v5(g,gn,d,h)},useMemoCache:j2,useCacheRefresh:H5},Lue={readContext:Ho,use:e1,useCallback:$5,useContext:Ho,useEffect:N5,useImperativeHandle:D5,useInsertionEffect:I5,useLayoutEffect:O5,useMemo:L5,useReducer:B2,useRef:M5,useState:function(){return B2(bc)},useDebugValue:H2,useDeferredValue:function(d,h){var g=Dr();return gn===null?U2(g,d,h):j5(g,gn.memoizedState,d,h)},useTransition:function(){var d=B2(bc)[0],h=Dr().memoizedState;return[typeof d=="boolean"?d:Vg(d),h]},useSyncExternalStore:h5,useId:F5,useHostTransitionStatus:q2,useFormState:A5,useActionState:A5,useOptimistic:function(d,h){var g=Dr();return gn!==null?v5(g,gn,d,h):(g.baseState=d,[d,g.queue.dispatch])},useMemoCache:j2,useCacheRefresh:H5},Xh=null,Ug=0;function s1(d){var h=Ug;return Ug+=1,Xh===null&&(Xh=[]),i5(Xh,d,h)}function Gg(d,h){h=h.props.ref,d.ref=h!==void 0?h:null}function a1(d,h){throw h.$$typeof===f?Error(r(525)):(d=Object.prototype.toString.call(h),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)))}function K5(d){var h=d._init;return h(d._payload)}function Y5(d){function h(te,J){if(d){var re=te.deletions;re===null?(te.deletions=[J],te.flags|=16):re.push(J)}}function g(te,J){if(!d)return null;for(;J!==null;)h(te,J),J=J.sibling;return null}function v(te){for(var J=new Map;te!==null;)te.key!==null?J.set(te.key,te):J.set(te.index,te),te=te.sibling;return J}function C(te,J){return te=hc(te,J),te.index=0,te.sibling=null,te}function _(te,J,re){return te.index=re,d?(re=te.alternate,re!==null?(re=re.index,re<J?(te.flags|=67108866,J):re):(te.flags|=67108866,J)):(te.flags|=1048576,J)}function P(te){return d&&te.alternate===null&&(te.flags|=67108866),te}function j(te,J,re,xe){return J===null||J.tag!==6?(J=p2(re,te.mode,xe),J.return=te,J):(J=C(J,re),J.return=te,J)}function Y(te,J,re,xe){var He=re.type;return He===y?ve(te,J,re.props.children,xe,re.key):J!==null&&(J.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===I&&K5(He)===J.type)?(J=C(J,re.props),Gg(J,re),J.return=te,J):(J=Hv(re.type,re.key,re.props,null,te.mode,xe),Gg(J,re),J.return=te,J)}function se(te,J,re,xe){return J===null||J.tag!==4||J.stateNode.containerInfo!==re.containerInfo||J.stateNode.implementation!==re.implementation?(J=m2(re,te.mode,xe),J.return=te,J):(J=C(J,re.children||[]),J.return=te,J)}function ve(te,J,re,xe,He){return J===null||J.tag!==7?(J=Yd(re,te.mode,xe,He),J.return=te,J):(J=C(J,re),J.return=te,J)}function Ce(te,J,re){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=p2(""+J,te.mode,re),J.return=te,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case p:return re=Hv(J.type,J.key,J.props,null,te.mode,re),Gg(re,J),re.return=te,re;case m:return J=m2(J,te.mode,re),J.return=te,J;case I:var xe=J._init;return J=xe(J._payload),Ce(te,J,re)}if(K(J)||H(J))return J=Yd(J,te.mode,re,null),J.return=te,J;if(typeof J.then=="function")return Ce(te,s1(J),re);if(J.$$typeof===T)return Ce(te,Zv(te,J),re);a1(te,J)}return null}function ce(te,J,re,xe){var He=J!==null?J.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return He!==null?null:j(te,J,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case p:return re.key===He?Y(te,J,re,xe):null;case m:return re.key===He?se(te,J,re,xe):null;case I:return He=re._init,re=He(re._payload),ce(te,J,re,xe)}if(K(re)||H(re))return He!==null?null:ve(te,J,re,xe,null);if(typeof re.then=="function")return ce(te,J,s1(re),xe);if(re.$$typeof===T)return ce(te,J,Zv(te,re),xe);a1(te,re)}return null}function ue(te,J,re,xe,He){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return te=te.get(re)||null,j(J,te,""+xe,He);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case p:return te=te.get(xe.key===null?re:xe.key)||null,Y(J,te,xe,He);case m:return te=te.get(xe.key===null?re:xe.key)||null,se(J,te,xe,He);case I:var It=xe._init;return xe=It(xe._payload),ue(te,J,re,xe,He)}if(K(xe)||H(xe))return te=te.get(re)||null,ve(J,te,xe,He,null);if(typeof xe.then=="function")return ue(te,J,re,s1(xe),He);if(xe.$$typeof===T)return ue(te,J,re,Zv(J,xe),He);a1(J,xe)}return null}function ut(te,J,re,xe){for(var He=null,It=null,Je=J,lt=J=0,po=null;Je!==null&&lt<re.length;lt++){Je.index>lt?(po=Je,Je=null):po=Je.sibling;var Xt=ce(te,Je,re[lt],xe);if(Xt===null){Je===null&&(Je=po);break}d&&Je&&Xt.alternate===null&&h(te,Je),J=_(Xt,J,lt),It===null?He=Xt:It.sibling=Xt,It=Xt,Je=po}if(lt===re.length)return g(te,Je),nn&&Xd(te,lt),He;if(Je===null){for(;lt<re.length;lt++)Je=Ce(te,re[lt],xe),Je!==null&&(J=_(Je,J,lt),It===null?He=Je:It.sibling=Je,It=Je);return nn&&Xd(te,lt),He}for(Je=v(Je);lt<re.length;lt++)po=ue(Je,te,lt,re[lt],xe),po!==null&&(d&&po.alternate!==null&&Je.delete(po.key===null?lt:po.key),J=_(po,J,lt),It===null?He=po:It.sibling=po,It=po);return d&&Je.forEach(function(zu){return h(te,zu)}),nn&&Xd(te,lt),He}function it(te,J,re,xe){if(re==null)throw Error(r(151));for(var He=null,It=null,Je=J,lt=J=0,po=null,Xt=re.next();Je!==null&&!Xt.done;lt++,Xt=re.next()){Je.index>lt?(po=Je,Je=null):po=Je.sibling;var zu=ce(te,Je,Xt.value,xe);if(zu===null){Je===null&&(Je=po);break}d&&Je&&zu.alternate===null&&h(te,Je),J=_(zu,J,lt),It===null?He=zu:It.sibling=zu,It=zu,Je=po}if(Xt.done)return g(te,Je),nn&&Xd(te,lt),He;if(Je===null){for(;!Xt.done;lt++,Xt=re.next())Xt=Ce(te,Xt.value,xe),Xt!==null&&(J=_(Xt,J,lt),It===null?He=Xt:It.sibling=Xt,It=Xt);return nn&&Xd(te,lt),He}for(Je=v(Je);!Xt.done;lt++,Xt=re.next())Xt=ue(Je,te,lt,Xt.value,xe),Xt!==null&&(d&&Xt.alternate!==null&&Je.delete(Xt.key===null?lt:Xt.key),J=_(Xt,J,lt),It===null?He=Xt:It.sibling=Xt,It=Xt);return d&&Je.forEach(function(jde){return h(te,jde)}),nn&&Xd(te,lt),He}function bn(te,J,re,xe){if(typeof re=="object"&&re!==null&&re.type===y&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case p:e:{for(var He=re.key;J!==null;){if(J.key===He){if(He=re.type,He===y){if(J.tag===7){g(te,J.sibling),xe=C(J,re.props.children),xe.return=te,te=xe;break e}}else if(J.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===I&&K5(He)===J.type){g(te,J.sibling),xe=C(J,re.props),Gg(xe,re),xe.return=te,te=xe;break e}g(te,J);break}else h(te,J);J=J.sibling}re.type===y?(xe=Yd(re.props.children,te.mode,xe,re.key),xe.return=te,te=xe):(xe=Hv(re.type,re.key,re.props,null,te.mode,xe),Gg(xe,re),xe.return=te,te=xe)}return P(te);case m:e:{for(He=re.key;J!==null;){if(J.key===He)if(J.tag===4&&J.stateNode.containerInfo===re.containerInfo&&J.stateNode.implementation===re.implementation){g(te,J.sibling),xe=C(J,re.children||[]),xe.return=te,te=xe;break e}else{g(te,J);break}else h(te,J);J=J.sibling}xe=m2(re,te.mode,xe),xe.return=te,te=xe}return P(te);case I:return He=re._init,re=He(re._payload),bn(te,J,re,xe)}if(K(re))return ut(te,J,re,xe);if(H(re)){if(He=H(re),typeof He!="function")throw Error(r(150));return re=He.call(re),it(te,J,re,xe)}if(typeof re.then=="function")return bn(te,J,s1(re),xe);if(re.$$typeof===T)return bn(te,J,Zv(te,re),xe);a1(te,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,J!==null&&J.tag===6?(g(te,J.sibling),xe=C(J,re),xe.return=te,te=xe):(g(te,J),xe=p2(re,te.mode,xe),xe.return=te,te=xe),P(te)):g(te,J)}return function(te,J,re,xe){try{Ug=0;var He=bn(te,J,re,xe);return Xh=null,He}catch(Je){if(Je===Dg||Je===Kv)throw Je;var It=ss(29,Je,null,te.mode);return It.lanes=xe,It.return=te,It}finally{}}}var Qh=Y5(!0),J5=Y5(!1),qs=U(null),bl=null;function Cu(d){var h=d.alternate;D(Kr,Kr.current&1),D(qs,d),bl===null&&(h===null||Wh.current!==null||h.memoizedState!==null)&&(bl=d)}function X5(d){if(d.tag===22){if(D(Kr,Kr.current),D(qs,d),bl===null){var h=d.alternate;h!==null&&h.memoizedState!==null&&(bl=d)}}else Eu()}function Eu(){D(Kr,Kr.current),D(qs,qs.current)}function vc(d){ee(qs),bl===d&&(bl=null),ee(Kr)}var Kr=U(0);function l1(d){for(var h=d;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||LT(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function W2(d,h,g,v){h=d.memoizedState,g=g(v,h),g=g==null?h:u({},h,g),d.memoizedState=g,d.lanes===0&&(d.updateQueue.baseState=g)}var K2={enqueueSetState:function(d,h,g){d=d._reactInternals;var v=us(),C=xu(v);C.payload=h,g!=null&&(C.callback=g),h=Su(d,C,v),h!==null&&(ds(h,d,v),Lg(h,d,v))},enqueueReplaceState:function(d,h,g){d=d._reactInternals;var v=us(),C=xu(v);C.tag=1,C.payload=h,g!=null&&(C.callback=g),h=Su(d,C,v),h!==null&&(ds(h,d,v),Lg(h,d,v))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var g=us(),v=xu(g);v.tag=2,h!=null&&(v.callback=h),h=Su(d,v,g),h!==null&&(ds(h,d,g),Lg(h,d,g))}};function Q5(d,h,g,v,C,_,P){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(v,_,P):h.prototype&&h.prototype.isPureReactComponent?!_g(g,v)||!_g(C,_):!0}function eL(d,h,g,v){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,v),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,v),h.state!==d&&K2.enqueueReplaceState(h,h.state,null)}function sf(d,h){var g=h;if("ref"in h){g={};for(var v in h)v!=="ref"&&(g[v]=h[v])}if(d=d.defaultProps){g===h&&(g=u({},g));for(var C in d)g[C]===void 0&&(g[C]=d[C])}return g}var c1=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function tL(d){c1(d)}function nL(d){console.error(d)}function rL(d){c1(d)}function u1(d,h){try{var g=d.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(v){setTimeout(function(){throw v})}}function oL(d,h,g){try{var v=d.onCaughtError;v(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Y2(d,h,g){return g=xu(g),g.tag=3,g.payload={element:null},g.callback=function(){u1(d,h)},g}function iL(d){return d=xu(d),d.tag=3,d}function sL(d,h,g,v){var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var _=v.value;d.payload=function(){return C(_)},d.callback=function(){oL(h,g,v)}}var P=g.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(d.callback=function(){oL(h,g,v),typeof C!="function"&&(Nu===null?Nu=new Set([this]):Nu.add(this));var j=v.stack;this.componentDidCatch(v.value,{componentStack:j!==null?j:""})})}function jue(d,h,g,v,C){if(g.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(h=g.alternate,h!==null&&Ig(h,g,C,!0),g=qs.current,g!==null){switch(g.tag){case 13:return bl===null?wT():g.alternate===null&&fr===0&&(fr=3),g.flags&=-257,g.flags|=65536,g.lanes=C,v===E2?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([v]):h.add(v),ST(d,v,C)),!1;case 22:return g.flags|=65536,v===E2?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([v])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([v]):g.add(v)),ST(d,v,C)),!1}throw Error(r(435,g.tag))}return ST(d,v,C),wT(),!1}if(nn)return h=qs.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=C,v!==b2&&(d=Error(r(422),{cause:v}),Ng(Fs(d,g)))):(v!==b2&&(h=Error(r(423),{cause:v}),Ng(Fs(h,g))),d=d.current.alternate,d.flags|=65536,C&=-C,d.lanes|=C,v=Fs(v,g),C=Y2(d.stateNode,v,C),A2(d,C),fr!==4&&(fr=2)),!1;var _=Error(r(520),{cause:v});if(_=Fs(_,g),Xg===null?Xg=[_]:Xg.push(_),fr!==4&&(fr=2),h===null)return!0;v=Fs(v,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,d=C&-C,g.lanes|=d,d=Y2(g.stateNode,v,d),A2(g,d),!1;case 1:if(h=g.type,_=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Nu===null||!Nu.has(_))))return g.flags|=65536,C&=-C,g.lanes|=C,C=iL(C),sL(C,d,g,v),A2(g,C),!1}g=g.return}while(g!==null);return!1}var aL=Error(r(461)),fo=!1;function Eo(d,h,g,v){h.child=d===null?J5(h,null,g,v):Qh(h,d.child,g,v)}function lL(d,h,g,v,C){g=g.render;var _=h.ref;if("ref"in v){var P={};for(var j in v)j!=="ref"&&(P[j]=v[j])}else P=v;return nf(h),v=O2(d,h,g,P,_,C),j=P2(),d!==null&&!fo?(D2(d,h,C),wc(d,h,C)):(nn&&j&&g2(h),h.flags|=1,Eo(d,h,v,C),h.child)}function cL(d,h,g,v,C){if(d===null){var _=g.type;return typeof _=="function"&&!h2(_)&&_.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=_,uL(d,h,_,v,C)):(d=Hv(g.type,null,v,h,h.mode,C),d.ref=h.ref,d.return=h,h.child=d)}if(_=d.child,!oT(d,C)){var P=_.memoizedProps;if(g=g.compare,g=g!==null?g:_g,g(P,v)&&d.ref===h.ref)return wc(d,h,C)}return h.flags|=1,d=hc(_,v),d.ref=h.ref,d.return=h,h.child=d}function uL(d,h,g,v,C){if(d!==null){var _=d.memoizedProps;if(_g(_,v)&&d.ref===h.ref)if(fo=!1,h.pendingProps=v=_,oT(d,C))(d.flags&131072)!==0&&(fo=!0);else return h.lanes=d.lanes,wc(d,h,C)}return J2(d,h,g,v,C)}function dL(d,h,g){var v=h.pendingProps,C=v.children,_=d!==null?d.memoizedState:null;if(v.mode==="hidden"){if((h.flags&128)!==0){if(v=_!==null?_.baseLanes|g:g,d!==null){for(C=h.child=d.child,_=0;C!==null;)_=_|C.lanes|C.childLanes,C=C.sibling;h.childLanes=_&~v}else h.childLanes=0,h.child=null;return fL(d,h,v,g)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},d!==null&&Wv(h,_!==null?_.cachePool:null),_!==null?u5(h,_):R2(),X5(h);else return h.lanes=h.childLanes=536870912,fL(d,h,_!==null?_.baseLanes|g:g,g)}else _!==null?(Wv(h,_.cachePool),u5(h,_),Eu(),h.memoizedState=null):(d!==null&&Wv(h,null),R2(),Eu());return Eo(d,h,C,g),h.child}function fL(d,h,g,v){var C=C2();return C=C===null?null:{parent:Wr._currentValue,pool:C},h.memoizedState={baseLanes:g,cachePool:C},d!==null&&Wv(h,null),R2(),X5(h),d!==null&&Ig(d,h,v,!0),null}function d1(d,h){var g=h.ref;if(g===null)d!==null&&d.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(d===null||d.ref!==g)&&(h.flags|=4194816)}}function J2(d,h,g,v,C){return nf(h),g=O2(d,h,g,v,void 0,C),v=P2(),d!==null&&!fo?(D2(d,h,C),wc(d,h,C)):(nn&&v&&g2(h),h.flags|=1,Eo(d,h,g,C),h.child)}function hL(d,h,g,v,C,_){return nf(h),h.updateQueue=null,g=f5(h,v,g,C),d5(d),v=P2(),d!==null&&!fo?(D2(d,h,_),wc(d,h,_)):(nn&&v&&g2(h),h.flags|=1,Eo(d,h,g,_),h.child)}function pL(d,h,g,v,C){if(nf(h),h.stateNode===null){var _=Hh,P=g.contextType;typeof P=="object"&&P!==null&&(_=Ho(P)),_=new g(v,_),h.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=K2,h.stateNode=_,_._reactInternals=h,_=h.stateNode,_.props=v,_.state=h.memoizedState,_.refs={},T2(h),P=g.contextType,_.context=typeof P=="object"&&P!==null?Ho(P):Hh,_.state=h.memoizedState,P=g.getDerivedStateFromProps,typeof P=="function"&&(W2(h,g,P,v),_.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(P=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),P!==_.state&&K2.enqueueReplaceState(_,_.state,null),zg(h,v,_,C),jg(),_.state=h.memoizedState),typeof _.componentDidMount=="function"&&(h.flags|=4194308),v=!0}else if(d===null){_=h.stateNode;var j=h.memoizedProps,Y=sf(g,j);_.props=Y;var se=_.context,ve=g.contextType;P=Hh,typeof ve=="object"&&ve!==null&&(P=Ho(ve));var Ce=g.getDerivedStateFromProps;ve=typeof Ce=="function"||typeof _.getSnapshotBeforeUpdate=="function",j=h.pendingProps!==j,ve||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j||se!==P)&&eL(h,_,v,P),wu=!1;var ce=h.memoizedState;_.state=ce,zg(h,v,_,C),jg(),se=h.memoizedState,j||ce!==se||wu?(typeof Ce=="function"&&(W2(h,g,Ce,v),se=h.memoizedState),(Y=wu||Q5(h,g,Y,v,ce,se,P))?(ve||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(h.flags|=4194308)):(typeof _.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=v,h.memoizedState=se),_.props=v,_.state=se,_.context=P,v=Y):(typeof _.componentDidMount=="function"&&(h.flags|=4194308),v=!1)}else{_=h.stateNode,_2(d,h),P=h.memoizedProps,ve=sf(g,P),_.props=ve,Ce=h.pendingProps,ce=_.context,se=g.contextType,Y=Hh,typeof se=="object"&&se!==null&&(Y=Ho(se)),j=g.getDerivedStateFromProps,(se=typeof j=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==Ce||ce!==Y)&&eL(h,_,v,Y),wu=!1,ce=h.memoizedState,_.state=ce,zg(h,v,_,C),jg();var ue=h.memoizedState;P!==Ce||ce!==ue||wu||d!==null&&d.dependencies!==null&&qv(d.dependencies)?(typeof j=="function"&&(W2(h,g,j,v),ue=h.memoizedState),(ve=wu||Q5(h,g,ve,v,ce,ue,Y)||d!==null&&d.dependencies!==null&&qv(d.dependencies))?(se||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(v,ue,Y),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(v,ue,Y)),typeof _.componentDidUpdate=="function"&&(h.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===d.memoizedProps&&ce===d.memoizedState||(h.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===d.memoizedProps&&ce===d.memoizedState||(h.flags|=1024),h.memoizedProps=v,h.memoizedState=ue),_.props=v,_.state=ue,_.context=Y,v=ve):(typeof _.componentDidUpdate!="function"||P===d.memoizedProps&&ce===d.memoizedState||(h.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===d.memoizedProps&&ce===d.memoizedState||(h.flags|=1024),v=!1)}return _=v,d1(d,h),v=(h.flags&128)!==0,_||v?(_=h.stateNode,g=v&&typeof g.getDerivedStateFromError!="function"?null:_.render(),h.flags|=1,d!==null&&v?(h.child=Qh(h,d.child,null,C),h.child=Qh(h,null,g,C)):Eo(d,h,g,C),h.memoizedState=_.state,d=h.child):d=wc(d,h,C),d}function mL(d,h,g,v){return Rg(),h.flags|=256,Eo(d,h,g,v),h.child}var X2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Q2(d){return{baseLanes:d,cachePool:n5()}}function eT(d,h,g){return d=d!==null?d.childLanes&~g:0,h&&(d|=Zs),d}function gL(d,h,g){var v=h.pendingProps,C=!1,_=(h.flags&128)!==0,P;if((P=_)||(P=d!==null&&d.memoizedState===null?!1:(Kr.current&2)!==0),P&&(C=!0,h.flags&=-129),P=(h.flags&32)!==0,h.flags&=-33,d===null){if(nn){if(C?Cu(h):Eu(),nn){var j=dr,Y;if(Y=j){e:{for(Y=j,j=yl;Y.nodeType!==8;){if(!j){j=null;break e}if(Y=Oa(Y.nextSibling),Y===null){j=null;break e}}j=Y}j!==null?(h.memoizedState={dehydrated:j,treeContext:Jd!==null?{id:pc,overflow:mc}:null,retryLane:536870912,hydrationErrors:null},Y=ss(18,null,null,0),Y.stateNode=j,Y.return=h,h.child=Y,li=h,dr=null,Y=!0):Y=!1}Y||ef(h)}if(j=h.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return LT(j)?h.lanes=32:h.lanes=536870912,null;vc(h)}return j=v.children,v=v.fallback,C?(Eu(),C=h.mode,j=f1({mode:"hidden",children:j},C),v=Yd(v,C,g,null),j.return=h,v.return=h,j.sibling=v,h.child=j,C=h.child,C.memoizedState=Q2(g),C.childLanes=eT(d,P,g),h.memoizedState=X2,v):(Cu(h),tT(h,j))}if(Y=d.memoizedState,Y!==null&&(j=Y.dehydrated,j!==null)){if(_)h.flags&256?(Cu(h),h.flags&=-257,h=nT(d,h,g)):h.memoizedState!==null?(Eu(),h.child=d.child,h.flags|=128,h=null):(Eu(),C=v.fallback,j=h.mode,v=f1({mode:"visible",children:v.children},j),C=Yd(C,j,g,null),C.flags|=2,v.return=h,C.return=h,v.sibling=C,h.child=v,Qh(h,d.child,null,g),v=h.child,v.memoizedState=Q2(g),v.childLanes=eT(d,P,g),h.memoizedState=X2,h=C);else if(Cu(h),LT(j)){if(P=j.nextSibling&&j.nextSibling.dataset,P)var se=P.dgst;P=se,v=Error(r(419)),v.stack="",v.digest=P,Ng({value:v,source:null,stack:null}),h=nT(d,h,g)}else if(fo||Ig(d,h,g,!1),P=(g&d.childLanes)!==0,fo||P){if(P=In,P!==null&&(v=g&-g,v=(v&42)!==0?1:ki(v),v=(v&(P.suspendedLanes|g))!==0?0:v,v!==0&&v!==Y.retryLane))throw Y.retryLane=v,Fh(d,v),ds(P,d,v),aL;j.data==="$?"||wT(),h=nT(d,h,g)}else j.data==="$?"?(h.flags|=192,h.child=d.child,h=null):(d=Y.treeContext,dr=Oa(j.nextSibling),li=h,nn=!0,Qd=null,yl=!1,d!==null&&(Us[Gs++]=pc,Us[Gs++]=mc,Us[Gs++]=Jd,pc=d.id,mc=d.overflow,Jd=h),h=tT(h,v.children),h.flags|=4096);return h}return C?(Eu(),C=v.fallback,j=h.mode,Y=d.child,se=Y.sibling,v=hc(Y,{mode:"hidden",children:v.children}),v.subtreeFlags=Y.subtreeFlags&65011712,se!==null?C=hc(se,C):(C=Yd(C,j,g,null),C.flags|=2),C.return=h,v.return=h,v.sibling=C,h.child=v,v=C,C=h.child,j=d.child.memoizedState,j===null?j=Q2(g):(Y=j.cachePool,Y!==null?(se=Wr._currentValue,Y=Y.parent!==se?{parent:se,pool:se}:Y):Y=n5(),j={baseLanes:j.baseLanes|g,cachePool:Y}),C.memoizedState=j,C.childLanes=eT(d,P,g),h.memoizedState=X2,v):(Cu(h),g=d.child,d=g.sibling,g=hc(g,{mode:"visible",children:v.children}),g.return=h,g.sibling=null,d!==null&&(P=h.deletions,P===null?(h.deletions=[d],h.flags|=16):P.push(d)),h.child=g,h.memoizedState=null,g)}function tT(d,h){return h=f1({mode:"visible",children:h},d.mode),h.return=d,d.child=h}function f1(d,h){return d=ss(22,d,null,h),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function nT(d,h,g){return Qh(h,d.child,null,g),d=tT(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function yL(d,h,g){d.lanes|=h;var v=d.alternate;v!==null&&(v.lanes|=h),w2(d.return,h,g)}function rT(d,h,g,v,C){var _=d.memoizedState;_===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:v,tail:g,tailMode:C}:(_.isBackwards=h,_.rendering=null,_.renderingStartTime=0,_.last=v,_.tail=g,_.tailMode=C)}function bL(d,h,g){var v=h.pendingProps,C=v.revealOrder,_=v.tail;if(Eo(d,h,v.children,g),v=Kr.current,(v&2)!==0)v=v&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&yL(d,g,h);else if(d.tag===19)yL(d,g,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}v&=1}switch(D(Kr,v),C){case"forwards":for(g=h.child,C=null;g!==null;)d=g.alternate,d!==null&&l1(d)===null&&(C=g),g=g.sibling;g=C,g===null?(C=h.child,h.child=null):(C=g.sibling,g.sibling=null),rT(h,!1,C,g,_);break;case"backwards":for(g=null,C=h.child,h.child=null;C!==null;){if(d=C.alternate,d!==null&&l1(d)===null){h.child=C;break}d=C.sibling,C.sibling=g,g=C,C=d}rT(h,!0,g,null,_);break;case"together":rT(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function wc(d,h,g){if(d!==null&&(h.dependencies=d.dependencies),Ru|=h.lanes,(g&h.childLanes)===0)if(d!==null){if(Ig(d,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(d!==null&&h.child!==d.child)throw Error(r(153));if(h.child!==null){for(d=h.child,g=hc(d,d.pendingProps),h.child=g,g.return=h;d.sibling!==null;)d=d.sibling,g=g.sibling=hc(d,d.pendingProps),g.return=h;g.sibling=null}return h.child}function oT(d,h){return(d.lanes&h)!==0?!0:(d=d.dependencies,!!(d!==null&&qv(d)))}function zue(d,h,g){switch(h.tag){case 3:ge(h,h.stateNode.containerInfo),vu(h,Wr,d.memoizedState.cache),Rg();break;case 27:case 5:je(h);break;case 4:ge(h,h.stateNode.containerInfo);break;case 10:vu(h,h.type,h.memoizedProps.value);break;case 13:var v=h.memoizedState;if(v!==null)return v.dehydrated!==null?(Cu(h),h.flags|=128,null):(g&h.child.childLanes)!==0?gL(d,h,g):(Cu(h),d=wc(d,h,g),d!==null?d.sibling:null);Cu(h);break;case 19:var C=(d.flags&128)!==0;if(v=(g&h.childLanes)!==0,v||(Ig(d,h,g,!1),v=(g&h.childLanes)!==0),C){if(v)return bL(d,h,g);h.flags|=128}if(C=h.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),D(Kr,Kr.current),v)break;return null;case 22:case 23:return h.lanes=0,dL(d,h,g);case 24:vu(h,Wr,d.memoizedState.cache)}return wc(d,h,g)}function vL(d,h,g){if(d!==null)if(d.memoizedProps!==h.pendingProps)fo=!0;else{if(!oT(d,g)&&(h.flags&128)===0)return fo=!1,zue(d,h,g);fo=(d.flags&131072)!==0}else fo=!1,nn&&(h.flags&1048576)!==0&&K$(h,Gv,h.index);switch(h.lanes=0,h.tag){case 16:e:{d=h.pendingProps;var v=h.elementType,C=v._init;if(v=C(v._payload),h.type=v,typeof v=="function")h2(v)?(d=sf(v,d),h.tag=1,h=pL(null,h,v,d,g)):(h.tag=0,h=J2(null,h,v,d,g));else{if(v!=null){if(C=v.$$typeof,C===A){h.tag=11,h=lL(null,h,v,d,g);break e}else if(C===O){h.tag=14,h=cL(null,h,v,d,g);break e}}throw h=W(v)||v,Error(r(306,h,""))}}return h;case 0:return J2(d,h,h.type,h.pendingProps,g);case 1:return v=h.type,C=sf(v,h.pendingProps),pL(d,h,v,C,g);case 3:e:{if(ge(h,h.stateNode.containerInfo),d===null)throw Error(r(387));v=h.pendingProps;var _=h.memoizedState;C=_.element,_2(d,h),zg(h,v,null,g);var P=h.memoizedState;if(v=P.cache,vu(h,Wr,v),v!==_.cache&&x2(h,[Wr],g,!0),jg(),v=P.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:P.cache},h.updateQueue.baseState=_,h.memoizedState=_,h.flags&256){h=mL(d,h,v,g);break e}else if(v!==C){C=Fs(Error(r(424)),h),Ng(C),h=mL(d,h,v,g);break e}else{switch(d=h.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(dr=Oa(d.firstChild),li=h,nn=!0,Qd=null,yl=!0,g=J5(h,null,v,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Rg(),v===C){h=wc(d,h,g);break e}Eo(d,h,v,g)}h=h.child}return h;case 26:return d1(d,h),d===null?(g=kj(h.type,null,h.pendingProps,null))?h.memoizedState=g:nn||(g=h.type,d=h.pendingProps,v=T1(he.current).createElement(g),v[on]=h,v[Wt]=d,_o(v,g,d),Wn(v),h.stateNode=v):h.memoizedState=kj(h.type,d.memoizedProps,h.pendingProps,d.memoizedState),null;case 27:return je(h),d===null&&nn&&(v=h.stateNode=wj(h.type,h.pendingProps,he.current),li=h,yl=!0,C=dr,Pu(h.type)?(jT=C,dr=Oa(v.firstChild)):dr=C),Eo(d,h,h.pendingProps.children,g),d1(d,h),d===null&&(h.flags|=4194304),h.child;case 5:return d===null&&nn&&((C=v=dr)&&(v=hde(v,h.type,h.pendingProps,yl),v!==null?(h.stateNode=v,li=h,dr=Oa(v.firstChild),yl=!1,C=!0):C=!1),C||ef(h)),je(h),C=h.type,_=h.pendingProps,P=d!==null?d.memoizedProps:null,v=_.children,PT(C,_)?v=null:P!==null&&PT(C,P)&&(h.flags|=32),h.memoizedState!==null&&(C=O2(d,h,Nue,null,null,g),ay._currentValue=C),d1(d,h),Eo(d,h,v,g),h.child;case 6:return d===null&&nn&&((d=g=dr)&&(g=pde(g,h.pendingProps,yl),g!==null?(h.stateNode=g,li=h,dr=null,d=!0):d=!1),d||ef(h)),null;case 13:return gL(d,h,g);case 4:return ge(h,h.stateNode.containerInfo),v=h.pendingProps,d===null?h.child=Qh(h,null,v,g):Eo(d,h,v,g),h.child;case 11:return lL(d,h,h.type,h.pendingProps,g);case 7:return Eo(d,h,h.pendingProps,g),h.child;case 8:return Eo(d,h,h.pendingProps.children,g),h.child;case 12:return Eo(d,h,h.pendingProps.children,g),h.child;case 10:return v=h.pendingProps,vu(h,h.type,v.value),Eo(d,h,v.children,g),h.child;case 9:return C=h.type._context,v=h.pendingProps.children,nf(h),C=Ho(C),v=v(C),h.flags|=1,Eo(d,h,v,g),h.child;case 14:return cL(d,h,h.type,h.pendingProps,g);case 15:return uL(d,h,h.type,h.pendingProps,g);case 19:return bL(d,h,g);case 31:return v=h.pendingProps,g=h.mode,v={mode:v.mode,children:v.children},d===null?(g=f1(v,g),g.ref=h.ref,h.child=g,g.return=h,h=g):(g=hc(d.child,v),g.ref=h.ref,h.child=g,g.return=h,h=g),h;case 22:return dL(d,h,g);case 24:return nf(h),v=Ho(Wr),d===null?(C=C2(),C===null&&(C=In,_=S2(),C.pooledCache=_,_.refCount++,_!==null&&(C.pooledCacheLanes|=g),C=_),h.memoizedState={parent:v,cache:C},T2(h),vu(h,Wr,C)):((d.lanes&g)!==0&&(_2(d,h),zg(h,null,null,g),jg()),C=d.memoizedState,_=h.memoizedState,C.parent!==v?(C={parent:v,cache:v},h.memoizedState=C,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=C),vu(h,Wr,v)):(v=_.cache,vu(h,Wr,v),v!==C.cache&&x2(h,[Wr],g,!0))),Eo(d,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function xc(d){d.flags|=4}function wL(d,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!Aj(h)){if(h=qs.current,h!==null&&((Ht&4194048)===Ht?bl!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||h!==bl))throw $g=E2,r5;d.flags|=8192}}function h1(d,h){h!==null&&(d.flags|=4),d.flags&16384&&(h=d.tag!==22?Ki():536870912,d.lanes|=h,rp|=h)}function qg(d,h){if(!nn)switch(d.tailMode){case"hidden":h=d.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?d.tail=null:g.sibling=null;break;case"collapsed":g=d.tail;for(var v=null;g!==null;)g.alternate!==null&&(v=g),g=g.sibling;v===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:v.sibling=null}}function rr(d){var h=d.alternate!==null&&d.alternate.child===d.child,g=0,v=0;if(h)for(var C=d.child;C!==null;)g|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=d,C=C.sibling;else for(C=d.child;C!==null;)g|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=d,C=C.sibling;return d.subtreeFlags|=v,d.childLanes=g,h}function Bue(d,h,g){var v=h.pendingProps;switch(y2(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(h),null;case 1:return rr(h),null;case 3:return g=h.stateNode,v=null,d!==null&&(v=d.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),yc(Wr),Oe(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(d===null||d.child===null)&&(Mg(h)?xc(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,X$())),rr(h),null;case 26:return g=h.memoizedState,d===null?(xc(h),g!==null?(rr(h),wL(h,g)):(rr(h),h.flags&=-16777217)):g?g!==d.memoizedState?(xc(h),rr(h),wL(h,g)):(rr(h),h.flags&=-16777217):(d.memoizedProps!==v&&xc(h),rr(h),h.flags&=-16777217),null;case 27:ye(h),g=he.current;var C=h.type;if(d!==null&&h.stateNode!=null)d.memoizedProps!==v&&xc(h);else{if(!v){if(h.stateNode===null)throw Error(r(166));return rr(h),null}d=ae.current,Mg(h)?Y$(h):(d=wj(C,v,g),h.stateNode=d,xc(h))}return rr(h),null;case 5:if(ye(h),g=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==v&&xc(h);else{if(!v){if(h.stateNode===null)throw Error(r(166));return rr(h),null}if(d=ae.current,Mg(h))Y$(h);else{switch(C=T1(he.current),d){case 1:d=C.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:d=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":d=C.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":d=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":d=C.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof v.is=="string"?C.createElement("select",{is:v.is}):C.createElement("select"),v.multiple?d.multiple=!0:v.size&&(d.size=v.size);break;default:d=typeof v.is=="string"?C.createElement(g,{is:v.is}):C.createElement(g)}}d[on]=h,d[Wt]=v;e:for(C=h.child;C!==null;){if(C.tag===5||C.tag===6)d.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===h)break e;for(;C.sibling===null;){if(C.return===null||C.return===h)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}h.stateNode=d;e:switch(_o(d,g,v),g){case"button":case"input":case"select":case"textarea":d=!!v.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&xc(h)}}return rr(h),h.flags&=-16777217,null;case 6:if(d&&h.stateNode!=null)d.memoizedProps!==v&&xc(h);else{if(typeof v!="string"&&h.stateNode===null)throw Error(r(166));if(d=he.current,Mg(h)){if(d=h.stateNode,g=h.memoizedProps,v=null,C=li,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}d[on]=h,d=!!(d.nodeValue===g||v!==null&&v.suppressHydrationWarning===!0||hj(d.nodeValue,g)),d||ef(h)}else d=T1(d).createTextNode(v),d[on]=h,h.stateNode=d}return rr(h),null;case 13:if(v=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(C=Mg(h),v!==null&&v.dehydrated!==null){if(d===null){if(!C)throw Error(r(318));if(C=h.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[on]=h}else Rg(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;rr(h),C=!1}else C=X$(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=C),C=!0;if(!C)return h.flags&256?(vc(h),h):(vc(h),null)}if(vc(h),(h.flags&128)!==0)return h.lanes=g,h;if(g=v!==null,d=d!==null&&d.memoizedState!==null,g){v=h.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool);var _=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(_=v.memoizedState.cachePool.pool),_!==C&&(v.flags|=2048)}return g!==d&&g&&(h.child.flags|=8192),h1(h,h.updateQueue),rr(h),null;case 4:return Oe(),d===null&&MT(h.stateNode.containerInfo),rr(h),null;case 10:return yc(h.type),rr(h),null;case 19:if(ee(Kr),C=h.memoizedState,C===null)return rr(h),null;if(v=(h.flags&128)!==0,_=C.rendering,_===null)if(v)qg(C,!1);else{if(fr!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(_=l1(d),_!==null){for(h.flags|=128,qg(C,!1),d=_.updateQueue,h.updateQueue=d,h1(h,d),h.subtreeFlags=0,d=g,g=h.child;g!==null;)W$(g,d),g=g.sibling;return D(Kr,Kr.current&1|2),h.child}d=d.sibling}C.tail!==null&&we()>g1&&(h.flags|=128,v=!0,qg(C,!1),h.lanes=4194304)}else{if(!v)if(d=l1(_),d!==null){if(h.flags|=128,v=!0,d=d.updateQueue,h.updateQueue=d,h1(h,d),qg(C,!0),C.tail===null&&C.tailMode==="hidden"&&!_.alternate&&!nn)return rr(h),null}else 2*we()-C.renderingStartTime>g1&&g!==536870912&&(h.flags|=128,v=!0,qg(C,!1),h.lanes=4194304);C.isBackwards?(_.sibling=h.child,h.child=_):(d=C.last,d!==null?d.sibling=_:h.child=_,C.last=_)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=we(),h.sibling=null,d=Kr.current,D(Kr,v?d&1|2:d&1),h):(rr(h),null);case 22:case 23:return vc(h),N2(),v=h.memoizedState!==null,d!==null?d.memoizedState!==null!==v&&(h.flags|=8192):v&&(h.flags|=8192),v?(g&536870912)!==0&&(h.flags&128)===0&&(rr(h),h.subtreeFlags&6&&(h.flags|=8192)):rr(h),g=h.updateQueue,g!==null&&h1(h,g.retryQueue),g=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==g&&(h.flags|=2048),d!==null&&ee(rf),null;case 24:return g=null,d!==null&&(g=d.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),yc(Wr),rr(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function Vue(d,h){switch(y2(h),h.tag){case 1:return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return yc(Wr),Oe(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 26:case 27:case 5:return ye(h),null;case 13:if(vc(h),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Rg()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return ee(Kr),null;case 4:return Oe(),null;case 10:return yc(h.type),null;case 22:case 23:return vc(h),N2(),d!==null&&ee(rf),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 24:return yc(Wr),null;case 25:return null;default:return null}}function xL(d,h){switch(y2(h),h.tag){case 3:yc(Wr),Oe();break;case 26:case 27:case 5:ye(h);break;case 4:Oe();break;case 13:vc(h);break;case 19:ee(Kr);break;case 10:yc(h.type);break;case 22:case 23:vc(h),N2(),d!==null&&ee(rf);break;case 24:yc(Wr)}}function Zg(d,h){try{var g=h.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var C=v.next;g=C;do{if((g.tag&d)===d){v=void 0;var _=g.create,P=g.inst;v=_(),P.destroy=v}g=g.next}while(g!==C)}}catch(j){kn(h,h.return,j)}}function Tu(d,h,g){try{var v=h.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var _=C.next;v=_;do{if((v.tag&d)===d){var P=v.inst,j=P.destroy;if(j!==void 0){P.destroy=void 0,C=h;var Y=g,se=j;try{se()}catch(ve){kn(C,Y,ve)}}}v=v.next}while(v!==_)}}catch(ve){kn(h,h.return,ve)}}function SL(d){var h=d.updateQueue;if(h!==null){var g=d.stateNode;try{c5(h,g)}catch(v){kn(d,d.return,v)}}}function kL(d,h,g){g.props=sf(d.type,d.memoizedProps),g.state=d.memoizedState;try{g.componentWillUnmount()}catch(v){kn(d,h,v)}}function Wg(d,h){try{var g=d.ref;if(g!==null){switch(d.tag){case 26:case 27:case 5:var v=d.stateNode;break;case 30:v=d.stateNode;break;default:v=d.stateNode}typeof g=="function"?d.refCleanup=g(v):g.current=v}}catch(C){kn(d,h,C)}}function vl(d,h){var g=d.ref,v=d.refCleanup;if(g!==null)if(typeof v=="function")try{v()}catch(C){kn(d,h,C)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(C){kn(d,h,C)}else g.current=null}function CL(d){var h=d.type,g=d.memoizedProps,v=d.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&v.focus();break e;case"img":g.src?v.src=g.src:g.srcSet&&(v.srcset=g.srcSet)}}catch(C){kn(d,d.return,C)}}function iT(d,h,g){try{var v=d.stateNode;lde(v,d.type,g,h),v[Wt]=h}catch(C){kn(d,d.return,C)}}function EL(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&Pu(d.type)||d.tag===4}function sT(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||EL(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&Pu(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function aT(d,h,g){var v=d.tag;if(v===5||v===6)d=d.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(d,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(d),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=E1));else if(v!==4&&(v===27&&Pu(d.type)&&(g=d.stateNode,h=null),d=d.child,d!==null))for(aT(d,h,g),d=d.sibling;d!==null;)aT(d,h,g),d=d.sibling}function p1(d,h,g){var v=d.tag;if(v===5||v===6)d=d.stateNode,h?g.insertBefore(d,h):g.appendChild(d);else if(v!==4&&(v===27&&Pu(d.type)&&(g=d.stateNode),d=d.child,d!==null))for(p1(d,h,g),d=d.sibling;d!==null;)p1(d,h,g),d=d.sibling}function TL(d){var h=d.stateNode,g=d.memoizedProps;try{for(var v=d.type,C=h.attributes;C.length;)h.removeAttributeNode(C[0]);_o(h,v,g),h[on]=d,h[Wt]=g}catch(_){kn(d,d.return,_)}}var Sc=!1,_r=!1,lT=!1,_L=typeof WeakSet=="function"?WeakSet:Set,ho=null;function Fue(d,h){if(d=d.containerInfo,IT=I1,d=j$(d),s2(d)){if("selectionStart"in d)var g={start:d.selectionStart,end:d.selectionEnd};else e:{g=(g=d.ownerDocument)&&g.defaultView||window;var v=g.getSelection&&g.getSelection();if(v&&v.rangeCount!==0){g=v.anchorNode;var C=v.anchorOffset,_=v.focusNode;v=v.focusOffset;try{g.nodeType,_.nodeType}catch{g=null;break e}var P=0,j=-1,Y=-1,se=0,ve=0,Ce=d,ce=null;t:for(;;){for(var ue;Ce!==g||C!==0&&Ce.nodeType!==3||(j=P+C),Ce!==_||v!==0&&Ce.nodeType!==3||(Y=P+v),Ce.nodeType===3&&(P+=Ce.nodeValue.length),(ue=Ce.firstChild)!==null;)ce=Ce,Ce=ue;for(;;){if(Ce===d)break t;if(ce===g&&++se===C&&(j=P),ce===_&&++ve===v&&(Y=P),(ue=Ce.nextSibling)!==null)break;Ce=ce,ce=Ce.parentNode}Ce=ue}g=j===-1||Y===-1?null:{start:j,end:Y}}else g=null}g=g||{start:0,end:0}}else g=null;for(OT={focusedElem:d,selectionRange:g},I1=!1,ho=h;ho!==null;)if(h=ho,d=h.child,(h.subtreeFlags&1024)!==0&&d!==null)d.return=h,ho=d;else for(;ho!==null;){switch(h=ho,_=h.alternate,d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&_!==null){d=void 0,g=h,C=_.memoizedProps,_=_.memoizedState,v=g.stateNode;try{var ut=sf(g.type,C,g.elementType===g.type);d=v.getSnapshotBeforeUpdate(ut,_),v.__reactInternalSnapshotBeforeUpdate=d}catch(it){kn(g,g.return,it)}}break;case 3:if((d&1024)!==0){if(d=h.stateNode.containerInfo,g=d.nodeType,g===9)$T(d);else if(g===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":$T(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,ho=d;break}ho=h.return}}function AL(d,h,g){var v=g.flags;switch(g.tag){case 0:case 11:case 15:_u(d,g),v&4&&Zg(5,g);break;case 1:if(_u(d,g),v&4)if(d=g.stateNode,h===null)try{d.componentDidMount()}catch(P){kn(g,g.return,P)}else{var C=sf(g.type,h.memoizedProps);h=h.memoizedState;try{d.componentDidUpdate(C,h,d.__reactInternalSnapshotBeforeUpdate)}catch(P){kn(g,g.return,P)}}v&64&&SL(g),v&512&&Wg(g,g.return);break;case 3:if(_u(d,g),v&64&&(d=g.updateQueue,d!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{c5(d,h)}catch(P){kn(g,g.return,P)}}break;case 27:h===null&&v&4&&TL(g);case 26:case 5:_u(d,g),h===null&&v&4&&CL(g),v&512&&Wg(g,g.return);break;case 12:_u(d,g);break;case 13:_u(d,g),v&4&&NL(d,g),v&64&&(d=g.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(g=Jue.bind(null,g),mde(d,g))));break;case 22:if(v=g.memoizedState!==null||Sc,!v){h=h!==null&&h.memoizedState!==null||_r,C=Sc;var _=_r;Sc=v,(_r=h)&&!_?Au(d,g,(g.subtreeFlags&8772)!==0):_u(d,g),Sc=C,_r=_}break;case 30:break;default:_u(d,g)}}function ML(d){var h=d.alternate;h!==null&&(d.alternate=null,ML(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&Ds(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Kn=null,Mi=!1;function kc(d,h,g){for(g=g.child;g!==null;)RL(d,h,g),g=g.sibling}function RL(d,h,g){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(fe,g)}catch{}switch(g.tag){case 26:_r||vl(g,h),kc(d,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:_r||vl(g,h);var v=Kn,C=Mi;Pu(g.type)&&(Kn=g.stateNode,Mi=!1),kc(d,h,g),ry(g.stateNode),Kn=v,Mi=C;break;case 5:_r||vl(g,h);case 6:if(v=Kn,C=Mi,Kn=null,kc(d,h,g),Kn=v,Mi=C,Kn!==null)if(Mi)try{(Kn.nodeType===9?Kn.body:Kn.nodeName==="HTML"?Kn.ownerDocument.body:Kn).removeChild(g.stateNode)}catch(_){kn(g,h,_)}else try{Kn.removeChild(g.stateNode)}catch(_){kn(g,h,_)}break;case 18:Kn!==null&&(Mi?(d=Kn,bj(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,g.stateNode),dy(d)):bj(Kn,g.stateNode));break;case 4:v=Kn,C=Mi,Kn=g.stateNode.containerInfo,Mi=!0,kc(d,h,g),Kn=v,Mi=C;break;case 0:case 11:case 14:case 15:_r||Tu(2,g,h),_r||Tu(4,g,h),kc(d,h,g);break;case 1:_r||(vl(g,h),v=g.stateNode,typeof v.componentWillUnmount=="function"&&kL(g,h,v)),kc(d,h,g);break;case 21:kc(d,h,g);break;case 22:_r=(v=_r)||g.memoizedState!==null,kc(d,h,g),_r=v;break;default:kc(d,h,g)}}function NL(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{dy(d)}catch(g){kn(h,h.return,g)}}function Hue(d){switch(d.tag){case 13:case 19:var h=d.stateNode;return h===null&&(h=d.stateNode=new _L),h;case 22:return d=d.stateNode,h=d._retryCache,h===null&&(h=d._retryCache=new _L),h;default:throw Error(r(435,d.tag))}}function cT(d,h){var g=Hue(d);h.forEach(function(v){var C=Xue.bind(null,d,v);g.has(v)||(g.add(v),v.then(C,C))})}function as(d,h){var g=h.deletions;if(g!==null)for(var v=0;v<g.length;v++){var C=g[v],_=d,P=h,j=P;e:for(;j!==null;){switch(j.tag){case 27:if(Pu(j.type)){Kn=j.stateNode,Mi=!1;break e}break;case 5:Kn=j.stateNode,Mi=!1;break e;case 3:case 4:Kn=j.stateNode.containerInfo,Mi=!0;break e}j=j.return}if(Kn===null)throw Error(r(160));RL(_,P,C),Kn=null,Mi=!1,_=C.alternate,_!==null&&(_.return=null),C.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)IL(h,d),h=h.sibling}var Ia=null;function IL(d,h){var g=d.alternate,v=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:as(h,d),ls(d),v&4&&(Tu(3,d,d.return),Zg(3,d),Tu(5,d,d.return));break;case 1:as(h,d),ls(d),v&512&&(_r||g===null||vl(g,g.return)),v&64&&Sc&&(d=d.updateQueue,d!==null&&(v=d.callbacks,v!==null&&(g=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=g===null?v:g.concat(v))));break;case 26:var C=Ia;if(as(h,d),ls(d),v&512&&(_r||g===null||vl(g,g.return)),v&4){var _=g!==null?g.memoizedState:null;if(v=d.memoizedState,g===null)if(v===null)if(d.stateNode===null){e:{v=d.type,g=d.memoizedProps,C=C.ownerDocument||C;t:switch(v){case"title":_=C.getElementsByTagName("title")[0],(!_||_[wa]||_[on]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=C.createElement(v),C.head.insertBefore(_,C.querySelector("head > title"))),_o(_,v,g),_[on]=d,Wn(_),v=_;break e;case"link":var P=Tj("link","href",C).get(v+(g.href||""));if(P){for(var j=0;j<P.length;j++)if(_=P[j],_.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&_.getAttribute("rel")===(g.rel==null?null:g.rel)&&_.getAttribute("title")===(g.title==null?null:g.title)&&_.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){P.splice(j,1);break t}}_=C.createElement(v),_o(_,v,g),C.head.appendChild(_);break;case"meta":if(P=Tj("meta","content",C).get(v+(g.content||""))){for(j=0;j<P.length;j++)if(_=P[j],_.getAttribute("content")===(g.content==null?null:""+g.content)&&_.getAttribute("name")===(g.name==null?null:g.name)&&_.getAttribute("property")===(g.property==null?null:g.property)&&_.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&_.getAttribute("charset")===(g.charSet==null?null:g.charSet)){P.splice(j,1);break t}}_=C.createElement(v),_o(_,v,g),C.head.appendChild(_);break;default:throw Error(r(468,v))}_[on]=d,Wn(_),v=_}d.stateNode=v}else _j(C,d.type,d.stateNode);else d.stateNode=Ej(C,v,d.memoizedProps);else _!==v?(_===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):_.count--,v===null?_j(C,d.type,d.stateNode):Ej(C,v,d.memoizedProps)):v===null&&d.stateNode!==null&&iT(d,d.memoizedProps,g.memoizedProps)}break;case 27:as(h,d),ls(d),v&512&&(_r||g===null||vl(g,g.return)),g!==null&&v&4&&iT(d,d.memoizedProps,g.memoizedProps);break;case 5:if(as(h,d),ls(d),v&512&&(_r||g===null||vl(g,g.return)),d.flags&32){C=d.stateNode;try{co(C,"")}catch(ue){kn(d,d.return,ue)}}v&4&&d.stateNode!=null&&(C=d.memoizedProps,iT(d,C,g!==null?g.memoizedProps:C)),v&1024&&(lT=!0);break;case 6:if(as(h,d),ls(d),v&4){if(d.stateNode===null)throw Error(r(162));v=d.memoizedProps,g=d.stateNode;try{g.nodeValue=v}catch(ue){kn(d,d.return,ue)}}break;case 3:if(M1=null,C=Ia,Ia=_1(h.containerInfo),as(h,d),Ia=C,ls(d),v&4&&g!==null&&g.memoizedState.isDehydrated)try{dy(h.containerInfo)}catch(ue){kn(d,d.return,ue)}lT&&(lT=!1,OL(d));break;case 4:v=Ia,Ia=_1(d.stateNode.containerInfo),as(h,d),ls(d),Ia=v;break;case 12:as(h,d),ls(d);break;case 13:as(h,d),ls(d),d.child.flags&8192&&d.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(mT=we()),v&4&&(v=d.updateQueue,v!==null&&(d.updateQueue=null,cT(d,v)));break;case 22:C=d.memoizedState!==null;var Y=g!==null&&g.memoizedState!==null,se=Sc,ve=_r;if(Sc=se||C,_r=ve||Y,as(h,d),_r=ve,Sc=se,ls(d),v&8192)e:for(h=d.stateNode,h._visibility=C?h._visibility&-2:h._visibility|1,C&&(g===null||Y||Sc||_r||af(d)),g=null,h=d;;){if(h.tag===5||h.tag===26){if(g===null){Y=g=h;try{if(_=Y.stateNode,C)P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{j=Y.stateNode;var Ce=Y.memoizedProps.style,ce=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;j.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ue){kn(Y,Y.return,ue)}}}else if(h.tag===6){if(g===null){Y=h;try{Y.stateNode.nodeValue=C?"":Y.memoizedProps}catch(ue){kn(Y,Y.return,ue)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===d)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}v&4&&(v=d.updateQueue,v!==null&&(g=v.retryQueue,g!==null&&(v.retryQueue=null,cT(d,g))));break;case 19:as(h,d),ls(d),v&4&&(v=d.updateQueue,v!==null&&(d.updateQueue=null,cT(d,v)));break;case 30:break;case 21:break;default:as(h,d),ls(d)}}function ls(d){var h=d.flags;if(h&2){try{for(var g,v=d.return;v!==null;){if(EL(v)){g=v;break}v=v.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var C=g.stateNode,_=sT(d);p1(d,_,C);break;case 5:var P=g.stateNode;g.flags&32&&(co(P,""),g.flags&=-33);var j=sT(d);p1(d,j,P);break;case 3:case 4:var Y=g.stateNode.containerInfo,se=sT(d);aT(d,se,Y);break;default:throw Error(r(161))}}catch(ve){kn(d,d.return,ve)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function OL(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var h=d;OL(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),d=d.sibling}}function _u(d,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)AL(d,h.alternate,h),h=h.sibling}function af(d){for(d=d.child;d!==null;){var h=d;switch(h.tag){case 0:case 11:case 14:case 15:Tu(4,h,h.return),af(h);break;case 1:vl(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&kL(h,h.return,g),af(h);break;case 27:ry(h.stateNode);case 26:case 5:vl(h,h.return),af(h);break;case 22:h.memoizedState===null&&af(h);break;case 30:af(h);break;default:af(h)}d=d.sibling}}function Au(d,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var v=h.alternate,C=d,_=h,P=_.flags;switch(_.tag){case 0:case 11:case 15:Au(C,_,g),Zg(4,_);break;case 1:if(Au(C,_,g),v=_,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(se){kn(v,v.return,se)}if(v=_,C=v.updateQueue,C!==null){var j=v.stateNode;try{var Y=C.shared.hiddenCallbacks;if(Y!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Y.length;C++)l5(Y[C],j)}catch(se){kn(v,v.return,se)}}g&&P&64&&SL(_),Wg(_,_.return);break;case 27:TL(_);case 26:case 5:Au(C,_,g),g&&v===null&&P&4&&CL(_),Wg(_,_.return);break;case 12:Au(C,_,g);break;case 13:Au(C,_,g),g&&P&4&&NL(C,_);break;case 22:_.memoizedState===null&&Au(C,_,g),Wg(_,_.return);break;case 30:break;default:Au(C,_,g)}h=h.sibling}}function uT(d,h){var g=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),d=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(d=h.memoizedState.cachePool.pool),d!==g&&(d!=null&&d.refCount++,g!=null&&Og(g))}function dT(d,h){d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Og(d))}function wl(d,h,g,v){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)PL(d,h,g,v),h=h.sibling}function PL(d,h,g,v){var C=h.flags;switch(h.tag){case 0:case 11:case 15:wl(d,h,g,v),C&2048&&Zg(9,h);break;case 1:wl(d,h,g,v);break;case 3:wl(d,h,g,v),C&2048&&(d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Og(d)));break;case 12:if(C&2048){wl(d,h,g,v),d=h.stateNode;try{var _=h.memoizedProps,P=_.id,j=_.onPostCommit;typeof j=="function"&&j(P,h.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Y){kn(h,h.return,Y)}}else wl(d,h,g,v);break;case 13:wl(d,h,g,v);break;case 23:break;case 22:_=h.stateNode,P=h.alternate,h.memoizedState!==null?_._visibility&2?wl(d,h,g,v):Kg(d,h):_._visibility&2?wl(d,h,g,v):(_._visibility|=2,ep(d,h,g,v,(h.subtreeFlags&10256)!==0)),C&2048&&uT(P,h);break;case 24:wl(d,h,g,v),C&2048&&dT(h.alternate,h);break;default:wl(d,h,g,v)}}function ep(d,h,g,v,C){for(C=C&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var _=d,P=h,j=g,Y=v,se=P.flags;switch(P.tag){case 0:case 11:case 15:ep(_,P,j,Y,C),Zg(8,P);break;case 23:break;case 22:var ve=P.stateNode;P.memoizedState!==null?ve._visibility&2?ep(_,P,j,Y,C):Kg(_,P):(ve._visibility|=2,ep(_,P,j,Y,C)),C&&se&2048&&uT(P.alternate,P);break;case 24:ep(_,P,j,Y,C),C&&se&2048&&dT(P.alternate,P);break;default:ep(_,P,j,Y,C)}h=h.sibling}}function Kg(d,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=d,v=h,C=v.flags;switch(v.tag){case 22:Kg(g,v),C&2048&&uT(v.alternate,v);break;case 24:Kg(g,v),C&2048&&dT(v.alternate,v);break;default:Kg(g,v)}h=h.sibling}}var Yg=8192;function tp(d){if(d.subtreeFlags&Yg)for(d=d.child;d!==null;)DL(d),d=d.sibling}function DL(d){switch(d.tag){case 26:tp(d),d.flags&Yg&&d.memoizedState!==null&&Ade(Ia,d.memoizedState,d.memoizedProps);break;case 5:tp(d);break;case 3:case 4:var h=Ia;Ia=_1(d.stateNode.containerInfo),tp(d),Ia=h;break;case 22:d.memoizedState===null&&(h=d.alternate,h!==null&&h.memoizedState!==null?(h=Yg,Yg=16777216,tp(d),Yg=h):tp(d));break;default:tp(d)}}function $L(d){var h=d.alternate;if(h!==null&&(d=h.child,d!==null)){h.child=null;do h=d.sibling,d.sibling=null,d=h;while(d!==null)}}function Jg(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var v=h[g];ho=v,jL(v,d)}$L(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)LL(d),d=d.sibling}function LL(d){switch(d.tag){case 0:case 11:case 15:Jg(d),d.flags&2048&&Tu(9,d,d.return);break;case 3:Jg(d);break;case 12:Jg(d);break;case 22:var h=d.stateNode;d.memoizedState!==null&&h._visibility&2&&(d.return===null||d.return.tag!==13)?(h._visibility&=-3,m1(d)):Jg(d);break;default:Jg(d)}}function m1(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var v=h[g];ho=v,jL(v,d)}$L(d)}for(d=d.child;d!==null;){switch(h=d,h.tag){case 0:case 11:case 15:Tu(8,h,h.return),m1(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,m1(h));break;default:m1(h)}d=d.sibling}}function jL(d,h){for(;ho!==null;){var g=ho;switch(g.tag){case 0:case 11:case 15:Tu(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var v=g.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Og(g.memoizedState.cache)}if(v=g.child,v!==null)v.return=g,ho=v;else e:for(g=d;ho!==null;){v=ho;var C=v.sibling,_=v.return;if(ML(v),v===g){ho=null;break e}if(C!==null){C.return=_,ho=C;break e}ho=_}}}var Uue={getCacheForType:function(d){var h=Ho(Wr),g=h.data.get(d);return g===void 0&&(g=d(),h.data.set(d,g)),g}},Gue=typeof WeakMap=="function"?WeakMap:Map,ln=0,In=null,Dt=null,Ht=0,cn=0,cs=null,Mu=!1,np=!1,fT=!1,Cc=0,fr=0,Ru=0,lf=0,hT=0,Zs=0,rp=0,Xg=null,Ri=null,pT=!1,mT=0,g1=1/0,y1=null,Nu=null,To=0,Iu=null,op=null,ip=0,gT=0,yT=null,zL=null,Qg=0,bT=null;function us(){if((ln&2)!==0&&Ht!==0)return Ht&-Ht;if(z.T!==null){var d=qh;return d!==0?d:ET()}return Zt()}function BL(){Zs===0&&(Zs=(Ht&536870912)===0||nn?so():536870912);var d=qs.current;return d!==null&&(d.flags|=32),Zs}function ds(d,h,g){(d===In&&(cn===2||cn===9)||d.cancelPendingCommit!==null)&&(sp(d,0),Ou(d,Ht,Zs,!1)),Qn(d,g),((ln&2)===0||d!==In)&&(d===In&&((ln&2)===0&&(lf|=g),fr===4&&Ou(d,Ht,Zs,!1)),xl(d))}function VL(d,h,g){if((ln&6)!==0)throw Error(r(327));var v=!g&&(h&124)===0&&(h&d.expiredLanes)===0||qn(d,h),C=v?Wue(d,h):xT(d,h,!0),_=v;do{if(C===0){np&&!v&&Ou(d,h,0,!1);break}else{if(g=d.current.alternate,_&&!que(g)){C=xT(d,h,!1),_=!1;continue}if(C===2){if(_=h,d.errorRecoveryDisabledLanes&_)var P=0;else P=d.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){h=P;e:{var j=d;C=Xg;var Y=j.current.memoizedState.isDehydrated;if(Y&&(sp(j,P).flags|=256),P=xT(j,P,!1),P!==2){if(fT&&!Y){j.errorRecoveryDisabledLanes|=_,lf|=_,C=4;break e}_=Ri,Ri=C,_!==null&&(Ri===null?Ri=_:Ri.push.apply(Ri,_))}C=P}if(_=!1,C!==2)continue}}if(C===1){sp(d,0),Ou(d,h,0,!0);break}e:{switch(v=d,_=C,_){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:Ou(v,h,Zs,!Mu);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(C=mT+300-we(),10<C)){if(Ou(v,h,Zs,!Mu),pn(v,0,!0)!==0)break e;v.timeoutHandle=gj(FL.bind(null,v,g,Ri,y1,pT,h,Zs,lf,rp,Mu,_,2,-0,0),C);break e}FL(v,g,Ri,y1,pT,h,Zs,lf,rp,Mu,_,0,-0,0)}}break}while(!0);xl(d)}function FL(d,h,g,v,C,_,P,j,Y,se,ve,Ce,ce,ue){if(d.timeoutHandle=-1,Ce=h.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(sy={stylesheets:null,count:0,unsuspend:_de},DL(h),Ce=Mde(),Ce!==null)){d.cancelPendingCommit=Ce(KL.bind(null,d,h,_,g,v,C,P,j,Y,ve,1,ce,ue)),Ou(d,_,P,!se);return}KL(d,h,_,g,v,C,P,j,Y)}function que(d){for(var h=d;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var v=0;v<g.length;v++){var C=g[v],_=C.getSnapshot;C=C.value;try{if(!is(_(),C))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ou(d,h,g,v){h&=~hT,h&=~lf,d.suspendedLanes|=h,d.pingedLanes&=~h,v&&(d.warmLanes|=h),v=d.expirationTimes;for(var C=h;0<C;){var _=31-De(C),P=1<<_;v[_]=-1,C&=~P}g!==0&&ao(d,g,h)}function b1(){return(ln&6)===0?(ey(0),!1):!0}function vT(){if(Dt!==null){if(cn===0)var d=Dt.return;else d=Dt,gc=tf=null,$2(d),Xh=null,Ug=0,d=Dt;for(;d!==null;)xL(d.alternate,d),d=d.return;Dt=null}}function sp(d,h){var g=d.timeoutHandle;g!==-1&&(d.timeoutHandle=-1,ude(g)),g=d.cancelPendingCommit,g!==null&&(d.cancelPendingCommit=null,g()),vT(),In=d,Dt=g=hc(d.current,null),Ht=h,cn=0,cs=null,Mu=!1,np=qn(d,h),fT=!1,rp=Zs=hT=lf=Ru=fr=0,Ri=Xg=null,pT=!1,(h&8)!==0&&(h|=h&32);var v=d.entangledLanes;if(v!==0)for(d=d.entanglements,v&=h;0<v;){var C=31-De(v),_=1<<C;h|=d[C],v&=~_}return Cc=h,Bv(),g}function HL(d,h){At=null,z.H=i1,h===Dg||h===Kv?(h=s5(),cn=3):h===r5?(h=s5(),cn=4):cn=h===aL?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,cs=h,Dt===null&&(fr=1,u1(d,Fs(h,d.current)))}function UL(){var d=z.H;return z.H=i1,d===null?i1:d}function GL(){var d=z.A;return z.A=Uue,d}function wT(){fr=4,Mu||(Ht&4194048)!==Ht&&qs.current!==null||(np=!0),(Ru&134217727)===0&&(lf&134217727)===0||In===null||Ou(In,Ht,Zs,!1)}function xT(d,h,g){var v=ln;ln|=2;var C=UL(),_=GL();(In!==d||Ht!==h)&&(y1=null,sp(d,h)),h=!1;var P=fr;e:do try{if(cn!==0&&Dt!==null){var j=Dt,Y=cs;switch(cn){case 8:vT(),P=6;break e;case 3:case 2:case 9:case 6:qs.current===null&&(h=!0);var se=cn;if(cn=0,cs=null,ap(d,j,Y,se),g&&np){P=0;break e}break;default:se=cn,cn=0,cs=null,ap(d,j,Y,se)}}Zue(),P=fr;break}catch(ve){HL(d,ve)}while(!0);return h&&d.shellSuspendCounter++,gc=tf=null,ln=v,z.H=C,z.A=_,Dt===null&&(In=null,Ht=0,Bv()),P}function Zue(){for(;Dt!==null;)qL(Dt)}function Wue(d,h){var g=ln;ln|=2;var v=UL(),C=GL();In!==d||Ht!==h?(y1=null,g1=we()+500,sp(d,h)):np=qn(d,h);e:do try{if(cn!==0&&Dt!==null){h=Dt;var _=cs;t:switch(cn){case 1:cn=0,cs=null,ap(d,h,_,1);break;case 2:case 9:if(o5(_)){cn=0,cs=null,ZL(h);break}h=function(){cn!==2&&cn!==9||In!==d||(cn=7),xl(d)},_.then(h,h);break e;case 3:cn=7;break e;case 4:cn=5;break e;case 7:o5(_)?(cn=0,cs=null,ZL(h)):(cn=0,cs=null,ap(d,h,_,7));break;case 5:var P=null;switch(Dt.tag){case 26:P=Dt.memoizedState;case 5:case 27:var j=Dt;if(!P||Aj(P)){cn=0,cs=null;var Y=j.sibling;if(Y!==null)Dt=Y;else{var se=j.return;se!==null?(Dt=se,v1(se)):Dt=null}break t}}cn=0,cs=null,ap(d,h,_,5);break;case 6:cn=0,cs=null,ap(d,h,_,6);break;case 8:vT(),fr=6;break e;default:throw Error(r(462))}}Kue();break}catch(ve){HL(d,ve)}while(!0);return gc=tf=null,z.H=v,z.A=C,ln=g,Dt!==null?0:(In=null,Ht=0,Bv(),fr)}function Kue(){for(;Dt!==null&&!me();)qL(Dt)}function qL(d){var h=vL(d.alternate,d,Cc);d.memoizedProps=d.pendingProps,h===null?v1(d):Dt=h}function ZL(d){var h=d,g=h.alternate;switch(h.tag){case 15:case 0:h=hL(g,h,h.pendingProps,h.type,void 0,Ht);break;case 11:h=hL(g,h,h.pendingProps,h.type.render,h.ref,Ht);break;case 5:$2(h);default:xL(g,h),h=Dt=W$(h,Cc),h=vL(g,h,Cc)}d.memoizedProps=d.pendingProps,h===null?v1(d):Dt=h}function ap(d,h,g,v){gc=tf=null,$2(h),Xh=null,Ug=0;var C=h.return;try{if(jue(d,C,h,g,Ht)){fr=1,u1(d,Fs(g,d.current)),Dt=null;return}}catch(_){if(C!==null)throw Dt=C,_;fr=1,u1(d,Fs(g,d.current)),Dt=null;return}h.flags&32768?(nn||v===1?d=!0:np||(Ht&536870912)!==0?d=!1:(Mu=d=!0,(v===2||v===9||v===3||v===6)&&(v=qs.current,v!==null&&v.tag===13&&(v.flags|=16384))),WL(h,d)):v1(h)}function v1(d){var h=d;do{if((h.flags&32768)!==0){WL(h,Mu);return}d=h.return;var g=Bue(h.alternate,h,Cc);if(g!==null){Dt=g;return}if(h=h.sibling,h!==null){Dt=h;return}Dt=h=d}while(h!==null);fr===0&&(fr=5)}function WL(d,h){do{var g=Vue(d.alternate,d);if(g!==null){g.flags&=32767,Dt=g;return}if(g=d.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(d=d.sibling,d!==null)){Dt=d;return}Dt=d=g}while(d!==null);fr=6,Dt=null}function KL(d,h,g,v,C,_,P,j,Y){d.cancelPendingCommit=null;do w1();while(To!==0);if((ln&6)!==0)throw Error(r(327));if(h!==null){if(h===d.current)throw Error(r(177));if(_=h.lanes|h.childLanes,_|=d2,Si(d,g,_,P,j,Y),d===In&&(Dt=In=null,Ht=0),op=h,Iu=d,ip=g,gT=_,yT=C,zL=v,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Que(Bn,function(){return ej(),null})):(d.callbackNode=null,d.callbackPriority=0),v=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||v){v=z.T,z.T=null,C=G.p,G.p=2,P=ln,ln|=4;try{Fue(d,h,g)}finally{ln=P,G.p=C,z.T=v}}To=1,YL(),JL(),XL()}}function YL(){if(To===1){To=0;var d=Iu,h=op,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=z.T,z.T=null;var v=G.p;G.p=2;var C=ln;ln|=4;try{IL(h,d);var _=OT,P=j$(d.containerInfo),j=_.focusedElem,Y=_.selectionRange;if(P!==j&&j&&j.ownerDocument&&L$(j.ownerDocument.documentElement,j)){if(Y!==null&&s2(j)){var se=Y.start,ve=Y.end;if(ve===void 0&&(ve=se),"selectionStart"in j)j.selectionStart=se,j.selectionEnd=Math.min(ve,j.value.length);else{var Ce=j.ownerDocument||document,ce=Ce&&Ce.defaultView||window;if(ce.getSelection){var ue=ce.getSelection(),ut=j.textContent.length,it=Math.min(Y.start,ut),bn=Y.end===void 0?it:Math.min(Y.end,ut);!ue.extend&&it>bn&&(P=bn,bn=it,it=P);var te=$$(j,it),J=$$(j,bn);if(te&&J&&(ue.rangeCount!==1||ue.anchorNode!==te.node||ue.anchorOffset!==te.offset||ue.focusNode!==J.node||ue.focusOffset!==J.offset)){var re=Ce.createRange();re.setStart(te.node,te.offset),ue.removeAllRanges(),it>bn?(ue.addRange(re),ue.extend(J.node,J.offset)):(re.setEnd(J.node,J.offset),ue.addRange(re))}}}}for(Ce=[],ue=j;ue=ue.parentNode;)ue.nodeType===1&&Ce.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<Ce.length;j++){var xe=Ce[j];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}I1=!!IT,OT=IT=null}finally{ln=C,G.p=v,z.T=g}}d.current=h,To=2}}function JL(){if(To===2){To=0;var d=Iu,h=op,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=z.T,z.T=null;var v=G.p;G.p=2;var C=ln;ln|=4;try{AL(d,h.alternate,h)}finally{ln=C,G.p=v,z.T=g}}To=3}}function XL(){if(To===4||To===3){To=0,Re();var d=Iu,h=op,g=ip,v=zL;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?To=5:(To=0,op=Iu=null,QL(d,d.pendingLanes));var C=d.pendingLanes;if(C===0&&(Nu=null),Fe(g),h=h.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(fe,h,void 0,(h.current.flags&128)===128)}catch{}if(v!==null){h=z.T,C=G.p,G.p=2,z.T=null;try{for(var _=d.onRecoverableError,P=0;P<v.length;P++){var j=v[P];_(j.value,{componentStack:j.stack})}}finally{z.T=h,G.p=C}}(ip&3)!==0&&w1(),xl(d),C=d.pendingLanes,(g&4194090)!==0&&(C&42)!==0?d===bT?Qg++:(Qg=0,bT=d):Qg=0,ey(0)}}function QL(d,h){(d.pooledCacheLanes&=h)===0&&(h=d.pooledCache,h!=null&&(d.pooledCache=null,Og(h)))}function w1(d){return YL(),JL(),XL(),ej()}function ej(){if(To!==5)return!1;var d=Iu,h=gT;gT=0;var g=Fe(ip),v=z.T,C=G.p;try{G.p=32>g?32:g,z.T=null,g=yT,yT=null;var _=Iu,P=ip;if(To=0,op=Iu=null,ip=0,(ln&6)!==0)throw Error(r(331));var j=ln;if(ln|=4,LL(_.current),PL(_,_.current,P,g),ln=j,ey(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(fe,_)}catch{}return!0}finally{G.p=C,z.T=v,QL(d,h)}}function tj(d,h,g){h=Fs(g,h),h=Y2(d.stateNode,h,2),d=Su(d,h,2),d!==null&&(Qn(d,2),xl(d))}function kn(d,h,g){if(d.tag===3)tj(d,d,g);else for(;h!==null;){if(h.tag===3){tj(h,d,g);break}else if(h.tag===1){var v=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Nu===null||!Nu.has(v))){d=Fs(g,d),g=iL(2),v=Su(h,g,2),v!==null&&(sL(g,v,h,d),Qn(v,2),xl(v));break}}h=h.return}}function ST(d,h,g){var v=d.pingCache;if(v===null){v=d.pingCache=new Gue;var C=new Set;v.set(h,C)}else C=v.get(h),C===void 0&&(C=new Set,v.set(h,C));C.has(g)||(fT=!0,C.add(g),d=Yue.bind(null,d,h,g),h.then(d,d))}function Yue(d,h,g){var v=d.pingCache;v!==null&&v.delete(h),d.pingedLanes|=d.suspendedLanes&g,d.warmLanes&=~g,In===d&&(Ht&g)===g&&(fr===4||fr===3&&(Ht&62914560)===Ht&&300>we()-mT?(ln&2)===0&&sp(d,0):hT|=g,rp===Ht&&(rp=0)),xl(d)}function nj(d,h){h===0&&(h=Ki()),d=Fh(d,h),d!==null&&(Qn(d,h),xl(d))}function Jue(d){var h=d.memoizedState,g=0;h!==null&&(g=h.retryLane),nj(d,g)}function Xue(d,h){var g=0;switch(d.tag){case 13:var v=d.stateNode,C=d.memoizedState;C!==null&&(g=C.retryLane);break;case 19:v=d.stateNode;break;case 22:v=d.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(h),nj(d,g)}function Que(d,h){return Le(d,h)}var x1=null,lp=null,kT=!1,S1=!1,CT=!1,cf=0;function xl(d){d!==lp&&d.next===null&&(lp===null?x1=lp=d:lp=lp.next=d),S1=!0,kT||(kT=!0,tde())}function ey(d,h){if(!CT&&S1){CT=!0;do for(var g=!1,v=x1;v!==null;){if(d!==0){var C=v.pendingLanes;if(C===0)var _=0;else{var P=v.suspendedLanes,j=v.pingedLanes;_=(1<<31-De(42|d)+1)-1,_&=C&~(P&~j),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(g=!0,sj(v,_))}else _=Ht,_=pn(v,v===In?_:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(_&3)===0||qn(v,_)||(g=!0,sj(v,_));v=v.next}while(g);CT=!1}}function ede(){rj()}function rj(){S1=kT=!1;var d=0;cf!==0&&(cde()&&(d=cf),cf=0);for(var h=we(),g=null,v=x1;v!==null;){var C=v.next,_=oj(v,h);_===0?(v.next=null,g===null?x1=C:g.next=C,C===null&&(lp=g)):(g=v,(d!==0||(_&3)!==0)&&(S1=!0)),v=C}ey(d)}function oj(d,h){for(var g=d.suspendedLanes,v=d.pingedLanes,C=d.expirationTimes,_=d.pendingLanes&-62914561;0<_;){var P=31-De(_),j=1<<P,Y=C[P];Y===-1?((j&g)===0||(j&v)!==0)&&(C[P]=Zn(j,h)):Y<=h&&(d.expiredLanes|=j),_&=~j}if(h=In,g=Ht,g=pn(d,d===h?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),v=d.callbackNode,g===0||d===h&&(cn===2||cn===9)||d.cancelPendingCommit!==null)return v!==null&&v!==null&&$e(v),d.callbackNode=null,d.callbackPriority=0;if((g&3)===0||qn(d,g)){if(h=g&-g,h===d.callbackPriority)return h;switch(v!==null&&$e(v),Fe(g)){case 2:case 8:g=rt;break;case 32:g=Bn;break;case 268435456:g=Sr;break;default:g=Bn}return v=ij.bind(null,d),g=Le(g,v),d.callbackPriority=h,d.callbackNode=g,h}return v!==null&&v!==null&&$e(v),d.callbackPriority=2,d.callbackNode=null,2}function ij(d,h){if(To!==0&&To!==5)return d.callbackNode=null,d.callbackPriority=0,null;var g=d.callbackNode;if(w1()&&d.callbackNode!==g)return null;var v=Ht;return v=pn(d,d===In?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),v===0?null:(VL(d,v,h),oj(d,we()),d.callbackNode!=null&&d.callbackNode===g?ij.bind(null,d):null)}function sj(d,h){if(w1())return null;VL(d,h,!0)}function tde(){dde(function(){(ln&6)!==0?Le(Ze,ede):rj()})}function ET(){return cf===0&&(cf=so()),cf}function aj(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:tr(""+d)}function lj(d,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,d.id&&g.setAttribute("form",d.id),h.parentNode.insertBefore(g,h),d=new FormData(d),g.parentNode.removeChild(g),d}function nde(d,h,g,v,C){if(h==="submit"&&g&&g.stateNode===C){var _=aj((C[Wt]||null).action),P=v.submitter;P&&(h=(h=P[Wt]||null)?aj(h.formAction):P.getAttribute("formAction"),h!==null&&(_=h,P=null));var j=new ze("action","action",null,v,C);d.push({event:j,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(cf!==0){var Y=P?lj(C,P):new FormData(C);G2(g,{pending:!0,data:Y,method:C.method,action:_},null,Y)}}else typeof _=="function"&&(j.preventDefault(),Y=P?lj(C,P):new FormData(C),G2(g,{pending:!0,data:Y,method:C.method,action:_},_,Y))},currentTarget:C}]})}}for(var TT=0;TT<u2.length;TT++){var _T=u2[TT],rde=_T.toLowerCase(),ode=_T[0].toUpperCase()+_T.slice(1);Na(rde,"on"+ode)}Na(V$,"onAnimationEnd"),Na(F$,"onAnimationIteration"),Na(H$,"onAnimationStart"),Na("dblclick","onDoubleClick"),Na("focusin","onFocus"),Na("focusout","onBlur"),Na(xue,"onTransitionRun"),Na(Sue,"onTransitionStart"),Na(kue,"onTransitionCancel"),Na(U$,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ty="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ide=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ty));function cj(d,h){h=(h&4)!==0;for(var g=0;g<d.length;g++){var v=d[g],C=v.event;v=v.listeners;e:{var _=void 0;if(h)for(var P=v.length-1;0<=P;P--){var j=v[P],Y=j.instance,se=j.currentTarget;if(j=j.listener,Y!==_&&C.isPropagationStopped())break e;_=j,C.currentTarget=se;try{_(C)}catch(ve){c1(ve)}C.currentTarget=null,_=Y}else for(P=0;P<v.length;P++){if(j=v[P],Y=j.instance,se=j.currentTarget,j=j.listener,Y!==_&&C.isPropagationStopped())break e;_=j,C.currentTarget=se;try{_(C)}catch(ve){c1(ve)}C.currentTarget=null,_=Y}}}}function $t(d,h){var g=h[Sn];g===void 0&&(g=h[Sn]=new Set);var v=d+"__bubble";g.has(v)||(uj(h,d,2,!1),g.add(v))}function AT(d,h,g){var v=0;h&&(v|=4),uj(g,d,v,h)}var k1="_reactListening"+Math.random().toString(36).slice(2);function MT(d){if(!d[k1]){d[k1]=!0,xa.forEach(function(g){g!=="selectionchange"&&(ide.has(g)||AT(g,!1,d),AT(g,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[k1]||(h[k1]=!0,AT("selectionchange",!1,h))}}function uj(d,h,g,v){switch(Pj(h)){case 2:var C=Ide;break;case 8:C=Ode;break;default:C=HT}g=C.bind(null,h,g,d),C=void 0,!Ph||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(C=!0),v?C!==void 0?d.addEventListener(h,g,{capture:!0,passive:C}):d.addEventListener(h,g,!0):C!==void 0?d.addEventListener(h,g,{passive:C}):d.addEventListener(h,g,!1)}function RT(d,h,g,v,C){var _=v;if((h&1)===0&&(h&2)===0&&v!==null)e:for(;;){if(v===null)return;var P=v.tag;if(P===3||P===4){var j=v.stateNode.containerInfo;if(j===C)break;if(P===4)for(P=v.return;P!==null;){var Y=P.tag;if((Y===3||Y===4)&&P.stateNode.containerInfo===C)return;P=P.return}for(;j!==null;){if(P=$s(j),P===null)return;if(Y=P.tag,Y===5||Y===6||Y===26||Y===27){v=_=P;continue e}j=j.parentNode}}v=v.return}$v(function(){var se=_,ve=ml(g),Ce=[];e:{var ce=G$.get(d);if(ce!==void 0){var ue=ze,ut=d;switch(d){case"keypress":if(Dh(g)===0)break e;case"keydown":case"keyup":ue=Qce;break;case"focusin":ut="focus",ue=Fo;break;case"focusout":ut="blur",ue=Fo;break;case"beforeblur":case"afterblur":ue=Fo;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=uo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=nue;break;case V$:case F$:case H$:ue=Ra;break;case U$:ue=oue;break;case"scroll":case"scrollend":ue=gt;break;case"wheel":ue=sue;break;case"copy":case"cut":case"paste":ue=jv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=S$;break;case"toggle":case"beforetoggle":ue=lue}var it=(h&4)!==0,bn=!it&&(d==="scroll"||d==="scrollend"),te=it?ce!==null?ce+"Capture":null:ce;it=[];for(var J=se,re;J!==null;){var xe=J;if(re=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||re===null||te===null||(xe=uc(J,te),xe!=null&&it.push(ny(J,xe,re))),bn)break;J=J.return}0<it.length&&(ce=new ue(ce,ut,null,g,ve),Ce.push({event:ce,listeners:it}))}}if((h&7)===0){e:{if(ce=d==="mouseover"||d==="pointerover",ue=d==="mouseout"||d==="pointerout",ce&&g!==Co&&(ut=g.relatedTarget||g.fromElement)&&($s(ut)||ut[jo]))break e;if((ue||ce)&&(ce=ve.window===ve?ve:(ce=ve.ownerDocument)?ce.defaultView||ce.parentWindow:window,ue?(ut=g.relatedTarget||g.toElement,ue=se,ut=ut?$s(ut):null,ut!==null&&(bn=i(ut),it=ut.tag,ut!==bn||it!==5&&it!==27&&it!==6)&&(ut=null)):(ue=null,ut=se),ue!==ut)){if(it=Vo,xe="onMouseLeave",te="onMouseEnter",J="mouse",(d==="pointerout"||d==="pointerover")&&(it=S$,xe="onPointerLeave",te="onPointerEnter",J="pointer"),bn=ue==null?ce:cr(ue),re=ut==null?ce:cr(ut),ce=new it(xe,J+"leave",ue,g,ve),ce.target=bn,ce.relatedTarget=re,xe=null,$s(ve)===se&&(it=new it(te,J+"enter",ut,g,ve),it.target=re,it.relatedTarget=bn,xe=it),bn=xe,ue&&ut)t:{for(it=ue,te=ut,J=0,re=it;re;re=cp(re))J++;for(re=0,xe=te;xe;xe=cp(xe))re++;for(;0<J-re;)it=cp(it),J--;for(;0<re-J;)te=cp(te),re--;for(;J--;){if(it===te||te!==null&&it===te.alternate)break t;it=cp(it),te=cp(te)}it=null}else it=null;ue!==null&&dj(Ce,ce,ue,it,!1),ut!==null&&bn!==null&&dj(Ce,bn,ut,it,!0)}}e:{if(ce=se?cr(se):window,ue=ce.nodeName&&ce.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ce.type==="file")var He=R$;else if(A$(ce))if(N$)He=bue;else{He=gue;var It=mue}else ue=ce.nodeName,!ue||ue.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?se&&Zr(se.elementType)&&(He=R$):He=yue;if(He&&(He=He(d,se))){M$(Ce,He,g,ve);break e}It&&It(d,ce,se),d==="focusout"&&se&&ce.type==="number"&&se.memoizedProps.value!=null&&ns(ce,"number",ce.value)}switch(It=se?cr(se):window,d){case"focusin":(A$(It)||It.contentEditable==="true")&&(zh=It,a2=se,Ag=null);break;case"focusout":Ag=a2=zh=null;break;case"mousedown":l2=!0;break;case"contextmenu":case"mouseup":case"dragend":l2=!1,z$(Ce,g,ve);break;case"selectionchange":if(wue)break;case"keydown":case"keyup":z$(Ce,g,ve)}var Je;if(r2)e:{switch(d){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else jh?T$(d,g)&&(lt="onCompositionEnd"):d==="keydown"&&g.keyCode===229&&(lt="onCompositionStart");lt&&(k$&&g.locale!=="ko"&&(jh||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&jh&&(Je=Lv()):(Ma=ve,dc="value"in Ma?Ma.value:Ma.textContent,jh=!0)),It=C1(se,lt),0<It.length&&(lt=new Zd(lt,d,null,g,ve),Ce.push({event:lt,listeners:It}),Je?lt.data=Je:(Je=_$(g),Je!==null&&(lt.data=Je)))),(Je=uue?due(d,g):fue(d,g))&&(lt=C1(se,"onBeforeInput"),0<lt.length&&(It=new Zd("onBeforeInput","beforeinput",null,g,ve),Ce.push({event:It,listeners:lt}),It.data=Je)),nde(Ce,d,se,g,ve)}cj(Ce,h)})}function ny(d,h,g){return{instance:d,listener:h,currentTarget:g}}function C1(d,h){for(var g=h+"Capture",v=[];d!==null;){var C=d,_=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||_===null||(C=uc(d,g),C!=null&&v.unshift(ny(d,C,_)),C=uc(d,h),C!=null&&v.push(ny(d,C,_))),d.tag===3)return v;d=d.return}return[]}function cp(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function dj(d,h,g,v,C){for(var _=h._reactName,P=[];g!==null&&g!==v;){var j=g,Y=j.alternate,se=j.stateNode;if(j=j.tag,Y!==null&&Y===v)break;j!==5&&j!==26&&j!==27||se===null||(Y=se,C?(se=uc(g,_),se!=null&&P.unshift(ny(g,se,Y))):C||(se=uc(g,_),se!=null&&P.push(ny(g,se,Y)))),g=g.return}P.length!==0&&d.push({event:h,listeners:P})}var sde=/\r\n?/g,ade=/\u0000|\uFFFD/g;function fj(d){return(typeof d=="string"?d:""+d).replace(sde,`
`).replace(ade,"")}function hj(d,h){return h=fj(h),fj(d)===h}function E1(){}function yn(d,h,g,v,C,_){switch(g){case"children":typeof v=="string"?h==="body"||h==="textarea"&&v===""||co(d,v):(typeof v=="number"||typeof v=="bigint")&&h!=="body"&&co(d,""+v);break;case"className":es(d,"class",v);break;case"tabIndex":es(d,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":es(d,g,v);break;case"style":lc(d,v,_);break;case"data":if(h!=="object"){es(d,"data",v);break}case"src":case"href":if(v===""&&(h!=="a"||g!=="href")){d.removeAttribute(g);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){d.removeAttribute(g);break}v=tr(""+v),d.setAttribute(g,v);break;case"action":case"formAction":if(typeof v=="function"){d.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(g==="formAction"?(h!=="input"&&yn(d,h,"name",C.name,C,null),yn(d,h,"formEncType",C.formEncType,C,null),yn(d,h,"formMethod",C.formMethod,C,null),yn(d,h,"formTarget",C.formTarget,C,null)):(yn(d,h,"encType",C.encType,C,null),yn(d,h,"method",C.method,C,null),yn(d,h,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){d.removeAttribute(g);break}v=tr(""+v),d.setAttribute(g,v);break;case"onClick":v!=null&&(d.onclick=E1);break;case"onScroll":v!=null&&$t("scroll",d);break;case"onScrollEnd":v!=null&&$t("scrollend",d);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(g=v.__html,g!=null){if(C.children!=null)throw Error(r(60));d.innerHTML=g}}break;case"multiple":d.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":d.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){d.removeAttribute("xlink:href");break}g=tr(""+v),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?d.setAttribute(g,""+v):d.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?d.setAttribute(g,""):d.removeAttribute(g);break;case"capture":case"download":v===!0?d.setAttribute(g,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?d.setAttribute(g,v):d.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?d.setAttribute(g,v):d.removeAttribute(g);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?d.removeAttribute(g):d.setAttribute(g,v);break;case"popover":$t("beforetoggle",d),$t("toggle",d),Qi(d,"popover",v);break;case"xlinkActuate":ii(d,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ii(d,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ii(d,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ii(d,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ii(d,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ii(d,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ii(d,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ii(d,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ii(d,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Qi(d,"is",v);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=gu.get(g)||g,Qi(d,g,v))}}function NT(d,h,g,v,C,_){switch(g){case"style":lc(d,v,_);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(g=v.__html,g!=null){if(C.children!=null)throw Error(r(60));d.innerHTML=g}}break;case"children":typeof v=="string"?co(d,v):(typeof v=="number"||typeof v=="bigint")&&co(d,""+v);break;case"onScroll":v!=null&&$t("scroll",d);break;case"onScrollEnd":v!=null&&$t("scrollend",d);break;case"onClick":v!=null&&(d.onclick=E1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sa.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(C=g.endsWith("Capture"),h=g.slice(2,C?g.length-7:void 0),_=d[Wt]||null,_=_!=null?_[g]:null,typeof _=="function"&&d.removeEventListener(h,_,C),typeof v=="function")){typeof _!="function"&&_!==null&&(g in d?d[g]=null:d.hasAttribute(g)&&d.removeAttribute(g)),d.addEventListener(h,v,C);break e}g in d?d[g]=v:v===!0?d.setAttribute(g,""):Qi(d,g,v)}}}function _o(d,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",d),$t("load",d);var v=!1,C=!1,_;for(_ in g)if(g.hasOwnProperty(_)){var P=g[_];if(P!=null)switch(_){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:yn(d,h,_,P,g,null)}}C&&yn(d,h,"srcSet",g.srcSet,g,null),v&&yn(d,h,"src",g.src,g,null);return;case"input":$t("invalid",d);var j=_=P=C=null,Y=null,se=null;for(v in g)if(g.hasOwnProperty(v)){var ve=g[v];if(ve!=null)switch(v){case"name":C=ve;break;case"type":P=ve;break;case"checked":Y=ve;break;case"defaultChecked":se=ve;break;case"value":_=ve;break;case"defaultValue":j=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,h));break;default:yn(d,h,v,ve,g,null)}}Ea(d,_,j,Y,se,P,C,!1),ko(d);return;case"select":$t("invalid",d),v=P=_=null;for(C in g)if(g.hasOwnProperty(C)&&(j=g[C],j!=null))switch(C){case"value":_=j;break;case"defaultValue":P=j;break;case"multiple":v=j;default:yn(d,h,C,j,g,null)}h=_,g=P,d.multiple=!!v,h!=null?Bs(d,!!v,h,!1):g!=null&&Bs(d,!!v,g,!0);return;case"textarea":$t("invalid",d),_=C=v=null;for(P in g)if(g.hasOwnProperty(P)&&(j=g[P],j!=null))switch(P){case"value":v=j;break;case"defaultValue":C=j;break;case"children":_=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:yn(d,h,P,j,g,null)}Vs(d,v,C,_),ko(d);return;case"option":for(Y in g)if(g.hasOwnProperty(Y)&&(v=g[Y],v!=null))switch(Y){case"selected":d.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:yn(d,h,Y,v,g,null)}return;case"dialog":$t("beforetoggle",d),$t("toggle",d),$t("cancel",d),$t("close",d);break;case"iframe":case"object":$t("load",d);break;case"video":case"audio":for(v=0;v<ty.length;v++)$t(ty[v],d);break;case"image":$t("error",d),$t("load",d);break;case"details":$t("toggle",d);break;case"embed":case"source":case"link":$t("error",d),$t("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in g)if(g.hasOwnProperty(se)&&(v=g[se],v!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:yn(d,h,se,v,g,null)}return;default:if(Zr(h)){for(ve in g)g.hasOwnProperty(ve)&&(v=g[ve],v!==void 0&&NT(d,h,ve,v,g,void 0));return}}for(j in g)g.hasOwnProperty(j)&&(v=g[j],v!=null&&yn(d,h,j,v,g,null))}function lde(d,h,g,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,_=null,P=null,j=null,Y=null,se=null,ve=null;for(ue in g){var Ce=g[ue];if(g.hasOwnProperty(ue)&&Ce!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":Y=Ce;default:v.hasOwnProperty(ue)||yn(d,h,ue,null,v,Ce)}}for(var ce in v){var ue=v[ce];if(Ce=g[ce],v.hasOwnProperty(ce)&&(ue!=null||Ce!=null))switch(ce){case"type":_=ue;break;case"name":C=ue;break;case"checked":se=ue;break;case"defaultChecked":ve=ue;break;case"value":P=ue;break;case"defaultValue":j=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,h));break;default:ue!==Ce&&yn(d,h,ce,ue,v,Ce)}}ac(d,P,j,Y,se,ve,_,C);return;case"select":ue=P=j=ce=null;for(_ in g)if(Y=g[_],g.hasOwnProperty(_)&&Y!=null)switch(_){case"value":break;case"multiple":ue=Y;default:v.hasOwnProperty(_)||yn(d,h,_,null,v,Y)}for(C in v)if(_=v[C],Y=g[C],v.hasOwnProperty(C)&&(_!=null||Y!=null))switch(C){case"value":ce=_;break;case"defaultValue":j=_;break;case"multiple":P=_;default:_!==Y&&yn(d,h,C,_,v,Y)}h=j,g=P,v=ue,ce!=null?Bs(d,!!g,ce,!1):!!v!=!!g&&(h!=null?Bs(d,!!g,h,!0):Bs(d,!!g,g?[]:"",!1));return;case"textarea":ue=ce=null;for(j in g)if(C=g[j],g.hasOwnProperty(j)&&C!=null&&!v.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:yn(d,h,j,null,v,C)}for(P in v)if(C=v[P],_=g[P],v.hasOwnProperty(P)&&(C!=null||_!=null))switch(P){case"value":ce=C;break;case"defaultValue":ue=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==_&&yn(d,h,P,C,v,_)}Ta(d,ce,ue);return;case"option":for(var ut in g)if(ce=g[ut],g.hasOwnProperty(ut)&&ce!=null&&!v.hasOwnProperty(ut))switch(ut){case"selected":d.selected=!1;break;default:yn(d,h,ut,null,v,ce)}for(Y in v)if(ce=v[Y],ue=g[Y],v.hasOwnProperty(Y)&&ce!==ue&&(ce!=null||ue!=null))switch(Y){case"selected":d.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:yn(d,h,Y,ce,v,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in g)ce=g[it],g.hasOwnProperty(it)&&ce!=null&&!v.hasOwnProperty(it)&&yn(d,h,it,null,v,ce);for(se in v)if(ce=v[se],ue=g[se],v.hasOwnProperty(se)&&ce!==ue&&(ce!=null||ue!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,h));break;default:yn(d,h,se,ce,v,ue)}return;default:if(Zr(h)){for(var bn in g)ce=g[bn],g.hasOwnProperty(bn)&&ce!==void 0&&!v.hasOwnProperty(bn)&&NT(d,h,bn,void 0,v,ce);for(ve in v)ce=v[ve],ue=g[ve],!v.hasOwnProperty(ve)||ce===ue||ce===void 0&&ue===void 0||NT(d,h,ve,ce,v,ue);return}}for(var te in g)ce=g[te],g.hasOwnProperty(te)&&ce!=null&&!v.hasOwnProperty(te)&&yn(d,h,te,null,v,ce);for(Ce in v)ce=v[Ce],ue=g[Ce],!v.hasOwnProperty(Ce)||ce===ue||ce==null&&ue==null||yn(d,h,Ce,ce,v,ue)}var IT=null,OT=null;function T1(d){return d.nodeType===9?d:d.ownerDocument}function pj(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mj(d,h){if(d===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&h==="foreignObject"?0:d}function PT(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var DT=null;function cde(){var d=window.event;return d&&d.type==="popstate"?d===DT?!1:(DT=d,!0):(DT=null,!1)}var gj=typeof setTimeout=="function"?setTimeout:void 0,ude=typeof clearTimeout=="function"?clearTimeout:void 0,yj=typeof Promise=="function"?Promise:void 0,dde=typeof queueMicrotask=="function"?queueMicrotask:typeof yj<"u"?function(d){return yj.resolve(null).then(d).catch(fde)}:gj;function fde(d){setTimeout(function(){throw d})}function Pu(d){return d==="head"}function bj(d,h){var g=h,v=0,C=0;do{var _=g.nextSibling;if(d.removeChild(g),_&&_.nodeType===8)if(g=_.data,g==="/$"){if(0<v&&8>v){g=v;var P=d.ownerDocument;if(g&1&&ry(P.documentElement),g&2&&ry(P.body),g&4)for(g=P.head,ry(g),P=g.firstChild;P;){var j=P.nextSibling,Y=P.nodeName;P[wa]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&P.rel.toLowerCase()==="stylesheet"||g.removeChild(P),P=j}}if(C===0){d.removeChild(_),dy(h);return}C--}else g==="$"||g==="$?"||g==="$!"?C++:v=g.charCodeAt(0)-48;else v=0;g=_}while(g);dy(h)}function $T(d){var h=d.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":$T(g),Ds(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}d.removeChild(g)}}function hde(d,h,g,v){for(;d.nodeType===1;){var C=g;if(d.nodeName.toLowerCase()!==h.toLowerCase()){if(!v&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(v){if(!d[wa])switch(h){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(_=d.getAttribute("rel"),_==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(_!==C.rel||d.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||d.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||d.getAttribute("title")!==(C.title==null?null:C.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(_=d.getAttribute("src"),(_!==(C.src==null?null:C.src)||d.getAttribute("type")!==(C.type==null?null:C.type)||d.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&_&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(h==="input"&&d.type==="hidden"){var _=C.name==null?null:""+C.name;if(C.type==="hidden"&&d.getAttribute("name")===_)return d}else return d;if(d=Oa(d.nextSibling),d===null)break}return null}function pde(d,h,g){if(h==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!g||(d=Oa(d.nextSibling),d===null))return null;return d}function LT(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function mde(d,h){var g=d.ownerDocument;if(d.data!=="$?"||g.readyState==="complete")h();else{var v=function(){h(),g.removeEventListener("DOMContentLoaded",v)};g.addEventListener("DOMContentLoaded",v),d._reactRetry=v}}function Oa(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return d}var jT=null;function vj(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var g=d.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return d;h--}else g==="/$"&&h++}d=d.previousSibling}return null}function wj(d,h,g){switch(h=T1(g),d){case"html":if(d=h.documentElement,!d)throw Error(r(452));return d;case"head":if(d=h.head,!d)throw Error(r(453));return d;case"body":if(d=h.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function ry(d){for(var h=d.attributes;h.length;)d.removeAttributeNode(h[0]);Ds(d)}var Ws=new Map,xj=new Set;function _1(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var Ec=G.d;G.d={f:gde,r:yde,D:bde,C:vde,L:wde,m:xde,X:kde,S:Sde,M:Cde};function gde(){var d=Ec.f(),h=b1();return d||h}function yde(d){var h=Ji(d);h!==null&&h.tag===5&&h.type==="form"?V5(h):Ec.r(d)}var up=typeof document>"u"?null:document;function Sj(d,h,g){var v=up;if(v&&typeof h=="string"&&h){var C=lo(h);C='link[rel="'+d+'"][href="'+C+'"]',typeof g=="string"&&(C+='[crossorigin="'+g+'"]'),xj.has(C)||(xj.add(C),d={rel:d,crossOrigin:g,href:h},v.querySelector(C)===null&&(h=v.createElement("link"),_o(h,"link",d),Wn(h),v.head.appendChild(h)))}}function bde(d){Ec.D(d),Sj("dns-prefetch",d,null)}function vde(d,h){Ec.C(d,h),Sj("preconnect",d,h)}function wde(d,h,g){Ec.L(d,h,g);var v=up;if(v&&d&&h){var C='link[rel="preload"][as="'+lo(h)+'"]';h==="image"&&g&&g.imageSrcSet?(C+='[imagesrcset="'+lo(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(C+='[imagesizes="'+lo(g.imageSizes)+'"]')):C+='[href="'+lo(d)+'"]';var _=C;switch(h){case"style":_=dp(d);break;case"script":_=fp(d)}Ws.has(_)||(d=u({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:d,as:h},g),Ws.set(_,d),v.querySelector(C)!==null||h==="style"&&v.querySelector(oy(_))||h==="script"&&v.querySelector(iy(_))||(h=v.createElement("link"),_o(h,"link",d),Wn(h),v.head.appendChild(h)))}}function xde(d,h){Ec.m(d,h);var g=up;if(g&&d){var v=h&&typeof h.as=="string"?h.as:"script",C='link[rel="modulepreload"][as="'+lo(v)+'"][href="'+lo(d)+'"]',_=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=fp(d)}if(!Ws.has(_)&&(d=u({rel:"modulepreload",href:d},h),Ws.set(_,d),g.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(iy(_)))return}v=g.createElement("link"),_o(v,"link",d),Wn(v),g.head.appendChild(v)}}}function Sde(d,h,g){Ec.S(d,h,g);var v=up;if(v&&d){var C=Xi(v).hoistableStyles,_=dp(d);h=h||"default";var P=C.get(_);if(!P){var j={loading:0,preload:null};if(P=v.querySelector(oy(_)))j.loading=5;else{d=u({rel:"stylesheet",href:d,"data-precedence":h},g),(g=Ws.get(_))&&zT(d,g);var Y=P=v.createElement("link");Wn(Y),_o(Y,"link",d),Y._p=new Promise(function(se,ve){Y.onload=se,Y.onerror=ve}),Y.addEventListener("load",function(){j.loading|=1}),Y.addEventListener("error",function(){j.loading|=2}),j.loading|=4,A1(P,h,v)}P={type:"stylesheet",instance:P,count:1,state:j},C.set(_,P)}}}function kde(d,h){Ec.X(d,h);var g=up;if(g&&d){var v=Xi(g).hoistableScripts,C=fp(d),_=v.get(C);_||(_=g.querySelector(iy(C)),_||(d=u({src:d,async:!0},h),(h=Ws.get(C))&&BT(d,h),_=g.createElement("script"),Wn(_),_o(_,"link",d),g.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},v.set(C,_))}}function Cde(d,h){Ec.M(d,h);var g=up;if(g&&d){var v=Xi(g).hoistableScripts,C=fp(d),_=v.get(C);_||(_=g.querySelector(iy(C)),_||(d=u({src:d,async:!0,type:"module"},h),(h=Ws.get(C))&&BT(d,h),_=g.createElement("script"),Wn(_),_o(_,"link",d),g.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},v.set(C,_))}}function kj(d,h,g,v){var C=(C=he.current)?_1(C):null;if(!C)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=dp(g.href),g=Xi(C).hoistableStyles,v=g.get(h),v||(v={type:"style",instance:null,count:0,state:null},g.set(h,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){d=dp(g.href);var _=Xi(C).hoistableStyles,P=_.get(d);if(P||(C=C.ownerDocument||C,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(d,P),(_=C.querySelector(oy(d)))&&!_._p&&(P.instance=_,P.state.loading=5),Ws.has(d)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ws.set(d,g),_||Ede(C,d,g,P.state))),h&&v===null)throw Error(r(528,""));return P}if(h&&v!==null)throw Error(r(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=fp(g),g=Xi(C).hoistableScripts,v=g.get(h),v||(v={type:"script",instance:null,count:0,state:null},g.set(h,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function dp(d){return'href="'+lo(d)+'"'}function oy(d){return'link[rel="stylesheet"]['+d+"]"}function Cj(d){return u({},d,{"data-precedence":d.precedence,precedence:null})}function Ede(d,h,g,v){d.querySelector('link[rel="preload"][as="style"]['+h+"]")?v.loading=1:(h=d.createElement("link"),v.preload=h,h.addEventListener("load",function(){return v.loading|=1}),h.addEventListener("error",function(){return v.loading|=2}),_o(h,"link",g),Wn(h),d.head.appendChild(h))}function fp(d){return'[src="'+lo(d)+'"]'}function iy(d){return"script[async]"+d}function Ej(d,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var v=d.querySelector('style[data-href~="'+lo(g.href)+'"]');if(v)return h.instance=v,Wn(v),v;var C=u({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return v=(d.ownerDocument||d).createElement("style"),Wn(v),_o(v,"style",C),A1(v,g.precedence,d),h.instance=v;case"stylesheet":C=dp(g.href);var _=d.querySelector(oy(C));if(_)return h.state.loading|=4,h.instance=_,Wn(_),_;v=Cj(g),(C=Ws.get(C))&&zT(v,C),_=(d.ownerDocument||d).createElement("link"),Wn(_);var P=_;return P._p=new Promise(function(j,Y){P.onload=j,P.onerror=Y}),_o(_,"link",v),h.state.loading|=4,A1(_,g.precedence,d),h.instance=_;case"script":return _=fp(g.src),(C=d.querySelector(iy(_)))?(h.instance=C,Wn(C),C):(v=g,(C=Ws.get(_))&&(v=u({},g),BT(v,C)),d=d.ownerDocument||d,C=d.createElement("script"),Wn(C),_o(C,"link",v),d.head.appendChild(C),h.instance=C);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(v=h.instance,h.state.loading|=4,A1(v,g.precedence,d));return h.instance}function A1(d,h,g){for(var v=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,_=C,P=0;P<v.length;P++){var j=v[P];if(j.dataset.precedence===h)_=j;else if(_!==C)break}_?_.parentNode.insertBefore(d,_.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(d,h.firstChild))}function zT(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.title==null&&(d.title=h.title)}function BT(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.integrity==null&&(d.integrity=h.integrity)}var M1=null;function Tj(d,h,g){if(M1===null){var v=new Map,C=M1=new Map;C.set(g,v)}else C=M1,v=C.get(g),v||(v=new Map,C.set(g,v));if(v.has(d))return v;for(v.set(d,null),g=g.getElementsByTagName(d),C=0;C<g.length;C++){var _=g[C];if(!(_[wa]||_[on]||d==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var P=_.getAttribute(h)||"";P=d+P;var j=v.get(P);j?j.push(_):v.set(P,[_])}}return v}function _j(d,h,g){d=d.ownerDocument||d,d.head.insertBefore(g,h==="title"?d.querySelector("head > title"):null)}function Tde(d,h,g){if(g===1||h.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return d=h.disabled,typeof h.precedence=="string"&&d==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function Aj(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var sy=null;function _de(){}function Ade(d,h,g){if(sy===null)throw Error(r(475));var v=sy;if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var C=dp(g.href),_=d.querySelector(oy(C));if(_){d=_._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(v.count++,v=R1.bind(v),d.then(v,v)),h.state.loading|=4,h.instance=_,Wn(_);return}_=d.ownerDocument||d,g=Cj(g),(C=Ws.get(C))&&zT(g,C),_=_.createElement("link"),Wn(_);var P=_;P._p=new Promise(function(j,Y){P.onload=j,P.onerror=Y}),_o(_,"link",g),h.instance=_}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(h,d),(d=h.state.preload)&&(h.state.loading&3)===0&&(v.count++,h=R1.bind(v),d.addEventListener("load",h),d.addEventListener("error",h))}}function Mde(){if(sy===null)throw Error(r(475));var d=sy;return d.stylesheets&&d.count===0&&VT(d,d.stylesheets),0<d.count?function(h){var g=setTimeout(function(){if(d.stylesheets&&VT(d,d.stylesheets),d.unsuspend){var v=d.unsuspend;d.unsuspend=null,v()}},6e4);return d.unsuspend=h,function(){d.unsuspend=null,clearTimeout(g)}}:null}function R1(){if(this.count--,this.count===0){if(this.stylesheets)VT(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var N1=null;function VT(d,h){d.stylesheets=null,d.unsuspend!==null&&(d.count++,N1=new Map,h.forEach(Rde,d),N1=null,R1.call(d))}function Rde(d,h){if(!(h.state.loading&4)){var g=N1.get(d);if(g)var v=g.get(null);else{g=new Map,N1.set(d,g);for(var C=d.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<C.length;_++){var P=C[_];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(g.set(P.dataset.precedence,P),v=P)}v&&g.set(null,v)}C=h.instance,P=C.getAttribute("data-precedence"),_=g.get(P)||v,_===v&&g.set(null,C),g.set(P,C),this.count++,v=R1.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),_?_.parentNode.insertBefore(C,_.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(C,d.firstChild)),h.state.loading|=4}}var ay={$$typeof:T,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Nde(d,h,g,v,C,_,P,j){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.hiddenUpdates=qr(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=_,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Mj(d,h,g,v,C,_,P,j,Y,se,ve,Ce){return d=new Nde(d,h,g,P,j,Y,se,Ce),h=1,_===!0&&(h|=24),_=ss(3,null,null,h),d.current=_,_.stateNode=d,h=S2(),h.refCount++,d.pooledCache=h,h.refCount++,_.memoizedState={element:v,isDehydrated:g,cache:h},T2(_),d}function Rj(d){return d?(d=Hh,d):Hh}function Nj(d,h,g,v,C,_){C=Rj(C),v.context===null?v.context=C:v.pendingContext=C,v=xu(h),v.payload={element:g},_=_===void 0?null:_,_!==null&&(v.callback=_),g=Su(d,v,h),g!==null&&(ds(g,d,h),Lg(g,d,h))}function Ij(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var g=d.retryLane;d.retryLane=g!==0&&g<h?g:h}}function FT(d,h){Ij(d,h),(d=d.alternate)&&Ij(d,h)}function Oj(d){if(d.tag===13){var h=Fh(d,67108864);h!==null&&ds(h,d,67108864),FT(d,67108864)}}var I1=!0;function Ide(d,h,g,v){var C=z.T;z.T=null;var _=G.p;try{G.p=2,HT(d,h,g,v)}finally{G.p=_,z.T=C}}function Ode(d,h,g,v){var C=z.T;z.T=null;var _=G.p;try{G.p=8,HT(d,h,g,v)}finally{G.p=_,z.T=C}}function HT(d,h,g,v){if(I1){var C=UT(v);if(C===null)RT(d,h,v,O1,g),Dj(d,v);else if(Dde(C,d,h,g,v))v.stopPropagation();else if(Dj(d,v),h&4&&-1<Pde.indexOf(d)){for(;C!==null;){var _=Ji(C);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var P=xn(_.pendingLanes);if(P!==0){var j=_;for(j.pendingLanes|=2,j.entangledLanes|=2;P;){var Y=1<<31-De(P);j.entanglements[1]|=Y,P&=~Y}xl(_),(ln&6)===0&&(g1=we()+500,ey(0))}}break;case 13:j=Fh(_,2),j!==null&&ds(j,_,2),b1(),FT(_,2)}if(_=UT(v),_===null&&RT(d,h,v,O1,g),_===C)break;C=_}C!==null&&v.stopPropagation()}else RT(d,h,v,null,g)}}function UT(d){return d=ml(d),GT(d)}var O1=null;function GT(d){if(O1=null,d=$s(d),d!==null){var h=i(d);if(h===null)d=null;else{var g=h.tag;if(g===13){if(d=s(h),d!==null)return d;d=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null)}}return O1=d,null}function Pj(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case Ze:return 2;case rt:return 8;case Bn:case So:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var qT=!1,Du=null,$u=null,Lu=null,ly=new Map,cy=new Map,ju=[],Pde="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dj(d,h){switch(d){case"focusin":case"focusout":Du=null;break;case"dragenter":case"dragleave":$u=null;break;case"mouseover":case"mouseout":Lu=null;break;case"pointerover":case"pointerout":ly.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":cy.delete(h.pointerId)}}function uy(d,h,g,v,C,_){return d===null||d.nativeEvent!==_?(d={blockedOn:h,domEventName:g,eventSystemFlags:v,nativeEvent:_,targetContainers:[C]},h!==null&&(h=Ji(h),h!==null&&Oj(h)),d):(d.eventSystemFlags|=v,h=d.targetContainers,C!==null&&h.indexOf(C)===-1&&h.push(C),d)}function Dde(d,h,g,v,C){switch(h){case"focusin":return Du=uy(Du,d,h,g,v,C),!0;case"dragenter":return $u=uy($u,d,h,g,v,C),!0;case"mouseover":return Lu=uy(Lu,d,h,g,v,C),!0;case"pointerover":var _=C.pointerId;return ly.set(_,uy(ly.get(_)||null,d,h,g,v,C)),!0;case"gotpointercapture":return _=C.pointerId,cy.set(_,uy(cy.get(_)||null,d,h,g,v,C)),!0}return!1}function $j(d){var h=$s(d.target);if(h!==null){var g=i(h);if(g!==null){if(h=g.tag,h===13){if(h=s(g),h!==null){d.blockedOn=h,Lo(d.priority,function(){if(g.tag===13){var v=us();v=ki(v);var C=Fh(g,v);C!==null&&ds(C,g,v),FT(g,v)}});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){d.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}d.blockedOn=null}function P1(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var g=UT(d.nativeEvent);if(g===null){g=d.nativeEvent;var v=new g.constructor(g.type,g);Co=v,g.target.dispatchEvent(v),Co=null}else return h=Ji(g),h!==null&&Oj(h),d.blockedOn=g,!1;h.shift()}return!0}function Lj(d,h,g){P1(d)&&g.delete(h)}function $de(){qT=!1,Du!==null&&P1(Du)&&(Du=null),$u!==null&&P1($u)&&($u=null),Lu!==null&&P1(Lu)&&(Lu=null),ly.forEach(Lj),cy.forEach(Lj)}function D1(d,h){d.blockedOn===h&&(d.blockedOn=null,qT||(qT=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$de)))}var $1=null;function jj(d){$1!==d&&($1=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){$1===d&&($1=null);for(var h=0;h<d.length;h+=3){var g=d[h],v=d[h+1],C=d[h+2];if(typeof v!="function"){if(GT(v||g)===null)continue;break}var _=Ji(g);_!==null&&(d.splice(h,3),h-=3,G2(_,{pending:!0,data:C,method:g.method,action:v},v,C))}}))}function dy(d){function h(Y){return D1(Y,d)}Du!==null&&D1(Du,d),$u!==null&&D1($u,d),Lu!==null&&D1(Lu,d),ly.forEach(h),cy.forEach(h);for(var g=0;g<ju.length;g++){var v=ju[g];v.blockedOn===d&&(v.blockedOn=null)}for(;0<ju.length&&(g=ju[0],g.blockedOn===null);)$j(g),g.blockedOn===null&&ju.shift();if(g=(d.ownerDocument||d).$$reactFormReplay,g!=null)for(v=0;v<g.length;v+=3){var C=g[v],_=g[v+1],P=C[Wt]||null;if(typeof _=="function")P||jj(g);else if(P){var j=null;if(_&&_.hasAttribute("formAction")){if(C=_,P=_[Wt]||null)j=P.formAction;else if(GT(C)!==null)continue}else j=P.action;typeof j=="function"?g[v+1]=j:(g.splice(v,3),v-=3),jj(g)}}}function ZT(d){this._internalRoot=d}L1.prototype.render=ZT.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(r(409));var g=h.current,v=us();Nj(g,v,d,h,null,null)},L1.prototype.unmount=ZT.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Nj(d.current,2,null,d,null,null),b1(),h[jo]=null}};function L1(d){this._internalRoot=d}L1.prototype.unstable_scheduleHydration=function(d){if(d){var h=Zt();d={blockedOn:null,target:d,priority:h};for(var g=0;g<ju.length&&h!==0&&h<ju[g].priority;g++);ju.splice(g,0,d),g===0&&$j(d)}};var zj=t.version;if(zj!=="19.1.1")throw Error(r(527,zj,"19.1.1"));G.findDOMNode=function(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=l(h),d=d!==null?c(d):null,d=d===null?null:d.stateNode,d};var Lde={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var j1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!j1.isDisabled&&j1.supportsFiber)try{fe=j1.inject(Lde),Se=j1}catch{}}return hy.createRoot=function(d,h){if(!o(d))throw Error(r(299));var g=!1,v="",C=tL,_=nL,P=rL,j=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(_=h.onCaughtError),h.onRecoverableError!==void 0&&(P=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(j=h.unstable_transitionCallbacks)),h=Mj(d,1,!1,null,null,g,v,C,_,P,j,null),d[jo]=h.current,MT(d),new ZT(h)},hy.hydrateRoot=function(d,h,g){if(!o(d))throw Error(r(299));var v=!1,C="",_=tL,P=nL,j=rL,Y=null,se=null;return g!=null&&(g.unstable_strictMode===!0&&(v=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(_=g.onUncaughtError),g.onCaughtError!==void 0&&(P=g.onCaughtError),g.onRecoverableError!==void 0&&(j=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Y=g.unstable_transitionCallbacks),g.formState!==void 0&&(se=g.formState)),h=Mj(d,1,!0,h,g??null,v,C,_,P,j,Y,se),h.context=Rj(null),g=h.current,v=us(),v=ki(v),C=xu(v),C.callback=null,Su(g,C,v),g=v,h.current.lanes=g,Qn(h,g),xl(h),d[jo]=h.current,MT(d),new L1(h)},hy.version="19.1.1",hy}var Kj;function Zde(){if(Kj)return YT.exports;Kj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),YT.exports=qde(),YT.exports}var UU=Zde();const Wde=Rd(UU);var e_={exports:{}},t_={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yj;function Kde(){if(Yj)return t_;Yj=1;var e=$b().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return t_.c=function(t){return e.H.useMemoCache(t)},t_}var Jj;function Yde(){return Jj||(Jj=1,e_.exports=Kde()),e_.exports}var st=Yde();const Jde="modulepreload",Xde=function(e){return"/"+e},Xj={},Ne=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");o=l(n.map(c=>{if(c=Xde(c),c in Xj)return;Xj[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Jde,u||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,y)=>{p.addEventListener("load",m),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},Qj=e=>{let t;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const p=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,p))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,o,a);return a},Qde=(e=>e?Qj(e):Qj),efe=e=>e;function tfe(e,t=efe){const n=ie.useSyncExternalStore(e.subscribe,ie.useCallback(()=>t(e.getState()),[e,t]),ie.useCallback(()=>t(e.getInitialState()),[e,t]));return ie.useDebugValue(n),n}const e9=e=>{const t=Qde(e),n=r=>tfe(t,r);return Object.assign(n,t),n},GU=(e=>e?e9(e):e9);async function mr(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}typeof window<"u"&&window.addEventListener("blur",()=>{const e=ws.getState().saveTimeout;e&&(clearTimeout(e),ws.getState().saveCurrentNote())});const ws=GU()((e,t)=>({notes:[],folders:[],currentNote:null,isLoading:!1,saveTimeout:null,loadNotes:async()=>{e({isLoading:!0});try{const n=await mr("get_all_notes");e({notes:n,isLoading:!1})}catch(n){console.error("Failed to load notes:",n),e({isLoading:!1})}},loadFolders:async()=>{try{const n=await mr("get_all_folders");e({folders:n})}catch(n){console.error("Failed to load folders:",n)}},selectNote:async n=>{const r=t();r.saveTimeout&&(clearTimeout(r.saveTimeout),await t().saveCurrentNote()),e({currentNote:n})},createNote:async(n="text",r)=>{try{const o=JSON.stringify([{id:crypto.randomUUID(),type:"heading",props:{level:1},content:"Untitled",children:[]}]),s={...await mr("create_note",{title:"Untitled",noteType:n,folderId:r}),content:o};return await mr("save_note",{note:s}),e(a=>({notes:[s,...a.notes]})),s}catch(o){throw console.error("Failed to create note:",o),o}},createFolder:async(n,r)=>{try{const o=await mr("create_folder",{name:n,parentId:r});return e(i=>({folders:[...i.folders,o]})),o}catch(o){throw console.error("Failed to create folder:",o),o}},updateNote:async(n,r)=>{try{const i=t().notes.find(a=>a.id===n);if(!i)throw new Error("Note not found");const s={...i,...r,updated_at:new Date().toISOString()};await mr("save_note",{note:s}),e(a=>({notes:a.notes.map(l=>l.id===n?s:l),currentNote:a.currentNote?.id===n?s:a.currentNote}))}catch(o){throw console.error("Failed to update note:",o),o}},updateFolder:async(n,r)=>{try{const i=t().folders.find(a=>a.id===n);if(!i)throw new Error("Folder not found");const s={...i,...r,updated_at:new Date().toISOString()};await mr("update_folder",{folder:s}),e(a=>({folders:a.folders.map(l=>l.id===n?s:l)}))}catch(o){throw console.error("Failed to update folder:",o),o}},deleteNote:async n=>{try{await mr("delete_note",{noteId:n}),e(r=>({notes:r.notes.filter(o=>o.id!==n),currentNote:r.currentNote?.id===n?null:r.currentNote}))}catch(r){throw console.error("Failed to delete note:",r),r}},deleteFolder:async n=>{try{await mr("delete_folder",{folderId:n}),e(r=>({folders:r.folders.filter(o=>o.id!==n),notes:r.notes.filter(o=>o.folder_id!==n),currentNote:r.currentNote?.folder_id===n?null:r.currentNote}))}catch(r){throw console.error("Failed to delete folder:",r),r}},updateCurrentNoteContent:n=>{console.log("updateCurrentNoteContent called with length:",n.length);const r=t();if(r.currentNote){console.log("Updating note content locally"),r.saveTimeout&&clearTimeout(r.saveTimeout);const o={...r.currentNote,content:n},i=setTimeout(()=>{console.log("Executing autosave timeout"),t().saveCurrentNote()},200);e(s=>({currentNote:o,notes:s.notes.map(a=>a.id===o.id?o:a),saveTimeout:i}))}else console.log("No current note to update")},updateCurrentNoteTitle:n=>{const r=t();if(!r.currentNote)return;const o={...r.currentNote,title:n};e(i=>({currentNote:o,notes:i.notes.map(s=>s.id===o.id?o:s)}))},saveCurrentNote:async()=>{console.log("saveCurrentNote called");const n=t();if(n.currentNote)try{console.log("Invoking save_note"),await mr("save_note",{note:n.currentNote}),e({saveTimeout:null}),console.log("Note saved successfully:",n.currentNote.id)}catch(r){console.error("Failed to save note:",r)}else console.log("No current note to save")}}));function Mo(e){this.content=e}Mo.prototype={constructor:Mo,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return o==-1?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new Mo(i)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Mo(n)},addToStart:function(e,t){return new Mo([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Mo(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(i==-1?o.length:i,0,t,n),new Mo(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Mo.from(e),e.size?new Mo(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Mo.from(e),e.size?new Mo(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Mo.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Mo.from=function(e){if(e instanceof Mo)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Mo(t)};function qU(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(r),i=t.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=qU(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function ZU(e,t,n,r){for(let o=e.childCount,i=t.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=e.child(--o),a=t.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=ZU(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class pe{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>t&&r(l,o+a,i||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,o){let i="",s=!0;return this.nodesBetween(t,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new pe(o,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],o=0;if(n>t)for(let i=0,s=0;s<n;i++){let a=this.content[i],l=s+a.nodeSize;l>t&&((s<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,t-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new pe(r,o)}cutByIndex(t,n){return t==n?pe.empty:t==0&&n==this.content.length?this:new pe(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new pe(o,i)}addToStart(t){return new pe([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new pe(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];t(o,r,n),r+=o.nodeSize}}findDiffStart(t,n=0){return qU(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return ZU(this,t,n,r)}findIndex(t){if(t==0)return B1(0,t);if(t==this.size)return B1(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t?B1(n+1,i):B1(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return pe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new pe(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return pe.empty;let n,r=0;for(let o=0;o<t.length;o++){let i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new pe(n||t,r)}static from(t){if(!t)return pe.empty;if(t instanceof pe)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new pe([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}pe.empty=new pe([],0);const n_={index:0,offset:0};function B1(e,t){return n_.index=e,n_.offset=t,n_}function Rx(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Rx(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Rx(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Tn=class ZM{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let o=0;o<t.length;o++){let i=t[o];if(this.eq(i))return t;if(this.type.excludes(i.type))n||(n=t.slice(0,o));else{if(i.type.excludes(this.type))return t;!r&&i.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Rx(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return ZM.none;if(t instanceof ZM)return[t];let n=t.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Tn.none=[];class Nx extends Error{}class Te{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=KU(this.content,t+this.openStart,n);return r&&new Te(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Te(WU(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Te.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Te(pe.fromJSON(t,n.content),r,o)}static maxOpen(t,n=!0){let r=0,o=0;for(let i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=t.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new Te(t,r,o)}}Te.empty=new Te(pe.empty,0,0);function WU(e,t,n){let{index:r,offset:o}=e.findIndex(t),i=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(o==t||i.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(WU(i.content,t-o-1,n-o-1)))}function KU(e,t,n,r){let{index:o,offset:i}=e.findIndex(t),s=e.maybeChild(o);if(i==t||s.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=KU(s.content,t-i-1,n,s);return a&&e.replaceChild(o,s.copy(a))}function nfe(e,t,n){if(n.openStart>e.depth)throw new Nx("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Nx("Inconsistent open depths");return YU(e,t,n,0)}function YU(e,t,n,r){let o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){let s=YU(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let s=e.parent,a=s.content;return Hf(s,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:s,end:a}=rfe(n,e);return Hf(i,XU(e,s,a,t,r))}else return Hf(i,Ix(e,t,r))}function JU(e,t){if(!t.type.compatibleContent(e.type))throw new Nx("Cannot join "+t.type.name+" onto "+e.type.name)}function WM(e,t,n){let r=e.node(n);return JU(r,t.node(n)),r}function Ff(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Uy(e,t,n,r){let o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Ff(e.nodeAfter,r),i++));for(let a=i;a<s;a++)Ff(o.child(a),r);t&&t.depth==n&&t.textOffset&&Ff(t.nodeBefore,r)}function Hf(e,t){return e.type.checkContent(t),e.copy(t)}function XU(e,t,n,r,o){let i=e.depth>o&&WM(e,t,o+1),s=r.depth>o&&WM(n,r,o+1),a=[];return Uy(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(JU(i,s),Ff(Hf(i,XU(e,t,n,r,o+1)),a)):(i&&Ff(Hf(i,Ix(e,t,o+1)),a),Uy(t,n,o,a),s&&Ff(Hf(s,Ix(n,r,o+1)),a)),Uy(r,null,o,a),new pe(a)}function Ix(e,t,n){let r=[];if(Uy(null,e,n,r),e.depth>n){let o=WM(e,t,n+1);Ff(Hf(o,Ix(e,t,n+1)),r)}return Uy(t,null,n,r),new pe(r)}function rfe(e,t){let n=t.depth-e.openStart,o=t.node(n).copy(e.content);for(let i=n-1;i>=0;i--)o=t.node(i).copy(pe.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}class S0{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=t.child(n);return r?t.child(n).cut(r):o}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<t;i++)o+=r.child(i).nodeSize;return o}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Tn.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),o=t.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=t.parent.maybeChild(t.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ox(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=t;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new S0(n,r,i)}static resolveCached(t,n){let r=t9.get(t);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else t9.set(t,r=new ofe);let o=r.elts[r.i]=S0.resolve(t,n);return r.i=(r.i+1)%ife,o}}class ofe{constructor(){this.elts=[],this.i=0}}const ife=12,t9=new WeakMap;class Ox{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const sfe=Object.create(null);let Fc=class KM{constructor(t,n,r,o=Tn.none){this.type=t,this.attrs=n,this.marks=o,this.content=r||pe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,o=0){this.content.nodesBetween(t,n,r,o,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,o){return this.content.textBetween(t,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Rx(this.attrs,n||t.defaultAttrs||sfe)&&Tn.sameSet(this.marks,r||Tn.none)}copy(t=null){return t==this.content?this:new KM(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new KM(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Te.empty;let o=this.resolve(t),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new Te(c,o.depth-s,i.depth-s)}replace(t,n,r){return nfe(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(o==t||n.isText)return n;t-=o+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(t){return S0.resolveCached(this,t)}resolveNoCache(t){return S0.resolve(this,t)}rangeHasMark(t,n,r){let o=!1;return n>t&&this.nodesBetween(t,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),QU(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=pe.empty,o=0,i=r.childCount){let s=this.contentMatchAt(t).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(t).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Tn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Tn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let o=pe.fromJSON(t,n.content),i=t.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};Fc.prototype.text=void 0;class Px extends Fc{constructor(t,n,r,o){if(super(t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):QU(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Px(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Px(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function QU(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Xf{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new afe(t,n);if(r.next==null)return Xf.empty;let o=eG(r);r.next&&r.err("Unexpected trailing text");let i=pfe(hfe(o));return mfe(i,r),i}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(t.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(t,r);if(l&&(!n||l.validEnd))return pe.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:f}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);let p=i(f,a.concat(u));if(p)return p}}return null}return i(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(t)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let o=0;o<r.next.length;o++)t.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),t.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+t.indexOf(r.next[s].next);return i}).join(`
`)}}Xf.empty=new Xf(!0);class afe{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function eG(e){let t=[];do t.push(lfe(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function lfe(e){let t=[];do t.push(cfe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function cfe(e){let t=ffe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=ufe(e,t);else break;return t}function n9(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function ufe(e,t){let n=n9(e),r=n;return e.eat(",")&&(e.next!="}"?r=n9(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function dfe(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(t)&&o.push(s)}return o.length==0&&e.err("No node type or group '"+t+"' found"),o}function ffe(e){if(e.eat("(")){let t=eG(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=dfe(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function hfe(e){let t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(s,a,l){let c={term:l,to:a};return t[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();o(i(s.expr,l),u),l=u}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),o(i(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function tG(e,t){return t-e}function r9(e,t){let n=[];return r(t),n.sort(tG);function r(o){let i=e[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&n.indexOf(l)==-1&&r(l)}}}function pfe(e){let t=Object.create(null);return n(r9(e,0));function n(r){let o=[];r.forEach(s=>{e[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);r9(e,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=t[r.join(",")]=new Xf(r.indexOf(e.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(tG);i.next.push({type:o[s][0],next:t[a.join(",")]||n(a)})}return i}}function mfe(e,t){for(let n=0,r=[e];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function nG(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function rG(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(o===void 0){let i=e[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function oG(e,t,n,r){for(let o in t)if(!(o in e))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in e){let i=e[o];i.validate&&i.validate(t[o])}}function iG(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new yfe(e,r,t[r]);return n}let o9=class sG{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=iG(t,r.attrs),this.defaultAttrs=nG(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Xf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:rG(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Fc(this,this.computeAttrs(t),pe.from(n),Tn.setFrom(r))}createChecked(t=null,n,r){return n=pe.from(n),this.checkContent(n),new Fc(this,this.computeAttrs(t),n,Tn.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=pe.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(pe.empty,!0);return i?new Fc(this,t,n.append(i),Tn.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){oG(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Tn.none:t}static compile(t,n){let r=Object.create(null);t.forEach((i,s)=>r[i]=new sG(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function gfe(e,t,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}class yfe{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?gfe(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class rC{constructor(t,n,r,o){this.name=t,this.rank=n,this.schema=r,this.spec=o,this.attrs=iG(t,o.attrs),this.excluded=null;let i=nG(this.attrs);this.instance=i?new Tn(this,i):null}create(t=null){return!t&&this.instance?this.instance:new Tn(this,rG(this.attrs,t))}static compile(t,n){let r=Object.create(null),o=0;return t.forEach((i,s)=>r[i]=new rC(i,o++,n,s)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){oG(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let aG=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in t)n[o]=t[o];n.nodes=Mo.from(t.nodes),n.marks=Mo.from(t.marks||{}),this.nodes=o9.compile(this.spec.nodes,this),this.marks=rC.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=Xf.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?i9(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:i9(this,s.split(" "))}this.nodeFromJSON=o=>Fc.fromJSON(this,o),this.markFromJSON=o=>Tn.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,o){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof o9){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,o)}text(t,n){let r=this.nodes.text;return new Px(r,r.defaultAttrs,t,Tn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function i9(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(let a in e.marks){let l=e.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function bfe(e){return e.tag!=null}function vfe(e){return e.style!=null}let Bl=class YM{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(bfe(o))this.tags.push(o);else if(vfe(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=t.nodes[o.node];return i.contentMatch.matchType(i)})}parse(t,n={}){let r=new a9(this,n,!1);return r.addAll(t,Tn.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new a9(this,n,!0);return r.addAll(t,Tn.none,n.from,n.to),Te.maxOpen(r.finish())}matchTag(t,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(Sfe(t,i.tag)&&(i.namespace===void 0||t.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(t);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(t,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(t)!=0||s.context&&!r.matchesContext(s.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in t.marks){let i=t.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=l9(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in t.nodes){let i=t.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=l9(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new YM(t,YM.schemaRules(t)))}};const lG={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wfe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},cG={ol:!0,ul:!0},k0=1,JM=2,Gy=4;function s9(e,t,n){return t!=null?(t?k0:0)|(t==="full"?JM:0):e&&e.whitespace=="pre"?k0|JM:n&~Gy}class V1{constructor(t,n,r,o,i,s){this.type=t,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=Tn.none,this.match=i||(s&Gy?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(pe.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(t.type))?(this.match=r,o):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&k0)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=pe.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(pe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!lG.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class a9{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=s9(null,n.preserveWhitespace,0)|(r?Gy:0);o?i=new V1(o.type,o.attrs,Tn.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new V1(null,null,Tn.none,!0,null,s):i=new V1(t.schema.topNodeType,null,Tn.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,o=this.top,i=o.options&JM?"full":this.localPreserveWS||(o.options&k0)>0;if(i==="full"||o.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],a=t.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let o=this.localPreserveWS,i=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let s=t.nodeName.toLowerCase(),a;cG.hasOwnProperty(s)&&this.parser.normalizeLists&&xfe(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:wfe.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(lG.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=l&&l.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(t,n);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(t);else if(o)this.addElement(t,r,o);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}i&&this.sync(a)&&this.open--}addAll(t,n,r,o){let i=r||0;for(let s=r?t.childNodes[r]:t.firstChild,a=o==null?null:t.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(s,n);this.findAtPoint(t,i)}findPlace(t,n,r){let o,i;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(t);if(c&&(!o||o.length>c.length+a)&&(o=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)n=this.enterInner(o[s],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let o=this.findPlace(t,n,r);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(t.type));let s=Tn.none;for(let a of o.concat(t.marks))(i.type?i.type.allowsMarkType(a.type):c9(a.type,t.type))&&(s=a.addToSet(s));return i.content.push(t.mark(s)),!0}return!1}enter(t,n,r,o){let i=this.findPlace(t.create(n),r,!1);return i&&(i=this.enterInner(t,n,r,!0,o)),i}enterInner(t,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(t);let a=s9(t,i,s.options);s.options&Gy&&s.content.length==0&&(a|=Gy);let l=Tn.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):c9(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new V1(t,n,l,o,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=k0)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)t+=r[o].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&t.nodeType==1&&t.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function xfe(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&cG.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function Sfe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function l9(e){let t={};for(let n in e)t[n]=e[n];return t}function c9(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}class au{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=r_(n).createDocumentFragment());let o=r,i=[];return t.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:o}=Qw(r_(n),this.nodes[t.type.name](t),null,t.attrs);if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,o)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let o=t.marks.length-1;o>=0;o--){let i=this.serializeMark(t.marks[o],t.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(t,n,r={}){let o=this.marks[t.type.name];return o&&Qw(r_(r),o(t,n),null,t.attrs)}static renderSpec(t,n,r=null,o){return Qw(t,n,r,o)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new au(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=u9(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return u9(t.marks)}}function u9(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function r_(e){return e.document||window.document}const d9=new WeakMap;function kfe(e){let t=d9.get(e);return t===void 0&&d9.set(e,t=Cfe(e)),t}function Cfe(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(e),t}function Qw(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let o=t[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=kfe(r))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let a,l=n?e.createElementNS(n,o):e.createElement(o),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=u;f<t.length;f++){let p=t[f];if(p===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:y}=Qw(e,p,n,r);if(l.appendChild(m),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const uG=65535,dG=Math.pow(2,16);function Efe(e,t){return e+t*dG}function f9(e){return e&uG}function Tfe(e){return(e-(e&uG))/dG}const fG=1,hG=2,ex=4,pG=8;class XM{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&pG)>0}get deletedBefore(){return(this.delInfo&(fG|ex))>0}get deletedAfter(){return(this.delInfo&(hG|ex))>0}get deletedAcross(){return(this.delInfo&ex)>0}}class bs{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&bs.empty)return bs.empty}recover(t){let n=0,r=f9(t);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+Tfe(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>t)break;let c=this.ranges[a+i],u=this.ranges[a+s],f=l+c;if(t<=f){let p=c?t==l?-1:t==f?1:n:n,m=l+o+(p<0?0:u);if(r)return m;let y=t==(n<0?l:f)?null:Efe(a/3,t-l),b=t==l?hG:t==f?fG:ex;return(n<0?t!=l:t!=f)&&(b|=pG),new XM(m,b,y)}o+=u-c}return r?t+o:new XM(t+o,0,null)}touches(t,n){let r=0,o=f9(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+i],u=l+c;if(t<=u&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+n],u=this.ranges[o+r];t(a,a+c,l,l+u),i+=u-c}}invert(){return new bs(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?bs.empty:new bs(t<0?[0,-t,0]:[0,0,t])}}bs.empty=new bs([]);class Qf{constructor(t,n,r=0,o=t?t.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Qf(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let o=t.getMirror(n);this.appendMap(t._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let o=t.getMirror(n);this.appendMap(t._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let t=new Qf;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],a=s.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,t=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,t=a.pos}return r?t:new XM(t,o,null)}}const o_=Object.create(null);class ni{getMap(){return bs.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=o_[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in o_)throw new RangeError("Duplicate use of step JSON ID "+t);return o_[t]=n,n.prototype.jsonID=t,n}}class Fr{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Fr(t,null)}static fail(t){return new Fr(null,t)}static fromReplace(t,n,r,o){try{return Fr.ok(t.replace(n,r,o))}catch(i){if(i instanceof Nx)return Fr.fail(i.message);throw i}}}function bO(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(bO(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return pe.fromArray(r)}class id extends ni{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Te(bO(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return Fr.fromReplace(t,this.from,this.to,i)}invert(){return new Dl(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new id(n.pos,r.pos,this.mark)}merge(t){return t instanceof id&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new id(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new id(n.from,n.to,t.markFromJSON(n.mark))}}ni.jsonID("addMark",id);class Dl extends ni{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Te(bO(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),t),n.openStart,n.openEnd);return Fr.fromReplace(t,this.from,this.to,r)}invert(){return new id(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Dl(n.pos,r.pos,this.mark)}merge(t){return t instanceof Dl&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Dl(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Dl(n.from,n.to,t.markFromJSON(n.mark))}}ni.jsonID("removeMark",Dl);class sd extends ni{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Fr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Fr.fromReplace(t,this.pos,this.pos+1,new Te(pe.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new sd(this.pos,n.marks[o]);return new sd(this.pos,this.mark)}}return new eh(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new sd(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new sd(n.pos,t.markFromJSON(n.mark))}}ni.jsonID("addNodeMark",sd);class eh extends ni{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Fr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Fr.fromReplace(t,this.pos,this.pos+1,new Te(pe.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new sd(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new eh(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new eh(n.pos,t.markFromJSON(n.mark))}}ni.jsonID("removeNodeMark",eh);class Pn extends ni{constructor(t,n,r,o=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=o}apply(t){return this.structure&&QM(t,this.from,this.to)?Fr.fail("Structure replace would overwrite content"):Fr.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new bs([this.from,this.to-this.from,this.slice.size])}invert(t){return new Pn(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Pn(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Pn)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Te.empty:new Te(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Pn(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Te.empty:new Te(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Pn(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pn(n.from,n.to,Te.fromJSON(t,n.slice),!!n.structure)}}ni.jsonID("replace",Pn);class vr extends ni{constructor(t,n,r,o,i,s,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(t){if(this.structure&&(QM(t,this.from,this.gapFrom)||QM(t,this.gapTo,this.to)))return Fr.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Fr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Fr.fromReplace(t,this.from,this.to,r):Fr.fail("Content does not fit in gap")}getMap(){return new bs([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new vr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new vr(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new vr(n.from,n.to,n.gapFrom,n.gapTo,Te.fromJSON(t,n.slice),n.insert,!!n.structure)}}ni.jsonID("replaceAround",vr);function QM(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function _fe(e,t,n,r){let o=[],i=[],s,a;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let p=Math.max(c,t),m=Math.min(c+l.nodeSize,n),y=r.addToSet(f);for(let b=0;b<f.length;b++)f[b].isInSet(y)||(s&&s.to==p&&s.mark.eq(f[b])?s.to=m:o.push(s=new Dl(p,m,f[b])));a&&a.to==p?a.to=m:i.push(a=new id(p,m,r))}}),o.forEach(l=>e.step(l)),i.forEach(l=>e.step(l))}function Afe(e,t,n,r){let o=[],i=0;e.doc.nodesBetween(t,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof rC){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],p;for(let m=0;m<o.length;m++){let y=o[m];y.step==i-1&&f.eq(o[m].style)&&(p=y)}p?(p.to=c,p.step=i):o.push({style:f,from:Math.max(a,t),to:c,step:i})}}}),o.forEach(s=>e.step(new Dl(s.from,s.to,s.style)))}function vO(e,t,n,r=n.contentMatch,o=!0){let i=e.doc.nodeAt(t),s=[],a=t+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new Pn(a,u,Te.empty));else{r=f;for(let p=0;p<c.marks.length;p++)n.allowsMarkType(c.marks[p].type)||e.step(new Dl(a,u,c.marks[p]));if(o&&c.isText&&n.whitespace!="pre"){let p,m=/\r?\n|\r/g,y;for(;p=m.exec(c.text);)y||(y=new Te(pe.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Pn(a+p.index,a+p.index+p[0].length,y))}}a=u}if(!r.validEnd){let l=r.fillBefore(pe.empty,!0);e.replace(a,a,new Te(l,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function Mfe(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Fm(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let o=e.$from.node(r),i=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!Mfe(o,i,s))break}return null}function Rfe(e,t,n){let{$from:r,$to:o,depth:i}=t,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=pe.empty,f=0;for(let y=i,b=!1;y>n;y--)b||r.index(y)>0?(b=!0,u=pe.from(r.node(y).copy(u)),f++):l--;let p=pe.empty,m=0;for(let y=i,b=!1;y>n;y--)b||o.after(y+1)<o.end(y)?(b=!0,p=pe.from(o.node(y).copy(p)),m++):c++;e.step(new vr(l,c,s,a,new Te(u.append(p),f,m),u.size-f,!0))}function mG(e,t,n=null,r=e){let o=Nfe(e,t),i=o&&Ife(r,t);return i?o.map(h9).concat({type:t,attrs:n}).concat(i.map(h9)):null}function h9(e){return{type:e,attrs:null}}function Nfe(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}function Ife(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function Ofe(e,t,n){let r=pe.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=pe.from(n[s].type.create(n[s].attrs,r))}let o=t.start,i=t.end;e.step(new vr(o,i,o,i,new Te(r,0,0),n.length,!0))}function Pfe(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&Dfe(e.doc,e.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!y?c=!1:!m&&y&&(c=!0)}c===!1&&yG(e,s,a,i),vO(e,e.mapping.slice(i).map(a,1),r,void 0,c===null);let u=e.mapping.slice(i),f=u.map(a,1),p=u.map(a+s.nodeSize,1);return e.step(new vr(f,p,f+1,p-1,new Te(pe.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&gG(e,s,a,i),!1}})}function gG(e,t,n,r){t.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=e.mapping.slice(r).map(n+1+i+s.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function yG(e,t,n,r){t.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=e.mapping.slice(r).map(n+1+i);e.replaceWith(s,s+1,t.type.schema.text(`
`))}})}function Dfe(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function $fe(e,t,n,r,o){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new vr(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new Te(pe.from(s),0,0),1,!0))}function Hc(e,t,n=1,r){let o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let f=o.node(c),p=o.index(c);if(f.type.spec.isolating)return!1;let m=f.content.cutByIndex(p,f.childCount),y=r&&r[u+1];y&&(m=m.replaceChild(0,y.type.create(y.attrs)));let b=r&&r[u]||f;if(!f.canReplace(p+1,f.childCount)||!b.type.validContent(m))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function Lfe(e,t,n=1,r){let o=e.doc.resolve(t),i=pe.empty,s=pe.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=pe.from(o.node(a).copy(i));let u=r&&r[c];s=pe.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}e.step(new Pn(t,t,new Te(i.append(s),n,n),!0))}function vh(e,t){let n=e.resolve(t),r=n.index();return bG(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function jfe(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let o=0;o<t.childCount;o++){let i=t.child(o),s=i.type==r?e.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!e.type.allowsMarks(i.marks))return!1}return n.validEnd}function bG(e,t){return!!(e&&t&&!e.isLeaf&&jfe(e,t))}function oC(e,t,n=-1){let r=e.resolve(t);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&bG(i,s)&&r.node(o).canReplace(a,a+1))return t;if(o==0)break;t=n<0?r.before(o):r.after(o)}}function zfe(e,t,n){let r=null,{linebreakReplacement:o}=e.doc.type.schema,i=e.doc.resolve(t-n),s=i.node().type;if(o&&s.inlineContent){let u=s.whitespace=="pre",f=!!s.contentMatch.matchType(o);u&&!f?r=!1:!u&&f&&(r=!0)}let a=e.steps.length;if(r===!1){let u=e.doc.resolve(t+n);yG(e,u.node(),u.before(),a)}s.inlineContent&&vO(e,t+n-1,s,i.node().contentMatchAt(i.index()),r==null);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new Pn(c,l.map(t+n,-1),Te.empty,!0)),r===!0){let u=e.doc.resolve(c);gG(e,u.node(),u.before(),e.steps.length)}return e}function Bfe(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function vG(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(l,l,o);else{let f=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function iC(e,t,n=t,r=Te.empty){if(t==n&&!r.size)return null;let o=e.resolve(t),i=e.resolve(n);return wG(o,i,r)?new Pn(t,n,r):new Vfe(o,i,r).fit()}function wG(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class Vfe{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=pe.empty;for(let o=0;o<=t.depth;o++){let i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}for(let o=t.depth;o>0;o--)this.placed=pe.from(t.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new Te(i,s,a);return t>-1?new vr(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Pn(r.pos,o.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<t;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){t=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=i_(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(pe.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:f};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,o=i_(t,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Te(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,o=i_(t,n);if(o.childCount<=1&&n>0){let i=t.size-n<=n+o.size;this.unplaced=new Te(My(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Te(My(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let b=0;b<i.length;b++)this.openFrontierNode(i[b]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,c=0,u=[],{match:f,type:p}=this.frontier[n];if(o){for(let b=0;b<o.childCount;b++)u.push(o.child(b));f=f.matchFragment(o)}let m=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let b=a.child(c),x=f.matchType(b.type);if(!x)break;c++,(c>1||l==0||b.content.size)&&(f=x,u.push(xG(b.mark(p.allowedMarks(b.marks)),c==1?l:0,c==a.childCount?m:-1)))}let y=c==a.childCount;y||(m=-1),this.placed=Ry(this.placed,n,pe.from(u)),this.frontier[n].match=f,y&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,x=a;b<m;b++){let S=x.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),x=S.content}this.unplaced=y?t==0?Te.empty:new Te(My(s.content,t-1,1),t-1,m<0?s.openEnd:t-1):new Te(My(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!s_(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),s=s_(t,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=s_(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ry(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let o=t.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,t.index(r));this.openFrontierNode(o.type,o.attrs,i)}return t}openFrontierNode(t,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=Ry(this.placed,this.depth,pe.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(pe.empty,!0);n.childCount&&(this.placed=Ry(this.placed,this.frontier.length,n))}}function My(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(My(e.firstChild.content,t-1,n)))}function Ry(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Ry(e.lastChild.content,t-1,n)))}function i_(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function xG(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,xG(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(pe.empty,!0)))),e.copy(r)}function s_(e,t,n,r,o){let i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!Ffe(n,i.content,s)?a:null}function Ffe(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function Hfe(e){return e.spec.defining||e.spec.definingForContent}function Ufe(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),i=e.doc.resolve(n);if(wG(o,i,r))return e.step(new Pn(t,n,r));let s=kG(o,e.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let p=o.depth,m=o.pos-1;p>0;p--,m--){let y=o.node(p).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;s.indexOf(p)>-1?a=p:o.before(p)==m&&s.splice(1,0,-p)}let l=s.indexOf(a),c=[],u=r.openStart;for(let p=r.content,m=0;;m++){let y=p.firstChild;if(c.push(y),m==r.openStart)break;p=y.content}for(let p=u-1;p>=0;p--){let m=c[p],y=Hfe(m.type);if(y&&!m.sameMarkup(o.node(Math.abs(a)-1)))u=p;else if(y||!m.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let m=(p+u+1)%(r.openStart+1),y=c[m];if(y)for(let b=0;b<s.length;b++){let x=s[(b+l)%s.length],S=!0;x<0&&(S=!1,x=-x);let E=o.node(x-1),T=o.index(x-1);if(E.canReplaceWith(T,T,y.type,y.marks))return e.replace(o.before(x),S?i.after(x):n,new Te(SG(r.content,0,r.openStart,m),m,r.openEnd))}}let f=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>f));p--){let m=s[p];m<0||(t=o.before(m),n=i.after(m))}}function SG(e,t,n,r,o){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(SG(i.content,t+1,n,r,i)))}if(t>r){let i=o.contentMatchAt(0),s=i.fillBefore(e).append(e);e=s.append(i.matchFragment(s).fillBefore(pe.empty,!0))}return e}function Gfe(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=Bfe(e.doc,t,r.type);o!=null&&(t=n=o)}e.replaceRange(t,n,new Te(pe.from(r),0,0))}function qfe(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=kG(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return e.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return e.delete(r.before(s),n);e.delete(t,n)}function kG(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let o=r;o>=0;o--){let i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(i==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==i-1)&&n.push(o)}return n}class Qp extends ni{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Fr.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return Fr.fromReplace(t,this.pos,this.pos+1,new Te(pe.from(o),0,n.isLeaf?0:1))}getMap(){return bs.empty}invert(t){return new Qp(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Qp(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Qp(n.pos,n.attr,n.value)}}ni.jsonID("attr",Qp);class C0 extends ni{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Fr.ok(r)}getMap(){return bs.empty}invert(t){return new C0(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new C0(n.attr,n.value)}}ni.jsonID("docAttr",C0);let mm=class extends Error{};mm=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};mm.prototype=Object.create(Error.prototype);mm.prototype.constructor=mm;mm.prototype.name="TransformError";class Nd{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Qf}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new mm(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Te.empty){let o=iC(this.doc,t,n,r);return o&&this.step(o),this}replaceWith(t,n,r){return this.replace(t,n,new Te(pe.from(r),0,0))}delete(t,n){return this.replace(t,n,Te.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return Ufe(this,t,n,r),this}replaceRangeWith(t,n,r){return Gfe(this,t,n,r),this}deleteRange(t,n){return qfe(this,t,n),this}lift(t,n){return Rfe(this,t,n),this}join(t,n=1){return zfe(this,t,n),this}wrap(t,n){return Ofe(this,t,n),this}setBlockType(t,n=t,r,o=null){return Pfe(this,t,n,r,o),this}setNodeMarkup(t,n,r=null,o){return $fe(this,t,n,r,o),this}setNodeAttribute(t,n,r){return this.step(new Qp(t,n,r)),this}setDocAttribute(t,n){return this.step(new C0(t,n)),this}addNodeMark(t,n){return this.step(new sd(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Tn)n.isInSet(r.marks)&&this.step(new eh(t,n));else{let o=r.marks,i,s=[];for(;i=n.isInSet(o);)s.push(new eh(t,i)),o=i.removeFromSet(o);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(t,n=1,r){return Lfe(this,t,n,r),this}addMark(t,n,r){return _fe(this,t,n,r),this}removeMark(t,n,r){return Afe(this,t,n,r),this}clearIncompatible(t,n,r){return vO(this,t,n,r),this}}const a_=Object.create(null);class tt{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new CG(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Te.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=t.mapping.slice(i);t.replaceRange(u.map(l.pos),u.map(c.pos),a?Te.empty:n),a==0&&g9(t,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=t.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);i?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),g9(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let o=t.parent.inlineContent?new Ve(t):Np(t.node(0),t.parent,t.pos,t.index(),n,r);if(o)return o;for(let i=t.depth-1;i>=0;i--){let s=n<0?Np(t.node(0),t.node(i),t.before(i+1),t.index(i),n,r):Np(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,n,r);if(s)return s}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new ji(t.node(0))}static atStart(t){return Np(t,t,0,0,1)||new ji(t)}static atEnd(t){return Np(t,t,t.content.size,t.childCount,-1)||new ji(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=a_[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in a_)throw new RangeError("Duplicate use of selection JSON ID "+t);return a_[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ve.between(this.$anchor,this.$head).getBookmark()}}tt.prototype.visible=!0;class CG{constructor(t,n){this.$from=t,this.$to=n}}let p9=!1;function m9(e){!p9&&!e.parent.inlineContent&&(p9=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ve extends tt{constructor(t,n=t){m9(t),m9(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return tt.near(r);let o=t.resolve(n.map(this.anchor));return new Ve(o.parent.inlineContent?o:r,r)}replace(t,n=Te.empty){if(super.replace(t,n),n==Te.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ve&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new sC(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ve(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let o=t.resolve(n);return new this(o,r==n?o:t.resolve(r))}static between(t,n,r){let o=t.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=tt.findFrom(n,r,!0)||tt.findFrom(n,-r,!0);if(i)n=i.$head;else return tt.near(n,r)}return t.parent.inlineContent||(o==0?t=n:(t=(tt.findFrom(t,-r,!0)||tt.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=o<0&&(t=n))),new Ve(t,n)}}tt.jsonID("text",Ve);class sC{constructor(t,n){this.anchor=t,this.head=n}map(t){return new sC(t.map(this.anchor),t.map(this.head))}resolve(t){return Ve.between(t.resolve(this.anchor),t.resolve(this.head))}}class We extends tt{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=t.resolve(o);return r?tt.near(i):new We(i)}content(){return new Te(pe.from(this.node),0,0)}eq(t){return t instanceof We&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wO(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new We(t.resolve(n.anchor))}static create(t,n){return new We(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}We.prototype.visible=!1;tt.jsonID("node",We);class wO{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new sC(r,r):new wO(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&We.isSelectable(r)?new We(n):tt.near(n)}}class ji extends tt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Te.empty){if(n==Te.empty){t.delete(0,t.doc.content.size);let r=tt.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new ji(t)}map(t){return new ji(t)}eq(t){return t instanceof ji}getBookmark(){return Zfe}}tt.jsonID("all",ji);const Zfe={map(){return this},resolve(e){return new ji(e)}};function Np(e,t,n,r,o,i=!1){if(t.inlineContent)return Ve.create(e,n);for(let s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let a=t.child(s);if(a.isAtom){if(!i&&We.isSelectable(a))return We.create(e,n-(o<0?a.nodeSize:0))}else{let l=Np(e,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function g9(e,t,n){let r=e.steps.length-1;if(r<t)return;let o=e.steps[r];if(!(o instanceof Pn||o instanceof vr))return;let i=e.mapping.maps[r],s;i.forEach((a,l,c,u)=>{s==null&&(s=u)}),e.setSelection(tt.near(e.doc.resolve(s),n))}const y9=1,F1=2,b9=4;let Wfe=class extends Nd{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|y9)&~F1,this.storedMarks=null,this}get selectionSet(){return(this.updated&y9)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=F1,this}ensureMarks(t){return Tn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&F1)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~F1,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Tn.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let o=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(o.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(t,i)),this.selection.empty||this.setSelection(tt.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=b9,this}get scrolledIntoView(){return(this.updated&b9)>0}};function v9(e,t){return!t||!e?e:e.bind(t)}class Ny{constructor(t,n,r){this.name=t,this.init=v9(n.init,r),this.apply=v9(n.apply,r)}}const Kfe=[new Ny("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Ny("selection",{init(e,t){return e.selection||tt.atStart(t.doc)},apply(e){return e.selection}}),new Ny("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Ny("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class l_{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Kfe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ny(r.key,r.spec.state,r))})}}class Af{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",t),!o){o=[];for(let f=0;f<this.config.plugins.length;f++)o.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Af(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}return n}get tr(){return new Wfe(this)}static create(t){let n=new l_(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Af(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r}reconfigure(t){let n=new l_(this.schema,t.plugins),r=n.fields,o=new Af(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(t,o)}return o}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=t[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let o=new l_(t.schema,t.plugins),i=new Af(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=Fc.fromJSON(t.schema,n.doc);else if(s.name=="selection")i.selection=tt.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=c.fromJSON.call(l,t,n[a],i);return}}i[s.name]=s.init(t,i)}}),i}}function EG(e,t,n){for(let r in e){let o=e[r];o instanceof Function?o=o.bind(t):r=="handleDOMEvents"&&(o=EG(o,t,{})),n[r]=o}return n}class St{constructor(t){this.spec=t,this.props={},t.props&&EG(t.props,this,this.props),this.key=t.key?t.key.key:TG("plugin")}getState(t){return t[this.key]}}const c_=Object.create(null);function TG(e){return e in c_?e+"$"+ ++c_[e]:(c_[e]=0,e+"$")}class Bt{constructor(t="key"){this.key=TG(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Io=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},gm=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let eR=null;const $c=function(e,t,n){let r=eR||(eR=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Yfe=function(){eR=null},th=function(e,t,n,r){return n&&(w9(e,t,n,r,-1)||w9(e,t,n,r,1))},Jfe=/^(img|br|input|textarea|hr)$/i;function w9(e,t,n,r,o){for(var i;;){if(e==n&&t==r)return!0;if(t==(o<0?0:ra(e))){let s=e.parentNode;if(!s||s.nodeType!=1||jb(e)||Jfe.test(e.nodeName)||e.contentEditable=="false")return!1;t=Io(e)+(o<0?0:1),e=s}else if(e.nodeType==1){let s=e.childNodes[t+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((i=s.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)t+=o;else return!1;else e=s,t=o<0?ra(e):0}else return!1}}function ra(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Xfe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=ra(e)}else if(e.parentNode&&!jb(e))t=Io(e),e=e.parentNode;else return null}}function Qfe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!jb(e))t=Io(e)+1,e=e.parentNode;else return null}}function ehe(e,t,n){for(let r=t==0,o=t==ra(e);r||o;){if(e==n)return!0;let i=Io(e);if(e=e.parentNode,!e)return!1;r=r&&i==0,o=o&&i==ra(e)}}function jb(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const aC=function(e){return e.focusNode&&th(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function xf(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function the(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function nhe(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(ra(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(ra(r.startContainer),r.startOffset)}}}const Wl=typeof navigator<"u"?navigator:null,x9=typeof document<"u"?document:null,Id=Wl&&Wl.userAgent||"",tR=/Edge\/(\d+)/.exec(Id),_G=/MSIE \d/.exec(Id),nR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Id),zi=!!(_G||nR||tR),dd=_G?document.documentMode:nR?+nR[1]:tR?+tR[1]:0,Ya=!zi&&/gecko\/(\d+)/i.test(Id);Ya&&+(/Firefox\/(\d+)/.exec(Id)||[0,0])[1];const rR=!zi&&/Chrome\/(\d+)/.exec(Id),Yo=!!rR,AG=rR?+rR[1]:0,gi=!zi&&!!Wl&&/Apple Computer/.test(Wl.vendor),ym=gi&&(/Mobile\/\w+/.test(Id)||!!Wl&&Wl.maxTouchPoints>2),ta=ym||(Wl?/Mac/.test(Wl.platform):!1),rhe=Wl?/Win/.test(Wl.platform):!1,jc=/Android \d/.test(Id),zb=!!x9&&"webkitFontSmoothing"in x9.documentElement.style,ohe=zb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ihe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Tc(e,t){return typeof e=="number"?e:e[t]}function she(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function S9(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(s.nodeType!=1){s=gm(s);continue}let a=s,l=a==i.body,c=l?ihe(i):she(a),u=0,f=0;if(t.top<c.top+Tc(r,"top")?f=-(c.top-t.top+Tc(o,"top")):t.bottom>c.bottom-Tc(r,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+Tc(o,"top")-c.top:t.bottom-c.bottom+Tc(o,"bottom")),t.left<c.left+Tc(r,"left")?u=-(c.left-t.left+Tc(o,"left")):t.right>c.right-Tc(r,"right")&&(u=t.right-c.right+Tc(o,"right")),u||f)if(l)i.defaultView.scrollBy(u,f);else{let m=a.scrollLeft,y=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let b=a.scrollLeft-m,x=a.scrollTop-y;t={left:t.left-b,top:t.top-x,right:t.right-b,bottom:t.bottom-x}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:gm(s)}}function ahe(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,o;for(let i=(t.left+t.right)/2,s=n+1;s<Math.min(innerHeight,t.bottom);s+=5){let a=e.root.elementFromPoint(i,s);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:MG(e.dom)}}function MG(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=gm(r));return t}function lhe({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;RG(n,r==0?0:r-t)}function RG(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:i}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let hp=null;function che(e){if(e.setActive)return e.setActive();if(hp)return e.focus(hp);let t=MG(e);e.focus(hp==null?{get preventScroll(){return hp={preventScroll:!0},!0}}:void 0),hp||(hp=!1,RG(t,0))}function NG(e,t){let n,r=2e8,o,i=0,s=t.top,a=t.top,l,c;for(let u=e.firstChild,f=0;u;u=u.nextSibling,f++){let p;if(u.nodeType==1)p=u.getClientRects();else if(u.nodeType==3)p=$c(u).getClientRects();else continue;for(let m=0;m<p.length;m++){let y=p[m];if(y.top<=s&&y.bottom>=a){s=Math.max(y.bottom,s),a=Math.min(y.top,a);let b=y.left>t.left?y.left-t.left:y.right<t.left?t.left-y.right:0;if(b<r){n=u,r=b,o=b&&n.nodeType==3?{left:y.right<t.left?y.right:y.left,top:t.top}:t,u.nodeType==1&&b&&(i=f+(t.left>=(y.left+y.right)/2?1:0));continue}}else y.top>t.top&&!l&&y.left<=t.left&&y.right>=t.left&&(l=u,c={left:Math.max(y.left,Math.min(y.right,t.left)),top:y.top});!n&&(t.left>=y.right&&t.top>=y.top||t.left>=y.left&&t.top>=y.bottom)&&(i=f+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?uhe(n,o):!n||r&&n.nodeType==1?{node:e,offset:i}:NG(n,o)}function uhe(e,t){let n=e.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let i=Uu(r,1);if(i.top!=i.bottom&&xO(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function xO(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function dhe(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function fhe(e,t,n){let{node:r,offset:o}=NG(t,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(r,o,i)}function hhe(e,t,n,r){let o=-1;for(let i=t,s=!1;i!=e.dom;){let a=e.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}function IG(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=e.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(xO(t,c))return IG(s,t,c)}}if((i=(i+1)%r)==o)break}return e}function phe(e,t){let n=e.dom.ownerDocument,r,o=0,i=nhe(n,t.left,t.top);i&&({node:r,offset:o}=i);let s=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!s||!e.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=e.dom.getBoundingClientRect();if(!xO(t,c)||(s=IG(e.dom,t,c),!s))return null}if(gi)for(let c=s;r&&c;c=gm(c))c.draggable&&(r=void 0);if(s=dhe(s,t),r){if(Ya&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&o++}let c;zb&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&o--,r==e.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=hhe(e,r,o,t))}a==null&&(a=fhe(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function k9(e){return e.top<e.bottom||e.left<e.right}function Uu(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(k9(r))return r}return Array.prototype.find.call(n,k9)||e.getBoundingClientRect()}const mhe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function OG(e,t,n){let{node:r,offset:o,atom:i}=e.docView.domFromPos(t,n<0?-1:1),s=zb||Ya;if(r.nodeType==3)if(s&&(mhe.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Uu($c(r,o,o),n);if(Ya&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Uu($c(r,o-1,o-1),-1);if(c.top==l.top){let u=Uu($c(r,o,o+1),-1);if(u.top!=l.top)return py(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,py(Uu($c(r,l,c),u),u<0)}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==ra(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return u_(l.getBoundingClientRect(),!1)}if(i==null&&o<ra(r)){let l=r.childNodes[o];if(l.nodeType==1)return u_(l.getBoundingClientRect(),!0)}return u_(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==ra(r))){let l=r.childNodes[o-1],c=l.nodeType==3?$c(l,ra(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return py(Uu(c,1),!1)}if(i==null&&o<ra(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?$c(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return py(Uu(c,-1),!0)}return py(Uu(r.nodeType==3?$c(r):r,-n),n>=0)}function py(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function u_(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function PG(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function ghe(e,t,n){let r=t.selection,o=n=="up"?r.$from:r.$to;return PG(e,t,()=>{let{node:i}=e.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=OG(e,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=$c(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const yhe=/[\u0590-\u08ac]/;function bhe(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=e.domSelection();return a?!yhe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:PG(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=e.domSelectionRange(),p=a.caretBidiLevel;a.modify("move",n,"character");let m=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:y,focusOffset:b}=e.domSelectionRange(),x=y&&!m.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==b;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return p!=null&&(a.caretBidiLevel=p),x}):r.pos==r.start()||r.pos==r.end()}let C9=null,E9=null,T9=!1;function vhe(e,t,n){return C9==t&&E9==n?T9:(C9=t,E9=n,T9=n=="up"||n=="down"?ghe(e,t,n):bhe(e,t,n))}const da=0,_9=1,Mf=2,Kl=3;class Bb{constructor(t,n,r,o){this.parent=t,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=da,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==t)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let i,s;if(t==this.contentDOM)i=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(t==this.contentDOM)i=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(t==this.dom&&this.contentDOM)o=n>Io(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=t;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==t.childNodes.length)for(let i=t;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,o=t;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))r=!1;else return i}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let o=t;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==t&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let a=o.children[s];if(a.size){o=a;break}}return o}if(t<i)return o.descAt(t-r-o.border);r=i}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>t||s instanceof $G){o=t-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof DG&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Io(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Io(i.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&t<=c){let u=s+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=s;for(let f=a;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=Io(p.dom)+1;break}t-=p.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=Io(f.dom);break}n+=f.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:t,to:n,fromOffset:o,toOffset:i}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,o=!1){let i=Math.min(t,n),s=Math.max(t,n);for(let m=0,y=0;m<this.children.length;m++){let b=this.children[m],x=y+b.size;if(i>y&&s<x)return b.setSelection(t-y-b.border,n-y-b.border,r,o);y=x}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((Ya||gi)&&t==n){let{node:m,offset:y}=a;if(m.nodeType==3){if(f=!!(y&&m.nodeValue[y-1]==`
`),f&&y==m.nodeValue.length)for(let b=m,x;b;b=b.parentNode){if(x=b.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:Io(x)+1});break}let S=b.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let b=m.childNodes[y-1];f=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(Ya&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(o=!0)}if(!(o||f&&gi)&&th(a.node,a.offset,u.anchorNode,u.anchorOffset)&&th(l.node,l.offset,u.focusNode,u.focusOffset))return;let p=!1;if((c.extend||t==n)&&!f){c.collapse(a.node,a.offset);try{t!=n&&c.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(t>n){let y=a;a=l,l=y}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?t<=s&&n>=r:t<s&&n>r){let a=r+i.border,l=s-i.border;if(t>=a&&n<=l){this.dirty=t==r||n==s?Mf:_9,t==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Kl:i.markDirty(t-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Mf:Kl}r=s}this.dirty=Mf}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Mf:_9;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class DG extends Bb{constructor(t,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(t){return this.dirty==da&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class whe extends Bb{constructor(t,n,r,o){super(t,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class nh extends Bb{constructor(t,n,r,o,i){super(t,[],r,o),this.mark=n,this.spec=i}static create(t,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=au.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new nh(t,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Kl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Kl&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=da){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=da}}slice(t,n,r){let o=nh.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=iR(i,n,s,r)),t>0&&(i=iR(i,0,t,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class fd extends Bb{constructor(t,n,r,o,i,s,a,l,c){super(t,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(t,n,r,o,i,s){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=au.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let p=u;return u=zG(u,r,n),c?l=new xhe(t,n,r,o,u,f||null,p,c,i,s+1):n.isText?new lC(t,n,r,o,u,p,i):new fd(t,n,r,o,u,f||null,p,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>pe.empty)}return t}matchesNode(t,n,r){return this.dirty==da&&t.eq(this.node)&&Dx(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,o=n,i=t.composing?this.localCompositionInfo(t,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new khe(this,s&&s.node,t);The(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?Tn.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,o)},(c,u,f,p)=>{l.syncToMarks(c.marks,r,t);let m;l.findNodeMatch(c,u,f,p)||a&&t.state.selection.from>o&&t.state.selection.to<o+c.nodeSize&&(m=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,f,m,t)||l.updateNextNode(c,u,f,t,p,o)||l.addNode(c,u,f,t,o),o+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Mf)&&(s&&this.protectLocalComposition(t,s),LG(this.contentDOM,this.children,t),ym&&_he(this.dom))}localCompositionInfo(t,n){let{from:r,to:o}=t.state.selection;if(!(t.state.selection instanceof Ve)||r<n||o>n+this.node.content.size)return null;let i=t.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=Ahe(this.node.content,s,r-n,o-n);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new whe(this,i,n,o);t.input.compositionNodes.push(s),this.children=iR(this.children,r,r+o.length,t,s)}update(t,n,r,o){return this.dirty==Kl||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,o),!0)}updateInner(t,n,r,o){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=da}updateOuterDeco(t){if(Dx(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=jG(this.dom,this.nodeDOM,oR(this.outerDeco,this.node,n),oR(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function A9(e,t,n,r,o){zG(r,t,e);let i=new fd(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class lC extends fd{constructor(t,n,r,o,i,s,a){super(t,n,r,o,i,null,s,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,o){return this.dirty==Kl||this.dirty!=da&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=da||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=t,this.dirty=da,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let o=this.node.cut(t,n),i=document.createTextNode(o.text);return new lC(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Kl)}get domAtom(){return!1}isText(t){return this.node.text==t}}class $G extends Bb{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==da&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xhe extends fd{constructor(t,n,r,o,i,s,a,l,c,u){super(t,n,r,o,i,s,a,c,u),this.spec=l}update(t,n,r,o){if(this.dirty==Kl)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function LG(e,t,n){let r=e.firstChild,o=!1;for(let i=0;i<t.length;i++){let s=t[i],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=M9(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(s instanceof nh){let l=r?r.previousSibling:e.lastChild;LG(s.contentDOM,s.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=M9(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const qy=function(e){e&&(this.nodeName=e)};qy.prototype=Object.create(null);const Rf=[new qy];function oR(e,t,n){if(e.length==0)return Rf;let r=n?Rf[0]:new qy,o=[r];for(let i=0;i<e.length;i++){let s=e[i].type.attrs;if(s){s.nodeName&&o.push(r=new qy(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new qy(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function jG(e,t,n,r){if(n==Rf&&r==Rf)return t;let o=t;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=e&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Rf[0]),o=l}She(o,a||Rf[0],s)}return o}function She(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&e.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&e.classList.add(o[i]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(t.style);)e.style.removeProperty(o[1])}n.style&&(e.style.cssText+=n.style)}}function zG(e,t,n){return jG(e,e,Rf,oR(t,n,e.nodeType!=1))}function Dx(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function M9(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class khe{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Che(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,t.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&t[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=da,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=nh.create(this.top,t[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(t,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(t,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(t,n,r,o,i){let s=this.top.children[o];return s.dirty==Kl&&s.dom==s.contentDOM&&(s.dirty=Mf),s.update(t,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}t=n}}updateNextNode(t,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof fd){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,f,p=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=Kl&&Dx(n,l.outerDeco));if(!p&&l.update(t,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,t,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Mf,f.updateChildren(o,s+1),f.dirty=da),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,o,i,s){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Dx(r,t.outerDeco)||!o.eq(t.innerDeco))return null;let a=fd.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,o,i){let s=fd.create(this.top,t,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(t)&&(t==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new DG(this.top,t,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof nh;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof lC)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((gi||Yo)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new $G(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function Che(e,t){let n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof nh)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function Ehe(e,t){return e.type.side-t.type.side}function The(e,t,n,r){let o=t.locals(e),i=0;if(o.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);r(u,o,t.forChild(i,u),c),i+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,f;for(;s<o.length&&o[s].to==i;){let x=o[s++];x.widget&&(u?(f||(f=[u])).push(x):u=x)}if(u)if(f){f.sort(Ehe);for(let x=0;x<f.length;x++)n(f[x],c,!!l)}else n(u,c,!!l);let p,m;if(l)m=-1,p=l,l=null;else if(c<e.childCount)m=c,p=e.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=i&&a.splice(x--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let y=i+p.nodeSize;if(p.isText){let x=y;s<o.length&&o[s].from<x&&(x=o[s].from);for(let S=0;S<a.length;S++)a[S].to<x&&(x=a[S].to);x<y&&(l=p.cut(x-i),p=p.cut(0,x-i),y=x,m=-1)}else for(;s<o.length&&o[s].to<y;)s++;let b=p.isInline&&!p.isLeaf?a.filter(x=>!x.inline):a.slice();r(p,b,t.forChild(i,p),m),i=y}}function _he(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Ahe(e,t,n,r){for(let o=0,i=0;o<e.childCount&&i<=r;){let s=e.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<e.childCount;){let c=e.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let c=a<r?l.lastIndexOf(t,r-a-1):-1;if(c>=0&&c+t.length+a>=n)return a+c;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function iR(e,t,n,r,o){let i=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function SO(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(aC(n)){for(l=s;o&&!o.node;)o=o.parent;let f=o.node;if(o&&f.isAtom&&We.isSelectable(f)&&o.parent&&!(f.isInline&&ehe(n.focusNode,n.focusOffset,o.dom))){let p=o.posBefore;c=new We(s==p?a:r.resolve(p))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,p=s;for(let m=0;m<n.rangeCount;m++){let y=n.getRangeAt(m);f=Math.min(f,e.docView.posFromDOM(y.startContainer,y.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(f<0)return null;[l,s]=p==e.state.selection.anchor?[p,f]:[f,p],a=r.resolve(s)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<a.pos&&!i?1:-1;c=kO(e,u,a,f)}return c}function BG(e){return e.editable?e.hasFocus():FG(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Uc(e,t=!1){let n=e.state.selection;if(VG(e,n),!!BG(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Yo){let r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&th(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Rhe(e);else{let{anchor:r,head:o}=n,i,s;R9&&!(n instanceof Ve)&&(n.$from.parent.inlineContent||(i=N9(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=N9(e,n.to))),e.docView.setSelection(r,o,e,t),R9&&(i&&I9(i),s&&I9(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Mhe(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const R9=gi||Yo&&AG<63;function N9(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(gi&&o&&o.contentEditable=="false")return d_(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return d_(o);if(i)return d_(i)}}function d_(e){return e.contentEditable="true",gi&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function I9(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Mhe(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!BG(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Rhe(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Io(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&zi&&dd<=11&&(r.disabled=!0,r.disabled=!1)}function VG(e,t){if(t instanceof We){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(O9(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else O9(e)}function O9(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function kO(e,t,n,r){return e.someProp("createSelectionBetween",o=>o(e,t,n))||Ve.between(t,n,r)}function P9(e){return e.editable&&!e.hasFocus()?!1:FG(e)}function FG(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Nhe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return th(t.node,t.offset,n.anchorNode,n.anchorOffset)}function sR(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&tt.findFrom(i,t)}function Ku(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function D9(e,t,n){let r=e.state.selection;if(r instanceof Ve)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=e.state.doc.resolve(o.pos+i.nodeSize*(t<0?-1:1));return Ku(e,new Ve(r.$anchor,s))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let o=sR(e.state,t);return o&&o instanceof We?Ku(e,o):!1}else if(!(ta&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=t<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=e.docView.descAt(a))&&!s.contentDOM?We.isSelectable(i)?Ku(e,new We(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):zb?Ku(e,new Ve(e.state.doc.resolve(t<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof We&&r.node.isInline)return Ku(e,new Ve(t>0?r.$to:r.$from));{let o=sR(e.state,t);return o?Ku(e,o):!1}}}function $x(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Zy(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function pp(e,t){return t<0?Ihe(e):Ohe(e)}function Ihe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=!1;for(Ya&&n.nodeType==1&&r<$x(n)&&Zy(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Zy(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(HG(n))break;{let a=n.previousSibling;for(;a&&Zy(a,-1);)o=n.parentNode,i=Io(a),a=a.previousSibling;if(a)n=a,r=$x(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?aR(e,n,r):o&&aR(e,o,i)}function Ohe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o=$x(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Zy(a,1))i=n,s=++r;else break}else{if(HG(n))break;{let a=n.nextSibling;for(;a&&Zy(a,1);)i=a.parentNode,s=Io(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=$x(n);else{if(n=n.parentNode,n==e.dom)break;r=o=0}}}i&&aR(e,i,s)}function HG(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Phe(e,t){for(;e&&t==e.childNodes.length&&!jb(e);)t=Io(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function Dhe(e,t){for(;e&&!t&&!jb(e);)t=Io(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function aR(e,t,n){if(t.nodeType!=3){let i,s;(s=Phe(t,n))?(t=s,n=0):(i=Dhe(t,n))&&(t=i,n=i.nodeValue.length)}let r=e.domSelection();if(!r)return;if(aC(r)){let i=document.createRange();i.setEnd(t,n),i.setStart(t,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout(()=>{e.state==o&&Uc(e)},50)}function $9(e,t){let n=e.state.doc.resolve(t);if(!(Yo||rhe)&&n.parent.inlineContent){let o=e.coordsAtPos(t);if(t>n.start()){let i=e.coordsAtPos(t-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(t<n.end()){let i=e.coordsAtPos(t+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function L9(e,t,n){let r=e.state.selection;if(r instanceof Ve&&!r.empty||n.indexOf("s")>-1||ta&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=sR(e.state,t);if(s&&s instanceof We)return Ku(e,s)}if(!o.parent.inlineContent){let s=t<0?o:i,a=r instanceof ji?tt.near(s,t):tt.findFrom(s,t);return a?Ku(e,a):!1}return!1}function j9(e,t){if(!(e.state.selection instanceof Ve))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=e.state.tr;return t<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),e.dispatch(s),!0}return!1}function z9(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function $he(e){if(!gi||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;z9(e,r,"true"),setTimeout(()=>z9(e,r,"false"),20)}return!1}function Lhe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function jhe(e,t){let n=t.keyCode,r=Lhe(t);if(n==8||ta&&n==72&&r=="c")return j9(e,-1)||pp(e,-1);if(n==46&&!t.shiftKey||ta&&n==68&&r=="c")return j9(e,1)||pp(e,1);if(n==13||n==27)return!0;if(n==37||ta&&n==66&&r=="c"){let o=n==37?$9(e,e.state.selection.from)=="ltr"?-1:1:-1;return D9(e,o,r)||pp(e,o)}else if(n==39||ta&&n==70&&r=="c"){let o=n==39?$9(e,e.state.selection.from)=="ltr"?1:-1:1;return D9(e,o,r)||pp(e,o)}else{if(n==38||ta&&n==80&&r=="c")return L9(e,-1,r)||pp(e,-1);if(n==40||ta&&n==78&&r=="c")return $he(e)||L9(e,1,r)||pp(e,1);if(r==(ta?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function CO(e,t){e.someProp("transformCopied",m=>{t=m(t,e)});let n=[],{content:r,openStart:o,openEnd:i}=t;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let s=e.someProp("clipboardSerializer")||au.fromSchema(e.state.schema),a=KG(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=WG[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let y=a.createElement(u[m]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=e.someProp("clipboardTextSerializer",m=>m(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:p,slice:t}}function UG(e,t,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!t)return null;let l=t&&(r||i||!n);if(l){if(e.someProp("transformPastedText",p=>{t=p(t,i||r,e)}),i)return t?new Te(pe.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Te.empty;let f=e.someProp("clipboardTextParser",p=>p(t,o,r,e));if(f)a=f;else{let p=o.marks(),{schema:m}=e.state,y=au.fromSchema(m);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(b=>{let x=s.appendChild(document.createElement("p"));b&&x.appendChild(y.serializeNode(m.text(b,p)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),s=Fhe(n),zb&&Hhe(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Bl.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!zhe.test(p.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Uhe(B9(a,+u[1],+u[2]),u[4]);else if(a=Te.maxOpen(Bhe(a.content,o),!0),a.openStart||a.openEnd){let f=0,p=0;for(let m=a.content.firstChild;f<a.openStart&&!m.type.spec.isolating;f++,m=m.firstChild);for(let m=a.content.lastChild;p<a.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);a=B9(a,f,p)}return e.someProp("transformPasted",f=>{a=f(a,e)}),a}const zhe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Bhe(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let o=t.node(n).contentMatchAt(t.index(n)),i,s=[];if(e.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&i.length&&qG(l,i,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=ZG(s[s.length-1],i.length));let u=GG(a,l);s.push(u),o=o.matchType(u.type),i=l}}),s)return pe.from(s)}return e}function GG(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,pe.from(e));return e}function qG(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=qG(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(pe.from(GG(n,e,o+1))))}}function ZG(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,ZG(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(pe.empty,!0);return e.copy(n.append(r))}function lR(e,t,n,r,o,i){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(i=0),o<r-1&&(a=lR(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(pe.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function B9(e,t,n){return t<e.openStart&&(e=new Te(lR(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Te(lR(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const WG={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let V9=null;function KG(){return V9||(V9=document.implementation.createHTMLDocument("title"))}let f_=null;function Vhe(e){let t=window.trustedTypes;return t?(f_||(f_=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),f_.createHTML(e)):e}function Fhe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=KG().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),o;if((o=r&&WG[r[1].toLowerCase()])&&(e=o.map(i=>"<"+i+">").join("")+e+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=Vhe(e),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function Hhe(e){let t=e.querySelectorAll(Yo?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Uhe(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:o,openStart:i,openEnd:s}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=pe.from(l.create(r[a+1],o)),i++,s++}return new Te(o,i,s)}const yi={},bi={},Ghe={touchstart:!0,touchmove:!0};class qhe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Zhe(e){for(let t in yi){let n=yi[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{Khe(e,r)&&!EO(e,r)&&(e.editable||!(r.type in bi))&&n(e,r)},Ghe[t]?{passive:!0}:void 0)}gi&&e.dom.addEventListener("input",()=>null),cR(e)}function ad(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Whe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function cR(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>EO(e,r))})}function EO(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function Khe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Yhe(e,t){!EO(e,t)&&yi[t.type]&&(e.editable||!(t.type in bi))&&yi[t.type](e,t)}bi.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!JG(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(jc&&Yo&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),ym&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",o=>o(e,xf(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||jhe(e,n)?n.preventDefault():ad(e,"key")};bi.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};bi.keypress=(e,t)=>{let n=t;if(JG(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||ta&&n.metaKey)return;if(e.someProp("handleKeyPress",o=>o(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ve)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),i=()=>e.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!e.someProp("handleTextInput",s=>s(e,r.$from.pos,r.$to.pos,o,i))&&e.dispatch(i()),n.preventDefault()}};function cC(e){return{left:e.clientX,top:e.clientY}}function Jhe(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function TO(e,t,n,r,o){if(r==-1)return!1;let i=e.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,a=>s>i.depth?a(e,n,i.nodeAfter,i.before(s),o,!0):a(e,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function em(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function Xhe(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&We.isSelectable(r)?(em(e,new We(n)),!0):!1}function Qhe(e,t){if(t==-1)return!1;let n=e.state.selection,r,o;n instanceof We&&(r=n.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(We.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(em(e,We.create(e.state.doc,o)),!0):!1}function epe(e,t,n,r,o){return TO(e,"handleClickOn",t,n,r)||e.someProp("handleClick",i=>i(e,t,r))||(o?Qhe(e,n):Xhe(e,n))}function tpe(e,t,n,r){return TO(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",o=>o(e,t,r))}function npe(e,t,n,r){return TO(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",o=>o(e,t,r))||rpe(e,n,r)}function rpe(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(em(e,Ve.create(r,0,r.content.size)),!0):!1;let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)em(e,Ve.create(r,a+1,a+1+s.content.size));else if(We.isSelectable(s))em(e,We.create(r,a));else continue;return!0}}function _O(e){return Lx(e)}const YG=ta?"metaKey":"ctrlKey";yi.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=_O(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&Jhe(n,e.input.lastClick)&&!n[YG]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?i="doubleClick":e.input.lastClick.type=="doubleClick"&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=e.posAtCoords(cC(n));s&&(i=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new ope(e,s,n,!!r)):(i=="doubleClick"?tpe:npe)(e,s.pos,s.inside,n)?n.preventDefault():ad(e,"pointer"))};class ope{constructor(t,n,r,o){this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[YG],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=t.state.doc.nodeAt(n.inside),s=n.inside;else{let u=t.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const a=o?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=t.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof We&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ya&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ad(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Uc(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(cC(t))),this.updateAllowDefault(t),this.allowDefault||!n?ad(this.view,"pointer"):epe(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||gi&&this.mightDrag&&!this.mightDrag.node.isAtom||Yo&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(em(this.view,tt.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):ad(this.view,"pointer")}move(t){this.updateAllowDefault(t),ad(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}yi.touchstart=e=>{e.input.lastTouch=Date.now(),_O(e),ad(e,"pointer")};yi.touchmove=e=>{e.input.lastTouch=Date.now(),ad(e,"pointer")};yi.contextmenu=e=>_O(e);function JG(e,t){return e.composing?!0:gi&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const ipe=jc?5e3:-1;bi.compositionstart=bi.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ve&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),Lx(e,!0),e.markCursor=null;else if(Lx(e,!t.selection.empty),Ya&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=e.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}e.input.composing=!0}XG(e,ipe)};bi.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,XG(e,20))};function XG(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Lx(e),t))}function QG(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=ape());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function spe(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Xfe(t.focusNode,t.focusOffset),r=Qfe(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function ape(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Lx(e,t=!1){if(!(jc&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),QG(e),t||e.docView&&e.docView.dirty){let n=SO(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function lpe(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const E0=zi&&dd<15||ym&&ohe<604;yi.copy=bi.cut=(e,t)=>{let n=t,r=e.state.selection,o=n.type=="cut";if(r.empty)return;let i=E0?null:n.clipboardData,s=r.content(),{dom:a,text:l}=CO(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):lpe(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function cpe(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function upe(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?T0(e,r.value,null,o,t):T0(e,r.textContent,r.innerHTML,o,t)},50)}function T0(e,t,n,r,o){let i=UG(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,o,i||Te.empty)))return!0;if(!i)return!1;let s=cpe(i),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function eq(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}bi.paste=(e,t)=>{let n=t;if(e.composing&&!jc)return;let r=E0?null:n.clipboardData,o=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&T0(e,eq(r),r.getData("text/html"),o,n)?n.preventDefault():upe(e,n)};class tq{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const dpe=ta?"altKey":"ctrlKey";function nq(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[dpe]}yi.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=e.state.selection,i=o.empty?null:e.posAtCoords(cC(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof We?o.to-1:o.to))){if(r&&r.mightDrag)s=We.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(s=We.create(e.state.doc,f.posBefore))}}let a=(s||e.state.selection).content(),{dom:l,text:c,slice:u}=CO(e,a);(!n.dataTransfer.files.length||!Yo||AG>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(E0?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",E0||n.dataTransfer.setData("text/plain",c),e.dragging=new tq(u,nq(e,n),s)};yi.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};bi.dragover=bi.dragenter=(e,t)=>t.preventDefault();bi.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(cC(n));if(!o)return;let i=e.state.doc.resolve(o.pos),s=r&&r.slice;s?e.someProp("transformPasted",y=>{s=y(s,e)}):s=UG(e,eq(n.dataTransfer),E0?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&nq(e,n));if(e.someProp("handleDrop",y=>y(e,n,s||Te.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?vG(e.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=e.state.tr;if(a){let{node:y}=r;y?y.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=c.doc;if(f?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(p))return;let m=c.doc.resolve(u);if(f&&We.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new We(m));else{let y=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((b,x,S,E)=>y=E),c.setSelection(kO(e,m,c.doc.resolve(y)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))};yi.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Uc(e)},20))};yi.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};yi.beforeinput=(e,t)=>{if(Yo&&jc&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",i=>i(e,xf(8,"Backspace")))))return;let{$cursor:o}=e.state.selection;o&&o.pos>0&&e.dispatch(e.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let e in bi)yi[e]=bi[e];function _0(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class jx{constructor(t,n){this.toDOM=t,this.spec=n||Uf,this.side=this.spec.side||0}map(t,n,r,o){let{pos:i,deleted:s}=t.mapResult(n.from+o,this.side<0?-1:1);return s?null:new Gt(i-r,i-r,this)}valid(){return!0}eq(t){return this==t||t instanceof jx&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&_0(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class hd{constructor(t,n){this.attrs=t,this.spec=n||Uf}map(t,n,r,o){let i=t.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=t.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Gt(i,s,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof hd&&_0(this.attrs,t.attrs)&&_0(this.spec,t.spec)}static is(t){return t.type instanceof hd}destroy(){}}class AO{constructor(t,n){this.attrs=t,this.spec=n||Uf}map(t,n,r,o){let i=t.mapResult(n.from+o,1);if(i.deleted)return null;let s=t.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Gt(i.pos-r,s.pos-r,this)}valid(t,n){let{index:r,offset:o}=t.content.findIndex(n.from),i;return o==n.from&&!(i=t.child(r)).isText&&o+i.nodeSize==n.to}eq(t){return this==t||t instanceof AO&&_0(this.attrs,t.attrs)&&_0(this.spec,t.spec)}destroy(){}}class Gt{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Gt(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Gt(t,t,new jx(n,r))}static inline(t,n,r,o){return new Gt(t,n,new hd(r,o))}static node(t,n,r,o){return new Gt(t,n,new AO(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof hd}get widget(){return this.type instanceof jx}}const Ip=[],Uf={};class Rt{constructor(t,n){this.local=t.length?t:Ip,this.children=n.length?n:Ip}static create(t,n){return n.length?zx(n,t,0,Uf):Zo}find(t,n,r){let o=[];return this.findInner(t??0,n??1e9,o,0,r),o}findInner(t,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=t&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>t){let a=this.children[s]+1;this.children[s+2].findInner(t-a,n-a,r,o+a,i)}}map(t,n,r){return this==Zo||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Uf)}mapInner(t,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?fpe(this.children,s||[],t,n,r,o,i):s?new Rt(s.sort(Gf),Ip):Zo}add(t,n){return n.length?this==Zo?Rt.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let o,i=0;t.forEach((a,l)=>{let c=l+r,u;if(u=oq(n,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,u,c+1):o.splice(i,0,l,l+a.nodeSize,zx(u,a,c+1,Uf)),i+=3}});let s=rq(i?iq(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new Rt(s.length?this.local.concat(s).sort(Gf):this.local,o||this.children)}remove(t){return t.length==0||this==Zo?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let u=0,f;u<t.length;u++)(f=t[u])&&f.from>a&&f.to<l&&(t[u]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=Zo?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<t.length;i++)if(s=t[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Rt(o,r):Zo}forChild(t,n){if(this==Zo)return this;if(n.isLeaf)return Rt.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let i=t+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof hd){let c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new Rt(o.sort(Gf),Ip);return r?new Qu([a,r]):a}return r||Zo}eq(t){if(this==t)return!0;if(!(t instanceof Rt)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return MO(this.localsInner(t))}localsInner(t){if(this==Zo)return Ip;if(t.inlineContent||!this.local.some(hd.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof hd||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Rt.empty=new Rt([],[]);Rt.removeOverlap=MO;const Zo=Rt.empty;class Qu{constructor(t){this.members=t}map(t,n){const r=this.members.map(o=>o.map(t,n,Uf));return Qu.from(r)}forChild(t,n){if(n.isLeaf)return Rt.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(t,n);i!=Zo&&(i instanceof Qu?r=r.concat(i.members):r.push(i))}return Qu.from(r)}eq(t){if(!(t instanceof Qu)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(t);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?MO(r?n:n.sort(Gf)):Ip}static from(t){switch(t.length){case 0:return Zo;case 1:return t[0];default:return new Qu(t.every(n=>n instanceof Rt)?t:t.reduce((n,r)=>n.concat(r instanceof Rt?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function fpe(e,t,n,r,o,i,s){let a=e.slice();for(let c=0,u=i;c<n.maps.length;c++){let f=0;n.maps[c].forEach((p,m,y,b)=>{let x=b-y-(m-p);for(let S=0;S<a.length;S+=3){let E=a[S+1];if(E<0||p>E+u-f)continue;let T=a[S]+u-f;m>=T?a[S+1]=p<=T?-2:-1:p>=u&&x&&(a[S]+=x,a[S+1]+=x)}f+=x}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(e[c]+i),f=u-o;if(f<0||f>=r.content.size){l=!0;continue}let p=n.map(e[c+1]+i,-1),m=p-o,{index:y,offset:b}=r.content.findIndex(f),x=r.maybeChild(y);if(x&&b==f&&b+x.nodeSize==m){let S=a[c+2].mapInner(n,x,u+1,e[c]+i+1,s);S!=Zo?(a[c]=f,a[c+1]=m,a[c+2]=S):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=hpe(a,e,t,n,o,i,s),u=zx(c,r,0,s);t=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,p=0;f<u.children.length;f+=3){let m=u.children[f];for(;p<a.length&&a[p]<m;)p+=3;a.splice(p,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Rt(t.sort(Gf),a)}function rq(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new Gt(o.from+t,o.to+t,o.type))}return n}function hpe(e,t,n,r,o,i,s){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,o,c);f?n.push(f):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+i+1);return n}function oq(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i=0,s;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function iq(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function zx(e,t,n,r){let o=[],i=!1;t.forEach((a,l)=>{let c=oq(e,a,l+n);if(c){i=!0;let u=zx(c,a,n+l+1,r);u!=Zo&&o.push(l,l+a.nodeSize,u)}});let s=rq(i?iq(e):e,-n).sort(Gf);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Rt(s,o):Zo}function Gf(e,t){return e.from-t.from||e.to-t.to}function MO(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from==r.from){i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),F9(t,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),F9(t,o,r.copy(i.from,r.to)));break}}}return t}function F9(e,t,n){for(;t<e.length&&Gf(n,e[t])>0;)t++;e.splice(t,0,n)}function h_(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Zo&&t.push(r)}),e.cursorWrapper&&t.push(Rt.create(e.state.doc,[e.cursorWrapper.deco])),Qu.from(t)}const ppe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mpe=zi&&dd<=11;class gpe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class ype{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gpe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);zi&&dd<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),mpe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ppe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(P9(this.view)){if(this.suppressingSelectionUpdates)return Uc(this.view);if(zi&&dd<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&th(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let i=t.focusNode;i;i=gm(i))n.add(i);for(let i=t.anchorNode;i;i=gm(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&P9(t)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(i=i<0?f.from:Math.min(f.from,i),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if(Ya&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,p]=u;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of u){let m=p.parentNode;m&&m.nodeName=="LI"&&(!f||wpe(t,f)!=m)&&p.remove()}}}let c=null;i<0&&o&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&aC(r)&&(c=SO(t))&&c.eq(tt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Uc(t),this.currentSelection.set(r),t.scrollToSelection()):(i>-1||o)&&(i>-1&&(t.docView.markDirty(i,s),bpe(t)),this.handleDOMChange(i,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Uc(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let f=t.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let o=t.previousSibling,i=t.nextSibling;if(zi&&dd<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:f,nextSibling:p}=t.addedNodes[u];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(o=f),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p)}let s=o&&o.parentNode==t.target?Io(o)+1:0,a=r.localPosFromDOM(t.target,s,-1),l=i&&i.parentNode==t.target?Io(i):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let H9=new WeakMap,U9=!1;function bpe(e){if(!H9.has(e)&&(H9.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Ya,U9)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),U9=!0}}function G9(e,t){let n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return th(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function vpe(e,t){if(t.getComposedRanges){let o=t.getComposedRanges(e.root)[0];if(o)return G9(e,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?G9(e,n):null}function wpe(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function xpe(e,t,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],aC(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Yo&&e.input.lastKeyCode===8)for(let x=i;x>o;x--){let S=r.childNodes[x-1],E=S.pmViewDesc;if(S.nodeName=="BR"&&!E){i=x;break}if(!E||E.size)break}let f=e.state.doc,p=e.someProp("domParser")||Bl.fromSchema(e.state.schema),m=f.resolve(s),y=null,b=p.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:i,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Spe,context:m});if(c&&c[0].pos!=null){let x=c[0].pos,S=c[1]&&c[1].pos;S==null&&(S=x),y={anchor:x+s,head:S+s}}return{doc:b,sel:y,from:s,to:a}}function Spe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(gi&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||gi&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const kpe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Cpe(e,t,n,r,o){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let I=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,L=SO(e,I);if(L&&!e.state.selection.eq(L)){if(Yo&&jc&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",B=>B(e,xf(13,"Enter"))))return;let $=e.state.tr.setSelection(L);I=="pointer"?$.setMeta("pointer",!0):I=="key"&&$.scrollIntoView(),i&&$.setMeta("composition",i),e.dispatch($)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,c=xpe(e,t,n),u=e.state.doc,f=u.slice(c.from,c.to),p,m;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(p=e.state.selection.to,m="end"):(p=e.state.selection.from,m="start"),e.input.lastKeyCode=null;let y=_pe(f.content,c.doc.content,c.from,p,m);if(y&&e.input.domChangeCount++,(ym&&e.input.lastIOSEnter>Date.now()-225||jc)&&o.some(I=>I.nodeType==1&&!kpe.test(I.nodeName))&&(!y||y.endA>=y.endB)&&e.someProp("handleKeyDown",I=>I(e,xf(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof Ve&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let I=q9(e,e.state.doc,c.sel);if(I&&!I.eq(e.state.selection)){let L=e.state.tr.setSelection(I);i&&L.setMeta("composition",i),e.dispatch(L)}}return}e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof Ve&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),zi&&dd<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)==" "&&(y.start--,y.endA--,y.endB--);let b=c.doc.resolveNoCache(y.start-c.from),x=c.doc.resolveNoCache(y.endB-c.from),S=u.resolve(y.start),E=b.sameParent(x)&&b.parent.inlineContent&&S.end()>=y.endA,T;if((ym&&e.input.lastIOSEnter>Date.now()-225&&(!E||o.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!E&&b.pos<c.doc.content.size&&(!b.sameParent(x)||!b.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(b.pos,x.pos,"",""))&&(T=tt.findFrom(c.doc.resolve(b.pos+1),1,!0))&&T.head>b.pos)&&e.someProp("handleKeyDown",I=>I(e,xf(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&Tpe(u,y.start,y.endA,b,x)&&e.someProp("handleKeyDown",I=>I(e,xf(8,"Backspace")))){jc&&Yo&&e.domObserver.suppressSelectionUpdates();return}Yo&&y.endB==y.start&&(e.input.lastChromeDelete=Date.now()),jc&&!E&&b.start()!=x.start()&&x.parentOffset==0&&b.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,x=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(I){return I(e,xf(13,"Enter"))})},20));let A=y.start,M=y.endA,R=I=>{let L=I||e.state.tr.replace(A,M,c.doc.slice(y.start-c.from,y.endB-c.from));if(c.sel){let $=q9(e,L.doc,c.sel);$&&!(Yo&&e.composing&&$.empty&&(y.start!=y.endB||e.input.lastChromeDelete<Date.now()-100)&&($.head==A||$.head==L.mapping.map(M)-1)||zi&&$.empty&&$.head==A)&&L.setSelection($)}return i&&L.setMeta("composition",i),L.scrollIntoView()},O;if(E){if(b.pos==x.pos){zi&&dd<=11&&b.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Uc(e),20));let I=R(e.state.tr.delete(A,M)),L=u.resolve(y.start).marksAcross(u.resolve(y.endA));L&&I.ensureMarks(L),e.dispatch(I)}else if(y.endA==y.endB&&(O=Epe(b.parent.content.cut(b.parentOffset,x.parentOffset),S.parent.content.cut(S.parentOffset,y.endA-S.start())))){let I=R(e.state.tr);O.type=="add"?I.addMark(A,M,O.mark):I.removeMark(A,M,O.mark),e.dispatch(I)}else if(b.parent.child(b.index()).isText&&b.index()==x.index()-(x.textOffset?0:1)){let I=b.parent.textBetween(b.parentOffset,x.parentOffset),L=()=>R(e.state.tr.insertText(I,A,M));e.someProp("handleTextInput",$=>$(e,A,M,I,L))||e.dispatch(L())}}else e.dispatch(R())}function q9(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:kO(e,t.resolve(n.anchor),t.resolve(n.head))}function Epe(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,o=n,i=r,s,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(pe.from(c).eq(e))return{mark:a,type:s}}function Tpe(e,t,n,r,o){if(n-t<=o.pos-r.pos||p_(r,!0,!1)<o.pos)return!1;let i=e.resolve(t);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==t+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(p_(i,!0,!0));return!s.parent.isTextblock||s.pos>n||p_(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function p_(e,t,n){let r=e.depth,o=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n){let i=e.node(r).maybeChild(e.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function _pe(e,t,n,r,o){let i=e.findDiffStart(t,n);if(i==null)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&e.size<t.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<t.size&&Z9(t.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<e.size&&Z9(e.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function Z9(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class RO{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new qhe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(X9),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Y9(this),K9(this),this.nodeViews=J9(this),this.docView=A9(this.state.doc,W9(this),h_(this),this.dom,this),this.domObserver=new ype(this,(r,o,i,s)=>Cpe(this,r,o,i,s)),this.domObserver.start(),Zhe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&cR(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(X9),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let o=this.state,i=!1,s=!1;t.storedMarks&&this.composing&&(QG(this),s=!0),this.state=t;let a=o.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=J9(this);Mpe(m,this.nodeViews)&&(this.nodeViews=m,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&cR(this),this.editable=Y9(this),K9(this);let l=h_(this),c=W9(this),u=o.plugins!=t.plugins&&!o.doc.eq(t.doc)?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(o.selection))&&(s=!0);let p=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&ahe(this);if(s){this.domObserver.stop();let m=f&&(zi||Yo)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&Ape(o.selection,t.selection);if(f){let y=Yo?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=spe(this)),(i||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=A9(t.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Nhe(this))?Uc(this,m):(VG(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():p&&lhe(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof We){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&S9(this,n.getBoundingClientRect(),t)}else S9(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new tq(t.slice,t.move,o<0?void 0:We.create(this.state.doc,o))}someProp(t,n){let r=this._props&&this._props[t],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[t];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[t];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(zi){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&che(this.dom),Uc(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return phe(this,t)}coordsAtPos(t,n=1){return OG(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let o=this.docView.posFromDOM(t,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(t,n){return vhe(this,n||this.state,t)}pasteHTML(t,n){return T0(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return T0(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return CO(this,t)}destroy(){this.docView&&(Whe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],h_(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Yfe())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Yhe(this,t)}domSelectionRange(){let t=this.domSelection();return t?gi&&this.root.nodeType===11&&the(this.dom.ownerDocument)==this.dom&&vpe(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}RO.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function W9(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Gt.node(0,e.state.doc.content.size,t)]}function K9(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Gt.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Y9(e){return!e.someProp("editable",t=>t(e.state)===!1)}function Ape(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function J9(e){let t=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=r[o])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Mpe(e,t){let n=0,r=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let o in t)r++;return n!=r}function X9(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var md={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Bx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Rpe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Npe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Oo=0;Oo<10;Oo++)md[48+Oo]=md[96+Oo]=String(Oo);for(var Oo=1;Oo<=24;Oo++)md[Oo+111]="F"+Oo;for(var Oo=65;Oo<=90;Oo++)md[Oo]=String.fromCharCode(Oo+32),Bx[Oo]=String.fromCharCode(Oo);for(var m_ in md)Bx.hasOwnProperty(m_)||(Bx[m_]=md[m_]);function Ipe(e){var t=Rpe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Npe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Bx:md)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Ope=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Ppe=typeof navigator<"u"&&/Win/.test(navigator.platform);function Dpe(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Ope?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function $pe(e){let t=Object.create(null);for(let n in e)t[Dpe(n)]=e[n];return t}function g_(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Lpe(e){return new St({props:{handleKeyDown:NO(e)}})}function NO(e){let t=$pe(e);return function(n,r){let o=Ipe(r),i,s=t[g_(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=t[g_(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Ppe&&r.ctrlKey&&r.altKey)&&(i=md[r.keyCode])&&i!=o){let a=t[g_(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const IO=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function sq(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const aq=(e,t,n)=>{let r=sq(e,n);if(!r)return!1;let o=OO(r);if(!o){let s=r.blockRange(),a=s&&Fm(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(gq(e,o,t,-1))return!0;if(r.parent.content.size==0&&(bm(i,"end")||We.isSelectable(i)))for(let s=r.depth;;s--){let a=iC(e.doc,r.before(s),r.after(s),Te.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(bm(i,"end")?tt.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):We.create(l.doc,o.pos-i.nodeSize)),t(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(t&&t(e.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},jpe=(e,t,n)=>{let r=sq(e,n);if(!r)return!1;let o=OO(r);return o?lq(e,o,t):!1},zpe=(e,t,n)=>{let r=uq(e,n);if(!r)return!1;let o=PO(r);return o?lq(e,o,t):!1};function lq(e,t,n){let r=t.nodeBefore,o=r,i=t.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let s=t.nodeAfter,a=s,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=iC(e.doc,i,l,Te.empty);if(!c||c.from!=i||c instanceof Pn&&c.slice.size>=l-i)return!1;if(n){let u=e.tr.step(c);u.setSelection(Ve.create(u.doc,i)),n(u.scrollIntoView())}return!0}function bm(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const cq=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=OO(r)}let s=i&&i.nodeBefore;return!s||!We.isSelectable(s)?!1:(t&&t(e.tr.setSelection(We.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function OO(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function uq(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const dq=(e,t,n)=>{let r=uq(e,n);if(!r)return!1;let o=PO(r);if(!o)return!1;let i=o.nodeAfter;if(gq(e,o,t,1))return!0;if(r.parent.content.size==0&&(bm(i,"start")||We.isSelectable(i))){let s=iC(e.doc,r.before(),r.after(),Te.empty);if(s&&s.slice.size<s.to-s.from){if(t){let a=e.tr.step(s);a.setSelection(bm(i,"start")?tt.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):We.create(a.doc,a.mapping.map(o.pos))),t(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},fq=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=PO(r)}let s=i&&i.nodeAfter;return!s||!We.isSelectable(s)?!1:(t&&t(e.tr.setSelection(We.create(e.doc,i.pos)).scrollIntoView()),!0)};function PO(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Bpe=(e,t)=>{let n=e.selection,r=n instanceof We,o;if(r){if(n.node.isTextblock||!vh(e.doc,n.from))return!1;o=n.from}else if(o=oC(e.doc,n.from,-1),o==null)return!1;if(t){let i=e.tr.join(o);r&&i.setSelection(We.create(i.doc,o-e.doc.resolve(o).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0},Vpe=(e,t)=>{let n=e.selection,r;if(n instanceof We){if(n.node.isTextblock||!vh(e.doc,n.to))return!1;r=n.to}else if(r=oC(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},Fpe=(e,t)=>{let{$from:n,$to:r}=e.selection,o=n.blockRange(r),i=o&&Fm(o);return i==null?!1:(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)},hq=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function DO(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Hpe=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=DO(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,s.createAndFill());l.setSelection(tt.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},pq=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof ji||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=DO(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.insert(s,i.createAndFill());a.setSelection(Ve.create(a.doc,s+1)),t(a.scrollIntoView())}return!0},mq=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Hc(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Fm(r);return o==null?!1:(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)};function Upe(e){return(t,n)=>{let{$from:r,$to:o}=t.selection;if(t.selection instanceof We&&t.selection.node.isBlock)return!r.parentOffset||!Hc(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,l=!1,c=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){l=r.end(m)==r.pos+(r.depth-m),c=r.start(m)==r.pos-(r.depth-m),a=DO(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),i.unshift(l&&a?{type:a}:null),s=m;break}else{if(m==1)return!1;i.unshift(null)}let u=t.tr;(t.selection instanceof Ve||t.selection instanceof ji)&&u.deleteSelection();let f=u.mapping.map(r.pos),p=Hc(u.doc,f,i.length,i);if(p||(i[0]=a?{type:a}:null,p=Hc(u.doc,f,i.length,i)),!p)return!1;if(u.split(f,i.length,i),!l&&c&&r.node(s).type!=a){let m=u.mapping.map(r.before(s)),y=u.doc.resolve(m);a&&r.node(s-1).canReplaceWith(y.index(),y.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(s)),a)}return n&&n(u.scrollIntoView()),!0}}const Gpe=Upe(),qpe=(e,t)=>{let{$from:n,to:r}=e.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),t&&t(e.tr.setSelection(We.create(e.doc,o))),!0)};function Zpe(e,t,n){let r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(i,i+1)||!(o.isTextblock||vh(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function gq(e,t,n,r){let o=t.nodeBefore,i=t.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&Zpe(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(n){let m=t.pos+i.nodeSize,y=pe.empty;for(let S=s.length-1;S>=0;S--)y=pe.from(s[S].create(null,y));y=pe.from(o.copy(y));let b=e.tr.step(new vr(t.pos-1,m,t.pos,m,new Te(y,1,0),s.length,!0)),x=b.doc.resolve(m+2*s.length);x.nodeAfter&&x.nodeAfter.type==o.type&&vh(b.doc,x.pos)&&b.join(x.pos),n(b.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:tt.findFrom(t,1),f=u&&u.$from.blockRange(u.$to),p=f&&Fm(f);if(p!=null&&p>=t.depth)return n&&n(e.tr.lift(f,p).scrollIntoView()),!0;if(c&&bm(i,"start",!0)&&bm(o,"end")){let m=o,y=[];for(;y.push(m),!m.isTextblock;)m=m.lastChild;let b=i,x=1;for(;!b.isTextblock;b=b.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,b.content)){if(n){let S=pe.empty;for(let T=y.length-1;T>=0;T--)S=pe.from(y[T].copy(S));let E=e.tr.step(new vr(t.pos-y.length,t.pos+i.nodeSize,t.pos+x,t.pos+i.nodeSize-x,new Te(S,y.length,0),0,!0));n(E.scrollIntoView())}return!0}}return!1}function yq(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(t.tr.setSelection(Ve.create(t.doc,e<0?o.start(i):o.end(i)))),!0):!1}}const Wpe=yq(-1),Kpe=yq(1);function Ype(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&mG(s,e,t);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function Q9(e,t=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)o=!0;else{let u=n.doc.resolve(c),f=u.index();o=u.parent.canReplaceWith(f,f+1,e)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];i.setBlockType(a,l,e,t)}r(i.scrollIntoView())}return!0}}function $O(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}$O(IO,aq,cq);$O(IO,dq,fq);$O(hq,pq,mq,Gpe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Jpe(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return Xpe(a,s,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function Xpe(e,t,n,r=null){let o=!1,i=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=s.resolve(t.start-2);i=new Ox(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new Ox(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),o=!0}let a=mG(i,n,r,t);return a?(e&&Qpe(e,t,a,o,n),!0):!1}function Qpe(e,t,n,r,o){let i=pe.empty;for(let u=n.length-1;u>=0;u--)i=pe.from(n[u].type.create(n[u].attrs,i));e.step(new vr(t.start-(r?2:0),t.end,t.start,t.end,new Te(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let a=n.length-s,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,f=t.endIndex,p=!0;u<f;u++,p=!1)!p&&Hc(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}function eme(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==e);return i?n?r.node(i.depth-1).type==e?tme(t,n,e,i):nme(t,n,i):!0:!1}}function tme(e,t,n,r){let o=e.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new vr(i-1,s,i,s,new Te(pe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ox(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=Fm(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(i,-1)-1);return vh(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),t(o.scrollIntoView()),!0}function nme(e,t,n){let r=e.tr,o=n.parent;for(let m=n.end,y=n.endIndex-1,b=n.startIndex;y>b;y--)m-=o.child(y).nodeSize,r.delete(m-1,m+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?pe.empty:pe.from(o))))return!1;let f=i.pos,p=f+s.nodeSize;return r.step(new vr(f-(a?1:0),p+(l?1:0),f+1,p-1,new Te((a?pe.empty:pe.from(o.copy(pe.empty))).append(l?pe.empty:pe.from(o.copy(pe.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function rme(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==e);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=pe.from(c?e.create():null),f=new Te(pe.from(e.create(null,pe.from(a.type.create(null,u)))),c?3:1,0),p=i.start,m=i.end;n(t.tr.step(new vr(p-(c?3:1),m,p,m,f,1,!0)).scrollIntoView())}return!0}}function uC(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class dC{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>{const f=l(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!t,c=t||i.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(r).map(([p,m])=>[p,(...b)=>{const x=this.buildProps(c,n),S=m(...b)(x);return a.push(S),f}])),run:u};return f}createCan(t){const{rawCommands:n,state:r}=this,o=!1,i=t||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(t,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:t,editor:o,view:s,state:uC({state:i,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t,n),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class ome{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const r=this.callbacks[t];return r&&r.forEach(o=>o.apply(this,n)),this}off(t,n){const r=this.callbacks[t];return r&&(n?this.callbacks[t]=r.filter(o=>o!==n):delete this.callbacks[t]),this}once(t,n){const r=(...o)=>{this.off(t,r),n.apply(this,o)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}}function qe(e,t,n){return e.config[t]===void 0&&e.parent?qe(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?qe(e.parent,t,n):null}):e.config[t]}function fC(e){const t=e.filter(o=>o.type==="extension"),n=e.filter(o=>o.type==="node"),r=e.filter(o=>o.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function bq(e){const t=[],{nodeExtensions:n,markExtensions:r}=fC(e),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=qe(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([p,m])=>{t.push({type:f,name:p,attribute:{...i,...m}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=qe(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const p={...i,...f};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,t.push({type:s.name,name:u,attribute:p})})}),t}function xo(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Cs(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?String(i).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,p]=u.split(":").map(m=>m.trim());c.set(f,p)}),a.forEach(u=>{const[f,p]=u.split(":").map(m=>m.trim());c.set(f,p)}),r[o]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[o]=i}),r},{})}function Vx(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Cs(n,r),{})}function vq(e){return typeof e=="function"}function Lt(e,t=void 0,...n){return vq(e)?t?e.bind(t)(...n):e(...n):e}function ime(e={}){return Object.keys(e).length===0&&e.constructor===Object}function sme(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function e6(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const o=t.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):sme(n.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function t6(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&ime(n)?!1:n!=null))}function wq(e,t){var n;const r=bq(e),{nodeExtensions:o,markExtensions:i}=fC(e),s=(n=o.find(c=>qe(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(S=>S.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((S,E)=>{const T=qe(E,"extendNodeSchema",f);return{...S,...T?T(c):{}}},{}),m=t6({...p,content:Lt(qe(c,"content",f)),marks:Lt(qe(c,"marks",f)),group:Lt(qe(c,"group",f)),inline:Lt(qe(c,"inline",f)),atom:Lt(qe(c,"atom",f)),selectable:Lt(qe(c,"selectable",f)),draggable:Lt(qe(c,"draggable",f)),code:Lt(qe(c,"code",f)),whitespace:Lt(qe(c,"whitespace",f)),linebreakReplacement:Lt(qe(c,"linebreakReplacement",f)),defining:Lt(qe(c,"defining",f)),isolating:Lt(qe(c,"isolating",f)),attrs:Object.fromEntries(u.map(S=>{var E;return[S.name,{default:(E=S?.attribute)===null||E===void 0?void 0:E.default}]}))}),y=Lt(qe(c,"parseHTML",f));y&&(m.parseDOM=y.map(S=>e6(S,u)));const b=qe(c,"renderHTML",f);b&&(m.toDOM=S=>b({node:S,HTMLAttributes:Vx(S,u)}));const x=qe(c,"renderText",f);return x&&(m.toText=x),[c.name,m]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(x=>x.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((x,S)=>{const E=qe(S,"extendMarkSchema",f);return{...x,...E?E(c):{}}},{}),m=t6({...p,inclusive:Lt(qe(c,"inclusive",f)),excludes:Lt(qe(c,"excludes",f)),group:Lt(qe(c,"group",f)),spanning:Lt(qe(c,"spanning",f)),code:Lt(qe(c,"code",f)),attrs:Object.fromEntries(u.map(x=>{var S;return[x.name,{default:(S=x?.attribute)===null||S===void 0?void 0:S.default}]}))}),y=Lt(qe(c,"parseHTML",f));y&&(m.parseDOM=y.map(x=>e6(x,u)));const b=qe(c,"renderHTML",f);return b&&(m.toDOM=x=>b({mark:x,HTMLAttributes:Vx(x,u)})),[c.name,m]}));return new aG({topNode:s,nodes:a,marks:l})}function y_(e,t){return t.nodes[e]||t.marks[e]||null}function n6(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function LO(e,t){const n=au.fromSchema(t).serializeFragment(e),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const ame=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(o,i,s,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-i))}),n};function jO(e){return Object.prototype.toString.call(e)==="[object RegExp]"}class gd{constructor(t){this.find=t.find,this.handler=t.handler}}const lme=(e,t)=>{if(jO(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function H1(e){var t;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((t=c.nodeBefore||c.nodeAfter)===null||t===void 0)&&t.marks.find(p=>p.type.spec.code))return!1;let u=!1;const f=ame(c)+i;return s.forEach(p=>{if(u)return;const m=lme(f,p.find);if(!m)return;const y=l.state.tr,b=uC({state:l.state,transaction:y}),x={from:r-(m[0].length-i.length),to:o},{commands:S,chain:E,can:T}=new dC({editor:n,state:b});p.handler({state:b,range:x,match:m,commands:S,chain:E,can:T})===null||!y.steps.length||(y.setMeta(a,{transform:y,from:r,to:o,text:i}),l.dispatch(y),u=!0)}),u}function cme(e){const{editor:t,rules:n}=e,r=new St({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=LO(pe.from(u),s.schema);const{from:f}=l,p=f+u.length;H1({editor:t,from:f,to:p,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return H1({editor:t,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&H1({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?H1({editor:t,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function ume(e){return Object.prototype.toString.call(e).slice(8,-1)}function U1(e){return ume(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function hC(e,t){const n={...e};return U1(e)&&U1(t)&&Object.keys(t).forEach(r=>{U1(t[r])&&U1(e[r])?n[r]=hC(e[r],t[r]):n[r]=t[r]}),n}class $o{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Lt(qe(this,"addOptions",{name:this.name}))),this.storage=Lt(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new $o(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>hC(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new $o(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Lt(qe(n,"addOptions",{name:n.name})),n.storage=Lt(qe(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,o=t.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>c?.type.name===n.name))return!1;const l=s.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}}function dme(e){return typeof e=="number"}class fme{constructor(t){this.find=t.find,this.handler=t.handler}}const hme=(e,t,n)=>{if(jO(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=e,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function pme(e){const{editor:t,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:c,can:u}=new dC({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,o,(m,y)=>{if(!m.isTextblock||m.type.spec.code)return;const b=Math.max(r,y),x=Math.min(o,y+m.content.size),S=m.textBetween(b-y,x-y,void 0,"");hme(S,i.find,s).forEach(T=>{if(T.index===void 0)return;const A=b+T.index+1,M=A+T[0].length,R={from:n.tr.mapping.map(A),to:n.tr.mapping.map(M)},O=i.handler({state:n,range:R,match:T,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});f.push(O)})}),f.every(m=>m!==null)}let G1=null;const mme=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)===null||t===void 0||t.setData("text/html",e),n};function gme(e){const{editor:t,rules:n}=e;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:p,rule:m,pasteEvt:y})=>{const b=u.tr,x=uC({state:u,transaction:b});if(!(!pme({editor:t,state:x,from:Math.max(f-1,0),to:p.b-1,rule:m,pasteEvent:y,dropEvent:a})||!b.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return n.map(u=>new St({view(f){const p=y=>{var b;r=!((b=f.dom.parentElement)===null||b===void 0)&&b.contains(y.target)?f.dom.parentElement:null,r&&(G1=t)},m=()=>{G1&&(G1=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(i=r===f.dom.parentElement,a=p,!i){const m=G1;m?.isEditable&&setTimeout(()=>{const y=m.state.selection;y&&m.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(f,p)=>{var m;const y=(m=p.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return s=p,o=!!y?.includes("data-pm-slice"),!1}}},appendTransaction:(f,p,m)=>{const y=f[0],b=y.getMeta("uiEvent")==="paste"&&!o,x=y.getMeta("uiEvent")==="drop"&&!i,S=y.getMeta("applyPasteRules"),E=!!S;if(!b&&!x&&!E)return;if(E){let{text:M}=S;typeof M=="string"?M=M:M=LO(pe.from(M),m.schema);const{from:R}=S,O=R+M.length,I=mme(M);return l({rule:u,state:m,from:R,to:{b:O},pasteEvt:I})}const T=p.doc.content.findDiffStart(m.doc.content),A=p.doc.content.findDiffEnd(m.doc.content);if(!(!dme(T)||!A||T===A.b))return l({rule:u,state:m,from:T,to:A,pasteEvt:s})}}))}function yme(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}class Nf{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=Nf.resolve(t),this.schema=wq(this.extensions,n),this.setupExtensions()}static resolve(t){const n=Nf.sort(Nf.flatten(t)),r=yme(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=qe(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(t){return t.sort((r,o)=>{const i=qe(r,"priority")||100,s=qe(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:y_(n.name,this.schema)},o=qe(n,"addCommands",r);return o?{...t,...o()}:t},{})}get plugins(){const{editor:t}=this,n=Nf.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:t,type:y_(s.name,this.schema)},l=[],c=qe(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&qe(s,"exitable",a)&&(u.ArrowRight=()=>$o.handleExit({editor:t,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([x,S])=>[x,()=>S({editor:t})]));u={...u,...b}}const f=Lpe(u);l.push(f);const p=qe(s,"addInputRules",a);n6(s,t.options.enableInputRules)&&p&&r.push(...p());const m=qe(s,"addPasteRules",a);n6(s,t.options.enablePasteRules)&&m&&o.push(...m());const y=qe(s,"addProseMirrorPlugins",a);if(y){const b=y();l.push(...b)}return l}).flat();return[cme({editor:t,rules:r}),...gme({editor:t,rules:o}),...i]}get attributes(){return bq(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=fC(this.extensions);return Object.fromEntries(n.filter(r=>!!qe(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:t,type:xo(r.name,this.schema)},s=qe(r,"addNodeView",i);if(!s)return[];const a=(l,c,u,f,p)=>{const m=Vx(l,o);return s()({node:l,view:c,getPos:u,decorations:f,innerDecorations:p,editor:t,extension:r,HTMLAttributes:m})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(t=>{var n;this.editor.extensionStorage[t.name]=t.storage;const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:y_(t.name,this.schema)};t.type==="mark"&&(!((n=Lt(qe(t,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(t.name);const o=qe(t,"onBeforeCreate",r),i=qe(t,"onCreate",r),s=qe(t,"onUpdate",r),a=qe(t,"onSelectionUpdate",r),l=qe(t,"onTransaction",r),c=qe(t,"onFocus",r),u=qe(t,"onBlur",r),f=qe(t,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class Mn{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Lt(qe(this,"addOptions",{name:this.name}))),this.storage=Lt(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Mn(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>hC(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new Mn({...this.config,...t});return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Lt(qe(n,"addOptions",{name:n.name})),n.storage=Lt(qe(n,"addStorage",{name:n.name,options:n.options})),n}}function xq(e,t,n){const{from:r,to:o}=t,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="";return e.nodesBetween(r,o,(l,c,u,f)=>{var p;l.isBlock&&c>r&&(a+=i);const m=s?.[l.type.name];if(m)return u&&(a+=m({node:l,pos:c,parent:u,index:f,range:t})),!1;l.isText&&(a+=(p=l?.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,o-c))}),a}function Sq(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const kq=Mn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new St({key:new Bt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:i}=o,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=Sq(n);return xq(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),bme=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),vme=(e=!1)=>({commands:t})=>t.setContent("",e),wme=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{e.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,f=c.resolve(u.map(l)),p=c.resolve(u.map(l+a.nodeSize)),m=f.blockRange(p);if(!m)return;const y=Fm(m);if(a.type.isTextblock){const{defaultType:b}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(m.start,b)}(y||y===0)&&t.lift(m,y)})}),!0},xme=e=>t=>e(t),Sme=()=>({state:e,dispatch:t})=>pq(e,t),kme=(e,t)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const s=r.mapping.map(t);return r.insert(s,i.content),r.setSelection(new Ve(r.doc.resolve(Math.max(s-1,0)))),!0},Cme=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const o=e.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(t){const a=o.before(i),l=o.after(i);e.delete(a,l).scrollIntoView()}return!0}return!1},Eme=e=>({tr:t,state:n,dispatch:r})=>{const o=xo(e,n.schema),i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),c=i.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1},Tme=e=>({tr:t,dispatch:n})=>{const{from:r,to:o}=e;return n&&t.delete(r,o),!0},_me=()=>({state:e,dispatch:t})=>IO(e,t),Ame=()=>({commands:e})=>e.keyboardShortcut("Enter"),Mme=()=>({state:e,dispatch:t})=>Hpe(e,t);function Fx(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(o=>n.strict?t[o]===e[o]:jO(t[o])?t[o].test(e[o]):t[o]===e[o]):!0}function Cq(e,t,n={}){return e.find(r=>r.type===t&&Fx(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function r6(e,t,n={}){return!!Cq(e,t,n)}function A0(e,t,n){var r;if(!e||!t)return;let o=e.parent.childAfter(e.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===t))&&(o=e.parent.childBefore(e.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===t)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!Cq([...o.node.marks],t,n)))return;let s=o.index,a=e.start()+o.offset,l=s+1,c=a+o.node.nodeSize;for(;s>0&&r6([...e.parent.child(s-1).marks],t,n);)s-=1,a-=e.parent.child(s).nodeSize;for(;l<e.parent.childCount&&r6([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Od(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}const Rme=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const i=Od(e,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const f=A0(l,i,t);if(f&&f.from<=c&&f.to>=u){const p=Ve.create(s,f.from,f.to);n.setSelection(p)}}return!0},Nme=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function pC(e){return e instanceof Ve}function zc(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Eq(e,t=null){if(!t)return null;const n=tt.atStart(e),r=tt.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const o=n.from,i=r.to;return t==="all"?Ve.create(e,zc(0,o,i),zc(e.content.size,o,i)):Ve.create(e,zc(t,o,i),zc(t,o,i))}function Tq(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function mC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Ime=(e=null,t={})=>({editor:n,view:r,tr:o,dispatch:i})=>{t={scrollIntoView:!0,...t};const s=()=>{(mC()||Tq())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(i&&e===null&&!pC(n.state.selection))return s(),!0;const a=Eq(o.doc,e)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},Ome=(e,t)=>n=>e.every((r,o)=>t(r,{...n,index:o})),Pme=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),_q=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&_q(r)}return e};function q1(e){const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return _q(n)}function M0(e,t,n){if(e instanceof Fc||e instanceof pe)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,o=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return pe.fromArray(e.map(a=>t.nodeFromJSON(a)));const s=t.nodeFromJSON(e);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),M0("",t,n)}if(o){if(n.errorOnInvalidContent){let s=!1,a="";const l=new aG({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Bl.fromSchema(l).parseSlice(q1(e),n.parseOptions):Bl.fromSchema(l).parse(q1(e),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Bl.fromSchema(t);return n.slice?i.parseSlice(q1(e),n.parseOptions).content:i.parse(q1(e),n.parseOptions)}return M0("",t,n)}function Aq(e,t,n){const r=e.steps.length-1;if(r<t)return;const o=e.steps[r];if(!(o instanceof Pn||o instanceof vr))return;const i=e.mapping.maps[r];let s=0;i.forEach((a,l,c,u)=>{s===0&&(s=u)}),e.setSelection(tt.near(e.doc.resolve(s),n))}const Dme=e=>!("type"in e),$me=(e,t,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=x=>{i.emit("contentError",{editor:i,error:x,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{M0(t,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{a=M0(t,i.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(x){return l(x),!1}let{from:u,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},p=!0,m=!0;if((Dme(a)?a:[a]).forEach(x=>{x.check(),p=p?x.isText&&x.marks.length===0:!1,m=m?x.isBlock:!1}),u===f&&m){const{parent:x}=r.doc.resolve(u);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(u-=1,f+=1)}let b;if(p){if(Array.isArray(t))b=t.map(x=>x.text||"").join("");else if(t instanceof pe){let x="";t.forEach(S=>{S.text&&(x+=S.text)}),b=x}else typeof t=="object"&&t&&t.text?b=t.text:b=t;r.insertText(b,u,f)}else b=a,r.replaceWith(u,f,b);n.updateSelection&&Aq(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:b}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:b})}return!0},Lme=()=>({state:e,dispatch:t})=>Bpe(e,t),jme=()=>({state:e,dispatch:t})=>Vpe(e,t),zme=()=>({state:e,dispatch:t})=>aq(e,t),Bme=()=>({state:e,dispatch:t})=>dq(e,t),Vme=()=>({state:e,dispatch:t,tr:n})=>{try{const r=oC(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Fme=()=>({state:e,dispatch:t,tr:n})=>{try{const r=oC(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Hme=()=>({state:e,dispatch:t})=>jpe(e,t),Ume=()=>({state:e,dispatch:t})=>zpe(e,t);function Mq(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Gme(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))mC()||Mq()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const qme=e=>({editor:t,view:n,tr:r,dispatch:o})=>{const i=Gme(e).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function R0(e,t,n={}){const{from:r,to:o,empty:i}=e.selection,s=t?xo(t,e.schema):null,a=[];e.doc.nodesBetween(r,o,(f,p)=>{if(f.isText)return;const m=Math.max(r,p),y=Math.min(o,p+f.nodeSize);a.push({node:f,from:m,to:y})});const l=o-r,c=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>Fx(f.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((f,p)=>f+p.to-p.from,0)>=l}const Zme=(e,t={})=>({state:n,dispatch:r})=>{const o=xo(e,n.schema);return R0(n,o,t)?Fpe(n,r):!1},Wme=()=>({state:e,dispatch:t})=>mq(e,t),Kme=e=>({state:t,dispatch:n})=>{const r=xo(e,t.schema);return eme(r)(t,n)},Yme=()=>({state:e,dispatch:t})=>hq(e,t);function gC(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function o6(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,o)=>(n.includes(o)||(r[o]=e[o]),r),{})}const Jme=(e,t)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=gC(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(i=xo(e,r.schema)),a==="mark"&&(s=Od(e,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{i&&i===c.type&&n.setNodeMarkup(u,void 0,o6(c.attrs,t)),s&&c.marks.length&&c.marks.forEach(f=>{s===f.type&&n.addMark(u,u+c.nodeSize,s.create(o6(f.attrs,t)))})})}),!0):!1},Xme=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),Qme=()=>({tr:e,dispatch:t})=>{if(t){const n=new ji(e.doc);e.setSelection(n)}return!0},ege=()=>({state:e,dispatch:t})=>cq(e,t),tge=()=>({state:e,dispatch:t})=>fq(e,t),nge=()=>({state:e,dispatch:t})=>qpe(e,t),rge=()=>({state:e,dispatch:t})=>Kpe(e,t),oge=()=>({state:e,dispatch:t})=>Wpe(e,t);function Hx(e,t,n={},r={}){return M0(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const ige=(e,t=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,c;const{doc:u}=i;if(n.preserveWhitespace!=="full"){const f=Hx(e,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return s&&i.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!t),!0}return s&&i.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:u.content.size},e,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function Rq(e,t){const n=Od(t,e.schema),{from:r,to:o,empty:i}=e.selection,s=[];i?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function zO(e,t){const n=new Nd(e);return t.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function sge(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function i6(e,t){const n=[];return e.descendants((r,o)=>{t(r)&&n.push({node:r,pos:o})}),n}function Nq(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(o,i)=>{n(o)&&r.push({node:o,pos:i})}),r}function age(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function yC(e){return t=>age(t.$from,e)}function lge(e,t){const n=Nf.resolve(e);return wq(n,t)}function cge(e,t){const n={from:0,to:e.content.size};return xq(e,n,t)}function uge(e,t){const n=xo(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function Iq(e,t){const n=gC(typeof t=="string"?t:t.name,e.schema);return n==="node"?uge(e,t):n==="mark"?Rq(e,t):{}}function dge(e,t=JSON.stringify){const n={};return e.filter(r=>{const o=t(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function fge(e){const t=dge(e);return t.length===1?t:t.filter((n,r)=>!t.filter((i,s)=>s!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function Oq(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((o,i)=>{const s=[];if(o.ranges.length)o.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const c=t.slice(i).map(a,-1),u=t.slice(i).map(l),f=t.invert().map(c,-1),p=t.invert().map(u);r.push({oldRange:{from:f,to:p},newRange:{from:c,to:u}})})}),fge(r)}function BO(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(o=>{const i=n.resolve(e),s=A0(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(e,t,(o,i)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function tx(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=e.find(i=>i.type===t&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function uR(e,t,n={}){const{empty:r,ranges:o}=e.selection,i=t?Od(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>Fx(f.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:f,$to:p})=>{const m=f.pos,y=p.pos;e.doc.nodesBetween(m,y,(b,x)=>{if(!b.isText&&!b.marks.length)return;const S=Math.max(m,x),E=Math.min(y,x+b.nodeSize),T=E-S;s+=T,a.push(...b.marks.map(A=>({mark:A,from:S,to:E})))})}),s===0)return!1;const l=a.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>Fx(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),c=a.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+c:l)>=s}function hge(e,t,n={}){if(!t)return R0(e,null,n)||uR(e,null,n);const r=gC(t,e.schema);return r==="node"?R0(e,t,n):r==="mark"?uR(e,t,n):!1}function s6(e,t){const{nodeExtensions:n}=fC(t),r=n.find(s=>s.name===e);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=Lt(qe(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function VO(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!==null&&r!==void 0?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let o=!0;return e.content.forEach(i=>{o!==!1&&(VO(i,{ignoreWhitespace:n,checkChildren:t})||(o=!1))}),o}return!1}function dR(e){return e instanceof We}function Ux(e,t,n){const o=e.state.doc.content.size,i=zc(t,0,o),s=zc(n,0,o),a=e.coordsAtPos(i),l=e.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),p=Math.max(a.right,l.right),m=p-f,y=u-c,S={top:c,bottom:u,left:f,right:p,width:m,height:y,x:f,y:c};return{...S,toJSON:()=>S}}function pge(e,t,n){var r;const{selection:o}=t;let i=null;if(pC(o)&&(i=o.$cursor),i){const a=(r=e.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(u,f,p)=>{if(c)return!1;if(u.isInline){const m=!p||p.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(b=>b.type.excludes(n));c=m&&y}return!c}),c})}const mge=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=Od(e,r.schema);if(o)if(s){const c=Rq(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(p,m)=>{const y=Math.max(m,u),b=Math.min(m+p.nodeSize,f);p.marks.find(S=>S.type===l)?p.marks.forEach(S=>{l===S.type&&n.addMark(y,b,l.create({...S.attrs,...t}))}):n.addMark(y,b,l.create(t))})});return pge(r,n,l)},gge=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),yge=(e,t={})=>({state:n,dispatch:r,chain:o})=>{const i=xo(e,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>Q9(i,{...s,...t})(n)?!0:a.clearNodes()).command(({state:a})=>Q9(i,{...s,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},bge=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,o=zc(e,0,r.content.size),i=We.create(r,o);t.setSelection(i)}return!0},vge=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:o,to:i}=typeof e=="number"?{from:e,to:e}:e,s=Ve.atStart(r).from,a=Ve.atEnd(r).to,l=zc(o,s,a),c=zc(i,s,a),u=Ve.create(r,l,c);t.setSelection(u)}return!0},wge=e=>({state:t,dispatch:n})=>{const r=xo(e,t.schema);return rme(r)(t,n)};function a6(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(o=>t?.includes(o.type.name));e.tr.ensureMarks(r)}}const xge=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=t,{$from:a,$to:l}=i,c=o.extensionManager.attributes,u=tx(c,a.node().type.name,a.node().attrs);if(i instanceof We&&i.node.isBlock)return!a.parentOffset||!Hc(s,a.pos)?!1:(r&&(e&&a6(n,o.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=a.depth===0?void 0:sge(a.node(-1).contentMatchAt(a.indexAfter(-1)));let m=f&&p?[{type:p,attrs:u}]:void 0,y=Hc(t.doc,t.mapping.map(a.pos),1,m);if(!m&&!y&&Hc(t.doc,t.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(y=!0,m=p?[{type:p,attrs:u}]:void 0),r){if(y&&(i instanceof Ve&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,m),p&&!f&&!a.parentOffset&&a.parent.type!==p)){const b=t.mapping.map(a.before()),x=t.doc.resolve(b);a.node(-1).canReplaceWith(x.index(),x.index()+1,p)&&t.setNodeMarkup(t.mapping.map(a.before()),p)}e&&a6(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return y},Sge=(e,t={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=xo(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const p=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let S=pe.empty;const E=l.index(-1)?1:l.index(-2)?2:3;for(let I=l.depth-E;I>=l.depth-3;I-=1)S=pe.from(l.node(I).copy(S));const T=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,A={...tx(p,l.node().type.name,l.node().attrs),...t},M=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(A))||void 0;S=S.append(pe.from(a.createAndFill(null,M)||void 0));const R=l.before(l.depth-(E-1));n.replace(R,l.after(-T),new Te(S,4-E,0));let O=-1;n.doc.nodesBetween(R,n.doc.content.size,(I,L)=>{if(O>-1)return!1;I.isTextblock&&I.content.size===0&&(O=L+1)}),O>-1&&n.setSelection(Ve.near(n.doc.resolve(O))),n.scrollIntoView()}return!0}const m=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,y={...tx(p,f.type.name,f.attrs),...t},b={...tx(p,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const x=m?[{type:a,attrs:y},{type:m,attrs:b}]:[{type:a,attrs:y}];if(!Hc(n.doc,l.pos,2))return!1;if(o){const{selection:S,storedMarks:E}=r,{splittableMarks:T}=i.extensionManager,A=E||S.$to.parentOffset&&S.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!A||!o)return!0;const M=A.filter(R=>T.includes(R.type.name));n.ensureMarks(M)}return!0},b_=(e,t)=>{const n=yC(s=>s.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=e.doc.nodeAt(r);return n.node.type===o?.type&&vh(e.doc,n.pos)&&e.join(n.pos),!0},v_=(e,t)=>{const n=yC(s=>s.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=e.doc.nodeAt(r);return n.node.type===o?.type&&vh(e.doc,r)&&e.join(r),!0},kge=(e,t,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:p}=o.extensionManager,m=xo(e,s.schema),y=xo(t,s.schema),{selection:b,storedMarks:x}=s,{$from:S,$to:E}=b,T=S.blockRange(E),A=x||b.$to.parentOffset&&b.$from.marks();if(!T)return!1;const M=yC(R=>s6(R.type.name,f))(b);if(T.depth>=1&&M&&T.depth-M.depth<=1){if(M.node.type===m)return c.liftListItem(y);if(s6(M.node.type.name,f)&&m.validContent(M.node.content)&&a)return l().command(()=>(i.setNodeMarkup(M.pos,m),!0)).command(()=>b_(i,m)).command(()=>v_(i,m)).run()}return!n||!A||!a?l().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>b_(i,m)).command(()=>v_(i,m)).run():l().command(()=>{const R=u().wrapInList(m,r),O=A.filter(I=>p.includes(I.type.name));return i.ensureMarks(O),R?!0:c.clearNodes()}).wrapInList(m,r).command(()=>b_(i,m)).command(()=>v_(i,m)).run()},Cge=(e,t={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Od(e,r.schema);return uR(r,s,t)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,t)},Ege=(e,t,n={})=>({state:r,commands:o})=>{const i=xo(e,r.schema),s=xo(t,r.schema),a=R0(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...n})},Tge=(e,t={})=>({state:n,commands:r})=>{const o=xo(e,n.schema);return R0(n,o,t)?r.lift(o):r.wrapIn(o,t)},_ge=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){const s=e.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,e.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},Age=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:o}=n;return r||t&&o.forEach(i=>{e.removeMark(i.$from.pos,i.$to.pos)}),!0},Mge=(e,t={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=Od(e,r.schema),{$from:c,empty:u,ranges:f}=a;if(!o)return!0;if(u&&s){let{from:p,to:m}=a;const y=(i=c.marks().find(x=>x.type===l))===null||i===void 0?void 0:i.attrs,b=A0(c,l,y);b&&(p=b.from,m=b.to),n.removeMark(p,m,l)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},Rge=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=gC(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(i=xo(e,r.schema)),a==="mark"&&(s=Od(e,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let f,p,m,y;n.selection.empty?r.doc.nodesBetween(c,u,(b,x)=>{i&&i===b.type&&(m=Math.max(x,c),y=Math.min(x+b.nodeSize,u),f=x,p=b)}):r.doc.nodesBetween(c,u,(b,x)=>{x<c&&i&&i===b.type&&(m=Math.max(x,c),y=Math.min(x+b.nodeSize,u),f=x,p=b),x>=c&&x<=u&&(i&&i===b.type&&n.setNodeMarkup(x,void 0,{...b.attrs,...t}),s&&b.marks.length&&b.marks.forEach(S=>{if(s===S.type){const E=Math.max(x,c),T=Math.min(x+b.nodeSize,u);n.addMark(E,T,s.create({...S.attrs,...t}))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...p.attrs,...t}),s&&p.marks.length&&p.marks.forEach(b=>{s===b.type&&n.addMark(m,y,s.create({...b.attrs,...t}))}))}),!0):!1},Nge=(e,t={})=>({state:n,dispatch:r})=>{const o=xo(e,n.schema);return Ype(o,t)(n,r)},Ige=(e,t={})=>({state:n,dispatch:r})=>{const o=xo(e,n.schema);return Jpe(o,t)(n,r)};var Oge=Object.freeze({__proto__:null,blur:bme,clearContent:vme,clearNodes:wme,command:xme,createParagraphNear:Sme,cut:kme,deleteCurrentNode:Cme,deleteNode:Eme,deleteRange:Tme,deleteSelection:_me,enter:Ame,exitCode:Mme,extendMarkRange:Rme,first:Nme,focus:Ime,forEach:Ome,insertContent:Pme,insertContentAt:$me,joinBackward:zme,joinDown:jme,joinForward:Bme,joinItemBackward:Vme,joinItemForward:Fme,joinTextblockBackward:Hme,joinTextblockForward:Ume,joinUp:Lme,keyboardShortcut:qme,lift:Zme,liftEmptyBlock:Wme,liftListItem:Kme,newlineInCode:Yme,resetAttributes:Jme,scrollIntoView:Xme,selectAll:Qme,selectNodeBackward:ege,selectNodeForward:tge,selectParentNode:nge,selectTextblockEnd:rge,selectTextblockStart:oge,setContent:ige,setMark:mge,setMeta:gge,setNode:yge,setNodeSelection:bge,setTextSelection:vge,sinkListItem:wge,splitBlock:xge,splitListItem:Sge,toggleList:kge,toggleMark:Cge,toggleNode:Ege,toggleWrap:Tge,undoInputRule:_ge,unsetAllMarks:Age,unsetMark:Mge,updateAttributes:Rge,wrapIn:Nge,wrapInList:Ige});const Pq=Mn.create({name:"commands",addCommands(){return{...Oge}}}),Dq=Mn.create({name:"drop",addProseMirrorPlugins(){return[new St({key:new Bt("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),$q=Mn.create({name:"editable",addProseMirrorPlugins(){return[new St({key:new Bt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Lq=new Bt("focusEvents"),jq=Mn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new St({key:Lq,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),zq=Mn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:p,parent:m}=f,y=f.parent.isTextblock&&p>0?a.doc.resolve(p-1):f,b=y.parent.type.spec.isolating,x=f.pos-f.parentOffset,S=b&&y.parent.childCount===1?x===f.pos:tt.atStart(c).from===p;return!u||!m.type.isTextblock||m.textContent.length||!S||S&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return mC()||Mq()?i:o},addProseMirrorPlugins(){return[new St({key:new Bt("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(b=>b.getMeta("composition")))return;const r=e.some(b=>b.docChanged)&&!t.doc.eq(n.doc),o=e.some(b=>b.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=t.selection,l=tt.atStart(t.doc).from,c=tt.atEnd(t.doc).to;if(i||!(s===l&&a===c)||!VO(n.doc))return;const p=n.tr,m=uC({state:n,transaction:p}),{commands:y}=new dC({editor:this.editor,state:m});if(y.clearNodes(),!!p.steps.length)return p}})]}}),Bq=Mn.create({name:"paste",addProseMirrorPlugins(){return[new St({key:new Bt("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),Vq=Mn.create({name:"tabindex",addProseMirrorPlugins(){return[new St({key:new Bt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var my=Object.freeze({__proto__:null,ClipboardTextSerializer:kq,Commands:Pq,Drop:Dq,Editable:$q,FocusEvents:jq,Keymap:zq,Paste:Bq,Tabindex:Vq,focusEventsPluginKey:Lq});class Sf{get name(){return this.node.type.name}constructor(t,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Sf(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Sf(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Sf(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const l=new Sf(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),t.push(new Sf(a,this.editor,o,o?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===t)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===t&&i.every(l=>n[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(t,n,r))))}),o}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}}const Pge=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Dge(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style",""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}let $ge=class extends ome{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Dge(Pge,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const r=vq(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(t){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(s))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var t,n;const o=[...this.options.enableCoreExtensions?[$q,kq.configure({blockSeparator:(n=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),Pq,jq,zq,Vq,Dq,Bq].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Nf(o,this)}createCommandManager(){this.commandManager=new dC({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let n;try{n=Hx(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=Hx(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Eq(n,this.options.autofocus);this.view=new RO(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)===null||t===void 0?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Af.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=t.getMeta("focus"),i=t.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:t}),i&&this.emit("blur",{editor:this,event:i.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Iq(this.state,t)}isActive(t,n){const r=typeof t=="string"?t:null,o=typeof t=="string"?n:t;return hge(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return LO(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n=`

`,textSerializers:r={}}=t||{};return cge(this.state.doc,{blockSeparator:n,textSerializers:{...Sq(this.schema),...r}})}get isEmpty(){return VO(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(t,n))||null}$nodes(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(t,n))||null}$pos(t){const n=this.state.doc.resolve(t);return new Sf(n,this)}get $doc(){return this.$pos(0)}};function vm(e){return new gd({find:e.find,handler:({state:t,range:n,match:r})=>{const o=Lt(e.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=t,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(BO(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(b=>b===e.type&&b!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const p=n.from+l+s.length;i.addMark(n.from+l,p,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}let Ql=class fR{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Lt(qe(this,"addOptions",{name:this.name}))),this.storage=Lt(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new fR(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>hC(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new fR(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Lt(qe(n,"addOptions",{name:n.name})),n.storage=Lt(qe(n,"addStorage",{name:n.name,options:n.options})),n}};class Lge{constructor(t,n,r){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,r,o,i,s,a,l;const{view:c}=this.editor,u=t.target,f=u.nodeType===3?(n=u.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(u)||!f)return;let p=0,m=0;if(this.dom!==f){const E=this.dom.getBoundingClientRect(),T=f.getBoundingClientRect(),A=(o=t.offsetX)!==null&&o!==void 0?o:(i=t.nativeEvent)===null||i===void 0?void 0:i.offsetX,M=(s=t.offsetY)!==null&&s!==void 0?s:(a=t.nativeEvent)===null||a===void 0?void 0:a.offsetY;p=T.x-E.x+A,m=T.y-E.y+M}const y=this.dom.cloneNode(!0);(l=t.dataTransfer)===null||l===void 0||l.setDragImage(y,p,m);const b=this.getPos();if(typeof b!="number")return;const x=We.create(c.state.doc,b),S=c.state.tr.setSelection(x);c.dispatch(S)}stopEvent(t){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const r=t.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const i=t.type.startsWith("drag"),s=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!i)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,u=!!this.node.type.spec.draggable,f=We.isSelectable(this.node),p=t.type==="copy",m=t.type==="paste",y=t.type==="cut",b=t.type==="mousedown";if(!u&&f&&i&&t.target===this.dom&&t.preventDefault(),u&&i&&!c&&t.target===this.dom)return t.preventDefault(),!1;if(u&&l&&!c&&b){const x=r.closest("[data-drag-handle]");x&&(this.dom===x||this.dom.contains(x))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||s||p||m||y||b&&f)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(mC()||Tq())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const n=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:n})}}function rh(e){return new fme({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:o})=>{const i=Lt(e.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),f=n.from+l.indexOf(a),p=f+a.length;if(BO(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(x=>x===e.type&&x!==y.mark.type)).filter(y=>y.to>f).length)return null;p<n.to&&s.delete(p,n.to),f>n.from&&s.delete(n.from+u,f),c=n.from+u+a.length,s.addMark(n.from+u,c,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}var Z1,jge=new Uint8Array(16);function zge(){if(!Z1&&(Z1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Z1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Z1(jge)}const Bge=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vge(e){return typeof e=="string"&&Bge.test(e)}var Ao=[];for(var w_=0;w_<256;++w_)Ao.push((w_+256).toString(16).substr(1));function Fge(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ao[e[t+0]]+Ao[e[t+1]]+Ao[e[t+2]]+Ao[e[t+3]]+"-"+Ao[e[t+4]]+Ao[e[t+5]]+"-"+Ao[e[t+6]]+Ao[e[t+7]]+"-"+Ao[e[t+8]]+Ao[e[t+9]]+"-"+Ao[e[t+10]]+Ao[e[t+11]]+Ao[e[t+12]]+Ao[e[t+13]]+Ao[e[t+14]]+Ao[e[t+15]]).toLowerCase();if(!Vge(n))throw TypeError("Stringified UUID is invalid");return n}function Fq(e,t,n){e=e||{};var r=e.random||(e.rng||zge)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Fge(r)}var Hge=class Hq{constructor(t){this.cache=new Map(t)}get(t){return this.cache.get(t)}set(t,n,r){t<0||this.cache.set(t,[n,r])}replace(t,n,r,o){this.remove(t),this.set(n,r,o)}remove(t){this.cache.delete(t)}invalidate(t){const n=new Hq(this.cache),r=t.mapping;return this.cache.forEach(([o,i],s)=>{if(s<0)return;const a=r.mapResult(s),l=t.doc.nodeAt(a.pos);if(a.deleted||!l?.eq(o))n.remove(s);else if(s!==a.pos){const c=i.map(u=>u.map(r,0,0)).filter(u=>u!=null);n.replace(s,a.pos,l,c)}}),n}};function Uge({parser:e,nodeTypes:t=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new Bt("prosemirror-highlight");return new St({key:r,state:{init(o,i){const s=new Hge,[a,l]=l6(i.doc,e,t,n,s);return{cache:s,decorations:a,promises:l}},apply:(o,i)=>{const s=i.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const u=i.decorations.map(o.mapping,o.doc),f=i.promises;return{cache:s,decorations:u,promises:f}}const[l,c]=l6(o.doc,e,t,n,s);return{cache:s,decorations:l,promises:c}}},view:o=>{const i=new Set,s=()=>{if(i.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const c=r.getState(o.state);for(const u of(l=c?.promises)!=null?l:[])i.add(u),u.then(()=>{i.delete(u),s()}).catch(()=>{i.delete(u)})};return a(),{update:()=>{a()}}},props:{decorations(o){var i;return(i=this.getState(o))==null?void 0:i.decorations}}})}function l6(e,t,n,r,o){const i=[],s=[];return e.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),u=o.get(l);if(u){const[f,p]=u;i.push(...p)}else{const f=t({content:a.textContent,language:c||void 0,pos:l,size:a.nodeSize});f&&Array.isArray(f)?(o.set(l,a,f),i.push(...f)):f instanceof Promise&&(o.remove(l),s.push(f))}}return!1}),[Rt.create(e,i),s]}function Gge(e,t){return function({content:r,language:o,pos:i,size:s}){var a;const l=[],{tokens:c,fg:u,bg:f,rootStyle:p}=e.codeToTokens(r,{lang:o,theme:e.getLoadedThemes()[0]}),m=p||(u&&f?`--prosemirror-highlight:${u};--prosemirror-highlight-bg:${f}`:"");if(m){const b=Gt.node(i,i+s,{style:m});l.push(b)}let y=i+1;for(const b of c){for(const x of b){const S=y+x.content.length,E=Gt.inline(y,S,{style:qge((a=x.htmlStyle)!=null?a:`color: ${x.color}`),class:"shiki"});l.push(E),y=S}y+=1}return l}}function qge(e){return typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t}:${n}`).join(";")}const Zge=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Wge=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Kge=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Yge=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Jge=$o.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[vm({find:Zge,type:this.type}),vm({find:Kge,type:this.type})]},addPasteRules(){return[rh({find:Wge,type:this.type}),rh({find:Yge,type:this.type})]}}),Xge=/(^|[^`])`([^`]+)`(?!`)/,Qge=/(^|[^`])`([^`]+)`(?!`)/g,eye=$o.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[vm({find:Xge,type:this.type})]},addPasteRules(){return[rh({find:Qge,type:this.type})]}}),tye=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,nye=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,rye=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,oye=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,iye=$o.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[vm({find:tye,type:this.type}),vm({find:rye,type:this.type})]},addPasteRules(){return[rh({find:nye,type:this.type}),rh({find:oye,type:this.type})]}}),sye=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,aye=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,lye=$o.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[vm({find:sye,type:this.type})]},addPasteRules(){return[rh({find:aye,type:this.type})]}}),cye=$o.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),uye=Ql.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",Cs(this.options.HTMLAttributes,e),0]}}),dye=Ql.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",Cs(this.options.HTMLAttributes,e),0]}});var hR,pR;if(typeof WeakMap<"u"){let e=new WeakMap;hR=t=>e.get(t),pR=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;hR=r=>{for(let o=0;o<e.length;o+=2)if(e[o]==r)return e[o+1]},pR=(r,o)=>(n==10&&(n=0),e[n++]=r,e[n++]=o)}var Yn=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let i=r+1,s=o+1;for(let a=1;i<this.width&&this.map[t+a]==n;a++)i++;for(let a=1;s<this.height&&this.map[t+this.width*a]==n;a++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(e);return t=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:s,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,!(o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s)&&t.push(s))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==e){let s=t+e*this.width;const a=(e+1)*this.width;for(;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}static get(e){return hR(e)||pR(e,fye(e))}};function fye(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=hye(e),n=e.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const f=e.child(c);u++;for(let y=0;;y++){for(;o<r.length&&r[o]!=0;)o++;if(y==f.childCount)break;const b=f.child(y),{colspan:x,rowspan:S,colwidth:E}=b.attrs;for(let T=0;T<S;T++){if(T+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:S-T});break}const A=o+T*t;for(let M=0;M<x;M++){r[A+M]==0?r[A+M]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:x-M});const R=E&&E[M];if(R){const O=(A+M)%t*2,I=s[O];I==null||I!=R&&s[O+1]==1?(s[O]=R,s[O+1]=1):I==R&&s[O+1]++}}}o+=x,u+=b.nodeSize}const p=(c+1)*t;let m=0;for(;o<p;)r[o++]==0&&m++;m&&(i||(i=[])).push({type:"missing",row:c,n:m}),u++}(t===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const a=new Yn(t,n,r,i);let l=!1;for(let c=0;!l&&c<s.length;c+=2)s[c]!=null&&s[c+1]<n&&(l=!0);return l&&pye(a,s,e),a}function hye(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let i=0;if(n)for(let s=0;s<r;s++){const a=e.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let s=0;s<o.childCount;s++){const a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=i:t!=i&&(t=Math.max(t,i))}return t}function pye(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%e.width,f=t[u*2];f!=null&&(!l.colwidth||l.colwidth[c]!=f)&&((a||(a=mye(l)))[c]=f)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function mye(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function ti(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var ed=new Bt("selectingCells");function Hm(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function gye(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function ec(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function FO(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=Hm(t.$head)||yye(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function yye(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function mR(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function bye(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function HO(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Uq(e,t,n){const r=e.node(-1),o=Yn.get(r),i=e.start(-1),s=o.nextCell(e.pos-i,t,n);return s==null?null:e.node(0).resolve(i+s)}function oh(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function Gq(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function vye(e,t,n){const r=ti(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var vn=class Pc extends tt{constructor(t,n=t){const r=t.node(-1),o=Yn.get(r),i=t.start(-1),s=o.rectBetween(t.pos-i,n.pos-i),a=t.node(0),l=o.cellsInRect(s).filter(u=>u!=n.pos-i);l.unshift(n.pos-i);const c=l.map(u=>{const f=r.nodeAt(u);if(!f)throw RangeError(`No cell with offset ${u} found`);const p=i+u+1;return new CG(a.resolve(p),a.resolve(p+f.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(mR(r)&&mR(o)&&HO(r,o)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?Pc.rowSelection(r,o):i&&this.isColSelection()?Pc.colSelection(r,o):new Pc(r,o)}return Ve.between(r,o)}content(){const t=this.$anchorCell.node(-1),n=Yn.get(t),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},s=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let u=l*n.width+o.left,f=o.left;f<o.right;f++,u++){const p=n.map[u];if(i[p])continue;i[p]=!0;const m=n.findCell(p);let y=t.nodeAt(p);if(!y)throw RangeError(`No cell with offset ${p} found`);const b=o.left-m.left,x=m.right-o.right;if(b>0||x>0){let S=y.attrs;if(b>0&&(S=oh(S,0,b)),x>0&&(S=oh(S,S.colspan-x,x)),m.left<o.left){if(y=y.type.createAndFill(S),!y)throw RangeError(`Could not create cell with attrs ${JSON.stringify(S)}`)}else y=y.type.create(S,y.content)}if(m.top<o.top||m.bottom>o.bottom){const S={...y.attrs,rowspan:Math.min(m.bottom,o.bottom)-Math.max(m.top,o.top)};m.top<o.top?y=y.type.createAndFill(S):y=y.type.create(S,y.content)}c.push(y)}s.push(t.child(l).copy(pe.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:s;return new Te(pe.from(a),1,1)}replace(t,n=Te.empty){const r=t.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){const{$from:a,$to:l}=o[s],c=t.mapping.slice(r);t.replace(c.map(a.pos),c.map(l.pos),s?Te.empty:n)}const i=tt.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);i&&t.setSelection(i)}replaceWith(t,n){this.replace(t,new Te(pe.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=Yn.get(n),o=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let s=0;s<i.length;s++)t(n.nodeAt(i[s]),o+i[s])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),o=Yn.get(r),i=t.start(-1),s=o.findCell(t.pos-i),a=o.findCell(n.pos-i),l=t.node(0);return s.top<=a.top?(s.top>0&&(t=l.resolve(i+o.map[s.left])),a.bottom<o.height&&(n=l.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(i+o.map[a.left])),s.bottom<o.height&&(t=l.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))),new Pc(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=Yn.get(t),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(o,i)>0)return!1;const s=o+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==n.width}eq(t){return t instanceof Pc&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),o=Yn.get(r),i=t.start(-1),s=o.findCell(t.pos-i),a=o.findCell(n.pos-i),l=t.node(0);return s.left<=a.left?(s.left>0&&(t=l.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(n=l.resolve(i+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(t=l.resolve(i+o.map[o.width*(s.top+1)-1]))),new Pc(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new Pc(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new Pc(t.resolve(n),t.resolve(r))}getBookmark(){return new wye(this.$anchorCell.pos,this.$headCell.pos)}};vn.prototype.visible=!1;tt.jsonID("cell",vn);var wye=class qq{constructor(t,n){this.anchor=t,this.head=n}map(t){return new qq(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&HO(n,r)?new vn(n,r):tt.near(r,1)}};function xye(e){if(!(e.selection instanceof vn))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(Gt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Rt.create(e.doc,t)}function Sye({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(let i=t.depth;i>=0&&!(t.before(i+1)>t.start(i));i--,r--);return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}function kye({$from:e,$to:t}){let n,r;for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&t.parentOffset===0}function Cye(e,t,n){const r=(t||e).selection,o=(t||e).doc;let i,s;if(r instanceof We&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=vn.create(o,r.from);else if(s=="row"){const a=o.resolve(r.from+1);i=vn.rowSelection(a,a)}else if(!n){const a=Yn.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];i=vn.create(o,l+1,c)}}else r instanceof Ve&&Sye(r)?i=Ve.create(o,r.from):r instanceof Ve&&kye(r)&&(i=Ve.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}var Zq=new Bt("fix-tables");function Wq(e,t,n,r){const o=e.childCount,i=t.childCount;e:for(let s=0,a=0;s<i;s++){const l=t.child(s);for(let c=a,u=Math.min(o,s+3);c<u;c++)if(e.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&e.child(a).sameMarkup(l)?Wq(e.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Eye(e,t){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=Tye(e,o,i,n))};return t?t.doc!=e.doc&&Wq(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Tye(e,t,n,r){const o=Yn.get(t);if(!o.problems)return r;r||(r=e.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=t.nodeAt(c.pos);if(!u)continue;const f=u.attrs;for(let p=0;p<f.rowspan;p++)i[c.row+p]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,oh(f,f.colspan-c.n,c.n))}else if(c.type=="missing")i[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=t.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=t.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+t.nodeSize)}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(s==null&&(s=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=t.child(l),f=c+u.nodeSize,p=i[l];if(p>0){let m="cell";u.firstChild&&(m=u.firstChild.type.spec.tableRole);const y=[];for(let x=0;x<p;x++){const S=ti(e.schema)[m].createAndFill();S&&y.push(S)}const b=(l==0||s==l-1)&&a==l?c+1:f-1;r.insert(r.mapping.map(b),y)}c=f}return r.setMeta(Zq,{fixTables:!0})}function tc(e){const t=e.selection,n=FO(e),r=n.node(-1),o=n.start(-1),i=Yn.get(r);return{...t instanceof vn?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function Kq(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;vye(t,r,o+i)&&(i=o==0||o==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+o;if(o>0&&o<t.width&&t.map[a-1]==t.map[a]){const l=t.map[a],c=r.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,Gq(c.attrs,o-t.colCount(l))),s+=c.attrs.rowspan-1}else{const l=i==null?ti(r.type.schema).cell:r.nodeAt(t.map[a+i]).type,c=t.positionAt(s,o,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function _ye(e,t){if(!ec(e))return!1;if(t){const n=tc(e);t(Kq(e.tr,n,n.left))}return!0}function Aye(e,t){if(!ec(e))return!1;if(t){const n=tc(e);t(Kq(e.tr,n,n.right))}return!0}function Mye(e,{map:t,table:n,tableStart:r},o){const i=e.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+o,l=t.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&t.map[a-1]==l||o<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(i).map(r+l),null,oh(u,o-t.colCount(l)));else{const f=e.mapping.slice(i).map(r+l);e.delete(f,f+c.nodeSize)}s+=u.rowspan}}function Rye(e,t){if(!ec(e))return!1;if(t){const n=tc(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;Mye(r,n,o),o!=n.left;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Yn.get(i)}t(r)}return!0}function Nye(e,t,n){var r;const o=ti(t.type.schema).header_cell;for(let i=0;i<e.width;i++)if(((r=t.nodeAt(e.map[i+n*e.width]))==null?void 0:r.type)!=o)return!1;return!0}function Yq(e,{map:t,tableStart:n,table:r},o){var i;let s=n;for(let c=0;c<o;c++)s+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;Nye(t,r,o+l)&&(l=o==0||o==t.height?null:0);for(let c=0,u=t.width*o;c<t.width;c++,u++)if(o>0&&o<t.height&&t.map[u]==t.map[u-t.width]){const f=t.map[u],p=r.nodeAt(f).attrs;e.setNodeMarkup(n+f,null,{...p,rowspan:p.rowspan+1}),c+=p.colspan-1}else{const f=l==null?ti(r.type.schema).cell:(i=r.nodeAt(t.map[u+l*t.width]))==null?void 0:i.type,p=f?.createAndFill();p&&a.push(p)}return e.insert(s,ti(r.type.schema).row.create(null,a)),e}function Iye(e,t){if(!ec(e))return!1;if(t){const n=tc(e);t(Yq(e.tr,n,n.top))}return!0}function Oye(e,t){if(!ec(e))return!1;if(t){const n=tc(e);t(Yq(e.tr,n,n.bottom))}return!0}function Pye(e,{map:t,table:n,tableStart:r},o){let i=0;for(let c=0;c<o;c++)i+=n.child(c).nodeSize;const s=i+n.child(o).nodeSize,a=e.mapping.maps.length;e.delete(i+r,s+r);const l=new Set;for(let c=0,u=o*t.width;c<t.width;c++,u++){const f=t.map[u];if(!l.has(f)){if(l.add(f),o>0&&f==t.map[u-t.width]){const p=n.nodeAt(f).attrs;e.setNodeMarkup(e.mapping.slice(a).map(f+r),null,{...p,rowspan:p.rowspan-1}),c+=p.colspan-1}else if(o<t.height&&f==t.map[u+t.width]){const p=n.nodeAt(f),m=p.attrs,y=p.type.create({...m,rowspan:p.attrs.rowspan-1},p.content),b=t.positionAt(o+1,c,n);e.insert(e.mapping.slice(a).map(r+b),y),c+=m.colspan-1}}}}function Dye(e,t){if(!ec(e))return!1;if(t){const n=tc(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;Pye(r,n,o),o!=n.top;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Yn.get(n.table)}t(r)}return!0}function c6(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function $ye({width:e,height:t,map:n},r){let o=r.top*e+r.left,i=o,s=(r.bottom-1)*e+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<e&&n[a]==n[a+1])return!0;i+=e,a+=e}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-e]||r.bottom<t&&n[s]==n[s+e])return!0;o++,s++}return!1}function Lye(e,t){const n=e.selection;if(!(n instanceof vn)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=tc(e),{map:o}=r;if($ye(o,r))return!1;if(t){const i=e.tr,s={};let a=pe.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let f=r.left;f<r.right;f++){const p=o.map[u*o.width+f],m=r.table.nodeAt(p);if(!(s[p]||!m))if(s[p]=!0,l==null)l=p,c=m;else{c6(m)||(a=a.append(m.content));const y=i.mapping.map(p+r.tableStart);i.delete(y,y+m.nodeSize)}}if(l==null||c==null)return!0;if(i.setNodeMarkup(l+r.tableStart,null,{...Gq(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,f=c6(c)?l+1:u;i.replaceWith(f+r.tableStart,u+r.tableStart,a)}i.setSelection(new vn(i.doc.resolve(l+r.tableStart))),t(i)}return!0}function jye(e,t){const n=ti(e.schema);return zye(({node:r})=>n[r.type.spec.tableRole])(e,t)}function zye(e){return(t,n)=>{var r;const o=t.selection;let i,s;if(o instanceof vn){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=gye(o.$from),!i)return!1;s=(r=Hm(o.$from))==null?void 0:r.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=tc(t),f=t.tr;for(let m=0;m<u.right-u.left;m++)l.push(c?{...a,colwidth:c&&c[m]?[c[m]]:null}:a);let p;for(let m=u.top;m<u.bottom;m++){let y=u.map.positionAt(m,u.left,u.table);m==u.top&&(y+=i.nodeSize);for(let b=u.left,x=0;b<u.right;b++,x++)b==u.left&&m==u.top||f.insert(p=f.mapping.map(y+u.tableStart,1),e({node:i,row:m,col:b}).createAndFill(l[x]))}f.setNodeMarkup(s,e({node:i,row:u.top,col:u.left}),l[0]),o instanceof vn&&f.setSelection(new vn(f.doc.resolve(o.$anchorCell.pos),p?f.doc.resolve(p):void 0)),n(f)}return!0}}function Bye(e){return function(t,n){if(!ec(t))return!1;if(n){const r=ti(t.schema),o=tc(t),i=t.tr,s=o.map.cellsInRect(e=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:e=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(l=>o.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length==0)for(let l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function u6(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let o=0;o<r.length;o++){const i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function UO(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?Bye(e):function(n,r){if(!ec(n))return!1;if(r){const o=ti(n.schema),i=tc(n),s=n.tr,a=u6("row",i,o),l=u6("column",i,o),u=(e==="column"?a:e==="row"?l:!1)?1:0,f=e=="column"?{left:0,top:u,right:1,bottom:i.map.height}:e=="row"?{left:u,top:0,right:i.map.width,bottom:1}:i,p=e=="column"?l?o.cell:o.header_cell:e=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(f).forEach(m=>{const y=m+i.tableStart,b=s.doc.nodeAt(y);b&&s.setNodeMarkup(y,p,b.attrs)}),r(s)}return!0}}UO("row",{useDeprecatedLogic:!0});UO("column",{useDeprecatedLogic:!0});UO("cell",{useDeprecatedLogic:!0});function Vye(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,o=e.before();r>=0;r--){const i=e.node(-1).child(r),s=i.lastChild;if(s)return o-1-s.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),o=e.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function d6(e){return function(t,n){if(!ec(t))return!1;const r=Vye(FO(t),e);if(r==null)return!1;if(n){const o=t.doc.resolve(r);n(t.tr.setSelection(Ve.between(o,bye(o))).scrollIntoView())}return!0}}function W1(e,t){const n=e.selection;if(!(n instanceof vn))return!1;if(t){const r=e.tr,o=ti(e.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new Te(o,0,0))}),r.docChanged&&t(r)}return!0}function Fye(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.child(0).type.spec.tableRole=="table");)n--,r--,t=t.child(0).content;const o=t.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let l=0;l<t.childCount;l++){let c=t.child(l).content;const u=l?0:Math.max(0,n-1),f=l<t.childCount-1?0:Math.max(0,r-1);(u||f)&&(c=gR(ti(s).row,new Te(c,u,f)).content),a.push(c)}else if(i=="cell"||i=="header_cell")a.push(n||r?gR(ti(s).row,new Te(t,n,r)).content:t);else return null;return Hye(s,a)}function Hye(e,t){const n=[];for(let o=0;o<t.length;o++){const i=t[o];for(let s=i.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=i.child(s).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(pe.empty),n[o]<r){const i=ti(e).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);t[o]=t[o].append(pe.from(s))}return{height:t.length,width:r,rows:t}}function gR(e,t){const n=e.createAndFill();return new Nd(n).replace(0,n.content.size,t).doc}function Uye({width:e,height:t,rows:n},r,o){if(e!=r){const i=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=i[a]||0,f=0;u<r;f++){let p=l.child(f%l.childCount);u+p.attrs.colspan>r&&(p=p.type.createChecked(oh(p.attrs,p.attrs.colspan,u+p.attrs.colspan-r),p.content)),c.push(p),u+=p.attrs.colspan;for(let m=1;m<p.attrs.rowspan;m++)i[a+m]=(i[a+m]||0)+p.attrs.colspan}s.push(pe.from(c))}n=s,e=r}if(t!=o){const i=[];for(let s=0,a=0;s<o;s++,a++){const l=[],c=n[a%t];for(let u=0;u<c.childCount;u++){let f=c.child(u);s+f.attrs.rowspan>o&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,o-f.attrs.rowspan)},f.content)),l.push(f)}i.push(pe.from(l))}n=i,t=o}return{width:e,height:t,rows:n}}function Gye(e,t,n,r,o,i,s){const a=e.doc.type.schema,l=ti(a);let c,u;if(o>t.width)for(let f=0,p=0;f<t.height;f++){const m=n.child(f);p+=m.nodeSize;const y=[];let b;m.lastChild==null||m.lastChild.type==l.cell?b=c||(c=l.cell.createAndFill()):b=u||(u=l.header_cell.createAndFill());for(let x=t.width;x<o;x++)y.push(b);e.insert(e.mapping.slice(s).map(p-1+r),y)}if(i>t.height){const f=[];for(let y=0,b=(t.height-1)*t.width;y<Math.max(t.width,o);y++){const x=y>=t.width?!1:n.nodeAt(t.map[b+y]).type==l.header_cell;f.push(x?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const p=l.row.create(null,pe.from(f)),m=[];for(let y=t.height;y<i;y++)m.push(p);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),m)}return!!(c||u)}function f6(e,t,n,r,o,i,s,a){if(s==0||s==t.height)return!1;let l=!1;for(let c=o;c<i;c++){const u=s*t.width+c,f=t.map[u];if(t.map[u-t.width]==f){l=!0;const p=n.nodeAt(f),{top:m,left:y}=t.findCell(f);e.setNodeMarkup(e.mapping.slice(a).map(f+r),null,{...p.attrs,rowspan:s-m}),e.insert(e.mapping.slice(a).map(t.positionAt(s,y,n)),p.type.createAndFill({...p.attrs,rowspan:m+p.attrs.rowspan-s})),c+=p.attrs.colspan-1}}return l}function h6(e,t,n,r,o,i,s,a){if(s==0||s==t.width)return!1;let l=!1;for(let c=o;c<i;c++){const u=c*t.width+s,f=t.map[u];if(t.map[u-1]==f){l=!0;const p=n.nodeAt(f),m=t.colCount(f),y=e.mapping.slice(a).map(f+r);e.setNodeMarkup(y,null,oh(p.attrs,s-m,p.attrs.colspan-(s-m))),e.insert(y+p.nodeSize,p.type.createAndFill(oh(p.attrs,0,s-m))),c+=p.attrs.rowspan-1}}return l}function p6(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let s=Yn.get(i);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,f=e.tr;let p=0;function m(){if(i=n?f.doc.nodeAt(n-1):f.doc,!i)throw new Error("No table found");s=Yn.get(i),p=f.mapping.maps.length}Gye(f,s,i,n,c,u,p)&&m(),f6(f,s,i,n,l,c,a,p)&&m(),f6(f,s,i,n,l,c,u,p)&&m(),h6(f,s,i,n,a,u,l,p)&&m(),h6(f,s,i,n,a,u,c,p)&&m();for(let y=a;y<u;y++){const b=s.positionAt(y,l,i),x=s.positionAt(y,c,i);f.replace(f.mapping.slice(p).map(b+n),f.mapping.slice(p).map(x+n),new Te(o.rows[y-a],0,0))}m(),f.setSelection(new vn(f.doc.resolve(n+s.positionAt(a,l,i)),f.doc.resolve(n+s.positionAt(u-1,c-1,i)))),t(f)}var qye=NO({ArrowLeft:K1("horiz",-1),ArrowRight:K1("horiz",1),ArrowUp:K1("vert",-1),ArrowDown:K1("vert",1),"Shift-ArrowLeft":Y1("horiz",-1),"Shift-ArrowRight":Y1("horiz",1),"Shift-ArrowUp":Y1("vert",-1),"Shift-ArrowDown":Y1("vert",1),Backspace:W1,"Mod-Backspace":W1,Delete:W1,"Mod-Delete":W1});function nx(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function K1(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof vn)return nx(n,r,tt.near(i.$headCell,t));if(e!="horiz"&&!i.empty)return!1;const s=Jq(o,e,t);if(s==null)return!1;if(e=="horiz")return nx(n,r,tt.near(n.doc.resolve(i.head+t),t));{const a=n.doc.resolve(s),l=Uq(a,e,t);let c;return l?c=tt.near(l,1):t<0?c=tt.near(n.doc.resolve(a.before(-1)),-1):c=tt.near(n.doc.resolve(a.after(-1)),1),nx(n,r,c)}}}function Y1(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof vn)s=i;else{const l=Jq(o,e,t);if(l==null)return!1;s=new vn(n.doc.resolve(l))}const a=Uq(s.$headCell,e,t);return a?nx(n,r,new vn(s.$anchorCell,a)):!1}}function Zye(e,t){const n=e.state.doc,r=Hm(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new vn(r))),!0):!1}function Wye(e,t,n){if(!ec(e.state))return!1;let r=Fye(n);const o=e.state.selection;if(o instanceof vn){r||(r={width:1,height:1,rows:[pe.from(gR(ti(e.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=Yn.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=Uye(r,a.right-a.left,a.bottom-a.top),p6(e.state,e.dispatch,s,a,r),!0}else if(r){const i=FO(e.state),s=i.start(-1);return p6(e.state,e.dispatch,s,Yn.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function Kye(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=m6(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof vn)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(o=Hm(e.state.selection.$anchor))!=null&&((n=x_(e,t))==null?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(l,c){let u=x_(e,c);const f=ed.getState(e.state)==null;if(!u||!HO(l,u))if(f)u=l;else return;const p=new vn(l,u);if(f||!e.state.selection.eq(p)){const m=e.state.tr.setSelection(p);f&&m.setMeta(ed,l.pos),e.dispatch(m)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),ed.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(ed,-1))}function a(l){const c=l,u=ed.getState(e.state);let f;if(u!=null)f=e.state.doc.resolve(u);else if(m6(e,c.target)!=r&&(f=x_(e,t),!f))return s();f&&i(f,c)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function Jq(e,t,n){if(!(e.state.selection instanceof Ve))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const a=r.before(o),l=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function m6(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function x_(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?Hm(e.state.doc.resolve(n.pos)):null}var Xq=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),yR(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,yR(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function yR(e,t,n,r,o,i){var s;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let f=0,p=0;f<u.childCount;f++){const{colspan:m,colwidth:y}=u.child(f).attrs;for(let b=0;b<m;b++,p++){const x=o==p?i:y&&y[b],S=x?x+"px":"";if(a+=x||r,x||(l=!1),c)c.style.width!=S&&(c.style.width=S),c=c.nextSibling;else{const E=document.createElement("col");E.style.width=S,t.appendChild(E)}}}for(;c;){const f=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=f}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var vs=new Bt("tableColumnResizing");function Yye({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=Xq,lastColumnResizable:o=!0}={}){const i=new St({key:vs,state:{init(s,a){var l,c;const u=(c=(l=i.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,f=ti(a.schema).table.name;return r&&u&&(u[f]=(p,m)=>new r(p,n,m)),new Jye(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=vs.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{Xye(s,a,e,o)},mouseleave:s=>{Qye(s)},mousedown:(s,a)=>{e0e(s,a,t,n)}},decorations:s=>{const a=vs.getState(s);if(a&&a.activeHandle>-1)return i0e(s,a.activeHandle)},nodeViews:{}}});return i}var Jye=class rx{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){const n=this,r=t.getMeta(vs);if(r&&r.setHandle!=null)return new rx(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new rx(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let o=t.mapping.map(n.activeHandle,-1);return mR(t.doc.resolve(o))||(o=-1),new rx(o,n.dragging)}return n}};function Xye(e,t,n,r){if(!e.editable)return;const o=vs.getState(e.state);if(o&&!o.dragging){const i=n0e(t.target);let s=-1;if(i){const{left:a,right:l}=i.getBoundingClientRect();t.clientX-a<=n?s=g6(e,t,"left",n):l-t.clientX<=n&&(s=g6(e,t,"right",n))}if(s!=o.activeHandle){if(!r&&s!==-1){const a=e.state.doc.resolve(s),l=a.node(-1),c=Yn.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}Qq(e,s)}}}function Qye(e){if(!e.editable)return;const t=vs.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Qq(e,-1)}function e0e(e,t,n,r){var o;if(!e.editable)return!1;const i=(o=e.dom.ownerDocument.defaultView)!=null?o:window,s=vs.getState(e.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=e.state.doc.nodeAt(s.activeHandle),l=t0e(e,s.activeHandle,a.attrs);e.dispatch(e.state.tr.setMeta(vs,{setDragging:{startX:t.clientX,startWidth:l}}));function c(f){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",u);const p=vs.getState(e.state);p?.dragging&&(r0e(e,p.activeHandle,y6(p.dragging,f,n)),e.dispatch(e.state.tr.setMeta(vs,{setDragging:null})))}function u(f){if(!f.which)return c(f);const p=vs.getState(e.state);if(p&&p.dragging){const m=y6(p.dragging,f,n);b6(e,p.activeHandle,m,r)}}return b6(e,s.activeHandle,l,r),i.addEventListener("mouseup",c),i.addEventListener("mousemove",u),t.preventDefault(),!0}function t0e(e,t,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=e.domAtPos(t);let a=i.node.childNodes[i.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function n0e(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function g6(e,t,n,r){const o=n=="right"?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;const{pos:s}=i,a=Hm(e.state.doc.resolve(s));if(!a)return-1;if(n=="right")return a.pos;const l=Yn.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function y6(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Qq(e,t){e.dispatch(e.state.tr.setMeta(vs,{setHandle:t}))}function r0e(e,t,n){const r=e.state.doc.resolve(t),o=r.node(-1),i=Yn.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<i.height;c++){const u=c*i.width+a;if(c&&i.map[u]==i.map[u-i.width])continue;const f=i.map[u],p=o.nodeAt(f).attrs,m=p.colspan==1?0:a-i.colCount(f);if(p.colwidth&&p.colwidth[m]==n)continue;const y=p.colwidth?p.colwidth.slice():o0e(p.colspan);y[m]=n,l.setNodeMarkup(s+f,null,{...p,colwidth:y})}l.docChanged&&e.dispatch(l)}function b6(e,t,n,r){const o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=Yn.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let l=e.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&yR(i,l.firstChild,l,r,a,n)}function o0e(e){return Array(e).fill(0)}function i0e(e,t){var n;const r=[],o=e.doc.resolve(t),i=o.node(-1);if(!i)return Rt.empty;const s=Yn.get(i),a=o.start(-1),l=s.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const u=l+c*s.width;if((l==s.width-1||s.map[u]!=s.map[u+1])&&(c==0||s.map[u]!=s.map[u-s.width])){const f=s.map[u],p=a+f+i.nodeAt(f).nodeSize-1,m=document.createElement("div");m.className="column-resize-handle",(n=vs.getState(e))!=null&&n.dragging&&r.push(Gt.node(a+f,a+f+i.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(Gt.widget(p,m))}}return Rt.create(e.doc,r)}function s0e({allowTableNodeSelection:e=!1}={}){return new St({key:ed,state:{init(){return null},apply(t,n){const r=t.getMeta(ed);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:o,pos:i}=t.mapping.mapResult(n);return o?null:i}},props:{decorations:xye,handleDOMEvents:{mousedown:Kye},createSelectionBetween(t){return ed.getState(t.state)!=null?t.state.selection:null},handleTripleClick:Zye,handleKeyDown:qye,handlePaste:Wye},appendTransaction(t,n,r){return Cye(r,Eye(r,n),e)}})}class yr extends tt{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return yr.valid(r)?new yr(r):tt.near(r)}content(){return Te.empty}eq(t){return t instanceof yr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new yr(t.resolve(n.pos))}getBookmark(){return new GO(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!a0e(t)||!l0e(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(t.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&yr.valid(t))return t;let o=t.pos,i=null;for(let s=t.depth;;s--){let a=t.node(s);if(n>0?t.indexAfter(s)<a.childCount:t.index(s)>0){i=a.child(n>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;o+=n;let l=t.doc.resolve(o);if(yr.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!We.isSelectable(i)){t=t.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=t.doc.resolve(o);if(yr.valid(a))return a}return null}}}yr.prototype.visible=!1;yr.findFrom=yr.findGapCursorFrom;tt.jsonID("gapcursor",yr);class GO{constructor(t){this.pos=t}map(t){return new GO(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return yr.valid(n)?new yr(n):tt.near(n)}}function a0e(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function l0e(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function c0e(){return new St({props:{decorations:h0e,createSelectionBetween(e,t,n){return t.pos==n.pos&&yr.valid(n)?new yr(n):null},handleClick:d0e,handleKeyDown:u0e,handleDOMEvents:{beforeinput:f0e}}})}const u0e=NO({ArrowLeft:J1("horiz",-1),ArrowRight:J1("horiz",1),ArrowUp:J1("vert",-1),ArrowDown:J1("vert",1)});function J1(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,o,i){let s=r.selection,a=t>0?s.$to:s.$from,l=s.empty;if(s instanceof Ve){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=yr.findGapCursorFrom(a,t,l);return c?(o&&o(r.tr.setSelection(new yr(c))),!0):!1}}function d0e(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!yr.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&We.isSelectable(e.state.doc.nodeAt(o.inside))?!1:(e.dispatch(e.state.tr.setSelection(new yr(r))),!0)}function f0e(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof yr))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=pe.empty;for(let s=r.length-1;s>=0;s--)o=pe.from(r[s].createAndFill(null,o));let i=e.state.tr.replace(n.pos,n.pos,new Te(o,0,0));return i.setSelection(Ve.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function h0e(e){if(!(e.selection instanceof yr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Rt.create(e.doc,[Gt.widget(e.selection.head,t,{key:"gapcursor"})])}const p0e=Mn.create({name:"gapCursor",addProseMirrorPlugins(){return[c0e()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Lt(qe(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}});var Gx=200,vo=function(){};vo.prototype.append=function(t){return t.length?(t=vo.from(t),!this.length&&t||t.length<Gx&&this.leafAppend(t)||this.length<Gx&&t.leafPrepend(this)||this.appendInner(t)):this};vo.prototype.prepend=function(t){return t.length?vo.from(t).append(this):this};vo.prototype.appendInner=function(t){return new m0e(this,t)};vo.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?vo.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};vo.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};vo.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};vo.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(t(i,s))},n,r),o};vo.from=function(t){return t instanceof vo?t:t&&t.length?new eZ(t):vo.empty};var eZ=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new t(this.values.slice(o,i))},t.prototype.getInner=function(o){return this.values[o]},t.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(o){if(this.length+o.length<=Gx)return new t(this.values.concat(o.flatten()))},t.prototype.leafPrepend=function(o){if(this.length+o.length<=Gx)return new t(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(vo);vo.empty=new eZ([]);var m0e=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},t.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},t.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new t(this.left,o)},t.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new t(o,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(vo);const g0e=500;let N0=class Op{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=t.tr,a,l,c=[],u=[];return this.items.forEach((f,p)=>{if(!f.step){o||(o=this.remapping(r,p+1),i=o.maps.length),i--,u.push(f);return}if(o){u.push(new Bu(f.map));let m=f.step.map(o.slice(i)),y;m&&s.maybeStep(m).doc&&(y=s.mapping.maps[s.mapping.maps.length-1],c.push(new Bu(y,void 0,void 0,c.length+u.length))),i--,y&&o.appendMap(y,i)}else s.maybeStep(f.step);if(f.selection)return a=o?f.selection.map(o.slice(i)):f.selection,l=new Op(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(t,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let f=t.steps[u].invert(t.docs[u]),p=new Bu(t.mapping.maps[u],f,n),m;(m=l&&l.merge(p))&&(p=m,u?i.pop():a=a.slice(0,a.length-1)),i.push(p),n&&(s++,n=void 0),o||(l=p)}let c=s-r.depth;return c>b0e&&(a=y0e(a,c),s-=c),new Op(a.append(i),s)}remapping(t,n){let r=new Qf;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=t?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},t,n),r}addMaps(t){return this.eventCount==0?this:new Op(this.items.append(t.map(n=>new Bu(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},o);let l=n;this.items.forEach(p=>{let m=i.getMirror(--l);if(m==null)return;s=Math.min(s,m);let y=i.maps[m];if(p.step){let b=t.steps[m].invert(t.docs[m]),x=p.selection&&p.selection.map(i.slice(l+1,m));x&&a++,r.push(new Bu(y,b,x))}else r.push(new Bu(y))},o);let c=[];for(let p=n;p<s;p++)c.push(new Bu(i.maps[p]));let u=this.items.slice(0,o).append(c).append(r),f=new Op(u,a);return f.emptyItemCount()>g0e&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=t)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let f=new Bu(c.invert(),l,u),p,m=o.length-1;(p=o.length&&o[m].merge(f))?o[m]=p:o.push(f)}}else s.map&&r--},this.items.length,0),new Op(vo.from(o.reverse()),i)}};N0.empty=new N0(vo.empty,0);function y0e(e,t){let n;return e.forEach((r,o)=>{if(r.selection&&t--==0)return n=o,!1}),e.slice(n)}let Bu=class tZ{constructor(t,n,r,o){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=o}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new tZ(n.getMap().invert(),n,this.selection)}}};class Yu{constructor(t,n,r,o,i){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const b0e=20;function v0e(e,t,n,r){let o=n.getMeta(qf),i;if(o)return o.historyState;n.getMeta(S0e)&&(e=new Yu(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(s&&s.getMeta(qf))return s.getMeta(qf).redo?new Yu(e.done.addTransform(n,void 0,r,ox(t)),e.undone,v6(n.mapping.maps),e.prevTime,e.prevComposition):new Yu(e.done,e.undone.addTransform(n,void 0,r,ox(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!s&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!w0e(n,e.prevRanges)),c=s?S_(e.prevRanges,n.mapping):v6(n.mapping.maps);return new Yu(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,ox(t)),N0.empty,c,n.time,a??e.prevComposition)}else return(i=n.getMeta("rebased"))?new Yu(e.done.rebased(n,i),e.undone.rebased(n,i),S_(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Yu(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),S_(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function w0e(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<t.length;i+=2)r<=t[i+1]&&o>=t[i]&&(n=!0)}),n}function v6(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,o,i,s)=>t.push(i,s));return t}function S_(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function x0e(e,t,n){let r=ox(t),o=qf.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),l=new Yu(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(qf,{redo:n,historyState:l})}let k_=!1,w6=null;function ox(e){let t=e.plugins;if(w6!=t){k_=!1,w6=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){k_=!0;break}}return k_}const qf=new Bt("history"),S0e=new Bt("closeHistory");function k0e(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new St({key:qf,state:{init(){return new Yu(N0.empty,N0.empty,null,0,-1)},apply(t,n,r){return v0e(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,o=r=="historyUndo"?qO:r=="historyRedo"?ZO:null;return o?(n.preventDefault(),o(t.state,t.dispatch)):!1}}}})}function nZ(e,t){return(n,r)=>{let o=qf.getState(n);if(!o||(e?o.undone:o.done).eventCount==0)return!1;if(r){let i=x0e(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}const qO=nZ(!1,!0),ZO=nZ(!0,!0),C0e=Mn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>qO(e,t),redo:()=>({state:e,dispatch:t})=>ZO(e,t)}},addProseMirrorPlugins(){return[k0e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),E0e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",T0e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",bR="numeric",vR="ascii",wR="alpha",Wy="asciinumeric",Iy="alphanumeric",xR="domain",rZ="emoji",_0e="scheme",A0e="slashscheme",C_="whitespace";function M0e(e,t){return e in t||(t[e]=[]),t[e]}function If(e,t,n){t[bR]&&(t[Wy]=!0,t[Iy]=!0),t[vR]&&(t[Wy]=!0,t[wR]=!0),t[Wy]&&(t[Iy]=!0),t[wR]&&(t[Iy]=!0),t[Iy]&&(t[xR]=!0),t[rZ]&&(t[xR]=!0);for(const r in t){const o=M0e(r,n);o.indexOf(e)<0&&o.push(e)}}function R0e(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Oi(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Oi.groups={};Oi.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const o=t.jr[r][0],i=t.jr[r][1];if(i&&o.test(e))return i}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr(e,t,n,r){r=r||Oi.groups;let o;return t&&t.j?o=t:(o=new Oi(t),n&&r&&If(t,n,r)),this.jr.push([e,o]),o},ts(e,t,n,r){let o=this;const i=e.length;if(!i)return o;for(let s=0;s<i-1;s++)o=o.tt(e[s]);return o.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||Oi.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const i=t;let s,a=o.go(e);if(a?(s=new Oi,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Oi,i){if(r)if(s.t&&typeof s.t=="string"){const l=Object.assign(R0e(s.t,r),n);If(i,l,r)}else n&&If(i,n,r);s.t=i}return o.j[e]=s,s}};const _t=(e,t,n,r,o)=>e.ta(t,n,r,o),hr=(e,t,n,r,o)=>e.tr(t,n,r,o),x6=(e,t,n,r,o)=>e.ts(t,n,r,o),_e=(e,t,n,r,o)=>e.tt(t,n,r,o),Dc="WORD",SR="UWORD",oZ="ASCIINUMERICAL",iZ="ALPHANUMERICAL",I0="LOCALHOST",kR="TLD",CR="UTLD",ix="SCHEME",Pp="SLASH_SCHEME",WO="NUM",ER="WS",KO="NL",Ky="OPENBRACE",Yy="CLOSEBRACE",qx="OPENBRACKET",Zx="CLOSEBRACKET",Wx="OPENPAREN",Kx="CLOSEPAREN",Yx="OPENANGLEBRACKET",Jx="CLOSEANGLEBRACKET",Xx="FULLWIDTHLEFTPAREN",Qx="FULLWIDTHRIGHTPAREN",eS="LEFTCORNERBRACKET",tS="RIGHTCORNERBRACKET",nS="LEFTWHITECORNERBRACKET",rS="RIGHTWHITECORNERBRACKET",oS="FULLWIDTHLESSTHAN",iS="FULLWIDTHGREATERTHAN",sS="AMPERSAND",aS="APOSTROPHE",lS="ASTERISK",Ju="AT",cS="BACKSLASH",uS="BACKTICK",dS="CARET",td="COLON",YO="COMMA",fS="DOLLAR",El="DOT",hS="EQUALS",JO="EXCLAMATION",Qs="HYPHEN",Jy="PERCENT",pS="PIPE",mS="PLUS",gS="POUND",Xy="QUERY",XO="QUOTE",sZ="FULLWIDTHMIDDLEDOT",QO="SEMI",Tl="SLASH",Qy="TILDE",yS="UNDERSCORE",aZ="EMOJI",bS="SYM";var lZ=Object.freeze({__proto__:null,ALPHANUMERICAL:iZ,AMPERSAND:sS,APOSTROPHE:aS,ASCIINUMERICAL:oZ,ASTERISK:lS,AT:Ju,BACKSLASH:cS,BACKTICK:uS,CARET:dS,CLOSEANGLEBRACKET:Jx,CLOSEBRACE:Yy,CLOSEBRACKET:Zx,CLOSEPAREN:Kx,COLON:td,COMMA:YO,DOLLAR:fS,DOT:El,EMOJI:aZ,EQUALS:hS,EXCLAMATION:JO,FULLWIDTHGREATERTHAN:iS,FULLWIDTHLEFTPAREN:Xx,FULLWIDTHLESSTHAN:oS,FULLWIDTHMIDDLEDOT:sZ,FULLWIDTHRIGHTPAREN:Qx,HYPHEN:Qs,LEFTCORNERBRACKET:eS,LEFTWHITECORNERBRACKET:nS,LOCALHOST:I0,NL:KO,NUM:WO,OPENANGLEBRACKET:Yx,OPENBRACE:Ky,OPENBRACKET:qx,OPENPAREN:Wx,PERCENT:Jy,PIPE:pS,PLUS:mS,POUND:gS,QUERY:Xy,QUOTE:XO,RIGHTCORNERBRACKET:tS,RIGHTWHITECORNERBRACKET:rS,SCHEME:ix,SEMI:QO,SLASH:Tl,SLASH_SCHEME:Pp,SYM:bS,TILDE:Qy,TLD:kR,UNDERSCORE:yS,UTLD:CR,UWORD:SR,WORD:Dc,WS:ER});const _c=/[a-z]/,gy=new RegExp("\\p{L}","u"),E_=new RegExp("\\p{Emoji}","u"),Ac=/\d/,T_=/\s/,S6="\r",__=`
`,N0e="",I0e="",A_="";let X1=null,Q1=null;function O0e(e=[]){const t={};Oi.groups=t;const n=new Oi;X1==null&&(X1=k6(E0e)),Q1==null&&(Q1=k6(T0e)),_e(n,"'",aS),_e(n,"{",Ky),_e(n,"}",Yy),_e(n,"[",qx),_e(n,"]",Zx),_e(n,"(",Wx),_e(n,")",Kx),_e(n,"<",Yx),_e(n,">",Jx),_e(n,"",Xx),_e(n,"",Qx),_e(n,"",eS),_e(n,"",tS),_e(n,"",nS),_e(n,"",rS),_e(n,"",oS),_e(n,"",iS),_e(n,"&",sS),_e(n,"*",lS),_e(n,"@",Ju),_e(n,"`",uS),_e(n,"^",dS),_e(n,":",td),_e(n,",",YO),_e(n,"$",fS),_e(n,".",El),_e(n,"=",hS),_e(n,"!",JO),_e(n,"-",Qs),_e(n,"%",Jy),_e(n,"|",pS),_e(n,"+",mS),_e(n,"#",gS),_e(n,"?",Xy),_e(n,'"',XO),_e(n,"/",Tl),_e(n,";",QO),_e(n,"~",Qy),_e(n,"_",yS),_e(n,"\\",cS),_e(n,"",sZ);const r=hr(n,Ac,WO,{[bR]:!0});hr(r,Ac,r);const o=hr(r,_c,oZ,{[Wy]:!0}),i=hr(r,gy,iZ,{[Iy]:!0}),s=hr(n,_c,Dc,{[vR]:!0});hr(s,Ac,o),hr(s,_c,s),hr(o,Ac,o),hr(o,_c,o);const a=hr(n,gy,SR,{[wR]:!0});hr(a,_c),hr(a,Ac,i),hr(a,gy,a),hr(i,Ac,i),hr(i,_c),hr(i,gy,i);const l=_e(n,__,KO,{[C_]:!0}),c=_e(n,S6,ER,{[C_]:!0}),u=hr(n,T_,ER,{[C_]:!0});_e(n,A_,u),_e(c,__,l),_e(c,A_,u),hr(c,T_,u),_e(u,S6),_e(u,__),hr(u,T_,u),_e(u,A_,u);const f=hr(n,E_,aZ,{[rZ]:!0});_e(f,"#"),hr(f,E_,f),_e(f,N0e,f);const p=_e(f,I0e);_e(p,"#"),hr(p,E_,f);const m=[[_c,s],[Ac,o]],y=[[_c,null],[gy,a],[Ac,i]];for(let b=0;b<X1.length;b++)Vu(n,X1[b],kR,Dc,m);for(let b=0;b<Q1.length;b++)Vu(n,Q1[b],CR,SR,y);If(kR,{tld:!0,ascii:!0},t),If(CR,{utld:!0,alpha:!0},t),Vu(n,"file",ix,Dc,m),Vu(n,"mailto",ix,Dc,m),Vu(n,"http",Pp,Dc,m),Vu(n,"https",Pp,Dc,m),Vu(n,"ftp",Pp,Dc,m),Vu(n,"ftps",Pp,Dc,m),If(ix,{scheme:!0,ascii:!0},t),If(Pp,{slashscheme:!0,ascii:!0},t),e=e.sort((b,x)=>b[0]>x[0]?1:-1);for(let b=0;b<e.length;b++){const x=e[b][0],E=e[b][1]?{[_0e]:!0}:{[A0e]:!0};x.indexOf("-")>=0?E[xR]=!0:_c.test(x)?Ac.test(x)?E[Wy]=!0:E[vR]=!0:E[bR]=!0,x6(n,x,x,E)}return x6(n,"localhost",I0,{ascii:!0}),n.jd=new Oi(bS),{start:n,tokens:Object.assign({groups:t},lZ)}}function cZ(e,t){const n=P0e(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=e,l=null,c=0,u=null,f=-1,p=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(f=0,p=0,u=a):f>=0&&(f+=n[s].length,p++),c+=n[s].length,i+=n[s].length,s++;i-=f,s-=p,c-=f,o.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return o}function P0e(e){const t=[],n=e.length;let r=0;for(;r<n;){let o=e.charCodeAt(r),i,s=o<55296||o>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(s),r+=s.length}return t}function Vu(e,t,n,r,o){let i;const s=t.length;for(let a=0;a<s-1;a++){const l=t[a];e.j[l]?i=e.j[l]:(i=new Oi(r),i.jr=o.slice(),e.j[l]=i),e=i}return i=new Oi(n),i.jr=o.slice(),e.j[t[s-1]]=i,i}function k6(e){const t=[],n=[];let r=0,o="0123456789";for(;r<e.length;){let i=0;for(;o.indexOf(e[r+i])>=0;)i++;if(i>0){t.push(n.join(""));for(let s=parseInt(e.substring(r,r+i),10);s>0;s--)n.pop();r+=i}else n.push(e[r]),r++}return t}const O0={defaultProtocol:"http",events:null,format:C6,formatHref:C6,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function e4(e,t=null){let n=Object.assign({},O0);e&&(n=Object.assign(n,e instanceof e4?e.o:e));const r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}e4.prototype={o:O0,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let o=this.o[e];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:O0[e],typeof o=="function"&&r&&(o=o(t,n))):typeof o=="function"&&r&&(o=o(t,n.t,n)),o)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function C6(e){return e}function uZ(e,t){this.t="token",this.v=e,this.tk=t}uZ.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=O0.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),o=e.get("tagName",n,t),i=this.toFormattedString(e),s={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),u&&Object.assign(s,u),{tagName:o,attributes:s,content:i,eventListeners:f}}};function bC(e,t){class n extends uZ{constructor(o,i){super(o,i),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const E6=bC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),T6=bC("text"),D0e=bC("nl"),ew=bC("url",{isLink:!0,toHref(e=O0.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==I0&&e[1].t===td}}),Ks=e=>new Oi(e);function $0e({groups:e}){const t=e.domain.concat([sS,lS,Ju,cS,uS,dS,fS,hS,Qs,WO,Jy,pS,mS,gS,Tl,bS,Qy,yS]),n=[aS,td,YO,El,JO,Jy,Xy,XO,QO,Yx,Jx,Ky,Yy,Zx,qx,Wx,Kx,Xx,Qx,eS,tS,nS,rS,oS,iS],r=[sS,aS,lS,cS,uS,dS,fS,hS,Qs,Ky,Yy,Jy,pS,mS,gS,Xy,Tl,bS,Qy,yS],o=Ks(),i=_e(o,Qy);_t(i,r,i),_t(i,e.domain,i);const s=Ks(),a=Ks(),l=Ks();_t(o,e.domain,s),_t(o,e.scheme,a),_t(o,e.slashscheme,l),_t(s,r,i),_t(s,e.domain,s);const c=_e(s,Ju);_e(i,Ju,c),_e(a,Ju,c),_e(l,Ju,c);const u=_e(i,El);_t(u,r,i),_t(u,e.domain,i);const f=Ks();_t(c,e.domain,f),_t(f,e.domain,f);const p=_e(f,El);_t(p,e.domain,f);const m=Ks(E6);_t(p,e.tld,m),_t(p,e.utld,m),_e(c,I0,m);const y=_e(f,Qs);_e(y,Qs,y),_t(y,e.domain,f),_t(m,e.domain,f),_e(m,El,p),_e(m,Qs,y);const b=_e(m,td);_t(b,e.numeric,E6);const x=_e(s,Qs),S=_e(s,El);_e(x,Qs,x),_t(x,e.domain,s),_t(S,r,i),_t(S,e.domain,s);const E=Ks(ew);_t(S,e.tld,E),_t(S,e.utld,E),_t(E,e.domain,s),_t(E,r,i),_e(E,El,S),_e(E,Qs,x),_e(E,Ju,c);const T=_e(E,td),A=Ks(ew);_t(T,e.numeric,A);const M=Ks(ew),R=Ks();_t(M,t,M),_t(M,n,R),_t(R,t,M),_t(R,n,R),_e(E,Tl,M),_e(A,Tl,M);const O=_e(a,td),I=_e(l,td),L=_e(I,Tl),$=_e(L,Tl);_t(a,e.domain,s),_e(a,El,S),_e(a,Qs,x),_t(l,e.domain,s),_e(l,El,S),_e(l,Qs,x),_t(O,e.domain,M),_e(O,Tl,M),_e(O,Xy,M),_t($,e.domain,M),_t($,t,M),_e($,Tl,M);const B=[[Ky,Yy],[qx,Zx],[Wx,Kx],[Yx,Jx],[Xx,Qx],[eS,tS],[nS,rS],[oS,iS]];for(let H=0;H<B.length;H++){const[V,W]=B[H],K=_e(M,V);_e(R,V,K),_e(K,W,M);const z=Ks(ew);_t(K,t,z);const G=Ks();_t(K,n),_t(z,t,z),_t(z,n,G),_t(G,t,z),_t(G,n,G),_e(z,W,M),_e(G,W,M)}return _e(o,I0,E),_e(o,KO,D0e),{start:o,tokens:lZ}}function L0e(e,t,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=e,l=null,c=null,u=0,f=null,p=-1;for(;o<r&&!(l=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(p=0,f=a):p>=0&&p++,o++,u++;if(p<0)o-=u,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(M_(T6,t,s)),s=[]),o-=p,u-=p;const m=f.t,y=n.slice(o-u,o);i.push(M_(m,t,y))}}return s.length>0&&i.push(M_(T6,t,s)),i}function M_(e,t,n){const r=n[0].s,o=n[n.length-1].e,i=t.slice(r,o);return new e(i,n)}const j0e=typeof console<"u"&&console&&console.warn||(()=>{}),z0e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Hn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function B0e(){return Oi.groups={},Hn.scanner=null,Hn.parser=null,Hn.tokenQueue=[],Hn.pluginQueue=[],Hn.customSchemes=[],Hn.initialized=!1,Hn}function _6(e,t=!1){if(Hn.initialized&&j0e(`linkifyjs: already initialized - will not register custom scheme "${e}" ${z0e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Hn.customSchemes.push([e,t])}function V0e(){Hn.scanner=O0e(Hn.customSchemes);for(let e=0;e<Hn.tokenQueue.length;e++)Hn.tokenQueue[e][1]({scanner:Hn.scanner});Hn.parser=$0e(Hn.scanner.tokens);for(let e=0;e<Hn.pluginQueue.length;e++)Hn.pluginQueue[e][1]({scanner:Hn.scanner,parser:Hn.parser});return Hn.initialized=!0,Hn}function t4(e){return Hn.initialized||V0e(),L0e(Hn.parser.start,e,cZ(Hn.scanner.start,e))}t4.scan=cZ;function dZ(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new e4(n),o=t4(e),i=[];for(let s=0;s<o.length;s++){const a=o[s];a.isLink&&(!t||a.t===t)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}const n4="[\0- -\u2029]",F0e=new RegExp(n4),H0e=new RegExp(`${n4}$`),U0e=new RegExp(n4,"g");function G0e(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function q0e(e){return new St({key:new Bt("autolink"),appendTransaction:(t,n,r)=>{const o=t.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=t.some(c=>c.getMeta("preventAutolink"));if(!o||i)return;const{tr:s}=r,a=zO(n.doc,[...t]);if(Oq(a).forEach(({newRange:c})=>{const u=Nq(r.doc,c,m=>m.isTextblock);let f,p;if(u.length>1)f=u[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(u.length){const m=r.doc.textBetween(c.from,c.to," "," ");if(!H0e.test(m))return;f=u[0],p=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&p){const m=p.split(F0e).filter(Boolean);if(m.length<=0)return!1;const y=m[m.length-1],b=f.pos+p.lastIndexOf(y);if(!y)return!1;const x=t4(y).map(S=>S.toObject(e.defaultProtocol));if(!G0e(x))return!1;x.filter(S=>S.isLink).map(S=>({...S,from:b+S.start+1,to:b+S.end+1})).filter(S=>r.schema.marks.code?!r.doc.rangeHasMark(S.from,S.to,r.schema.marks.code):!0).filter(S=>e.validate(S.value)).filter(S=>e.shouldAutoLink(S.value)).forEach(S=>{BO(S.from,S.to,r.doc).some(E=>E.mark.type===e.type)||s.addMark(S.from,S.to,e.type.create({href:S.href}))})}}),!!s.steps.length)return s}})}function Z0e(e){return new St({key:new Bt("handleClickLink"),props:{handleClick:(t,n,r)=>{var o,i;if(r.button!==0||!t.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(p=>p.nodeName==="A"))return!1;const l=Iq(t.state,e.type.name),c=r.target,u=(o=c?.href)!==null&&o!==void 0?o:l.href,f=(i=c?.target)!==null&&i!==void 0?i:l.target;return c&&u?(window.open(u,f),!0):!1}}})}function W0e(e){return new St({key:new Bt("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:o}=t,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=dZ(a,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:e.editor.commands.setMark(e.type,{href:l.href})}}})}function uf(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!e||e.replace(U0e,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const K0e=$o.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){_6(e);return}_6(e.scheme,e.optionalSlashes)})},onDestroy(){B0e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!uf(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!uf(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!uf(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Cs(this.options.HTMLAttributes,e),0]:["a",Cs(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!uf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!uf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[rh({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,o=dZ(e).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:s=>!!uf(s,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(i=>t.push({text:i.value,data:{href:i.href},index:i.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(q0e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!uf(o,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(Z0e({type:this.type})),this.options.linkOnPaste&&e.push(W0e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),Y0e=Ql.create({name:"text",group:"inline"}),fa=()=>new Map,TR=e=>{const t=fa();return e.forEach((n,r)=>{t.set(r,n)}),t},nc=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},J0e=(e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n},X0e=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},ih=()=>new Set,R_=e=>e[e.length-1],Q0e=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},yd=Array.from,ebe=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},_R=Array.isArray;class fZ{constructor(){this._observers=fa()}on(t,n){return nc(this._observers,t,ih).add(n),n}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return yd((this._observers.get(t)||fa()).values()).forEach(r=>r(...n))}destroy(){this._observers=fa()}}const Yc=Math.floor,sx=Math.abs,Gc=(e,t)=>e<t?e:t,Ja=(e,t)=>e>t?e:t,hZ=e=>e!==0?e<0:1/e<0,A6=1,M6=2,N_=4,I_=8,P0=32,qc=64,mi=128,tbe=1<<29,vC=31,AR=63,Zf=127,nbe=2147483647,pZ=Number.MAX_SAFE_INTEGER,rbe=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&Yc(e)===e),obe=String.fromCharCode,ibe=e=>e.toLowerCase(),sbe=/^\s*/g,abe=e=>e.replace(sbe,""),lbe=/([A-Z])/g,R6=(e,t)=>abe(e.replace(lbe,n=>`${t}${ibe(n)}`)),cbe=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r},D0=typeof TextEncoder<"u"?new TextEncoder:null,ube=e=>D0.encode(e),dbe=D0?ube:cbe;let e0=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});e0&&e0.decode(new Uint8Array).length===1&&(e0=null);class Vb{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Fb=()=>new Vb,fbe=e=>{const t=Fb();return e(t),Fa(t)},hbe=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},Fa=e=>{const t=new Uint8Array(hbe(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},pbe=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(Ja(n,t)*2),e.cpos=0)},mo=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},MR=mo,zt=(e,t)=>{for(;t>Zf;)mo(e,mi|Zf&t),t=Yc(t/128);mo(e,Zf&t)},r4=(e,t)=>{const n=hZ(t);for(n&&(t=-t),mo(e,(t>AR?mi:0)|(n?qc:0)|AR&t),t=Yc(t/64);t>0;)mo(e,(t>Zf?mi:0)|Zf&t),t=Yc(t/128)},RR=new Uint8Array(3e4),mbe=RR.length/3,gbe=(e,t)=>{if(t.length<mbe){const n=D0.encodeInto(t,RR).written||0;zt(e,n);for(let r=0;r<n;r++)mo(e,RR[r])}else hs(e,dbe(t))},ybe=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;zt(e,r);for(let o=0;o<r;o++)mo(e,n.codePointAt(o))},tm=D0&&D0.encodeInto?gbe:ybe,wC=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=Gc(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Ja(n*2,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},hs=(e,t)=>{zt(e,t.byteLength),wC(e,t)},o4=(e,t)=>{pbe(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},bbe=(e,t)=>o4(e,4).setFloat32(0,t,!1),vbe=(e,t)=>o4(e,8).setFloat64(0,t,!1),wbe=(e,t)=>o4(e,8).setBigInt64(0,t,!1),N6=new DataView(new ArrayBuffer(4)),xbe=e=>(N6.setFloat32(0,e),N6.getFloat32(0)===e),wm=(e,t)=>{switch(typeof t){case"string":mo(e,119),tm(e,t);break;case"number":rbe(t)&&sx(t)<=nbe?(mo(e,125),r4(e,t)):xbe(t)?(mo(e,124),bbe(e,t)):(mo(e,123),vbe(e,t));break;case"bigint":mo(e,122),wbe(e,t);break;case"object":if(t===null)mo(e,126);else if(_R(t)){mo(e,117),zt(e,t.length);for(let n=0;n<t.length;n++)wm(e,t[n])}else if(t instanceof Uint8Array)mo(e,116),hs(e,t);else{mo(e,118);const n=Object.keys(t);zt(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];tm(e,o),wm(e,t[o])}}break;case"boolean":mo(e,t?120:121);break;default:mo(e,127)}};class I6 extends Vb{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&zt(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const O6=e=>{e.count>0&&(r4(e.encoder,e.count===1?e.s:-e.s),e.count>1&&zt(e.encoder,e.count-2))};class ax{constructor(){this.encoder=new Vb,this.s=0,this.count=0}write(t){this.s===t?this.count++:(O6(this),this.count=1,this.s=t)}toUint8Array(){return O6(this),Fa(this.encoder)}}const P6=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);r4(e.encoder,t),e.count>1&&zt(e.encoder,e.count-2)}};class O_{constructor(){this.encoder=new Vb,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(P6(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return P6(this),Fa(this.encoder)}}class Sbe{constructor(){this.sarr=[],this.s="",this.lensE=new ax}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Vb;return this.sarr.push(this.s),this.s="",tm(t,this.sarr.join("")),wC(t,this.lensE.toUint8Array()),Fa(t)}}const bd=e=>new Error(e),Za=()=>{throw bd("Method unimplemented")},Es=()=>{throw bd("Unexpected case")},mZ=bd("Unexpected end of array"),gZ=bd("Integer out of Range");class xC{constructor(t){this.arr=t,this.pos=0}}const Um=e=>new xC(e),kbe=e=>e.pos!==e.arr.length,Cbe=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},ps=e=>Cbe(e,Pt(e)),xm=e=>e.arr[e.pos++],Pt=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const o=e.arr[e.pos++];if(t=t+(o&Zf)*n,n*=128,o<mi)return t;if(t>pZ)throw gZ}throw mZ},i4=e=>{let t=e.arr[e.pos++],n=t&AR,r=64;const o=(t&qc)>0?-1:1;if((t&mi)===0)return o*n;const i=e.arr.length;for(;e.pos<i;){if(t=e.arr[e.pos++],n=n+(t&Zf)*r,r*=128,t<mi)return o*n;if(n>pZ)throw gZ}throw mZ},Ebe=e=>{let t=Pt(e);if(t===0)return"";{let n=String.fromCodePoint(xm(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(xm(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},Tbe=e=>e0.decode(ps(e)),nm=e0?Tbe:Ebe,s4=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},_be=e=>s4(e,4).getFloat32(0,!1),Abe=e=>s4(e,8).getFloat64(0,!1),Mbe=e=>s4(e,8).getBigInt64(0,!1),Rbe=[e=>{},e=>null,i4,_be,Abe,Mbe,e=>!1,e=>!0,nm,e=>{const t=Pt(e),n={};for(let r=0;r<t;r++){const o=nm(e);n[o]=$0(e)}return n},e=>{const t=Pt(e),n=[];for(let r=0;r<t;r++)n.push($0(e));return n},ps],$0=e=>Rbe[127-xm(e)](e);class D6 extends xC{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),kbe(this)?this.count=Pt(this)+1:this.count=-1),this.count--,this.s}}class lx extends xC{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=i4(this);const t=hZ(this.s);this.count=1,t&&(this.s=-this.s,this.count=Pt(this)+2)}return this.count--,this.s}}class P_ extends xC{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=i4(this),n=t&1;this.diff=Yc(t/2),this.count=1,n&&(this.count=Pt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Nbe{constructor(t){this.decoder=new lx(t),this.str=nm(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const Ibe=crypto.getRandomValues.bind(crypto),Obe=Math.random,yZ=()=>Ibe(new Uint32Array(1))[0],Pbe=e=>e[Yc(Obe()*e.length)],Dbe="10000000-1000-4000-8000"+-1e11,$be=()=>Dbe.replace(/[018]/g,e=>(e^yZ()&15>>e/4).toString(16)),Lbe=Date.now,$6=e=>new Promise(e);Promise.all.bind(Promise);const L6=e=>e===void 0?null:e;class jbe{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let bZ=new jbe,zbe=!0;try{typeof localStorage<"u"&&localStorage&&(bZ=localStorage,zbe=!1)}catch{}const Bbe=bZ,Vbe=Object.assign,vZ=Object.keys,Fbe=(e,t)=>{for(const n in e)t(e[n],n)},j6=e=>vZ(e).length,Hbe=e=>{for(const t in e)return!1;return!0},wZ=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},Ube=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Gbe=(e,t)=>e===t||j6(e)===j6(t)&&wZ(e,(n,r)=>(n!==void 0||Ube(t,r))&&t[r]===n),qbe=Object.freeze,xZ=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&xZ(e[t])}return qbe(e)},a4=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&a4(e,t,n+1)}},Zbe=e=>e,Wbe=(e,t)=>t.includes(e);var SZ={};const Sm=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",kZ=typeof window<"u"&&typeof document<"u"&&!Sm;let Sl;const Kbe=()=>{if(Sl===void 0)if(Sm){Sl=fa();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Sl.set(t,""),t=r):t!==null&&(Sl.set(t,r),t=null)}t!==null&&Sl.set(t,"")}else typeof location=="object"?(Sl=fa(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Sl.set(`--${R6(t,"-")}`,n),Sl.set(`-${R6(t,"-")}`,n)}})):Sl=fa();return Sl},NR=e=>Kbe().has(e),vS=e=>L6(Sm?SZ[e.toUpperCase().replaceAll("-","_")]:Bbe.getItem(e)),CZ=e=>NR("--"+e)||vS(e)!==null;CZ("production");const Ybe=Sm&&Wbe(SZ.FORCE_COLOR,["true","1","2"]),Jbe=Ybe||!NR("--no-colors")&&!CZ("no-color")&&(!Sm||process.stdout.isTTY)&&(!Sm||NR("--color")||vS("COLORTERM")!==null||(vS("TERM")||"").includes("color")),Xbe=e=>new Uint8Array(e),Qbe=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=obe(e[n]);return btoa(t)},eve=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),tve=kZ?Qbe:eve,nve=e=>{const t=Xbe(e.byteLength);return t.set(e),t},rve=e=>fbe(t=>wm(t,e));class ove{constructor(t,n){this.left=t,this.right=n}}const Mc=(e,t)=>new ove(e,t),ive=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const sve=e=>J0e(e,(t,n)=>`${n}:${t};`).join(""),ave=e=>class{constructor(n){this._=n}destroy(){e(this._)}},lve=ave(clearTimeout),l4=(e,t)=>new lve(setTimeout(t,e)),lu=Symbol,EZ=lu(),TZ=lu(),cve=lu(),uve=lu(),dve=lu(),_Z=lu(),fve=lu(),c4=lu(),hve=lu(),pve=e=>{e.length===1&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const o=e[r];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const o=e[r];o instanceof Symbol||n.push(o)}return n},mve={[EZ]:Mc("font-weight","bold"),[TZ]:Mc("font-weight","normal"),[cve]:Mc("color","blue"),[dve]:Mc("color","green"),[uve]:Mc("color","grey"),[_Z]:Mc("color","red"),[fve]:Mc("color","purple"),[c4]:Mc("color","orange"),[hve]:Mc("color","black")},gve=e=>{e.length===1&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[],r=fa();let o=[],i=0;for(;i<e.length;i++){const s=e[i],a=mve[s];if(a!==void 0)r.set(a.left,a.right);else{if(s===void 0)break;if(s.constructor===String||s.constructor===Number){const l=sve(r);i>0||l.length>0?(t.push("%c"+s),n.push(l)):t.push(s)}else break}}for(i>0&&(o=n,o.unshift(t.join("")));i<e.length;i++){const s=e[i];s instanceof Symbol||o.push(s)}return o},AZ=Jbe?gve:pve,yve=(...e)=>{console.log(...AZ(e)),RZ.forEach(t=>t.print(e))},MZ=(...e)=>{console.warn(...AZ(e)),e.unshift(c4),RZ.forEach(t=>t.print(e))},RZ=ih(),NZ=e=>({[Symbol.iterator](){return this},next:e}),bve=(e,t)=>NZ(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),D_=(e,t)=>NZ(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class u4{constructor(t,n){this.clock=t,this.len=n}}class Gm{constructor(){this.clients=new Map}}const vd=(e,t,n)=>t.clients.forEach((r,o)=>{const i=e.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],a=s.id.clock+s.length;for(let l=0,c=r[l];l<r.length&&c.clock<a;c=r[++l])qZ(e,i,c.clock,c.len,n)}}),vve=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=Yc((n+r)/2),i=e[o],s=i.clock;if(s<=t){if(t<s+i.len)return o;n=o+1}else r=o-1}return null},qm=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&vve(n,t.clock)!==null},d4=e=>{e.clients.forEach(t=>{t.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const o=t[r-1],i=t[n];o.clock+o.len>=i.clock?o.len=Ja(o.len,i.clock+i.len-o.clock):(r<n&&(t[r]=i),r++)}t.length=r})},IR=e=>{const t=new Gm;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let s=n+1;s<e.length;s++)Q0e(i,e[s].clients.get(o)||[]);t.clients.set(o,i)}});return d4(t),t},L0=(e,t,n,r)=>{nc(e.clients,t,()=>[]).push(new u4(n,r))},IZ=()=>new Gm,OZ=e=>{const t=IZ();return e.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const a=s.id.clock;let l=s.length;if(i+1<n.length)for(let c=n[i+1];i+1<n.length&&c.deleted;c=n[++i+1])l+=c.length;o.push(new u4(a,l))}}o.length>0&&t.clients.set(r,o)}),t},Zm=(e,t)=>{zt(e.restEncoder,t.clients.size),yd(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),zt(e.restEncoder,n);const o=r.length;zt(e.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},f4=e=>{const t=new Gm,n=Pt(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const o=Pt(e.restDecoder),i=Pt(e.restDecoder);if(i>0){const s=nc(t.clients,o,()=>[]);for(let a=0;a<i;a++)s.push(new u4(e.readDsClock(),e.readDsLen()))}}return t},z6=(e,t,n)=>{const r=new Gm,o=Pt(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const s=Pt(e.restDecoder),a=Pt(e.restDecoder),l=n.clients.get(s)||[],c=Rr(n,s);for(let u=0;u<a;u++){const f=e.readDsClock(),p=f+e.readDsLen();if(f<c){c<p&&L0(r,s,c,p-c);let m=pa(l,f),y=l[m];for(!y.deleted&&y.id.clock<f&&(l.splice(m+1,0,TS(t,y,f-y.id.clock)),m++);m<l.length&&(y=l[m++],y.id.clock<p);)y.deleted||(p<y.id.clock+y.length&&l.splice(m,0,TS(t,y,p-y.id.clock)),y.delete(t))}else L0(r,s,f,p-f)}}if(r.clients.size>0){const i=new sh;return zt(i.restEncoder,0),Zm(i,r),i.toUint8Array()}return null},PZ=yZ;let Wm=class DZ extends fZ{constructor({guid:t=$be(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=PZ(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new UZ,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=$6(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>$6(c=>{const u=f=>{(f===void 0||f===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const t=this._item;t!==null&&!this.shouldLoad&&En(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(yd(this.subdocs).map(t=>t.guid))}transact(t,n=null){return En(this,t,n)}get(t,n=wo){const r=nc(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==wo&&o!==n)if(o===wo){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,im)}getText(t=""){return this.get(t,wd)}getMap(t=""){return this.get(t,Cm)}getXmlElement(t=""){return this.get(t,fi)}getXmlFragment(t=""){return this.get(t,ah)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,yd(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new DZ({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,En(t.parent.doc,r=>{const o=n.doc;t.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}};class $Z{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return Pt(this.restDecoder)}readDsLen(){return Pt(this.restDecoder)}}class LZ extends $Z{readLeftID(){return wt(Pt(this.restDecoder),Pt(this.restDecoder))}readRightID(){return wt(Pt(this.restDecoder),Pt(this.restDecoder))}readClient(){return Pt(this.restDecoder)}readInfo(){return xm(this.restDecoder)}readString(){return nm(this.restDecoder)}readParentInfo(){return Pt(this.restDecoder)===1}readTypeRef(){return Pt(this.restDecoder)}readLen(){return Pt(this.restDecoder)}readAny(){return $0(this.restDecoder)}readBuf(){return nve(ps(this.restDecoder))}readJSON(){return JSON.parse(nm(this.restDecoder))}readKey(){return nm(this.restDecoder)}}class wve{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Pt(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Pt(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class km extends wve{constructor(t){super(t),this.keys=[],Pt(t),this.keyClockDecoder=new P_(ps(t)),this.clientDecoder=new lx(ps(t)),this.leftClockDecoder=new P_(ps(t)),this.rightClockDecoder=new P_(ps(t)),this.infoDecoder=new D6(ps(t),xm),this.stringDecoder=new Nbe(ps(t)),this.parentInfoDecoder=new D6(ps(t),xm),this.typeRefDecoder=new lx(ps(t)),this.lenDecoder=new lx(ps(t))}readLeftID(){return new rm(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new rm(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return $0(this.restDecoder)}readBuf(){return ps(this.restDecoder)}readJSON(){return $0(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class jZ{constructor(){this.restEncoder=Fb()}toUint8Array(){return Fa(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){zt(this.restEncoder,t)}writeDsLen(t){zt(this.restEncoder,t)}}class Hb extends jZ{writeLeftID(t){zt(this.restEncoder,t.client),zt(this.restEncoder,t.clock)}writeRightID(t){zt(this.restEncoder,t.client),zt(this.restEncoder,t.clock)}writeClient(t){zt(this.restEncoder,t)}writeInfo(t){MR(this.restEncoder,t)}writeString(t){tm(this.restEncoder,t)}writeParentInfo(t){zt(this.restEncoder,t?1:0)}writeTypeRef(t){zt(this.restEncoder,t)}writeLen(t){zt(this.restEncoder,t)}writeAny(t){wm(this.restEncoder,t)}writeBuf(t){hs(this.restEncoder,t)}writeJSON(t){tm(this.restEncoder,JSON.stringify(t))}writeKey(t){tm(this.restEncoder,t)}}class zZ{constructor(){this.restEncoder=Fb(),this.dsCurrVal=0}toUint8Array(){return Fa(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,zt(this.restEncoder,n)}writeDsLen(t){t===0&&Es(),zt(this.restEncoder,t-1),this.dsCurrVal+=t}}class sh extends zZ{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new O_,this.clientEncoder=new ax,this.leftClockEncoder=new O_,this.rightClockEncoder=new O_,this.infoEncoder=new I6(MR),this.stringEncoder=new Sbe,this.parentInfoEncoder=new I6(MR),this.typeRefEncoder=new ax,this.lenEncoder=new ax}toUint8Array(){const t=Fb();return zt(t,0),hs(t,this.keyClockEncoder.toUint8Array()),hs(t,this.clientEncoder.toUint8Array()),hs(t,this.leftClockEncoder.toUint8Array()),hs(t,this.rightClockEncoder.toUint8Array()),hs(t,Fa(this.infoEncoder)),hs(t,this.stringEncoder.toUint8Array()),hs(t,Fa(this.parentInfoEncoder)),hs(t,this.typeRefEncoder.toUint8Array()),hs(t,this.lenEncoder.toUint8Array()),wC(t,Fa(this.restEncoder)),Fa(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){wm(this.restEncoder,t)}writeBuf(t){hs(this.restEncoder,t)}writeJSON(t){wm(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const xve=(e,t,n,r)=>{r=Ja(r,t[0].id.clock);const o=pa(t,r);zt(e.restEncoder,t.length-o),e.writeClient(n),zt(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let s=o+1;s<t.length;s++)t[s].write(e,0)},h4=(e,t,n)=>{const r=new Map;n.forEach((o,i)=>{Rr(t,i)>o&&r.set(i,o)}),Ub(t).forEach((o,i)=>{n.has(i)||r.set(i,0)}),zt(e.restEncoder,r.size),yd(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{xve(e,t.clients.get(o),o,i)})},Sve=(e,t)=>{const n=fa(),r=Pt(e.restDecoder);for(let o=0;o<r;o++){const i=Pt(e.restDecoder),s=new Array(i),a=e.readClient();let l=Pt(e.restDecoder);n.set(a,{i:0,refs:s});for(let c=0;c<i;c++){const u=e.readInfo();switch(vC&u){case 0:{const f=e.readLen();s[c]=new oa(wt(a,l),f),l+=f;break}case 10:{const f=Pt(e.restDecoder);s[c]=new ia(wt(a,l),f),l+=f;break}default:{const f=(u&(qc|mi))===0,p=new Ln(wt(a,l),null,(u&mi)===mi?e.readLeftID():null,null,(u&qc)===qc?e.readRightID():null,f?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,f&&(u&P0)===P0?e.readString():null,pW(e,u));s[c]=p,l+=p.length}}}}return n},kve=(e,t,n)=>{const r=[];let o=yd(n.keys()).sort((m,y)=>m-y);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let m=n.get(o[o.length-1]);for(;m.refs.length===m.i;)if(o.pop(),o.length>0)m=n.get(o[o.length-1]);else return null;return m};let s=i();if(s===null)return null;const a=new UZ,l=new Map,c=(m,y)=>{const b=l.get(m);(b==null||b>y)&&l.set(m,y)};let u=s.refs[s.i++];const f=new Map,p=()=>{for(const m of r){const y=m.id.client,b=n.get(y);b?(b.i--,a.clients.set(y,b.refs.slice(b.i)),n.delete(y),b.i=0,b.refs=[]):a.clients.set(y,[m]),o=o.filter(x=>x!==y)}r.length=0};for(;;){if(u.constructor!==ia){const y=nc(f,u.id.client,()=>Rr(t,u.id.client))-u.id.clock;if(y<0)r.push(u),c(u.id.client,u.id.clock-1),p();else{const b=u.getMissing(e,t);if(b!==null){r.push(u);const x=n.get(b)||{refs:[],i:0};if(x.refs.length===x.i)c(b,Rr(t,b)),p();else{u=x.refs[x.i++];continue}}else(y===0||y<u.length)&&(u.integrate(e,y),f.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(s!==null&&s.i<s.refs.length)u=s.refs[s.i++];else{if(s=i(),s===null)break;u=s.refs[s.i++]}}if(a.clients.size>0){const m=new sh;return h4(m,a,new Map),zt(m.restEncoder,0),{missing:l,update:m.toUint8Array()}}return null},Cve=(e,t)=>h4(e,t.doc.store,t.beforeState),Eve=(e,t,n,r=new km(e))=>En(t,o=>{o.local=!1;let i=!1;const s=o.doc,a=s.store,l=Sve(r,s),c=kve(o,a,l),u=a.pendingStructs;if(u){for(const[p,m]of u.missing)if(m<Rr(a,p)){i=!0;break}if(c){for(const[p,m]of c.missing){const y=u.missing.get(p);(y==null||y>m)&&u.missing.set(p,m)}u.update=xS([u.update,c.update])}}else a.pendingStructs=c;const f=z6(r,o,a);if(a.pendingDs){const p=new km(Um(a.pendingDs));Pt(p.restDecoder);const m=z6(p,o,a);f&&m?a.pendingDs=xS([f,m]):a.pendingDs=f||m}else a.pendingDs=f;if(i){const p=a.pendingStructs.update;a.pendingStructs=null,wS(o.doc,p)}},n,!1),wS=(e,t,n,r=km)=>{const o=Um(t);Eve(o,e,n,new r(o))},B6=(e,t,n)=>wS(e,t,n,LZ),Tve=(e,t,n=new Map)=>{h4(e,t.store,n),Zm(e,OZ(t.store))},_ve=(e,t=new Uint8Array([0]),n=new sh)=>{const r=BZ(t);Tve(n,e,r);const o=[n.toUint8Array()];if(e.store.pendingDs&&o.push(e.store.pendingDs),e.store.pendingStructs&&o.push(qve(e.store.pendingStructs.update,t)),o.length>1){if(n.constructor===Hb)return Uve(o.map((i,s)=>s===0?i:Wve(i)));if(n.constructor===sh)return xS(o)}return o[0]},V6=(e,t)=>_ve(e,t,new Hb),Ave=e=>{const t=new Map,n=Pt(e.restDecoder);for(let r=0;r<n;r++){const o=Pt(e.restDecoder),i=Pt(e.restDecoder);t.set(o,i)}return t},BZ=e=>Ave(new $Z(Um(e))),VZ=(e,t)=>(zt(e.restEncoder,t.size),yd(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{zt(e.restEncoder,n),zt(e.restEncoder,r)}),e),Mve=(e,t)=>VZ(e,Ub(t.store)),Rve=(e,t=new zZ)=>(e instanceof Map?VZ(t,e):Mve(t,e),t.toUint8Array()),Nve=e=>Rve(e,new jZ);class Ive{constructor(){this.l=[]}}const F6=()=>new Ive,H6=(e,t)=>e.l.push(t),U6=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(o=>t!==o),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},FZ=(e,t,n)=>a4(e.l,[t,n]);class rm{constructor(t,n){this.client=t,this.clock=n}}const Bp=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,wt=(e,t)=>new rm(e,t),j0=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Es()},z0=(e,t)=>{for(;t!==null;){if(t.parent===e)return!0;t=t.parent._item}return!1};class B0{constructor(t,n,r,o=0){this.type=t,this.tname=n,this.item=r,this.assoc=o}}const t0=e=>new B0(e.type==null?null:wt(e.type.client,e.type.clock),e.tname??null,e.item==null?null:wt(e.item.client,e.item.clock),e.assoc==null?0:e.assoc);class Ove{constructor(t,n,r=0){this.type=t,this.index=n,this.assoc=r}}const Pve=(e,t,n=0)=>new Ove(e,t,n),tw=(e,t,n)=>{let r=null,o=null;return e._item===null?o=j0(e):r=wt(e._item.id.client,e._item.id.clock),new B0(r,o,t,n)},$_=(e,t,n=0)=>{let r=e._start;if(n<0){if(t===0)return tw(e,null,n);t--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>t)return tw(e,wt(r.id.client,r.id.clock+t),n);t-=r.length}if(r.right===null&&n<0)return tw(e,r.lastId,n);r=r.right}return tw(e,null,n)},Dve=(e,t)=>{const n=om(e,t),r=t.clock-n.id.clock;return{item:n,diff:r}},$ve=(e,t,n=!0)=>{const r=t.store,o=e.item,i=e.type,s=e.tname,a=e.assoc;let l=null,c=0;if(o!==null){if(Rr(r,o.client)<=o.clock)return null;const u=n?$R(r,o):Dve(r,o),f=u.item;if(!(f instanceof Ln))return null;if(l=f.parent,l._item===null||!l._item.deleted){c=f.deleted||!f.countable?0:u.diff+(a>=0?0:1);let p=f.left;for(;p!==null;)!p.deleted&&p.countable&&(c+=p.length),p=p.left}}else{if(s!==null)l=t.get(s);else if(i!==null){if(Rr(r,i.client)<=i.clock)return null;const{item:u}=n?$R(r,i):{item:om(r,i)};if(u instanceof Ln&&u.content instanceof rl)l=u.content.type;else return null}else throw Es();a>=0?c=l._length:c=0}return Pve(l,c,e.assoc)},G6=(e,t)=>e===t||e!==null&&t!==null&&e.tname===t.tname&&Bp(e.item,t.item)&&Bp(e.type,t.type)&&e.assoc===t.assoc;class p4{constructor(t,n){this.ds=t,this.sv=n}}const HZ=(e,t)=>new p4(e,t),L_=e=>HZ(OZ(e.store),Ub(e.store)),kf=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!qm(t.ds,e.id),OR=(e,t)=>{const n=nc(e.meta,OR,ih),r=e.doc.store;n.has(t)||(t.sv.forEach((o,i)=>{o<Rr(r,i)&&$i(e,wt(i,o))}),vd(e,t.ds,o=>{}),n.add(t))};class UZ{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Ub=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const o=n[n.length-1];t.set(r,o.id.clock+o.length)}),t},Rr=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},GZ=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw Es()}n.push(t)},pa=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let s=Yc(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[s],i=o.id.clock,i<=t){if(t<i+o.length)return s;n=s+1}else r=s-1;s=Yc((n+r)/2)}throw Es()},Lve=(e,t)=>{const n=e.clients.get(t.client);return n[pa(n,t.clock)]},om=Lve,PR=(e,t,n)=>{const r=pa(t,n),o=t[r];return o.id.clock<n&&o instanceof Ln?(t.splice(r+1,0,TS(e,o,n-o.id.clock)),r+1):r},$i=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[PR(e,n,t.clock)]},q6=(e,t,n)=>{const r=t.clients.get(n.client),o=pa(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==oa&&r.splice(o+1,0,TS(e,i,n.clock-i.id.clock+1)),i},jve=(e,t,n)=>{const r=e.clients.get(t.id.client);r[pa(r,t.id.clock)]=n},qZ=(e,t,n,r,o)=>{if(r===0)return;const i=n+r;let s=PR(e,t,n),a;do a=t[s++],i<a.id.clock+a.length&&PR(e,t,i),o(a);while(s<t.length&&t[s].id.clock<i)};class zve{constructor(t,n,r){this.doc=t,this.deleteSet=new Gm,this.beforeState=Ub(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Z6=(e,t)=>t.deleteSet.clients.size===0&&!X0e(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(d4(t.deleteSet),Cve(e,t),Zm(e,t.deleteSet),!0),W6=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&nc(e.changed,t,ih).add(n)},cx=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0;n=r,r=e[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ln&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=t-o;return i&&e.splice(t+1-i,i),i},Bve=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const i=t.clients.get(r);for(let s=o.length-1;s>=0;s--){const a=o[s],l=a.clock+a.len;for(let c=pa(i,a.clock),u=i[c];c<i.length&&u.id.clock<l;u=i[++c]){const f=i[c];if(a.clock+a.len<=f.id.clock)break;f instanceof Ln&&f.deleted&&!f.keep&&n(f)&&f.gc(t,!1)}}}},Vve=(e,t)=>{e.clients.forEach((n,r)=>{const o=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],a=Gc(o.length-1,1+pa(o,s.clock+s.len-1));for(let l=a,c=o[l];l>0&&c.id.clock>=s.clock;c=o[l])l-=1+cx(o,l)}})},ZZ=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{d4(i),n.afterState=Ub(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(u=>u.target._item===null||!u.target._item.deleted),l.forEach(u=>{u.currentTarget=c,u._path=null}),l.sort((u,f)=>u.path.length-f.path.length),FZ(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),a4(a,[]),n._needFormattingCleanup&&l1e(n)}finally{r.gc&&Bve(i,o,r.gcFilter),Vve(i,o),n.afterState.forEach((u,f)=>{const p=n.beforeState.get(f)||0;if(p!==u){const m=o.clients.get(f),y=Ja(pa(m,p),1);for(let b=m.length-1;b>=y;)b-=1+cx(m,b)}});for(let u=s.length-1;u>=0;u--){const{client:f,clock:p}=s[u].id,m=o.clients.get(f),y=pa(m,p);y+1<m.length&&cx(m,y+1)>1||y>0&&cx(m,y)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(yve(c4,EZ,"[yjs] ",TZ,_Z,"Changed the client-id because another client seems to be using it."),r.clientID=PZ()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new Hb;Z6(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new sh;Z6(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(u=>u.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):ZZ(e,t+1)}}},En=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,s=null;e._transaction===null&&(i=!0,e._transaction=new zve(e,n,r),o.push(e._transaction),o.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(i){const a=e._transaction===o[0];e._transaction=null,a&&ZZ(o,0)}}return s};class Fve{constructor(t,n){this.insertions=n,this.deletions=t,this.meta=new Map}}const K6=(e,t,n)=>{vd(e,n.deletions,r=>{r instanceof Ln&&t.scope.some(o=>o===e.doc||z0(o,r))&&S4(r,!1)})},Y6=(e,t,n)=>{let r=null;const o=e.doc,i=e.scope;En(o,a=>{for(;t.length>0&&e.currStackItem===null;){const l=o.store,c=t.pop(),u=new Set,f=[];let p=!1;vd(a,c.insertions,m=>{if(m instanceof Ln){if(m.redone!==null){let{item:y,diff:b}=$R(l,m.id);b>0&&(y=$i(a,wt(y.id.client,y.id.clock+b))),m=y}!m.deleted&&i.some(y=>y===a.doc||z0(y,m))&&f.push(m)}}),vd(a,c.deletions,m=>{m instanceof Ln&&i.some(y=>y===a.doc||z0(y,m))&&!qm(c.insertions,m.id)&&u.add(m)}),u.forEach(m=>{p=hW(a,m,u,c.insertions,e.ignoreRemoteMapChanges,e)!==null||p});for(let m=f.length-1;m>=0;m--){const y=f[m];e.deleteFilter(y)&&(y.delete(a),p=!0)}e.currStackItem=p?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},e);const s=e.currStackItem;if(s!=null){const a=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:s,type:n,changedParentTypes:a,origin:e},e]),e.currStackItem=null}return s};class WZ extends fZ{constructor(t,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=_R(t)?t[0].doc:t instanceof Wm?t:t.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(t),this.deleteFilter=o,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(x=>l.changedParentTypes.has(x)||x===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,u=this.redoing,f=c?this.redoStack:this.undoStack;c?this.stopCapturing():u||this.clear(!1,!0);const p=new Gm;l.afterState.forEach((x,S)=>{const E=l.beforeState.get(S)||0,T=x-E;T>0&&L0(p,S,E,T)});const m=Lbe();let y=!1;if(this.lastChange>0&&m-this.lastChange<this.captureTimeout&&f.length>0&&!c&&!u){const x=f[f.length-1];x.deletions=IR([x.deletions,l.deleteSet]),x.insertions=IR([x.insertions,p])}else f.push(new Fve(l.deleteSet,p)),y=!0;!c&&!u&&(this.lastChange=m),vd(l,l.deleteSet,x=>{x instanceof Ln&&this.scope.some(S=>S===l.doc||z0(S,x))&&S4(x,!0)});const b=[{stackItem:f[f.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];y?this.emit("stack-item-added",b):this.emit("stack-item-updated",b)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){const n=new Set(this.scope);t=_R(t)?t:[t],t.forEach(r=>{n.has(r)||(n.add(r),(r instanceof wo?r.doc!==this.doc:r!==this.doc)&&MZ("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,n=!0){(t&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{t&&(this.undoStack.forEach(o=>K6(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>K6(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let t;try{t=Y6(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){this.redoing=!0;let t;try{t=Y6(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*Hve(e){const t=Pt(e.restDecoder);for(let n=0;n<t;n++){const r=Pt(e.restDecoder),o=e.readClient();let i=Pt(e.restDecoder);for(let s=0;s<r;s++){const a=e.readInfo();if(a===10){const l=Pt(e.restDecoder);yield new ia(wt(o,i),l),i+=l}else if((vC&a)!==0){const l=(a&(qc|mi))===0,c=new Ln(wt(o,i),null,(a&mi)===mi?e.readLeftID():null,null,(a&qc)===qc?e.readRightID():null,l?e.readParentInfo()?e.readString():e.readLeftID():null,l&&(a&P0)===P0?e.readString():null,pW(e,a));yield c,i+=c.length}else{const l=e.readLen();yield new oa(wt(o,i),l),i+=l}}}}class m4{constructor(t,n){this.gen=Hve(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ia);return this.curr}}class g4{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Uve=e=>xS(e,LZ,Hb),Gve=(e,t)=>{if(e.constructor===oa){const{client:n,clock:r}=e.id;return new oa(wt(n,r+t),e.length-t)}else if(e.constructor===ia){const{client:n,clock:r}=e.id;return new ia(wt(n,r+t),e.length-t)}else{const n=e,{client:r,clock:o}=n.id;return new Ln(wt(r,o+t),null,wt(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},xS=(e,t=km,n=sh)=>{if(e.length===1)return e[0];const r=e.map(u=>new t(Um(u)));let o=r.map(u=>new m4(u,!0)),i=null;const s=new n,a=new g4(s);for(;o=o.filter(p=>p.curr!==null),o.sort((p,m)=>{if(p.curr.id.client===m.curr.id.client){const y=p.curr.id.clock-m.curr.id.clock;return y===0?p.curr.constructor===m.curr.constructor?0:p.curr.constructor===ia?1:-1:y}else return m.curr.id.client-p.curr.id.client}),o.length!==0;){const u=o[0],f=u.curr.id.client;if(i!==null){let p=u.curr,m=!1;for(;p!==null&&p.id.clock+p.length<=i.struct.id.clock+i.struct.length&&p.id.client>=i.struct.id.client;)p=u.next(),m=!0;if(p===null||p.id.client!==f||m&&p.id.clock>i.struct.id.clock+i.struct.length)continue;if(f!==i.struct.id.client)nd(a,i.struct,i.offset),i={struct:p,offset:0},u.next();else if(i.struct.id.clock+i.struct.length<p.id.clock)if(i.struct.constructor===ia)i.struct.length=p.id.clock+p.length-i.struct.id.clock;else{nd(a,i.struct,i.offset);const y=p.id.clock-i.struct.id.clock-i.struct.length;i={struct:new ia(wt(f,i.struct.id.clock+i.struct.length),y),offset:0}}else{const y=i.struct.id.clock+i.struct.length-p.id.clock;y>0&&(i.struct.constructor===ia?i.struct.length-=y:p=Gve(p,y)),i.struct.mergeWith(p)||(nd(a,i.struct,i.offset),i={struct:p,offset:0},u.next())}}else i={struct:u.curr,offset:0},u.next();for(let p=u.curr;p!==null&&p.id.client===f&&p.id.clock===i.struct.id.clock+i.struct.length&&p.constructor!==ia;p=u.next())nd(a,i.struct,i.offset),i={struct:p,offset:0}}i!==null&&(nd(a,i.struct,i.offset),i=null),y4(a);const l=r.map(u=>f4(u)),c=IR(l);return Zm(s,c),s.toUint8Array()},qve=(e,t,n=km,r=sh)=>{const o=BZ(t),i=new r,s=new g4(i),a=new n(Um(e)),l=new m4(a,!1);for(;l.curr;){const u=l.curr,f=u.id.client,p=o.get(f)||0;if(l.curr.constructor===ia){l.next();continue}if(u.id.clock+u.length>p)for(nd(s,u,Ja(p-u.id.clock,0)),l.next();l.curr&&l.curr.id.client===f;)nd(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===f&&l.curr.id.clock+l.curr.length<=p;)l.next()}y4(s);const c=f4(a);return Zm(i,c),i.toUint8Array()},KZ=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:Fa(e.encoder.restEncoder)}),e.encoder.restEncoder=Fb(),e.written=0)},nd=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&KZ(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),zt(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},y4=e=>{KZ(e);const t=e.encoder.restEncoder;zt(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];zt(t,r.written),wC(t,r.restEncoder)}},Zve=(e,t,n,r)=>{const o=new n(Um(e)),i=new m4(o,!1),s=new r,a=new g4(s);for(let c=i.curr;c!==null;c=i.next())nd(a,t(c),0);y4(a);const l=f4(o);return Zm(s,l),s.toUint8Array()},Wve=e=>Zve(e,Zbe,km,Hb),J6="You must not compute changes after the event-handler fired.";class SC{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Kve(this.currentTarget,this.target))}deletes(t){return qm(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw bd(J6);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,a;if(this.adds(i)){let l=i.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(i))if(l!==null&&this.deletes(l))s="delete",a=R_(l.content.getContent());else return;else l!==null&&this.deletes(l)?(s="update",a=R_(l.content.getContent())):(s="add",a=void 0)}else if(this.deletes(i))s="delete",a=R_(i.content.getContent());else return;t.set(o,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw bd(J6);const n=this.target,r=ih(),o=ih(),i=[];if(t={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&i.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,o.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=t}return t}}const Kve=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,o=t._item.parent._start;for(;o!==t._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}t=t._item.parent}return n},Qo=()=>{MZ("Invalid access: Add Yjs type to a document before reading data.")},YZ=80;let b4=0;class Yve{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=b4++}}const Jve=e=>{e.timestamp=b4++},JZ=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=b4++},Xve=(e,t,n)=>{if(e.length>=YZ){const r=e.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return JZ(r,t,n),r}else{const r=new Yve(t,n);return e.push(r),r}},kC=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,s)=>sx(t-i.index)<sx(t-s.index)?i:s);let r=e._start,o=0;for(n!==null&&(r=n.p,o=n.index,Jve(n));r.right!==null&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&sx(n.index-o)<r.parent.length/YZ?(JZ(n,r,o),n):Xve(e._searchMarker,r,o)},V0=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}o.p=i,i.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Ja(t,o.index+n))}},CC=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;nc(o,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;FZ(r._eH,n,t)};class wo{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=F6(),this._dEH=F6(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw Za()}clone(){throw Za()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){H6(this._eH,t)}observeDeep(t){H6(this._dEH,t)}unobserve(t){U6(this._eH,t)}unobserveDeep(t){U6(this._dEH,t)}toJSON(){}}const XZ=(e,t,n)=>{e.doc??Qo(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)o.push(s[a]),r--;t=0}}i=i.right}return o},QZ=e=>{e.doc??Qo();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)t.push(r[o])}n=n.right}return t},eW=(e,t)=>{const n=[];let r=e._start;for(;r!==null;){if(r.countable&&kf(r,t)){const o=r.content.getContent();for(let i=0;i<o.length;i++)n.push(o[i])}r=r.right}return n},F0=(e,t)=>{let n=0,r=e._start;for(e.doc??Qo();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)t(o[i],n++,e)}r=r.right}},tW=(e,t)=>{const n=[];return F0(e,(r,o)=>{n.push(t(r,o,e))}),n},Qve=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},nW=(e,t)=>{e.doc??Qo();const n=kC(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},SS=(e,t,n,r)=>{let o=n;const i=e.doc,s=i.clientID,a=i.store,l=n===null?t._start:n.right;let c=[];const u=()=>{c.length>0&&(o=new Ln(wt(s,Rr(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new lh(c)),o.integrate(e,0),c=[])};r.forEach(f=>{if(f===null)c.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(f);break;default:switch(u(),f.constructor){case Uint8Array:case ArrayBuffer:o=new Ln(wt(s,Rr(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new Gb(new Uint8Array(f))),o.integrate(e,0);break;case Wm:o=new Ln(wt(s,Rr(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new qb(f)),o.integrate(e,0);break;default:if(f instanceof wo)o=new Ln(wt(s,Rr(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new rl(f)),o.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},rW=()=>bd("Length exceeded!"),oW=(e,t,n,r)=>{if(n>t._length)throw rW();if(n===0)return t._searchMarker&&V0(t._searchMarker,n,r.length),SS(e,t,null,r);const o=n,i=kC(t,n);let s=t._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&$i(e,wt(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&V0(t._searchMarker,o,r.length),SS(e,t,s,r)},e1e=(e,t,n)=>{let o=(t._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:t._start}).p;if(o)for(;o.right;)o=o.right;return SS(e,t,o,n)},iW=(e,t,n,r)=>{if(r===0)return;const o=n,i=r,s=kC(t,n);let a=t._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&$i(e,wt(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&$i(e,wt(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw rW();t._searchMarker&&V0(t._searchMarker,o,-i+r)},kS=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},v4=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,s=i.clientID;let a;if(r==null)a=new lh([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new lh([r]);break;case Uint8Array:a=new Gb(r);break;case Wm:a=new qb(r);break;default:if(r instanceof wo)a=new rl(r);else throw new Error("Unexpected content type")}new Ln(wt(s,Rr(i.store,s)),o,o&&o.lastId,null,null,t,n,a).integrate(e,0)},w4=(e,t)=>{e.doc??Qo();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},sW=e=>{const t={};return e.doc??Qo(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},aW=(e,t)=>{e.doc??Qo();const n=e._map.get(t);return n!==void 0&&!n.deleted},t1e=(e,t)=>{const n={};return e._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;i!==null&&kf(i,t)&&(n[o]=i.content.getContent()[i.length-1])}),n},nw=e=>(e.doc??Qo(),bve(e._map.entries(),t=>!t[1].deleted));class n1e extends SC{}class im extends wo{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new im;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new im}clone(){const t=new im;return t.insert(0,this.toArray().map(n=>n instanceof wo?n.clone():n)),t}get length(){return this.doc??Qo(),this._length}_callObserver(t,n){super._callObserver(t,n),CC(this,t,new n1e(this,t))}insert(t,n){this.doc!==null?En(this.doc,r=>{oW(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?En(this.doc,n=>{e1e(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?En(this.doc,r=>{iW(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return nW(this,t)}toArray(){return QZ(this)}slice(t=0,n=this.length){return XZ(this,t,n)}toJSON(){return this.map(t=>t instanceof wo?t.toJSON():t)}map(t){return tW(this,t)}forEach(t){F0(this,t)}[Symbol.iterator](){return Qve(this)}_write(t){t.writeTypeRef(_1e)}}const r1e=e=>new im;class o1e extends SC{constructor(t,n,r){super(t,n),this.keysChanged=r}}class Cm extends wo{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new Cm}clone(){const t=new Cm;return this.forEach((n,r)=>{t.set(r,n instanceof wo?n.clone():n)}),t}_callObserver(t,n){CC(this,t,new o1e(this,t,n))}toJSON(){this.doc??Qo();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];t[r]=o instanceof wo?o.toJSON():o}}),t}get size(){return[...nw(this)].length}keys(){return D_(nw(this),t=>t[0])}values(){return D_(nw(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return D_(nw(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??Qo(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?En(this.doc,n=>{kS(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?En(this.doc,r=>{v4(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return w4(this,t)}has(t){return aW(this,t)}clear(){this.doc!==null?En(this.doc,t=>{this.forEach(function(n,r,o){kS(t,o,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(A1e)}}const i1e=e=>new Cm,ld=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&Gbe(e,t);class DR{constructor(t,n,r,o){this.left=t,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&Es(),this.right.content.constructor){case Hr:this.right.deleted||Km(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const X6=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case Hr:t.right.deleted||Km(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&$i(e,wt(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},rw=(e,t,n,r)=>{const o=new Map,i=r?kC(t,n):null;if(i){const s=new DR(i.p.left,i.p,i.index,o);return X6(e,s,n-i.index)}else{const s=new DR(null,t._start,0,o);return X6(e,s,n)}},lW=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Hr&&ld(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach((s,a)=>{const l=n.left,c=n.right,u=new Ln(wt(i,Rr(o.store,i)),l,l&&l.lastId,c,c&&c.id,t,null,new Hr(a,s));u.integrate(e,0),n.right=u,n.forward()})},Km=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},cW=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===Hr&&ld(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},uW=(e,t,n,r)=>{const o=e.doc,i=o.clientID,s=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!ld(c,l)){s.set(a,c);const{left:u,right:f}=n;n.right=new Ln(wt(i,Rr(o.store,i)),u,u&&u.lastId,f,f&&f.id,t,null,new Hr(a,l)),n.right.integrate(e,0),n.forward()}}return s},j_=(e,t,n,r,o)=>{n.currentAttributes.forEach((p,m)=>{o[m]===void 0&&(o[m]=null)});const i=e.doc,s=i.clientID;cW(n,o);const a=uW(e,t,n,o),l=r.constructor===String?new Xa(r):r instanceof wo?new rl(r):new wh(r);let{left:c,right:u,index:f}=n;t._searchMarker&&V0(t._searchMarker,n.index,l.getLength()),u=new Ln(wt(s,Rr(i.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=f,n.forward(),lW(e,t,n,a)},Q6=(e,t,n,r,o)=>{const i=e.doc,s=i.clientID;cW(n,o);const a=uW(e,t,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Hr));){if(!n.right.deleted)switch(n.right.content.constructor){case Hr:{const{key:l,value:c}=n.right.content,u=o[l];if(u!==void 0){if(ld(u,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(e)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&$i(e,wt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Ln(wt(s,Rr(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Xa(l)),n.right.integrate(e,0),n.forward()}lW(e,t,n,a)},dW=(e,t,n,r,o)=>{let i=t;const s=fa();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===Hr){const c=i.content;s.set(c.key,c)}i=i.right}let a=0,l=!1;for(;t!==i;){if(n===t&&(l=!0),!t.deleted){const c=t.content;switch(c.constructor){case Hr:{const{key:u,value:f}=c,p=r.get(u)??null;(s.get(u)!==c||p===f)&&(t.delete(e),a++,!l&&(o.get(u)??null)===f&&p!==f&&(p===null?o.delete(u):o.set(u,p))),!l&&!t.deleted&&Km(o,c);break}}}t=t.right}return a},s1e=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Hr){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},a1e=e=>{let t=0;return En(e.doc,n=>{let r=e._start,o=e._start,i=fa();const s=TR(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case Hr:Km(s,o.content);break;default:t+=dW(n,r,o,i,s),i=TR(s),r=o;break}o=o.right}}),t},l1e=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&qZ(e,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===Hr&&s.constructor!==oa&&t.add(s.parent)})}En(n,r=>{vd(e,e.deleteSet,o=>{if(o instanceof oa||!o.parent._hasFormatting||t.has(o.parent))return;const i=o.parent;o.content.constructor===Hr?t.add(i):s1e(r,o)});for(const o of t)a1e(o)})},e8=(e,t,n)=>{const r=n,o=TR(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case rl:case wh:case Xa:n<t.right.length&&$i(e,wt(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&dW(e,i,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&V0(s._searchMarker,t.index,-r+n),t};class c1e extends SC{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];En(t,r=>{const o=new Map,i=new Map;let s=this.target._start,a=null;const l={};let c="",u=0,f=0;const p=()=>{if(a!==null){let m=null;switch(a){case"delete":f>0&&(m={delete:f}),f=0;break;case"insert":(typeof c=="object"||c.length>0)&&(m={insert:c},o.size>0&&(m.attributes={},o.forEach((y,b)=>{y!==null&&(m.attributes[b]=y)}))),c="";break;case"retain":u>0&&(m={retain:u},Hbe(l)||(m.attributes=Vbe({},l))),u=0;break}m&&n.push(m),a=null}};for(;s!==null;){switch(s.content.constructor){case rl:case wh:this.adds(s)?this.deletes(s)||(p(),a="insert",c=s.content.getContent()[0],p()):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),f+=1):s.deleted||(a!=="retain"&&(p(),a="retain"),u+=1);break;case Xa:this.adds(s)?this.deletes(s)||(a!=="insert"&&(p(),a="insert"),c+=s.content.str):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),f+=s.length):s.deleted||(a!=="retain"&&(p(),a="retain"),u+=s.length);break;case Hr:{const{key:m,value:y}=s.content;if(this.adds(s)){if(!this.deletes(s)){const b=o.get(m)??null;ld(b,y)?y!==null&&s.delete(r):(a==="retain"&&p(),ld(y,i.get(m)??null)?delete l[m]:l[m]=y)}}else if(this.deletes(s)){i.set(m,y);const b=o.get(m)??null;ld(b,y)||(a==="retain"&&p(),l[m]=b)}else if(!s.deleted){i.set(m,y);const b=l[m];b!==void 0&&(ld(b,y)?b!==null&&s.delete(r):(a==="retain"&&p(),y===null?delete l[m]:l[m]=y))}s.deleted||(a==="insert"&&p(),Km(o,s.content));break}}s=s.right}for(p();n.length>0;){const m=n[n.length-1];if(m.retain!==void 0&&m.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class wd extends wo{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Qo(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new wd}clone(){const t=new wd;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new c1e(this,t,n);CC(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??Qo();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Xa&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?En(this.doc,r=>{const o=new DR(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const s=t[i];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&i===t.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&j_(r,this,o,a,s.attributes||{})}else s.retain!==void 0?Q6(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&e8(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??Qo();const o=[],i=new Map,s=this.doc;let a="",l=this._start;function c(){if(a.length>0){const f={};let p=!1;i.forEach((y,b)=>{p=!0,f[b]=y});const m={insert:a};p&&(m.attributes=f),o.push(m),a=""}}const u=()=>{for(;l!==null;){if(kf(l,t)||n!==void 0&&kf(l,n))switch(l.content.constructor){case Xa:{const f=i.get("ychange");t!==void 0&&!kf(l,t)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(c(),i.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!kf(l,n)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(c(),i.set("ychange",r?r("added",l.id):{type:"added"})):f!==void 0&&(c(),i.delete("ychange")),a+=l.content.str;break}case rl:case wh:{c();const f={insert:l.content.getContent()[0]};if(i.size>0){const p={};f.attributes=p,i.forEach((m,y)=>{p[y]=m})}o.push(f);break}case Hr:kf(l,t)&&(c(),Km(i,l.content));break}l=l.right}c()};return t||n?En(s,f=>{t&&OR(f,t),n&&OR(f,n),u()},"cleanup"):u(),o}insert(t,n,r){if(n.length<=0)return;const o=this.doc;o!==null?En(o,i=>{const s=rw(i,this,t,!r);r||(r={},s.currentAttributes.forEach((a,l)=>{r[l]=a})),j_(i,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const o=this.doc;o!==null?En(o,i=>{const s=rw(i,this,t,!r);j_(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?En(r,o=>{e8(o,rw(o,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const o=this.doc;o!==null?En(o,i=>{const s=rw(i,this,t,!1);s.right!==null&&Q6(i,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?En(this.doc,n=>{kS(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?En(this.doc,r=>{v4(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return w4(this,t)}getAttributes(){return sW(this)}_write(t){t.writeTypeRef(M1e)}}const u1e=e=>new wd;class z_{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??Qo()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===fi||n.constructor===ah)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class ah extends wo{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ah}clone(){const t=new ah;return t.insert(0,this.toArray().map(n=>n instanceof wo?n.clone():n)),t}get length(){return this.doc??Qo(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new z_(this,t)}querySelector(t){t=t.toUpperCase();const r=new z_(this,o=>o.nodeName&&o.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),yd(new z_(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){CC(this,t,new h1e(this,n,t))}toString(){return tW(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const o=t.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),F0(this,i=>{o.insertBefore(i.toDOM(t,n,r),null)}),o}insert(t,n){this.doc!==null?En(this.doc,r=>{oW(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)En(this.doc,r=>{const o=t&&t instanceof wo?t._item:t;SS(r,this,o,n)});else{const r=this._prelimContent,o=t===null?0:r.findIndex(i=>i===t)+1;if(o===0&&t!==null)throw bd("Reference item not found");r.splice(o,0,...n)}}delete(t,n=1){this.doc!==null?En(this.doc,r=>{iW(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return QZ(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return nW(this,t)}slice(t=0,n=this.length){return XZ(this,t,n)}forEach(t){F0(this,t)}_write(t){t.writeTypeRef(N1e)}}const d1e=e=>new ah;class fi extends ah{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new fi(this.nodeName)}clone(){const t=new fi(this.nodeName),n=this.getAttributes();return Fbe(n,(r,o)=>{typeof r=="string"&&t.setAttribute(o,r)}),t.insert(0,this.toArray().map(r=>r instanceof wo?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const a in t)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+t[l]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?En(this.doc,n=>{kS(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?En(this.doc,r=>{v4(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return w4(this,t)}hasAttribute(t){return aW(this,t)}getAttributes(t){return t?t1e(this,t):sW(this)}toDOM(t=document,n={},r){const o=t.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const a=i[s];typeof a=="string"&&o.setAttribute(s,a)}return F0(this,s=>{o.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(R1e),t.writeKey(this.nodeName)}}const f1e=e=>new fi(e.readKey());class h1e extends SC{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class CS extends Cm{constructor(t){super(),this.hookName=t}_copy(){return new CS(this.hookName)}clone(){const t=new CS(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(I1e),t.writeKey(this.hookName)}}const p1e=e=>new CS(e.readKey());class xs extends wd{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new xs}clone(){const t=new xs;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const o=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(t=>{const n=[];for(const o in t.attributes){const i=[];for(const s in t.attributes[o])i.push({key:s,value:t.attributes[o][s]});i.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const a=i.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(O1e)}}const m1e=e=>new xs;class x4{constructor(t,n){this.id=t,this.length=n}get deleted(){throw Za()}mergeWith(t){return!1}write(t,n,r){throw Za()}integrate(t,n){throw Za()}}const g1e=0;class oa extends x4{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),GZ(t.doc.store,this)}write(t,n){t.writeInfo(g1e),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Gb{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Gb(this.content)}splice(t){throw Za()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const y1e=e=>new Gb(e.readBuf());class H0{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new H0(this.len)}splice(t){const n=new H0(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){L0(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const b1e=e=>new H0(e.readLen()),fW=(e,t)=>new Wm({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class qb{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new qb(fW(this.doc.guid,this.opts))}splice(t){throw Za()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const v1e=e=>new qb(fW(e.readString(),e.readAny()));class wh{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new wh(this.embed)}splice(t){throw Za()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const w1e=e=>new wh(e.readJSON());class Hr{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Hr(this.key,this.value)}splice(t){throw Za()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const x1e=e=>new Hr(e.readKey(),e.readJSON());class ES{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ES(this.arr)}splice(t){const n=new ES(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const S1e=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const o=e.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new ES(n)},k1e=vS("node_env")==="development";class lh{constructor(t){this.arr=t,k1e&&xZ(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new lh(this.arr)}splice(t){const n=new lh(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeAny(i)}}getRef(){return 8}}const C1e=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new lh(n)};class Xa{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Xa(this.str)}splice(t){const n=new Xa(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const E1e=e=>new Xa(e.readString()),T1e=[r1e,i1e,u1e,f1e,d1e,p1e,m1e],_1e=0,A1e=1,M1e=2,R1e=3,N1e=4,I1e=5,O1e=6;class rl{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new rl(this.type._copy())}splice(t){throw Za()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const P1e=e=>new rl(T1e[e.readTypeRef()](e)),$R=(e,t)=>{let n=t,r=0,o;do r>0&&(n=wt(n.client,n.clock+r)),o=om(e,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof Ln);return{item:o,diff:r}},S4=(e,t)=>{for(;e!==null&&e.keep!==t;)e.keep=t,e=e.parent._item},TS=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Ln(wt(r,o+n),t,wt(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=wt(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i},t8=(e,t)=>ebe(e,n=>qm(n.deletions,t)),hW=(e,t,n,r,o,i)=>{const s=e.doc,a=s.store,l=s.clientID,c=t.redone;if(c!==null)return $i(e,c);let u=t.parent._item,f=null,p;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!n.has(u)||hW(e,u,n,r,o,i)===null))return null;for(;u.redone!==null;)u=$i(e,u.redone)}const m=u===null?t.parent:u.content.type;if(t.parentSub===null){for(f=t.left,p=t;f!==null;){let S=f;for(;S!==null&&S.parent._item!==u;)S=S.redone===null?null:$i(e,S.redone);if(S!==null&&S.parent._item===u){f=S;break}f=f.left}for(;p!==null;){let S=p;for(;S!==null&&S.parent._item!==u;)S=S.redone===null?null:$i(e,S.redone);if(S!==null&&S.parent._item===u){p=S;break}p=p.right}}else if(p=null,t.right&&!o){for(f=t;f!==null&&f.right!==null&&(f.right.redone||qm(r,f.right.id)||t8(i.undoStack,f.right.id)||t8(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=$i(e,f.redone);if(f&&f.right!==null)return null}else f=m._map.get(t.parentSub)||null;const y=Rr(a,l),b=wt(l,y),x=new Ln(b,f,f&&f.lastId,p,p&&p.id,m,t.parentSub,t.content.copy());return t.redone=b,S4(x,!0),x.integrate(e,0),x};let Ln=class LR extends x4{constructor(t,n,r,o,i,s,a,l){super(t,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?M6:0}set marker(t){(this.info&I_)>0!==t&&(this.info^=I_)}get marker(){return(this.info&I_)>0}get keep(){return(this.info&A6)>0}set keep(t){this.keep!==t&&(this.info^=A6)}get countable(){return(this.info&M6)>0}get deleted(){return(this.info&N_)>0}set deleted(t){this.deleted!==t&&(this.info^=N_)}markDeleted(){this.info|=N_}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Rr(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Rr(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===rm&&this.id.client!==this.parent.client&&this.parent.clock>=Rr(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=q6(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=$i(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===oa||this.right&&this.right.constructor===oa)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===LR?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===LR&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===rm){const r=om(n,this.parent);r.constructor===oa?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=q6(t,t.doc.store,wt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),Bp(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(Bp(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(om(t.doc.store,o.origin)))i.has(om(t.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),GZ(t.doc.store,this),this.content.integrate(t,this),W6(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new oa(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:wt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Bp(t.origin,this.lastId)&&this.right===t&&Bp(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),L0(t.deleteSet,this.id.client,this.id.clock,this.length),W6(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw Es();this.content.gc(t),n?jve(t,this,new oa(this.id,this.length)):this.content=new H0(this.length)}write(t,n){const r=n>0?wt(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&vC|(r===null?0:mi)|(o===null?0:qc)|(i===null?0:P0);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),o!==null&&t.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=j0(a);t.writeParentInfo(!0),t.writeString(c)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===rm?(t.writeParentInfo(!1),t.writeLeftID(a)):Es();i!==null&&t.writeString(i)}this.content.write(t,n)}};const pW=(e,t)=>D1e[t&vC](e),D1e=[()=>{Es()},b1e,S1e,y1e,E1e,w1e,x1e,P1e,C1e,v1e,()=>{Es()}],$1e=10;class ia extends x4{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){Es()}write(t,n){t.writeInfo($1e),zt(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const mW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},gW="__ $YJS$ __";mW[gW]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");mW[gW]=!0;const L1e=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}},j1e=/[\uD800-\uDBFF]/,z1e=/[\uDC00-\uDFFF]/,B1e=(e,t)=>{let n=0,r=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&j1e.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&z1e.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}},V1e=B1e,sn=new Bt("y-sync"),aa=new Bt("y-undo"),Oy=new Bt("yjs-cursor"),Vl=(e,t)=>e>>>t|e<<32-t,F1e=e=>Vl(e,2)^Vl(e,13)^Vl(e,22),H1e=e=>Vl(e,6)^Vl(e,11)^Vl(e,25),U1e=e=>Vl(e,7)^Vl(e,18)^e>>>3,G1e=e=>Vl(e,17)^Vl(e,19)^e>>>10,q1e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Z1e=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class W1e{constructor(){const t=new ArrayBuffer(320);this._H=new Uint32Array(t,0,8),this._H.set(Z1e),this._W=new Uint32Array(t,64,64)}_updateHash(){const t=this._H,n=this._W;for(let f=16;f<64;f++)n[f]=G1e(n[f-2])+n[f-7]+U1e(n[f-15])+n[f-16];let r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7];for(let f=0,p,m;f<64;f++)p=u+H1e(a)+(a&l^~a&c)+q1e[f]+n[f]>>>0,m=F1e(r)+(r&o^r&i^o&i)>>>0,u=c,c=l,l=a,a=s+p>>>0,s=i,i=o,o=r,r=p+m>>>0;t[0]+=r,t[1]+=o,t[2]+=i,t[3]+=s,t[4]+=a,t[5]+=l,t[6]+=c,t[7]+=u}digest(t){let n=0;for(;n+56<=t.length;){let s=0;for(;s<16&&n+3<t.length;s++)this._W[s]=t[n++]<<24|t[n++]<<16|t[n++]<<8|t[n++];if(n%64!==0){for(this._W.fill(0,s,16);n<t.length;)this._W[s]|=t[n]<<(3-n%4)*8,n++;this._W[s]|=mi<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<t.length;o++)for(let s=3;s>=0&&n<t.length;s--)this._W[o]|=t[n++]<<s*8;r||(this._W[o-(n%4===0?0:1)]|=mi<<(3-n%4)*8),this._W[14]=t.byteLength/tbe,this._W[15]=t.byteLength*8,this._updateHash();const i=new Uint8Array(32);for(let s=0;s<this._H.length;s++)for(let a=0;a<4;a++)i[s*4+a]=this._H[s]>>>(3-a)*8;return i}}const K1e=e=>new W1e().digest(e),Y1e=e=>{for(let n=6;n<e.length;n++)e[n%6]=e[n%6]^e[n];return e.slice(0,6)},J1e=e=>tve(Y1e(K1e(rve(e)))),_S=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!qm(t.ds,e.id),X1e=[{light:"#ecd44433",dark:"#ecd444"}],Q1e=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const r=ih();e.forEach(o=>r.add(o)),t=t.filter(o=>!r.has(o))}e.set(n,Pbe(t))}return e.get(n)},ewe=(e,{colors:t=X1e,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:i}={})=>{let s=!1;const a=new nwe(e,i),l=new St({props:{editable:c=>{const u=sn.getState(c);return u.snapshot==null&&u.prevSnapshot==null}},key:sn,state:{init:(c,u)=>({type:e,doc:e.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:n,permanentUserData:r}),apply:(c,u)=>{const f=c.getMeta(sn);if(f!==void 0){u=Object.assign({},u);for(const p in f)u[p]=f[p]}return u.addToHistory=c.getMeta("addToHistory")!==!1,u.isChangeOrigin=f!==void 0&&!!f.isChangeOrigin,u.isUndoRedoOperation=f!==void 0&&!!f.isChangeOrigin&&!!f.isUndoRedoOperation,a.prosemirrorView!==null&&f!==void 0&&(f.snapshot!=null||f.prevSnapshot!=null)&&l4(0,()=>{a.prosemirrorView!=null&&(f.restore==null?a._renderSnapshot(f.snapshot,f.prevSnapshot,u):(a._renderSnapshot(f.snapshot,f.snapshot,u),delete u.restore,delete u.snapshot,delete u.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),u}},view:c=>(a.initView(c),i==null&&a._forceRerender(),o(),{update:()=>{const u=l.getState(c.state);if(u.snapshot==null&&u.prevSnapshot==null&&(s||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(s=!0,u.addToHistory===!1&&!u.isChangeOrigin){const f=aa.getState(c.state),p=f&&f.undoManager;p&&p.stopCapturing()}a.mux(()=>{u.doc.transact(f=>{f.meta.set("addToHistory",u.addToHistory),a._prosemirrorChanged(c.state.doc)},sn)})}},destroy:()=>{a.destroy()}})});return l},twe=(e,t,n)=>{if(t!==null&&t.anchor!==null&&t.head!==null)if(t.type==="all")e.setSelection(new ji(e.doc));else if(t.type==="node"){const r=Wf(n.doc,n.type,t.anchor,n.mapping);e.setSelection(We.create(e.doc,r))}else{const r=Wf(n.doc,n.type,t.anchor,n.mapping),o=Wf(n.doc,n.type,t.head,n.mapping);if(r!==null&&o!==null){const i=Ve.between(e.doc.resolve(r),e.doc.resolve(o));e.setSelection(i)}}},AS=(e,t)=>({type:t.selection.jsonID,anchor:G0(t.selection.anchor,e.type,e.mapping),head:G0(t.selection.head,e.type,e.mapping)});class nwe{constructor(t,n=new Map){this.type=t,this.prosemirrorView=null,this.mux=L1e(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=AS(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(kZ&&this._domSelectionInView===null&&(l4(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection();if(t==null||t.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),i=ive.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||i.clientWidth||0)&&o.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(t,n){n||(n=HZ(IZ(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(sn,{snapshot:t,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const t=this.type.toArray().map(r=>ux(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Te(pe.from(t),0,0));n.setMeta(sn,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const t=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>ux(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Te(pe.from(n),0,0));if(t){const o=Gc(Ja(t.anchor,0),r.doc.content.size),i=Gc(Ja(t.head,0),r.doc.content.size);r.setSelection(Ve.create(r.doc,o,i))}this.prosemirrorView.dispatch(r.setMeta(sn,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(t,n,r){let o=this.doc,i=this.type;if(t||(t=L_(this.doc)),t instanceof Uint8Array||n instanceof Uint8Array)if((!(t instanceof Uint8Array)||!(n instanceof Uint8Array))&&Es(),o=new Wm({gc:!1}),wS(o,n),n=L_(o),wS(o,t),t=L_(o),i._item===null){const s=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);i=o.getXmlFragment(s)}else{const s=o.store.clients.get(i._item.id.client)??[],a=pa(s,i._item.id.clock);i=s[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(s=>{const a=r.permanentUserData;a&&a.dss.forEach(f=>{vd(s,f,p=>{})});const l=(f,p)=>{const m=f==="added"?a.getUserByClientId(p.client):a.getUserByDeletedId(p);return{user:m,type:f,color:Q1e(r.colorMapping,r.colors,m)}},c=eW(i,new p4(n.ds,t.sv)).map(f=>!f._item.deleted||_S(f._item,t)||_S(f._item,n)?ux(f,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},t,n,l):null).filter(f=>f!==null),u=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Te(pe.from(c),0,0));this.prosemirrorView.dispatch(u.setMeta(sn,{isChangeOrigin:!0}))},sn)})}_typeChanged(t,n){if(this.prosemirrorView==null)return;const r=sn.getState(this.prosemirrorView.state);if(t.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);vd(n,n.deleteSet,a=>{if(a.constructor===Ln){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const i=this.type.toArray().map(a=>yW(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Te(pe.from(i),0,0));twe(s,this.beforeTransactionSelection,this),s=s.setMeta(sn,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof WZ}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&s.scrollIntoView(),this.prosemirrorView.dispatch(s)})}_prosemirrorChanged(t){this.doc.transact(()=>{zR(this.doc,this.type,t,this),this.beforeTransactionSelection=AS(this,this.prosemirrorView.state)},sn)}initView(t){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=t,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const yW=(e,t,n,r,o,i)=>{const s=n.mapping.get(e);if(s===void 0){if(e instanceof fi)return ux(e,t,n,r,o,i);throw Za()}return s},ux=(e,t,n,r,o,i)=>{const s=[],a=l=>{if(l instanceof fi){const c=yW(l,t,n,r,o,i);c!==null&&s.push(c)}else{const c=l._item.right?.content?.type;c instanceof wd&&!c._item.deleted&&c._item.id.client===c.doc.clientID&&(l.applyDelta([{retain:l.length},...c.toDelta()]),c.doc.transact(f=>{c._item.delete(f)}));const u=rwe(l,t,n,r,o,i);u!==null&&u.forEach(f=>{f!==null&&s.push(f)})}};r===void 0||o===void 0?e.toArray().forEach(a):eW(e,new p4(o.ds,r.sv)).forEach(a);try{const l=e.getAttributes(r);r!==void 0&&(_S(e._item,r)?_S(e._item,o)||(l.ychange=i?i("added",e._item.id):{type:"added"}):l.ychange=i?i("removed",e._item.id):{type:"removed"});const c=t.node(e.nodeName,l,s);return n.mapping.set(e,c),c}catch{return e.doc.transact(c=>{e._item.delete(c)},sn),n.mapping.delete(e),null}},rwe=(e,t,n,r,o,i)=>{const s=[],a=e.toDelta(r,o,i);try{for(let l=0;l<a.length;l++){const c=a[l];s.push(t.text(c.insert,cwe(c.attributes,t)))}}catch{return e.doc.transact(c=>{e._item.delete(c)},sn),null}return s},owe=(e,t)=>{const n=new xs,r=e.map(o=>({insert:o.text,attributes:wW(o.marks,t)}));return n.applyDelta(r),t.mapping.set(n,e),n},iwe=(e,t)=>{const n=new fi(e.type.name);for(const r in e.attrs){const o=e.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,EC(e).map(r=>jR(r,t))),t.mapping.set(n,e),n},jR=(e,t)=>e instanceof Array?owe(e,t):iwe(e,t),n8=e=>typeof e=="object"&&e!==null,k4=(e,t)=>{const n=Object.keys(e).filter(o=>e[o]!==null);let r=n.length===(t==null?0:Object.keys(t).filter(o=>t[o]!==null).length);for(let o=0;o<n.length&&r;o++){const i=n[o],s=e[i],a=t[i];r=i==="ychange"||s===a||n8(s)&&n8(a)&&k4(s,a)}return r},EC=e=>{const t=e.content.content,n=[];for(let r=0;r<t.length;r++){const o=t[r];if(o.isText){const i=[];for(let s=t[r];r<t.length&&s.isText;s=t[++r])i.push(s);r--,n.push(i)}else n.push(o)}return n},bW=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((r,o)=>r.insert===t[o].text&&vZ(r.attributes||{}).length===t[o].marks.length&&wZ(r.attributes,(i,s)=>{const a=vW(s),l=t[o].marks;return k4(i,l.find(c=>c.type.name===a)?.attrs)}))},U0=(e,t)=>{if(e instanceof fi&&!(t instanceof Array)&&BR(e,t)){const n=EC(t);return e._length===n.length&&k4(e.getAttributes(),t.attrs)&&e.toArray().every((r,o)=>U0(r,n[o]))}return e instanceof xs&&t instanceof Array&&bW(e,t)},MS=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((n,r)=>t[r]===n),r8=(e,t,n)=>{const r=e.toArray(),o=EC(t),i=o.length,s=r.length,a=Gc(s,i);let l=0,c=0,u=!1;for(;l<a;l++){const f=r[l],p=o[l];if(MS(n.mapping.get(f),p))u=!0;else if(!U0(f,p))break}for(;l+c<a;c++){const f=r[s-c-1],p=o[i-c-1];if(MS(n.mapping.get(f),p))u=!0;else if(!U0(f,p))break}return{equalityFactor:l+c,foundMappedChild:u}},swe=e=>{let t="",n=e._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Xa?t+=n.content.str:n.content instanceof Hr&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}},awe=(e,t,n)=>{n.mapping.set(e,t);const{nAttrs:r,str:o}=swe(e),i=t.map(c=>({insert:c.text,attributes:Object.assign({},r,wW(c.marks,n))})),{insert:s,remove:a,index:l}=V1e(o,i.map(c=>c.insert).join(""));e.delete(l,a),e.insert(l,s),e.applyDelta(i.map(c=>({retain:c.insert.length,attributes:c.attributes})))},lwe=/(.*)(--[a-zA-Z0-9+/=]{8})$/,vW=e=>lwe.exec(e)?.[1]??e,cwe=(e,t)=>{const n=[];for(const r in e)n.push(t.mark(vW(r),e[r]));return n},wW=(e,t)=>{const n={};return e.forEach(r=>{if(r.type.name!=="ychange"){const o=nc(t.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${J1e(r.toJSON())}`:r.type.name]=r.attrs}}),n},zR=(e,t,n,r)=>{if(t instanceof fi&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(t,n),t instanceof fi){const f=t.getAttributes(),p=n.attrs;for(const m in p)p[m]!==null?f[m]!==p[m]&&m!=="ychange"&&t.setAttribute(m,p[m]):t.removeAttribute(m);for(const m in f)p[m]===void 0&&t.removeAttribute(m)}const o=EC(n),i=o.length,s=t.toArray(),a=s.length,l=Gc(i,a);let c=0,u=0;for(;c<l;c++){const f=s[c],p=o[c];if(!MS(r.mapping.get(f),p))if(U0(f,p))r.mapping.set(f,p);else break}for(;u+c<l;u++){const f=s[a-u-1],p=o[i-u-1];if(!MS(r.mapping.get(f),p))if(U0(f,p))r.mapping.set(f,p);else break}e.transact(()=>{for(;a-c-u>0&&i-c-u>0;){const p=s[c],m=o[c],y=s[a-u-1],b=o[i-u-1];if(p instanceof xs&&m instanceof Array)bW(p,m)||awe(p,m,r),c+=1;else{let x=p instanceof fi&&BR(p,m),S=y instanceof fi&&BR(y,b);if(x&&S){const E=r8(p,m,r),T=r8(y,b,r);E.foundMappedChild&&!T.foundMappedChild?S=!1:!E.foundMappedChild&&T.foundMappedChild||E.equalityFactor<T.equalityFactor?x=!1:S=!1}x?(zR(e,p,m,r),c+=1):S?(zR(e,y,b,r),u+=1):(r.mapping.delete(t.get(c)),t.delete(c,1),t.insert(c,[jR(m,r)]),c+=1)}}const f=a-c-u;if(a===1&&i===0&&s[0]instanceof xs?(r.mapping.delete(s[0]),s[0].delete(0,s[0].length)):f>0&&(t.slice(c,c+f).forEach(p=>r.mapping.delete(p)),t.delete(c,f)),c+u<i){const p=[];for(let m=c;m<i-u;m++)p.push(jR(o[m],r));t.insert(c,p)}},sn)},BR=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name;let n0=null;const uwe=()=>{const e=n0;n0=null,e.forEach((t,n)=>{const r=n.state.tr,o=sn.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(t.forEach((i,s)=>{r.setMeta(s,i)}),n.dispatch(r))})},dwe=(e,t,n)=>{n0||(n0=new Map,l4(0,uwe)),nc(n0,e,fa).set(t,n)},G0=(e,t,n)=>{if(e===0)return $_(t,0,t.length===0?-1:0);let r=t._first===null?null:t._first.content.type;for(;r!==null&&t!==r;){if(r instanceof xs){if(r._length>=e)return $_(r,e,t.length===0?-1:0);if(e-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,e--;while(r!==t&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==t&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&e<o)r=r._first.content.type,e--;else{if(e===1&&r._length===0&&o>1)return new B0(r._item===null?null:r._item.id,r._item===null?j0(r):null,null);if(e-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(e===0)return r=r._item===null?r:r._item.parent,new B0(r._item===null?null:r._item.id,r._item===null?j0(r):null,null);do r=r._item.parent,e--;while(r!==t&&r._item.next===null);r!==t&&(r=r._item.next.content.type)}}}if(r===null)throw Es();if(e===0&&r.constructor!==xs&&r!==t)return fwe(r._item.parent,r._item)}return $_(t,t._length,t.length===0?-1:0)},fwe=(e,t)=>{let n=null,r=null;return e._item===null?r=j0(e):n=wt(e._item.id.client,e._item.id.clock),new B0(n,r,t.id)},Wf=(e,t,n,r)=>{const o=$ve(n,e);if(o===null||o.type!==t&&!z0(t,o.type._item))return null;let i=o.type,s=0;if(i.constructor===xs)s=o.index;else if(i._item===null||!i._item.deleted){let a=i._first,l=0;for(;l<i._length&&l<o.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof xs?s+=c._length:s+=r.get(c).nodeSize}a=a.right}s+=1}for(;i!==t&&i._item!==null;){const a=i._item.parent;if(a._item===null||!a._item.deleted){s+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===i)break;l.deleted||(c instanceof xs?s+=c._length:s+=r.get(c).nodeSize),l=l.right}}i=a}return s-1},hwe=(e,t,n)=>e!==t,pwe=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);const r=document.createTextNode(""),o=document.createTextNode("");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(o,null),t},C4=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),mwe=/^#[0-9a-fA-F]{6}$/,o8=(e,t,n,r,o)=>{const i=sn.getState(e),s=i.doc,a=[];return i.snapshot!=null||i.prevSnapshot!=null||i.binding.mapping.size===0?Rt.create(e.doc,[]):(t.getStates().forEach((l,c)=>{if(n(s.clientID,c,l)&&l.cursor!=null){const u=l.user||{};u.color==null?u.color="#ffa500":mwe.test(u.color)||console.warn("A user uses an unsupported color format",u),u.name==null&&(u.name=`User: ${c}`);let f=Wf(s,i.type,t0(l.cursor.anchor),i.binding.mapping),p=Wf(s,i.type,t0(l.cursor.head),i.binding.mapping);if(f!==null&&p!==null){const m=Ja(e.doc.content.size-1,0);f=Gc(f,m),p=Gc(p,m),a.push(Gt.widget(p,()=>r(u,c),{key:c+"",side:10}));const y=Gc(f,p),b=Ja(f,p);a.push(Gt.inline(y,b,o(u,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Rt.create(e.doc,a))},gwe=(e,{awarenessStateFilter:t=hwe,cursorBuilder:n=pwe,selectionBuilder:r=C4,getSelection:o=s=>s.selection}={},i="cursor")=>new St({key:Oy,state:{init(s,a){return o8(a,e,t,n,r)},apply(s,a,l,c){const u=sn.getState(c),f=s.getMeta(Oy);return u&&u.isChangeOrigin||f&&f.awarenessUpdated?o8(c,e,t,n,r):a.map(s.mapping,s.doc)}},props:{decorations:s=>Oy.getState(s)},view:s=>{const a=()=>{s.docView&&dwe(s,Oy,{awarenessUpdated:!0})},l=()=>{const c=sn.getState(s.state),u=e.getLocalState()||{};if(s.hasFocus()){const f=o(s.state),p=G0(f.anchor,c.type,c.binding.mapping),m=G0(f.head,c.type,c.binding.mapping);(u.cursor==null||!G6(t0(u.cursor.anchor),p)||!G6(t0(u.cursor.head),m))&&e.setLocalStateField(i,{anchor:p,head:m})}else u.cursor!=null&&Wf(c.doc,c.type,t0(u.cursor.anchor),c.binding.mapping)!==null&&e.setLocalStateField(i,null)};return e.on("change",a),s.dom.addEventListener("focusin",l),s.dom.addEventListener("focusout",l),{update:l,destroy:()=>{s.dom.removeEventListener("focusin",l),s.dom.removeEventListener("focusout",l),e.off("change",a),e.setLocalStateField(i,null)}}}}),ywe=e=>aa.getState(e)?.undoManager?.undo()!=null,bwe=e=>aa.getState(e)?.undoManager?.redo()!=null,vwe=(e,t)=>t==null?aa.getState(e)?.undoManager?.canUndo():ywe(e),wwe=(e,t)=>t==null?aa.getState(e)?.undoManager?.canRedo():bwe(e),xwe=new Set(["paragraph"]),Swe=(e,t)=>!(e instanceof Ln)||!(e.content instanceof rl)||!(e.content.type instanceof wd||e.content.type instanceof fi&&t.has(e.content.type.nodeName))||e.content.type._length===0,kwe=({protectedNodes:e=xwe,trackedOrigins:t=[],undoManager:n=null}={})=>new St({key:aa,state:{init:(r,o)=>{const i=sn.getState(o),s=n||new WZ(i.type,{trackedOrigins:new Set([sn].concat(t)),deleteFilter:a=>Swe(a,e),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(r,o,i,s)=>{const a=sn.getState(s).binding,l=o.undoManager,c=l.undoStack.length>0,u=l.redoStack.length>0;return a?{undoManager:l,prevSel:AS(a,i),hasUndoOps:c,hasRedoOps:u}:c!==o.hasUndoOps||u!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=sn.getState(r.state),i=aa.getState(r.state).undoManager;return i.on("stack-item-added",({stackItem:s})=>{const a=o.binding;a&&s.meta.set(a,aa.getState(r.state).prevSel)}),i.on("stack-item-popped",({stackItem:s})=>{const a=o.binding;a&&(a.beforeTransactionSelection=s.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{i.destroy()}}}});function Cwe(e={}){return new St({view(t){return new Ewe(t,e)}})}class Ewe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return t.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,o=this.editorView.dom,i=o.getBoundingClientRect(),s=i.width/o.offsetWidth,a=i.height/o.offsetHeight;if(n){let f=t.nodeBefore,p=t.nodeAfter;if(f||p){let m=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(m){let y=m.getBoundingClientRect(),b=f?y.bottom:y.top;f&&p&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*a;r={left:y.left,right:y.right,top:b-x,bottom:b+x}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,m=f.height/l.offsetHeight;c=f.left-l.scrollLeft*p,u=f.top-l.scrollTop*m}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,t):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=vG(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const xW={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:e=>`${e} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var Twe=Object.defineProperty,_we=(e,t,n)=>t in e?Twe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ne=(e,t,n)=>_we(e,typeof t!="symbol"?t+"":t,n);function Awe(e,t=JSON.stringify){const n={};return e.filter(r=>{const o=t(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function Mwe(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Awe(t)}const TC=Mn.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const e=window.__TEST_OPTIONS;return e.mockID===void 0?e.mockID=0:e.mockID++,e.mockID.toString()}return Fq()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:e=>e.getAttribute(`data-${this.options.attributeName}`),renderHTML:e=>{const t={[`data-${this.options.attributeName}`]:e[this.options.attributeName]};return this.options.setIdAttribute?{...t,id:e[this.options.attributeName]}:t}}}}]},addProseMirrorPlugins(){let e=null,t=!1;return[new St({key:new Bt("uniqueID"),appendTransaction:(n,r,o)=>{const i=n.some(m=>m.docChanged)&&!r.doc.eq(o.doc),s=this.options.filterTransaction&&n.some(m=>{let y,b;return!(!((b=(y=this.options).filterTransaction)===null||b===void 0)&&b.call(y,m))});if(!i||s)return;const{tr:a}=o,{types:l,attributeName:c,generateID:u}=this.options,f=zO(r.doc,n),{mapping:p}=f;if(Oq(f).forEach(({newRange:m})=>{const y=Nq(o.doc,m,S=>l.includes(S.type.name)),b=y.map(({node:S})=>S.attrs[c]).filter(S=>S!==null),x=Mwe(b);y.forEach(({node:S,pos:E})=>{let T;const A=(T=a.doc.nodeAt(E))===null||T===void 0?void 0:T.attrs[c];if(A===null){const R=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(R)===null){const O=JSON.parse(JSON.stringify(o.doc.toJSON()));if(O.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(O.content)===JSON.stringify(R.toJSON())){a.setNodeMarkup(E,void 0,{...S.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(E,void 0,{...S.attrs,[c]:u()});return}const{deleted:M}=p.invert().mapResult(E);M&&x.includes(A)&&a.setNodeMarkup(E,void 0,{...S.attrs,[c]:u()})})}),!!a.steps.length)return a},view(n){const r=o=>{let i;e=!((i=n.dom.parentElement)===null||i===void 0)&&i.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return e!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?t=!0:t=!1,e=null,!1},paste:()=>(t=!0,!1)},transformPasted:n=>{if(!t)return n;const{types:r,attributeName:o}=this.options,i=s=>{const a=[];return s.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(i(l.content)));return}const c=l.type.create({...l.attrs,[o]:null},i(l.content),l.marks);a.push(c)}),pe.from(a)};return t=!1,new Te(i(n.content),n.openStart,n.openEnd)}}})]}});function i8(e){return e.type==="link"}function SW(e){return typeof e!="string"&&e.type==="link"}function ch(e){return typeof e!="string"&&e.type==="text"}function xd(e){var t,n,r,o,i;return Sd(e)?{...e}:q0(e)?{type:"tableCell",content:[].concat(e.content),props:{backgroundColor:((t=e.props)==null?void 0:t.backgroundColor)??"default",textColor:((n=e.props)==null?void 0:n.textColor)??"default",textAlignment:((r=e.props)==null?void 0:r.textAlignment)??"left",colspan:((o=e.props)==null?void 0:o.colspan)??1,rowspan:((i=e.props)==null?void 0:i.rowspan)??1}}:{type:"tableCell",content:[].concat(e),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function q0(e){return e!=null&&typeof e!="string"&&!Array.isArray(e)&&e.type==="tableCell"}function Sd(e){return q0(e)&&e.props!==void 0&&e.content!==void 0}function uh(e){return Sd(e)?e.props.colspan??1:1}function Z0(e){return Sd(e)?e.props.rowspan??1:1}let ma=class extends Error{constructor(t){super(`Unreachable case: ${t}`)}};function Tt(e,t=!0){const{"data-test":n,...r}=e;if(Object.keys(r).length>0&&t)throw new Error("Object must be empty "+JSON.stringify(e))}const Rwe=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function ms(e,t="Ctrl"){return Rwe()?e.replace("Mod",""):e.replace("Mod",t)}function _n(...e){return[...new Set(e.filter(t=>t).join(" ").split(" "))].join(" ")}const VR=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Ts(e,t,n,r){const o=document.createElement("div");o.className=_n("bn-block-content",n.class),o.setAttribute("data-content-type",e);for(const[s,a]of Object.entries(n))s!=="class"&&o.setAttribute(s,a);const i=document.createElement(t);i.className=_n("bn-inline-content",r.class);for(const[s,a]of Object.entries(r))s!=="class"&&i.setAttribute(s,a);return o.appendChild(i),{dom:o,contentDOM:i}}const s8=(e,t)=>{let n=xh(e,t.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=t.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o};function Nwe(e){const t=e.querySelectorAll("p");if(t.length>1){const n=t[0];for(let r=1;r<t.length;r++){const o=t[r];n.innerHTML+="<br>"+o.innerHTML,o.remove()}}}const Nr={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},E4=["backgroundColor","textColor"];function RS(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function a8(e){const t=e.split("/");return!t.length||t[t.length-1]===""?e:t[t.length-1]}function Zb(e){const t={};return Object.entries(e).filter(([n,r])=>!E4.includes(n)).forEach(([n,r])=>{t[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const i=o.getAttribute(RS(n));if(i===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return i==="true"?!0:i==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const s=parseFloat(i);return!Number.isNaN(s)&&Number.isFinite(s)?s:null}return i},renderHTML:o=>o[n]!==r.default?{[RS(n)]:o[n]}:{}}}),t}function _C(e,t,n,r){if(typeof e=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=e(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw new Error("Block doesn't have id");const s=t.getBlock(i);if(s.type!==r)throw new Error("Block type does not match");return s}function Py(e,t,n,r,o=!1,i){const s=document.createElement("div");if(i!==void 0)for(const[a,l]of Object.entries(i))a!=="class"&&s.setAttribute(a,l);s.className=_n("bn-block-content",i?.class||""),s.setAttribute("data-content-type",t);for(const[a,l]of Object.entries(n)){const c=r[a].default;!E4.includes(a)&&l!==c&&s.setAttribute(RS(a),l)}return o&&s.setAttribute("data-file-block",""),s.appendChild(e.dom),e.contentDOM!==void 0&&(e.contentDOM.className=_n("bn-inline-content",e.contentDOM.className)),{...e,dom:s}}function Os(e){return Ql.create(e)}function T4(e,t){return{config:e,implementation:t}}function rc(e,t,n){return T4({type:e.name,content:e.config.content==="inline*"?"inline":e.config.content==="tableRow+"?"table":"none",propSchema:t},{node:e,requiredExtensions:n,toInternalHTML:s8,toExternalHTML:s8})}function kW(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n.config]))}function CW(e,t){e.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{t.view.dom.blur()},10),!0)}function EW(e,t){const n=[{tag:"[data-content-type="+e.type+"]",contentElement:".bn-inline-content"}];return t&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=t?.(r);return o===void 0?!1:o}}),n}function Wb(e,t){const n=Os({name:e.type,content:e.content==="inline"?"inline*":"",group:"blockContent",selectable:e.isSelectable??!0,isolating:!0,addAttributes(){return Zb(e.propSchema)},parseHTML(){return EW(e,t.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Py({dom:o,contentDOM:e.content==="inline"?o:void 0},e.type,{},e.propSchema,e.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const i=this.options.editor,s=_C(r,i,this.editor,e.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=t.render(s,i),c=Py(l,s.type,s.props,e.propSchema,e.isFileBlock,a);return e.isSelectable===!1&&CW(c,this.editor),c}}});if(n.name!==e.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return T4(e,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=t.render(r,o);return Py(a,r.type,r.props,e.propSchema,e.isFileBlock,s)},toExternalHTML:(r,o)=>{var i,s;const a=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{};let l=(s=t.toExternalHTML)==null?void 0:s.call(t,r,o);return l===void 0&&(l=t.render(r,o)),Py(l,r.type,r.props,e.propSchema,a)}})}function Jc(e,t){const n=e.resolve(t);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const i=[];e.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&i.push(l)}),console.warn(`Position ${t} is not within a blockContainer node.`);const s=e.resolve(i.find(a=>a>=t)||i[i.length-1]);return{posBeforeNode:s.pos,node:s.nodeAfter}}function _4(e,t){if(!e.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${e.type.name}`);const n=e,r=t,o=r+n.nodeSize,i={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let s,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const u=l,f=r+c+1,p=f+l.nodeSize;s={node:u,beforePos:f,afterPos:p}}else if(l.type.name==="blockGroup"){const u=l,f=r+c+1,p=f+l.nodeSize;a={node:u,beforePos:f,afterPos:p}}}),!s)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:i,blockContent:s,childContainer:a,blockNoteType:s.node.type.name}}else{if(!i.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${i.node}`);return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}}function kd(e){return _4(e.node,e.posBeforeNode)}function Kb(e){if(!e.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${e.pos} but a node at this position does not exist`);return _4(e.nodeAfter,e.pos)}function Un(e){const t=Jc(e.doc,e.selection.anchor);return kd(t)}function AC(e){const t=Jc(e.doc,e.selection.anchor);return kd(t)}function ro(e){return"doc"in e?e.doc.type.schema:e.type.schema}function TW(e){return e.cached.blockNoteEditor}function Yb(e){return TW(e).schema}function A4(e){return Yb(e).blockSchema}function M4(e){return Yb(e).inlineContentSchema}function Ym(e){return Yb(e).styleSchema}function R4(e){return TW(e).blockCache}function _W(e,t,n){var r,o;const i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},s=[];e.content.forEach((a,l,c)=>{const u={cells:[]};c===0&&a.content.forEach(f=>{let p=f.attrs.colwidth;p==null&&(p=new Array(f.attrs.colspan??1).fill(void 0)),i.columnWidths.push(...p)}),u.cells=a.content.content.map((f,p)=>(s[c]||(s[c]=[]),s[c][p]=f.type.name==="tableHeader",{type:"tableCell",content:f.content.content.map(m=>MC(m,t,n)).reduce((m,y)=>{if(!m.length)return y;const b=m[m.length-1],x=y[0];return x&&ch(b)&&ch(x)&&JSON.stringify(b.styles)===JSON.stringify(x.styles)?(b.text+=`
`+x.text,m.push(...y.slice(1)),m):(m.push(...y),m)},[]),props:{colspan:f.attrs.colspan,rowspan:f.attrs.rowspan,backgroundColor:f.attrs.backgroundColor,textColor:f.attrs.textColor,textAlignment:f.attrs.textAlignment}})),i.rows.push(u)});for(let a=0;a<s.length;a++)(r=s[a])!=null&&r.every(l=>l)&&(i.headerRows=(i.headerRows??0)+1);for(let a=0;a<((o=s[0])==null?void 0:o.length);a++)s!=null&&s.every(l=>l[a])&&(i.headerCols=(i.headerCols??0)+1);return i}function MC(e,t,n){const r=[];let o;return e.content.forEach(i=>{if(i.type.name==="hardBreak"){if(o)if(ch(o))o.text+=`
`;else if(i8(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(i.type.name!=="link"&&i.type.name!=="text"){if(!t[i.type.name]){console.warn("unrecognized inline content type",i.type.name);return}o&&(r.push(o),o=void 0),r.push(Iwe(i,t,n));return}const s={};let a;for(const l of i.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(c.propSchema==="boolean")s[c.type]=!0;else if(c.propSchema==="string")s[c.type]=l.attrs.stringValue;else throw new ma(c.propSchema)}o?ch(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):JSON.stringify(o.styles)===JSON.stringify(s)?o.text+=i.textContent:(r.push(o),o={type:"text",text:i.textContent,styles:s}):i8(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(s)?o.content[o.content.length-1].text+=i.textContent:o.content.push({type:"text",text:i.textContent,styles:s}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):(r.push(o),o={type:"text",text:i.textContent,styles:s})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}:o={type:"text",text:i.textContent,styles:s}}),o&&r.push(o),r}function Iwe(e,t,n){if(e.type.name==="text"||e.type.name==="link")throw new Error("unexpected");const r={},o=t[e.type.name];for(const[s,a]of Object.entries(e.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+e.type.name);const l=o.propSchema;s in l&&(r[s]=a)}let i;return o.content==="styled"?i=MC(e,t,n):i=void 0,{type:e.type.name,props:r,content:i}}function sr(e,t,n=A4(t),r=M4(t),o=Ym(t),i=R4(t)){var s;if(!e.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+e.type.name);const a=i?.get(e);if(a)return a;const l=_4(e,0);let c=l.bnBlock.node.attrs.id;c===null&&(c=TC.options.generateID());const u=n[l.blockNoteType];if(!u)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const f={};for(const[x,S]of Object.entries({...e.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const E=u.propSchema;x in E&&!(E[x].default===void 0&&S===void 0)&&(f[x]=S)}const p=n[l.blockNoteType],m=[];(s=l.childContainer)==null||s.node.forEach(x=>{m.push(sr(x,t,n,r,o,i))});let y;if(p.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");y=MC(l.blockContent.node,r,o)}else if(p.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");y=_W(l.blockContent.node,r,o)}else if(p.content==="none")y=void 0;else throw new ma(p.content);const b={id:c,type:p.type,props:f,content:y,children:m};return i?.set(e,b),b}function Owe(e,t,n=A4(t),r=M4(t),o=Ym(t),i=R4(t)){const s=[];return e.firstChild.descendants(a=>(s.push(sr(a,t,n,r,o,i)),!1)),s}function Pwe(e,t,n=A4(t),r=M4(t),o=Ym(t),i=R4(t)){function s(a,l,c){if(a.type.name!=="blockGroup")throw new Error("unexpected");const u=[];let f,p;return a.forEach((m,y,b)=>{if(m.type.name!=="blockContainer")throw new Error("unexpected");if(m.childCount===0)return;if(m.childCount===0||m.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+m.childCount);const x=b===0,S=b===a.childCount-1;if(m.firstChild.type.name==="blockGroup"){if(!x)throw new Error("unexpected");const M=s(m.firstChild,Math.max(0,l-1),S?Math.max(0,c-1):0);f=M.blockCutAtStart,S&&(p=M.blockCutAtEnd),u.push(...M.blocks);return}const E=sr(m,t,n,r,o,i),T=m.childCount>1?m.child(1):void 0;let A=[];if(T){const M=s(T,0,S?Math.max(0,c-1):0);A=M.blocks,S&&(p=M.blockCutAtEnd)}S&&!T&&c>1&&(p=E.id),x&&l>1&&(f=E.id),u.push({...E,children:A})}),{blocks:u,blockCutAtStart:f,blockCutAtEnd:p}}if(e.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(e.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return s(e.content.firstChild,Math.max(e.openStart-1,0),Math.max(e.openEnd-1,0))}function AW(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n.config]))}function Dwe(e,t){return{config:e,implementation:t}}function Cf(e,t){return Dwe({type:e.name,propSchema:t},{mark:e})}function MW(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n.config]))}function Pd(e){const{height:t,width:n}=N4(e),r=new Array(t).fill(!1).map(()=>new Array(n).fill(null)),o=(i,s)=>{for(let a=i;a<t;a++)for(let l=s;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let i=0;i<e.content.rows.length;i++)for(let s=0;s<e.content.rows[i].cells.length;s++){const a=xd(e.content.rows[i].cells[s]),l=Z0(a),c=uh(a),{row:u,col:f}=o(i,s);for(let p=u;p<u+l;p++)for(let m=f;m<f+c;m++){if(r[p][m])throw new Error(`Unable to create occupancy grid for table, cell at ${p},${m} is already occupied`);r[p][m]={row:i,col:s,rowspan:l,colspan:c,cell:a}}}return r}function W0(e){const t=new Set;return e.map(n=>({cells:n.map(r=>t.has(r.row+":"+r.col)?!1:(t.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function dh(e,t,n=Pd(t)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const i=n[r][o];if(i.row===e.row&&i.col===e.col)return{row:r,col:o,cell:i.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${e.row},${e.col} is not occupied`)}function N4(e){const t=e.content.rows.length;let n=0;return e.content.rows.forEach(r=>{let o=0;r.cells.forEach(i=>{o+=uh(i)}),n=Math.max(n,o)}),{height:t,width:n}}function RW(e,t,n=Pd(t)){var r;const o=(r=n[e.row])==null?void 0:r[e.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function FR(e,t){var n;const r=Pd(e);if(t<0||t>=r.length)return[];let o=0;for(let s=0;s<t;s++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const i=new Array(r[0].length).fill(!1).map((s,a)=>RW({row:o,col:a},e,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(l=>l.row===s.row&&l.col===s.col)===a)}function HR(e,t){var n;const r=Pd(e);if(t<0||t>=r[0].length)return[];let o=0;for(let s=0;s<t;s++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const i=new Array(r.length).fill(!1).map((s,a)=>RW({row:a,col:o},e,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(l=>l.row===s.row&&l.col===s.col)===a)}function $we(e,t,n,r=Pd(e)){const{col:o}=dh({row:0,col:t},e,r),{col:i}=dh({row:0,col:n},e,r);return r.forEach(s=>{const[a]=s.splice(o,1);s.splice(i,0,a)}),W0(r)}function Lwe(e,t,n,r=Pd(e)){const{row:o}=dh({row:t,col:0},e,r),{row:i}=dh({row:n,col:0},e,r),[s]=r.splice(o,1);return r.splice(i,0,s),W0(r)}function UR(e){return e?q0(e)?UR(e.content):typeof e=="string"?e.length===0:Array.isArray(e)?e.every(t=>typeof t=="string"?t.length===0:ch(t)?t.text.length===0:SW(t)?typeof t.content=="string"?t.content.length===0:t.content.every(n=>n.text.length===0):!1):!1:!0}function jwe(e,t,n=Pd(e)){if(t==="columns"){let i=0;for(let s=n[0].length-1;s>=0&&n.every(a=>UR(a[s].cell)&&a[s].colspan===1);s--)i++;for(let s=n.length-1;s>=0;s--){const a=Math.max(n[s].length-i,1);n[s]=n[s].slice(0,a)}return W0(n)}let r=0;for(let i=n.length-1;i>=0&&n[i].every(s=>UR(s.cell)&&s.rowspan===1);i--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),W0(n)}function zwe(e,t,n,r=Pd(e)){const{width:o,height:i}=N4(e);if(t==="columns")r.forEach((s,a)=>{if(n>=0)for(let l=0;l<n;l++)s.push({row:a,col:Math.max(...s.map(c=>c.col))+1,rowspan:1,colspan:1,cell:xd("")});else s.splice(o+n,-1*n)});else if(n>0)for(let s=0;s<n;s++){const a=new Array(o).fill(null).map((l,c)=>({row:i+s,col:c,rowspan:1,colspan:1,cell:xd("")}));r.push(a)}else n<0&&r.splice(i+n,-1*n);return W0(r)}function NW(e,t,n){const r=FR(e,n);if(!r.some(s=>Z0(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=Z0(s.cell);o=Math.max(o,s.row+a-1),i=Math.min(i,s.row)}),t<n?n===o:n===i}function IW(e,t,n){const r=HR(e,n);if(!r.some(s=>uh(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=uh(s.cell);o=Math.max(o,s.col+a-1),i=Math.min(i,s.col)}),t<n?n===o:n===i}function Bwe(e,t,n){const r=dh(e,n),o=dh(t,n);return r.col===o.col}function l8(e,t,n,r){const o=[];for(const[i,s]of Object.entries(e.styles||{})){const a=n[i];if(!a)throw new Error(`style ${i} not found in styleSchema`);if(a.propSchema==="boolean")s&&o.push(t.mark(i));else if(a.propSchema==="string")s&&o.push(t.mark(i,{stringValue:s}));else throw new ma(a.propSchema)}return!r||!t.nodes[r].spec.code?e.text.split(/(\n)/g).filter(i=>i.length>0).map(i=>i===`
`?t.nodes.hardBreak.createChecked():t.text(i,o)):e.text.length>0?[t.text(e.text,o)]:[]}function Vwe(e,t,n){const r=t.marks.link.create({href:e.href});return GR(e.content,t,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function GR(e,t,n,r){const o=[];if(typeof e=="string")return o.push(...l8({text:e,styles:{}},t,n,r)),o;for(const i of e)o.push(...l8(i,t,n,r));return o}function Qa(e,t,n,r=Ym(t)){const o=[];for(const i of e)typeof i=="string"?o.push(...GR(i,t,r,n)):SW(i)?o.push(...Vwe(i,t,r)):ch(i)?o.push(...GR([i],t,r,n)):o.push(OW(i,t,r));return o}function RC(e,t,n=Ym(t)){const r=[],o=new Array(e.headerRows??0).fill(!0),i=new Array(e.headerCols??0).fill(!0),s=e.columnWidths??[];for(let a=0;a<e.rows.length;a++){const l=e.rows[a],c=[],u=o[a];for(let p=0;p<l.cells.length;p++){const m=l.cells[p],y=i[p],b=void 0;let x=null;const S=dh({row:a,col:p},{content:e});let E=s[S.col]?[s[S.col]]:null;if(m)if(typeof m=="string")x=t.text(m);else if(q0(m)){m.content&&(x=Qa(m.content,t,"tableParagraph",n));const A=uh(m);A>1&&(E=new Array(A).fill(!1).map((M,R)=>s[S.col+R]??void 0))}else x=Qa(m,t,"tableParagraph",n);const T=t.nodes[y||u?"tableHeader":"tableCell"].createChecked({...q0(m)?m.props:{},colwidth:E},t.nodes.tableParagraph.createChecked(b,x));c.push(T)}const f=t.nodes.tableRow.createChecked({},c);r.push(f)}return r}function OW(e,t,n){let r,o=e.type;if(o===void 0&&(o="paragraph"),!t.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!e.content)r=t.nodes[o].createChecked(e.props);else if(typeof e.content=="string"){const i=Qa([e.content],t,o,n);r=t.nodes[o].createChecked(e.props,i)}else if(Array.isArray(e.content)){const i=Qa(e.content,t,o,n);r=t.nodes[o].createChecked(e.props,i)}else if(e.content.type==="tableContent"){const i=RC(e.content,t,n);r=t.nodes[o].createChecked(e.props,i)}else throw new ma(e.content.type);return r}function xh(e,t,n=Ym(t)){let r=e.id;r===void 0&&(r=TC.options.generateID());const o=[];if(e.children)for(const i of e.children)o.push(xh(i,t,n));if(!e.type||t.nodes[e.type].isInGroup("blockContent")){const i=OW(e,t,n),s=o.length>0?t.nodes.blockGroup.createChecked({},o):void 0;return t.nodes.blockContainer.createChecked({id:r,...e.props},s?[i,s]:i)}else{if(t.nodes[e.type].isInGroup("bnBlock"))return t.nodes[e.type].createChecked({id:r,...e.props},o);throw new Error(`block type ${e.type} doesn't match blockContent or bnBlock group`)}}function Fwe(e,t){if(t===0)return;const n=e.resolve(t);for(let r=n.depth;r>0;r--){const o=n.node(r);if(I4(o))return o.attrs.id}}function Fi(e,t){let n,r;if(t.firstChild.descendants((o,i)=>n?!1:!I4(o)||o.attrs.id!==e?!0:(n=o,r=i+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function I4(e){return e.type.isInGroup("bnBlock")}function Hwe(e,t){return e.id!==t.id||e.type!==t.type||JSON.stringify(e.props)!==JSON.stringify(t.props)||JSON.stringify(e.content)!==JSON.stringify(t.content)}function Uwe(e){return e.getMeta("paste")?{type:"paste"}:e.getMeta("uiEvent")==="drop"?{type:"drop"}:e.getMeta("history$")?{type:e.getMeta("history$").redo?"redo":"undo"}:e.getMeta("y-sync$")?e.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function c8(e){const t={},n=ro(e);return e.descendants((r,o)=>{if(I4(r)){const i=Fwe(e,o);t[r.attrs.id]={block:sr(r,n),parentId:i}}return!0}),t}function PW(e,t=[]){const n=Uwe(e),r=zO(e.before,[e,...t]),o=c8(r.before),i=c8(r.doc),s=[];return Object.keys(i).filter(a=>!(a in o)).forEach(a=>{s.push({type:"insert",block:i[a].block,source:n,prevBlock:void 0})}),Object.keys(o).filter(a=>!(a in i)).forEach(a=>{s.push({type:"delete",block:o[a].block,source:n,prevBlock:void 0})}),Object.keys(i).filter(a=>a in o).forEach(a=>{var l,c;const u=o[a],f=i[a];u.parentId!==f.parentId?s.push({type:"move",block:f.block,prevBlock:u.block,source:n,prevParent:u.parentId?(l=o[u.parentId])==null?void 0:l.block:void 0,currentParent:f.parentId?(c=i[f.parentId])==null?void 0:c.block:void 0}):Hwe(u.block,f.block)&&s.push({type:"update",block:f.block,prevBlock:u.block,source:n})}),s}function DW(e,t,n,r="before"){const o=typeof n=="string"?n:n.id,i=ro(e),s=t.map(c=>xh(c,i)),a=Fi(o,e.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),e.step(new Pn(l,l,new Te(pe.from(s),0,0))),s.map(c=>sr(c,i))}function qR(e,t,n){const r=ro(e),o=n.map(c=>xh(c,r)),i=new Set(t.map(c=>typeof c=="string"?c:c.id)),s=[],a=typeof t[0]=="string"?t[0]:t[0].id;let l=0;if(e.doc.descendants((c,u)=>{if(i.size===0)return!1;if(!c.type.isInGroup("bnBlock")||!i.has(c.attrs.id))return!0;if(s.push(sr(c,r)),i.delete(c.attrs.id),n.length>0&&c.attrs.id===a){const y=e.doc.nodeSize;e.insert(u,o);const b=e.doc.nodeSize;l+=y-b}const f=e.doc.nodeSize,p=e.doc.resolve(u-l);p.node().type.name==="blockGroup"&&p.node(p.depth-1).type.name!=="doc"&&p.node().childCount===1?e.delete(p.before(),p.after()):e.delete(u-l,u-l+c.nodeSize);const m=e.doc.nodeSize;return l+=f-m,!1}),i.size>0){const c=[...i].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+c)}return{insertedBlocks:o.map(c=>sr(c,r)),removedBlocks:s}}const Jo=(e,t)=>({tr:n,dispatch:r})=>(r&&O4(n,e,t),!0);function O4(e,t,n,r,o){const i=Kb(e.doc.resolve(t)),s=ro(e);if(r!==void 0&&o!==void 0&&r>o)throw new Error("Invalid replaceFromPos or replaceToPos");const a=s.nodes[i.blockNoteType],l=s.nodes[n.type||i.blockNoteType],c=l.isInGroup("bnBlock")?l:s.nodes.blockContainer;if(i.isBlockContainer&&l.isInGroup("blockContent")){const u=r!==void 0&&r>i.blockContent.beforePos&&r<i.blockContent.afterPos?r-i.blockContent.beforePos-1:void 0,f=o!==void 0&&o>i.blockContent.beforePos&&o<i.blockContent.afterPos?o-i.blockContent.beforePos-1:void 0;u8(n,e,i),Gwe(n,e,a,l,i,u,f)}else if(!i.isBlockContainer&&l.isInGroup("bnBlock"))u8(n,e,i);else{const u=sr(i.bnBlock.node,s);e.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,xh({children:u.children,...n},s));return}e.setNodeMarkup(i.bnBlock.beforePos,c,{...i.bnBlock.node.attrs,...n.props})}function Gwe(e,t,n,r,o,i,s){const a=ro(t);let l="keep";if(e.content)if(typeof e.content=="string")l=Qa([e.content],a,r.name);else if(Array.isArray(e.content))l=Qa(e.content,a,r.name);else if(e.content.type==="tableContent")l=RC(e.content,a);else throw new ma(e.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);if(l==="keep")t.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...e.props});else if(i!==void 0||s!==void 0){t.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...e.props});const c=o.blockContent.beforePos+1+(i??0),u=o.blockContent.beforePos+1+(s??o.blockContent.node.content.size),f=t.doc.resolve(o.blockContent.beforePos).depth,p=t.doc.resolve(c).depth,m=t.doc.resolve(u).depth;t.replace(c,u,new Te(pe.from(l),p-f-1,m-f-1))}else t.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...e.props},l))}function u8(e,t,n){const r=ro(t);if(e.children!==void 0&&e.children.length>0){const o=e.children.map(i=>xh(i,r));if(n.childContainer)t.step(new Pn(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new Te(pe.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");t.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function qwe(e,t,n,r,o){const i=typeof t=="string"?t:t.id,s=Fi(i,e.doc);if(!s)throw new Error(`Block with ID ${i} not found`);O4(e,s.posBeforeNode,n,r,o);const a=e.doc.resolve(s.posBeforeNode+1).node(),l=ro(e);return sr(a,l)}function $W(e){const t=Array.from(e.classList).filter(n=>!n.startsWith("bn-"))||[];t.length>0?e.className=t.join(" "):e.removeAttribute("class")}function LW(e,t,n,r){let o;if(t)if(typeof t=="string")o=Qa([t],e.pmSchema);else if(Array.isArray(t))o=Qa(t,e.pmSchema);else if(t.type==="tableContent")o=RC(t,e.pmSchema);else throw new ma(t.type);else throw new Error("blockContent is required");const i=n.serializeFragment(pe.from(o),r);return i.nodeType===1&&$W(i),i}function Zwe(e,t,n,r,o,i,s){var a,l,c,u,f,p,m,y;const b=s?.document??document,x=t.pmSchema.nodes.blockContainer;let S=n.props;if(!n.props){S={};for(const[O,I]of Object.entries(t.schema.blockSchema[n.type].propSchema))I.default!==void 0&&(S[O]=I.default)}const E=(l=(a=x.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,x.create({id:n.id,...S})),T=Array.from(E.dom.attributes),A=t.blockImplementations[n.type].implementation.toExternalHTML({...n,props:S},t),M=b.createDocumentFragment();if(A.dom.classList.contains("bn-block-content")){const O=[...T,...Array.from(A.dom.attributes)].filter(I=>I.name.startsWith("data")&&I.name!=="data-content-type"&&I.name!=="data-file-block"&&I.name!=="data-node-view-wrapper"&&I.name!=="data-node-type"&&I.name!=="data-id"&&I.name!=="data-index"&&I.name!=="data-editable");for(const I of O)A.dom.firstChild.setAttribute(I.name,I.value);$W(A.dom.firstChild),M.append(...Array.from(A.dom.childNodes))}else M.append(A.dom);if(A.contentDOM&&n.content){const O=LW(t,n.content,r,s);A.contentDOM.appendChild(O)}let R;if(o.has(n.type)?R="OL":i.has(n.type)&&(R="UL"),R){if(((c=e.lastChild)==null?void 0:c.nodeName)!==R){const I=b.createElement(R);R==="OL"&&S!=null&&S.start&&S?.start!==1&&I.setAttribute("start",S.start+""),e.append(I)}const O=b.createElement("li");O.append(M),e.lastChild.appendChild(O)}else e.append(M);if(n.children&&n.children.length>0){const O=b.createDocumentFragment();if(jW(O,t,n.children,r,o,i,s),((u=e.lastChild)==null?void 0:u.nodeName)==="UL"||((f=e.lastChild)==null?void 0:f.nodeName)==="OL")for(;((p=O.firstChild)==null?void 0:p.nodeName)==="UL"||((m=O.firstChild)==null?void 0:m.nodeName)==="OL";)e.lastChild.lastChild.appendChild(O.firstChild);t.pmSchema.nodes[n.type].isInGroup("blockContent")?e.append(O):(y=A.contentDOM)==null||y.append(O)}}const jW=(e,t,n,r,o,i,s)=>{for(const a of n)Zwe(e,t,a,r,o,i,s)},Wwe=(e,t,n,r,o,i)=>{const s=(i?.document??document).createDocumentFragment();return jW(s,e,t,n,r,o,i),s},NC=(e,t)=>{const n=au.fromSchema(e);return{exportBlocks:(r,o)=>{const i=Wwe(t,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),s=document.createElement("div");return s.append(i),s.innerHTML},exportInlineContent:(r,o)=>{const i=LW(t,r,n,o),s=document.createElement("div");return s.append(i.cloneNode(!0)),s.innerHTML}}};function Kwe(e,t,n,r,o){let i;if(t)if(typeof t=="string")i=Qa([t],e.pmSchema,r);else if(Array.isArray(t))i=Qa(t,e.pmSchema,r);else if(t.type==="tableContent")i=RC(t,e.pmSchema);else throw new ma(t.type);else throw new Error("blockContent is required");return n.serializeFragment(pe.from(i),o)}function Ywe(e,t,n,r,o){var i,s,a,l,c;const u=e.pmSchema.nodes.blockContainer;let f=t.props;if(!t.props){f={};for(const[y,b]of Object.entries(e.schema.blockSchema[t.type].propSchema))b.default!==void 0&&(f[y]=b.default)}const p=e.blockImplementations[t.type].implementation.toInternalHTML({...t,props:f},e);if(t.type==="numberedListItem"&&p.dom.setAttribute("data-index",r.toString()),p.contentDOM&&t.content){const y=Kwe(e,t.content,n,t.type,o);p.contentDOM.appendChild(y)}if(e.pmSchema.nodes[t.type].isInGroup("bnBlock")){if(t.children&&t.children.length>0){const y=zW(e,t.children,n,o);(i=p.contentDOM)==null||i.append(y)}return p.dom}const m=(a=(s=u.spec)==null?void 0:s.toDOM)==null?void 0:a.call(s,u.create({id:t.id,...f}));return(l=m.contentDOM)==null||l.appendChild(p.dom),t.children&&t.children.length>0&&((c=m.contentDOM)==null||c.appendChild(BW(e,t.children,n,o))),m.dom}function zW(e,t,n,r){const o=(r?.document??document).createDocumentFragment();let i=0;for(const s of t){s.type==="numberedListItem"?i++:i=0;const a=Ywe(e,s,n,i,r);o.appendChild(a)}return o}const BW=(e,t,n,r)=>{var o;const i=e.pmSchema.nodes.blockGroup,s=i.spec.toDOM(i.create({})),a=zW(e,t,n,r);return(o=s.contentDOM)==null||o.appendChild(a),s.dom},Jwe=(e,t)=>{const n=au.fromSchema(e);return{serializeBlocks:(r,o)=>BW(t,r,n,o).outerHTML}},IC=(e,t)=>{const n=e.querySelector(t);if(!n)return;const r=e.querySelector("figcaption"),o=r?.textContent??void 0;return{targetElement:n,caption:o}},Xwe=(e,t,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(i);const s=document.createElement("p");s.className="bn-add-file-button-text",s.innerHTML=n||t.dictionary.file_blocks.file.add_button_text,o.appendChild(s);const a=c=>{c.preventDefault()},l=()=>{t.transact(c=>c.setMeta(t.filePanel.plugins[0],{block:e}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},Qwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',exe=e=>{const t=document.createElement("div");t.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=Qwe,t.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=e.props.name,t.appendChild(r),{dom:t}},P4=(e,t,n,r,o)=>{const i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",e.props.url===""){const a=Xwe(e,t,r,o);i.appendChild(a.dom);const l=t.onUploadStart(c=>{if(c===e.id){i.removeChild(a.dom);const u=document.createElement("div");u.className="bn-file-loading-preview",u.textContent="Loading...",i.appendChild(u)}});return{dom:i,destroy:()=>{l(),a.destroy()}}}const s={dom:i};if(e.props.showPreview===!1||!n){const a=exe(e);i.appendChild(a.dom),s.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else i.appendChild(n.dom);if(e.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=e.props.caption,i.appendChild(a)}return s},D4=(e,t)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},OC=(e,t)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},d8=e=>({url:e.src||void 0}),txe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',nxe={backgroundColor:Nr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},VW={type:"audio",propSchema:nxe,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},rxe=(e,t)=>{const n=document.createElement("div");n.innerHTML=txe;const r=document.createElement("audio");return r.className="bn-audio",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(o=>{r.src=o}):r.src=e.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,P4(e,t,{dom:r},t.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},FW=e=>{if(e.tagName==="AUDIO")return e.closest("figure")?void 0:d8(e);if(e.tagName==="FIGURE"){const t=IC(e,"audio");if(!t)return;const{targetElement:n,caption:r}=t;return{...d8(n),caption:r}}},oxe=e=>{if(!e.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let t;return e.props.showPreview?(t=document.createElement("audio"),t.src=e.props.url):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?D4(t,e.props.caption):OC(t,e.props.caption):{dom:t}},ixe=Wb(VW,{render:rxe,parse:FW,toExternalHTML:oxe}),f8=Symbol.for("blocknote.shikiParser"),B_=Symbol.for("blocknote.shikiHighlighterPromise"),sxe={language:{default:"text"}},axe=Os({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const e=this.options;return{language:{default:e.editor.settings.codeBlock.defaultLanguage,parseHTML:t=>{let n=t,r=null;n?.tagName==="DIV"&&n?.dataset.contentType==="codeBlock"&&(n=n.children[0]),n?.tagName==="PRE"&&(n=n?.children[0]);const o=n?.getAttribute("data-language");if(o)r=o.toLowerCase();else{const i=[...n?.className.split(" ")||[]].filter(s=>s.startsWith("language-")).map(s=>s.replace("language-",""));i.length>0&&(r=i[0].toLowerCase())}return r?V_(e.editor.settings.codeBlock,r)??r:null},renderHTML:t=>t.language?{class:`language-${t.language}`,"data-language":t.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:e}){var t,n;const r=document.createElement("pre"),{dom:o,contentDOM:i}=Ts(this.name,"code",((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...e});return o.removeChild(i),o.appendChild(r),r.appendChild(i),{dom:o,contentDOM:i}},addNodeView(){const e=this.options;return({editor:t,node:n,getPos:r,HTMLAttributes:o})=>{var i,s;const a=document.createElement("pre"),l=document.createElement("select"),c=document.createElement("div"),{dom:u,contentDOM:f}=Ts(this.name,"code",{...((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},...o},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{}),p=m=>{const y=m.target.value;t.commands.command(({tr:b})=>(b.setNodeAttribute(r(),"language",y),!0))};return Object.entries(e.editor.settings.codeBlock.supportedLanguages).forEach(([m,{name:y}])=>{const b=document.createElement("option");b.value=m,b.text=y,l.appendChild(b)}),c.contentEditable="false",l.value=n.attrs.language||e.editor.settings.codeBlock.defaultLanguage,u.removeChild(f),u.appendChild(c),u.appendChild(a),a.appendChild(f),c.appendChild(l),l.addEventListener("change",p),{dom:u,contentDOM:f,update:m=>m.type===this.type,destroy:()=>{l.removeEventListener("change",p)}}}},addProseMirrorPlugins(){const e=this.options,t=globalThis;let n,r;return[Uge({parser:o=>{if(!e.editor.settings.codeBlock.createHighlighter)return[];if(!n)return t[B_]=t[B_]||e.editor.settings.codeBlock.createHighlighter(),t[B_].then(s=>{n=s});const i=V_(e.editor.settings.codeBlock,o.language);return!i||i==="text"||i==="none"||i==="plaintext"||i==="txt"?[]:n.getLoadedLanguages().includes(i)?(r||(r=t[f8]||Gge(n),t[f8]=r),r(o)):n.loadLanguage(i)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const e=this.options;return[new gd({find:/^```(.*?)\s$/,handler:({state:t,range:n,match:r})=>{const o=t.doc.resolve(n.from),i=r[1].trim(),s={language:V_(e.editor.settings.codeBlock,i)??i};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,s).setSelection(Ve.create(t.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:e})=>{const{selection:t}=e.state,{$from:n}=t;if(e.isActive(this.name)&&!n.parent.textContent&&pC(t)){const r=n.pos-n.parentOffset-2;return e.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:e})=>this.options.indentLineWithTab&&e.isActive(this.name)?(e.commands.insertContent("  "),!0):!1,Enter:({editor:e})=>{const{$from:t}=e.state.selection;if(!e.isActive(this.name))return!1;const n=t.parentOffset===t.parent.nodeSize-2,r=t.parent.textContent.endsWith(`

`);return!n||!r?(e.commands.insertContent(`
`),!0):e.chain().command(({tr:o})=>(o.delete(t.pos-2,t.pos),!0)).exitCode().run()},"Shift-Enter":({editor:e})=>{const{$from:t}=e.state.selection;return e.isActive(this.name)?(e.chain().insertContentAt(t.pos-t.parentOffset+t.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),lxe=rc(axe,sxe);function V_(e,t){var n;return(n=Object.entries(e.supportedLanguages).find(([r,{aliases:o}])=>o?.includes(t)||r===t))==null?void 0:n[0]}const cxe=$o.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:e=>e.getAttribute("data-background-color"),renderHTML:e=>({"data-background-color":e.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:e=>typeof e=="string"?!1:e.hasAttribute("data-background-color")?{stringValue:e.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:e}){return["span",e,0]}}),uxe=Cf(cxe,"string"),dxe=$o.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:e=>e.getAttribute("data-text-color"),renderHTML:e=>({"data-text-color":e.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:e=>typeof e=="string"?!1:e.hasAttribute("data-text-color")?{stringValue:e.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:e}){return["span",e,0]}}),fxe=Cf(dxe,"string"),h8=e=>({url:e.src||void 0}),hxe={backgroundColor:Nr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},HW={type:"file",propSchema:hxe,content:"none",isFileBlock:!0},pxe=(e,t)=>P4(e,t),UW=e=>{if(e.tagName==="EMBED")return e.closest("figure")?void 0:h8(e);if(e.tagName==="FIGURE"){const t=IC(e,"embed");if(!t)return;const{targetElement:n,caption:r}=t;return{...h8(n),caption:r}}},mxe=e=>{if(!e.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const t=document.createElement("a");return t.href=e.props.url,t.textContent=e.props.name||e.props.url,e.props.caption?OC(t,e.props.caption):{dom:t}},gxe=Wb(HW,{render:pxe,parse:UW,toExternalHTML:mxe}),yxe={set:(e,t)=>window.localStorage.setItem(`toggle-${e.id}`,t?"true":"false"),get:e=>window.localStorage.getItem(`toggle-${e.id}`)==="true"},GW=(e,t,n,r=yxe)=>{if("isToggleable"in e.props&&!e.props.isToggleable)return{dom:n};const o=document.createElement("div"),i=document.createElement("div");i.className="bn-toggle-wrapper";const s=document.createElement("button");s.className="bn-toggle-button",s.type="button",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const a=y=>y.preventDefault();s.addEventListener("mousedown",a);const l=()=>{var y;i.getAttribute("data-show-children")==="true"?(i.setAttribute("data-show-children","false"),r.set(t.getBlock(e),!1),o.contains(c)&&o.removeChild(c)):(i.setAttribute("data-show-children","true"),r.set(t.getBlock(e),!0),((y=t.getBlock(e))==null?void 0:y.children.length)===0&&!o.contains(c)&&o.appendChild(c))};s.addEventListener("click",l),i.appendChild(s),i.appendChild(n);const c=document.createElement("button");c.className="bn-toggle-add-block-button",c.type="button",c.textContent="Empty toggle. Click to add a block.";const u=y=>y.preventDefault();c.addEventListener("mousedown",u);const f=()=>{t.transact(()=>{const y=t.updateBlock(e,{children:[{}]});t.setTextCursorPosition(y.children[0].id,"end"),t.focus()})};c.addEventListener("click",f),o.appendChild(i);let p=e.children.length;const m=t.onChange(()=>{var y;const b=((y=t.getBlock(e))==null?void 0:y.children.length)??0;b>p?(i.getAttribute("data-show-children")==="false"&&(i.setAttribute("data-show-children","true"),r.set(t.getBlock(e),!0)),o.contains(c)&&o.removeChild(c)):b===0&&b<p&&(i.getAttribute("data-show-children")==="true"&&(i.setAttribute("data-show-children","false"),r.set(t.getBlock(e),!1)),o.contains(c)&&o.removeChild(c)),p=b});return r.get(e)?(i.setAttribute("data-show-children","true"),e.children.length===0&&o.appendChild(c)):i.setAttribute("data-show-children","false"),{dom:o,ignoreMutation:y=>y instanceof MutationRecord&&(y.type==="attributes"&&y.target===i&&y.attributeName==="data-show-children"||y.type==="childList"&&(y.addedNodes[0]===c||y.removedNodes[0]===c)),destroy:()=>{s.removeEventListener("mousedown",a),s.removeEventListener("click",l),c.removeEventListener("mousedown",u),c.removeEventListener("click",f),m?.()}}},bxe=[1,2,3,4,5,6],qW={...Nr,level:{default:1,values:bxe},isToggleable:{default:!1}},vxe=Os({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return Zb(qW)},addInputRules(){return[...this.options.editor.settings.heading.levels.map(e=>new gd({find:new RegExp(`^(#{${e}})\\s$`),handler:({state:t,chain:n,range:r})=>{const o=Un(t);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(Jo(o.bnBlock.beforePos,{type:"heading",props:{level:e}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){const e=this.options.editor;return Object.fromEntries(e.settings.heading.levels.map(t=>[`Mod-Alt-${t}`,()=>{const n=Un(this.editor.state);return!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(n.bnBlock.beforePos,{type:"heading",props:{level:t}}))}]))},parseHTML(){const e=this.options.editor;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},...e.settings.heading.levels.map(t=>({tag:`h${t}`,attrs:{level:t},node:"heading"}))]},renderHTML({node:e,HTMLAttributes:t}){var n,r;return Ts(this.name,`h${e.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n})=>{var r,o;const{dom:i,contentDOM:s}=Ts(this.name,`h${e.attrs.level}`,{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...t},((o=this.options.domAttributes)==null?void 0:o.inlineContent)||{});i.removeChild(s);const a=this.options.editor,l=_C(n,a,this.editor,this.name),c=GW(l,a,s);return i.appendChild(c.dom),{dom:i,contentDOM:s,ignoreMutation:c.ignoreMutation,destroy:c.destroy}}}}),wxe=rc(vxe,qW),ZW=(e,t,n,r,o,i)=>{const{dom:s,destroy:a}=P4(e,t,n,o,i),l=s;e.props.url&&e.props.showPreview&&(e.props.previewWidth?l.style.width=`${e.props.previewWidth}px`:l.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const u=document.createElement("div");u.className="bn-resize-handle",u.style.right="4px";let f,p=e.props.previewWidth;const m=T=>{var A,M;if(!f){!t.isEditable&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u));return}let R;e.props.textAlignment==="center"?f.handleUsed==="left"?R=f.initialWidth+(f.initialClientX-T.clientX)*2:R=f.initialWidth+(T.clientX-f.initialClientX)*2:f.handleUsed==="left"?R=f.initialWidth+f.initialClientX-T.clientX:R=f.initialWidth+T.clientX-f.initialClientX,p=Math.min(Math.max(R,64),((M=(A=t.domElement)==null?void 0:A.firstElementChild)==null?void 0:M.clientWidth)||Number.MAX_VALUE),l.style.width=`${p}px`},y=T=>{(!T.target||!l.contains(T.target)||!t.isEditable)&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u)),f&&(f=void 0,t.updateBlock(e,{props:{previewWidth:p}}))},b=()=>{t.isEditable&&(r.appendChild(c),r.appendChild(u))},x=T=>{T.relatedTarget===c||T.relatedTarget===u||f||t.isEditable&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u))},S=T=>{T.preventDefault(),f={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:T.clientX}},E=T=>{T.preventDefault(),f={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:T.clientX}};return window.addEventListener("mousemove",m),window.addEventListener("mouseup",y),l.addEventListener("mouseenter",b),l.addEventListener("mouseleave",x),c.addEventListener("mousedown",S),u.addEventListener("mousedown",E),{dom:l,destroy:()=>{a?.(),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y),l.removeEventListener("mouseenter",b),l.removeEventListener("mouseleave",x),c.removeEventListener("mousedown",S),u.removeEventListener("mousedown",E)}}},p8=e=>{const t=e.src||void 0,n=e.width||void 0;return{url:t,previewWidth:n}},xxe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',Sxe={textAlignment:Nr.textAlignment,backgroundColor:Nr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},WW={type:"image",propSchema:Sxe,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},kxe=(e,t)=>{const n=document.createElement("div");n.innerHTML=xxe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(i=>{o.src=i}):o.src=e.props.url,o.alt=e.props.name||e.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),ZW(e,t,{dom:r},r,t.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},KW=e=>{if(e.tagName==="IMG")return e.closest("figure")?void 0:p8(e);if(e.tagName==="FIGURE"){const t=IC(e,"img");if(!t)return;const{targetElement:n,caption:r}=t;return{...p8(n),caption:r}}},Cxe=e=>{if(!e.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let t;return e.props.showPreview?(t=document.createElement("img"),t.src=e.props.url,t.alt=e.props.name||e.props.caption||"BlockNote image",e.props.previewWidth&&(t.width=e.props.previewWidth)):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?D4(t,e.props.caption):OC(t,e.props.caption):{dom:t}},Exe=Wb(WW,{render:kxe,parse:KW,toExternalHTML:Cxe}),YW=(e,t,n)=>({state:r,dispatch:o})=>{const i=Jc(r.doc,e),s=kd(i);if(!s.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${e}`);const a=[{type:s.bnBlock.node.type,attrs:n?{...s.bnBlock.node.attrs,id:void 0}:{}},{type:t?s.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...s.blockContent.node.attrs}:{}}];return o&&r.tr.split(e,2,a),!0},PC=e=>{const{blockInfo:t,selectionEmpty:n}=e.transact(i=>({blockInfo:AC(i),selectionEmpty:i.selection.anchor===i.selection.head}));if(!t.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=t;return!(o.node.type.name==="toggleListItem"||o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:e._tiptapEditor.commands.first(({state:i,chain:s,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(Jo(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(s().deleteSelection().command(YW(i.selection.from,!0)).run(),!0):!1)])},Txe={...Nr},_xe=Os({name:"toggleListItem",content:"inline*",group:"blockContent",priority:90,addKeyboardShortcuts(){return{Enter:()=>PC(this.options.editor),"Mod-Shift-6":()=>{const e=Un(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"toggleListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"p",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({HTMLAttributes:e,getPos:t})=>{var n,r;const{dom:o,contentDOM:i}=Ts(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{}),s=this.options.editor,a=_C(t,s,this.editor,this.name),l=GW(a,s,i);return o.appendChild(l.dom),{dom:o,contentDOM:i,ignoreMutation:l.ignoreMutation,destroy:l.destroy}}}}),Axe=rc(_xe,Txe);function $4(e,t,n){var r,o,i;const s=Bl.fromSchema(t),a=e,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const m of Array.from(a.childNodes))l.appendChild(m.cloneNode(!0));let c=s.parse(l,{topNode:t.nodes.blockGroup.create()});((o=(r=c.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const u=(i=c.firstChild)==null?void 0:i.firstChild;if(!(u!=null&&u.isTextblock))return pe.from(c);const f=t.nodes[n].create({},u.content),p=c.content.cut(u.nodeSize+2);if(p.size>0){const m=c.copy(p);return f.content.addToEnd(m)}return f.content}const Mxe={...Nr},Rxe=Os({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new gd({find:new RegExp("^[-+*]\\s$"),handler:({state:e,chain:t,range:n})=>{const r=Un(e);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||r.blockNoteType==="heading"||t().command(Jo(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>PC(this.options.editor),"Mod-Shift-8":()=>{const e=Un(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:e=>{var t;if(typeof e=="string")return!1;const n=e.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="UL"?{}:!1},getContent:(e,t)=>$4(e,t,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"p",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Nxe=rc(Rxe,Mxe),JW={...Nr,checked:{default:!1}},Ixe=Os({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return Zb(JW)},addInputRules(){return[new gd({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:e,chain:t,range:n})=>{const r=Un(e);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||t().command(Jo(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new gd({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:e,chain:t,range:n})=>{const r=Un(e);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||t().command(Jo(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>PC(this.options.editor),"Mod-Shift-9":()=>{const e=Un(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:e=>typeof e=="string"||e.closest("[data-content-type]")||e.closest("li")?!1:e.type==="checkbox"?{checked:e.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:e=>{var t;if(typeof e=="string")return!1;const n=e.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="UL"){const r=e.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(e,t)=>$4(e,t,this.name),node:"checkListItem"}]},renderHTML({node:e,HTMLAttributes:t}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=e.attrs.checked,e.attrs.checked&&o.setAttribute("checked","");const{dom:i,contentDOM:s}=Ts(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return i.insertBefore(o,s),{dom:i,contentDOM:s}},addNodeView(){return({node:e,getPos:t,editor:n,HTMLAttributes:r})=>{var o,i;const s=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=e.attrs.checked,e.attrs.checked&&l.setAttribute("checked","");const c=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof t!="boolean"){const p=Jc(n.state.doc,t());if(p.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${p.node.type.name}`);this.editor.commands.command(Jo(p.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",c);const{dom:u,contentDOM:f}=Ts(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{});if(typeof t!="boolean"){const p="label-"+this.editor.state.doc.resolve(t()).node().attrs.id;l.setAttribute("aria-labelledby",p),f.id=p}return u.removeChild(f),u.appendChild(s),s.appendChild(a),s.appendChild(f),a.appendChild(l),{dom:u,contentDOM:f,destroy:()=>{l.removeEventListener("change",c)}}}}}),Oxe=rc(Ixe,JW),Pxe=new Bt("numbered-list-indexing"),Dxe=()=>new St({key:Pxe,appendTransaction:(e,t,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((i,s)=>{var a;if(i.type.name==="blockContainer"&&i.firstChild.type.name==="numberedListItem"){let l=`${i.firstChild.attrs.start||1}`;const c=kd({posBeforeNode:s,node:i});if(!c.isBlockContainer)throw new Error("impossible");const u=r.doc.resolve(c.bnBlock.beforePos).nodeBefore;if(u){const y=kd({posBeforeNode:c.bnBlock.beforePos-u.nodeSize,node:u});if(y.blockNoteType==="numberedListItem"){if(!y.isBlockContainer)throw new Error("impossible");const b=y.blockContent.node.attrs.index;l=(parseInt(b)+1).toString()}}const f=c.blockContent.node,p=f.attrs.index,m=((a=u?.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(p!==l||f.attrs.start&&!m){o=!0;const{start:y,...b}=f.attrs;r.setNodeMarkup(c.blockContent.beforePos,void 0,{...b,index:l,...typeof y=="number"&&m&&{start:y}})}}}),o?r:null}}),XW={...Nr,start:{default:void 0,type:"number"}},$xe=Os({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...Zb(XW),index:{default:null,parseHTML:e=>e.getAttribute("data-index"),renderHTML:e=>({"data-index":e.index})}}},addInputRules(){return[new gd({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:e,chain:t,range:n,match:r})=>{const o=Un(e);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem"||o.blockNoteType==="heading")return;const i=parseInt(r[1]);t().command(Jo(o.bnBlock.beforePos,{type:"numberedListItem",props:i===1&&{}||{start:i}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>PC(this.options.editor),"Mod-Shift-7":()=>{const e=Un(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[Dxe()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:e=>{var t;if(typeof e=="string")return!1;const n=e.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return e.previousSibling||r===1?{}:{start:r}}return!1},getContent:(e,t)=>$4(e,t,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"p",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Lxe=rc($xe,XW),jxe={...Nr},zxe=Os({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const e=Un(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:e=>{var t;return typeof e=="string"||!((t=e.textContent)!=null&&t.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"p",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Bxe=rc(zxe,jxe),Vxe={...Nr},Fxe=Os({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new gd({find:new RegExp("^>\\s$"),handler:({state:e,chain:t,range:n})=>{const r=Un(e);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||t().command(Jo(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const e=Un(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote",getContent:(e,t)=>{const n=e.cloneNode(!0);return Nwe(n),Bl.fromSchema(t).parse(n,{topNode:t.nodes.paragraph.create()}).content}}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"blockquote",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Hxe=rc(Fxe,Vxe),Uxe=35,L4=120,Gxe=31,qxe=Mn.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[Yye({cellMinWidth:Uxe,defaultCellMinWidth:L4,View:null}),s0e()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const e=this.editor.state.selection,t=e.empty,n=e.$head.parentOffset===0,r=e.$head.node().type.name==="tableParagraph";return t&&n&&r},Tab:()=>this.editor.commands.command(({state:e,dispatch:t,view:n})=>d6(1)(e,t,n)),"Shift-Tab":()=>this.editor.commands.command(({state:e,dispatch:t,view:n})=>d6(-1)(e,t,n))}},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:Lt(qe(e,"tableRole",t))}}}),Zxe={textColor:Nr.textColor},Wxe=Os({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"table",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:e,HTMLAttributes:t})=>{var n;class r extends Xq{constructor(i,s,a){super(i,s),this.node=i,this.cellMinWidth=s,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=_n("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[p,m]of Object.entries(a))p!=="class"&&l.setAttribute(p,m);const c=this.dom,u=document.createElement("div");u.className="tableWrapper-inner",u.appendChild(c.firstChild),c.appendChild(u),l.appendChild(c);const f=document.createElement("div");f.className="table-widgets-container",f.style.position="relative",c.appendChild(f),this.dom=l}ignoreMutation(i){return!i.target.closest(".tableWrapper-inner")||super.ignoreMutation(i)}}return new r(e,L4,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t})}}}),Kxe=Os({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:e=>{if(typeof e=="string"||!e.textContent||!e.closest("[data-content-type]"))return!1;const t=e.parentElement;return t===null?!1:t.tagName==="TD"||t.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:e}){return["p",e,0]}}),Yxe=Ql.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",Cs(this.options.HTMLAttributes,e),0]}});function m8(e,t){const n=Bl.fromSchema(t).parse(e,{topNode:t.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),pe.fromArray(r)}const Jxe=rc(Wxe,Zxe,[qxe,Kxe,dye.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(e,t)=>m8(e,t)}]}}),uye.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(e,t)=>m8(e,t)}]}}),Yxe]),g8=e=>{const t=e.src||void 0,n=e.width||void 0;return{url:t,previewWidth:n}},Xxe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',Qxe={textAlignment:Nr.textAlignment,backgroundColor:Nr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},QW={type:"video",propSchema:Qxe,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},eSe=(e,t)=>{const n=document.createElement("div");n.innerHTML=Xxe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(i=>{o.src=i}):o.src=e.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=e.props.previewWidth,r.appendChild(o),ZW(e,t,{dom:r},r,t.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},eK=e=>{if(e.tagName==="VIDEO")return e.closest("figure")?void 0:g8(e);if(e.tagName==="FIGURE"){const t=IC(e,"video");if(!t)return;const{targetElement:n,caption:r}=t;return{...g8(n),caption:r}}},tSe=e=>{if(!e.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let t;return e.props.showPreview?(t=document.createElement("video"),t.src=e.props.url,e.props.previewWidth&&(t.width=e.props.previewWidth)):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?D4(t,e.props.caption):OC(t,e.props.caption):{dom:t}},nSe=Wb(QW,{render:eSe,parse:eK,toExternalHTML:tSe}),j4={paragraph:Bxe,heading:wxe,quote:Hxe,codeBlock:lxe,toggleListItem:Axe,bulletListItem:Nxe,numberedListItem:Lxe,checkListItem:Oxe,table:Jxe,file:gxe,image:Exe,video:nSe,audio:ixe},rSe=kW(j4),z4={bold:Cf(Jge,"boolean"),italic:Cf(iye,"boolean"),underline:Cf(cye,"boolean"),strike:Cf(lye,"boolean"),code:Cf(eye,"boolean"),textColor:fxe,backgroundColor:uxe};MW(z4);const tK={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},oSe=AW(tK);function qo(e,t){return e in t.schema.blockSchema&&t.schema.blockSchema[e]===rSe[e]}function iSe(e,t){return e in t.schema.inlineContentSchema&&t.schema.inlineContentSchema[e]===oSe[e]}function sSe(e,t,n){return t.type===e&&t.type in n.schema.blockSchema&&qo(t.type,n)}function Jb(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock||!1}function aSe(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock&&"showPreview"in t.schema.blockSchema[e.type].propSchema||!1}function Xb(e,t){return t.schema.blockSchema[e.type].isFileBlock&&!e.props.url}function Vp(e,t,n){return t in n.schema.blockSchema&&e in n.schema.blockSchema[t].propSchema&&n.schema.blockSchema[t].propSchema[e]===Nr[e]}function ZR(e,t,n){return Vp(e,t.type,n)}function WR(e){return e instanceof vn}function lSe(e){let t=e.getTextCursorPosition().block,n=e.schema.blockSchema[t.type].content;for(;n==="none";){if(t=e.getTextCursorPosition().nextBlock,t===void 0)return;n=e.schema.blockSchema[t.type].content,e.setTextCursorPosition(t,"end")}}function Yr(e,t){const n=e.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&ch(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=e.updateBlock(n,t),e.setTextCursorPosition(r)):(r=e.insertBlocks([t],n,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),lSe(e),r}function cSe(e){const t=[];return qo("heading",e)&&t.push({onItemClick:()=>{Yr(e,{type:"heading",props:{level:1}})},badge:ms("Mod-Alt-1"),key:"heading",...e.dictionary.slash_menu.heading},{onItemClick:()=>{Yr(e,{type:"heading",props:{level:2}})},badge:ms("Mod-Alt-2"),key:"heading_2",...e.dictionary.slash_menu.heading_2},{onItemClick:()=>{Yr(e,{type:"heading",props:{level:3}})},badge:ms("Mod-Alt-3"),key:"heading_3",...e.dictionary.slash_menu.heading_3}),qo("quote",e)&&t.push({onItemClick:()=>{Yr(e,{type:"quote"})},key:"quote",...e.dictionary.slash_menu.quote}),qo("toggleListItem",e)&&t.push({onItemClick:()=>{Yr(e,{type:"toggleListItem"})},badge:ms("Mod-Shift-6"),key:"toggle_list",...e.dictionary.slash_menu.toggle_list}),qo("numberedListItem",e)&&t.push({onItemClick:()=>{Yr(e,{type:"numberedListItem"})},badge:ms("Mod-Shift-7"),key:"numbered_list",...e.dictionary.slash_menu.numbered_list}),qo("bulletListItem",e)&&t.push({onItemClick:()=>{Yr(e,{type:"bulletListItem"})},badge:ms("Mod-Shift-8"),key:"bullet_list",...e.dictionary.slash_menu.bullet_list}),qo("checkListItem",e)&&t.push({onItemClick:()=>{Yr(e,{type:"checkListItem"})},badge:ms("Mod-Shift-9"),key:"check_list",...e.dictionary.slash_menu.check_list}),qo("paragraph",e)&&t.push({onItemClick:()=>{Yr(e,{type:"paragraph"})},badge:ms("Mod-Alt-0"),key:"paragraph",...e.dictionary.slash_menu.paragraph}),qo("codeBlock",e)&&t.push({onItemClick:()=>{Yr(e,{type:"codeBlock"})},badge:ms("Mod-Alt-c"),key:"code_block",...e.dictionary.slash_menu.code_block}),qo("table",e)&&t.push({onItemClick:()=>{Yr(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...e.dictionary.slash_menu.table}),qo("image",e)&&t.push({onItemClick:()=>{const n=Yr(e,{type:"image"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"image",...e.dictionary.slash_menu.image}),qo("video",e)&&t.push({onItemClick:()=>{const n=Yr(e,{type:"video"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"video",...e.dictionary.slash_menu.video}),qo("audio",e)&&t.push({onItemClick:()=>{const n=Yr(e,{type:"audio"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"audio",...e.dictionary.slash_menu.audio}),qo("file",e)&&t.push({onItemClick:()=>{const n=Yr(e,{type:"file"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"file",...e.dictionary.slash_menu.file}),qo("heading",e)&&(t.push({onItemClick:()=>{Yr(e,{type:"heading",props:{level:1,isToggleable:!0}})},key:"toggle_heading",...e.dictionary.slash_menu.toggle_heading},{onItemClick:()=>{Yr(e,{type:"heading",props:{level:2,isToggleable:!0}})},key:"toggle_heading_2",...e.dictionary.slash_menu.toggle_heading_2},{onItemClick:()=>{Yr(e,{type:"heading",props:{level:3,isToggleable:!0}})},key:"toggle_heading_3",...e.dictionary.slash_menu.toggle_heading_3}),e.settings.heading.levels.filter(n=>n>3).forEach(n=>{t.push({onItemClick:()=>{Yr(e,{type:"heading",props:{level:n}})},key:`heading_${n}`,...e.dictionary.slash_menu[`heading_${n}`]})})),t.push({onItemClick:()=>{e.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...e.dictionary.slash_menu.emoji}),t}function B4(e,t){return e.filter(({title:n,aliases:r})=>n.toLowerCase().includes(t.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(t.toLowerCase())).length!==0)}function F_(e){return e&&Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}let V4=class nK{constructor(t){ne(this,"blockSpecs"),ne(this,"inlineContentSpecs"),ne(this,"styleSpecs"),ne(this,"blockSchema"),ne(this,"inlineContentSchema"),ne(this,"styleSchema"),ne(this,"BlockNoteEditor","only for types"),ne(this,"Block","only for types"),ne(this,"PartialBlock","only for types"),this.blockSpecs=F_(t?.blockSpecs)||j4,this.inlineContentSpecs=F_(t?.inlineContentSpecs)||tK,this.styleSpecs=F_(t?.styleSpecs)||z4,this.blockSchema=kW(this.blockSpecs),this.inlineContentSchema=AW(this.inlineContentSpecs),this.styleSchema=MW(this.styleSpecs)}static create(t){return new nK(t)}};const uSe={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},dSe=()=>{const e=document.createElement("div");return e.className="bn-page-break",e.setAttribute("data-page-break",""),{dom:e}},fSe=e=>{if(e.tagName==="DIV"&&e.hasAttribute("data-page-break"))return{type:"pageBreak"}},hSe=()=>{const e=document.createElement("div");return e.setAttribute("data-page-break",""),{dom:e}},pSe=Wb(uSe,{render:dSe,parse:fSe,toExternalHTML:hSe});V4.create({blockSpecs:{pageBreak:pSe}});function mSe(e){return e.transact(t=>{const n=Jc(t.doc,t.selection.anchor);if(t.selection instanceof vn)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:t.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:t.selection.$headCell.pos-n.posBeforeNode};if(t.selection instanceof We)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=Jc(t.doc,t.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:t.selection.anchor-n.posBeforeNode,headOffset:t.selection.head-r.posBeforeNode}}})}function gSe(e,t){var n,r;const o=(n=Fi(t.anchorBlockId,e.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${t.anchorBlockId} to update selection`);let i;if(t.type==="cell")i=vn.create(e.doc,o+t.anchorCellOffset,o+t.headCellOffset);else if(t.type==="node")i=We.create(e.doc,o+1);else{const s=(r=Fi(t.headBlockId,e.doc))==null?void 0:r.posBeforeNode;if(s===void 0)throw new Error(`Could not find block with ID ${t.headBlockId} to update selection`);i=Ve.create(e.doc,o+t.anchorOffset,s+t.headOffset)}e.setSelection(i)}function KR(e){return e.map(t=>t.type==="columnList"?t.children.map(n=>KR(n.children)).flat():{...t,children:KR(t.children)}).flat()}function rK(e,t,n){e.transact(r=>{var o;const i=((o=e.getSelection())==null?void 0:o.blocks)||[e.getTextCursorPosition().block],s=mSe(e);e.removeBlocks(i),e.insertBlocks(KR(i),t,n),gSe(r,s)})}function oK(e){return!e||e.type!=="columnList"}function iK(e,t,n){let r,o;if(t?t.children.length>0?(r=t.children[t.children.length-1],o="after"):(r=t,o="before"):n&&(r=n,o="before"),!r||!o)return;const i=e.getParentBlock(r);return oK(i)?{referenceBlock:r,placement:o}:iK(e,o==="after"?r:e.getPrevBlock(r),i)}function sK(e,t,n){let r,o;if(t?t.children.length>0?(r=t.children[0],o="before"):(r=t,o="after"):n&&(r=n,o="after"),!r||!o)return;const i=e.getParentBlock(r);return oK(i)?{referenceBlock:r,placement:o}:sK(e,o==="before"?r:e.getNextBlock(r),i)}function ySe(e){e.transact(()=>{const t=e.getSelection(),n=t?.blocks[0]||e.getTextCursorPosition().block,r=iK(e,e.getPrevBlock(n),e.getParentBlock(n));r&&rK(e,r.referenceBlock,r.placement)})}function bSe(e){e.transact(()=>{const t=e.getSelection(),n=t?.blocks[t?.blocks.length-1]||e.getTextCursorPosition().block,r=sK(e,e.getNextBlock(n),e.getParentBlock(n));r&&rK(e,r.referenceBlock,r.placement)})}function vSe(e,t,n){const{$from:r,$to:o}=e.selection,i=r.blockRange(o,m=>m.childCount>0&&(m.type.name==="blockGroup"||m.type.name==="column"));if(!i)return!1;const s=i.startIndex;if(s===0)return!1;const a=i.parent.child(s-1);if(a.type!==t)return!1;const l=a.lastChild&&a.lastChild.type===n,c=pe.from(l?t.create():null),u=new Te(pe.from(t.create(null,pe.from(n.create(null,c)))),l?3:1,0),f=i.start,p=i.end;return e.step(new vr(f-(l?3:1),p,f,p,u,1,!0)).scrollIntoView(),!0}function aK(e){return e.transact(t=>vSe(t,e.pmSchema.nodes.blockContainer,e.pmSchema.nodes.blockGroup))}function wSe(e){e._tiptapEditor.commands.liftListItem("blockContainer")}function xSe(e){return e.transact(t=>{const{bnBlock:n}=AC(t);return t.doc.resolve(n.beforePos).nodeBefore!==null})}function SSe(e){return e.transact(t=>{const{bnBlock:n}=AC(t);return t.doc.resolve(n.beforePos).depth>1})}function lK(e,t){const n=typeof t=="string"?t:t.id,r=ro(e),o=Fi(n,e);if(o)return sr(o.node,r)}function kSe(e,t){const n=typeof t=="string"?t:t.id,r=Fi(n,e),o=ro(e);if(!r)return;const i=e.resolve(r.posBeforeNode).nodeBefore;if(i)return sr(i,o)}function CSe(e,t){const n=typeof t=="string"?t:t.id,r=Fi(n,e),o=ro(e);if(!r)return;const i=e.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(i)return sr(i,o)}function ESe(e,t){const n=typeof t=="string"?t:t.id,r=ro(e),o=Fi(n,e);if(!o)return;const i=e.resolve(o.posBeforeNode),s=i.node(),a=i.node(-1),l=a.type.name!=="doc"?s.type.name==="blockGroup"?a:s:void 0;if(l)return sr(l,r)}function TSe(e,t,n,r={updateSelection:!0}){let{from:o,to:i}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},s=!0,a=!0,l="";if(n.forEach(c=>{c.check(),s&&c.isText&&c.marks.length===0?l+=c.text:s=!1,a=a?c.isBlock:!1}),o===i&&a){const{parent:c}=e.doc.resolve(o);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(o-=1,i+=1)}return s?e.insertText(l,o,i):e.replaceWith(o,i,n),r.updateSelection&&Aq(e,e.steps.length-1,-1),!0}function _Se(e){const t=ro(e);if(e.selection.empty||"node"in e.selection)return;const n=e.doc.resolve(Jc(e.doc,e.selection.from).posBeforeNode),r=e.doc.resolve(Jc(e.doc,e.selection.to).posBeforeNode),o=(c,u)=>{const f=n.posAtIndex(c,u),p=e.doc.resolve(f).nodeAfter;if(!p)throw new Error(`Error getting selection - node not found at position ${f}`);return sr(p,t)},i=[],s=n.sharedDepth(r.pos),a=n.index(s),l=r.index(s);if(n.depth>s){i.push(sr(n.nodeAfter,t));for(let c=n.depth;c>s;c--)if(n.node(c).type.isInGroup("childContainer")){const u=n.index(c)+1,f=n.node(c).childCount;for(let p=u;p<f;p++)i.push(o(p,c))}}else i.push(o(a,s));for(let c=a+1;c<=l;c++)i.push(o(c,s));if(i.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${e.selection})`);return{blocks:i}}function ASe(e,t,n){const r=typeof t=="string"?t:t.id,o=typeof n=="string"?n:n.id,i=ro(e),s=Yb(i);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=Fi(r,e.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=Fi(o,e.doc);if(!l)throw new Error(`Block with ID ${o} not found`);const c=kd(a),u=kd(l),f=s.blockSchema[c.blockNoteType],p=s.blockSchema[u.blockNoteType];if(!c.isBlockContainer||f.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!u.isBlockContainer||p.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let m,y;if(f.content==="table"){const b=Yn.get(c.blockContent.node);m=c.blockContent.beforePos+b.positionAt(0,0,c.blockContent.node)+1+2}else m=c.blockContent.beforePos+1;if(p.content==="table"){const b=Yn.get(u.blockContent.node),x=u.blockContent.beforePos+b.positionAt(b.height-1,b.width-1,u.blockContent.node)+1,S=e.doc.resolve(x).nodeAfter.nodeSize;y=x+S-2}else y=u.blockContent.afterPos-1;e.setSelection(Ve.create(e.doc,m,y))}function MSe(e){const t=ro(e);let n=e.selection.$from,r=e.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=e.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=e.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=e.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=e.doc.resolve(n.pos+1);const o=Pwe(e.doc.slice(n.pos,r.pos,!0),t);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function RSe(e){const{bnBlock:t}=AC(e),n=ro(e.doc),r=e.doc.resolve(t.beforePos),o=r.nodeBefore,i=e.doc.resolve(t.afterPos).nodeAfter;let s;return r.depth>1&&(s=r.node(),s.type.isInGroup("bnBlock")||(s=r.node(r.depth-1))),{block:sr(t.node,n),prevBlock:o===null?void 0:sr(o,n),nextBlock:i===null?void 0:sr(i,n),parentBlock:s===void 0?void 0:sr(s,n)}}function cK(e,t,n="start"){const r=typeof t=="string"?t:t.id,o=ro(e.doc),i=Yb(o),s=Fi(r,e.doc);if(!s)throw new Error(`Block with ID ${r} not found`);const a=kd(s),l=i.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const c=a.blockContent;if(l==="none"){e.setSelection(We.create(e.doc,c.beforePos));return}if(l==="inline")n==="start"?e.setSelection(Ve.create(e.doc,c.beforePos+1)):e.setSelection(Ve.create(e.doc,c.afterPos-1));else if(l==="table")n==="start"?e.setSelection(Ve.create(e.doc,c.beforePos+4)):e.setSelection(Ve.create(e.doc,c.afterPos-4));else throw new ma(l)}else{const c=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;cK(e,c.attrs.id,n)}}let Fp;async function F4(){if(Fp)return Fp;const e=await Promise.all([Ne(()=>import("./index-CONFr0ka.js"),__vite__mapDeps([0,1])),Ne(()=>import("./index-CpU6qSn1.js"),[]),Ne(()=>Promise.resolve().then(()=>zdt),void 0),Ne(()=>import("./index-BXP3FPBy.js"),__vite__mapDeps([2,1])),Ne(()=>import("./index-cN7DUi1W.js"),__vite__mapDeps([3,4])),Ne(()=>Promise.resolve().then(()=>tpt),void 0),Ne(()=>import("./index-DEp91yl1.js"),[]),Ne(()=>Promise.resolve().then(()=>_ut),void 0),Ne(()=>Promise.resolve().then(()=>bdt),void 0),Ne(()=>import("./index-DzxBRh44.js"),__vite__mapDeps([5,4]))]);return Fp={rehypeParse:e[0],rehypeStringify:e[1],unified:e[2],hastUtilFromDom:e[3],rehypeRemark:e[4],remarkGfm:e[5],remarkStringify:e[6],remarkParse:e[7],remarkRehype:e[8],rehypeFormat:e[9]},Fp}function NSe(){const e=t=>{let n=t.children.length;for(let r=0;r<n;r++){const o=t.children[r];if(o.type==="element"&&(e(o),o.tagName==="u"))if(o.children.length>0){t.children.splice(r,1,...o.children);const i=o.children.length-1;n+=i,r+=i}else t.children.splice(r,1),n--,r--}};return e}function ISe(){const e=Fp;if(!e)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const t=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const i=n.children[o],s=o+1<n.children.length?n.children[o+1]:void 0;i.type==="element"&&i.tagName==="input"&&((r=i.properties)==null?void 0:r.type)==="checkbox"&&s?.type==="element"&&s.tagName==="p"?(s.tagName="span",s.children.splice(0,0,e.hastUtilFromDom.fromDom(document.createTextNode(" ")))):t(i)}};return t}function H4(e){const t=Fp;if(!t)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return t.unified.unified().use(t.rehypeParse.default,{fragment:!0}).use(NSe).use(ISe).use(t.rehypeRemark.default).use(t.remarkGfm.default).use(t.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(e).value}async function OSe(e,t,n,r){await F4();const o=NC(t,n).exportBlocks(e,r);return H4(o)}function PSe(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}function DSe(e){return e.nodeType===3&&!/\S/.test(e.nodeValue||"")}function $Se(e){e.querySelectorAll("li > ul, li > ol").forEach(t=>{const n=PSe(t),r=t.parentElement,o=Array.from(r.childNodes).slice(n+1);t.remove(),o.forEach(i=>{i.remove()}),r.insertAdjacentElement("afterend",t),o.reverse().forEach(i=>{if(DSe(i))return;const s=document.createElement("li");s.append(i),t.insertAdjacentElement("afterend",s)}),r.childNodes.length===0&&r.remove()})}function LSe(e){e.querySelectorAll("li + ul, li + ol").forEach(t=>{var n,r;const o=t.previousElementSibling,i=document.createElement("div");o.insertAdjacentElement("afterend",i),i.append(o);const s=document.createElement("div");for(s.setAttribute("data-node-type","blockGroup"),i.append(s);((n=i.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=i.nextElementSibling)==null?void 0:r.nodeName)==="OL";)s.append(i.nextElementSibling)})}let y8=null;function jSe(){return y8||(y8=document.implementation.createHTMLDocument("title"))}function uK(e){if(typeof e=="string"){const t=jSe().createElement("div");t.innerHTML=e,e=t}return $Se(e),LSe(e),e}async function dK(e,t){const n=uK(e),r=Bl.fromSchema(t).parse(n,{topNode:t.nodes.blockGroup.create()}),o=[];for(let i=0;i<r.childCount;i++)o.push(sr(r.child(i),t));return o}function zSe(e,t){const n=t.value?t.value:"",r={};t.lang&&(r["data-language"]=t.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}async function fK(e){const t=await F4();return t.unified.unified().use(t.remarkParse.default).use(t.remarkGfm.default).use(t.remarkRehype.default,{handlers:{...t.remarkRehype.defaultHandlers,code:zSe}}).use(t.rehypeStringify.default).processSync(e).value}async function BSe(e,t){const n=await fK(e);return dK(n,t)}const U4=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function VSe(e,t){if(!e.startsWith(".")||!t.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return e===t}function FSe(e,t){const n=e.split("/"),r=t.split("/");if(n.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function b8(e,t,n,r="after"){let o;return Array.isArray(t.content)&&t.content.length===0?o=e.updateBlock(t,n).id:o=e.insertBlocks([n],t,r)[0].id,o}async function hK(e,t){var n;if(!t.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in e?e.dataTransfer:e.clipboardData;if(r===null)return;let o=null;for(const a of U4)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const i=r.items;if(!i)return;e.preventDefault();const s=Object.values(t.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<i.length;a++){let l="file";for(const u of s)for(const f of u.fileBlockAccept||[]){const p=f.startsWith("."),m=i[a].getAsFile();if(m&&(!p&&m.type&&FSe(i[a].type,f)||p&&VSe("."+m.name.split(".").pop(),f))){l=u.type;break}}const c=i[a].getAsFile();if(c){const u={type:l,props:{name:c.name}};let f;if(e.type==="paste"){const y=t.getTextCursorPosition().block;f=b8(t,y,u)}else if(e.type==="drop"){const y={left:e.clientX,top:e.clientY},b=(n=t.prosemirrorView)==null?void 0:n.posAtCoords(y);if(!b)return;f=t.transact(x=>{var S;const E=Jc(x.doc,b.pos),T=(S=t.prosemirrorView)==null?void 0:S.dom.querySelector(`[data-id="${E.node.attrs.id}"]`),A=T?.getBoundingClientRect();return b8(t,t.getBlock(E.node.attrs.id),u,A&&(A.top+A.bottom)/2>y.top?"before":"after")})}else return;const p=await t.uploadFile(c,f),m=typeof p=="string"?{props:{url:p}}:{...p};t.updateBlock(f,m)}}}const HSe=e=>Mn.create({name:"dropFile",addProseMirrorPlugins(){return[new St({props:{handleDOMEvents:{drop(t,n){if(!e.isEditable)return;let r=null;for(const o of U4)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(hK(n,e),!0):!1}}}})]}}),USe=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,GSe=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,qSe=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,ZSe=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,WSe=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,KSe=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,YSe=/\n{2} {0,3}-{2,48}\n{2}/,JSe=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,XSe=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,QSe=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,eke=/^\s*\|(.+\|)+\s*$/m,tke=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,nke=/^\s*\|(.+\|)+\s*$/m,rke=e=>USe.test(e)||GSe.test(e)||qSe.test(e)||ZSe.test(e)||WSe.test(e)||KSe.test(e)||YSe.test(e)||JSe.test(e)||XSe.test(e)||QSe.test(e)||eke.test(e)||tke.test(e)||nke.test(e);async function oke(e,t){const{schema:n}=t.state;if(!e.clipboardData)return!1;const r=e.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return t.pasteText(r),!0;const o=e.clipboardData.getData("vscode-editor-data"),i=o?JSON.parse(o):void 0,s=i?.mode;return s?(t.pasteHTML(`<pre><code class="language-${s}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function ike({event:e,editor:t,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(t.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=e.clipboardData)==null?void 0:o.getData("text/plain");if(a)return t.pasteText(a),!0}let i;for(const a of U4)if(e.clipboardData.types.includes(a)){i=a;break}if(!i)return!0;if(i==="vscode-editor-data")return oke(e,t.prosemirrorView),!0;if(i==="Files")return hK(e,t),!0;const s=e.clipboardData.getData(i);if(i==="blocknote/html")return t.pasteHTML(s,!0),!0;if(i==="text/markdown")return t.pasteMarkdown(s),!0;if(n){const a=e.clipboardData.getData("text/plain");if(rke(a))return t.pasteMarkdown(a),!0}return i==="text/html"?(t.pasteHTML(s),!0):r?(t.pasteMarkdown(s),!0):(t.pasteText(s),!0)}const ske=(e,t)=>Mn.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new St({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!e.isEditable)return t({event:r,editor:e,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:i=!0}={})=>ike({event:r,editor:e,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:i})})}}}})]}});function pK(e){const t=[];return e.descendants(n=>{var r,o;const i=ro(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(s=>{t.push(sr(s,i))}),!1):n.type.isInGroup("bnBlock")?(t.push(sr(n,i)),!1):!0}),t}function ake(e,t,n){var r;let o=!1;const i=e.state.selection instanceof vn;if(!i){const l=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,c=[];for(let u=0;u<l.childCount;u++)c.push(l.child(u));o=c.find(u=>u.type.isInGroup("bnBlock")||u.type.name==="blockGroup"||u.type.spec.group==="blockContent")===void 0,o&&(t=l)}let s;const a=NC(e.state.schema,n);if(i){((r=t.firstChild)==null?void 0:r.type.name)==="table"&&(t=t.firstChild.content);const l=_W(t,n.schema.inlineContentSchema,n.schema.styleSchema);s=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=MC(t,n.schema.inlineContentSchema,n.schema.styleSchema);s=a.exportInlineContent(l,{})}else{const l=pK(t);s=a.exportBlocks(l,{})}return s}function mK(e,t){"node"in e.state.selection&&e.state.selection.node.type.spec.group==="blockContent"&&t.transact(s=>s.setSelection(new We(s.doc.resolve(e.state.selection.from-1))));const n=e.serializeForClipboard(e.state.selection.content()).dom.innerHTML,r=e.state.selection.content().content,o=ake(e,r,t),i=H4(o);return{clipboardHTML:n,externalHTML:o,markdown:i}}const v8=()=>{const e=window.getSelection();if(!e||e.isCollapsed)return!0;let t=e.focusNode;for(;t;){if(t instanceof HTMLElement&&t.getAttribute("contenteditable")==="false")return!0;t=t.parentElement}return!1},w8=(e,t,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=mK(t,e);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",i)},lke=e=>Mn.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new St({props:{handleDOMEvents:{copy(t,n){return v8()||w8(e,t,n),!0},cut(t,n){return v8()||(w8(e,t,n),t.editable&&t.dispatch(t.state.tr.deleteSelection())),!0},dragstart(t,n){if(!("node"in t.state.selection)||t.state.selection.node.type.spec.group!=="blockContent")return;e.transact(s=>s.setSelection(new We(s.doc.resolve(t.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=mK(t,e);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",i),!0}}}})]}}),cke=Mn.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:Nr.backgroundColor.default,parseHTML:e=>e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):Nr.backgroundColor.default,renderHTML:e=>e.backgroundColor===Nr.backgroundColor.default?{}:{"data-background-color":e.backgroundColor}}}}]}});let G4=class{constructor(){ne(this,"callbacks",{})}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),()=>this.off(t,n)}emit(t,...n){const r=this.callbacks[t];r&&r.forEach(o=>o.apply(this,n))}off(t,n){const r=this.callbacks[t];r&&(n?this.callbacks[t]=r.filter(o=>o!==n):delete this.callbacks[t])}removeAllListeners(){this.callbacks={}}},no=class extends G4{constructor(...t){super(),ne(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(t){this.plugins.push(t)}get priority(){}};class uke extends no{constructor(){super(),ne(this,"beforeChangeCallbacks",[]),this.addProsemirrorPlugin(new St({filterTransaction:t=>{let n;return this.beforeChangeCallbacks.reduce((r,o)=>r===!1?r:o({getChanges(){return n||(n=PW(t),n)},tr:t})!==!1,!0)}}))}static key(){return"blockChange"}subscribe(t){return this.beforeChangeCallbacks.push(t),()=>{this.beforeChangeCallbacks=this.beforeChangeCallbacks.filter(n=>n!==t)}}}const dx=class gK extends no{constructor(t){super(),ne(this,"provider"),ne(this,"recentlyUpdatedCursors"),ne(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const i=(this.collaboration.renderCursor??gK.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(i.addEventListener("mouseenter",()=>{const s=this.recentlyUpdatedCursors.get(r);s.element.setAttribute("data-active",""),s.hideTimeout&&(clearTimeout(s.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:void 0}))}),i.addEventListener("mouseleave",()=>{const s=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:setTimeout(()=>{s.element.removeAttribute("data-active")},2e3)})})),o={element:i,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),ne(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=t,this.provider=t.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",t.user),t.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(gwe(this.provider.awareness,{selectionBuilder:C4,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}static isDarkColor(t){const n=t.charAt(0)==="#"?t.substring(1,7):t,r=parseInt(n.substring(0,2),16),o=parseInt(n.substring(2,4),16),i=parseInt(n.substring(4,6),16),s=[r/255,o/255,i/255].map(a=>a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]<=.179}};ne(dx,"defaultCursorRender",e=>{const t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${e.color}; color: ${dx.isDarkColor(e.color)?"white":"black"}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${e.color}; color: ${dx.isDarkColor(e.color)?"white":"black"}`),r.insertBefore(document.createTextNode(e.name),null),n.insertBefore(r,null),t.insertBefore(document.createTextNode(""),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode(""),null),t});let yK=dx,YR=class extends no{static key(){return"ySyncPlugin"}constructor(t){super(),this.addProsemirrorPlugin(ewe(t))}get priority(){return 1001}},JR=class extends no{static key(){return"yUndoPlugin"}constructor({editor:t}){super(),this.addProsemirrorPlugin(kwe({trackedOrigins:[t]}))}get priority(){return 1e3}};const bK=$o.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:e=>!!e.getAttribute("data-orphan"),renderHTML:e=>e.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:e=>e.getAttribute("data-bn-thread-id"),renderHTML:e=>({"data-bn-thread-id":e.threadId}),default:""}}},renderHTML({HTMLAttributes:e}){return["span",Cs(e,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(e){return e.name==="comment"?{blocknoteIgnore:!0}:{}}});class dke extends G4{constructor(t){super(),ne(this,"userCache",new Map),ne(this,"loadingUsers",new Set),this.resolveUsers=t}async loadUsers(t){const n=t.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(t){return this.userCache.get(t)}subscribe(t){return this.on("update",t)}}const ow=new Bt("blocknote-comments"),fke="SET_SELECTED_THREAD_ID";function hke(e,t){const n=new Map;return e.descendants((r,o)=>{r.marks.forEach(i=>{if(i.type.name===t){const s=i.attrs.threadId;if(!s)return;const a=o,l=a+r.nodeSize,c=n.get(s)??{from:1/0,to:0};n.set(s,{from:Math.min(a,c.from),to:Math.max(l,c.to)})}})}),n}class pke extends no{constructor(t,n,r){if(super(),ne(this,"userStore"),ne(this,"pendingComment",!1),ne(this,"selectedThreadId"),ne(this,"threadPositions",new Map),ne(this,"updateMarksFromThreads",i=>{this.editor.transact(s=>{s.doc.descendants((a,l)=>{a.marks.forEach(c=>{if(c.type.name===this.markType){const u=c.type,f=c.attrs.threadId,p=i.get(f),m=!!(!p||p.resolved||p.deletedAt);if(m!==c.attrs.orphan){const y=Math.max(l,0),b=Math.min(l+a.nodeSize,s.doc.content.size-1,s.doc.content.size-1);s.removeMark(y,b,c),s.addMark(y,b,u.create({...c.attrs,orphan:m})),m&&this.selectedThreadId===f&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=t,this.threadStore=n,this.markType=r,!t.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new dke(t.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),t.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),t.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new St({key:ow,state:{init(){return{decorations:Rt.empty}},apply(i,s){const a=i.getMeta(ow);if(!i.docChanged&&!a)return s;const l=i.docChanged?hke(i.doc,o.markType):o.threadPositions;(l.size>0||o.threadPositions.size>0)&&(o.threadPositions=l,o.emitStateUpdate());const c=[];if(o.selectedThreadId){const u=l.get(o.selectedThreadId);u&&c.push(Gt.inline(u.from,u.to,{class:"bn-thread-mark-selected"}))}return{decorations:Rt.create(i.doc,c)}}},props:{decorations(i){var s;return((s=ow.getState(i))==null?void 0:s.decorations)??Rt.empty},handleClick:(i,s,a)=>{if(a.button!==0)return;const l=i.state.doc.nodeAt(s);if(!l){o.selectThread(void 0);return}const c=l.marks.find(f=>f.type.name===r&&f.attrs.orphan!==!0),u=c?.attrs.threadId;o.selectThread(u,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(t){return this.on("update",t)}selectThread(t,n=!0){var r,o;if(this.selectedThreadId!==t&&(this.selectedThreadId=t,this.emitStateUpdate(),this.editor.transact(i=>i.setMeta(ow,{name:fke})),t&&n)){const i=this.threadPositions.get(t);if(!i)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(i.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(t){const n=await this.threadStore.createThread(t);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,i=sn.getState(r.state),s={prosemirror:{head:o.head,anchor:o.anchor},yjs:i?AS(i.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:s})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class mke{constructor(t,n,r,o){ne(this,"state"),ne(this,"emitUpdate"),ne(this,"mouseDownHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),ne(this,"dragstartHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),ne(this,"scrollHandler",()=>{var i;if((i=this.state)!=null&&i.show){const s=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!s)return;this.state.referencePos=s.getBoundingClientRect(),this.emitUpdate()}}),ne(this,"closeMenu",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(t,n){var r,o;const i=this.pluginKey.getState(t.state),s=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&i!=null&&i.block&&this.editor.isEditable){const c=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${i.block.id}"]`);if(!c)return;this.state={show:!0,referencePos:c.getBoundingClientRect(),block:i.block},this.emitUpdate();return}const a=i?.block&&!(s!=null&&s.block),l=!(i!=null&&i.block)&&s?.block;a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const H_=new Bt("FilePanelPlugin");class gke extends no{constructor(t){super(),ne(this,"view"),ne(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new St({key:H_,view:n=>(this.view=new mke(t,H_,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(H_)||(!n.getMeta(sn)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}onUpdate(t){return this.on("update",t)}}class yke{constructor(t,n,r){ne(this,"state"),ne(this,"emitUpdate"),ne(this,"preventHide",!1),ne(this,"preventShow",!1),ne(this,"shouldShow",({view:o,state:i,from:s,to:a})=>{const{doc:l,selection:c}=i,{empty:u}=c,f=!l.textBetween(s,a).length&&pC(i.selection);if(c.$from.parent.type.spec.code||dR(c)&&c.node.type.spec.code||u||f)return!1;const p=document.activeElement;return!(!this.isElementWithinEditorWrapper(p)&&o.editable)}),ne(this,"blurHandler",o=>{var i;if(this.preventHide){this.preventHide=!1;return}const s=this.pmView.dom.parentElement;o&&o.relatedTarget&&(s===o.relatedTarget||s.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),ne(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const i=this.pmView.dom.parentElement;return i?i.contains(o):!1}),ne(this,"viewMousedownHandler",o=>{(!this.isElementWithinEditorWrapper(o.target)||o.button===0)&&(this.preventShow=!0)}),ne(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),ne(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),ne(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),ne(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(t,n){var r,o,i;const{state:s,composing:a}=t,{doc:l,selection:c}=s,u=n&&n.doc.eq(l)&&n.selection.eq(c);if(a||u)return;const{ranges:f}=c,p=Math.min(...f.map(x=>x.$from.pos)),m=Math.max(...f.map(x=>x.$to.pos)),y=this.shouldShow({view:t,state:s,from:p,to:m}),b=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(y||this.preventHide)&&!b){const x={show:!0,referencePos:this.getSelectionBoundingBox()};(x.show!==((r=this.state)==null?void 0:r.show)||x.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=x,this.emitUpdate());return}if((i=this.state)!=null&&i.show&&!this.preventHide&&(!y||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:t}=this.pmView,{selection:n}=t,{ranges:r}=n,o=Math.min(...r.map(s=>s.$from.pos)),i=Math.max(...r.map(s=>s.$to.pos));if(dR(n)){const s=this.pmView.nodeDOM(o);if(s)return s.getBoundingClientRect()}return Ux(this.pmView,o,i)}}const bke=new Bt("FormattingToolbarPlugin");class vke extends no{constructor(t){super(),ne(this,"view"),ne(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new St({key:bke,view:n=>(this.view=new yke(t,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}onUpdate(t){return this.on("update",t)}}const wke=Ql.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Cs(this.options.HTMLAttributes,e)]},renderText(){return`
`}}),x8=(e,t)=>{const n=e.resolve(t);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return Kb(e.resolve(r))},fx=(e,t)=>{const n=e.resolve(t),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return Kb(e.resolve(o))},vK=(e,t)=>{for(;t.childContainer;){const n=t.childContainer.node,r=e.resolve(t.childContainer.beforePos+1).posAtIndex(n.childCount-1);t=Kb(e.resolve(r))}return t},xke=(e,t)=>e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*"&&e.blockContent.node.childCount>0&&t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*",Ske=(e,t,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=e.doc.resolve(r.childContainer.beforePos+1),i=e.doc.resolve(r.childContainer.afterPos-1),s=o.blockRange(i);if(t){const a=e.doc.resolve(r.bnBlock.beforePos);e.tr.lift(s,a.depth)}}if(t){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);t(e.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},S8=e=>({state:t,dispatch:n})=>{const r=t.doc.resolve(e),o=Kb(r),i=fx(t.doc,o.bnBlock.beforePos);if(!i)return!1;const s=vK(t.doc,i);return xke(s,o)?Ske(t,n,s,o):!1},kke=Mn.create({priority:50,addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:i})=>{const s=Un(i);if(!s.isBlockContainer)return!1;const a=i.selection.from===s.blockContent.beforePos+1,l=s.blockContent.node.type.name==="paragraph";return a&&!l?o.command(Jo(s.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:i})=>{const s=Un(i);if(!s.isBlockContainer)return!1;const{blockContent:a}=s;return i.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:i})=>{const s=Un(i);if(!s.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=s,c=i.selection.from===l.beforePos+1,u=i.selection.empty,f=a.beforePos;return c&&u?r().command(S8(f)).scrollIntoView().run():!1}),()=>o.command(({state:i,dispatch:s})=>{const a=Un(i);if(!a.isBlockContainer||i.selection.from!==a.blockContent.beforePos+1||fx(i.doc,a.bnBlock.beforePos))return!1;const l=x8(i.doc,a.bnBlock.beforePos);if(l?.blockNoteType!=="column")return!1;const c=l,u=x8(i.doc,c.bnBlock.beforePos);if(u?.blockNoteType!=="columnList")throw new Error("parent of column is not a column list");const f=c.childContainer.node.childCount===1,p=f&&u.childContainer.node.childCount===2,m=u.childContainer.node.firstChild===c.bnBlock.node;if(s){const y=i.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(p)if(m){i.tr.step(new vr(u.bnBlock.beforePos,u.bnBlock.afterPos,c.bnBlock.afterPos+1,u.bnBlock.afterPos-2,y,y.size,!1));const b=i.tr.doc.resolve(c.bnBlock.beforePos);i.tr.setSelection(Ve.between(b,b))}else{i.tr.step(new vr(u.bnBlock.beforePos,u.bnBlock.afterPos,u.bnBlock.beforePos+2,c.bnBlock.beforePos-1,y,0,!1));const b=i.tr.doc.resolve(i.tr.mapping.map(c.bnBlock.beforePos-1));i.tr.setSelection(Ve.between(b,b))}else if(f)if(m){i.tr.delete(c.bnBlock.beforePos,c.bnBlock.afterPos),i.tr.insert(u.bnBlock.beforePos,y.content);const b=i.tr.doc.resolve(u.bnBlock.beforePos);i.tr.setSelection(Ve.between(b,b))}else i.tr.delete(c.bnBlock.beforePos-1,c.bnBlock.beforePos+1);else{i.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),m?i.tr.insert(u.bnBlock.beforePos-1,y.content):i.tr.insert(c.bnBlock.beforePos-1,y.content);const b=i.tr.doc.resolve(c.bnBlock.beforePos-1);i.tr.setSelection(Ve.between(b,b))}}return!0}),()=>o.command(({state:i})=>{const s=Un(i);if(!s.isBlockContainer)return!1;if(s.blockContent.node.childCount===0&&s.blockContent.node.type.spec.content==="inline*"){const a=fx(i.doc,s.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const c=s.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(c)}else if(a.blockContent.node.type.spec.content===""){const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(c)}else{const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(c)}return l.deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:i})=>{const s=Un(i);if(!s.isBlockContainer)throw new Error("todo");const a=i.selection.from===s.blockContent.beforePos+1,l=i.selection.empty,c=fx(i.doc,s.bnBlock.beforePos);if(c&&a&&l){const u=vK(i.doc,c);if(!u.isBlockContainer)throw new Error("todo");if(u.blockContent.node.type.spec.content===""||u.blockContent.node.type.spec.content==="inline*"&&u.blockContent.node.childCount===0)return r().cut({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos},u.bnBlock.afterPos).deleteRange({from:u.bnBlock.beforePos,to:u.bnBlock.afterPos}).run()}return!1})]),t=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const i=Un(o);if(!i.isBlockContainer)return!1;const{bnBlock:s,blockContent:a,childContainer:l}=i,{depth:c}=o.doc.resolve(s.beforePos),u=s.afterPos===o.doc.nodeSize-3,f=o.selection.from===a.afterPos-1,p=o.selection.empty;if(!u&&f&&p&&l===void 0){let m=c,y=s.afterPos+1,b=o.doc.resolve(y).depth;for(;b<m;)m=b,y+=2,b=o.doc.resolve(y).depth;return r.command(S8(y-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o,tr:i})=>[()=>o.command(({state:s})=>{const a=Un(s);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=a,{depth:u}=s.doc.resolve(l.beforePos),f=s.selection.$anchor.parentOffset===0,p=s.selection.anchor===s.selection.head,m=c.node.childCount===0,y=u>1;return f&&p&&m&&y?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const a=Un(s),l=this.options.editor.schema.blockSchema[a.blockNoteType].hardBreakShortcut??"shift+enter";if(l==="none")return!1;if(l==="shift+enter"&&r||l==="enter"){const c=i.storedMarks||i.selection.$head.marks().filter(u=>this.editor.extensionManager.splittableMarks.includes(u.type.name));return i.insert(i.selection.head,i.doc.type.schema.nodes.hardBreak.create()).ensureMarks(c),!0}return!1}),()=>o.command(({state:s,dispatch:a})=>{const l=Un(s);if(!l.isBlockContainer)return!1;const{bnBlock:c,blockContent:u}=l,f=s.selection.$anchor.parentOffset===0,p=s.selection.anchor===s.selection.head,m=u.node.childCount===0;if(f&&p&&m){const y=c.afterPos,b=y+2;if(a){const x=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(y,x).scrollIntoView(),s.tr.setSelection(new Ve(s.doc.resolve(b)))}return!0}return!1}),()=>o.command(({state:s,chain:a})=>{const l=Un(s);if(!l.isBlockContainer)return!1;const{blockContent:c}=l,u=s.selection.$anchor.parentOffset===0;return c.node.childCount===0?!1:(a().deleteSelection().command(YW(s.selection.from,u,u)).run(),!0)})]);return{Backspace:e,Delete:t,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:aK(this.options.editor)},"Shift-Tab":()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class Cke{constructor(t,n,r){ne(this,"state"),ne(this,"emitUpdate"),ne(this,"menuUpdateTimer"),ne(this,"startMenuUpdateTimer"),ne(this,"stopMenuUpdateTimer"),ne(this,"mouseHoveredLinkMark"),ne(this,"mouseHoveredLinkMarkRange"),ne(this,"keyboardHoveredLinkMark"),ne(this,"keyboardHoveredLinkMarkRange"),ne(this,"linkMark"),ne(this,"linkMarkRange"),ne(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const i=o.target,s=this.pmView.posAtDOM(i,0)+1,a=this.pmView.state.doc.resolve(s),l=a.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=c,this.mouseHoveredLinkMarkRange=A0(a,c.type,c.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),ne(this,"clickHandler",o=>{var i;const s=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(s===o.target||s.contains(o.target))&&(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),ne(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=Ux(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),ne(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(t,n){var r;this.editor.transact(o=>{const i=ro(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,i.mark("link",{href:t}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var t;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(t=this.state)!=null&&t.show&&(this.state.show=!1,this.emitUpdate())}update(t,n,r=!1){var o;const{state:i}=t;if(n&&n.selection.from===i.selection.from&&n.selection.to===i.selection.to||!this.pmView.hasFocus())return;const s=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const l of a)if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=A0(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:Ux(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&s&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const Eke=new Bt("LinkToolbarPlugin");class Tke extends no{constructor(t){super(),ne(this,"view"),ne(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),ne(this,"deleteLink",()=>{this.view.deleteLink()}),ne(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),ne(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),ne(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new St({key:Eke,view:n=>(this.view=new Cke(t,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(t){return this.on("update",t)}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}}const wK=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],xK="https",_ke=new Bt("node-selection-keyboard");class Ake extends no{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new St({key:_ke,props:{handleKeyDown:(t,n)=>{if("node"in t.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=t.state.tr;return t.dispatch(r.insert(t.state.tr.selection.$to.after(),t.state.schema.nodes.paragraph.createChecked()).setSelection(new Ve(r.doc.resolve(t.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const Mke=new Bt("blocknote-placeholder");class Rke extends no{static key(){return"placeholder"}constructor(t,n){super(),this.addProsemirrorPlugin(new St({key:Mke,view:r=>{var o,i;const s=`placeholder-selector-${Fq()}`;r.dom.classList.add(s);const a=document.createElement("style"),l=t._tiptapEditor.options.injectNonce;l&&a.setAttribute("nonce",l),((o=t.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?t.prosemirrorView.root.append(a):(i=t.prosemirrorView)==null||i.root.head.appendChild(a);const c=a.sheet,u=(f="")=>`.${s} .bn-block-content${f} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:f,emptyDocument:p,...m}=n;for(const[x,S]of Object.entries(m)){const E=`[data-content-type="${x}"]`;c.insertRule(`${u(E)} { content: ${JSON.stringify(S)}; }`)}c.insertRule(`${u("[data-is-only-empty-block]")} { content: ${JSON.stringify(p)}; }`),c.insertRule(`${u("[data-is-empty-and-focused]")} { content: ${JSON.stringify(f)}; }`)}catch(f){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",f)}return{destroy:()=>{var f,p;((f=t.prosemirrorView)==null?void 0:f.root)instanceof ShadowRoot?t.prosemirrorView.root.removeChild(a):(p=t.prosemirrorView)==null||p.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:i}=r;if(!t.isEditable||!i.empty||i.$from.parent.type.spec.code)return;const s=[];r.doc.content.size===6&&s.push(Gt.node(2,4,{"data-is-only-empty-block":"true"}));const a=i.$anchor,l=a.parent;if(l.content.size===0){const c=a.before();s.push(Gt.node(c,c+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return Rt.create(o,s)}}}))}}const k8=new Bt("previous-blocks"),Nke={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class Ike extends no{static key(){return"previousBlockType"}constructor(){super();let t;this.addProsemirrorPlugin(new St({key:k8,view(n){return{update:async(r,o)=>{var i;((i=this.key)==null?void 0:i.getState(r.state).updatedBlocks.size)>0&&(t=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(k8,{clearUpdate:!0}))},0))},destroy:()=>{t&&clearTimeout(t)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,i){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(i.doc))return r;const s={},a=i6(o.doc,u=>u.attrs.id),l=new Map(a.map(u=>[u.node.attrs.id,u])),c=i6(i.doc,u=>u.attrs.id);for(const u of c){const f=l.get(u.node.attrs.id),p=f?.node.firstChild,m=u.node.firstChild;if(f&&p&&m){const y={index:m.attrs.index,level:m.attrs.level,type:m.type.name,depth:i.doc.resolve(u.pos).depth};let b={index:p.attrs.index,level:p.attrs.level,type:p.type.name,depth:o.doc.resolve(f.pos).depth};s[u.node.attrs.id]=b,n.getMeta("numberedListIndexing")&&(u.node.attrs.id in r.prevTransactionOldBlockAttrs&&(b=r.prevTransactionOldBlockAttrs[u.node.attrs.id]),y.type==="numberedListItem"&&(b.index=y.index)),r.currentTransactionOldBlockAttrs[u.node.attrs.id]=b,JSON.stringify(b)!==JSON.stringify(y)&&(b["depth-change"]=b.depth-y.depth,r.updatedBlocks.add(u.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=s,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((i,s)=>{if(!i.attrs.id||!r.updatedBlocks.has(i.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[i.attrs.id],l={};for(const[u,f]of Object.entries(a))l["data-prev-"+Nke[u]]=f||"none";const c=Gt.node(s,s+i.nodeSize,{...l});o.push(c)}),Rt.create(n.doc,o)}}}))}}const C8=new Bt("blocknote-show-selection");class Oke extends no{constructor(t){super(),ne(this,"enabled",!1),this.editor=t,this.addProsemirrorPlugin(new St({key:C8,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return Rt.empty;const i=Gt.inline(o.from,o.to,{"data-show-selection":"true"});return Rt.create(r,[i])}}}))}static key(){return"showSelection"}setEnabled(t){this.enabled!==t&&(this.enabled=t,this.editor.transact(n=>n.setMeta(C8,{})))}getEnabled(){return this.enabled}}function SK(e,t){for(var n,r;e&&e.parentElement&&e.parentElement!==t.dom&&((n=e.getAttribute)==null?void 0:n.call(e,"data-node-type"))!=="blockContainer";)e=e.parentElement;if(((r=e.getAttribute)==null?void 0:r.call(e,"data-node-type"))==="blockContainer")return{node:e,id:e.getAttribute("data-id")}}let XR=class hx extends tt{constructor(t,n){super(t,n),ne(this,"nodes");const r=t.node();this.nodes=[],t.doc.nodesBetween(t.pos,n.pos,(o,i,s)=>{if(s!==null&&s.eq(r))return this.nodes.push(o),!1})}static create(t,n,r=n){return new hx(t.resolve(n),t.resolve(r))}content(){return new Te(pe.from(this.nodes),0,0)}eq(t){if(!(t instanceof hx)||this.nodes.length!==t.nodes.length||this.from!==t.from||this.to!==t.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(t.nodes[n]))return!1;return!0}map(t,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?tt.near(t.resolve(r.pos)):r.deleted?tt.near(t.resolve(o.pos)):new hx(t.resolve(r.pos),t.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}};tt.jsonID("multiple-node",XR);let za;function Pke(e,t){let n,r;const o=t.resolve(e.from).node().type.spec.group==="blockContent",i=t.resolve(e.to).node().type.spec.group==="blockContent",s=Math.min(e.$anchor.depth,e.$head.depth);if(o&&i){const a=e.$from.start(s-1),l=e.$to.end(s-1);n=t.resolve(a-1).pos,r=t.resolve(l+1).pos}else n=e.from,r=e.to;return{from:n,to:r}}function E8(e,t,n=t){t===n&&(n+=e.state.doc.resolve(t+1).node().nodeSize);const r=e.domAtPos(t).node.cloneNode(!0),o=e.domAtPos(t).node,i=(u,f)=>Array.prototype.indexOf.call(u.children,f),s=i(o,e.domAtPos(t+1).node.parentElement),a=i(o,e.domAtPos(n-1).node.parentElement);for(let u=o.childElementCount-1;u>=0;u--)(u>a||u<s)&&r.removeChild(r.children[u]);kK(e.root),za=r;const l=za.getElementsByTagName("iframe");for(let u=0;u<l.length;u++){const f=l[u],p=f.parentElement;p&&p.removeChild(f)}const c=e.dom.className.split(" ").filter(u=>u!=="ProseMirror"&&u!=="bn-root"&&u!=="bn-editor").join(" ");za.className=za.className+" bn-drag-preview "+c,e.root instanceof ShadowRoot?e.root.appendChild(za):e.root.body.appendChild(za)}function kK(e){za!==void 0&&(e instanceof ShadowRoot?e.removeChild(za):e.body.removeChild(za),za=void 0)}function Dke(e,t,n){if(!e.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=Fi(t.id,r.state.doc);if(!o)throw new Error(`Block with ID ${t.id} not found`);const i=o.posBeforeNode;if(i!=null){const s=r.state.selection,a=r.state.doc,{from:l,to:c}=Pke(s,a),u=l<=i&&i<c,f=s.$anchor.node()!==s.$head.node()||s instanceof XR;u&&f?(r.dispatch(r.state.tr.setSelection(XR.create(a,l,c))),E8(r,l,c)):(r.dispatch(r.state.tr.setSelection(We.create(r.state.doc,i))),E8(r,i));const p=r.state.selection.content(),m=n.pmSchema,y=r.serializeForClipboard(p).dom.innerHTML,b=NC(m,n),x=pK(p.content),S=b.exportBlocks(x,{}),E=H4(S);e.dataTransfer.clearData(),e.dataTransfer.setData("blocknote/html",y),e.dataTransfer.setData("text/html",S),e.dataTransfer.setData("text/plain",E),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(za,0,0)}}const T8=250;function QR(e,t,n=!0){const r=e.root.elementsFromPoint(t.left,t.top);for(const o of r)if(e.dom.contains(o))return n&&o.closest("[data-node-type=columnList]")?QR(e,{left:t.left+50,top:t.top},!1):SK(o,e)}function $ke(e,t){if(!t.dom.firstChild)return;const n=t.dom.firstChild.getBoundingClientRect(),r={left:Math.min(Math.max(n.left+10,e.x),n.right-10),top:e.y},o=QR(t,r);if(!o)return;const i=o.node.getBoundingClientRect();return QR(t,{left:i.right-10,top:e.y},!1)}class Lke{constructor(t,n,r){ne(this,"state"),ne(this,"emitUpdate"),ne(this,"mousePos"),ne(this,"hoveredBlock"),ne(this,"menuFrozen",!1),ne(this,"isDragOrigin",!1),ne(this,"updateState",o=>{this.state=o,this.emitUpdate(this.state)}),ne(this,"updateStateFromMousePos",()=>{var o,i,s,a,l;if(this.menuFrozen||!this.mousePos)return;const c=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if(c?.element!==this.pmView.dom||c.distance>T8){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.updateState(this.state));return}const u=$ke(this.mousePos,this.pmView);if(!u||!this.editor.isEditable){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.updateState(this.state));return}if((s=this.state)!=null&&s.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===u.id)return;this.hoveredBlock=u.node;const f=u.node.firstChild;if(f&&this.editor.isEditable){const p=f.getBoundingClientRect(),m=u.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(m?m.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,p.y,p.width,p.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),ne(this,"onDragStart",o=>{var i;const s=(i=o.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!s||this.pmView.dragging)return;const a=document.createElement("div");a.innerHTML=s;const l=Bl.fromSchema(this.pmView.state.schema).parse(a,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new Te(l.content,0,0),move:!0}}),ne(this,"findClosestEditorElement",o=>{const i=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(i.length===0)return null;let s=i[0],a=Number.MAX_VALUE;return i.forEach(l=>{const c=l.querySelector(".bn-block-group").getBoundingClientRect(),u=o.clientX<c.left?c.left-o.clientX:o.clientX>c.right?o.clientX-c.right:0,f=o.clientY<c.top?c.top-o.clientY:o.clientY>c.bottom?o.clientY-c.bottom:0,p=Math.sqrt(Math.pow(u,2)+Math.pow(f,2));p<a&&(a=p,s=l)}),{element:s,distance:a}}),ne(this,"onDragOver",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i||!i.isDropPoint){this.closeDropCursor();return}i.isDropPoint&&!i.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(o)}),ne(this,"closeDropCursor",()=>{const o=new Event("dragleave",{bubbles:!1});o.synthetic=!0,this.pmView.dom.dispatchEvent(o)}),ne(this,"getDragEventContext",o=>{var i;const s=!((i=o.dataTransfer)!=null&&i.types.includes("blocknote/html"))&&!!this.pmView.dragging,a=!!this.isDragOrigin,l=s||a,c=this.findClosestEditorElement(o);if(!c||c.distance>T8)return;const u=c.element===this.pmView.dom,f=u&&c.distance===0;if(!(!u&&!l))return{isDropPoint:u,isDropWithinEditorBounds:f,isDragOrigin:l}}),ne(this,"onDrop",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i){this.closeDropCursor();return}const{isDropPoint:s,isDropWithinEditorBounds:a,isDragOrigin:l}=i;if(!a&&s&&this.dispatchSyntheticEvent(o),s){if(this.pmView.dragging)return;this.pmView.dispatch(this.pmView.state.tr.setSelection(Ve.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(l){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}),ne(this,"onDragEnd",o=>{o.synthetic||(this.pmView.dragging=null)}),ne(this,"onKeyDown",o=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),ne(this,"onMouseMove",o=>{var i;if(this.menuFrozen)return;this.mousePos={x:o.clientX,y:o.clientY};const s=this.pmView.dom.getBoundingClientRect(),a=this.mousePos.x>s.left&&this.mousePos.x<s.right&&this.mousePos.y>s.top&&this.mousePos.y<s.bottom,l=this.pmView.dom.parentElement;if(a&&o&&o.target&&!(l===o.target||l.contains(o.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),ne(this,"onScroll",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state)),this.updateStateFromMousePos()}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");r(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),F4(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),n.root.addEventListener("scroll",this.onScroll,!0)}dispatchSyntheticEvent(t){const n=new Event(t.type,t),r=this.pmView.dom.firstChild.getBoundingClientRect();n.clientX=t.clientX,n.clientY=t.clientY,n.clientX=Math.min(Math.max(t.clientX,r.left),r.left+r.width),n.clientY=Math.min(Math.max(t.clientY,r.top),r.top+r.height),n.dataTransfer=t.dataTransfer,n.preventDefault=()=>t.preventDefault(),n.synthetic=!0,this.pmView.dom.dispatchEvent(n)}update(t,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var t;(t=this.state)!=null&&t.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const jke=new Bt("SideMenuPlugin");class zke extends no{constructor(t){super(),ne(this,"view"),ne(this,"blockDragStart",(n,r)=>{this.view&&(this.view.isDragOrigin=!0),Dke(n,r,this.editor)}),ne(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&kK(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),ne(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),ne(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=t,this.addProsemirrorPlugin(new St({key:jke,view:n=>(this.view=new Lke(t,n,r=>{this.emit("update",r)}),this.view)}))}static key(){return"sideMenu"}onUpdate(t){return this.on("update",t)}}const iw=new Map;function Bke(e){if(iw.has(e))return iw.get(e);const t=new Qf;return e._tiptapEditor.on("transaction",({transaction:n})=>{t.appendMapping(n.mapping)}),e._tiptapEditor.on("destroy",()=>{iw.delete(e)}),iw.set(e,t),t}function eN(e,t,n="left"){const r=sn.getState(e._tiptapEditor.state);if(!r){const i=Bke(e),s=i.maps.length;return()=>i.slice(s).map(t,n==="left"?-1:1)}const o=G0(t+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const i=sn.getState(e._tiptapEditor.state),s=Wf(i.doc,i.binding.type,o,i.binding.mapping);if(s===null)throw new Error("Position not found, cannot track positions");return s+(n==="right"?-1:0)}}const Vke=yC(e=>e.type.name==="blockContainer");class Fke{constructor(t,n){ne(this,"state"),ne(this,"emitUpdate"),ne(this,"rootEl"),ne(this,"pluginState"),ne(this,"handleScroll",()=>{var i,s;if((i=this.state)!=null&&i.show){const a=(s=this.rootEl)==null?void 0:s.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),ne(this,"closeMenu",()=>{this.editor.transact(i=>i.setMeta(sm,null))}),ne(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(i=>i.selection.from)}).run()});var r,o;this.editor=t,this.pluginState=void 0,this.emitUpdate=i=>{var s;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(i,{...this.state,ignoreQueryLength:(s=this.pluginState)==null?void 0:s.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(t,n){var r;const o=sm.getState(n),i=sm.getState(t.state),s=o===void 0&&i!==void 0,a=o!==void 0&&i===void 0;if(!s&&!(o!==void 0&&i!==void 0)&&!a)return;if(this.pluginState=a?o:i,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var t;(t=this.rootEl)==null||t.removeEventListener("scroll",this.handleScroll,!0)}}const sm=new Bt("SuggestionMenuPlugin");class Hke extends no{constructor(t){super(),ne(this,"view"),ne(this,"triggerCharacters",[]),ne(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),ne(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),ne(this,"closeMenu",()=>this.view.closeMenu()),ne(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new St({key:sm,view:()=>(this.view=new Fke(t,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,i,s)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(sm);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const c=eN(t,s.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>c()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a?.ignoreQueryLength}}if(o===void 0)return o;if(s.selection.from!==s.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&s.selection.from<o.queryStartPos()||!s.selection.$from.sameParent(s.doc.resolve(o.queryStartPos())))return;const l={...o};return l.query=s.doc.textBetween(o.queryStartPos(),s.selection.from),l}},props:{handleTextInput(r,o,i,s){if(o===i){const a=r.state.doc;for(const l of n){const c=l.length>1?a.textBetween(o-l.length,o)+s:s;if(l===c)return r.dispatch(r.state.tr.insertText(s)),r.dispatch(r.state.tr.setMeta(sm,{triggerCharacter:c}).scrollIntoView()),!0}}return!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const i=Vke(r.selection);if(i)return Rt.create(r.doc,[Gt.node(i.pos,i.pos+i.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return Rt.create(r.doc,[Gt.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(t,n){return this.triggerCharacters.includes(t)||this.addTriggerCharacter(t),this.on(`update ${t}`,n)}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}}const Uke=$o.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(e){return e.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return["ins",{"data-id":String(t.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10)}:!1}}]}}}),Gke=$o.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(e){return e.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return["del",{"data-id":String(t.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10)}:!1}}]}}}),qke=$o.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(e){return e.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return[n?"span":"div",{"data-type":"modification","data-id":String(t.attrs.id),"data-mod-type":t.attrs.type,"data-mod-prev-val":JSON.stringify(t.attrs.previousValue),"data-mod-new-val":JSON.stringify(t.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10),type:t.dataset.modType,previousValue:t.dataset.modPrevVal,newValue:t.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10),type:t.dataset.modType,previousValue:t.dataset.modPrevVal}:!1}}]}}});let Ii;function _8(e){Ii||(Ii=document.createElement("div"),Ii.innerHTML="_",Ii.style.opacity="0",Ii.style.height="1px",Ii.style.width="1px",e instanceof Document?e.body.appendChild(Ii):e.appendChild(Ii))}function Zke(e){Ii&&(e instanceof Document?e.body.removeChild(Ii):e.removeChild(Ii),Ii=void 0)}function sw(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}function Wke(e){let t=e;for(;t&&t.nodeName!=="TD"&&t.nodeName!=="TH"&&!t.classList.contains("tableWrapper");){if(t.classList.contains("ProseMirror"))return;const n=t.parentNode;if(!n||!(n instanceof Element))return;t=n}return t.nodeName==="TD"||t.nodeName==="TH"?{type:"cell",domNode:t,tbodyNode:t.closest("tbody")}:{type:"wrapper",domNode:t,tbodyNode:t.querySelector("tbody")}}function Kke(e,t){const n=t.querySelectorAll(e);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class Yke{constructor(t,n,r){ne(this,"state"),ne(this,"emitUpdate"),ne(this,"tableId"),ne(this,"tablePos"),ne(this,"tableElement"),ne(this,"menuFrozen",!1),ne(this,"mouseState","up"),ne(this,"prevWasEditable",null),ne(this,"viewMousedownHandler",()=>{this.mouseState="down"}),ne(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),ne(this,"mouseMoveHandler",o=>{var i,s,a,l,c,u,f;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const p=Wke(o.target);if(p?.type==="cell"&&this.mouseState==="down"&&!((i=this.state)!=null&&i.draggingState)){this.mouseState="selecting",(s=this.state)!=null&&s.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!p||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!p.tbodyNode)return;const m=p.tbodyNode.getBoundingClientRect(),y=SK(p.domNode,this.pmView);if(!y)return;this.tableElement=y.node;let b;const x=this.editor.transact(T=>Fi(y.id,T.doc));if(!x)throw new Error(`Block with ID ${y.id} not found`);const S=sr(x.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(sSe("table",S,this.editor)&&(this.tablePos=x.posBeforeNode+1,b=S),!b)return;this.tableId=y.id;const E=(l=p.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if(p?.type==="wrapper"){const T=o.clientY>=m.bottom-1&&o.clientY<m.bottom+20,A=o.clientX>=m.right-1&&o.clientX<m.right+20,M=o.clientX>m.right||o.clientY>m.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:T,showAddOrRemoveColumnsButton:A,referencePosTable:m,block:b,widgetContainer:E,colIndex:M||(c=this.state)==null?void 0:c.colIndex,rowIndex:M||(u=this.state)==null?void 0:u.rowIndex,referencePosCell:M||(f=this.state)==null?void 0:f.referencePosCell}}else{const T=sw(p.domNode),A=sw(p.domNode.parentElement),M=p.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===y.id&&this.state.rowIndex===A&&this.state.colIndex===T)return;this.state={show:!0,showAddOrRemoveColumnsButton:T===b.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:A===b.content.rows.length-1,referencePosTable:m,block:b,draggingState:void 0,referencePosCell:M,colIndex:T,rowIndex:A,widgetContainer:E}}return this.emitUpdate(),!1}),ne(this,"dragOverHandler",o=>{var i;if(((i=this.state)==null?void 0:i.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",Kke(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const s={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(s.left,s.top).filter(b=>b.tagName==="TD"||b.tagName==="TH");if(a.length===0)return;const l=a[0];let c=!1;const u=sw(l.parentElement),f=sw(l),p=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,m=(this.state.draggingState.draggedCellOrientation==="row"?u:f)!==p;(this.state.rowIndex!==u||this.state.colIndex!==f)&&(this.state.rowIndex=u,this.state.colIndex=f,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const y=this.state.draggingState.draggedCellOrientation==="row"?s.top:s.left;this.state.draggingState.mousePos!==y&&(this.state.draggingState.mousePos=y,c=!0),c&&this.emitUpdate(),m&&this.editor.transact(b=>b.setMeta(Dy,!0))}),ne(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:i,colIndex:s,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(i.draggedCellOrientation==="row"){if(!NW(this.state.block,i.originalIndex,a))return!1;const c=Lwe(this.state.block,i.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:c}})}else{if(!IW(this.state.block,i.originalIndex,s))return!1;const c=$we(this.state.block,i.originalIndex,s),[u]=l.splice(i.originalIndex,1);l.splice(s,0,u),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:c}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var t;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((t=this.tableElement)!=null&&t.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=N4(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const i=o.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const Dy=new Bt("TableHandlesPlugin");class Jke extends no{constructor(t){super(),ne(this,"view"),ne(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Dy,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");_8(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Ii,0,0),n.dataTransfer.effectAllowed="move"}),ne(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Dy,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");_8(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Ii,0,0),n.dataTransfer.effectAllowed="copyMove"}),ne(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(Dy,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");Zke(this.editor.prosemirrorView.root)}),ne(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),ne(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),ne(this,"getCellsAtRowHandle",(n,r)=>FR(n,r)),ne(this,"getCellsAtColumnHandle",(n,r)=>HR(n,r)),ne(this,"setCellSelection",(n,r,o=r)=>{const i=this.view;if(!i)throw new Error("Table handles view not initialized");const s=n.doc.resolve(i.tablePos+1),a=n.doc.resolve(s.posAtIndex(r.row)+1),l=n.doc.resolve(a.posAtIndex(r.col)),c=n.doc.resolve(s.posAtIndex(o.row)+1),u=n.doc.resolve(c.posAtIndex(o.col)),f=n.tr;return f.setSelection(new vn(l,u)),n.apply(f)}),ne(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,i)=>{const s=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?Iye(s,i):Oye(s,i):r.side==="left"?_ye(s,i):Aye(s,i)})}),ne(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:n,col:0});return Dye(s,i)}):this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:0,col:n});return Rye(s,i)})),ne(this,"mergeCells",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return Lye(i,o)})),ne(this,"splitCell",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n):r;return jye(i,o)})),ne(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,i=r.$to;if(WR(r)){const{ranges:y}=r;y.forEach(b=>{o=b.$from.min(o??b.$from),i=b.$to.max(i??b.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),i=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||i.pos===0)return;const s=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(i.pos-i.parentOffset-1),l=n.doc.resolve(s.pos-s.parentOffset-1),c=o.index(s.depth),u=s.index(l.depth),f=i.index(a.depth),p=a.index(l.depth),m=[];for(let y=u;y<=p;y++)for(let b=c;b<=f;b++)m.push({row:y,col:b});return{from:{row:u,col:c},to:{row:p,col:f},cells:m}})),ne(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=WR(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const i=this.getCellSelection();if(i)return Bwe(i.from,i.to,n)?"vertical":"horizontal"})),ne(this,"cropEmptyRowsOrColumns",(n,r)=>jwe(n,r)),ne(this,"addRowsOrColumns",(n,r,o)=>zwe(n,r,o)),this.editor=t,this.addProsemirrorPlugin(new St({key:Dy,view:n=>(this.view=new Yke(t,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:i,draggingState:s}=this.view.state,{originalIndex:a,draggedCellOrientation:l}=s;if(r===a||!i||l==="row"&&!NW(i,a,r)||l==="col"&&!IW(i,a,r))return Rt.create(n.doc,o);const c=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?FR(this.view.state.block,r).forEach(({row:u,col:f})=>{const p=n.doc.resolve(c.posAtIndex(u)+1),m=n.doc.resolve(p.posAtIndex(f)+1),y=m.node(),b=m.pos+(r>a?y.nodeSize-2:0);o.push(Gt.widget(b,()=>{const x=document.createElement("div");return x.className="bn-table-drop-cursor",x.style.left="0",x.style.right="0",r>a?x.style.bottom="-2px":x.style.top="-3px",x.style.height="4px",x}))}):HR(this.view.state.block,r).forEach(({row:u,col:f})=>{const p=n.doc.resolve(c.posAtIndex(u)+1),m=n.doc.resolve(p.posAtIndex(f)+1),y=m.node(),b=m.pos+(r>a?y.nodeSize-2:0);o.push(Gt.widget(b,()=>{const x=document.createElement("div");return x.className="bn-table-drop-cursor",x.style.top="0",x.style.bottom="0",r>a?x.style.right="-2px":x.style.left="-3px",x.style.width="4px",x}))}),Rt.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(t){return this.on("update",t)}}const Xke=Mn.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:e=>e.getAttribute("data-text-alignment"),renderHTML:e=>e.textAlignment==="left"?{}:{"data-text-alignment":e.textAlignment}}}}]}}),Qke=Mn.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:Nr.textColor.default,parseHTML:e=>e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):Nr.textColor.default,renderHTML:e=>e.textColor===Nr.textColor.default?{}:{"data-text-color":e.textColor}}}}]}}),eCe=Mn.create({name:"trailingNode",addProseMirrorPlugins(){const e=new Bt(this.name);return[new St({key:e,appendTransaction:(t,n,r)=>{const{doc:o,tr:i,schema:s}=r,a=e.getState(r),l=o.content.size-2,c=s.nodes.blockContainer,u=s.nodes.paragraph;if(a)return i.insert(l,c.create(void 0,u.create()))},state:{init:(t,n)=>{},apply:(t,n)=>{if(!t.docChanged)return n;let r=t.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),tCe={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},nCe=Ql.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:e=>{if(typeof e=="string")return!1;const t={};for(const[n,r]of Object.entries(tCe))e.getAttribute(r)&&(t[n]=e.getAttribute(r));return t}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:e}){var t;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[i,s]of Object.entries(e))i!=="class"&&n.setAttribute(i,s);const r={...((t=this.options.domAttributes)==null?void 0:t.block)||{},...e},o=document.createElement("div");o.className=_n("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[i,s]of Object.entries(r))i!=="class"&&o.setAttribute(i,s);return n.appendChild(o),{dom:n,contentDOM:o}}}),rCe=Ql.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:e=>typeof e=="string"?!1:e.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:e}){var t;const n={...((t=this.options.domAttributes)==null?void 0:t.blockGroup)||{},...e},r=document.createElement("div");r.className=_n("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,i]of Object.entries(n))o!=="class"&&r.setAttribute(o,i);return{dom:r,contentDOM:r}}}),oCe=Ql.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class iCe extends no{constructor({editor:t,collaboration:n}){super(t),ne(this,"editor"),ne(this,"collaboration"),ne(this,"forkedState"),this.editor=t,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(t,n){const r=t.doc;if(t._item===null){const o=Array.from(r.share.keys()).find(i=>r.share.get(i)===t);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,t.constructor)}else{const o=t._item,i=n.store.clients.get(o.id.client)??[],s=pa(i,o.id.clock);return i[s].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){var t;if(this.isForkedFromRemote)return;const n=(t=this.collaboration)==null?void 0:t.fragment;if(!n)throw new Error("No fragment to fork from");const r=new Wm;B6(r,V6(n.doc));const o=this.findTypeInOtherYdoc(n,r);this.forkedState={undoStack:aa.getState(this.editor.prosemirrorState).undoManager.undoStack,originalFragment:n,forkedFragment:o},this.editor._tiptapEditor.unregisterPlugin([Oy,aa,sn]),this.editor._tiptapEditor.registerPlugin(new YR(o).plugins[0]),this.editor._tiptapEditor.registerPlugin(new JR({editor:this.editor}).plugins[0]),this.emit("forked",!0)}merge({keepChanges:t}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(sn),this.editor._tiptapEditor.unregisterPlugin(aa);const{originalFragment:n,forkedFragment:r,undoStack:o}=this.forkedState;if(this.editor.extensions.ySyncPlugin=new YR(n),this.editor.extensions.yCursorPlugin=new yK(this.collaboration),this.editor.extensions.yUndoPlugin=new JR({editor:this.editor}),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),aa.getState(this.editor.prosemirrorState).undoManager.undoStack=o,t){const i=V6(r.doc,Nve(n.doc));B6(n.doc,i,this.editor)}this.forkedState=void 0,this.emit("forked",!1)}}const sCe=e=>{var t;const n={},r=aCe(e);for(const i of r)n[i.name]=i;e.collaboration&&(n.ySyncPlugin=new YR(e.collaboration.fragment),n.yUndoPlugin=new JR({editor:e.editor}),(t=e.collaboration.provider)!=null&&t.awareness&&(n.yCursorPlugin=new yK(e.collaboration)),n.forkYDocPlugin=new iCe({editor:e.editor,collaboration:e.collaboration})),n.formattingToolbar=new vke(e.editor),n.linkToolbar=new Tke(e.editor),n.sideMenu=new zke(e.editor),n.suggestionMenus=new Hke(e.editor),n.filePanel=new gke(e.editor),n.placeholder=new Rke(e.editor,e.placeholders),(e.animations??!0)&&(n.animations=new Ike),e.tableHandles&&(n.tableHandles=new Jke(e.editor)),n.nodeSelectionKeyboard=new Ake,n.blockChange=new uke,n.showSelection=new Oke(e.editor),e.comments&&(n.comments=new pke(e.editor,e.comments.threadStore,bK.name));const o=e.disableExtensions||[];for(const i of o)delete n[i];return n};let A8=!1;const aCe=e=>{const t=[my.ClipboardTextSerializer,my.Commands,my.Editable,my.FocusEvents,my.Tabindex,p0e,Mn.create({name:"dropCursor",addProseMirrorPlugins:()=>[e.dropCursor({width:5,color:"#ddeeff",editor:e.editor})]}),TC.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),wke,Y0e,Uke,Gke,qke,K0e.extend({inclusive:!1}).configure({defaultProtocol:xK,protocols:A8?[]:wK}),...Object.values(e.styleSpecs).map(n=>n.implementation.mark.configure({editor:e.editor})),Qke,cke,Xke,Mn.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>e.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),oCe,nCe.configure({editor:e.editor,domAttributes:e.domAttributes}),kke.configure({editor:e.editor,tabBehavior:e.tabBehavior}),rCe.configure({domAttributes:e.domAttributes}),...Object.values(e.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:e.editor})),...Object.values(e.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:e.editor,domAttributes:e.domAttributes})),n.implementation.node.configure({editor:e.editor,domAttributes:e.domAttributes})]),lke(e.editor),ske(e.editor,e.pasteHandler||(n=>n.defaultPasteHandler())),HSe(e.editor),...e.trailingBlock===void 0||e.trailingBlock?[eCe]:[],...e.comments?[bK]:[]];return A8=!0,e.collaboration||t.push(C0e),t};function lCe(e,t){const n=[];return e.forEach((r,o,i)=>{i!==t&&n.push(r)}),pe.from(n)}function cCe(e,t){const n=[];for(let r=0;r<e.childCount;r++)if(e.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],i=o.copy(o.content.addToEnd(e.child(r)));n[n.length-1]=i}else{const o=t.nodes.table.createChecked(void 0,e.child(r));n.push(o)}else n.push(e.child(r));return e=pe.from(n),e}function uCe(e,t){let n=pe.from(e.content);if(n=cCe(n,t.state.schema),!dCe(n,t))return new Te(n,e.openStart,e.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const s=n.child(r+1).child(0).child(0);(s.type.name==="bulletListItem"||s.type.name==="numberedListItem"||s.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=lCe(n,r+1))}const i=t.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,i)}return new Te(n,e.openStart,e.openEnd)}function dCe(e,t){var n,r;const o=e.childCount===1,i=((n=e.firstChild)==null?void 0:n.type.spec.content)==="inline*",s=((r=e.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(i)return!1;if(s){const a=Un(t.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const tN=class extends $ge{constructor(t,n){super({...t,content:void 0}),ne(this,"_state"),ne(this,"mount",(a,l,c)=>{l?(this.options.element=l,this.createViewAlternative(a,c)):(this.destroy(),this.isInitialized=!1)});const r=this.schema;let o;const i=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=i.apply(r.nodes.doc,a),c=JSON.parse(JSON.stringify(l.toJSON()));return c.content[0].content[0].attrs.id="initialBlockId",o=Fc.fromJSON(r,c),o};let s;try{const a=t?.content.map(l=>xh(l,this.schema,n).toJSON());s=Hx({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(t.content))}this._state=Af.create({doc:s,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(t){if(!this.view){this._state=this.state.apply(t),this.emit("transaction",{editor:this,transaction:t});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(t);return}const{state:n,transactions:r}=this.state.applyTransaction(t),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),o&&this.emit("selectionUpdate",{editor:this,transaction:t});const i=t.getMeta("focus"),s=t.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:t}),s&&this.emit("blur",{editor:this,event:s.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:t}),this.emit("v3-update",{editor:this,transaction:t,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(t,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(i=>{i.type==="mark"&&i.config.addMarkView&&(r[i.name]=i.config.addMarkView(t))}),this.view=new RO({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};ne(tN,"create",(e,t)=>{var n,r;const o=(n=globalThis?.window)==null?void 0:n.setTimeout;typeof((r=globalThis?.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new tN(e,t)}finally{o&&(globalThis.window.setTimeout=o)}});let CK=tN;CK.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const fCe={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let hCe=class EK extends G4{constructor(t){var n,r,o,i,s,a,l,c,u,f,p,m,y,b,x,S;super(),ne(this,"pmSchema"),ne(this,"extensions",{}),ne(this,"headless",!1),ne(this,"_tiptapEditor"),ne(this,"elementRenderer",null),ne(this,"blockCache",new WeakMap),ne(this,"dictionary"),ne(this,"schema"),ne(this,"blockImplementations"),ne(this,"inlineContentImplementations"),ne(this,"styleImplementations"),ne(this,"formattingToolbar"),ne(this,"linkToolbar"),ne(this,"sideMenu"),ne(this,"suggestionMenus"),ne(this,"filePanel"),ne(this,"tableHandles"),ne(this,"comments"),ne(this,"showSelectionPlugin"),ne(this,"forkYDocPlugin"),ne(this,"uploadFile"),ne(this,"onUploadStartCallbacks",[]),ne(this,"onUploadEndCallbacks",[]),ne(this,"resolveFileUrl"),ne(this,"resolveUsers"),ne(this,"settings"),ne(this,"activeTransaction",null),ne(this,"mount",(I,L)=>{this._tiptapEditor.mount(this,I,L)}),this.options=t;const E=t;if(E.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(E.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(E.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(E.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=t.dictionary||xW,this.settings={tables:{splitCells:((n=t?.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=t?.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=t?.tables)==null?void 0:o.cellTextColor)??!1,headers:((i=t?.tables)==null?void 0:i.headers)??!1},codeBlock:{indentLineWithTab:((s=t?.codeBlock)==null?void 0:s.indentLineWithTab)??!0,defaultLanguage:((a=t?.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((l=t?.codeBlock)==null?void 0:l.supportedLanguages)??{},createHighlighter:((c=t?.codeBlock)==null?void 0:c.createHighlighter)??void 0},heading:{levels:((u=t?.heading)==null?void 0:u.levels)??[1,2,3]}};const T={defaultStyles:!0,schema:t.schema||V4.create(),_headless:!1,...t,placeholders:{...this.dictionary.placeholders,...t.placeholders}};if(T.comments&&!T.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=T.resolveUsers,this.schema=T.schema,this.blockImplementations=T.schema.blockSpecs,this.inlineContentImplementations=T.schema.inlineContentSpecs,this.styleImplementations=T.schema.styleSpecs,this.extensions=sCe({editor:this,domAttributes:T.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:T.collaboration,trailingBlock:T.trailingBlock,disableExtensions:T.disableExtensions,setIdAttribute:T.setIdAttribute,animations:T.animations??!0,tableHandles:qo("table",this),dropCursor:this.options.dropCursor??Cwe,placeholders:T.placeholders,tabBehavior:T.tabBehavior,comments:T.comments,pasteHandler:T.pasteHandler}),(((f=T._tiptapOptions)==null?void 0:f.extensions)||[]).forEach(I=>{this.extensions[I.name]=I});for(let I of T.extensions||[]){typeof I=="function"&&(I=I(this));const L=I.constructor.key();if(!L)throw new Error(`Extension ${I.constructor.name} does not have a key method`);if(this.extensions[L])throw new Error(`Extension ${I.constructor.name} already exists with key ${L}`);this.extensions[L]=I}if(Object.entries(T._extensions||{}).forEach(([I,L])=>{const $=typeof L=="function"?L(this):L;if(!("plugin"in $)){this.extensions[I]=$;return}this.extensions[I]=new class extends no{static key(){return I}constructor(){super(),this.addProsemirrorPlugin($.plugin)}get priority(){return $.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,T.uploadFile){const I=T.uploadFile;this.uploadFile=async(L,$)=>{this.onUploadStartCallbacks.forEach(B=>B.apply(this,[$]));try{return await I(L,$)}finally{this.onUploadEndCallbacks.forEach(B=>B.apply(this,[$]))}}}this.resolveFileUrl=T.resolveFileUrl,this.headless=T._headless;const A="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;A&&T.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const M=T.initialContent||(A?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:TC.options.generateID()}]);if(!Array.isArray(M)||M.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+M);const R=[...Object.entries(this.extensions).map(([I,L])=>{if(L instanceof Mn||L instanceof Ql||L instanceof $o)return L;if(!(L instanceof no&&!L.plugins.length))return Mn.create({name:I,priority:L.priority,addProseMirrorPlugins:()=>L.plugins})})].filter(I=>I!==void 0),O={...fCe,...T._tiptapOptions,content:M,extensions:R,editorProps:{...(p=T._tiptapOptions)==null?void 0:p.editorProps,attributes:{tabIndex:"0",...(y=(m=T._tiptapOptions)==null?void 0:m.editorProps)==null?void 0:y.attributes,...(b=T.domAttributes)==null?void 0:b.editor,class:_n("bn-editor",T.defaultStyles?"bn-default-styles":"",((S=(x=T.domAttributes)==null?void 0:x.editor)==null?void 0:S.class)||"")},transformPasted:uCe}};this.headless?this.pmSchema=lge(O.extensions):(this._tiptapEditor=CK.create(O,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(t={}){return new EK(t)}exec(t){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return t(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(t){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return t(n,void 0,r)}transact(t){if(this.activeTransaction)return t(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=t(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(t,n=t.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var t;return(t=this.prosemirrorView)==null?void 0:t.dom}isFocused(){var t;return((t=this.prosemirrorView)==null?void 0:t.hasFocus())||!1}focus(){var t;(t=this.prosemirrorView)==null||t.focus()}onUploadStart(t){return this.onUploadStartCallbacks.push(t),()=>{const n=this.onUploadStartCallbacks.indexOf(t);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(t){return this.onUploadEndCallbacks.push(t),()=>{const n=this.onUploadEndCallbacks.indexOf(t);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(t=>Owe(t.doc,this.pmSchema))}getBlock(t){return this.transact(n=>lK(n.doc,t))}getPrevBlock(t){return this.transact(n=>kSe(n.doc,t))}getNextBlock(t){return this.transact(n=>CSe(n.doc,t))}getParentBlock(t){return this.transact(n=>ESe(n.doc,t))}forEachBlock(t,n=!1){const r=this.document.slice();n&&r.reverse();function o(i){for(const s of i){if(t(s)===!1)return!1;const a=n?s.children.slice().reverse():s.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(t){this._tiptapEditor.on("update",t)}onEditorSelectionChange(t){this._tiptapEditor.on("selectionUpdate",t)}getTextCursorPosition(){return this.transact(t=>RSe(t))}setTextCursorPosition(t,n="start"){return this.transact(r=>cK(r,t,n))}getSelection(){return this.transact(t=>_Se(t))}getSelectionCutBlocks(){return this.transact(t=>MSe(t))}setSelection(t,n){return this.transact(r=>ASe(r,t,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(t){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==t&&this._tiptapEditor.setEditable(t)}insertBlocks(t,n,r="before"){return this.transact(o=>DW(o,t,n,r))}updateBlock(t,n){return this.transact(r=>qwe(r,t,n))}removeBlocks(t){return this.transact(n=>qR(n,t,[]).removedBlocks)}replaceBlocks(t,n){return this.transact(r=>qR(r,t,n))}undo(){return this.options.collaboration?this.exec(vwe):this.exec(qO)}redo(){return this.options.collaboration?this.exec(wwe):this.exec(ZO)}insertInlineContent(t,{updateSelection:n=!1}={}){const r=Qa(t,this.pmSchema);this.transact(o=>{TSe(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(t=>{const n={},r=t.selection.$to.marks();for(const o of r){const i=this.schema.styleSchema[o.type.name];if(!i){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}i.propSchema==="boolean"?n[i.type]=!0:n[i.type]=o.attrs.stringValue}return n})}addStyles(t){for(const[n,r]of Object.entries(t)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new ma(o.propSchema)}}removeStyles(t){for(const n of Object.keys(t))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(t){for(const[n,r]of Object.entries(t)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new ma(o.propSchema)}}getSelectedText(){return this.transact(t=>t.doc.textBetween(t.selection.from,t.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(t,n){if(t==="")return;const r=this.pmSchema.mark("link",{href:t});this.transact(o=>{const{from:i,to:s}=o.selection;n?o.insertText(n,i,s).addMark(i,i+n.length,r):o.setSelection(Ve.create(o.doc,s)).addMark(i,s,r)})}canNestBlock(){return xSe(this)}nestBlock(){aK(this)}canUnnestBlock(){return SSe(this)}unnestBlock(){wSe(this)}moveBlocksUp(){return ySe(this)}moveBlocksDown(){return bSe(this)}async blocksToHTMLLossy(t=this.document){return NC(this.pmSchema,this).exportBlocks(t,{})}async blocksToFullHTML(t){return Jwe(this.pmSchema,this).serializeBlocks(t,{})}async tryParseHTMLToBlocks(t){return dK(t,this.pmSchema)}async blocksToMarkdownLossy(t=this.document){return OSe(t,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(t){return BSe(t,this.pmSchema)}updateCollaborationUserInfo(t){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(t)}onBeforeChange(t){return this.headless?()=>{}:this.extensions.blockChange.subscribe(n=>t(this,n))}onChange(t){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{t(this,{getChanges:()=>PW(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(t,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(sn)&&!n||t(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(t){return this.on("create",t),()=>{this.off("create",t)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:t}=this.prosemirrorState,{ranges:n}=t,r=Math.min(...n.map(i=>i.$from.pos)),o=Math.max(...n.map(i=>i.$to.pos));if(dR(t)){const i=this.prosemirrorView.nodeDOM(r);if(i)return i.getBoundingClientRect()}return Ux(this.prosemirrorView,r,o)}get isEmpty(){const t=this.document;return t.length===0||t.length===1&&t[0].type==="paragraph"&&t[0].content.length===0}openSuggestionMenu(t,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(t),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:t,deleteTriggerCharacter:n?.deleteTriggerCharacter||!1,ignoreQueryLength:n?.ignoreQueryLength||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(t){this.showSelectionPlugin.setEnabled(t)}convertHtmlToBlockNoteHtml(t){return uK(t.trim()).innerHTML}pasteHTML(t,n=!1){var r;let o=t;n||(o=this.convertHtmlToBlockNoteHtml(t)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(t){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(t)}async pasteMarkdown(t){return this.pasteHTML(await fK(t))}},U_;async function pCe(){return U_||(U_=(async()=>{const[e,t]=await Promise.all([Ne(()=>import("./module-RjUF93sV.js"),[]),Ne(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in e?e.default:e,r="default"in t?t.default:t;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),U_)}async function mCe(e,t){if(!iSe("text",e))return[];const{emojiData:n,emojiMart:r}=await pCe();return(t.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(t)).map(o=>({id:o.skins[0].native,onItemClick:()=>e.insertInlineContent(o.skins[0].native+" ")}))}function DC(){return typeof window<"u"}function Jm(e){return TK(e)?(e.nodeName||"").toLowerCase():"#document"}function Bi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function oc(e){var t;return(t=(TK(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function TK(e){return DC()?e instanceof Node||e instanceof Bi(e).Node:!1}function Dn(e){return DC()?e instanceof Element||e instanceof Bi(e).Element:!1}function _s(e){return DC()?e instanceof HTMLElement||e instanceof Bi(e).HTMLElement:!1}function nN(e){return!DC()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Bi(e).ShadowRoot}const gCe=new Set(["inline","contents"]);function Qb(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ga(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!gCe.has(o)}const yCe=new Set(["table","td","th"]);function bCe(e){return yCe.has(Jm(e))}const vCe=[":popover-open",":modal"];function $C(e){return vCe.some(t=>{try{return e.matches(t)}catch{return!1}})}const wCe=["transform","translate","scale","rotate","perspective"],xCe=["transform","translate","scale","rotate","perspective","filter"],SCe=["paint","layout","strict","content"];function q4(e){const t=LC(),n=Dn(e)?ga(e):e;return wCe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||xCe.some(r=>(n.willChange||"").includes(r))||SCe.some(r=>(n.contain||"").includes(r))}function kCe(e){let t=Xc(e);for(;_s(t)&&!Cd(t);){if(q4(t))return t;if($C(t))return null;t=Xc(t)}return null}function LC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const CCe=new Set(["html","body","#document"]);function Cd(e){return CCe.has(Jm(e))}function ga(e){return Bi(e).getComputedStyle(e)}function jC(e){return Dn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xc(e){if(Jm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||nN(e)&&e.host||oc(e);return nN(t)?t.host:t}function _K(e){const t=Xc(e);return Cd(t)?e.ownerDocument?e.ownerDocument.body:e.body:_s(t)&&Qb(t)?t:_K(t)}function Zc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=_K(e),i=o===((r=e.ownerDocument)==null?void 0:r.body),s=Bi(o);if(i){const a=rN(s);return t.concat(s,s.visualViewport||[],Qb(o)?o:[],a&&n?Zc(a):[])}return t.concat(o,Zc(o,[],n))}function rN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function oN(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Em(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&nN(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function AK(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Z4(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function ECe(e){return _Ce()?!1:!M8()&&e.width===0&&e.height===0||M8()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function MK(){return/apple/i.test(navigator.vendor)}function M8(){const e=/android/i;return e.test(AK())||e.test(Z4())}function TCe(){return AK().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function _Ce(){return Z4().includes("jsdom/")}function iN(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function ACe(e){return"nativeEvent"in e}function MCe(e){return e.matches("html,body")}function cd(e){return e?.ownerDocument||document}function G_(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Dp(e){return"composedPath"in e?e.composedPath()[0]:e.target}const RCe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function NCe(e){return _s(e)&&e.matches(RCe)}const ICe=["top","right","bottom","left"],ya=Math.min,eo=Math.max,K0=Math.round,aw=Math.floor,Fl=e=>({x:e,y:e}),OCe={left:"right",right:"left",bottom:"top",top:"bottom"},PCe={start:"end",end:"start"};function sN(e,t,n){return eo(e,ya(t,n))}function el(e,t){return typeof e=="function"?e(t):e}function tl(e){return e.split("-")[0]}function Xm(e){return e.split("-")[1]}function W4(e){return e==="x"?"y":"x"}function K4(e){return e==="y"?"height":"width"}const DCe=new Set(["top","bottom"]);function Ha(e){return DCe.has(tl(e))?"y":"x"}function Y4(e){return W4(Ha(e))}function $Ce(e,t,n){n===void 0&&(n=!1);const r=Xm(e),o=Y4(e),i=K4(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=NS(s)),[s,NS(s)]}function LCe(e){const t=NS(e);return[aN(e),t,aN(t)]}function aN(e){return e.replace(/start|end/g,t=>PCe[t])}const R8=["left","right"],N8=["right","left"],jCe=["top","bottom"],zCe=["bottom","top"];function BCe(e,t,n){switch(e){case"top":case"bottom":return n?t?N8:R8:t?R8:N8;case"left":case"right":return t?jCe:zCe;default:return[]}}function VCe(e,t,n,r){const o=Xm(e);let i=BCe(tl(e),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),t&&(i=i.concat(i.map(aN)))),i}function NS(e){return e.replace(/left|right|bottom|top/g,t=>OCe[t])}function FCe(e){return{top:0,right:0,bottom:0,left:0,...e}}function J4(e){return typeof e!="number"?FCe(e):{top:e,right:e,bottom:e,left:e}}function Tm(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var HCe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],lN=HCe.join(","),RK=typeof Element>"u",Y0=RK?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,IS=!RK&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},OS=function e(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),i=o===""||o==="true",s=i||n&&t&&e(t.parentNode);return s},UCe=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},GCe=function(t,n,r){if(OS(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(lN));return n&&Y0.call(t,lN)&&o.unshift(t),o=o.filter(r),o},qCe=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var s=i.shift();if(!OS(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),l=a.length?a:s.children,c=e(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:s,candidates:c})}else{var u=Y0.call(s,lN);u&&r.filter(s)&&(n||!t.includes(s))&&o.push(s);var f=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),p=!OS(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(f&&p){var m=e(f===!0?s.children:f.children,!0,r);r.flatten?o.push.apply(o,m):o.push({scopeParent:s,candidates:m})}else i.unshift.apply(i,s.children)}}return o},NK=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},IK=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||UCe(t))&&!NK(t)?0:t.tabIndex},ZCe=function(t,n){var r=IK(t);return r<0&&n&&!NK(t)?0:r},WCe=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},OK=function(t){return t.tagName==="INPUT"},KCe=function(t){return OK(t)&&t.type==="hidden"},YCe=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},JCe=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},XCe=function(t){if(!t.name)return!0;var n=t.form||IS(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=JCe(o,t.form);return!i||i===t},QCe=function(t){return OK(t)&&t.type==="radio"},eEe=function(t){return QCe(t)&&!XCe(t)},tEe=function(t){var n,r=t&&IS(t),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==t){var s,a,l;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!i&&o;){var c,u,f;r=IS(o),o=(c=r)===null||c===void 0?void 0:c.host,i=!!((u=o)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(o))}}return i},I8=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},nEe=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=Y0.call(t,"details>summary:first-of-type"),s=i?t.parentElement:t;if(Y0.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=t;t;){var l=t.parentElement,c=IS(t);if(l&&!l.shadowRoot&&o(l)===!0)return I8(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=a}if(tEe(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return I8(t);return!1},rEe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return Y0.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},oEe=function(t,n){return!(n.disabled||OS(n)||KCe(n)||nEe(n,t)||YCe(n)||rEe(n))},O8=function(t,n){return!(eEe(n)||IK(n)<0||!oEe(t,n))},iEe=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},sEe=function e(t){var n=[],r=[];return t.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,l=ZCe(a,s),c=s?e(o.candidates):a;l===0?s?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:o,isScope:s,content:c})}),r.sort(WCe).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},PK=function(t,n){n=n||{};var r;return n.getShadowRoot?r=qCe([t],n.includeContainer,{filter:O8.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:iEe}):r=GCe(t,n.includeContainer,O8.bind(null,n)),sEe(r)},Ur=HU();const X4=Rd(Ur);function P8(e,t,n){let{reference:r,floating:o}=e;const i=Ha(t),s=Y4(t),a=K4(s),l=tl(t),c=i==="y",u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,p=r[a]/2-o[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-o.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-o.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Xm(t)){case"start":m[s]-=p*(n&&c?-1:1);break;case"end":m[s]+=p*(n&&c?-1:1);break}return m}const aEe=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=P8(c,r,l),p=r,m={},y=0;for(let b=0;b<a.length;b++){const{name:x,fn:S}=a[b],{x:E,y:T,data:A,reset:M}=await S({x:u,y:f,initialPlacement:r,placement:p,strategy:o,middlewareData:m,rects:c,platform:s,elements:{reference:e,floating:t}});u=E??u,f=T??f,m={...m,[x]:{...m[x],...A}},M&&y<=50&&(y++,typeof M=="object"&&(M.placement&&(p=M.placement),M.rects&&(c=M.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:o}):M.rects),{x:u,y:f}=P8(c,p,l)),b=-1)}return{x:u,y:f,placement:p,strategy:o,middlewareData:m}};async function _m(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=el(t,e),y=J4(m),x=a[p?f==="floating"?"reference":"floating":f],S=Tm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=f==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),A=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},M=Tm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:T,strategy:l}):E);return{top:(S.top-M.top+y.top)/A.y,bottom:(M.bottom-S.bottom+y.bottom)/A.y,left:(S.left-M.left+y.left)/A.x,right:(M.right-S.right+y.right)/A.x}}const lEe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=el(e,t)||{};if(c==null)return{};const f=J4(u),p={x:n,y:r},m=Y4(o),y=K4(m),b=await s.getDimensions(c),x=m==="y",S=x?"top":"left",E=x?"bottom":"right",T=x?"clientHeight":"clientWidth",A=i.reference[y]+i.reference[m]-p[m]-i.floating[y],M=p[m]-i.reference[m],R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let O=R?R[T]:0;(!O||!await(s.isElement==null?void 0:s.isElement(R)))&&(O=a.floating[T]||i.floating[y]);const I=A/2-M/2,L=O/2-b[y]/2-1,$=ya(f[S],L),B=ya(f[E],L),H=$,V=O-b[y]-B,W=O/2-b[y]/2+I,K=sN(H,W,V),z=!l.arrow&&Xm(o)!=null&&W!==K&&i.reference[y]/2-(W<H?$:B)-b[y]/2<0,G=z?W<H?W-H:W-V:0;return{[m]:p[m]+G,data:{[m]:K,centerOffset:W-K-G,...z&&{alignmentOffset:G}},reset:z}}}),cEe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...x}=el(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const S=tl(o),E=Ha(a),T=tl(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),M=p||(T||!b?[NS(a)]:LCe(a)),R=y!=="none";!p&&R&&M.push(...VCe(a,b,y,A));const O=[a,...M],I=await _m(t,x),L=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&L.push(I[S]),f){const W=$Ce(o,s,A);L.push(I[W[0]],I[W[1]])}if($=[...$,{placement:o,overflows:L}],!L.every(W=>W<=0)){var B,H;const W=(((B=i.flip)==null?void 0:B.index)||0)+1,K=O[W];if(K&&(!(f==="alignment"?E!==Ha(K):!1)||$.every(F=>Ha(F.placement)===E?F.overflows[0]>0:!0)))return{data:{index:W,overflows:$},reset:{placement:K}};let z=(H=$.filter(G=>G.overflows[0]<=0).sort((G,F)=>G.overflows[1]-F.overflows[1])[0])==null?void 0:H.placement;if(!z)switch(m){case"bestFit":{var V;const G=(V=$.filter(F=>{if(R){const Z=Ha(F.placement);return Z===E||Z==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(Z=>Z>0).reduce((Z,N)=>Z+N,0)]).sort((F,Z)=>F[1]-Z[1])[0])==null?void 0:V[0];G&&(z=G);break}case"initialPlacement":z=a;break}if(o!==z)return{reset:{placement:z}}}return{}}}};function D8(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $8(e){return ICe.some(t=>e[t]>=0)}const uEe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=el(e,t);switch(r){case"referenceHidden":{const i=await _m(t,{...o,elementContext:"reference"}),s=D8(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:$8(s)}}}case"escaped":{const i=await _m(t,{...o,altBoundary:!0}),s=D8(i,n.floating);return{data:{escapedOffsets:s,escaped:$8(s)}}}default:return{}}}}};function DK(e){const t=ya(...e.map(i=>i.left)),n=ya(...e.map(i=>i.top)),r=eo(...e.map(i=>i.right)),o=eo(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:o-n}}function dEe(e){const t=e.slice().sort((o,i)=>o.y-i.y),n=[];let r=null;for(let o=0;o<t.length;o++){const i=t[o];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(o=>Tm(DK(o)))}const fEe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:o,platform:i,strategy:s}=t,{padding:a=2,x:l,y:c}=el(e,t),u=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),f=dEe(u),p=Tm(DK(u)),m=J4(a);function y(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(x=>l>x.left-m.left&&l<x.right+m.right&&c>x.top-m.top&&c<x.bottom+m.bottom)||p;if(f.length>=2){if(Ha(n)==="y"){const $=f[0],B=f[f.length-1],H=tl(n)==="top",V=$.top,W=B.bottom,K=H?$.left:B.left,z=H?$.right:B.right,G=z-K,F=W-V;return{top:V,bottom:W,left:K,right:z,width:G,height:F,x:K,y:V}}const x=tl(n)==="left",S=eo(...f.map($=>$.right)),E=ya(...f.map($=>$.left)),T=f.filter($=>x?$.left===E:$.right===S),A=T[0].top,M=T[T.length-1].bottom,R=E,O=S,I=O-R,L=M-A;return{top:A,bottom:M,left:R,right:O,width:I,height:L,x:R,y:A}}return p}const b=await i.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:s});return o.reference.x!==b.reference.x||o.reference.y!==b.reference.y||o.reference.width!==b.reference.width||o.reference.height!==b.reference.height?{reset:{rects:b}}:{}}}},$K=new Set(["left","top"]);async function hEe(e,t){const{placement:n,platform:r,elements:o}=e,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=tl(n),a=Xm(n),l=Ha(n)==="y",c=$K.has(s)?-1:1,u=i&&l?-1:1,f=el(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const pEe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=t,l=await hEe(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},mEe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:x=>{let{x:S,y:E}=x;return{x:S,y:E}}},...l}=el(e,t),c={x:n,y:r},u=await _m(t,l),f=Ha(tl(o)),p=W4(f);let m=c[p],y=c[f];if(i){const x=p==="y"?"top":"left",S=p==="y"?"bottom":"right",E=m+u[x],T=m-u[S];m=sN(E,m,T)}if(s){const x=f==="y"?"top":"left",S=f==="y"?"bottom":"right",E=y+u[x],T=y-u[S];y=sN(E,y,T)}const b=a.fn({...t,[p]:m,[f]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[f]:s}}}}}},gEe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=el(e,t),u={x:n,y:r},f=Ha(o),p=W4(f);let m=u[p],y=u[f];const b=el(a,t),x=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const T=p==="y"?"height":"width",A=i.reference[p]-i.floating[T]+x.mainAxis,M=i.reference[p]+i.reference[T]-x.mainAxis;m<A?m=A:m>M&&(m=M)}if(c){var S,E;const T=p==="y"?"width":"height",A=$K.has(tl(o)),M=i.reference[f]-i.floating[T]+(A&&((S=s.offset)==null?void 0:S[f])||0)+(A?0:x.crossAxis),R=i.reference[f]+i.reference[T]+(A?0:((E=s.offset)==null?void 0:E[f])||0)-(A?x.crossAxis:0);y<M?y=M:y>R&&(y=R)}return{[p]:m,[f]:y}}}},yEe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:s,elements:a}=t,{apply:l=()=>{},...c}=el(e,t),u=await _m(t,c),f=tl(o),p=Xm(o),m=Ha(o)==="y",{width:y,height:b}=i.floating;let x,S;f==="top"||f==="bottom"?(x=f,S=p===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(S=f,x=p==="end"?"top":"bottom");const E=b-u.top-u.bottom,T=y-u.left-u.right,A=ya(b-u[x],E),M=ya(y-u[S],T),R=!t.middlewareData.shift;let O=A,I=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=T),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(O=E),R&&!p){const $=eo(u.left,0),B=eo(u.right,0),H=eo(u.top,0),V=eo(u.bottom,0);m?I=y-2*($!==0||B!==0?$+B:eo(u.left,u.right)):O=b-2*(H!==0||V!==0?H+V:eo(u.top,u.bottom))}await l({...t,availableWidth:I,availableHeight:O});const L=await s.getDimensions(a.floating);return y!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};function LK(e){const t=ga(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=_s(e),i=o?e.offsetWidth:n,s=o?e.offsetHeight:r,a=K0(n)!==i||K0(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function Q4(e){return Dn(e)?e:e.contextElement}function am(e){const t=Q4(e);if(!_s(t))return Fl(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=LK(t);let s=(i?K0(n.width):n.width)/r,a=(i?K0(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const bEe=Fl(0);function jK(e){const t=Bi(e);return!LC()||!t.visualViewport?bEe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vEe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Bi(e)?!1:t}function fh(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=Q4(e);let s=Fl(1);t&&(r?Dn(r)&&(s=am(r)):s=am(e));const a=vEe(i,n,r)?jK(i):Fl(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,u=o.width/s.x,f=o.height/s.y;if(i){const p=Bi(i),m=r&&Dn(r)?Bi(r):r;let y=p,b=rN(y);for(;b&&r&&m!==y;){const x=am(b),S=b.getBoundingClientRect(),E=ga(b),T=S.left+(b.clientLeft+parseFloat(E.paddingLeft))*x.x,A=S.top+(b.clientTop+parseFloat(E.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,f*=x.y,l+=T,c+=A,y=Bi(b),b=rN(y)}}return Tm({width:u,height:f,x:l,y:c})}function e3(e,t){const n=jC(e).scrollLeft;return t?t.left+n:fh(oc(e)).left+n}function zK(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:e3(e,r)),i=r.top+t.scrollTop;return{x:o,y:i}}function wEe(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i=o==="fixed",s=oc(r),a=t?$C(t.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Fl(1);const u=Fl(0),f=_s(r);if((f||!f&&!i)&&((Jm(r)!=="body"||Qb(s))&&(l=jC(r)),_s(r))){const m=fh(r);c=am(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=s&&!f&&!i?zK(s,l,!0):Fl(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function xEe(e){return Array.from(e.getClientRects())}function SEe(e){const t=oc(e),n=jC(e),r=e.ownerDocument.body,o=eo(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=eo(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+e3(e);const a=-n.scrollTop;return ga(r).direction==="rtl"&&(s+=eo(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}function kEe(e,t){const n=Bi(e),r=oc(e),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const c=LC();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a,y:l}}const CEe=new Set(["absolute","fixed"]);function EEe(e,t){const n=fh(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=_s(e)?am(e):Fl(1),s=e.clientWidth*i.x,a=e.clientHeight*i.y,l=o*i.x,c=r*i.y;return{width:s,height:a,x:l,y:c}}function L8(e,t,n){let r;if(t==="viewport")r=kEe(e,n);else if(t==="document")r=SEe(oc(e));else if(Dn(t))r=EEe(t,n);else{const o=jK(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Tm(r)}function BK(e,t){const n=Xc(e);return n===t||!Dn(n)||Cd(n)?!1:ga(n).position==="fixed"||BK(n,t)}function TEe(e,t){const n=t.get(e);if(n)return n;let r=Zc(e,[],!1).filter(a=>Dn(a)&&Jm(a)!=="body"),o=null;const i=ga(e).position==="fixed";let s=i?Xc(e):e;for(;Dn(s)&&!Cd(s);){const a=ga(s),l=q4(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&!!o&&CEe.has(o.position)||Qb(s)&&!l&&BK(e,s))?r=r.filter(u=>u!==s):o=a,s=Xc(s)}return t.set(e,r),r}function _Ee(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const s=[...n==="clippingAncestors"?$C(t)?[]:TEe(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const f=L8(t,u,o);return c.top=eo(f.top,c.top),c.right=ya(f.right,c.right),c.bottom=ya(f.bottom,c.bottom),c.left=eo(f.left,c.left),c},L8(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function AEe(e){const{width:t,height:n}=LK(e);return{width:t,height:n}}function MEe(e,t,n){const r=_s(t),o=oc(t),i=n==="fixed",s=fh(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=Fl(0);function c(){l.x=e3(o)}if(r||!r&&!i)if((Jm(t)!=="body"||Qb(o))&&(a=jC(t)),r){const m=fh(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else o&&c();i&&!r&&o&&c();const u=o&&!r&&!i?zK(o,a):Fl(0),f=s.left+a.scrollLeft-l.x-u.x,p=s.top+a.scrollTop-l.y-u.y;return{x:f,y:p,width:s.width,height:s.height}}function q_(e){return ga(e).position==="static"}function j8(e,t){if(!_s(e)||ga(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return oc(e)===n&&(n=n.ownerDocument.body),n}function VK(e,t){const n=Bi(e);if($C(e))return n;if(!_s(e)){let o=Xc(e);for(;o&&!Cd(o);){if(Dn(o)&&!q_(o))return o;o=Xc(o)}return n}let r=j8(e,t);for(;r&&bCe(r)&&q_(r);)r=j8(r,t);return r&&Cd(r)&&q_(r)&&!q4(r)?n:r||kCe(e)||n}const REe=async function(e){const t=this.getOffsetParent||VK,n=this.getDimensions,r=await n(e.floating);return{reference:MEe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function NEe(e){return ga(e).direction==="rtl"}const IEe={convertOffsetParentRelativeRectToViewportRelativeRect:wEe,getDocumentElement:oc,getClippingRect:_Ee,getOffsetParent:VK,getElementRects:REe,getClientRects:xEe,getDimensions:AEe,getScale:am,isElement:Dn,isRTL:NEe};function FK(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function OEe(e,t){let n=null,r;const o=oc(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:f,width:p,height:m}=c;if(a||t(),!p||!m)return;const y=aw(f),b=aw(o.clientWidth-(u+p)),x=aw(o.clientHeight-(f+m)),S=aw(u),T={rootMargin:-y+"px "+-b+"px "+-x+"px "+-S+"px",threshold:eo(0,ya(1,l))||1};let A=!0;function M(R){const O=R[0].intersectionRatio;if(O!==l){if(!A)return s();O?s(!1,O):r=setTimeout(()=>{s(!1,1e-7)},1e3)}O===1&&!FK(c,e.getBoundingClientRect())&&s(),A=!1}try{n=new IntersectionObserver(M,{...T,root:o.ownerDocument})}catch{n=new IntersectionObserver(M,T)}n.observe(e)}return s(!0),i}function zC(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Q4(e),u=o||i?[...c?Zc(c):[],...Zc(t)]:[];u.forEach(S=>{o&&S.addEventListener("scroll",n,{passive:!0}),i&&S.addEventListener("resize",n)});const f=c&&a?OEe(c,n):null;let p=-1,m=null;s&&(m=new ResizeObserver(S=>{let[E]=S;E&&E.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let y,b=l?fh(e):null;l&&x();function x(){const S=fh(e);b&&!FK(b,S)&&n(),b=S,y=requestAnimationFrame(x)}return n(),()=>{var S;u.forEach(E=>{o&&E.removeEventListener("scroll",n),i&&E.removeEventListener("resize",n)}),f?.(),(S=m)==null||S.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const Z_=_m,PEe=pEe,DEe=mEe,$Ee=cEe,LEe=yEe,jEe=uEe,z8=lEe,zEe=fEe,BEe=gEe,VEe=(e,t,n)=>{const r=new Map,o={platform:IEe,...n},i={...o.platform,_c:r};return aEe(e,t,{...o,platform:i})};var FEe=typeof document<"u",HEe=function(){},px=FEe?k.useLayoutEffect:HEe;function PS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!PS(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!PS(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function HK(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function B8(e,t){const n=HK(e);return Math.round(t*n)/n}function W_(e){const t=k.useRef(e);return px(()=>{t.current=e}),t}function UK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,f]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=k.useState(r);PS(p,r)||m(r);const[y,b]=k.useState(null),[x,S]=k.useState(null),E=k.useCallback(F=>{F!==R.current&&(R.current=F,b(F))},[]),T=k.useCallback(F=>{F!==O.current&&(O.current=F,S(F))},[]),A=i||y,M=s||x,R=k.useRef(null),O=k.useRef(null),I=k.useRef(u),L=l!=null,$=W_(l),B=W_(o),H=W_(c),V=k.useCallback(()=>{if(!R.current||!O.current)return;const F={placement:t,strategy:n,middleware:p};B.current&&(F.platform=B.current),VEe(R.current,O.current,F).then(Z=>{const N={...Z,isPositioned:H.current!==!1};W.current&&!PS(I.current,N)&&(I.current=N,Ur.flushSync(()=>{f(N)}))})},[p,t,n,B,H]);px(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[c]);const W=k.useRef(!1);px(()=>(W.current=!0,()=>{W.current=!1}),[]),px(()=>{if(A&&(R.current=A),M&&(O.current=M),A&&M){if($.current)return $.current(A,M,V);V()}},[A,M,V,$,L]);const K=k.useMemo(()=>({reference:R,floating:O,setReference:E,setFloating:T}),[E,T]),z=k.useMemo(()=>({reference:A,floating:M}),[A,M]),G=k.useMemo(()=>{const F={position:n,left:0,top:0};if(!z.floating)return F;const Z=B8(z.floating,u.x),N=B8(z.floating,u.y);return a?{...F,transform:"translate("+Z+"px, "+N+"px)",...HK(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:N}},[n,a,z.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:V,refs:K,elements:z,floatingStyles:G}),[u,V,K,z,G])}const UEe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?z8({element:r.current,padding:o}).fn(n):{}:r?z8({element:r,padding:o}).fn(n):{}}}},Gi=(e,t)=>({...PEe(e),options:[e,t]}),cu=(e,t)=>({...DEe(e),options:[e,t]}),cN=(e,t)=>({...BEe(e),options:[e,t]}),As=(e,t)=>({...$Ee(e),options:[e,t]}),Sh=(e,t)=>({...LEe(e),options:[e,t]}),GEe=(e,t)=>({...jEe(e),options:[e,t]}),r0=(e,t)=>({...zEe(e),options:[e,t]}),t3=(e,t)=>({...UEe(e),options:[e,t]}),GK={...Lb},qEe=GK.useInsertionEffect,ZEe=qEe||(e=>e());function Ol(e){const t=k.useRef(()=>{});return ZEe(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}var ei=typeof document<"u"?k.useLayoutEffect:k.useEffect;function uN(){return uN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uN.apply(this,arguments)}let V8=!1,WEe=0;const F8=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+WEe++;function KEe(){const[e,t]=k.useState(()=>V8?F8():void 0);return ei(()=>{e==null&&t(F8())},[]),k.useEffect(()=>{V8=!0},[]),e}const YEe=GK.useId,n3=YEe||KEe;function JEe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(o=>o!==n))||[])}}}const XEe=k.createContext(null),QEe=k.createContext(null),r3=()=>{var e;return((e=k.useContext(XEe))==null?void 0:e.id)||null},o3=()=>k.useContext(QEe);function ev(e){return"data-floating-ui-"+e}function Of(e){const t=k.useRef(e);return ei(()=>{t.current=e}),t}const H8=ev("safe-polygon");function mx(e,t,n){return n&&!iN(n)?0:typeof e=="number"?e:e?.[t]}function e2e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:s}=e,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:f=0,move:p=!0}=t,m=o3(),y=r3(),b=Of(c),x=Of(l),S=Of(n),E=k.useRef(),T=k.useRef(-1),A=k.useRef(),M=k.useRef(-1),R=k.useRef(!0),O=k.useRef(!1),I=k.useRef(()=>{}),L=k.useRef(!1),$=k.useCallback(()=>{var G;const F=(G=o.current.openEvent)==null?void 0:G.type;return F?.includes("mouse")&&F!=="mousedown"},[o]);k.useEffect(()=>{if(!a)return;function G(F){let{open:Z}=F;Z||(clearTimeout(T.current),clearTimeout(M.current),R.current=!0,L.current=!1)}return i.on("openchange",G),()=>{i.off("openchange",G)}},[a,i]),k.useEffect(()=>{if(!a||!b.current||!n)return;function G(Z){$()&&r(!1,Z,"hover")}const F=cd(s.floating).documentElement;return F.addEventListener("mouseleave",G),()=>{F.removeEventListener("mouseleave",G)}},[s.floating,n,r,a,b,$]);const B=k.useCallback(function(G,F,Z){F===void 0&&(F=!0),Z===void 0&&(Z="hover");const N=mx(x.current,"close",E.current);N&&!A.current?(clearTimeout(T.current),T.current=window.setTimeout(()=>r(!1,G,Z),N)):F&&(clearTimeout(T.current),r(!1,G,Z))},[x,r]),H=Ol(()=>{I.current(),A.current=void 0}),V=Ol(()=>{if(O.current){const G=cd(s.floating).body;G.style.pointerEvents="",G.removeAttribute(H8),O.current=!1}}),W=Ol(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);k.useEffect(()=>{if(!a)return;function G(U){if(clearTimeout(T.current),R.current=!1,u&&!iN(E.current)||f>0&&!mx(x.current,"open"))return;const ee=mx(x.current,"open",E.current);ee?T.current=window.setTimeout(()=>{S.current||r(!0,U,"hover")},ee):n||r(!0,U,"hover")}function F(U){if(W())return;I.current();const ee=cd(s.floating);if(clearTimeout(M.current),L.current=!1,b.current&&o.current.floatingContext){n||clearTimeout(T.current),A.current=b.current({...o.current.floatingContext,tree:m,x:U.clientX,y:U.clientY,onClose(){V(),H(),W()||B(U,!0,"safe-polygon")}});const ae=A.current;ee.addEventListener("mousemove",ae),I.current=()=>{ee.removeEventListener("mousemove",ae)};return}(E.current==="touch"?!Em(s.floating,U.relatedTarget):!0)&&B(U)}function Z(U){W()||o.current.floatingContext&&(b.current==null||b.current({...o.current.floatingContext,tree:m,x:U.clientX,y:U.clientY,onClose(){V(),H(),W()||B(U)}})(U))}if(Dn(s.domReference)){var N;const U=s.domReference;return n&&U.addEventListener("mouseleave",Z),(N=s.floating)==null||N.addEventListener("mouseleave",Z),p&&U.addEventListener("mousemove",G,{once:!0}),U.addEventListener("mouseenter",G),U.addEventListener("mouseleave",F),()=>{var ee;n&&U.removeEventListener("mouseleave",Z),(ee=s.floating)==null||ee.removeEventListener("mouseleave",Z),p&&U.removeEventListener("mousemove",G),U.removeEventListener("mouseenter",G),U.removeEventListener("mouseleave",F)}}},[s,a,e,u,f,p,B,H,V,r,n,S,m,x,b,o,W]),ei(()=>{var G;if(a&&n&&(G=b.current)!=null&&G.__options.blockPointerEvents&&$()){O.current=!0;const Z=s.floating;if(Dn(s.domReference)&&Z){var F;const N=cd(s.floating).body;N.setAttribute(H8,"");const U=s.domReference,ee=m==null||(F=m.nodesRef.current.find(D=>D.id===y))==null||(F=F.context)==null?void 0:F.elements.floating;return ee&&(ee.style.pointerEvents=""),N.style.pointerEvents="none",U.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{N.style.pointerEvents="",U.style.pointerEvents="",Z.style.pointerEvents=""}}}},[a,n,y,s,m,b,$]),ei(()=>{n||(E.current=void 0,L.current=!1,H(),V())},[n,H,V]),k.useEffect(()=>()=>{H(),clearTimeout(T.current),clearTimeout(M.current),V()},[a,s.domReference,H,V]);const K=k.useMemo(()=>{function G(F){E.current=F.pointerType}return{onPointerDown:G,onPointerEnter:G,onMouseMove(F){const{nativeEvent:Z}=F;function N(){!R.current&&!S.current&&r(!0,Z,"hover")}u&&!iN(E.current)||n||f===0||L.current&&F.movementX**2+F.movementY**2<2||(clearTimeout(M.current),E.current==="touch"?N():(L.current=!0,M.current=window.setTimeout(N,f)))}}},[u,r,n,S,f]),z=k.useMemo(()=>({onMouseEnter(){clearTimeout(T.current)},onMouseLeave(G){W()||B(G.nativeEvent,!1)}}),[B,W]);return k.useMemo(()=>a?{reference:K,floating:z}:{},[a,K,z])}const dN=()=>{},qK=k.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:dN,setState:dN,isInstantPhase:!1}),t2e=()=>k.useContext(qK);function n2e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[o,i]=k.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=k.useRef(null),a=k.useCallback(l=>{i({currentId:l})},[]);return ei(()=>{o.currentId?s.current===null?s.current=o.currentId:o.isInstantPhase||i({isInstantPhase:!0}):(o.isInstantPhase&&i({isInstantPhase:!1}),s.current=null)},[o.currentId,o.isInstantPhase]),k.createElement(qK.Provider,{value:k.useMemo(()=>({...o,setState:i,setCurrentId:a}),[o,a])},t)}function r2e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:o}=e,{id:i,enabled:s=!0}=t,a=i??o,l=t2e(),{currentId:c,setCurrentId:u,initialDelay:f,setState:p,timeoutMs:m}=l;return ei(()=>{s&&c&&(p({delay:{open:1,close:mx(f,"close")}}),c!==a&&r(!1))},[s,a,r,p,c,f]),ei(()=>{function y(){r(!1),p({delay:f,currentId:null})}if(s&&c&&!n&&c===a){if(m){const b=window.setTimeout(y,m);return()=>{clearTimeout(b)}}y()}},[s,n,p,c,a,r,f,m]),ei(()=>{s&&(u===dN||!n||u(a))},[s,n,u,a]),l}function K_(e,t){let n=e.filter(o=>{var i;return o.parentId===t&&((i=o.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=e.filter(o=>{var i;return(i=r)==null?void 0:i.some(s=>{var a;return o.parentId===s.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const ZK=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function WK(e,t){const n=PK(e,ZK());t==="prev"&&n.reverse();const r=n.indexOf(oN(cd(e)));return n.slice(r+1)[0]}function o2e(){return WK(document.body,"next")}function i2e(){return WK(document.body,"prev")}function Y_(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Em(n,r)}function s2e(e){PK(e,ZK()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function U8(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const KK={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let a2e;function G8(e){e.key==="Tab"&&(e.target,clearTimeout(a2e))}const q8=k.forwardRef(function(t,n){const[r,o]=k.useState();ei(()=>(MK()&&o("button"),document.addEventListener("keydown",G8),()=>{document.removeEventListener("keydown",G8)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ev("focus-guard")]:"",style:KK};return k.createElement("span",uN({},t,i))}),YK=k.createContext(null),Z8=ev("portal");function l2e(e){e===void 0&&(e={});const{id:t,root:n}=e,r=n3(),o=u2e(),[i,s]=k.useState(null),a=k.useRef(null);return ei(()=>()=>{i?.remove(),queueMicrotask(()=>{a.current=null})},[i]),ei(()=>{if(!r||a.current)return;const l=t?document.getElementById(t):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(Z8,""),l.appendChild(c),a.current=c,s(c)},[t,r]),ei(()=>{if(n===null||!r||a.current)return;let l=n||o?.portalNode;l&&!Dn(l)&&(l=l.current),l=l||document.body;let c=null;t&&(c=document.createElement("div"),c.id=t,l.appendChild(c));const u=document.createElement("div");u.id=r,u.setAttribute(Z8,""),l=c||l,l.appendChild(u),a.current=u,s(u)},[t,n,r,o]),i}function c2e(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,i=l2e({id:n,root:r}),[s,a]=k.useState(null),l=k.useRef(null),c=k.useRef(null),u=k.useRef(null),f=k.useRef(null),p=s?.modal,m=s?.open,y=!!s&&!s.modal&&s.open&&o&&!!(r||i);return k.useEffect(()=>{if(!i||!o||p)return;function b(x){i&&Y_(x)&&(x.type==="focusin"?U8:s2e)(i)}return i.addEventListener("focusin",b,!0),i.addEventListener("focusout",b,!0),()=>{i.removeEventListener("focusin",b,!0),i.removeEventListener("focusout",b,!0)}},[i,o,p]),k.useEffect(()=>{i&&(m||U8(i))},[m,i]),k.createElement(YK.Provider,{value:k.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:f,portalNode:i,setFocusManagerState:a}),[o,i])},y&&i&&k.createElement(q8,{"data-type":"outside",ref:l,onFocus:b=>{if(Y_(b,i)){var x;(x=u.current)==null||x.focus()}else{const S=i2e()||s?.refs.domReference.current;S?.focus()}}}),y&&i&&k.createElement("span",{"aria-owns":i.id,style:KK}),i&&Ur.createPortal(t,i),y&&i&&k.createElement(q8,{"data-type":"outside",ref:c,onFocus:b=>{if(Y_(b,i)){var x;(x=f.current)==null||x.focus()}else{const S=o2e()||s?.refs.domReference.current;S?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1,b.nativeEvent,"focus-out")}}}))}const u2e=()=>k.useContext(YK),d2e="data-floating-ui-focusable",f2e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},h2e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},W8=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e?.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e?.outsidePress)!=null?n:!0}};function JK(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:y}=t,b=o3(),x=Ol(typeof l=="function"?l:()=>!1),S=typeof l=="function"?x:l,E=k.useRef(!1),T=k.useRef(!1),{escapeKey:A,outsidePress:M}=W8(m),{escapeKey:R,outsidePress:O}=W8(y),I=k.useRef(!1),L=Ol(K=>{var z;if(!n||!s||!a||K.key!=="Escape"||I.current)return;const G=(z=i.current.floatingContext)==null?void 0:z.nodeId,F=b?K_(b.nodesRef.current,G):[];if(!A&&(K.stopPropagation(),F.length>0)){let Z=!0;if(F.forEach(N=>{var U;if((U=N.context)!=null&&U.open&&!N.context.dataRef.current.__escapeKeyBubbles){Z=!1;return}}),!Z)return}r(!1,ACe(K)?K.nativeEvent:K,"escape-key")}),$=Ol(K=>{var z;const G=()=>{var F;L(K),(F=Dp(K))==null||F.removeEventListener("keydown",G)};(z=Dp(K))==null||z.addEventListener("keydown",G)}),B=Ol(K=>{var z;const G=E.current;E.current=!1;const F=T.current;if(T.current=!1,c==="click"&&F||G||typeof S=="function"&&!S(K))return;const Z=Dp(K),N="["+ev("inert")+"]",U=cd(o.floating).querySelectorAll(N);let ee=Dn(Z)?Z:null;for(;ee&&!Cd(ee);){const he=Xc(ee);if(Cd(he)||!Dn(he))break;ee=he}if(U.length&&Dn(Z)&&!MCe(Z)&&!Em(Z,o.floating)&&Array.from(U).every(he=>!Em(ee,he)))return;if(_s(Z)&&W){const he=Z.clientWidth>0&&Z.scrollWidth>Z.clientWidth,le=Z.clientHeight>0&&Z.scrollHeight>Z.clientHeight;let ge=le&&K.offsetX>Z.clientWidth;if(le&&ga(Z).direction==="rtl"&&(ge=K.offsetX<=Z.offsetWidth-Z.clientWidth),ge||he&&K.offsetY>Z.clientHeight)return}const D=(z=i.current.floatingContext)==null?void 0:z.nodeId,ae=b&&K_(b.nodesRef.current,D).some(he=>{var le;return G_(K,(le=he.context)==null?void 0:le.elements.floating)});if(G_(K,o.floating)||G_(K,o.domReference)||ae)return;const oe=b?K_(b.nodesRef.current,D):[];if(oe.length>0){let he=!0;if(oe.forEach(le=>{var ge;if((ge=le.context)!=null&&ge.open&&!le.context.dataRef.current.__outsidePressBubbles){he=!1;return}}),!he)return}r(!1,K,"outside-press")}),H=Ol(K=>{var z;const G=()=>{var F;B(K),(F=Dp(K))==null||F.removeEventListener(c,G)};(z=Dp(K))==null||z.addEventListener(c,G)});k.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=A,i.current.__outsidePressBubbles=M;let K=-1;function z(U){r(!1,U,"ancestor-scroll")}function G(){window.clearTimeout(K),I.current=!0}function F(){K=window.setTimeout(()=>{I.current=!1},LC()?5:0)}const Z=cd(o.floating);a&&(Z.addEventListener("keydown",R?$:L,R),Z.addEventListener("compositionstart",G),Z.addEventListener("compositionend",F)),S&&Z.addEventListener(c,O?H:B,O);let N=[];return p&&(Dn(o.domReference)&&(N=Zc(o.domReference)),Dn(o.floating)&&(N=N.concat(Zc(o.floating))),!Dn(o.reference)&&o.reference&&o.reference.contextElement&&(N=N.concat(Zc(o.reference.contextElement)))),N=N.filter(U=>{var ee;return U!==((ee=Z.defaultView)==null?void 0:ee.visualViewport)}),N.forEach(U=>{U.addEventListener("scroll",z,{passive:!0})}),()=>{a&&(Z.removeEventListener("keydown",R?$:L,R),Z.removeEventListener("compositionstart",G),Z.removeEventListener("compositionend",F)),S&&Z.removeEventListener(c,O?H:B,O),N.forEach(U=>{U.removeEventListener("scroll",z)}),window.clearTimeout(K)}},[i,o,a,S,c,n,r,p,s,A,M,L,R,$,B,O,H]),k.useEffect(()=>{E.current=!1},[S,c]);const V=k.useMemo(()=>({onKeyDown:L,[f2e[f]]:K=>{u&&r(!1,K.nativeEvent,"reference-press")}}),[L,r,u,f]),W=k.useMemo(()=>({onKeyDown:L,onMouseDown(){T.current=!0},onMouseUp(){T.current=!0},[h2e[c]]:()=>{E.current=!0}}),[L,c]);return k.useMemo(()=>s?{reference:V,floating:W}:{},[s,V,W])}function p2e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=n3(),i=k.useRef({}),[s]=k.useState(()=>JEe()),a=r3()!=null,[l,c]=k.useState(r.reference),u=Ol((m,y,b)=>{i.current.openEvent=m?y:void 0,s.emit("openchange",{open:m,event:y,reason:b,nested:a}),n?.(m,y,b)}),f=k.useMemo(()=>({setPositionReference:c}),[]),p=k.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return k.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:p,events:s,floatingId:o,refs:f}),[t,u,p,s,o,f])}function kh(e){e===void 0&&(e={});const{nodeId:t}=e,n=p2e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,s]=k.useState(null),[a,l]=k.useState(null),u=o?.domReference||i,f=k.useRef(null),p=o3();ei(()=>{u&&(f.current=u)},[u]);const m=UK({...e,elements:{...o,...a&&{reference:a}}}),y=k.useCallback(T=>{const A=Dn(T)?{getBoundingClientRect:()=>T.getBoundingClientRect(),contextElement:T}:T;l(A),m.refs.setReference(A)},[m.refs]),b=k.useCallback(T=>{(Dn(T)||T===null)&&(f.current=T,s(T)),(Dn(m.refs.reference.current)||m.refs.reference.current===null||T!==null&&!Dn(T))&&m.refs.setReference(T)},[m.refs]),x=k.useMemo(()=>({...m.refs,setReference:b,setPositionReference:y,domReference:f}),[m.refs,b,y]),S=k.useMemo(()=>({...m.elements,domReference:u}),[m.elements,u]),E=k.useMemo(()=>({...m,...r,refs:x,elements:S,nodeId:t}),[m,x,S,t,r]);return ei(()=>{r.dataRef.current.floatingContext=E;const T=p?.nodesRef.current.find(A=>A.id===t);T&&(T.context=E)}),k.useMemo(()=>({...m,context:E,refs:x,elements:S}),[m,x,S,E])}function m2e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:o,dataRef:i,elements:s}=e,{enabled:a=!0,visibleOnly:l=!0}=t,c=k.useRef(!1),u=k.useRef(),f=k.useRef(!0);k.useEffect(()=>{if(!a)return;const m=Bi(s.domReference);function y(){!n&&_s(s.domReference)&&s.domReference===oN(cd(s.domReference))&&(c.current=!0)}function b(){f.current=!0}return m.addEventListener("blur",y),m.addEventListener("keydown",b,!0),()=>{m.removeEventListener("blur",y),m.removeEventListener("keydown",b,!0)}},[s.domReference,n,a]),k.useEffect(()=>{if(!a)return;function m(y){let{reason:b}=y;(b==="reference-press"||b==="escape-key")&&(c.current=!0)}return o.on("openchange",m),()=>{o.off("openchange",m)}},[o,a]),k.useEffect(()=>()=>{clearTimeout(u.current)},[]);const p=k.useMemo(()=>({onPointerDown(m){ECe(m.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(m){if(c.current)return;const y=Dp(m.nativeEvent);if(l&&Dn(y))try{if(MK()&&TCe())throw Error();if(!y.matches(":focus-visible"))return}catch{if(!f.current&&!NCe(y))return}r(!0,m.nativeEvent,"focus")},onBlur(m){c.current=!1;const y=m.relatedTarget,b=m.nativeEvent,x=Dn(y)&&y.hasAttribute(ev("focus-guard"))&&y.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var S;const E=oN(s.domReference?s.domReference.ownerDocument:document);!y&&E===s.domReference||Em((S=i.current.floatingContext)==null?void 0:S.refs.floating.current,E)||Em(s.domReference,E)||x||r(!1,b,"focus")})}}),[i,s.domReference,r,l]);return k.useMemo(()=>a?{reference:p}:{},[a,p])}const K8="active",Y8="selected";function J_(e,t,n){const r=new Map,o=n==="item";let i=e;if(o&&e){const{[K8]:s,[Y8]:a,...l}=e;i=l}return{...n==="floating"&&{tabIndex:-1,[d2e]:""},...i,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(o&&[K8,Y8].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var f;(f=r.get(c))==null||f.push(u),s[c]=function(){for(var p,m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];return(p=r.get(c))==null?void 0:p.map(x=>x(...y)).find(x=>x!==void 0)}}}else s[c]=u}),s),{})}}function i3(e){e===void 0&&(e=[]);const t=e.map(a=>a?.reference),n=e.map(a=>a?.floating),r=e.map(a=>a?.item),o=k.useCallback(a=>J_(a,e,"reference"),t),i=k.useCallback(a=>J_(a,e,"floating"),n),s=k.useCallback(a=>J_(a,e,"item"),r);return k.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const g2e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function y2e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:o}=e,{enabled:i=!0,role:s="dialog"}=t,a=(n=g2e.get(s))!=null?n:s,l=n3(),u=r3()!=null,f=k.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&u&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,o,u,r,l,s]),p=k.useMemo(()=>{const y={id:o,...a&&{role:a}};return a==="tooltip"||s==="label"?y:{...y,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,s]),m=k.useCallback(y=>{let{active:b,selected:x}=y;const S={role:"option",...b&&{id:o+"-option"}};switch(s){case"select":return{...S,"aria-selected":b&&x};case"combobox":return{...S,...b&&{"aria-selected":!0}}}return{}},[o,s]);return k.useMemo(()=>i?{reference:f,floating:p,item:m}:{},[i,f,p,m])}const J8=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,n)=>(n?"-":"")+t.toLowerCase());function mp(e,t){return typeof e=="function"?e(t):e}function b2e(e,t){const[n,r]=k.useState(e);return e&&!n&&r(!0),k.useEffect(()=>{if(!e&&n){const o=setTimeout(()=>r(!1),t);return()=>clearTimeout(o)}},[e,n,t]),n}function v2e(e,t){t===void 0&&(t={});const{open:n,elements:{floating:r}}=e,{duration:o=250}=t,s=(typeof o=="number"?o:o.close)||0,[a,l]=k.useState("unmounted"),c=b2e(n,s);return!c&&a==="close"&&l("unmounted"),ei(()=>{if(r){if(n){l("initial");const u=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(u)}}l("close")}},[n,r]),{isMounted:c,status:a}}function s3(e,t){t===void 0&&(t={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:s=250}=t,a=e.placement,l=a.split("-")[0],c=k.useMemo(()=>({side:l,placement:a}),[l,a]),u=typeof s=="number",f=(u?s:s.open)||0,p=(u?s:s.close)||0,[m,y]=k.useState(()=>({...mp(i,c),...mp(n,c)})),{isMounted:b,status:x}=v2e(e,{duration:s}),S=Of(n),E=Of(r),T=Of(o),A=Of(i);return ei(()=>{const M=mp(S.current,c),R=mp(T.current,c),O=mp(A.current,c),I=mp(E.current,c)||Object.keys(M).reduce((L,$)=>(L[$]="",L),{});if(x==="initial"&&y(L=>({transitionProperty:L.transitionProperty,...O,...M})),x==="open"&&y({transitionProperty:Object.keys(I).map(J8).join(","),transitionDuration:f+"ms",...O,...I}),x==="close"){const L=R||M;y({transitionProperty:Object.keys(L).map(J8).join(","),transitionDuration:p+"ms",...O,...L})}},[p,T,S,E,A,f,x,c]),{isMounted:b,styles:m}}function X8(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const w2e=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:o,offset:i=0,index:s=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=el(e,t),{rects:f,elements:{floating:p}}=t,m=n.current[s],y=c?.current||p,b=p.clientTop||y.clientTop,x=p.clientTop!==0,S=y.clientTop!==0,E=p===y;if(!m)return{};const T={...t,...await Gi(-m.offsetTop-p.clientTop-f.reference.height/2-m.offsetHeight/2-i).fn(t)},A=await Z_(X8(T,y.scrollHeight+b+p.clientTop),u),M=await Z_(T,{...u,elementContext:"reference"}),R=eo(0,A.top),O=T.y+R,$=(y.scrollHeight>y.clientHeight?B=>B:K0)(eo(0,y.scrollHeight+(x&&E||S?b*2:0)-R-eo(0,A.bottom)));if(y.style.maxHeight=$+"px",y.scrollTop=R,o){const B=y.offsetHeight<m.offsetHeight*ya(a,n.current.length)-1||M.top>=-l||M.bottom>=-l;Ur.flushSync(()=>o(B))}return r&&(r.current=await Z_(X8({...T,y:O},y.offsetHeight+b+p.clientTop),u)),{y:O}}});function x2e(e,t){const{open:n,elements:r}=e,{enabled:o=!0,overflowRef:i,scrollRef:s,onChange:a}=t,l=Ol(a),c=k.useRef(!1),u=k.useRef(null),f=k.useRef(null);k.useEffect(()=>{if(!o)return;function m(b){if(b.ctrlKey||!y||i.current==null)return;const x=b.deltaY,S=i.current.top>=-.5,E=i.current.bottom>=-.5,T=y.scrollHeight-y.clientHeight,A=x<0?-1:1,M=x<0?"max":"min";y.scrollHeight<=y.clientHeight||(!S&&x>0||!E&&x<0?(b.preventDefault(),Ur.flushSync(()=>{l(R=>R+Math[M](x,T*A))})):/firefox/i.test(Z4())&&(y.scrollTop+=x))}const y=s?.current||r.floating;if(n&&y)return y.addEventListener("wheel",m),requestAnimationFrame(()=>{u.current=y.scrollTop,i.current!=null&&(f.current={...i.current})}),()=>{u.current=null,f.current=null,y.removeEventListener("wheel",m)}},[o,n,r.floating,i,s,l]);const p=k.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const m=s?.current||r.floating;if(!(!i.current||!m||!c.current)){if(u.current!==null){const y=m.scrollTop-u.current;(i.current.bottom<-.5&&y<-1||i.current.top<-.5&&y>1)&&Ur.flushSync(()=>l(b=>b+y))}requestAnimationFrame(()=>{u.current=m.scrollTop})}}}),[r.floating,l,i,s]);return k.useMemo(()=>o?{floating:p}:{},[o,p])}var XK={exports:{}},X_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q8;function S2e(){if(Q8)return X_;Q8=1;var e=ie;function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function a(f,p){var m=p(),y=r({inst:{value:m,getSnapshot:p}}),b=y[0].inst,x=y[1];return i(function(){b.value=m,b.getSnapshot=p,l(b)&&x({inst:b})},[f,m,p]),o(function(){return l(b)&&x({inst:b}),f(function(){l(b)&&x({inst:b})})},[f]),s(m),m}function l(f){var p=f.getSnapshot;f=f.value;try{var m=p();return!n(f,m)}catch{return!0}}function c(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return X_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,X_}XK.exports=S2e();var QK=XK.exports;const k2e=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},C2e=({contentComponent:e})=>{const t=QK.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return ie.createElement(ie.Fragment,null,Object.values(t))};function E2e(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:X4.createPortal(r.reactElement,r.element,n)},e.forEach(o=>o())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(o=>o())}}}class T2e extends ie.Component{constructor(t){var n;super(t),this.editorContentRef=ie.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=t.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.options.element.childNodes),t.setOptions({element:n}),t.contentComponent=E2e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!t.options.element.firstChild))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const{editor:t,innerRef:n,...r}=this.props;return ie.createElement(ie.Fragment,null,ie.createElement("div",{ref:k2e(n,this.editorContentRef),...r}),t?.contentComponent&&ie.createElement(C2e,{contentComponent:t.contentComponent}))}}const _2e=k.forwardRef((e,t)=>{const n=ie.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return ie.createElement(T2e,{key:n,innerRef:t,...e})});ie.memo(_2e);var Q_={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ez;function A2e(){if(ez)return Q_;ez=1;var e=ie,t=QK;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,l=e.useDebugValue;return Q_.useSyncExternalStoreWithSelector=function(c,u,f,p,m){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=a(function(){function S(R){if(!E){if(E=!0,T=R,R=p(R),m!==void 0&&b.hasValue){var O=b.value;if(m(O,R))return A=O}return A=R}if(O=A,r(T,R))return O;var I=p(R);return m!==void 0&&m(O,I)?O:(T=R,A=I)}var E=!1,T,A,M=f===void 0?null:f;return[function(){return S(u())},M===null?void 0:function(){return S(M())}]},[u,f,p,m]);var x=o(c,y[0],y[1]);return s(function(){b.hasValue=!0,b.value=x},[x]),l(x),x},Q_}A2e();const M2e=k.createContext({editor:null});M2e.Consumer;const eY=k.createContext({onDragStart:void 0}),tY=()=>k.useContext(eY),R2e=ie.forwardRef((e,t)=>{const{onDragStart:n}=tY(),r=e.as||"div";return ie.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function tz(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function nz(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.forward_ref)"||e.$$typeof.description==="react.forward_ref"))}function N2e(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.memo)"||e.$$typeof.description==="react.memo"))}function I2e(e){if(tz(e)||nz(e))return!0;if(N2e(e)){const t=e.type;if(t)return tz(t)||nz(t)}return!1}function O2e(){try{if(k.version)return parseInt(k.version.split(".")[0],10)>=19}catch{}return!1}class P2e{constructor(t,{editor:n,props:r={},as:o="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?Ur.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var t;const n=this.component,r=this.props,o=this.editor,i=O2e(),s=I2e(n),a={...r};a.ref&&!(i||s)&&delete a.ref,!a.ref&&(i||s)&&(a.ref=l=>{this.ref=l}),this.reactElement=ie.createElement(n,{...a}),(t=o?.contentComponent)===null||t===void 0||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const n=this.editor;(t=n?.contentComponent)===null||t===void 0||t.removeRenderer(this.id)}updateAttributes(t){Object.keys(t).forEach(n=>{this.element.setAttribute(n,t[n])})}}class D2e extends Lge{constructor(t,n,r){if(super(t,n,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const o=this.dom.querySelector("[data-node-view-content]");if(!o)return;o.appendChild(this.contentDOMElement)}}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode(),ref:k.createRef()};if(!this.component.displayName){const c=u=>u.charAt(0).toUpperCase()+u.substring(1);this.component.displayName=c(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&(c.hasAttribute("data-node-view-wrapper")&&c.removeAttribute("data-node-view-wrapper"),c.appendChild(this.contentDOMElement))}},i=this.component,s=k.memo(c=>ie.createElement(eY.Provider,{value:o},k.createElement(i,c)));s.displayName="ReactNodeView";let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new P2e(s,{editor:this.editor,props:t,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!(!((t=this.renderer.element.firstElementChild)===null||t===void 0)&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:t,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(t<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,n,r){const o=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,s=this.decorations,a=this.innerDecorations;return this.node=t,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:s,newNode:t,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:t,decorations:n,innerDecorations:r})})}return t===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=t,this.decorations=n,this.innerDecorations=r,o({node:t,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=Vx(this.node,n);t=this.options.attrs({node:this.node,HTMLAttributes:r})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}}function $2e(e,t){return n=>n.editor.contentComponent?new D2e(e,n,t):{}}const nY=k.createContext(void 0);function ol(e){return k.useContext(nY)}function Qe(e){const t=ol();if(!(t!=null&&t.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return t.editor}function a3(e,t,n){const r=ol();t||(t=r?.editor),k.useEffect(()=>{if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onSelectionChange(e,n)},[e,t,n])}function L2e(e,t){const n=Qe();t=t||n;const[r,o]=k.useState(()=>{if(e)return t.getSelectionBoundingBox()}),i=k.useCallback(()=>{if(!e)return;const s=t.getSelectionBoundingBox();o(s)},[t,e]);return a3(i,t,!0),k.useEffect(()=>{o(e?t.getSelectionBoundingBox():void 0)},[e,t]),r}function j2e(e){return e.getBoundingClientRect!==void 0}function uu(e,t,n,r){const{refs:o,update:i,context:s,floatingStyles:a,isPositioned:l}=kh({open:e,...r}),{isMounted:c,styles:u}=s3(s),f=typeof r?.canDismiss=="object"?r.canDismiss:{enabled:r?.canDismiss},p=JK(s,f),{getReferenceProps:m,getFloatingProps:y}=i3([p]);return k.useEffect(()=>{i()},[t,i]),k.useEffect(()=>{t!==null&&(t instanceof HTMLElement||j2e(t)?o.setReference(t):o.setReference({getBoundingClientRect:()=>t}))},[t,o]),k.useMemo(()=>({isMounted:c,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...u,...a,zIndex:n},getFloatingProps:y,getReferenceProps:m,isPositioned:l}),[l,a,c,o.setFloating,o.setReference,u,n,y,m])}function du(e){const[t,n]=k.useState();return k.useEffect(()=>e(r=>{n({...r})}),[e]),t}const rY=k.createContext(void 0);function Xe(){return k.useContext(rY)}const BC=(e={},t=[])=>k.useMemo(()=>{const n=hCe.create(e);return window&&(window.ProseMirror=n._tiptapEditor),n},t);function kt(){return ol().editor.dictionary}function l3(e,t){const n=ol();t||(t=n?.editor),k.useEffect(()=>{if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onChange(e)},[e,t])}const c3=e=>{const[t,n]=k.useState(!1),[r,o]=k.useState(e.editor.isEmpty),i=Xe();l3(()=>{o(e.editor.isEmpty)},e.editor);const s=k.useCallback(()=>{n(!0)},[]),a=k.useCallback(()=>{n(!1)},[]);return k.useEffect(()=>{e.editable&&e.autoFocus&&e.editor.focus()},[e.autoFocus,e.editable,e.editor]),w.jsxs(w.Fragment,{children:[w.jsx(i.Comments.Editor,{autoFocus:e.autoFocus,className:"bn-comment-editor",editor:e.editor,onFocus:s,onBlur:a,editable:e.editable}),e.actions&&w.jsx("div",{className:"bn-comment-actions-wrapper",children:w.jsx(e.actions,{isFocused:t,isEmpty:r})})]})},z2e=rc(Os(j4.paragraph.implementation.node.config),{}),{textColor:ypt,backgroundColor:bpt,...B2e}=z4,u3=V4.create({blockSpecs:{paragraph:z2e},styleSpecs:B2e});function V2e(){const e=Qe();if(!e.comments)throw new Error("Comments plugin not found");const t=e.comments,n=Xe(),r=kt(),o=BC({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:u3});return w.jsx(n.Comments.Card,{className:"bn-thread",children:w.jsx(c3,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:i})=>w.jsx(n.Generic.Toolbar.Root,{className:_n("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:w.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:async()=>{await t.createThread({initialComment:{body:o.document}}),t.stopPendingComment()},children:"Save"})})})})}const F2e=e=>{const t=Qe();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=t.comments;k.useEffect(()=>{const u=n.onUpdate(f=>t.setForceSelectionVisible(f.pendingComment));return()=>u()},[n,t]);const r=du(n.onUpdate.bind(n)),o=L2e(r?.pendingComment),{isMounted:i,ref:s,style:a,getFloatingProps:l}=uu(r?.pendingComment||!1,o||null,5e3,{placement:"bottom",middleware:[Gi(10),cu(),As()],onOpenChange:u=>{u||(n.stopPendingComment(),t.focus())},...e.floatingOptions});if(!i||!r)return null;const c=e.floatingComposer||V2e;return w.jsx("div",{ref:s,style:a,...l(),children:w.jsx(c,{})})};var oY={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rz=ie.createContext&&ie.createContext(oY),H2e=["attr","size","title"];function U2e(e,t){if(e==null)return{};var n=G2e(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function G2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DS.apply(this,arguments)}function oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function $S(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oz(Object(n),!0).forEach(function(r){q2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q2e(e,t,n){return t=Z2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z2e(e){var t=W2e(e,"string");return typeof t=="symbol"?t:t+""}function W2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iY(e){return e&&e.map((t,n)=>ie.createElement(t.tag,$S({key:n},t.attr),iY(t.child)))}function nt(e){return t=>ie.createElement(K2e,DS({attr:$S({},e.attr)},t),iY(e.child))}function K2e(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=U2e(e,H2e),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),ie.createElement("svg",DS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:$S($S({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&ie.createElement("title",null,i),e.children)};return rz!==void 0?ie.createElement(rz.Consumer,null,n=>t(n)):t(oY)}function Y2e(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function sY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(e)}function J2e(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(e)}function X2e(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}function d3(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function Q2e(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)}function eTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}function tTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)}function nTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)}function rTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)}function oTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}function iz(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function LS(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function jS(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function zS(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function aY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(e)}function lY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function cY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(e)}function iTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function sTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function sz(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function aTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)}function lTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function uY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function dY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function fY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function hY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function cTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(e)}function uTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(e)}function pY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(e)}function dTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)}function fTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)}function f3(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function hTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)}function pTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)}function mY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function mTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function gTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function gY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(e)}function yTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(e)}function yY(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function bTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function vTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function wTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function xTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function STe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function kTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function CTe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(e)}function ETe(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)}function az(e){return nt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(e)}let eA;async function TTe(){return eA||(eA=(async()=>{const[e,t]=await Promise.all([Ne(()=>import("./module-RjUF93sV.js"),[]),Ne(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in e?e.default:e,r="default"in t?t.default:t;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),eA)}function _Te(e){const t=k.useRef(null),n=k.useRef(null);return n.current&&n.current.update(e),k.useEffect(()=>((async()=>{const{emojiMart:r}=await TTe();n.current=new r.Picker({...e,ref:t})})(),()=>{n.current=null}),[]),ie.createElement("div",{ref:t})}const lz=e=>{const[t,n]=k.useState(!1),r=Xe(),o=ol();return w.jsxs(r.Generic.Popover.Root,{opened:t,children:[w.jsx(r.Generic.Popover.Trigger,{children:w.jsx("div",{onClick:i=>{i.preventDefault(),i.stopPropagation(),n(!t)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.children})}),w.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:w.jsx(_Te,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:i=>{e.onEmojiSelect(i),n(!1)},theme:o?.colorSchemePreference})})]})};function ATe(e,t){return h3(e,[t]).get(t)}function h3(e,t){const n=e.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=k.useCallback(()=>{const a=new Map;for(const l of t){const c=r.getUser(l);c&&a.set(l,c)}return a},[r,t]),i=k.useMemo(()=>({current:o()}),[o]),s=k.useCallback(a=>{const l=r.subscribe(c=>{i.current=o(),a()});return r.loadUsers(t),l},[r,o,t,i]);return k.useSyncExternalStore(s,()=>i.current)}const MTe=e=>{const t=Xe(),n=kt(),r=Qe();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=e.comment.reactions.find(l=>l.emoji===e.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[i,s]=k.useState([]),a=h3(r,i);return w.jsx(t.Generic.Badge.Root,{className:_n("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(e.comment,o.emoji),onClick:()=>e.onReactionSelect(o.emoji),onMouseEnter:()=>s(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},o.emoji)},RTe=({comment:e,thread:t,showResolveButton:n})=>{const r=kt(),o=BC({initialContent:e.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:u3},[e.body]),i=Xe(),[s,a]=k.useState(!1),l=Qe();if(!l.comments)throw new Error("Comments plugin not found");const c=l.comments.threadStore,u=k.useCallback(()=>{a(!0)},[]),f=k.useCallback(()=>{o.replaceBlocks(o.document,e.body),a(!1)},[o,e.body]),p=k.useCallback(async I=>{await c.updateComment({commentId:e.id,comment:{body:o.document},threadId:t.id}),a(!1)},[e,t.id,o,c]),m=k.useCallback(async()=>{await c.deleteComment({commentId:e.id,threadId:t.id})},[e,t.id,c]),y=k.useCallback(async I=>{c.auth.canAddReaction(e,I)?await c.addReaction({threadId:t.id,commentId:e.id,emoji:I}):c.auth.canDeleteReaction(e,I)&&await c.deleteReaction({threadId:t.id,commentId:e.id,emoji:I})},[c,e,t.id]),b=k.useCallback(async()=>{await c.resolveThread({threadId:t.id})},[t.id,c]),x=k.useCallback(async()=>{await c.unresolveThread({threadId:t.id})},[t.id,c]),S=ATe(l,e.userId);if(!e.body)return null;let E;const T=c.auth.canAddReaction(e),A=c.auth.canDeleteComment(e),M=c.auth.canUpdateComment(e),R=n&&(t.resolved?c.auth.canUnresolveThread(t):c.auth.canResolveThread(t));s||(E=w.jsxs(i.Generic.Toolbar.Root,{className:_n("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[T&&w.jsx(lz,{onEmojiSelect:I=>y(I.native),children:w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:w.jsx(az,{size:16})},"add-reaction")}),R&&(t.resolved?w.jsx(i.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:x,children:w.jsx(Y2e,{size:16})},"reopen"):w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:b,children:w.jsx(vTe,{size:16})},"resolve")),(A||M)&&w.jsxs(i.Generic.Menu.Root,{position:"bottom-start",children:[w.jsx(i.Generic.Menu.Trigger,{children:w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:w.jsx(CTe,{size:16})},"more-actions")}),w.jsxs(i.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[M&&w.jsx(i.Generic.Menu.Item,{icon:w.jsx(J2e,{}),onClick:u,children:r.comments.actions.edit_comment},"edit-comment"),A&&w.jsx(i.Generic.Menu.Item,{icon:w.jsx(xTe,{}),onClick:m,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const O=e.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!e.body)throw new Error("soft deletes are not yet supported");return w.jsx(i.Comments.Comment,{authorInfo:S??"loading",timeString:O,edited:e.updatedAt.getTime()!==e.createdAt.getTime(),showActions:"hover",actions:E,className:"bn-thread-comment",children:w.jsx(c3,{autoFocus:s,editor:o,editable:s,actions:e.reactions.length>0||s?({isEmpty:I})=>w.jsxs(w.Fragment,{children:[e.reactions.length>0&&!s&&w.jsxs(i.Generic.Badge.Group,{className:_n("bn-badge-group","bn-comment-reactions"),children:[e.reactions.map(L=>w.jsx(MTe,{comment:e,emoji:L.emoji,onReactionSelect:y},L.emoji)),w.jsx(lz,{onEmojiSelect:L=>y(L.native),children:w.jsx(i.Generic.Badge.Root,{className:_n("bn-badge","bn-comment-add-reaction"),text:"+",icon:w.jsx(az,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),s&&w.jsxs(i.Generic.Toolbar.Root,{variant:"action-toolbar",className:_n("bn-action-toolbar","bn-comment-actions"),children:[w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.save_button_text,variant:"compact",onClick:p,isDisabled:I,children:r.comments.save_button_text}),w.jsx(i.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:r.comments.cancel_button_text,variant:"compact",onClick:f,children:r.comments.cancel_button_text})]})]}):void 0})})},NTe=({thread:e,maxCommentsBeforeCollapse:t})=>{const n=Xe(),r=kt(),o=Qe(),i=h3(o,e.resolvedBy?[e.resolvedBy]:[]),s=e.comments.map((a,l)=>w.jsx(RTe,{thread:e,comment:a,showResolveButton:l===0},a.id));if(e.resolved&&e.resolvedUpdatedAt&&e.resolvedBy){if(!i.get(e.resolvedBy))throw new Error(`User ${e.resolvedBy} resolved thread ${e.id}, but their data could not be found.`);const a=e.comments.findLastIndex(l=>e.resolvedUpdatedAt.getTime()>l.createdAt.getTime())+1;s.splice(a,0,w.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:e.resolvedBy&&i.get(e.resolvedBy)||"loading",timeString:e.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:w.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return t&&s.length>t&&s.splice(1,s.length-2,w.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(e.comments.length-2)},"expand-prompt")),s},bY=({thread:e,selected:t,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:i,tabIndex:s})=>{const a=Xe(),l=kt(),c=Qe().comments;if(!c)throw new Error("Comments plugin not found");const u=BC({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:u3}),f=k.useCallback(async()=>{await c.threadStore.addComment({comment:{body:u.document},threadId:e.id}),u.removeBlocks(u.document)},[c,u,e.id]);return w.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:i,selected:t,tabIndex:s,children:[w.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:w.jsx(NTe,{thread:e,maxCommentsBeforeCollapse:t?void 0:r||5})}),t&&w.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:w.jsx(c3,{autoFocus:!1,editable:!0,editor:u,actions:({isEmpty:p})=>p?null:w.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:_n("bn-action-toolbar","bn-comment-actions"),children:w.jsx(a.Generic.Toolbar.Button,{mainTooltip:l.comments.save_button_text,variant:"compact",isDisabled:p,onClick:f,children:l.comments.save_button_text})})})})]})};function ITe(e){const t=e.comments;if(!t)throw new Error("Comments plugin not found");const n=t.threadStore,r=k.useRef(void 0);r.current||(r.current=n.getThreads());const o=k.useCallback(i=>n.subscribe(s=>{r.current=s,i()}),[n]);return k.useSyncExternalStore(o,()=>r.current)}const OTe=e=>{const t=Qe();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=du(t.comments.onUpdate.bind(t.comments)),{isMounted:r,ref:o,style:i,getFloatingProps:s,setReference:a}=uu(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[Gi(10),cu(),As()],onOpenChange:f=>{var p;f||((p=t.comments)==null||p.selectThread(void 0),t.focus())},...e.floatingOptions}),l=k.useCallback(()=>{var f;if(!(n!=null&&n.selectedThreadId))return;const p=(f=t.domElement)==null?void 0:f.querySelector(`[data-bn-thread-id="${n?.selectedThreadId}"]`);p&&a(p)},[a,t,n?.selectedThreadId]);k.useEffect(()=>{if(n!=null&&n.selectedThreadId)return t.onChange(()=>{l()})},[t,l,n?.selectedThreadId]),k.useLayoutEffect(l,[l]);const c=ITe(t);if(!r||!n||!n.selectedThreadId)return null;const u=e.floatingThread||bY;return w.jsx("div",{ref:o,style:i,...s(),children:w.jsx(u,{thread:c.get(n.selectedThreadId),selected:!0})})},PTe=e=>{const t=Xe(),n=kt(),{block:r}=e,o=Qe(),[i,s]=k.useState(""),a=k.useCallback(u=>{s(u.currentTarget.value)},[]),l=k.useCallback(u=>{u.key==="Enter"&&(u.preventDefault(),o.updateBlock(r,{props:{name:a8(i),url:i}}))},[o,r,i]),c=k.useCallback(()=>{o.updateBlock(r,{props:{name:a8(i),url:i}})},[o,r,i]);return w.jsxs(t.FilePanel.TabPanel,{className:"bn-tab-panel",children:[w.jsx(t.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:i,onChange:a,onKeyDown:l,"data-test":"embed-input"}),w.jsx(t.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},DTe=e=>{var t;const n=Xe(),r=kt(),{block:o,setLoading:i}=e,s=Qe(),[a,l]=k.useState(!1);k.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const c=k.useCallback(p=>{if(p===null)return;async function m(y){if(i(!0),s.uploadFile!==void 0)try{let b=await s.uploadFile(y,o.id);typeof b=="string"&&(b={props:{name:y.name,url:b}}),s.updateBlock(o,b)}catch{l(!0)}finally{i(!1)}}m(p)},[o,s,i]),u=s.schema.blockSchema[o.type],f=u.isFileBlock&&(t=u.fileBlockAccept)!=null&&t.length?u.fileBlockAccept.join(","):"*/*";return w.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[w.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:f,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),a&&w.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},vY=e=>{const t=Xe(),n=kt(),r=Qe(),[o,i]=k.useState(!1),s=e.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:w.jsx(DTe,{block:e.block,setLoading:i})}]:[],{name:n.file_panel.embed.title,tabPanel:w.jsx(PTe,{block:e.block})}],[a,l]=k.useState(e.defaultOpenTab||s[0].name);return w.jsx(t.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:s,loading:o})},$Te=e=>{const t=Qe();if(!t.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=du(t.filePanel.onUpdate.bind(t.filePanel)),{isMounted:r,ref:o,style:i,getFloatingProps:s}=uu(n?.show||!1,n?.referencePos||null,5e3,{placement:"bottom",middleware:[Gi(10),As()],onOpenChange:f=>{f||(t.filePanel.closeMenu(),t.focus())},...e.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...c}=n,u=e.filePanel||vY;return w.jsx("div",{ref:o,style:i,...s(),children:w.jsx(u,{...c})})};function LTe(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Dd(e,t){l3(e,t),a3(e,t)}function p3(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function qi(e){const t=ol();if(e||(e=t?.editor),!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=e,[r,o]=k.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]}),i=k.useCallback(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},[n]);return Dd(i,n),r}const jTe={bold:rTe,italic:aTe,underline:hTe,strike:dTe,code:X2e};function zTe(e,t){return e in t.schema.styleSchema&&t.schema.styleSchema[e].type===e&&t.schema.styleSchema[e].propSchema==="boolean"}const lw=e=>{const t=kt(),n=Xe(),r=Qe(),o=zTe(e.basicTextStyle,r),i=qi(r),[s,a]=k.useState(e.basicTextStyle in r.getActiveStyles());Dd(()=>{o&&a(e.basicTextStyle in r.getActiveStyles())},r);const l=u=>{if(r.focus(),!!o){if(r.schema.styleSchema[u].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[u]:!0})}};if(!k.useMemo(()=>o?!!i.find(u=>u.content!==void 0):!1,[o,i])||!r.isEditable)return null;const c=jTe[e.basicTextStyle];return w.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:()=>l(e.basicTextStyle),isSelected:s,label:t.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:t.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:ms(t.formatting_toolbar[e.basicTextStyle].secondary_tooltip,t.generic.ctrl_shortcut),icon:w.jsx(c,{})})},fN=e=>{const t=e.textColor||"default",n=e.backgroundColor||"default",r=e.size||16,o=k.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return w.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":t,style:o,children:"A"})},cz=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],VC=e=>{const t=Xe(),n=kt();return w.jsxs(w.Fragment,{children:[w.jsx(()=>e.text?w.jsxs(w.Fragment,{children:[w.jsx(t.Generic.Menu.Label,{children:n.color_picker.text_title}),cz.map(r=>w.jsx(t.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.text.setColor(r)},"data-test":"text-color-"+r,icon:w.jsx(fN,{textColor:r,size:e.iconSize}),checked:e.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),w.jsx(()=>e.background?w.jsxs(w.Fragment,{children:[w.jsx(t.Generic.Menu.Label,{children:n.color_picker.background_title}),cz.map(r=>w.jsx(t.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.background.setColor(r)},"data-test":"background-color-"+r,icon:w.jsx(fN,{backgroundColor:r,size:e.iconSize}),checked:e.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function uz(e,t){return`${e}Color`in t.schema.styleSchema&&t.schema.styleSchema[`${e}Color`].type===`${e}Color`&&t.schema.styleSchema[`${e}Color`].propSchema==="string"}const BTe=()=>{const e=Xe(),t=kt(),n=Qe(),r=uz("text",n),o=uz("background",n),i=qi(n),[s,a]=k.useState(r&&n.getActiveStyles().textColor||"default"),[l,c]=k.useState(o&&n.getActiveStyles().backgroundColor||"default");Dd(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&c(n.getActiveStyles().backgroundColor||"default")},n);const u=k.useCallback(p=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");p==="default"?n.removeStyles({textColor:p}):n.addStyles({textColor:p}),setTimeout(()=>{n.focus()})},[n,r]),f=k.useCallback(p=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");p==="default"?n.removeStyles({backgroundColor:p}):n.addStyles({backgroundColor:p}),setTimeout(()=>{n.focus()})},[o,n]);return!k.useMemo(()=>{if(!r&&!o)return!1;for(const p of i)if(p.content!==void 0)return!0;return!1},[o,i,r])||!n.isEditable?null:w.jsxs(e.Generic.Menu.Root,{children:[w.jsx(e.Generic.Menu.Trigger,{children:w.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:t.formatting_toolbar.colors.tooltip,mainTooltip:t.formatting_toolbar.colors.tooltip,icon:w.jsx(fN,{textColor:s,backgroundColor:l,size:20})})}),w.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(VC,{text:r?{color:s,setColor:u}:void 0,background:o?{color:l,setColor:f}:void 0})})]})},dz=e=>{for(const t of wK)if(e.startsWith(t))return e;return`${xK}://${e}`},wY=e=>{const t=Xe(),n=kt(),{url:r,text:o,editLink:i,showTextField:s}=e,[a,l]=k.useState(r),[c,u]=k.useState(o);k.useEffect(()=>{l(r),u(o)},[o,r]);const f=k.useCallback(b=>{b.key==="Enter"&&(b.preventDefault(),i(dz(a),c))},[i,a,c]),p=k.useCallback(b=>l(b.currentTarget.value),[]),m=k.useCallback(b=>u(b.currentTarget.value),[]),y=k.useCallback(()=>i(dz(a),c),[i,a,c]);return w.jsxs(t.Generic.Form.Root,{children:[w.jsx(t.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:w.jsx(uY,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:f,onChange:p,onSubmit:y}),s!==!1&&w.jsx(t.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:w.jsx(f3,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:f,onChange:m,onSubmit:y})]})};function VTe(e){return"link"in e.schema.inlineContentSchema&&e.schema.inlineContentSchema.link==="link"}const FTe=()=>{var e;const t=Qe(),n=Xe(),r=kt(),o=VTe(t),i=qi(t),[s,a]=k.useState(!1),[l,c]=k.useState(t.getSelectedLinkUrl()||""),[u,f]=k.useState(t.getSelectedText());Dd(()=>{f(t.getSelectedText()||""),c(t.getSelectedLinkUrl()||"")},t),k.useEffect(()=>{var y;const b=x=>{(x.ctrlKey||x.metaKey)&&x.key==="k"&&(a(!0),x.preventDefault())};return(y=t.prosemirrorView)==null||y.dom.addEventListener("keydown",b),()=>{var x;(x=t.prosemirrorView)==null||x.dom.removeEventListener("keydown",b)}},[(e=t.prosemirrorView)==null?void 0:e.dom]);const p=k.useCallback(y=>{t.createLink(y),t.focus()},[t]),m=t.transact(y=>WR(y.selection));return!k.useMemo(()=>{if(!o)return!1;for(const y of i)if(y.content===void 0)return!1;return!m},[o,i,m])||!("link"in t.schema.inlineContentSchema)||!t.isEditable?null:w.jsxs(n.Generic.Popover.Root,{opened:s,children:[w.jsx(n.Generic.Popover.Trigger,{children:w.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:ms(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:w.jsx(uY,{}),onClick:()=>a(!0)})}),w.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(wY,{url:l,text:u,editLink:p,showTextField:!1})})]})},HTe=()=>{const e=kt(),t=Xe(),n=Qe(),[r,o]=k.useState(),i=qi(n),s=k.useMemo(()=>{if(i.length!==1)return;const c=i[0];if(Jb(c,n))return o(c.props.caption),c},[n,i]),a=k.useCallback(c=>{s&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(s,{props:{caption:r}}))},[r,n,s]),l=k.useCallback(c=>o(c.currentTarget.value),[]);return!s||Xb(s,n)||!n.isEditable?null:w.jsxs(t.Generic.Popover.Root,{children:[w.jsx(t.Generic.Popover.Trigger,{children:w.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:w.jsx(sz,{}),isSelected:s.props.caption!==""})}),w.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(t.Generic.Form.Root,{children:w.jsx(t.Generic.Form.TextInput,{name:"file-caption",icon:w.jsx(sz,{}),value:r||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},UTe=()=>{const e=kt(),t=Xe(),n=Qe(),r=qi(n),o=k.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(Jb(s,n))return s},[n,r]),i=k.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||Xb(o,n)||!n.isEditable?null:w.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[o.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[o.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:w.jsx(wTe,{}),onClick:i})},GTe=()=>{const e=kt(),t=Xe(),n=Qe(),[r,o]=k.useState(),i=qi(n),s=k.useMemo(()=>{if(i.length!==1)return;const c=i[0];if(Jb(c,n))return o(c.props.name),c},[n,i]),a=k.useCallback(c=>{s&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(s,{props:{name:r}}))},[r,n,s]),l=k.useCallback(c=>o(c.currentTarget.value),[]);return!s||Xb(s,n)||!n.isEditable?null:w.jsxs(t.Generic.Popover.Root,{children:[w.jsx(t.Generic.Popover.Trigger,{children:w.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:w.jsx(iz,{})})}),w.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(t.Generic.Form.Root,{children:w.jsx(t.Generic.Form.TextInput,{name:"file-name",icon:w.jsx(iz,{}),value:r||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[s.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},qTe=()=>{const e=kt(),t=Xe(),n=Qe(),r=qi(n),[o,i]=k.useState(!1);k.useEffect(()=>{i(!1)},[r]);const s=r.length===1?r[0]:void 0;return s===void 0||!Jb(s,n)||!n.isEditable?null:w.jsxs(t.Generic.Popover.Root,{opened:o,position:"bottom",children:[w.jsx(t.Generic.Popover.Trigger,{children:w.jsx(t.FormattingToolbar.Button,{className:"bn-button",onClick:()=>i(!o),isSelected:o,mainTooltip:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:w.jsx(gTe,{})})}),w.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:w.jsx(vY,{block:s})})]})},ZTe=()=>{const e=kt(),t=Xe(),n=Qe(),r=qi(n),[o,i]=k.useState(()=>n.canNestBlock());Dd(()=>{i(n.canNestBlock())},n);const s=k.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!k.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:w.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!o,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:ms(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:w.jsx(sTe,{})})},WTe=()=>{const e=kt(),t=Xe(),n=Qe(),r=qi(n),[o,i]=k.useState(()=>n.canUnnestBlock());Dd(()=>{i(n.canUnnestBlock())},n);const s=k.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!k.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:w.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!o,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:ms(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:w.jsx(iTe,{})})},KTe=e=>[{name:e.slash_menu.paragraph.title,type:"paragraph",icon:f3,isSelected:t=>t.type==="paragraph"},{name:e.slash_menu.heading.title,type:"heading",props:{level:1},icon:LS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===1},{name:e.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:jS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===2},{name:e.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:zS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===3},{name:e.slash_menu.heading_4.title,type:"heading",props:{level:4},icon:aY,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===4},{name:e.slash_menu.heading_5.title,type:"heading",props:{level:5},icon:lY,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===5},{name:e.slash_menu.heading_6.title,type:"heading",props:{level:6},icon:cY,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===6},{name:e.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:LS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===1&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:jS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===2&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:zS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===3&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.quote.title,type:"quote",icon:pY,isSelected:t=>t.type==="quote"},{name:e.slash_menu.toggle_list.title,type:"toggleListItem",icon:gY,isSelected:t=>t.type==="toggleListItem"},{name:e.slash_menu.bullet_list.title,type:"bulletListItem",icon:hY,isSelected:t=>t.type==="bulletListItem"},{name:e.slash_menu.numbered_list.title,type:"numberedListItem",icon:fY,isSelected:t=>t.type==="numberedListItem"},{name:e.slash_menu.check_list.title,type:"checkListItem",icon:dY,isSelected:t=>t.type==="checkListItem"}],YTe=e=>{const t=Xe(),n=kt(),r=Qe(),o=qi(r),[i,s]=k.useState(r.getTextCursorPosition().block),a=k.useMemo(()=>(e.items||KTe(n)).filter(u=>u.type in r.schema.blockSchema),[r,n,e.items]),l=k.useMemo(()=>a.find(u=>u.type===i.type)!==void 0,[i.type,a]),c=k.useMemo(()=>{const u=f=>{r.focus(),r.transact(()=>{for(const p of o)r.updateBlock(p,{type:f.type,props:f.props})})};return a.map(f=>{const p=f.icon;return{text:f.name,icon:w.jsx(p,{size:16}),onClick:()=>u(f),isSelected:f.isSelected(i)}})},[i,a,r,o]);return Dd(()=>{s(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:w.jsx(t.FormattingToolbar.Select,{className:"bn-select",items:c})},JTe=()=>{const e=kt(),t=Xe(),n=Qe(),r=k.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?w.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:w.jsx(sY,{}),onClick:r}):null},XTe=()=>{const e=kt(),t=Xe(),n=Qe(),r=k.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:w.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:w.jsx(sY,{}),onClick:r})};function hN(e,t){try{const n=new URL(e,t);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const QTe=()=>{const e=kt(),t=Xe(),n=Qe(),r=qi(n),o=k.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(Jb(s,n))return s},[n,r]),i=k.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(s=>window.open(hN(s,window.location.href))):window.open(hN(o.props.url,window.location.href)))},[n,o]);return!o||Xb(o,n)?null:w.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[o.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[o.type]||e.formatting_toolbar.file_download.tooltip.file,icon:w.jsx(STe,{}),onClick:i})},e_e=()=>{const e=kt(),t=Xe(),n=Qe(),r=qi(n),o=k.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(aSe(s,n))return s},[n,r]),i=k.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||Xb(o,n)||!n.isEditable?null:w.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:w.jsx(mTe,{}),isSelected:o.props.showPreview,onClick:i})},t_e=()=>{const e=kt(),t=Xe(),n=Qe(),r=qi(n),o=k.useMemo(()=>{var s;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(s=n.tableHandles)==null?void 0:s.getMergeDirection(a)},[n,r]),i=k.useCallback(()=>{var s;(s=n.tableHandles)==null||s.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:w.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:e.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?w.jsx(cTe,{}):w.jsx(uTe,{}),onClick:i})},n_e={left:tTe,center:Q2e,right:nTe,justify:eTe},tA=e=>{const t=Xe(),n=kt(),r=Qe(),o=qi(r),i=k.useMemo(()=>{var l;const c=o[0];if(ZR("textAlignment",c,r))return c.props.textAlignment;if(c.type==="table"){const u=(l=r.tableHandles)==null?void 0:l.getCellSelection();if(!u)return;const f=u.cells.map(({row:m,col:y})=>xd(c.content.rows[m].cells[y]).props.textAlignment),p=f[0];if(f.every(m=>m===p))return p}},[r,o]),s=k.useCallback(l=>{var c;r.focus();for(const u of o)if(Vp("textAlignment",u.type,r))r.updateBlock(u,{props:{textAlignment:l}});else if(u.type==="table"){const f=(c=r.tableHandles)==null?void 0:c.getCellSelection();if(!f)continue;const p=u.content.rows.map(m=>({...m,cells:m.cells.map(y=>xd(y))}));f.cells.forEach(({row:m,col:y})=>{p[m].cells[y].props.textAlignment=l}),r.updateBlock(u,{type:"table",content:{...u.content,type:"tableContent",rows:p}}),r.setTextCursorPosition(u)}},[r,o]);if(!k.useMemo(()=>!!o.find(l=>"textAlignment"in l.props||l.type==="table"&&l.children),[o])||!r.isEditable)return null;const a=n_e[e.textAlignment];return w.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)}`,onClick:()=>s(e.textAlignment),isSelected:i===e.textAlignment,label:n.formatting_toolbar[`align_${e.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${e.textAlignment}`].tooltip,icon:w.jsx(a,{})})},m3=e=>[w.jsx(YTe,{items:e},"blockTypeSelect"),w.jsx(t_e,{},"tableCellMergeButton"),w.jsx(HTe,{},"fileCaptionButton"),w.jsx(qTe,{},"replaceFileButton"),w.jsx(GTe,{},"fileRenameButton"),w.jsx(UTe,{},"fileDeleteButton"),w.jsx(QTe,{},"fileDownloadButton"),w.jsx(e_e,{},"filePreviewButton"),w.jsx(lw,{basicTextStyle:"bold"},"boldStyleButton"),w.jsx(lw,{basicTextStyle:"italic"},"italicStyleButton"),w.jsx(lw,{basicTextStyle:"underline"},"underlineStyleButton"),w.jsx(lw,{basicTextStyle:"strike"},"strikeStyleButton"),w.jsx(tA,{textAlignment:"left"},"textAlignLeftButton"),w.jsx(tA,{textAlignment:"center"},"textAlignCenterButton"),w.jsx(tA,{textAlignment:"right"},"textAlignRightButton"),w.jsx(BTe,{},"colorStyleButton"),w.jsx(ZTe,{},"nestBlockButton"),w.jsx(WTe,{},"unnestBlockButton"),w.jsx(FTe,{},"createLinkButton"),w.jsx(JTe,{},"addCommentButton"),w.jsx(XTe,{},"addTiptapCommentButton")],g3=e=>{const t=Xe();return w.jsx(t.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||m3(e.blockTypeSelectItems)})},fz=e=>{switch(e){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},y3=e=>{const t=k.useRef(null),n=Qe(),[r,o]=k.useState(()=>{const p=n.getTextCursorPosition().block;return"textAlignment"in p.props?fz(p.props.textAlignment):"top-start"});Dd(()=>{const p=n.getTextCursorPosition().block;"textAlignment"in p.props?o(fz(p.props.textAlignment)):o("top-start")},n);const i=du(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:s,ref:a,style:l,getFloatingProps:c}=uu(i?.show||!1,i?.referencePos||null,3e3,{placement:r,middleware:[Gi(10),cu(),As()],onOpenChange:(p,m)=>{p||(n.formattingToolbar.closeMenu(),n.focus())},canDismiss:{enabled:!0,escapeKey:!0,outsidePress:p=>{var m;const y=(m=n._tiptapEditor)==null?void 0:m.view;return!y||!p.target?!1:!LTe(p,y.dom.parentElement)}},...e.floatingOptions}),u=k.useMemo(()=>p3([t,a]),[t,a]);if(!s||!i)return null;if(!i.show&&t.current)return w.jsx("div",{ref:u,style:l,dangerouslySetInnerHTML:{__html:t.current.innerHTML}});const f=e.formattingToolbar||g3;return w.jsx("div",{ref:u,style:l,...c(),children:w.jsx(f,{})})},r_e=e=>{const t=Xe(),n=kt();return w.jsx(t.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:e.deleteLink,icon:w.jsx(lTe,{})})},o_e=e=>{const t=Xe(),n=kt();return w.jsxs(t.Generic.Popover.Root,{children:[w.jsx(t.Generic.Popover.Trigger,{children:w.jsx(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),w.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(wY,{...e})})]})},i_e=e=>{const t=Xe(),n=kt();return w.jsx(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(hN(e.url,window.location.href),"_blank")},icon:w.jsx(kTe,{})})},s_e=e=>{const t=Xe();return e.children?w.jsx(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:e.children}):w.jsxs(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[w.jsx(o_e,{url:e.url,text:e.text,editLink:e.editLink}),w.jsx(i_e,{url:e.url}),w.jsx(r_e,{deleteLink:e.deleteLink})]})},a_e=e=>{const t=Qe(),n={deleteLink:t.linkToolbar.deleteLink,editLink:t.linkToolbar.editLink,startHideTimer:t.linkToolbar.startHideTimer,stopHideTimer:t.linkToolbar.stopHideTimer},r=du(t.linkToolbar.onUpdate.bind(t.linkToolbar)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=uu(r?.show||!1,r?.referencePos||null,4e3,{placement:"top-start",middleware:[Gi(10),As()],onOpenChange:p=>{p||(t.linkToolbar.closeMenu(),t.focus())},...e.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...u}=r,f=e.linkToolbar||s_e;return w.jsx("div",{ref:i,style:s,...a(),children:w.jsx(f,{...u,...n})})};function l_e(e){return nt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}const c_e=e=>{const t=Xe(),n=kt(),r=Qe(),o=k.useCallback(()=>{const i=e.block.content;if(i!==void 0&&Array.isArray(i)&&i.length===0)r.setTextCursorPosition(e.block),r.openSuggestionMenu("/");else{const s=r.insertBlocks([{type:"paragraph"}],e.block,"after")[0];r.setTextCursorPosition(s),r.openSuggestionMenu("/")}},[r,e.block]);return w.jsx(t.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:w.jsx(l_e,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function xY(e){return nt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function u_e(e){return nt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(e)}const d_e=e=>{const t=Xe(),n=Qe();return!Vp("textColor",e.block.type,n)&&!Vp("backgroundColor",e.block.type,n)?null:w.jsxs(t.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(t.Generic.Menu.Trigger,{sub:!0,children:w.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),w.jsx(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(VC,{iconSize:18,text:Vp("textColor",e.block.type,n)&&ZR("textColor",e.block,n)?{color:e.block.props.textColor,setColor:r=>n.updateBlock(e.block,{type:e.block.type,props:{textColor:r}})}:void 0,background:Vp("backgroundColor",e.block.type,n)&&ZR("backgroundColor",e.block,n)?{color:e.block.props.backgroundColor,setColor:r=>n.updateBlock(e.block,{props:{backgroundColor:r}})}:void 0})})]})},f_e=e=>{const t=Xe(),n=Qe();return w.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([e.block]),children:e.children})},h_e=e=>{const t=Xe(),n=Qe();if(e.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!e.block.content.headerRows;return w.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(e.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:e.children})},p_e=e=>{const t=Xe(),n=Qe();if(e.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!e.block.content.headerCols;return w.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(e.block,{type:"table",content:{...e.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:e.children})},m_e=e=>{const t=Xe(),n=kt();return w.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||w.jsxs(w.Fragment,{children:[w.jsx(f_e,{...e,children:n.drag_handle.delete_menuitem}),w.jsx(d_e,{...e,children:n.drag_handle.colors_menuitem}),w.jsx(h_e,{...e,children:n.drag_handle.header_row_menuitem}),w.jsx(p_e,{...e,children:n.drag_handle.header_column_menuitem})]})})},g_e=e=>{const t=Xe(),n=kt(),r=e.dragHandleMenu||m_e;return w.jsxs(t.Generic.Menu.Root,{onOpenChange:o=>{o?e.freezeMenu():e.unfreezeMenu()},position:"left",children:[w.jsx(t.Generic.Menu.Trigger,{children:w.jsx(t.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>e.blockDragStart(o,e.block),onDragEnd:e.blockDragEnd,className:"bn-button",icon:w.jsx(xY,{size:24,"data-test":"dragHandle"})})}),w.jsx(r,{block:e.block,children:e.children})]})},y_e=e=>{const t=Xe(),n=k.useMemo(()=>{const r={"data-block-type":e.block.type};return e.block.type==="heading"&&(r["data-level"]=e.block.props.level.toString()),e.editor.schema.blockSchema[e.block.type].isFileBlock&&(e.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[e.block,e.editor.schema.blockSchema]);return w.jsx(t.SideMenu.Root,{className:"bn-side-menu",...n,children:e.children||w.jsxs(w.Fragment,{children:[w.jsx(c_e,{...e}),w.jsx(g_e,{...e})]})})},b_e=e=>{const t=Qe(),n={blockDragStart:t.sideMenu.blockDragStart,blockDragEnd:t.sideMenu.blockDragEnd,freezeMenu:t.sideMenu.freezeMenu,unfreezeMenu:t.sideMenu.unfreezeMenu},r=du(t.sideMenu.onUpdate.bind(t.sideMenu)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=uu(r?.show||!1,r?.referencePos||null,1e3,{placement:"left-start",...e.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...u}=r,f=e.sideMenu||y_e;return w.jsx("div",{ref:i,style:s,...a(),children:w.jsx(f,{...u,...n,editor:t})})};async function v_e(e,t){return(await mCe(e,t)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function w_e(e){const t=Xe(),n=kt(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s,columns:a}=e,l=o==="loading-initial"||o==="loading"?w.jsx(t.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,c=k.useMemo(()=>{const u=[];for(let f=0;f<r.length;f++){const p=r[f];u.push(w.jsx(t.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:p,id:`bn-grid-suggestion-menu-item-${f}`,isSelected:f===i,onClick:()=>s?.(p)},p.id))}return u},[t,r,s,i]);return w.jsxs(t.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&e.loadingState==="loaded"&&w.jsx(t.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function SY(e,t,n,r=3){const o=k.useRef(0);k.useEffect(()=>{t!==void 0&&(e.length>0?o.current=t.length:t.length-o.current>r&&n())},[n,r,e.length,t])}function kY(e,t){const[n,r]=k.useState([]),[o,i]=k.useState(!1),s=k.useRef(void 0),a=k.useRef(void 0);return k.useEffect(()=>{const l=e;s.current=e,i(!0),t(e).then(c=>{s.current===l&&(r(c),i(!1),a.current=l)})},[e,t]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function x_e(e,t,n,r,o){const[i,s]=k.useState(0),a=r!==void 0&&r>1;return k.useEffect(()=>{var l;const c=u=>(u.key==="ArrowLeft"&&(u.preventDefault(),n.length&&s((i-1+n.length)%n.length)),u.key==="ArrowRight"&&(u.preventDefault(),n.length&&s((i+1+n.length)%n.length)),u.key==="ArrowUp"?(u.preventDefault(),n.length&&s((i-r+n.length)%n.length),!0):u.key==="ArrowDown"?(u.preventDefault(),n.length&&s((i+r)%n.length),!0):u.key==="Enter"&&!u.isComposing?(u.stopPropagation(),u.preventDefault(),n.length&&o?.(n[i]),!0):!1);return(l=e.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var u;(u=e.domElement)==null||u.removeEventListener("keydown",c,!0)}},[e.domElement,n,i,o,r,a]),k.useEffect(()=>{s(0)},[t]),{selectedIndex:n.length===0?void 0:i}}function S_e(e){const t=ol().setContentEditableProps,n=Qe(),{getItems:r,gridSuggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:l,columns:c}=e,u=k.useCallback(b=>{a(),s(),l?.(b)},[l,a,s]),{items:f,usedQuery:p,loadingState:m}=kY(i,r);SY(f,p,a);const{selectedIndex:y}=x_e(n,i,f,c,u);return k.useEffect(()=>(t(b=>({...b,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(b=>({...b,"aria-expanded":!1,"aria-controls":void 0}))}),[t]),k.useEffect(()=>(t(b=>({...b,"aria-activedescendant":y?"bn-suggestion-menu-item-"+y:void 0})),()=>{t(b=>({...b,"aria-activedescendant":void 0}))}),[t,y]),w.jsx(o,{items:f,onItemClick:u,loadingState:m,selectedIndex:y,columns:c})}function k_e(e){const t=Qe(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:i,onItemClick:s,getItems:a,floatingOptions:l}=e,c=k.useMemo(()=>s||(E=>{E.onItemClick(t)}),[t,s]),u=k.useMemo(()=>a||(async E=>await v_e(t,E)),[t,a]),f={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},p=k.useCallback(E=>t.suggestionMenus.onUpdate(n,E),[t.suggestionMenus,n]),m=du(p),{isMounted:y,ref:b,style:x,getFloatingProps:S}=uu(m?.show||!1,m?.referencePos||null,2e3,{placement:"bottom-start",middleware:[Gi(10),As(),Sh({apply({availableHeight:E,elements:T}){Object.assign(T.floating.style,{maxHeight:`${E-10}px`})}})],onOpenChange(E){E||t.suggestionMenus.closeMenu()},...l});return!y||!m||!(m!=null&&m.ignoreQueryLength)&&i&&(m.query.startsWith(" ")||m.query.length<i)?null:w.jsx("div",{ref:b,style:x,...S(),children:w.jsx(S_e,{query:m.query,closeMenu:f.closeMenu,clearQuery:f.clearQuery,getItems:u,columns:o,gridSuggestionMenuComponent:r||w_e,onItemClick:c})})}function C_e(e){const t=Xe(),n=kt(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s}=e,a=o==="loading-initial"||o==="loading"?w.jsx(t.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=k.useMemo(()=>{let c;const u=[];for(let f=0;f<r.length;f++){const p=r[f];p.group!==c&&(c=p.group,u.push(w.jsx(t.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),u.push(w.jsx(t.SuggestionMenu.Item,{className:_n("bn-suggestion-menu-item",p.size==="small"?"bn-suggestion-menu-item-small":""),item:p,id:`bn-suggestion-menu-item-${f}`,isSelected:f===i,onClick:()=>s?.(p)},p.title))}return u},[t,r,s,i]);return w.jsxs(t.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(e.loadingState==="loading"||e.loadingState==="loaded")&&w.jsx(t.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function CY(e,t){const[n,r]=k.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),e.length&&r((n-1+e.length)%e.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),e.length&&r((n+1)%e.length),!0;const i=E_e(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!i?(o.preventDefault(),o.stopPropagation(),e.length&&t?.(e[n]),!0):!1}}}function E_e(e){return e.nativeEvent!==void 0}function T_e(e,t,n,r,o){const{selectedIndex:i,setSelectedIndex:s,handler:a}=CY(n,r);return k.useEffect(()=>{var l;return(l=e.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var c;(c=e.domElement)==null||c.removeEventListener("keydown",a,!0)}},[e.domElement,n,i,r,o,a]),k.useEffect(()=>{s(0)},[t,s]),{selectedIndex:n.length===0?void 0:i}}function __e(e){const t=ol().setContentEditableProps,n=Qe(),{getItems:r,suggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:l}=e,c=k.useCallback(y=>{a(),s(),l?.(y)},[l,a,s]),{items:u,usedQuery:f,loadingState:p}=kY(i,r);SY(u,f,a);const{selectedIndex:m}=T_e(n,i,u,c);return k.useEffect(()=>(t(y=>({...y,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(y=>({...y,"aria-expanded":!1,"aria-controls":void 0}))}),[t]),k.useEffect(()=>(t(y=>({...y,"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})),()=>{t(y=>({...y,"aria-activedescendant":void 0}))}),[t,m]),w.jsx(o,{items:u,onItemClick:c,loadingState:p,selectedIndex:m})}const A_e={heading:LS,heading_2:jS,heading_3:zS,heading_4:aY,heading_5:lY,heading_6:cY,toggle_heading:LS,toggle_heading_2:jS,toggle_heading_3:zS,quote:pY,toggle_list:gY,numbered_list:fY,bullet_list:hY,check_list:dY,paragraph:f3,table:fTe,image:mY,video:pTe,audio:yY,file:d3,emoji:ETe,code_block:oTe};function EY(e){return cSe(e).map(t=>{const n=A_e[t.key];return{...t,icon:w.jsx(n,{size:18})}})}function TY(e){const t=Qe(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:i,getItems:s,floatingOptions:a}=e,l=k.useMemo(()=>i||(S=>{S.onItemClick(t)}),[t,i]),c=k.useMemo(()=>s||(async S=>B4(EY(t),S)),[t,s]),u={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},f=k.useCallback(S=>t.suggestionMenus.onUpdate(n,S),[t.suggestionMenus,n]),p=du(f),{isMounted:m,ref:y,style:b,getFloatingProps:x}=uu(p?.show||!1,p?.referencePos||null,2e3,{placement:"bottom-start",middleware:[Gi(10),As({mainAxis:!0,crossAxis:!1}),cu(),Sh({apply({availableHeight:S,elements:E}){Object.assign(E.floating.style,{maxHeight:`${S-10}px`})}})],onOpenChange(S){S||t.suggestionMenus.closeMenu()},...a});return!m||!p||!(p!=null&&p.ignoreQueryLength)&&o&&(p.query.startsWith(" ")||p.query.length<o)?null:w.jsx("div",{ref:y,style:b,...x(),children:w.jsx(__e,{query:p.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:c,suggestionMenuComponent:r||C_e,onItemClick:l})})}const M_e=(e,t=.3)=>{const n=Math.floor(e)+t,r=Math.ceil(e)-t;return e>=n&&e<=r?Math.round(e):e<n?Math.floor(e):Math.ceil(e)},R_e=e=>{const t=Xe(),n=k.useRef(!1),[r,o]=k.useState(),i=k.useCallback(a=>{e.onMouseDown(),o({originalContent:e.block.content,originalCroppedContent:{rows:e.editor.tableHandles.cropEmptyRowsOrColumns(e.block,e.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:e.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[e]),s=k.useCallback(()=>{n.current||e.editor.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:e.orientation==="addOrRemoveColumns"?e.editor.tableHandles.addRowsOrColumns(e.block,"columns",1):e.editor.tableHandles.addRowsOrColumns(e.block,"rows",1)}})},[e.block,e.orientation,e.editor]);return k.useEffect(()=>{const a=l=>{var c,u;if(!r)throw new Error("editingState is undefined");n.current=!0;const f=(e.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,p=e.orientation==="addOrRemoveColumns"?((c=r.originalCroppedContent.rows[0])==null?void 0:c.cells.length)??0:r.originalCroppedContent.rows.length,m=e.orientation==="addOrRemoveColumns"?((u=r.originalContent.rows[0])==null?void 0:u.cells.length)??0:r.originalContent.rows.length,y=e.orientation==="addOrRemoveColumns"?e.block.content.rows[0].cells.length:e.block.content.rows.length,b=m+M_e(f/(e.orientation==="addOrRemoveColumns"?L4:Gxe),.3);b>=p&&b>0&&b!==y&&(e.editor.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:e.orientation==="addOrRemoveColumns"?e.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",b-p):e.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",b-p)}}),e.block.content&&e.editor.setTextCursorPosition(e.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,e.block,e.editor,e.orientation]),k.useEffect(()=>{const a=e.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,e.onMouseUp]),e.editor.isEditable?w.jsx(t.TableHandle.ExtendButton,{className:_n("bn-extend-button",e.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:s,onMouseDown:i,children:e.children||w.jsx(bTe,{size:18,"data-test":"extendButton"})}):null},hz=e=>{const t=Xe(),n=kt(),r=Qe().tableHandles;return r?w.jsx(t.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(e.index,e.orientation==="row"?{orientation:"row",side:e.side}:{orientation:"column",side:e.side})},children:n.table_handle[`add_${e.side}_menuitem`]}):null},N_e=e=>{const t=Xe(),n=kt(),r=Qe().tableHandles;return r?w.jsx(t.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(e.index,e.orientation)},children:e.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},I_e=e=>{const t=Xe(),n=kt(),r=Qe(),o=r.tableHandles,i=k.useMemo(()=>!o||!e.block?[]:e.orientation==="row"?o.getCellsAtRowHandle(e.block,e.index):o.getCellsAtColumnHandle(e.block,e.index),[e.block,e.index,e.orientation,o]),s=(l,c)=>{const u=e.block.content.rows.map(f=>({...f,cells:f.cells.map(p=>xd(p))}));i.forEach(({row:f,col:p})=>{c==="text"?u[f].cells[p].props.textColor=l:u[f].cells[p].props.backgroundColor=l}),r.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:u}}),r.setTextCursorPosition(e.block)};if(!i||!i[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=xd(i[0].cell);return w.jsxs(t.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(t.Generic.Menu.Trigger,{sub:!0,children:w.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||n.drag_handle.colors_menuitem})}),w.jsx(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(VC,{iconSize:18,text:r.settings.tables.cellTextColor?{color:i.every(({cell:l})=>Sd(l)&&l.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:l=>{s(l,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:i.every(({cell:l})=>Sd(l)&&l.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:l=>s(l,"background")}:void 0})})]})},O_e=e=>{const t=Xe(),n=kt(),r=Qe();if(!r.tableHandles||e.index!==0||e.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!e.block.content.headerRows;return w.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(e.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},P_e=e=>{const t=Xe(),n=kt(),r=Qe();if(!r.tableHandles||e.index!==0||e.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!e.block.content.headerCols;return w.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(e.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},D_e=e=>{const t=Xe();return w.jsx(t.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||w.jsxs(w.Fragment,{children:[w.jsx(N_e,{orientation:e.orientation,block:e.block,index:e.index}),w.jsx(hz,{orientation:e.orientation,block:e.block,index:e.index,side:e.orientation==="row"?"above":"left"}),w.jsx(hz,{orientation:e.orientation,block:e.block,index:e.index,side:e.orientation==="row"?"below":"right"}),w.jsx(O_e,{orientation:e.orientation,block:e.block,index:e.index}),w.jsx(P_e,{orientation:e.orientation,block:e.block,index:e.index}),w.jsx(I_e,{orientation:e.orientation,block:e.block,index:e.index})]})})},$_e=e=>{const t=Xe(),[n,r]=k.useState(!1),o=e.tableHandleMenu||D_e,i=k.useMemo(()=>{const s=e.editor.tableHandles;return!s||!e.block||e.block.type!=="table"?!1:e.orientation==="column"?s.getCellsAtColumnHandle(e.block,e.index).every(({cell:a})=>uh(a)===1):s.getCellsAtRowHandle(e.block,e.index).every(({cell:a})=>Z0(a)===1)},[e.block,e.editor.tableHandles,e.index,e.orientation]);return w.jsxs(t.Generic.Menu.Root,{onOpenChange:s=>{s?(e.freezeHandles(),e.hideOtherSide()):(e.unfreezeHandles(),e.showOtherSide(),e.editor.focus())},position:"right",children:[w.jsx(t.Generic.Menu.Trigger,{children:w.jsx(t.TableHandle.Root,{className:_n("bn-table-handle",n?"bn-table-handle-dragging":"",i?"":"bn-table-handle-not-draggable"),draggable:i,onDragStart:s=>{r(!0),e.dragStart(s)},onDragEnd:()=>{e.dragEnd(),r(!1)},style:e.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:e.children||w.jsx(xY,{size:24,"data-test":"tableHandle"})})}),Ur.createPortal(w.jsx(o,{orientation:e.orientation,block:e.block,index:e.index}),e.menuContainer)]})};function pz(e,t,n){const{refs:r,update:o,context:i,floatingStyles:s}=kh({open:t,placement:e==="addOrRemoveColumns"?"right":"bottom",middleware:[Sh({apply({rects:c,elements:u}){Object.assign(u.floating.style,e==="addOrRemoveColumns"?{height:`${c.reference.height}px`}:{width:`${c.reference.width}px`})}})]}),{isMounted:a,styles:l}=s3(i);return k.useEffect(()=>{o()},[n,o]),k.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[e,n,r]),k.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...s}}),[s,a,r.setFloating,l])}function L_e(e,t,n){const r=pz("addOrRemoveRows",t,n),o=pz("addOrRemoveColumns",e,n);return k.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function j_e(e,t,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(t.x,n.mousePos,t.width,0):new DOMRect(t.x,e.y,t.width,e.height)}function z_e(e,t,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,t.y,0,t.height):new DOMRect(e.x,t.y,e.width,t.height)}function B_e(e){return new DOMRect(e.x,e.y,e.width,0)}function nA(e,t,n,r,o){const{refs:i,update:s,context:a,floatingStyles:l}=kh({open:t,placement:e==="row"?"left":e==="col"?"top":"bottom-end",middleware:[Gi(e==="row"?-10:e==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:c,styles:u}=s3(a);return k.useEffect(()=>{s()},[n,r,s]),k.useEffect(()=>{n===null||r===null||o&&e==="cell"||i.setReference({getBoundingClientRect:()=>(e==="row"?j_e:e==="col"?z_e:B_e)(n,r,o)})},[o,e,n,r,i]),k.useMemo(()=>({isMounted:c,ref:i.setFloating,style:{display:"flex",...u,...l}}),[l,c,i.setFloating,u])}function V_e(e,t,n,r){const o=nA("row",e,t,n,r),i=nA("col",e,t,n,r),s=nA("cell",e,t,n,r);return k.useMemo(()=>({rowHandle:o,colHandle:i,cellHandle:s}),[i,o,s])}const F_e=e=>{var t,n;const r=Xe(),o=kt(),i=Qe(),s=(l,c)=>{const u=e.block.content.rows.map(f=>({...f,cells:f.cells.map(p=>xd(p))}));c==="text"?u[e.rowIndex].cells[e.colIndex].props.textColor=l:u[e.rowIndex].cells[e.colIndex].props.backgroundColor=l,i.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:u}}),i.setTextCursorPosition(e.block)},a=(n=(t=e.block.content.rows[e.rowIndex])==null?void 0:t.cells)==null?void 0:n[e.colIndex];return!a||i.settings.tables.cellTextColor===!1&&i.settings.tables.cellBackgroundColor===!1?null:w.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(r.Generic.Menu.Trigger,{sub:!0,children:w.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||o.drag_handle.colors_menuitem})}),w.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(VC,{iconSize:18,text:i.settings.tables.cellTextColor?{color:Sd(a)?a.props.textColor:"default",setColor:l=>s(l,"text")}:void 0,background:i.settings.tables.cellBackgroundColor?{color:Sd(a)?a.props.backgroundColor:"default",setColor:l=>s(l,"background")}:void 0})})]})},H_e=e=>{var t,n;const r=Xe(),o=kt(),i=Qe(),s=(n=(t=e.block.content.rows[e.rowIndex])==null?void 0:t.cells)==null?void 0:n[e.colIndex];return!s||!Sd(s)||Z0(s)===1&&uh(s)===1||!i.settings.tables.splitCells?null:w.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=i.tableHandles)==null||a.splitCell({row:e.rowIndex,col:e.colIndex})},children:o.table_handle.split_cell_menuitem})},U_e=e=>{const t=Xe();return w.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||w.jsxs(w.Fragment,{children:[w.jsx(H_e,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),w.jsx(F_e,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex})]})})},G_e=e=>{const t=Xe(),n=e.tableCellMenu||U_e;return!e.editor.settings.tables.splitCells&&!e.editor.settings.tables.cellBackgroundColor&&!e.editor.settings.tables.cellTextColor?null:w.jsxs(t.Generic.Menu.Root,{onOpenChange:r=>{r?e.freezeHandles():(e.unfreezeHandles(),e.editor.focus())},position:"right",children:[w.jsx(t.Generic.Menu.Trigger,{children:w.jsx(t.Generic.Menu.Button,{className:"bn-table-cell-handle",children:e.children||w.jsx(u_e,{size:12,"data-test":"tableCellHandle"})})}),Ur.createPortal(w.jsx(n,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),e.menuContainer)]})},q_e=e=>{var t,n;const r=Qe(),[o,i]=k.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const s={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=s,c=k.useCallback(()=>{a(),M(!0),T(!0)},[a]),u=k.useCallback(()=>{l(),M(!1),T(!1)},[l]),f=du(r.tableHandles.onUpdate.bind(r.tableHandles)),p=k.useMemo(()=>{var L,$;return f!=null&&f.draggingState?{draggedCellOrientation:(L=f?.draggingState)==null?void 0:L.draggedCellOrientation,mousePos:($=f?.draggingState)==null?void 0:$.mousePos}:void 0},[f?.draggingState,(t=f?.draggingState)==null?void 0:t.draggedCellOrientation,(n=f?.draggingState)==null?void 0:n.mousePos]),{rowHandle:m,colHandle:y,cellHandle:b}=V_e(f?.show||!1,f?.referencePosCell||null,f?.referencePosTable||null,p),{addOrRemoveColumnsButton:x,addOrRemoveRowsButton:S}=L_e(f?.showAddOrRemoveColumnsButton||!1,f?.showAddOrRemoveRowsButton||!1,f?.referencePosTable||null),[E,T]=k.useState(!1),[A,M]=k.useState(!1);if(!f)return null;const R=e.tableHandle||$_e,O=e.extendButton||R_e,I=e.tableCellHandle||G_e;return w.jsxs(w.Fragment,{children:[w.jsx("div",{ref:i}),w.jsxs(c2e,{root:f.widgetContainer,children:[!E&&o&&m.isMounted&&f.rowIndex!==void 0&&w.jsx("div",{ref:m.ref,style:m.style,children:w.jsx(R,{editor:r,orientation:"row",showOtherSide:()=>M(!1),hideOtherSide:()=>M(!0),index:f.rowIndex,block:f.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),!A&&o&&y.isMounted&&f.colIndex!==void 0&&w.jsx("div",{ref:y.ref,style:y.style,children:w.jsx(R,{editor:r,orientation:"column",showOtherSide:()=>T(!1),hideOtherSide:()=>T(!0),index:f.colIndex,block:f.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),o&&b.isMounted&&f.colIndex!==void 0&&f.rowIndex!==void 0&&w.jsx("div",{ref:b.ref,style:b.style,children:w.jsx(I,{editor:r,block:f.block,rowIndex:f.rowIndex,colIndex:f.colIndex,menuContainer:o,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles})}),w.jsx("div",{ref:S.ref,style:S.style,children:w.jsx(O,{editor:r,orientation:"addOrRemoveRows",block:f.block,onMouseDown:c,onMouseUp:u})}),w.jsx("div",{ref:x.ref,style:x.style,children:w.jsx(O,{editor:r,orientation:"addOrRemoveColumns",block:f.block,onMouseDown:c,onMouseUp:u})})]})]})};function Z_e(e){const t=Qe();if(!t)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return w.jsxs(w.Fragment,{children:[e.formattingToolbar!==!1&&w.jsx(y3,{}),e.linkToolbar!==!1&&w.jsx(a_e,{}),e.slashMenu!==!1&&w.jsx(TY,{triggerCharacter:"/"}),e.emojiPicker!==!1&&w.jsx(k_e,{triggerCharacter:":",columns:10,minQueryLength:2}),e.sideMenu!==!1&&w.jsx(b_e,{}),t.filePanel&&e.filePanel!==!1&&w.jsx($Te,{}),t.tableHandles&&e.tableHandles!==!1&&w.jsx(q_e,{}),t.comments&&e.comments!==!1&&w.jsxs(w.Fragment,{children:[w.jsx(F2e,{}),w.jsx(OTe,{})]})]})}const _Y=()=>{const e=k.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: dark)")},[]),t=k.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: light)")},[]),n=e?.matches,r=t?.matches,[o,i]=k.useState(n?"dark":r?"light":"no-preference");return k.useEffect(()=>{i(n?"dark":r?"light":"no-preference")},[n,r]),k.useEffect(()=>{if(typeof e?.addEventListener=="function"){const s=({matches:l})=>l&&i("dark"),a=({matches:l})=>l&&i("light");return e?.addEventListener("change",s),t?.addEventListener("change",a),()=>{e?.removeEventListener("change",s),t?.removeEventListener("change",a)}}else{const s=()=>i(e.matches?"dark":t.matches?"light":"no-preference");return e?.addEventListener("change",s),t?.addEventListener("change",s),()=>{e?.removeEventListener("change",s),t?.removeEventListener("change",s)}}},[e,t]),o},AY=k.createContext(void 0);function W_e(){return k.useContext(AY)}function K_e(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Ur.createPortal(r.reactElement,r.element,n)},e.forEach(o=>o())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(o=>o())}}}const Y_e=({contentComponent:e})=>{const t=k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return w.jsx(w.Fragment,{children:Object.values(t)})},J_e=k.forwardRef((e,t)=>{const[n,r]=k.useState();return k.useImperativeHandle(t,()=>(o,i)=>{Ur.flushSync(()=>{r({node:o,container:i})}),r(void 0)},[]),w.jsx(w.Fragment,{children:n&&Ur.createPortal(n.node,n.container)})}),mz=()=>{};function X_e(e,t){const{editor:n,className:r,theme:o,children:i,editable:s,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:u,slashMenu:f,emojiPicker:p,sideMenu:m,filePanel:y,tableHandles:b,comments:x,autoFocus:S,renderEditor:E=!n.headless,...T}=e,[A,M]=k.useState(),R=ol(),O=_Y(),I=R?.colorSchemePreference||O,L=o||(I==="dark"?"dark":"light");l3(l||mz,n),a3(a||mz,n),k.useEffect(()=>{n.isEditable=s!==!1},[s,n]);const $=k.useCallback(V=>{n.elementRenderer=V},[n]),B=k.useMemo(()=>({...R,editor:n,setContentEditableProps:M}),[R,n]),H=k.useMemo(()=>({editorProps:{autoFocus:S,contentEditableProps:A},defaultUIProps:{formattingToolbar:c,linkToolbar:u,slashMenu:f,emojiPicker:p,sideMenu:m,filePanel:y,tableHandles:b,comments:x}}),[S,A,c,u,f,p,m,y,b,x]);return w.jsx(nY.Provider,{value:B,children:w.jsxs(AY.Provider,{value:H,children:[w.jsx(J_e,{ref:$}),w.jsx(Q_e,{className:r,renderEditor:E,editorColorScheme:L,ref:t,...T,children:i})]})})}const Q_e=ie.forwardRef(({className:e,renderEditor:t,editorColorScheme:n,children:r,...o},i)=>w.jsx("div",{className:_n("bn-container",n,e),"data-color-scheme":n,...o,ref:i,children:t?w.jsx(tAe,{children:r}):r})),eAe=ie.forwardRef(X_e),tAe=e=>{const t=W_e(),n=Qe(),r=k.useMemo(()=>K_e(),[]),o=k.useCallback(i=>{n.mount(i,r)},[n,r]);return w.jsxs(w.Fragment,{children:[w.jsx(Y_e,{contentComponent:r}),w.jsx(nAe,{...t.editorProps,...e,mount:o}),w.jsx(Z_e,{...t.defaultUIProps}),e.children]})},nAe=e=>{const{autoFocus:t,mount:n,contentEditableProps:r}=e;return w.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":t,ref:n,...r})};function gz(e,t){let n;const r=document.createElement("div");let o;if(t!=null&&t.elementRenderer)t.elementRenderer(e(l=>n=l||void 0),r);else{if(!(t!=null&&t.headless))throw new Error("elementRenderer not available, expected headless editor");o=UU.createRoot(r),Ur.flushSync(()=>{o.render(e(l=>n=l||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n?.setAttribute("data-tmp-find","true");const i=r.cloneNode(!0),s=i.firstElementChild,a=i.querySelector("[data-tmp-find]");return a?.removeAttribute("data-tmp-find"),o?.unmount(),{dom:s,contentDOM:a||void 0}}function rA(e){var t;return w.jsx(R2e,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(e.domAttributes||{}).filter(([n])=>n!=="class")),className:_n("bn-block-content",((t=e.domAttributes)==null?void 0:t.class)||""),"data-content-type":e.blockType,...Object.fromEntries(Object.entries(e.blockProps).filter(([n,r])=>{const o=e.propSchema[n];return!E4.includes(n)&&r!==o.default}).map(([n,r])=>[RS(n),r])),"data-file-block":e.isFileBlock===!0||void 0,children:e.children})}function FC(e,t){const n=Os({name:e.type,content:e.content==="inline"?"inline*":"",group:"blockContent",selectable:e.isSelectable??!0,isolating:!0,addAttributes(){return Zb(e.propSchema)},parseHTML(){return EW(e,t.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Py({dom:o,contentDOM:e.content==="inline"?o:void 0},e.type,{},e.propSchema,e.isFileBlock,r)},addNodeView(){return r=>{const o=$2e(i=>{var s;const a=this.options.editor,l=_C(i.getPos,a,this.editor,e.type),c=((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},u=tY().nodeViewContentRef;if(!u)throw new Error("nodeViewContentRef is not set");const f=t.render;return w.jsx(rA,{blockType:l.type,blockProps:l.props,propSchema:e.propSchema,isFileBlock:e.isFileBlock,domAttributes:c,children:w.jsx(f,{block:l,editor:a,contentRef:p=>{u(p),p&&(p.className=_n("bn-inline-content",p.className))}})})},{className:"bn-react-node-view-renderer"})(r);return e.isSelectable===!1&&CW(o,this.editor),o}}});return T4(e,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=t.render;return gz(l=>w.jsx(rA,{blockType:r.type,blockProps:r.props,propSchema:e.propSchema,domAttributes:s,children:w.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=_n("bn-inline-content",c.className))}})}),o)},toExternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=t.toExternalHTML||t.render;return gz(l=>w.jsx(rA,{blockType:r.type,blockProps:r.props,propSchema:e.propSchema,domAttributes:s,children:w.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=_n("bn-inline-content",c.className))}})}),o)}})}function b3(e){const t=Qe(),[n,r]=k.useState("loading"),[o,i]=k.useState();if(k.useEffect(()=>{let s=!0;return(async()=>{let a="";r("loading");try{a=t.resolveFileUrl?await t.resolveFileUrl(e):e}catch{r("error");return}s&&(r("loaded"),i(a))})(),()=>{s=!1}},[t,e]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const v3=e=>w.jsxs("figure",{children:[e.children,w.jsx("figcaption",{children:e.caption})]});function rAe(e){const t=Qe();k.useEffect(()=>t.onUploadEnd(e),[e,t])}function oAe(e){const t=Qe();k.useEffect(()=>t.onUploadStart(e),[e,t])}function MY(e){const[t,n]=k.useState(!1);return oAe(r=>{r===e&&n(!0)}),rAe(r=>{r===e&&n(!1)}),t}const iAe=e=>{const t=kt(),n=k.useCallback(o=>{o.preventDefault()},[]),r=k.useCallback(()=>{e.editor.transact(o=>o.setMeta(e.editor.filePanel.plugins[0],{block:e.block}))},[e.block,e.editor]);return w.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[w.jsx("div",{className:"bn-add-file-button-icon",children:e.buttonIcon||w.jsx(d3,{size:24})}),w.jsx("div",{className:"bn-add-file-button-text",children:e.buttonText||t.file_blocks.file.add_button_text})]})},sAe=e=>w.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[w.jsx("div",{className:"bn-file-icon",children:w.jsx(d3,{size:24})}),w.jsx("p",{className:"bn-file-name",children:e.block.props.name})]}),w3=e=>{const t=MY(e.block.id);return w.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style,children:t?w.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):e.block.props.url===""?w.jsx(iAe,{...e}):w.jsxs(w.Fragment,{children:[e.block.props.showPreview===!1||!e.children?w.jsx(sAe,{...e}):e.children,e.block.props.caption&&w.jsx("p",{className:"bn-file-caption",children:e.block.props.caption})]})})},HC=e=>w.jsxs("div",{children:[e.children,w.jsx("p",{children:e.caption})]}),aAe=e=>{const t=b3(e.block.props.url);return w.jsx("audio",{className:"bn-audio",src:t.loadingState==="loading"?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},lAe=e=>{if(!e.block.props.url)return w.jsx("p",{children:"Add audio"});const t=e.block.props.showPreview?w.jsx("audio",{src:e.block.props.url}):w.jsx("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?w.jsx(v3,{caption:e.block.props.caption,children:t}):w.jsx(HC,{caption:e.block.props.caption,children:t}):t},cAe=e=>w.jsx(w3,{...e,buttonText:e.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:w.jsx(yY,{size:24}),children:w.jsx(aAe,{...e})});FC(VW,{render:cAe,parse:FW,toExternalHTML:lAe});const uAe=e=>{if(!e.block.props.url)return w.jsx("p",{children:"Add file"});const t=w.jsx("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?w.jsx(HC,{caption:e.block.props.caption,children:t}):t},dAe=e=>w.jsx(w3,{...e});FC(HW,{render:dAe,parse:UW,toExternalHTML:uAe});const RY=e=>{const[t,n]=k.useState(void 0),[r,o]=k.useState(e.block.props.previewWidth),[i,s]=k.useState(!1),a=k.useRef(null);k.useEffect(()=>{const m=b=>{var x,S;let E;e.block.props.textAlignment==="center"?t.handleUsed==="left"?E=t.initialWidth+(t.initialClientX-b.clientX)*2:E=t.initialWidth+(b.clientX-t.initialClientX)*2:t.handleUsed==="left"?E=t.initialWidth+t.initialClientX-b.clientX:E=t.initialWidth+b.clientX-t.initialClientX,o(Math.min(Math.max(E,64),((S=(x=e.editor.domElement)==null?void 0:x.firstElementChild)==null?void 0:S.clientWidth)||Number.MAX_VALUE))},y=()=>{n(void 0),e.editor.updateBlock(e.block,{props:{previewWidth:r}})};return t&&(window.addEventListener("mousemove",m),window.addEventListener("mouseup",y)),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y)}},[e,t,r]);const l=k.useCallback(()=>{e.editor.isEditable&&s(!0)},[e.editor.isEditable]),c=k.useCallback(()=>{s(!1)},[]),u=k.useCallback(m=>{m.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:m.clientX})},[]),f=k.useCallback(m=>{m.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:m.clientX})},[]),p=MY(e.block.id);return w.jsx(w3,{...e,onMouseEnter:l,onMouseLeave:c,style:e.block.props.url&&!p&&e.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:w.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[e.children,(i||t)&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:u}),w.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:f})]})]})})},fAe=e=>{const t=b3(e.block.props.url);return w.jsx("img",{className:"bn-visual-media",src:t.loadingState==="loading"?e.block.props.url:t.downloadUrl,alt:e.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},hAe=e=>{if(!e.block.props.url)return w.jsx("p",{children:"Add image"});const t=e.block.props.showPreview?w.jsx("img",{src:e.block.props.url,alt:e.block.props.name||e.block.props.caption||"BlockNote image",width:e.block.props.previewWidth}):w.jsx("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?w.jsx(v3,{caption:e.block.props.caption,children:t}):w.jsx(HC,{caption:e.block.props.caption,children:t}):t},pAe=e=>w.jsx(RY,{...e,buttonText:e.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:w.jsx(mY,{size:24}),children:w.jsx(fAe,{...e})});FC(WW,{render:pAe,parse:KW,toExternalHTML:hAe});const mAe=e=>{const t=b3(e.block.props.url);return w.jsx("video",{className:"bn-visual-media",src:t.loadingState==="loading"?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},gAe=e=>{if(!e.block.props.url)return w.jsx("p",{children:"Add video"});const t=e.block.props.showPreview?w.jsx("video",{src:e.block.props.url}):w.jsx("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?w.jsx(v3,{caption:e.block.props.caption,children:t}):w.jsx(HC,{caption:e.block.props.caption,children:t}):t},yAe=e=>w.jsx(RY,{...e,buttonText:e.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:w.jsx(yTe,{size:24}),children:w.jsx(mAe,{...e})});FC(QW,{render:yAe,parse:eK,toExternalHTML:gAe});ie.memo(({thread:e,selectedThreadId:t,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const i=k.useCallback(a=>{var l;a.target.closest(".bn-action-toolbar")||(l=n.comments)==null||l.selectThread(e.id)},[n.comments,e.id]),s=k.useCallback(a=>{var l;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const c=a.target instanceof Node?a.target:null,u=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!c||!u||!u.contains(c))&&((l=n.comments)==null||l.selectThread(void 0))},[n.comments]);return w.jsx(bY,{thread:e,selected:e.id===t,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:i,onBlur:s,tabIndex:0})});function NY(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}var Pl=function(){return Pl=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pl.apply(this,arguments)};function IY(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function bAe(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var gx="right-scroll-bar-position",yx="width-before-scroll-bar",vAe="with-scroll-bars-hidden",wAe="--removed-body-scroll-bar-size";function oA(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function xAe(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var SAe=typeof window<"u"?k.useLayoutEffect:k.useEffect,yz=new WeakMap;function kAe(e,t){var n=xAe(null,function(r){return e.forEach(function(o){return oA(o,r)})});return SAe(function(){var r=yz.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(a){i.has(a)||oA(a,null)}),i.forEach(function(a){o.has(a)||oA(a,s)})}yz.set(n,e)},[e]),n}function CAe(e){return e}function EAe(e,t){t===void 0&&(t=CAe);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var l=function(){var u=s;s=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return o}function TAe(e){e===void 0&&(e={});var t=EAe(null);return t.options=Pl({async:!0,ssr:!1},e),t}var OY=function(e){var t=e.sideCar,n=IY(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,Pl({},n))};OY.isSideCarExport=!0;function _Ae(e,t){return e.useMedium(t),OY}var PY=TAe(),iA=function(){},UC=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:iA,onWheelCapture:iA,onTouchMoveCapture:iA}),o=r[0],i=r[1],s=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,f=e.shards,p=e.sideCar,m=e.noRelative,y=e.noIsolation,b=e.inert,x=e.allowPinchZoom,S=e.as,E=S===void 0?"div":S,T=e.gapMode,A=IY(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=p,R=kAe([n,t]),O=Pl(Pl({},A),o);return k.createElement(k.Fragment,null,u&&k.createElement(M,{sideCar:PY,removeScrollBar:c,shards:f,noRelative:m,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:T}),s?k.cloneElement(k.Children.only(a),Pl(Pl({},O),{ref:R})):k.createElement(E,Pl({},O,{className:l,ref:R}),a))});UC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};UC.classNames={fullWidth:yx,zeroRight:gx};var AAe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MAe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=AAe();return t&&e.setAttribute("nonce",t),e}function RAe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function NAe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var IAe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=MAe())&&(RAe(t,n),NAe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},OAe=function(){var e=IAe();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},DY=function(){var e=OAe(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},PAe={left:0,top:0,right:0,gap:0},sA=function(e){return parseInt(e||"",10)||0},DAe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[sA(n),sA(r),sA(o)]},$Ae=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return PAe;var t=DAe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},LAe=DY(),lm="data-scroll-locked",jAe=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(vAe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(lm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gx,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yx,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gx," .").concat(gx,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yx," .").concat(yx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lm,`] {
    `).concat(wAe,": ").concat(a,`px;
  }
`)},bz=function(){var e=parseInt(document.body.getAttribute(lm)||"0",10);return isFinite(e)?e:0},zAe=function(){k.useEffect(function(){return document.body.setAttribute(lm,(bz()+1).toString()),function(){var e=bz()-1;e<=0?document.body.removeAttribute(lm):document.body.setAttribute(lm,e.toString())}},[])},BAe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;zAe();var i=k.useMemo(function(){return $Ae(o)},[o]);return k.createElement(LAe,{styles:jAe(i,!t,o,n?"":"!important")})},pN=!1;if(typeof window<"u")try{var cw=Object.defineProperty({},"passive",{get:function(){return pN=!0,!0}});window.addEventListener("test",cw,cw),window.removeEventListener("test",cw,cw)}catch{pN=!1}var gp=pN?{passive:!1}:!1,VAe=function(e){return e.tagName==="TEXTAREA"},$Y=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!VAe(e)&&n[t]==="visible")},FAe=function(e){return $Y(e,"overflowY")},HAe=function(e){return $Y(e,"overflowX")},vz=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=LY(e,r);if(o){var i=jY(e,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},UAe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},GAe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},LY=function(e,t){return e==="v"?FAe(t):HAe(t)},jY=function(e,t){return e==="v"?UAe(t):GAe(t)},qAe=function(e,t){return e==="h"&&t==="rtl"?-1:1},ZAe=function(e,t,n,r,o){var i=qAe(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,l=t.contains(a),c=!1,u=s>0,f=0,p=0;do{if(!a)break;var m=jY(e,a),y=m[0],b=m[1],x=m[2],S=b-x-i*y;(y||S)&&LY(e,a)&&(f+=S,p+=y);var E=a.parentNode;a=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(f)<1||!u&&Math.abs(p)<1)&&(c=!0),c},uw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},wz=function(e){return[e.deltaX,e.deltaY]},xz=function(e){return e&&"current"in e?e.current:e},WAe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},KAe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},YAe=0,yp=[];function JAe(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),o=k.useState(YAe++)[0],i=k.useState(DY)[0],s=k.useRef(e);k.useEffect(function(){s.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var b=bAe([e.lockRef.current],(e.shards||[]).map(xz),!0).filter(Boolean);return b.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),b.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(b,x){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var S=uw(b),E=n.current,T="deltaX"in b?b.deltaX:E[0]-S[0],A="deltaY"in b?b.deltaY:E[1]-S[1],M,R=b.target,O=Math.abs(T)>Math.abs(A)?"h":"v";if("touches"in b&&O==="h"&&R.type==="range")return!1;var I=vz(O,R);if(!I)return!0;if(I?M=O:(M=O==="v"?"h":"v",I=vz(O,R)),!I)return!1;if(!r.current&&"changedTouches"in b&&(T||A)&&(r.current=M),!M)return!0;var L=r.current||M;return ZAe(L,x,b,L==="h"?T:A)},[]),l=k.useCallback(function(b){var x=b;if(!(!yp.length||yp[yp.length-1]!==i)){var S="deltaY"in x?wz(x):uw(x),E=t.current.filter(function(M){return M.name===x.type&&(M.target===x.target||x.target===M.shadowParent)&&WAe(M.delta,S)})[0];if(E&&E.should){x.cancelable&&x.preventDefault();return}if(!E){var T=(s.current.shards||[]).map(xz).filter(Boolean).filter(function(M){return M.contains(x.target)}),A=T.length>0?a(x,T[0]):!s.current.noIsolation;A&&x.cancelable&&x.preventDefault()}}},[]),c=k.useCallback(function(b,x,S,E){var T={name:b,delta:x,target:S,should:E,shadowParent:XAe(S)};t.current.push(T),setTimeout(function(){t.current=t.current.filter(function(A){return A!==T})},1)},[]),u=k.useCallback(function(b){n.current=uw(b),r.current=void 0},[]),f=k.useCallback(function(b){c(b.type,wz(b),b.target,a(b,e.lockRef.current))},[]),p=k.useCallback(function(b){c(b.type,uw(b),b.target,a(b,e.lockRef.current))},[]);k.useEffect(function(){return yp.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,gp),document.addEventListener("touchmove",l,gp),document.addEventListener("touchstart",u,gp),function(){yp=yp.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,gp),document.removeEventListener("touchmove",l,gp),document.removeEventListener("touchstart",u,gp)}},[]);var m=e.removeScrollBar,y=e.inert;return k.createElement(k.Fragment,null,y?k.createElement(i,{styles:KAe(o)}):null,m?k.createElement(BAe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function XAe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const QAe=_Ae(PY,JAe);var zY=k.forwardRef(function(e,t){return k.createElement(UC,Pl({},e,{ref:t,sideCar:QAe}))});zY.classNames=UC.classNames;function Hl(e){return Object.keys(e)}function aA(e){return e&&typeof e=="object"&&!Array.isArray(e)}function x3(e,t){const n={...e},r=t;return aA(e)&&aA(t)&&Object.keys(t).forEach(o=>{aA(r[o])&&o in e?n[o]=x3(n[o],r[o]):n[o]=r[o]}),n}function eMe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function tMe(e){return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:e.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function nMe(e){const t=tMe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function lA(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function BY(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const o=`${r/16}${e}`;return t?lA(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(i=>n(i)).join(",");if(r.includes(" "))return r.split(" ").map(i=>n(i)).join(" ");if(r.includes(e))return t?lA(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const i=`${Number(o)/16}${e}`;return t?lA(i):i}}return r}return n}const Ee=BY("rem",{shouldScale:!0}),Sz=BY("em");function GC(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function VY(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function tv(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==k.Fragment:!1}function qC(e){const t=k.createContext(null);return[({children:o,value:i})=>w.jsx(t.Provider,{value:i,children:o}),()=>{const o=k.useContext(t);if(o===null)throw new Error(e);return o}]}function S3(e=null){const t=k.createContext(e);return[({children:o,value:i})=>w.jsx(t.Provider,{value:i,children:o}),()=>k.useContext(t)]}function kz(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function BS(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function rMe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function oMe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function iMe(e,t,n){return BS(e,n)===BS(t,n)}function FY({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:i="rtl",orientation:s}){return a=>{n?.(a);const l=Array.from(BS(a.currentTarget,e)?.querySelectorAll(t)||[]).filter(y=>iMe(a.currentTarget,y,e)),c=l.findIndex(y=>a.currentTarget===y),u=oMe(c,l,r),f=rMe(c,l,r),p=i==="rtl"?f:u,m=i==="rtl"?u:f;switch(a.key){case"ArrowRight":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),o&&l[p].click());break}case"ArrowLeft":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[m].focus(),o&&l[m].click());break}case"ArrowUp":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"ArrowDown":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[u].focus(),o&&l[u].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const y=l.length-1;!l[y].disabled&&l[y].focus();break}}}}const sMe={app:100,modal:200,popover:300,overlay:400,max:9999};function nv(e){return sMe[e]}const aMe=()=>{};function lMe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||aMe:n=>{n.key==="Escape"&&(e(n),t.onTrigger?.())}}function $n(e,t="size",n=!0){if(e!==void 0)return VY(e)?n?Ee(e):e:`var(--${t}-${e})`}function rv(e){return $n(e,"mantine-spacing")}function ri(e){return e===void 0?"var(--mantine-radius-default)":$n(e,"mantine-radius")}function Vi(e){return $n(e,"mantine-font-size")}function cMe(e){return $n(e,"mantine-line-height",!1)}function HY(e){if(e)return $n(e,"mantine-shadow",!1)}function $l(e,t){return n=>{e?.(n),t?.(n)}}function uMe(e,t,n){return n?Array.from(BS(n,t)?.querySelectorAll(e)||[]).findIndex(r=>r===n):null}function dMe(){const[e,t]=k.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function fMe(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}const Cz=["mousedown","touchstart"];function hMe(e,t,n){const r=k.useRef(null);return k.useEffect(()=>{const o=i=>{const{target:s}=i??{};if(Array.isArray(n)){const a=s?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(s)&&s.tagName!=="HTML";n.every(c=>!!c&&!i.composedPath().includes(c))&&!a&&e()}else r.current&&!r.current.contains(s)&&e()};return(t||Cz).forEach(i=>document.addEventListener(i,o)),()=>{(t||Cz).forEach(i=>document.removeEventListener(i,o))}},[r,e,n]),r}function pMe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function mMe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function gMe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=k.useState(n?t:mMe(e)),i=k.useRef(null);return k.useEffect(()=>{if("matchMedia"in window)return i.current=window.matchMedia(e),o(i.current.matches),pMe(i.current,s=>o(s.matches))},[e]),r}const ZC=typeof document<"u"?k.useLayoutEffect:k.useEffect;function Ed(e,t){const n=k.useRef(!1);k.useEffect(()=>()=>{n.current=!1},[]),k.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function yMe({opened:e,shouldReturnFocus:t=!0}){const n=k.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return Ed(()=>{let o=-1;const i=s=>{s.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",i),e?n.current=document.activeElement:t&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",i)}},[e,t]),r}const bMe=/input|select|textarea|button|object/,UY="a, input, select, textarea, button, object, [tabindex]";function vMe(e){return e.style.display==="none"}function wMe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(vMe(n))return!1;n=n.parentNode}return!0}function GY(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function mN(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(GY(e));return(bMe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&wMe(e)}function qY(e){const t=GY(e);return(Number.isNaN(t)||t>=0)&&mN(e)}function xMe(e){return Array.from(e.querySelectorAll(UY)).filter(qY)}function SMe(e,t){const n=xMe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],o=e.getRootNode();let i=r===o.activeElement||e===o.activeElement;const s=o.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(i=n.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===s.getAttribute("name")).includes(r)),!i)return;t.preventDefault();const l=n[t.shiftKey?n.length-1:0];l&&l.focus()}function ZY(e=!0){const t=k.useRef(null),n=o=>{let i=o.querySelector("[data-autofocus]");if(!i){const s=Array.from(o.querySelectorAll(UY));i=s.find(qY)||s.find(mN)||null,!i&&mN(o)&&(i=o)}i&&i.focus({preventScroll:!0})},r=k.useCallback(o=>{e&&o!==null&&t.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),t.current=o):t.current=null)},[e]);return k.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const o=i=>{i.key==="Tab"&&t.current&&SMe(t.current,i)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e]),r}const kMe=ie.useId||(()=>{});function CMe(){const e=kMe();return e?`mantine-${e.replace(/:/g,"")}`:""}function ov(e){const t=CMe(),[n,r]=k.useState(t);return ZC(()=>{r(fMe())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function VS(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function iv(...e){const t=new Map;return n=>{if(e.forEach(r=>{const o=VS(r,n);o&&t.set(r,o)}),t.size>0)return()=>{e.forEach(r=>{const o=t.get(r);o?o():VS(r,null)}),t.clear()}}}function fu(...e){return k.useCallback(iv(...e),e)}function Qm({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[o,i]=k.useState(t!==void 0?t:n),s=(a,...l)=>{i(a),r?.(a,...l)};return e!==void 0?[e,r,!0]:[o,s,!1]}function EMe(e,t){return gMe("(prefers-reduced-motion: reduce)",e,t)}function TMe(){const[e,t]=k.useState(!1),n=k.useRef(null),r=k.useCallback(()=>t(!0),[]),o=k.useCallback(()=>t(!1),[]);return k.useEffect(()=>{const i=n.current;if(i)return i.addEventListener("mouseenter",r),i.addEventListener("mouseleave",o),()=>{i?.removeEventListener("mouseenter",r),i?.removeEventListener("mouseleave",o)}},[n.current]),{ref:n,hovered:e}}function _Me(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement?e.currentTarget.contains(e.relatedTarget):!1}function WY({onBlur:e,onFocus:t}={}){const n=k.useRef(null),[r,o]=k.useState(!1),i=k.useRef(!1),s=c=>{o(c),i.current=c},a=c=>{i.current||(s(!0),t?.(c))},l=c=>{i.current&&!_Me(c)&&(s(!1),e?.(c))};return k.useEffect(()=>{const c=n.current;if(c)return c.addEventListener("focusin",a),c.addEventListener("focusout",l),()=>{c?.removeEventListener("focusin",a),c?.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function k3(e){const t=ie.version;return typeof ie.version!="string"||t.startsWith("18.")?e?.ref:e?.props?.ref}function KY(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=KY(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ss(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=KY(e))&&(r&&(r+=" "),r+=t);return r}const AMe={};function MMe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,o])=>{t[r]?t[r]=Ss(t[r],o):t[r]=o})}),t}function WC({theme:e,classNames:t,props:n,stylesCtx:r}){const i=(Array.isArray(t)?t:[t]).map(s=>typeof s=="function"?s(e,n,r):s||AMe);return MMe(i)}function FS({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((i,s)=>typeof s=="function"?{...i,...s(e,n,r)}:{...i,...s},{})}const YY=k.createContext(null);function $d(){const e=k.useContext(YY);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function RMe(){return $d().cssVariablesResolver}function NMe(){return $d().classNamesPrefix}function C3(){return $d().getStyleNonce}function IMe(){return $d().withStaticClasses}function OMe(){return $d().headless}function PMe(){return $d().stylesTransform?.sx}function DMe(){return $d().stylesTransform?.styles}function JY(){return $d().env||"default"}function $Me(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function LMe(e){let t=e.replace("#","");if(t.length===3){const s=t.split("");t=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(t.length===8){const s=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:s}}const n=parseInt(t,16),r=n>>16&255,o=n>>8&255,i=n&255;return{r,g:o,b:i,a:1}}function jMe(e){const[t,n,r,o]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:o===void 0?1:o}}function zMe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,i=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*i-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),u=i-a/2;let f,p,m;return l>=0&&l<1?(f=a,p=c,m=0):l>=1&&l<2?(f=c,p=a,m=0):l>=2&&l<3?(f=0,p=a,m=c):l>=3&&l<4?(f=0,p=c,m=a):l>=4&&l<5?(f=c,p=0,m=a):(f=a,p=0,m=c),{r:Math.round((f+u)*255),g:Math.round((p+u)*255),b:Math.round((m+u)*255),a:s||1}}function E3(e){return $Me(e)?LMe(e):e.startsWith("rgb")?jMe(e):e.startsWith("hsl")?zMe(e):{r:0,g:0,b:0,a:1}}function dw(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:o,a:i}=E3(e),s=1-t,a=l=>Math.round(l*s);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${i})`}function J0(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function cA(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function BMe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function VMe(e){if(e.startsWith("oklch("))return(BMe(e)||0)/100;const{r:t,g:n,b:r}=E3(e),o=t/255,i=n/255,s=r/255,a=cA(o),l=cA(i),c=cA(s);return .2126*a+.7152*l+.0722*c}function yy(e,t=.179){return e.startsWith("var(")?!1:VMe(e)>t}function eg({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:yy(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:yy(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:yy(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,o]=e.split("."),i=o?Number(o):void 0,s=r in t.colors;if(s){const a=i!==void 0?t.colors[r][i]:t.colors[r][J0(t,n||"light")];return{color:r,value:a,shade:i,isThemeColor:s,isLight:yy(a,t.luminanceThreshold),variable:o?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:s,isLight:yy(e,t.luminanceThreshold),shade:i,variable:void 0}}function Yl(e,t){const n=eg({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function gN(e,t){const n={from:e?.from||t.defaultGradient.from,to:e?.to||t.defaultGradient.to,deg:e?.deg??t.defaultGradient.deg??0},r=Yl(n.from,t),o=Yl(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function _l(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const i=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${i}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:o}=E3(e);return`rgba(${n}, ${r}, ${o}, ${t})`}const bp=_l,FMe=({color:e,theme:t,variant:n,gradient:r,autoContrast:o})=>{const i=eg({color:e,theme:t}),s=typeof o=="boolean"?o:t.autoContrast;if(n==="filled"){const a=s&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?i.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ee(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${i.shade===9?8:i.shade+1})`,color:a,border:`${Ee(1)} solid transparent`}:{background:e,hover:dw(e,.1),color:a,border:`${Ee(1)} solid transparent`}}if(n==="light"){if(i.isThemeColor){if(i.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`};const a=t.colors[i.color][i.shade];return{background:_l(a,.1),hover:_l(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ee(1)} solid transparent`}}return{background:_l(e,.1),hover:_l(e,.12),color:e,border:`${Ee(1)} solid transparent`}}if(n==="outline")return i.isThemeColor?i.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ee(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:_l(t.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${Ee(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:_l(e,.05),color:e,border:`${Ee(1)} solid ${e}`};if(n==="subtle"){if(i.isThemeColor){if(i.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`};const a=t.colors[i.color][i.shade];return{background:"transparent",hover:_l(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ee(1)} solid transparent`}}return{background:"transparent",hover:_l(e,.12),color:e,border:`${Ee(1)} solid transparent`}}return n==="transparent"?i.isThemeColor?i.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ee(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ee(1)} solid transparent`}:n==="white"?i.isThemeColor?i.shade===void 0?{background:"var(--mantine-color-white)",hover:dw(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ee(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:dw(t.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${Ee(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:dw(t.white,.01),color:e,border:`${Ee(1)} solid transparent`}:n==="gradient"?{background:gN(r,t),hover:gN(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ee(1)} solid var(--mantine-color-default-border)`}:{}},HMe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Ez="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",T3={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:HMe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:FMe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Ez,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Ez,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ee(34),lineHeight:"1.3"},h2:{fontSize:Ee(26),lineHeight:"1.35"},h3:{fontSize:Ee(22),lineHeight:"1.4"},h4:{fontSize:Ee(18),lineHeight:"1.45"},h5:{fontSize:Ee(16),lineHeight:"1.5"},h6:{fontSize:Ee(14),lineHeight:"1.5"}}},fontSizes:{xs:Ee(12),sm:Ee(14),md:Ee(16),lg:Ee(18),xl:Ee(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ee(2),sm:Ee(4),md:Ee(8),lg:Ee(16),xl:Ee(32)},spacing:{xs:Ee(10),sm:Ee(12),md:Ee(16),lg:Ee(20),xl:Ee(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), 0 ${Ee(1)} ${Ee(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(10)} ${Ee(15)} ${Ee(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ee(7)} ${Ee(7)} ${Ee(-5)}`,md:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(20)} ${Ee(25)} ${Ee(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ee(10)} ${Ee(10)} ${Ee(-5)}`,lg:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(28)} ${Ee(23)} ${Ee(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ee(12)} ${Ee(12)} ${Ee(-7)}`,xl:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(36)} ${Ee(28)} ${Ee(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ee(17)} ${Ee(17)} ${Ee(-7)}`},other:{},components:{}};function Tz(e){return e==="auto"||e==="dark"||e==="light"}function UMe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Tz(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Tz(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const GMe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",_z="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function uA(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Az(e){if(!(e.primaryColor in e.colors))throw new Error(GMe);if(typeof e.primaryShade=="object"&&(!uA(e.primaryShade.dark)||!uA(e.primaryShade.light)))throw new Error(_z);if(typeof e.primaryShade=="number"&&!uA(e.primaryShade))throw new Error(_z)}function qMe(e,t){if(!t)return Az(e),e;const n=x3(e,t);return t.fontFamily&&!t.headings?.fontFamily&&(n.headings.fontFamily=t.fontFamily),Az(n),n}const _3=k.createContext(null),ZMe=()=>k.useContext(_3)||T3;function Ps(){const e=k.useContext(_3);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function XY({theme:e,children:t,inherit:n=!0}){const r=ZMe(),o=k.useMemo(()=>qMe(n?r:T3,e),[e,r,n]);return w.jsx(_3.Provider,{value:o,children:t})}XY.displayName="@mantine/core/MantineThemeProvider";function WMe(){const e=Ps(),t=C3(),n=Hl(e.breakpoints).reduce((r,o)=>{const i=e.breakpoints[o].includes("px"),s=nMe(e.breakpoints[o]),a=i?`${s-.1}px`:Sz(s-.1),l=i?`${s}px`:Sz(s);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:t?.(),dangerouslySetInnerHTML:{__html:n}})}function dA(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function by(e,t){return(Array.isArray(e)?e:[e]).reduce((r,o)=>`${o}{${r}}`,t)}function KMe(e,t){const n=dA(e.variables),r=n?by(t,n):"",o=dA(e.dark),i=dA(e.light),s=o?by(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,o):"",a=i?by(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,i):"";return`${r}${s}${a}`}function QY({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&eg({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Mz(e,t){return QY({color:e.colors[e.primaryColor][J0(e,t)],theme:e,autoContrast:null})}function fw({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:o=!0}){if(!e.colors[t])return{};if(n==="light"){const a=J0(e,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:bp(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:bp(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:bp(e.colors[t][a],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...l}:l}const i=J0(e,"dark"),s={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${i===9?8:i+1})`,[`--mantine-color-${r}-light`]:bp(e.colors[t][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:bp(e.colors[t][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:bp(e.colors[t][Math.max(i-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...s}:s}function YMe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function vp(e,t,n){Hl(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const eJ=e=>{const t=J0(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ee(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Mz(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Mz(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};vp(r.variables,e.breakpoints,"breakpoint"),vp(r.variables,e.spacing,"spacing"),vp(r.variables,e.fontSizes,"font-size"),vp(r.variables,e.lineHeights,"line-height"),vp(r.variables,e.shadows,"shadow"),vp(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((i,s)=>{r.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${e.primaryColor}-${s})`}),Hl(e.colors).forEach(i=>{const s=e.colors[i];if(YMe(s)){Object.assign(r.light,fw({theme:e,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,fw({theme:e,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((a,l)=>{r.variables[`--mantine-color-${i}-${l}`]=a}),Object.assign(r.light,fw({theme:e,color:i,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,fw({theme:e,color:i,colorScheme:"dark",withColorValues:!1}))});const o=e.headings.sizes;return Hl(o).forEach(i=>{r.variables[`--mantine-${i}-font-size`]=o[i].fontSize,r.variables[`--mantine-${i}-line-height`]=o[i].lineHeight,r.variables[`--mantine-${i}-font-weight`]=o[i].fontWeight||e.headings.fontWeight}),r};function JMe({theme:e,generator:t}){const n=eJ(e),r=t?.(e);return r?x3(n,r):n}const fA=eJ(T3);function XMe(e){const t={variables:{},light:{},dark:{}};return Hl(e.variables).forEach(n=>{fA.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Hl(e.light).forEach(n=>{fA.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Hl(e.dark).forEach(n=>{fA.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function QMe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function tJ({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ps(),r=C3(),o=RMe(),i=JMe({theme:n,generator:o}),s=e===":root"&&t,a=s?XMe(i):i,l=KMe(a,e);return l?w.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${l}${s?"":QMe(e)}`}}):null}tJ.displayName="@mantine/CssVariables";function eRe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function wp(e,t){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=e!=="auto"?e:n?"dark":"light";t()?.setAttribute("data-mantine-color-scheme",r)}function tRe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const o=k.useRef(null),[i,s]=k.useState(()=>e.get(t)),a=r||i,l=k.useCallback(u=>{r||(wp(u,n),s(u),e.set(u))},[e.set,a,r]),c=k.useCallback(()=>{s(t),wp(t,n),e.clear()},[e.clear,t]);return k.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),ZC(()=>{wp(e.get(t),n)},[]),k.useEffect(()=>{if(r)return wp(r,n),()=>{};r===void 0&&wp(i,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const u=f=>{i==="auto"&&wp(f.matches?"dark":"light",n)};return o.current?.addEventListener("change",u),()=>o.current?.removeEventListener("change",u)},[i,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function nRe({respectReducedMotion:e,getRootElement:t}){ZC(()=>{e&&t()?.setAttribute("data-respect-reduced-motion","true")},[e])}eRe();function nJ({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:i=!0,withCssVariables:s=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=UMe(),defaultColorScheme:u="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:m,stylesTransform:y,env:b}){const{colorScheme:x,setColorScheme:S,clearColorScheme:E}=tRe({defaultColorScheme:u,forceColorScheme:m,manager:c,getRootElement:f});return nRe({respectReducedMotion:e?.respectReducedMotion||!1,getRootElement:f}),w.jsx(YY.Provider,{value:{colorScheme:x,setColorScheme:S,clearColorScheme:E,getRootElement:f,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:y,env:b},children:w.jsxs(XY,{theme:e,children:[s&&w.jsx(tJ,{cssVariablesSelector:a,deduplicateCssVariables:i}),o&&w.jsx(WMe,{}),t]})})}nJ.displayName="@mantine/core/MantineProvider";function KC({classNames:e,styles:t,props:n,stylesCtx:r}){const o=Ps();return{resolvedClassNames:WC({theme:o,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:FS({theme:o,styles:t,props:n,stylesCtx:r||void 0})}}const rRe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function oRe({theme:e,options:t,unstyled:n}){return Ss(t?.focusable&&!n&&(e.focusClassName||rRe[e.focusRing]),t?.active&&!n&&e.activeClassName)}function iRe({selector:e,stylesCtx:t,options:n,props:r,theme:o}){return WC({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:t})[e]}function Rz({selector:e,stylesCtx:t,theme:n,classNames:r,props:o}){return WC({theme:n,classNames:r,props:o,stylesCtx:t})[e]}function sRe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function aRe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function lRe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(o=>`${t}-${o}-${n}`)}function cRe({themeName:e,theme:t,selector:n,props:r,stylesCtx:o}){return e.map(i=>WC({theme:t,classNames:t.components[i]?.classNames,props:r,stylesCtx:o})?.[n])}function uRe({options:e,classes:t,selector:n,unstyled:r}){return e?.variant&&!r?t[`${n}--${e.variant}`]:void 0}function dRe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:o,classNames:i,classes:s,unstyled:a,className:l,rootSelector:c,props:u,stylesCtx:f,withStaticClasses:p,headless:m,transformedStyles:y}){return Ss(oRe({theme:e,options:t,unstyled:a||m}),cRe({theme:e,themeName:n,selector:r,props:u,stylesCtx:f}),uRe({options:t,classes:s,selector:r,unstyled:a}),Rz({selector:r,stylesCtx:f,theme:e,classNames:i,props:u}),Rz({selector:r,stylesCtx:f,theme:e,classNames:y,props:u}),iRe({selector:r,stylesCtx:f,options:t,props:u,theme:e}),sRe({rootSelector:c,selector:r,className:l}),aRe({selector:r,classes:s,unstyled:a||m}),p&&!m&&lRe({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:t?.withStaticClass}),t?.className)}function fRe({theme:e,themeName:t,props:n,stylesCtx:r,selector:o}){return t.map(i=>FS({theme:e,styles:e.components[i]?.styles,props:n,stylesCtx:r})[o]).reduce((i,s)=>({...i,...s}),{})}function yN({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...yN({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function hRe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...GC(n[r])}}),t),{})}function pRe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:o,selector:i,themeName:s,headless:a}){return hRe([a?{}:t?.(n,r,o),...s.map(l=>n.components?.[l]?.vars?.(n,r,o)),e?.(n,r,o)])?.[i]}function mRe({theme:e,themeName:t,selector:n,options:r,props:o,stylesCtx:i,rootSelector:s,styles:a,style:l,vars:c,varsResolver:u,headless:f,withStylesTransform:p}){return{...!p&&fRe({theme:e,themeName:t,props:o,stylesCtx:i,selector:n}),...!p&&FS({theme:e,styles:a,props:o,stylesCtx:i})[n],...!p&&FS({theme:e,styles:r?.styles,props:r?.props||o,stylesCtx:i})[n],...pRe({theme:e,props:o,stylesCtx:i,vars:c,varsResolver:u,selector:n,themeName:t,headless:f}),...s===n?yN({style:l,theme:e}):null,...yN({style:r?.style,theme:e})}}function gRe({props:e,stylesCtx:t,themeName:n}){const r=Ps(),o=DMe()?.();return{getTransformedStyles:s=>o?[...s.map(l=>o(l,{props:e,theme:r,ctx:t})),...n.map(l=>o(r.components[l]?.styles,{props:e,theme:r,ctx:t}))].filter(Boolean):[],withStylesTransform:!!o}}function Vt({name:e,classes:t,props:n,stylesCtx:r,className:o,style:i,rootSelector:s="root",unstyled:a,classNames:l,styles:c,vars:u,varsResolver:f}){const p=Ps(),m=NMe(),y=IMe(),b=OMe(),x=(Array.isArray(e)?e:[e]).filter(T=>T),{withStylesTransform:S,getTransformedStyles:E}=gRe({props:n,stylesCtx:r,themeName:x});return(T,A)=>({className:dRe({theme:p,options:A,themeName:x,selector:T,classNamesPrefix:m,classNames:l,classes:t,unstyled:a,className:o,rootSelector:s,props:n,stylesCtx:r,withStaticClasses:y,headless:b,transformedStyles:E([A?.styles,c])}),style:mRe({theme:p,themeName:x,selector:T,options:A,props:n,stylesCtx:r,rootSelector:s,styles:c,style:i,vars:u,varsResolver:f,headless:b,withStylesTransform:S})})}function yRe(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ke(e,t,n){const r=Ps(),o=r.components[e]?.defaultProps,i=typeof o=="function"?o(r):o;return{...t,...i,...GC(n)}}function hA(e){return Hl(e).reduce((t,n)=>e[n]!==void 0?`${t}${eMe(n)}:${e[n]};`:t,"").trim()}function bRe({selector:e,styles:t,media:n,container:r}){const o=t?hA(t):"",i=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${hA(a.styles)}}}`):[],s=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${hA(a.styles)}}}`):[];return`${o?`${e}{${o}}`:""}${i.join("")}${s.join("")}`.trim()}function rJ(e){const t=C3();return w.jsx("style",{"data-mantine-styles":"inline",nonce:t?.(),dangerouslySetInnerHTML:{__html:bRe(e)}})}function YC(e){const{m:t,mx:n,my:r,mt:o,mb:i,ml:s,mr:a,me:l,ms:c,p:u,px:f,py:p,pt:m,pb:y,pl:b,pr:x,pe:S,ps:E,bd:T,bg:A,c:M,opacity:R,ff:O,fz:I,fw:L,lts:$,ta:B,lh:H,fs:V,tt:W,td:K,w:z,miw:G,maw:F,h:Z,mih:N,mah:U,bgsz:ee,bgp:D,bgr:ae,bga:oe,pos:he,top:le,left:ge,bottom:Oe,right:je,inset:ye,display:Ie,flex:Le,hiddenFrom:$e,visibleFrom:me,lightHidden:Re,darkHidden:we,sx:Pe,...Ze}=e;return{styleProps:GC({m:t,mx:n,my:r,mt:o,mb:i,ml:s,mr:a,me:l,ms:c,p:u,px:f,py:p,pt:m,pb:y,pl:b,pr:x,pe:S,ps:E,bd:T,bg:A,c:M,opacity:R,ff:O,fz:I,fw:L,lts:$,ta:B,lh:H,fs:V,tt:W,td:K,w:z,miw:G,maw:F,h:Z,mih:N,mah:U,bgsz:ee,bgp:D,bgr:ae,bga:oe,pos:he,top:le,left:ge,bottom:Oe,right:je,inset:ye,display:Ie,flex:Le,hiddenFrom:$e,visibleFrom:me,lightHidden:Re,darkHidden:we,sx:Pe}),rest:Ze}}const vRe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function A3(e,t){const n=eg({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function wRe(e,t){const n=eg({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:A3(e,t)}function xRe(e,t){if(typeof e=="number")return Ee(e);if(typeof e=="string"){const[n,r,...o]=e.split(" ").filter(s=>s.trim()!=="");let i=`${Ee(n)}`;return r&&(i+=` ${r}`),o.length>0&&(i+=` ${A3(o.join(" "),t)}`),i.trim()}return e}const Nz={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function SRe(e){return typeof e=="string"&&e in Nz?Nz[e]:e}const kRe=["h1","h2","h3","h4","h5","h6"];function CRe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&kRe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ee(e):e}function ERe(e){return e}const TRe=["h1","h2","h3","h4","h5","h6"];function _Re(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&TRe.includes(e)?`var(--mantine-${e}-line-height)`:e}function ARe(e){return typeof e=="number"?Ee(e):e}function MRe(e,t){if(typeof e=="number")return Ee(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ee(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const pA={color:A3,textColor:wRe,fontSize:CRe,spacing:MRe,identity:ERe,size:ARe,lineHeight:_Re,fontFamily:SRe,border:xRe};function Iz(e){return e.replace("(min-width: ","").replace("em)","")}function RRe({media:e,...t}){const r=Object.keys(e).sort((o,i)=>Number(Iz(o))-Number(Iz(i))).map(o=>({query:o,styles:e[o]}));return{...t,media:r}}function NRe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function IRe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function ORe(e){return typeof e=="object"&&e!==null?Hl(e).filter(t=>t!=="base"):[]}function PRe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function oJ({styleProps:e,data:t,theme:n}){return RRe(Hl(e).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const i=t[o],s=Array.isArray(i.property)?i.property:[i.property],a=IRe(e[o]);if(!NRe(e[o]))return s.forEach(c=>{r.inlineStyles[c]=pA[i.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=ORe(e[o]);return s.forEach(c=>{a&&(r.styles[c]=pA[i.type](a,n)),l.forEach(u=>{const f=`(min-width: ${n.breakpoints[u]})`;r.media[f]={...r.media[f],[c]:pA[i.type](PRe(e[o],u),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function iJ(){return`__m__-${k.useId().replace(/:/g,"")}`}function sJ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...sJ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function aJ(e){return e.startsWith("data-")?e:`data-${e}`}function DRe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[aJ(n)]=e[n]),t},{})}function lJ(e){return e?typeof e=="string"?{[aJ(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...lJ(n)}),{}):DRe(e):null}function bN(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...bN(r,t)}),{}):typeof e=="function"?e(t):e??{}}function $Re({theme:e,style:t,vars:n,styleProps:r}){const o=bN(t,e),i=bN(n,e);return{...o,...i,...r}}const cJ=k.forwardRef(({component:e,style:t,__vars:n,className:r,variant:o,mod:i,size:s,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:f,__size:p,...m},y)=>{const b=Ps(),x=e||"div",{styleProps:S,rest:E}=YC(m),A=PMe()?.()?.(S.sx),M=iJ(),R=oJ({styleProps:S,theme:b,data:vRe}),O={ref:y,style:$Re({theme:b,style:t,vars:n,styleProps:R.inlineStyles}),className:Ss(r,A,{[M]:R.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":VY(s)?void 0:s||void 0,size:p,...lJ(i),...E};return w.jsxs(w.Fragment,{children:[R.hasResponsiveStyles&&w.jsx(rJ,{selector:`.${M}`,styles:R.styles,media:R.media}),typeof f=="function"?f(O):w.jsx(x,{...O})]})});cJ.displayName="@mantine/core/Box";const ht=cJ;function uJ(e){return e}function LRe(e){const t=e;return n=>{const r=k.forwardRef((o,i)=>w.jsx(t,{...n,...o,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function qt(e){const t=k.forwardRef(e);return t.extend=uJ,t.withProps=n=>{const r=k.forwardRef((o,i)=>w.jsx(t,{...n,...o,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function wi(e){const t=k.forwardRef(e);return t.withProps=n=>{const r=k.forwardRef((o,i)=>w.jsx(t,{...n,...o,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=uJ,t}const jRe=k.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function sv(){return k.useContext(jRe)}var dJ={root:"m_87cf2631"};const zRe={__staticSelector:"UnstyledButton"},Ch=wi((e,t)=>{const n=Ke("UnstyledButton",zRe,e),{className:r,component:o="button",__staticSelector:i,unstyled:s,classNames:a,styles:l,style:c,...u}=n,f=Vt({name:i,props:n,classes:dJ,className:r,style:c,classNames:a,styles:l,unstyled:s});return w.jsx(ht,{...f("root",{focusable:!0}),component:o,ref:t,type:o==="button"?"button":void 0,...u})});Ch.classes=dJ;Ch.displayName="@mantine/core/UnstyledButton";var fJ={root:"m_515a97f8"};const BRe={},M3=qt((e,t)=>{const n=Ke("VisuallyHidden",BRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,...c}=n,u=Vt({name:"VisuallyHidden",classes:fJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a});return w.jsx(ht,{component:"span",ref:t,...u("root"),...c})});M3.classes=fJ;M3.displayName="@mantine/core/VisuallyHidden";var hJ={root:"m_1b7284a3"};const VRe={},FRe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:ri(t),"--paper-shadow":HY(n)}}),R3=wi((e,t)=>{const n=Ke("Paper",VRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,withBorder:l,vars:c,radius:u,shadow:f,variant:p,mod:m,...y}=n,b=Vt({name:"Paper",props:n,classes:hJ,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:c,varsResolver:FRe});return w.jsx(ht,{ref:t,mod:[{"data-with-border":l},m],...b("root"),variant:p,...y})});R3.classes=hJ;R3.displayName="@mantine/core/Paper";function pJ(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return t}function Oz(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Pz(e,t,n,r,o){return e==="center"||r==="center"?{left:t}:e==="end"?{[o==="ltr"?"right":"left"]:n}:e==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const HRe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function URe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:i,arrowY:s,dir:a}){const[l,c="center"]=e.split("-"),u={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[HRe[l]]:r},f=-t/2;return l==="left"?{...u,...Oz(c,s,n,o),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...u,...Oz(c,s,n,o),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...u,...Pz(c,i,n,o,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...u,...Pz(c,i,n,o,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const N3=k.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:i,arrowX:s,arrowY:a,style:l,...c},u)=>{const{dir:f}=sv();return i?w.jsx("div",{...c,ref:u,style:{...l,...URe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:f,arrowX:s,arrowY:a})}}):null});N3.displayName="@mantine/core/FloatingArrow";var mJ={root:"m_9814e45f"};const GRe={zIndex:nv("modal")},qRe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:o,radius:i,zIndex:s})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&_l(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${Ee(o)})`:void 0,"--overlay-radius":i===void 0?void 0:ri(i),"--overlay-z-index":s?.toString()}}),X0=wi((e,t)=>{const n=Ke("Overlay",GRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,fixed:c,center:u,children:f,radius:p,zIndex:m,gradient:y,blur:b,color:x,backgroundOpacity:S,mod:E,...T}=n,A=Vt({name:"Overlay",props:n,classes:mJ,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:qRe});return w.jsx(ht,{ref:t,...A("root"),mod:[{center:u,fixed:c},E],...T,children:f})});X0.classes=mJ;X0.displayName="@mantine/core/Overlay";function mA(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}function ZRe({target:e,reuseTargetNode:t,...n}){if(e)return typeof e=="string"?document.querySelector(e)||mA(n):e;if(t){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=mA(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return mA(n)}const WRe={},gJ=qt((e,t)=>{const{children:n,target:r,reuseTargetNode:o,...i}=Ke("Portal",WRe,e),[s,a]=k.useState(!1),l=k.useRef(null);return ZC(()=>(a(!0),l.current=ZRe({target:r,reuseTargetNode:o,...i}),VS(t,l.current),!r&&!o&&l.current&&document.body.appendChild(l.current),()=>{!r&&!o&&l.current&&document.body.removeChild(l.current)}),[r]),!s||!l.current?null:Ur.createPortal(w.jsx(w.Fragment,{children:n}),l.current)});gJ.displayName="@mantine/core/Portal";const av=qt(({withinPortal:e=!0,children:t,...n},r)=>JY()==="test"||!e?w.jsx(w.Fragment,{children:t}):w.jsx(gJ,{ref:r,...n,children:t}));av.displayName="@mantine/core/OptionalPortal";const vy=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),hw={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...vy("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...vy("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...vy("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...vy("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...vy("top"),common:{transformOrigin:"top right"}}},Dz={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function KRe({transition:e,state:t,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in hw?{transitionProperty:hw[e].transitionProperty,...o,...hw[e].common,...hw[e][Dz[t]]}:{}:{transitionProperty:e.transitionProperty,...o,...e.common,...e[Dz[t]]}}function YRe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:o,onExit:i,onEntered:s,onExited:a,enterDelay:l,exitDelay:c}){const u=Ps(),f=EMe(),p=u.respectReducedMotion?f:!1,[m,y]=k.useState(p?0:e),[b,x]=k.useState(r?"entered":"exited"),S=k.useRef(-1),E=k.useRef(-1),T=k.useRef(-1);function A(){window.clearTimeout(S.current),window.clearTimeout(E.current),cancelAnimationFrame(T.current)}const M=O=>{A();const I=O?o:i,L=O?s:a,$=p?0:O?e:t;y($),$===0?(typeof I=="function"&&I(),typeof L=="function"&&L(),x(O?"entered":"exited")):T.current=requestAnimationFrame(()=>{X4.flushSync(()=>{x(O?"pre-entering":"pre-exiting")}),T.current=requestAnimationFrame(()=>{typeof I=="function"&&I(),x(O?"entering":"exiting"),S.current=window.setTimeout(()=>{typeof L=="function"&&L(),x(O?"entered":"exited")},$)})})},R=O=>{if(A(),typeof(O?l:c)!="number"){M(O);return}E.current=window.setTimeout(()=>{M(O)},O?l:c)};return Ed(()=>{R(r)},[r]),k.useEffect(()=>()=>{A()},[]),{transitionDuration:m,transitionStatus:b,transitionTimingFunction:n||"ease"}}function Eh({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:o,children:i,timingFunction:s="ease",onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:p}){const m=JY(),{transitionDuration:y,transitionStatus:b,transitionTimingFunction:x}=YRe({mounted:o,exitDuration:r,duration:n,timingFunction:s,onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:p});return y===0||m==="test"?o?w.jsx(w.Fragment,{children:i({})}):e?i({display:"none"}):null:b==="exited"?e?i({display:"none"}):null:w.jsx(w.Fragment,{children:i(KRe({transition:t,duration:y,state:b,timingFunction:x}))})}Eh.displayName="@mantine/core/Transition";const[JRe,yJ]=qC("Popover component was not found in the tree");function I3({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const o=ZY(t),i=fu(o,r);return tv(e)?k.cloneElement(e,{[n]:i}):e}function bJ(e){return w.jsx(M3,{tabIndex:-1,"data-autofocus":!0,...e})}I3.displayName="@mantine/core/FocusTrap";bJ.displayName="@mantine/core/FocusTrapInitialFocus";I3.InitialFocus=bJ;var vJ={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const XRe={},JC=qt((e,t)=>{const n=Ke("PopoverDropdown",XRe,e),{className:r,style:o,vars:i,children:s,onKeyDownCapture:a,variant:l,classNames:c,styles:u,...f}=n,p=yJ(),m=yMe({opened:p.opened,shouldReturnFocus:p.returnFocus}),y=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},b=fu(t,p.floating);return p.disabled?null:w.jsx(av,{...p.portalProps,withinPortal:p.withinPortal,children:w.jsx(Eh,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:typeof p.transitionProps?.exitDuration=="number"?p.transitionProps.exitDuration:p.transitionProps?.duration,children:x=>w.jsx(I3,{active:p.trapFocus&&p.opened,innerRef:b,children:w.jsxs(ht,{...y,...f,variant:l,onKeyDownCapture:lMe(()=>{p.onClose?.(),p.onDismiss?.()},{active:p.closeOnEscape,onTrigger:m,onKeyDown:a}),"data-position":p.placement,"data-fixed":p.floatingStrategy==="fixed"||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:c,styles:u,style:[{...x,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:p.width==="target"?void 0:Ee(p.width)},p.resolvedStyles.dropdown,u?.dropdown,o]}),children:[s,w.jsx(N3,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:c,styles:u})})]})})})})});JC.classes=vJ;JC.displayName="@mantine/core/PopoverDropdown";const QRe={refProp:"ref",popupType:"dialog"},O3=qt((e,t)=>{const{children:n,refProp:r,popupType:o,...i}=Ke("PopoverTarget",QRe,e);if(!tv(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=i,a=yJ(),l=fu(a.reference,k3(n),t),c=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return k.cloneElement(n,{...s,...c,...a.targetProps,className:Ss(a.targetProps.className,s.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});O3.displayName="@mantine/core/PopoverTarget";function wJ({opened:e,floating:t,position:n,positionDependencies:r}){const[o,i]=k.useState(0);k.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return zC(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,o,n]),Ed(()=>{t.update()},r),Ed(()=>{i(s=>s+1)},[e])}function eNe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function tNe(e,t){const n=eNe(e.middlewares),r=[Gi(e.offset)];return n.shift&&r.push(cu(typeof n.shift=="boolean"?{limiter:cN(),padding:5}:{limiter:cN(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?As():As(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?r0():r0(n.inline)),r.push(t3({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Sh({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:i,availableHeight:s,...a}){const c=t().refs.floating.current?.style??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:i,availableHeight:s,...a}):Object.assign(c,{maxWidth:`${i}px`,maxHeight:`${s}px`})),e.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),r}function nNe(e){const[t,n]=Qm({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=k.useRef(t),o=()=>{t&&!e.disabled&&n(!1)},i=()=>!e.disabled&&n(!t),s=kh({strategy:e.strategy,placement:e.position,middleware:tNe(e,()=>s)});return wJ({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Ed(()=>{e.onPositionChange?.(s.placement)},[s.placement]),Ed(()=>{t!==r.current&&(t?e.onOpen?.():e.onClose?.()),r.current=t},[t,e.onClose,e.onOpen]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:o,onToggle:i}}const rNe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:nv("popover"),__staticSelector:"Popover",width:"max-content"},oNe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:ri(t),"--popover-shadow":HY(n)}});function Ld(e){const t=Ke("Popover",rNe,e),{children:n,position:r,offset:o,onPositionChange:i,positionDependencies:s,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:u,width:f,middlewares:p,withArrow:m,arrowSize:y,arrowOffset:b,arrowRadius:x,arrowPosition:S,unstyled:E,classNames:T,styles:A,closeOnClickOutside:M,withinPortal:R,portalProps:O,closeOnEscape:I,clickOutsideEvents:L,trapFocus:$,onClose:B,onDismiss:H,onOpen:V,onChange:W,zIndex:K,radius:z,shadow:G,id:F,defaultOpened:Z,__staticSelector:N,withRoles:U,disabled:ee,returnFocus:D,variant:ae,keepMounted:oe,vars:he,floatingStrategy:le,withOverlay:ge,overlayProps:Oe,...je}=t,ye=Vt({name:N,props:t,classes:vJ,classNames:T,styles:A,unstyled:E,rootSelector:"dropdown",vars:he,varsResolver:oNe}),{resolvedStyles:Ie}=KC({classNames:T,styles:A,props:t}),Le=k.useRef(null),[$e,me]=k.useState(null),[Re,we]=k.useState(null),{dir:Pe}=sv(),Ze=ov(F),rt=nNe({middlewares:p,width:f,position:pJ(Pe,r),offset:typeof o=="number"?o+(m?y/2:0):o,arrowRef:Le,arrowOffset:b,onPositionChange:i,positionDependencies:s,opened:a,defaultOpened:Z,onChange:W,onOpen:V,onClose:B,onDismiss:H,strategy:le,disabled:ee});hMe(()=>{M&&(rt.onClose(),H?.())},L,[$e,Re]);const Bn=k.useCallback(Ft=>{me(Ft),rt.floating.refs.setReference(Ft)},[rt.floating.refs.setReference]),So=k.useCallback(Ft=>{we(Ft),rt.floating.refs.setFloating(Ft)},[rt.floating.refs.setFloating]),Sr=k.useCallback(()=>{l?.onExited?.(),c?.()},[l?.onExited,c]),Ir=k.useCallback(()=>{l?.onEntered?.(),u?.()},[l?.onEntered,u]);return w.jsxs(JRe,{value:{returnFocus:D,disabled:ee,controlled:rt.controlled,reference:Bn,floating:So,x:rt.floating.x,y:rt.floating.y,arrowX:rt.floating?.middlewareData?.arrow?.x,arrowY:rt.floating?.middlewareData?.arrow?.y,opened:rt.opened,arrowRef:Le,transitionProps:{...l,onExited:Sr,onEntered:Ir},width:f,withArrow:m,arrowSize:y,arrowOffset:b,arrowRadius:x,arrowPosition:S,placement:rt.floating.placement,trapFocus:$,withinPortal:R,portalProps:O,zIndex:K,radius:z,shadow:G,closeOnEscape:I,onDismiss:H,onClose:rt.onClose,onToggle:rt.onToggle,getTargetId:()=>`${Ze}-target`,getDropdownId:()=>`${Ze}-dropdown`,withRoles:U,targetProps:je,__staticSelector:N,classNames:T,styles:A,unstyled:E,variant:ae,keepMounted:oe,getStyles:ye,resolvedStyles:Ie,floatingStrategy:le},children:[n,ge&&w.jsx(Eh,{transition:"fade",mounted:rt.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:Ft=>w.jsx(av,{withinPortal:R,children:w.jsx(X0,{...Oe,...ye("overlay",{className:Oe?.className,style:[Ft,Oe?.style]})})})})]})}Ld.Target=O3;Ld.Dropdown=JC;Ld.displayName="@mantine/core/Popover";Ld.extend=e=>e;var Ua={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const xJ=k.forwardRef(({className:e,...t},n)=>w.jsxs(ht,{component:"span",className:Ss(Ua.barsLoader,e),...t,ref:n,children:[w.jsx("span",{className:Ua.bar}),w.jsx("span",{className:Ua.bar}),w.jsx("span",{className:Ua.bar})]}));xJ.displayName="@mantine/core/Bars";const SJ=k.forwardRef(({className:e,...t},n)=>w.jsxs(ht,{component:"span",className:Ss(Ua.dotsLoader,e),...t,ref:n,children:[w.jsx("span",{className:Ua.dot}),w.jsx("span",{className:Ua.dot}),w.jsx("span",{className:Ua.dot})]}));SJ.displayName="@mantine/core/Dots";const kJ=k.forwardRef(({className:e,...t},n)=>w.jsx(ht,{component:"span",className:Ss(Ua.ovalLoader,e),...t,ref:n}));kJ.displayName="@mantine/core/Oval";const CJ={bars:xJ,oval:kJ,dots:SJ},iNe={loaders:CJ,type:"oval"},sNe=(e,{size:t,color:n})=>({root:{"--loader-size":$n(t,"loader-size"),"--loader-color":n?Yl(n,e):void 0}}),jd=qt((e,t)=>{const n=Ke("Loader",iNe,e),{size:r,color:o,type:i,vars:s,className:a,style:l,classNames:c,styles:u,unstyled:f,loaders:p,variant:m,children:y,...b}=n,x=Vt({name:"Loader",props:n,classes:Ua,className:a,style:l,classNames:c,styles:u,unstyled:f,vars:s,varsResolver:sNe});return y?w.jsx(ht,{...x("root"),ref:t,...b,children:y}):w.jsx(ht,{...x("root"),ref:t,component:p[i],variant:m,size:r,...b})});jd.defaultLoaders=CJ;jd.classes=Ua;jd.displayName="@mantine/core/Loader";var tg={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const $z={orientation:"horizontal"},aNe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ee(t)}}),P3=qt((e,t)=>{const n=Ke("ActionIconGroup",$z,e),{className:r,style:o,classNames:i,styles:s,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:p,...m}=Ke("ActionIconGroup",$z,e),y=Vt({name:"ActionIconGroup",props:n,classes:tg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:c,varsResolver:aNe,rootSelector:"group"});return w.jsx(ht,{...y("group"),ref:t,variant:f,mod:[{"data-orientation":l},p],role:"group",...m})});P3.classes=tg;P3.displayName="@mantine/core/ActionIconGroup";const Lz={},lNe=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":$n(s,"section-height"),"--section-padding-x":$n(s,"section-padding-x"),"--section-fz":Vi(s),"--section-radius":t===void 0?void 0:ri(t),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},D3=qt((e,t)=>{const n=Ke("ActionIconGroupSection",Lz,e),{className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,variant:c,gradient:u,radius:f,autoContrast:p,...m}=Ke("ActionIconGroupSection",Lz,e),y=Vt({name:"ActionIconGroupSection",props:n,classes:tg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,varsResolver:lNe,rootSelector:"groupSection"});return w.jsx(ht,{...y("groupSection"),ref:t,variant:c,...m})});D3.classes=tg;D3.displayName="@mantine/core/ActionIconGroupSection";const cNe={},uNe=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:s})=>{const a=e.variantColorResolver({color:i||e.primaryColor,theme:e,gradient:o,variant:r||"filled",autoContrast:s});return{root:{"--ai-size":$n(t,"ai-size"),"--ai-radius":n===void 0?void 0:ri(n),"--ai-bg":i||r?a.background:void 0,"--ai-hover":i||r?a.hover:void 0,"--ai-hover-color":i||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":i||r?a.border:void 0}}},Th=wi((e,t)=>{const n=Ke("ActionIcon",cNe,e),{className:r,unstyled:o,variant:i,classNames:s,styles:a,style:l,loading:c,loaderProps:u,size:f,color:p,radius:m,__staticSelector:y,gradient:b,vars:x,children:S,disabled:E,"data-disabled":T,autoContrast:A,mod:M,...R}=n,O=Vt({name:["ActionIcon",y],props:n,className:r,style:l,classes:tg,classNames:s,styles:a,unstyled:o,vars:x,varsResolver:uNe});return w.jsxs(Ch,{...O("root",{active:!E&&!c&&!T}),...R,unstyled:o,variant:i,size:f,disabled:E||c,ref:t,mod:[{loading:c,disabled:E||T},M],children:[w.jsx(Eh,{mounted:!!c,transition:"slide-down",duration:150,children:I=>w.jsx(ht,{component:"span",...O("loader",{style:I}),"aria-hidden":!0,children:w.jsx(jd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),w.jsx(ht,{component:"span",mod:{loading:c},...O("icon"),children:S})]})});Th.classes=tg;Th.displayName="@mantine/core/ActionIcon";Th.Group=P3;Th.GroupSection=D3;const EJ=k.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));EJ.displayName="@mantine/core/CloseIcon";var TJ={root:"m_86a44da5","root--subtle":"m_220c80f2"};const dNe={variant:"subtle"},fNe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":$n(t,"cb-size"),"--cb-radius":n===void 0?void 0:ri(n),"--cb-icon-size":Ee(r)}}),XC=wi((e,t)=>{const n=Ke("CloseButton",dNe,e),{iconSize:r,children:o,vars:i,radius:s,className:a,classNames:l,style:c,styles:u,unstyled:f,"data-disabled":p,disabled:m,variant:y,icon:b,mod:x,__staticSelector:S,...E}=n,T=Vt({name:S||"CloseButton",props:n,className:a,style:c,classes:TJ,classNames:l,styles:u,unstyled:f,vars:i,varsResolver:fNe});return w.jsxs(Ch,{ref:t,...E,unstyled:f,variant:y,disabled:m,mod:[{disabled:m||p},x],...T("root",{variant:y,active:!m&&!p}),children:[b||w.jsx(EJ,{}),o]})});XC.classes=TJ;XC.displayName="@mantine/core/CloseButton";function hNe(e){return k.Children.toArray(e).filter(Boolean)}var _J={root:"m_4081bf90"};const pNe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},mNe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:o,justify:i,wrap:s},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":rv(r),"--group-align":o,"--group-justify":i,"--group-wrap":s}}),Do=qt((e,t)=>{const n=Ke("Group",pNe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,children:l,gap:c,align:u,justify:f,wrap:p,grow:m,preventGrowOverflow:y,vars:b,variant:x,__size:S,mod:E,...T}=n,A=hNe(l),M=A.length,R=rv(c??"md"),I={childWidth:`calc(${100/M}% - (${R} - ${R} / ${M}))`},L=Vt({name:"Group",props:n,stylesCtx:I,className:o,style:i,classes:_J,classNames:r,styles:s,unstyled:a,vars:b,varsResolver:mNe});return w.jsx(ht,{...L("root"),ref:t,variant:x,mod:[{grow:m},E],size:S,...T,children:A})});Do.classes=_J;Do.displayName="@mantine/core/Group";const[gNe,yNe]=S3({size:"sm"}),bNe={},AJ=qt((e,t)=>{const n=Ke("InputClearButton",bNe,e),{size:r,variant:o,vars:i,classNames:s,styles:a,...l}=n,c=yNe(),{resolvedClassNames:u,resolvedStyles:f}=KC({classNames:s,styles:a,props:n});return w.jsx(XC,{variant:o||"transparent",ref:t,size:r||c?.size||"sm",classNames:u,styles:f,__staticSelector:"InputClearButton",...l})});AJ.displayName="@mantine/core/InputClearButton";const[vNe,QC]=S3({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var ba={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const jz={},wNe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Vi(t)} - ${Ee(2)})`}}),eE=qt((e,t)=>{const n=Ke("InputDescription",jz,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:p,...m}=Ke("InputDescription",jz,n),y=QC(),b=Vt({name:["InputWrapper",u],props:n,classes:ba,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"description",vars:l,varsResolver:wNe}),x=f&&y?.getStyles||b;return w.jsx(ht,{component:"p",ref:t,variant:p,size:c,...x("description",y?.getStyles?{className:o,style:i}:void 0),...m})});eE.classes=ba;eE.displayName="@mantine/core/InputDescription";const xNe={},SNe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Vi(t)} - ${Ee(2)})`}}),tE=qt((e,t)=>{const n=Ke("InputError",xNe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:p,...m}=n,y=Vt({name:["InputWrapper",u],props:n,classes:ba,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"error",vars:l,varsResolver:SNe}),b=QC(),x=f&&b?.getStyles||y;return w.jsx(ht,{component:"p",ref:t,variant:p,size:c,...x("error",b?.getStyles?{className:o,style:i}:void 0),...m})});tE.classes=ba;tE.displayName="@mantine/core/InputError";const zz={labelElement:"label"},kNe=(e,{size:t})=>({label:{"--input-label-size":Vi(t),"--input-asterisk-color":void 0}}),nE=qt((e,t)=>{const n=Ke("InputLabel",zz,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,labelElement:c,size:u,required:f,htmlFor:p,onMouseDown:m,children:y,__staticSelector:b,variant:x,mod:S,...E}=Ke("InputLabel",zz,n),T=Vt({name:["InputWrapper",b],props:n,classes:ba,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"label",vars:l,varsResolver:kNe}),A=QC(),M=A?.getStyles||T;return w.jsxs(ht,{...M("label",A?.getStyles?{className:o,style:i}:void 0),component:c,variant:x,size:u,ref:t,htmlFor:c==="label"?p:void 0,mod:[{required:f},S],onMouseDown:R=>{m?.(R),!R.defaultPrevented&&R.detail>1&&R.preventDefault()},...E,children:[y,f&&w.jsx("span",{...M("required"),"aria-hidden":!0,children:" *"})]})});nE.classes=ba;nE.displayName="@mantine/core/InputLabel";const Bz={},$3=qt((e,t)=>{const n=Ke("InputPlaceholder",Bz,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,__staticSelector:c,variant:u,error:f,mod:p,...m}=Ke("InputPlaceholder",Bz,n),y=Vt({name:["InputPlaceholder",c],props:n,classes:ba,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"placeholder"});return w.jsx(ht,{...y("placeholder"),mod:[{error:!!f},p],component:"span",variant:u,ref:t,...m})});$3.classes=ba;$3.displayName="@mantine/core/InputPlaceholder";function CNe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),o=e.slice(0,r),i=e.slice(r+1),s=t&&o.includes("description")||n&&o.includes("error");return{offsetBottom:t&&i.includes("description")||n&&i.includes("error"),offsetTop:s}}const ENe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},TNe=(e,{size:t})=>({label:{"--input-label-size":Vi(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Vi(t)} - ${Ee(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Vi(t)} - ${Ee(2)})`}}),L3=qt((e,t)=>{const n=Ke("InputWrapper",ENe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,variant:u,__staticSelector:f,inputContainer:p,inputWrapperOrder:m,label:y,error:b,description:x,labelProps:S,descriptionProps:E,errorProps:T,labelElement:A,children:M,withAsterisk:R,id:O,required:I,__stylesApiProps:L,mod:$,...B}=n,H=Vt({name:["InputWrapper",f],props:L||n,classes:ba,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:TNe}),V={size:c,variant:u,__staticSelector:f},W=ov(O),K=typeof R=="boolean"?R:I,z=T?.id||`${W}-error`,G=E?.id||`${W}-description`,F=W,Z=!!b&&typeof b!="boolean",N=!!x,U=`${Z?z:""} ${N?G:""}`,ee=U.trim().length>0?U.trim():void 0,D=S?.id||`${W}-label`,ae=y&&w.jsx(nE,{labelElement:A,id:D,htmlFor:F,required:K,...V,...S,children:y},"label"),oe=N&&w.jsx(eE,{...E,...V,size:E?.size||V.size,id:E?.id||G,children:x},"description"),he=w.jsx(k.Fragment,{children:p(M)},"input"),le=Z&&k.createElement(tE,{...T,...V,size:T?.size||V.size,key:"error",id:T?.id||z},b),ge=m.map(Oe=>{switch(Oe){case"label":return ae;case"input":return he;case"description":return oe;case"error":return le;default:return null}});return w.jsx(vNe,{value:{getStyles:H,describedBy:ee,inputId:F,labelId:D,...CNe(m,{hasDescription:N,hasError:Z})},children:w.jsx(ht,{ref:t,variant:u,size:c,mod:[{error:!!b},$],...H("root"),...B,children:ge})})});L3.classes=ba;L3.displayName="@mantine/core/InputWrapper";const _Ne={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},ANe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":$n(t.size,"input-height"),"--input-fz":Vi(t.size),"--input-radius":t.radius===void 0?void 0:ri(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ee(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ee(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?$n(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Ms=wi((e,t)=>{const n=Ke("Input",_Ne,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:u,size:f,wrapperProps:p,error:m,disabled:y,leftSection:b,leftSectionProps:x,leftSectionWidth:S,rightSection:E,rightSectionProps:T,rightSectionWidth:A,rightSectionPointerEvents:M,leftSectionPointerEvents:R,variant:O,vars:I,pointer:L,multiline:$,radius:B,id:H,withAria:V,withErrorStyles:W,mod:K,inputSize:z,__clearSection:G,__clearable:F,__defaultRightSection:Z,...N}=n,{styleProps:U,rest:ee}=YC(N),D=QC(),ae={offsetBottom:D?.offsetBottom,offsetTop:D?.offsetTop},oe=Vt({name:["Input",c],props:u||n,classes:ba,className:o,style:i,classNames:r,styles:s,unstyled:a,stylesCtx:ae,rootSelector:"wrapper",vars:I,varsResolver:ANe}),he=V?{required:l,disabled:y,"aria-invalid":!!m,"aria-describedby":D?.describedBy,id:D?.inputId||H}:{},le=E||F&&G||Z;return w.jsx(gNe,{value:{size:f||"sm"},children:w.jsxs(ht,{...oe("wrapper"),...U,...p,mod:[{error:!!m&&W,pointer:L,disabled:y,multiline:$,"data-with-right-section":!!le,"data-with-left-section":!!b},K],variant:O,size:f,children:[b&&w.jsx("div",{...x,"data-position":"left",...oe("section",{className:x?.className,style:x?.style}),children:b}),w.jsx(ht,{component:"input",...ee,...he,ref:t,required:l,mod:{disabled:y,error:!!m&&W},variant:O,__size:z,...oe("input")}),le&&w.jsx("div",{...T,"data-position":"right",...oe("section",{className:T?.className,style:T?.style}),children:le})]})})});Ms.classes=ba;Ms.Wrapper=L3;Ms.Label=nE;Ms.Error=tE;Ms.Description=eE;Ms.Placeholder=$3;Ms.ClearButton=AJ;Ms.displayName="@mantine/core/Input";function MNe(e,t,n){const r=Ke(e,t,n),{label:o,description:i,error:s,required:a,classNames:l,styles:c,className:u,unstyled:f,__staticSelector:p,__stylesApiProps:m,errorProps:y,labelProps:b,descriptionProps:x,wrapperProps:S,id:E,size:T,style:A,inputContainer:M,inputWrapperOrder:R,withAsterisk:O,variant:I,vars:L,mod:$,...B}=r,{styleProps:H,rest:V}=YC(B),W={label:o,description:i,error:s,required:a,classNames:l,className:u,__staticSelector:p,__stylesApiProps:m||r,errorProps:y,labelProps:b,descriptionProps:x,unstyled:f,styles:c,size:T,style:A,inputContainer:M,inputWrapperOrder:R,withAsterisk:O,variant:I,id:E,mod:$,...S};return{...V,classNames:l,styles:c,unstyled:f,wrapperProps:{...W,...H},inputProps:{required:a,classNames:l,styles:c,unstyled:f,size:T,__staticSelector:p,__stylesApiProps:m||r,error:s,variant:I,id:E}}}const RNe={__staticSelector:"InputBase",withAria:!0},ng=wi((e,t)=>{const{inputProps:n,wrapperProps:r,...o}=MNe("InputBase",RNe,e);return w.jsx(Ms.Wrapper,{...r,children:w.jsx(Ms,{...n,...o,ref:t})})});ng.classes={...Ms.classes,...Ms.Wrapper.classes};ng.displayName="@mantine/core/InputBase";const NNe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var MJ={root:"m_8bffd616"};const INe={},j3=wi((e,t)=>{const n=Ke("Flex",INe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,gap:c,rowGap:u,columnGap:f,align:p,justify:m,wrap:y,direction:b,...x}=n,S=Vt({name:"Flex",classes:MJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l}),E=Ps(),T=iJ(),A=oJ({styleProps:{gap:c,rowGap:u,columnGap:f,align:p,justify:m,wrap:y,direction:b},theme:E,data:NNe});return w.jsxs(w.Fragment,{children:[A.hasResponsiveStyles&&w.jsx(rJ,{selector:`.${T}`,styles:A.styles,media:A.media}),w.jsx(ht,{ref:t,...S("root",{className:T,style:GC(A.inlineStyles)}),...x})]})});j3.classes=MJ;j3.displayName="@mantine/core/Flex";var RJ={root:"m_b6d8b162"};function ONe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const PNe={inherit:!1},DNe=(e,{variant:t,lineClamp:n,gradient:r,size:o,color:i})=>({root:{"--text-fz":Vi(o),"--text-lh":cMe(o),"--text-gradient":t==="gradient"?gN(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":i?Yl(i,e):void 0}}),Jl=wi((e,t)=>{const n=Ke("Text",PNe,e),{lineClamp:r,truncate:o,inline:i,inherit:s,gradient:a,span:l,__staticSelector:c,vars:u,className:f,style:p,classNames:m,styles:y,unstyled:b,variant:x,mod:S,size:E,...T}=n,A=Vt({name:["Text",c],props:n,classes:RJ,className:f,style:p,classNames:m,styles:y,unstyled:b,vars:u,varsResolver:DNe});return w.jsx(ht,{...A("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:x,mod:[{"data-truncate":ONe(o),"data-line-clamp":typeof r=="number","data-inline":i,"data-inherit":s},S],size:E,...T})});Jl.classes=RJ;Jl.displayName="@mantine/core/Text";function z3({size:e,style:t,...n}){const r=e!==void 0?{width:Ee(e),height:Ee(e),...t}:t;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const NJ=k.createContext(null),$Ne=NJ.Provider;function LNe(){return{withinGroup:!!k.useContext(NJ)}}var rE={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const jNe={},zNe=(e,{spacing:t})=>({group:{"--ag-spacing":rv(t)}}),B3=qt((e,t)=>{const n=Ke("AvatarGroup",jNe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,spacing:c,...u}=n,f=Vt({name:"AvatarGroup",classes:rE,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:zNe,rootSelector:"group"});return w.jsx($Ne,{value:!0,children:w.jsx(ht,{ref:t,...f("group"),...u})})});B3.classes=rE;B3.displayName="@mantine/core/AvatarGroup";function BNe(e){return w.jsx("svg",{...e,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function VNe(e){let t=0;for(let n=0;n<e.length;n+=1){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return t}const FNe=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function HNe(e,t=FNe){const n=VNe(e),r=Math.abs(n)%t.length;return t[r]}function UNe(e,t=2){const n=e.split(" ");return n.length===1?e.slice(0,t).toUpperCase():n.map(r=>r[0]).slice(0,t).join("").toUpperCase()}const GNe={},qNe=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:s,name:a,allowedInitialsColors:l})=>{const c=i==="initials"&&typeof a=="string"?HNe(a,l):i,u=e.variantColorResolver({color:c||"gray",theme:e,gradient:o,variant:r||"light",autoContrast:s});return{root:{"--avatar-size":$n(t,"avatar-size"),"--avatar-radius":n===void 0?void 0:ri(n),"--avatar-bg":c||r?u.background:void 0,"--avatar-color":c||r?u.color:void 0,"--avatar-bd":c||r?u.border:void 0}}},oE=wi((e,t)=>{const n=Ke("Avatar",GNe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,src:c,alt:u,radius:f,color:p,gradient:m,imageProps:y,children:b,autoContrast:x,mod:S,name:E,allowedInitialsColors:T,...A}=n,M=LNe(),[R,O]=k.useState(!c),I=Vt({name:"Avatar",props:n,classes:rE,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:qNe});return k.useEffect(()=>O(!c),[c]),w.jsx(ht,{...I("root"),mod:[{"within-group":M.withinGroup},S],ref:t,...A,children:R?w.jsx("span",{...I("placeholder"),title:u,children:b||typeof E=="string"&&UNe(E)||w.jsx(BNe,{})}):w.jsx("img",{...y,...I("image"),src:c,alt:u,onError:L=>{O(!0),y?.onError?.(L)}})})});oE.classes=rE;oE.displayName="@mantine/core/Avatar";oE.Group=B3;var IJ={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const ZNe={},WNe=(e,{radius:t,color:n,gradient:r,variant:o,size:i,autoContrast:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--badge-height":$n(i,"badge-height"),"--badge-padding-x":$n(i,"badge-padding-x"),"--badge-fz":$n(i,"badge-fz"),"--badge-radius":t===void 0?void 0:ri(t),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?Yl(n,e):void 0}}},V3=wi((e,t)=>{const n=Ke("Badge",ZNe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,radius:c,color:u,gradient:f,leftSection:p,rightSection:m,children:y,variant:b,fullWidth:x,autoContrast:S,circle:E,mod:T,...A}=n,M=Vt({name:"Badge",props:n,classes:IJ,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:WNe});return w.jsxs(ht,{variant:b,mod:[{block:x,circle:E,"with-right-section":!!m,"with-left-section":!!p},T],...M("root",{variant:b}),ref:t,...A,children:[p&&w.jsx("span",{...M("section"),"data-position":"left",children:p}),w.jsx("span",{...M("label"),children:y}),m&&w.jsx("span",{...M("section"),"data-position":"right",children:m})]})});V3.classes=IJ;V3.displayName="@mantine/core/Badge";var rg={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const Vz={orientation:"horizontal"},KNe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ee(t)}}),F3=qt((e,t)=>{const n=Ke("ButtonGroup",Vz,e),{className:r,style:o,classNames:i,styles:s,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:p,...m}=Ke("ButtonGroup",Vz,e),y=Vt({name:"ButtonGroup",props:n,classes:rg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:c,varsResolver:KNe,rootSelector:"group"});return w.jsx(ht,{...y("group"),ref:t,variant:f,mod:[{"data-orientation":l},p],role:"group",...m})});F3.classes=rg;F3.displayName="@mantine/core/ButtonGroup";const Fz={},YNe=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":$n(s,"section-height"),"--section-padding-x":$n(s,"section-padding-x"),"--section-fz":s?.includes("compact")?Vi(s.replace("compact-","")):Vi(s),"--section-radius":t===void 0?void 0:ri(t),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},H3=qt((e,t)=>{const n=Ke("ButtonGroupSection",Fz,e),{className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,variant:c,gradient:u,radius:f,autoContrast:p,...m}=Ke("ButtonGroupSection",Fz,e),y=Vt({name:"ButtonGroupSection",props:n,classes:rg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,varsResolver:YNe,rootSelector:"groupSection"});return w.jsx(ht,{...y("groupSection"),ref:t,variant:c,...m})});H3.classes=rg;H3.displayName="@mantine/core/ButtonGroupSection";const JNe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ee(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},XNe={},QNe=(e,{radius:t,color:n,gradient:r,variant:o,size:i,justify:s,autoContrast:a})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":$n(i,"button-height"),"--button-padding-x":$n(i,"button-padding-x"),"--button-fz":i?.includes("compact")?Vi(i.replace("compact-","")):Vi(i),"--button-radius":t===void 0?void 0:ri(t),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},il=wi((e,t)=>{const n=Ke("Button",XNe,e),{style:r,vars:o,className:i,color:s,disabled:a,children:l,leftSection:c,rightSection:u,fullWidth:f,variant:p,radius:m,loading:y,loaderProps:b,gradient:x,classNames:S,styles:E,unstyled:T,"data-disabled":A,autoContrast:M,mod:R,...O}=n,I=Vt({name:"Button",props:n,classes:rg,className:i,style:r,classNames:S,styles:E,unstyled:T,vars:o,varsResolver:QNe}),L=!!c,$=!!u;return w.jsxs(Ch,{ref:t,...I("root",{active:!a&&!y&&!A}),unstyled:T,variant:p,disabled:a||y,mod:[{disabled:a||A,loading:y,block:f,"with-left-section":L,"with-right-section":$},R],...O,children:[w.jsx(Eh,{mounted:!!y,transition:JNe,duration:150,children:B=>w.jsx(ht,{component:"span",...I("loader",{style:B}),"aria-hidden":!0,children:w.jsx(jd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...b})})}),w.jsxs("span",{...I("inner"),children:[c&&w.jsx(ht,{component:"span",...I("section"),mod:{position:"left"},children:c}),w.jsx(ht,{component:"span",mod:{loading:y},...I("label"),children:l}),u&&w.jsx(ht,{component:"span",...I("section"),mod:{position:"right"},children:u})]})]})});il.classes=rg;il.displayName="@mantine/core/Button";il.Group=F3;il.GroupSection=H3;const[eIe,tIe]=qC("Card component was not found in tree");var U3={root:"m_e615b15f",section:"m_599a2148"};const nIe={},iE=wi((e,t)=>{const n=Ke("CardSection",nIe,e),{classNames:r,className:o,style:i,styles:s,vars:a,withBorder:l,inheritPadding:c,mod:u,...f}=n,p=tIe();return w.jsx(ht,{ref:t,mod:[{"with-border":l,"inherit-padding":c},u],...p.getStyles("section",{className:o,style:i,styles:s,classNames:r}),...f})});iE.classes=U3;iE.displayName="@mantine/core/CardSection";const rIe={},oIe=(e,{padding:t})=>({root:{"--card-padding":rv(t)}}),lv=wi((e,t)=>{const n=Ke("Card",rIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,children:c,padding:u,...f}=n,p=Vt({name:"Card",props:n,classes:U3,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:oIe}),m=k.Children.toArray(c),y=m.map((b,x)=>typeof b=="object"&&b&&"type"in b&&b.type===iE?k.cloneElement(b,{"data-first-section":x===0||void 0,"data-last-section":x===m.length-1||void 0}):b);return w.jsx(eIe,{value:{getStyles:p},children:w.jsx(R3,{ref:t,unstyled:a,...p("root"),...f,children:y})})});lv.classes=U3;lv.displayName="@mantine/core/Card";lv.Section=iE;const[iIe,sIe]=S3(),aIe={};function OJ(e){const{value:t,defaultValue:n,onChange:r,multiple:o,children:i}=Ke("ChipGroup",aIe,e),[s,a]=Qm({value:t,defaultValue:n,finalValue:o?[]:null,onChange:r}),l=u=>Array.isArray(s)?s.includes(u):u===s,c=u=>{const f=u.currentTarget.value;Array.isArray(s)?a(s.includes(f)?s.filter(p=>p!==f):[...s,f]):a(f)};return w.jsx(iIe,{value:{isChipSelected:l,onChange:c,multiple:o},children:i})}OJ.displayName="@mantine/core/ChipGroup";var PJ={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const lIe={type:"checkbox"},cIe=(e,{size:t,radius:n,variant:r,color:o,autoContrast:i})=>{const s=e.variantColorResolver({color:o||e.primaryColor,theme:e,variant:r||"filled",autoContrast:i});return{root:{"--chip-fz":Vi(t),"--chip-size":$n(t,"chip-size"),"--chip-radius":n===void 0?void 0:ri(n),"--chip-checked-padding":$n(t,"chip-checked-padding"),"--chip-padding":$n(t,"chip-padding"),"--chip-icon-size":$n(t,"chip-icon-size"),"--chip-bg":o||r?s.background:void 0,"--chip-hover":o||r?s.hover:void 0,"--chip-color":o||r?s.color:void 0,"--chip-bd":o||r?s.border:void 0,"--chip-spacing":$n(t,"chip-spacing")}}},sE=qt((e,t)=>{const n=Ke("Chip",lIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,id:c,checked:u,defaultChecked:f,onChange:p,value:m,wrapperProps:y,type:b,disabled:x,children:S,size:E,variant:T,icon:A,rootRef:M,autoContrast:R,mod:O,...I}=n,L=Vt({name:"Chip",classes:PJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:cIe}),$=sIe(),B=ov(c),{styleProps:H,rest:V}=YC(I),[W,K]=Qm({value:u,defaultValue:f,finalValue:!1,onChange:p}),z=$?{checked:$.isChipSelected(m),onChange:F=>{$.onChange(F),p?.(F.currentTarget.checked)},type:$.multiple?"checkbox":"radio"}:{},G=z.checked||W;return w.jsxs(ht,{size:E,variant:T,ref:M,mod:O,...L("root"),...H,...y,children:[w.jsx("input",{type:b,...L("input"),checked:G,onChange:F=>K(F.currentTarget.checked),id:B,disabled:x,ref:t,value:m,...z,...V}),w.jsxs("label",{htmlFor:B,"data-checked":G||void 0,"data-disabled":x||void 0,...L("label",{variant:T||"filled"}),children:[G&&w.jsx("span",{...L("iconWrapper"),children:A||w.jsx(z3,{...L("checkIcon")})}),w.jsx("span",{children:S})]})]})});sE.classes=PJ;sE.displayName="@mantine/core/Chip";sE.Group=OJ;var DJ={root:"m_3eebeb36",label:"m_9e365f20"};const uIe={orientation:"horizontal"},dIe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Yl(t,e):void 0,"--divider-border-style":n,"--divider-size":$n(r,"divider-size")}}),G3=qt((e,t)=>{const n=Ke("Divider",uIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,color:c,orientation:u,label:f,labelPosition:p,mod:m,...y}=n,b=Vt({name:"Divider",classes:DJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:dIe});return w.jsx(ht,{ref:t,mod:[{orientation:u,"with-label":!!f},m],...b("root"),...y,role:"separator",children:f&&w.jsx(ht,{component:"span",mod:{position:p},...b("label"),children:f})})});G3.classes=DJ;G3.displayName="@mantine/core/Divider";const fIe={multiple:!1},$J=k.forwardRef((e,t)=>{const{onChange:n,children:r,multiple:o,accept:i,name:s,form:a,resetRef:l,disabled:c,capture:u,inputProps:f,...p}=Ke("FileButton",fIe,e),m=k.useRef(null),y=()=>{!c&&m.current?.click()},b=S=>{n(o?Array.from(S.currentTarget.files):S.currentTarget.files[0]||null)};return VS(l,()=>{m.current&&(m.current.value="")}),w.jsxs(w.Fragment,{children:[w.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:o,onChange:b,ref:fu(t,m),name:s,form:a,capture:u,...f}),r({onClick:y,...p})]})});$J.displayName="@mantine/core/FileButton";const hIe=({value:e})=>w.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e?.name}),pIe={valueComponent:hIe},q3=qt((e,t)=>{const n=Ke("FileInput",pIe,e),{unstyled:r,vars:o,onChange:i,value:s,defaultValue:a,multiple:l,accept:c,name:u,form:f,valueComponent:p,clearable:m,clearButtonProps:y,readOnly:b,capture:x,fileInputProps:S,rightSection:E,size:T,placeholder:A,component:M,resetRef:R,classNames:O,styles:I,...L}=n,$=k.useRef(null),{resolvedClassNames:B,resolvedStyles:H}=KC({classNames:O,styles:I,props:n}),[V,W]=Qm({value:s,defaultValue:a,onChange:i,finalValue:l?[]:null}),K=Array.isArray(V)?V.length!==0:V!==null,z=E||(m&&K&&!b?w.jsx(XC,{...y,variant:"subtle",onClick:()=>W(l?[]:null),size:T,unstyled:r}):null);k.useEffect(()=>{(Array.isArray(V)&&V.length===0||V===null)&&$.current?.()},[V]);const G=p;return w.jsx($J,{onChange:W,multiple:l,accept:c,name:u,form:f,resetRef:fu($,R),disabled:b,capture:x,inputProps:S,children:F=>w.jsx(ng,{component:M||"button",ref:t,rightSection:z,...F,...L,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:T,classNames:O,styles:I,children:K?w.jsx(G,{value:V}):w.jsx(Ms.Placeholder,{__staticSelector:"FileInput",classNames:B,styles:H,children:A})})})});q3.classes=ng.classes;q3.displayName="@mantine/core/FileInput";const mIe=q3;function gIe({open:e,close:t,openDelay:n,closeDelay:r}){const o=k.useRef(-1),i=k.useRef(-1),s=()=>{window.clearTimeout(o.current),window.clearTimeout(i.current)},a=()=>{s(),n===0||n===void 0?e():o.current=window.setTimeout(e,n)},l=()=>{s(),r===0||r===void 0?t():i.current=window.setTimeout(t,r)};return k.useEffect(()=>s,[]),{openDropdown:a,closeDropdown:l}}var LJ={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Hz={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:nv("overlay")},yIe=(e,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}}),Z3=qt((e,t)=>{const n=Ke("LoadingOverlay",Hz,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,transitionProps:c,loaderProps:u,overlayProps:f,visible:p,zIndex:m,...y}=n,b=Ps(),x=Vt({name:"LoadingOverlay",classes:LJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:yIe}),S={...Hz.overlayProps,...f};return w.jsx(Eh,{transition:"fade",...c,mounted:!!p,children:E=>w.jsxs(ht,{...x("root",{style:E}),ref:t,...y,children:[w.jsx(jd,{...x("loader"),unstyled:a,...u}),w.jsx(X0,{...S,...x("overlay"),darkHidden:!0,unstyled:a,color:f?.color||b.white}),w.jsx(X0,{...S,...x("overlay"),lightHidden:!0,unstyled:a,color:f?.color||b.colors.dark[5]})]})})});Z3.classes=LJ;Z3.displayName="@mantine/core/LoadingOverlay";const[bIe,cv]=qC("Menu component was not found in the tree");var og={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const vIe={},W3=qt((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,...a}=Ke("MenuDivider",vIe,e),l=cv();return w.jsx(ht,{ref:t,...l.getStyles("divider",{className:r,style:o,styles:i,classNames:n}),...a})});W3.classes=og;W3.displayName="@mantine/core/MenuDivider";const wIe={},K3=qt((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:u,...f}=Ke("MenuDropdown",wIe,e),p=k.useRef(null),m=cv(),y=$l(c,S=>{(S.key==="ArrowUp"||S.key==="ArrowDown")&&(S.preventDefault(),p.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),b=$l(a,()=>(m.trigger==="hover"||m.trigger==="click-hover")&&m.openDropdown()),x=$l(l,()=>(m.trigger==="hover"||m.trigger==="click-hover")&&m.closeDropdown());return w.jsxs(Ld.Dropdown,{...f,onMouseEnter:b,onMouseLeave:x,role:"menu","aria-orientation":"vertical",ref:fu(t,p),...m.getStyles("dropdown",{className:r,style:o,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:y,children:[m.withInitialFocusPlaceholder&&w.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),u]})});K3.classes=og;K3.displayName="@mantine/core/MenuDropdown";const xIe={},Y3=wi((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,color:a,closeMenuOnClick:l,leftSection:c,rightSection:u,children:f,disabled:p,"data-disabled":m,...y}=Ke("MenuItem",xIe,e),b=cv(),x=Ps(),{dir:S}=sv(),E=k.useRef(null),T=b.getItemIndex(E.current),A=y,M=$l(A.onMouseLeave,()=>b.setHovered(-1)),R=$l(A.onMouseEnter,()=>b.setHovered(b.getItemIndex(E.current))),O=$l(A.onClick,()=>{m||(typeof l=="boolean"?l&&b.closeDropdownImmediately():b.closeOnItemClick&&b.closeDropdownImmediately())}),I=$l(A.onFocus,()=>b.setHovered(b.getItemIndex(E.current))),L=a?x.variantColorResolver({color:a,theme:x,variant:"light"}):void 0,$=a?eg({color:a,theme:x}):null;return w.jsxs(Ch,{...y,unstyled:b.unstyled,tabIndex:b.menuItemTabIndex,onFocus:I,...b.getStyles("item",{className:r,style:o,styles:i,classNames:n}),ref:fu(E,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||m||void 0,"data-hovered":b.hovered===T?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:R,onMouseLeave:M,onClick:O,onKeyDown:FY({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:b.loop,dir:S,orientation:"vertical",onKeyDown:A.onKeyDown}),__vars:{"--menu-item-color":$?.isThemeColor&&$?.shade===void 0?`var(--mantine-color-${$.color}-6)`:L?.color,"--menu-item-hover":L?.hover},children:[c&&w.jsx("div",{...b.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:c}),f&&w.jsx("div",{...b.getStyles("itemLabel",{styles:i,classNames:n}),children:f}),u&&w.jsx("div",{...b.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:u})]})});Y3.classes=og;Y3.displayName="@mantine/core/MenuItem";const SIe={},J3=qt((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,...a}=Ke("MenuLabel",SIe,e),l=cv();return w.jsx(ht,{ref:t,...l.getStyles("label",{className:r,style:o,styles:i,classNames:n}),...a})});J3.classes=og;J3.displayName="@mantine/core/MenuLabel";const kIe={refProp:"ref"},jJ=k.forwardRef((e,t)=>{const{children:n,refProp:r,...o}=Ke("MenuTarget",kIe,e);if(!tv(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=cv(),s=n.props,a=$l(s.onClick,()=>{i.trigger==="click"?i.toggleDropdown():i.trigger==="click-hover"&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())}),l=$l(s.onMouseEnter,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),c=$l(s.onMouseLeave,()=>{(i.trigger==="hover"||i.trigger==="click-hover"&&!i.openedViaClick)&&i.closeDropdown()});return w.jsx(Ld.Target,{refProp:r,popupType:"menu",ref:t,...o,children:k.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:c,"data-expanded":i.opened?!0:void 0})})});jJ.displayName="@mantine/core/MenuTarget";const CIe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function br(e){const t=Ke("Menu",CIe,e),{children:n,onOpen:r,onClose:o,opened:i,defaultOpened:s,trapFocus:a,onChange:l,closeOnItemClick:c,loop:u,closeOnEscape:f,trigger:p,openDelay:m,closeDelay:y,classNames:b,styles:x,unstyled:S,variant:E,vars:T,menuItemTabIndex:A,keepMounted:M,withInitialFocusPlaceholder:R,...O}=t,I=Vt({name:"Menu",classes:og,props:t,classNames:b,styles:x,unstyled:S}),[L,{setHovered:$,resetHovered:B}]=dMe(),[H,V]=Qm({value:i,defaultValue:s,finalValue:!1,onChange:l}),[W,K]=k.useState(!1),z=()=>{V(!1),K(!1),H&&o?.()},G=()=>{V(!0),!H&&r?.()},F=()=>{H?z():G()},{openDropdown:Z,closeDropdown:N}=gIe({open:G,close:z,closeDelay:y,openDelay:m}),U=ae=>uMe("[data-menu-item]","[data-menu-dropdown]",ae),{resolvedClassNames:ee,resolvedStyles:D}=KC({classNames:b,styles:x,props:t});return Ed(()=>{B()},[H]),w.jsx(bIe,{value:{getStyles:I,opened:H,toggleDropdown:F,getItemIndex:U,hovered:L,setHovered:$,openedViaClick:W,setOpenedViaClick:K,closeOnItemClick:c,closeDropdown:p==="click"?z:N,openDropdown:p==="click"?G:Z,closeDropdownImmediately:z,loop:u,trigger:p,unstyled:S,menuItemTabIndex:A,withInitialFocusPlaceholder:R},children:w.jsx(Ld,{...O,opened:H,onChange:F,defaultOpened:s,trapFocus:M?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:ee,styles:D,unstyled:S,variant:E,keepMounted:M,children:n})})}br.extend=e=>e;br.withProps=LRe(br);br.classes=og;br.displayName="@mantine/core/Menu";br.Item=Y3;br.Label=J3;br.Dropdown=K3;br.Target=jJ;br.Divider=W3;const EIe={duration:100,transition:"fade"};function TIe(e,t){return{...EIe,...t,...e}}function _Ie({offset:e,position:t,defaultOpened:n}){const[r,o]=k.useState(n),i=k.useRef(null),{x:s,y:a,elements:l,refs:c,update:u,placement:f}=kh({placement:t,middleware:[cu({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=f.includes("right")?e:t.includes("left")?e*-1:0,m=f.includes("bottom")?e:t.includes("top")?e*-1:0,y=k.useCallback(({clientX:b,clientY:x})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:b,y:x,left:b+p,top:x+m,right:b,bottom:x}}})},[l.reference]);return k.useEffect(()=>{if(c.floating.current){const b=i.current;b.addEventListener("mousemove",y);const x=Zc(c.floating.current);return x.forEach(S=>{S.addEventListener("scroll",u)}),()=>{b.removeEventListener("mousemove",y),x.forEach(S=>{S.removeEventListener("scroll",u)})}}},[l.reference,c.floating.current,u,y,r]),{handleMouseMove:y,x:s,y:a,opened:r,setOpened:o,boundaryRef:i,floating:c.setFloating}}var aE={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const AIe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:nv("popover")},MIe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ri(t),"--tooltip-bg":n?Yl(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),X3=qt((e,t)=>{const n=Ke("TooltipFloating",AIe,e),{children:r,refProp:o,withinPortal:i,style:s,className:a,classNames:l,styles:c,unstyled:u,radius:f,color:p,label:m,offset:y,position:b,multiline:x,zIndex:S,disabled:E,defaultOpened:T,variant:A,vars:M,portalProps:R,...O}=n,I=Ps(),L=Vt({name:"TooltipFloating",props:n,classes:aE,className:a,style:s,classNames:l,styles:c,unstyled:u,rootSelector:"tooltip",vars:M,varsResolver:MIe}),{handleMouseMove:$,x:B,y:H,opened:V,boundaryRef:W,floating:K,setOpened:z}=_Ie({offset:y,position:b,defaultOpened:T});if(!tv(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const G=fu(W,k3(r),t),F=r.props,Z=U=>{F.onMouseEnter?.(U),$(U),z(!0)},N=U=>{F.onMouseLeave?.(U),z(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(av,{...R,withinPortal:i,children:w.jsx(ht,{...O,...L("tooltip",{style:{...sJ(s,I),zIndex:S,display:!E&&V?"block":"none",top:(H&&Math.round(H))??"",left:(B&&Math.round(B))??""}}),variant:A,ref:K,mod:{multiline:x},children:m})}),k.cloneElement(r,{...F,[o]:G,onMouseEnter:Z,onMouseLeave:N})]})});X3.classes=aE;X3.displayName="@mantine/core/TooltipFloating";const zJ=k.createContext(!1),RIe=zJ.Provider,NIe=()=>k.useContext(zJ),IIe={openDelay:0,closeDelay:0};function Q3(e){const{openDelay:t,closeDelay:n,children:r}=Ke("TooltipGroup",IIe,e);return w.jsx(RIe,{value:!0,children:w.jsx(n2e,{delay:{open:t,close:n},children:r})})}Q3.displayName="@mantine/core/TooltipGroup";Q3.extend=e=>e;function OIe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function PIe(e){const t=OIe(e.middlewares),n=[Gi(e.offset)];return t.shift&&n.push(cu(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?As():As(t.flip)),n.push(t3({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?r0():r0(t.inline)):e.inline&&n.push(r0()),n}function DIe(e){const[t,n]=k.useState(e.defaultOpened),o=typeof e.opened=="boolean"?e.opened:t,i=NIe(),s=ov(),a=k.useCallback(R=>{n(R),R&&E(s)},[s]),{x:l,y:c,context:u,refs:f,update:p,placement:m,middlewareData:{arrow:{x:y,y:b}={}}}=kh({strategy:e.strategy,placement:e.position,open:o,onOpenChange:a,middleware:PIe(e)}),{delay:x,currentId:S,setCurrentId:E}=r2e(u,{id:s}),{getReferenceProps:T,getFloatingProps:A}=i3([e2e(u,{enabled:e.events?.hover,delay:i?x:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),m2e(u,{enabled:e.events?.focus,visibleOnly:!0}),y2e(u,{role:"tooltip"}),JK(u,{enabled:typeof e.opened>"u"})]);wJ({opened:o,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:f,update:p}}),Ed(()=>{e.onPositionChange?.(m)},[m]);const M=o&&S&&S!==s;return{x:l,y:c,arrowX:y,arrowY:b,reference:f.setReference,floating:f.setFloating,getFloatingProps:A,getReferenceProps:T,isGroupPhase:M,opened:o,placement:m}}const Uz={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:nv("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},$Ie=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ri(t),"--tooltip-bg":n?Yl(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ig=qt((e,t)=>{const n=Ke("Tooltip",Uz,e),{children:r,position:o,refProp:i,label:s,openDelay:a,closeDelay:l,onPositionChange:c,opened:u,defaultOpened:f,withinPortal:p,radius:m,color:y,classNames:b,styles:x,unstyled:S,style:E,className:T,withArrow:A,arrowSize:M,arrowOffset:R,arrowRadius:O,arrowPosition:I,offset:L,transitionProps:$,multiline:B,events:H,zIndex:V,disabled:W,positionDependencies:K,onClick:z,onMouseEnter:G,onMouseLeave:F,inline:Z,variant:N,keepMounted:U,vars:ee,portalProps:D,mod:ae,floatingStrategy:oe,middlewares:he,...le}=Ke("Tooltip",Uz,n),{dir:ge}=sv(),Oe=k.useRef(null),je=DIe({position:pJ(ge,o),closeDelay:l,openDelay:a,onPositionChange:c,opened:u,defaultOpened:f,events:H,arrowRef:Oe,arrowOffset:R,offset:typeof L=="number"?L+(A?M/2:0):L,positionDependencies:[...K,r],inline:Z,strategy:oe,middlewares:he}),ye=Vt({name:"Tooltip",props:n,classes:aE,className:T,style:E,classNames:b,styles:x,unstyled:S,rootSelector:"tooltip",vars:ee,varsResolver:$Ie});if(!tv(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Ie=fu(je.reference,k3(r),t),Le=TIe($,{duration:100,transition:"fade"}),$e=r.props;return w.jsxs(w.Fragment,{children:[w.jsx(av,{...D,withinPortal:p,children:w.jsx(Eh,{...Le,keepMounted:U,mounted:!W&&!!je.opened,duration:je.isGroupPhase?10:Le.duration,children:me=>w.jsxs(ht,{...le,"data-fixed":oe==="fixed"||void 0,variant:N,mod:[{multiline:B},ae],...je.getFloatingProps({ref:je.floating,className:ye("tooltip").className,style:{...ye("tooltip").style,...me,zIndex:V,top:je.y??0,left:je.x??0}}),children:[s,w.jsx(N3,{ref:Oe,arrowX:je.arrowX,arrowY:je.arrowY,visible:A,position:je.placement,arrowSize:M,arrowOffset:R,arrowRadius:O,arrowPosition:I,...ye("arrow")})]})})}),k.cloneElement(r,je.getReferenceProps({onClick:z,onMouseEnter:G,onMouseLeave:F,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:Ss(T,$e.className),...$e,[i]:Ie}))]})});ig.classes=aE;ig.displayName="@mantine/core/Tooltip";ig.Floating=X3;ig.Group=Q3;var BJ={root:"m_18320242","skeleton-fade":"m_299c329c"};const LIe={visible:!0,animate:!0},jIe=(e,{width:t,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":Ee(n),"--skeleton-width":Ee(o?n:t),"--skeleton-radius":o?"1000px":r===void 0?void 0:ri(r)}}),HS=qt((e,t)=>{const n=Ke("Skeleton",LIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,width:c,height:u,circle:f,visible:p,radius:m,animate:y,mod:b,...x}=n,S=Vt({name:"Skeleton",classes:BJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:jIe});return w.jsx(ht,{ref:t,...S("root"),mod:[{visible:p,animate:y},b],...x})});HS.classes=BJ;HS.displayName="@mantine/core/Skeleton";var VJ={root:"m_6d731127"};const zIe={gap:"md",align:"stretch",justify:"flex-start"},BIe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":rv(t),"--stack-align":n,"--stack-justify":r}}),uv=qt((e,t)=>{const n=Ke("Stack",zIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,align:c,justify:u,gap:f,variant:p,...m}=n,y=Vt({name:"Stack",props:n,classes:VJ,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:BIe});return w.jsx(ht,{ref:t,...y("root"),variant:p,...m})});uv.classes=VJ;uv.displayName="@mantine/core/Stack";const[VIe,eP]=qC("Tabs component was not found in the tree");var dv={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const FIe={},tP=qt((e,t)=>{const n=Ke("TabsList",FIe,e),{children:r,className:o,grow:i,justify:s,classNames:a,styles:l,style:c,mod:u,...f}=n,p=eP();return w.jsx(ht,{...f,...p.getStyles("list",{className:o,style:c,classNames:a,styles:l,props:n,variant:p.variant}),ref:t,role:"tablist",variant:p.variant,mod:[{grow:i,orientation:p.orientation,placement:p.orientation==="vertical"&&p.placement,inverted:p.inverted},u],"aria-orientation":p.orientation,__vars:{"--tabs-justify":s},children:r})});tP.classes=dv;tP.displayName="@mantine/core/TabsList";const HIe={},nP=qt((e,t)=>{const n=Ke("TabsPanel",HIe,e),{children:r,className:o,value:i,classNames:s,styles:a,style:l,mod:c,keepMounted:u,...f}=n,p=eP(),m=p.value===i,y=p.keepMounted||u||m?r:null;return w.jsx(ht,{...f,...p.getStyles("panel",{className:o,classNames:s,styles:a,style:[l,m?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:p.orientation},c],role:"tabpanel",id:p.getPanelId(i),"aria-labelledby":p.getTabId(i),children:y})});nP.classes=dv;nP.displayName="@mantine/core/TabsPanel";const UIe={},rP=qt((e,t)=>{const n=Ke("TabsTab",UIe,e),{className:r,children:o,rightSection:i,leftSection:s,value:a,onClick:l,onKeyDown:c,disabled:u,color:f,style:p,classNames:m,styles:y,vars:b,mod:x,tabIndex:S,...E}=n,T=Ps(),{dir:A}=sv(),M=eP(),R=a===M.value,O=L=>{M.onChange(M.allowTabDeactivation&&a===M.value?null:a),l?.(L)},I={classNames:m,styles:y,props:n};return w.jsxs(Ch,{...E,...M.getStyles("tab",{className:r,style:p,variant:M.variant,...I}),disabled:u,unstyled:M.unstyled,variant:M.variant,mod:[{active:R,disabled:u,orientation:M.orientation,inverted:M.inverted,placement:M.orientation==="vertical"&&M.placement},x],ref:t,role:"tab",id:M.getTabId(a),"aria-selected":R,tabIndex:S!==void 0?S:R||M.value===null?0:-1,"aria-controls":M.getPanelId(a),onClick:O,__vars:{"--tabs-color":f?Yl(f,T):void 0},onKeyDown:FY({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:M.activateTabWithKeyboard,loop:M.loop,orientation:M.orientation||"horizontal",dir:A,onKeyDown:c}),children:[s&&w.jsx("span",{...M.getStyles("tabSection",I),"data-position":"left",children:s}),o&&w.jsx("span",{...M.getStyles("tabLabel",I),children:o}),i&&w.jsx("span",{...M.getStyles("tabSection",I),"data-position":"right",children:i})]})});rP.classes=dv;rP.displayName="@mantine/core/TabsTab";const Gz="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",GIe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},qIe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":ri(t),"--tabs-color":Yl(n,e),"--tabs-text-color":yRe(r,e)?QY({color:n,theme:e,autoContrast:r}):void 0}}),Bc=qt((e,t)=>{const n=Ke("Tabs",GIe,e),{defaultValue:r,value:o,onChange:i,orientation:s,children:a,loop:l,id:c,activateTabWithKeyboard:u,allowTabDeactivation:f,variant:p,color:m,radius:y,inverted:b,placement:x,keepMounted:S,classNames:E,styles:T,unstyled:A,className:M,style:R,vars:O,autoContrast:I,mod:L,...$}=n,B=ov(c),[H,V]=Qm({value:o,defaultValue:r,finalValue:null,onChange:i}),W=Vt({name:"Tabs",props:n,classes:dv,className:M,style:R,classNames:E,styles:T,unstyled:A,vars:O,varsResolver:qIe});return w.jsx(VIe,{value:{placement:x,value:H,orientation:s,id:B,loop:l,activateTabWithKeyboard:u,getTabId:kz(`${B}-tab`,Gz),getPanelId:kz(`${B}-panel`,Gz),onChange:V,allowTabDeactivation:f,variant:p,color:m,radius:y,inverted:b,keepMounted:S,unstyled:A,getStyles:W},children:w.jsx(ht,{ref:t,id:B,variant:p,mod:[{orientation:s,inverted:s==="horizontal"&&b,placement:s==="vertical"&&x},L],...W("root"),...$,children:a})})});Bc.classes=dv;Bc.displayName="@mantine/core/Tabs";Bc.Tab=rP;Bc.Panel=nP;Bc.List=tP;const ZIe={},lE=qt((e,t)=>{const n=Ke("TextInput",ZIe,e);return w.jsx(ng,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});lE.classes=ng.classes;lE.displayName="@mantine/core/TextInput";const FJ=(e,t,n=!1)=>{const r=[];function o(i,s="--bn"){for(const a in i){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${s}-${l}`;typeof i[a]!="object"?(typeof i[a]=="number"&&(i[a]=`${i[a]}px`),n?t.style.removeProperty(c):t.style.setProperty(c,i[a].toString())):o(i[a],c)}}return o(e),r},qz=(e,t)=>FJ(e,t),WIe={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},KIe=e=>FJ(WIe,e,!0),HJ=e=>w.jsxs(uv,{gap:0,className:"bn-tooltip",children:[w.jsx(Jl,{size:"sm",lineClamp:5,children:e.mainTooltip}),e.secondaryTooltip&&w.jsx(Jl,{size:"xs",lineClamp:5,children:e.secondaryTooltip})]}),gA=k.forwardRef((e,t)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:i,icon:s,isSelected:a,isDisabled:l,onClick:c,label:u,variant:f,...p}=e;Tt(p,!1);const[m,y]=k.useState(!1),b=r?w.jsx(il,{"aria-label":u,className:n,onMouseDown:x=>{VR()&&x.currentTarget.focus()},onClick:x=>{y(!0),c?.(x)},onPointerLeave:()=>y(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:f==="compact"?"compact-xs":"xs",disabled:l||!1,ref:t,...p,children:r}):w.jsx(Th,{className:n,"aria-label":u,onMouseDown:x=>{VR()&&x.currentTarget.focus()},onClick:x=>{y(!0),c?.(x)},onPointerLeave:()=>y(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:f==="compact"?20:30,disabled:l||!1,ref:t,...p,children:s});return o?w.jsx(ig,{disabled:m,withinPortal:!1,label:w.jsx(HJ,{mainTooltip:o,secondaryTooltip:i}),children:b}):b}),YIe=k.forwardRef((e,t)=>{const{className:n,text:r,icon:o,isSelected:i,mainTooltip:s,secondaryTooltip:a,onClick:l,onMouseEnter:c,...u}=e;Tt(u,!1);const[f,p]=k.useState(!1),m=w.jsxs(sE,{className:n,checked:i===!0,wrapperProps:{onMouseEnter:c,onMouseLeave:()=>p(!1),onClick:y=>{p(!0),l?.(y)}},variant:"light",icon:null,ref:t,children:[w.jsx("span",{children:o}),w.jsx("span",{children:r})]});return!s||f?m:w.jsx(ig,{refProp:"rootRef",withinPortal:!1,label:w.jsx(HJ,{mainTooltip:s,secondaryTooltip:a}),children:m})}),JIe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return Tt(o),w.jsx(Do,{className:n,ref:t,children:r})}),XIe=k.forwardRef((e,t)=>{const{className:n,children:r,headerText:o,selected:i,onFocus:s,onBlur:a,tabIndex:l,...c}=e;Tt(c,!1);const u=k.useRef(null);return k.useEffect(()=>{var f;i&&((f=u.current)==null||f.scrollIntoView({behavior:"smooth",block:"center"}))},[i]),w.jsxs(lv,{className:_n(n,i?"selected":""),onFocus:s,onBlur:a,tabIndex:l,ref:p3([t,u]),children:[o&&w.jsx(Jl,{className:"bn-header-text",children:o}),r]})}),QIe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return Tt(o,!1),w.jsx(lv.Section,{className:n,ref:t,children:r})}),eOe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return Tt(o,!1),w.jsx(G3,{className:n,label:w.jsx(Jl,{children:r}),ref:t})}),tOe=k.forwardRef((e,t)=>{const{authorInfo:n,timeString:r,edited:o,...i}=e,s=kt();return Tt(i,!1),n==="loading"?w.jsxs(Do,{children:[w.jsx(HS,{height:24,width:24}),w.jsx("div",{children:w.jsx(HS,{height:12,width:100})})]}):w.jsxs(Do,{children:[w.jsx(oE,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),w.jsxs(Jl,{fz:"sm",fw:"bold",children:[n.username,w.jsxs(Jl,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&`(${s.comments.edited})`]})]})]})}),nOe=k.forwardRef((e,t)=>{const{className:n,showActions:r,authorInfo:o,timeString:i,edited:s,actions:a,children:l,...c}=e,{hovered:u,ref:f}=TMe(),{focused:p,ref:m}=WY(),y=p3([t,f]);return Tt(c,!1),w.jsxs(Do,{pos:"relative",ref:y,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&u||p)?w.jsx(Do,{ref:m,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,w.jsx(tOe,{...e}),l]})}),rOe=k.forwardRef((e,t)=>{const{className:n,autoFocus:r,onFocus:o,onBlur:i,editor:s,editable:a,...l}=e;return Tt(l,!1),w.jsx(WJ,{autoFocus:r,className:n,editor:e.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:t,onFocus:o,onBlur:i,children:w.jsx(y3,{formattingToolbar:oOe})})}),oOe=()=>{const e=m3([]).filter(t=>t.key!=="nestBlockButton"&&t.key!=="unnestBlockButton");return w.jsx(g3,{blockTypeSelectItems:[],children:e})},iOe=k.forwardRef((e,t)=>{const{className:n,name:r,label:o,variant:i,icon:s,value:a,autoFocus:l,placeholder:c,disabled:u,onKeyDown:f,onChange:p,onSubmit:m,autoComplete:y,rightSection:b,...x}=e;return Tt(x),w.jsx(lE,{size:"xs",className:_n(n||"",i==="large"?"bn-mt-input-large":""),ref:t,name:r,label:o,leftSection:s,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:b,placeholder:c,disabled:u,onKeyDown:f,onChange:p,onSubmit:m,autoComplete:y})});var UJ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zz=ie.createContext&&ie.createContext(UJ),sOe=["attr","size","title"];function aOe(e,t){if(e==null)return{};var n=lOe(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function US(){return US=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},US.apply(this,arguments)}function Wz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function GS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wz(Object(n),!0).forEach(function(r){cOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cOe(e,t,n){return t=uOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uOe(e){var t=dOe(e,"string");return typeof t=="symbol"?t:t+""}function dOe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GJ(e){return e&&e.map((t,n)=>ie.createElement(t.tag,GS({key:n},t.attr),GJ(t.child)))}function qJ(e){return t=>ie.createElement(fOe,US({attr:GS({},e.attr)},t),GJ(e.child))}function fOe(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=aOe(e,sOe),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),ie.createElement("svg",US({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:GS(GS({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&ie.createElement("title",null,i),e.children)};return Zz!==void 0?ie.createElement(Zz.Consumer,null,n=>t(n)):t(UJ)}function hOe(e){return qJ({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function pOe(e){return qJ({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}const ZJ=k.createContext(void 0),mOe=k.forwardRef((e,t)=>{const{children:n,onOpenChange:r,position:o,sub:i,...s}=e;Tt(s);const[a,l]=k.useState(!1),c=k.useRef(null),u=k.useRef(void 0),f=k.useCallback(()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{l(!1)},250)},[]),p=k.useCallback(()=>{u.current&&clearTimeout(u.current),l(!0)},[]);return w.jsx(ZJ.Provider,{value:{onMenuMouseOver:p,onMenuMouseLeave:f},children:w.jsx(br.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:iv(t,c),onMouseOver:p,onMouseLeave:f,children:w.jsx(br,{portalProps:{target:c.current?c.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})}),gOe=e=>{const{children:t,onOpenChange:n,position:r,sub:o,...i}=e;return Tt(i),o?w.jsx(mOe,{...e}):w.jsx(br,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:t})},yOe=k.forwardRef((e,t)=>{const{className:n,children:r,icon:o,checked:i,subTrigger:s,onClick:a,...l}=e;return Tt(l,!1),s?w.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation()},ref:t,...l,children:[r,w.jsx(pOe,{size:15})]}):w.jsx(br.Item,{className:n,ref:t,leftSection:o,rightSection:i?w.jsx(z3,{size:10}):i===!1?w.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),bOe=e=>{const{children:t,sub:n,...r}=e;return Tt(r),w.jsx(br.Target,{children:t})},vOe=k.forwardRef((e,t)=>{const{className:n,children:r,sub:o,...i}=e;Tt(i);const s=k.useContext(ZJ);return w.jsx(br.Dropdown,{className:n,ref:t,onMouseOver:s?.onMenuMouseOver,onMouseLeave:s?.onMenuMouseLeave,children:r})}),wOe=k.forwardRef((e,t)=>{const{className:n,...r}=e;return Tt(r),w.jsx(br.Divider,{className:n,ref:t})}),xOe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return Tt(o),w.jsx(br.Label,{className:n,ref:t,children:r})}),SOe=k.forwardRef((e,t)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,label:c,...u}=e;return Tt(u,!1),o?w.jsx(Th,{size:24,className:n,ref:t,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...u,children:o}):w.jsx(il,{className:n,ref:t,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...u,children:r})}),kOe=k.forwardRef((e,t)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:i,setOpenTab:s,loading:a,...l}=e;return Tt(l),w.jsx(Do,{className:n,ref:t,children:w.jsxs(Bc,{value:i,defaultValue:o,onChange:s,children:[a&&w.jsx(Z3,{visible:a}),w.jsx(Bc.List,{children:r.map(c=>w.jsx(Bc.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>w.jsx(Bc.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),COe=k.forwardRef((e,t)=>{const{className:n,children:r,onClick:o,label:i,...s}=e;return Tt(s),w.jsx(il,{size:"xs","aria-label":i,className:n,ref:t,onClick:o,...s,children:r})}),EOe=k.forwardRef((e,t)=>{const{className:n,accept:r,value:o,placeholder:i,onChange:s,...a}=e;return Tt(a),w.jsx(mIe,{size:"xs",className:n,ref:t,accept:r,value:o,placeholder:i,onChange:s,...a})}),TOe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return Tt(o),w.jsx("div",{className:n,ref:t,children:r})}),_Oe=k.forwardRef((e,t)=>{const{className:n,value:r,placeholder:o,onKeyDown:i,onChange:s,...a}=e;return Tt(a),w.jsx(lE,{size:"xs","data-test":"embed-input",className:n,ref:t,value:r,placeholder:o,onKeyDown:i,onChange:s})}),AOe=e=>{const{opened:t,position:n,children:r,...o}=e;return Tt(o),w.jsx(Ld,{withinPortal:!1,opened:t,position:n,children:r})},MOe=e=>{const{children:t,...n}=e;return Tt(n),w.jsx(O3,{children:t})},ROe=k.forwardRef((e,t)=>{const{className:n,children:r,variant:o,...i}=e;return Tt(i),w.jsx(JC,{className:n,ref:t,children:r})}),NOe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return Tt(o,!1),w.jsx(Do,{align:"center",gap:0,className:n,ref:t,...o,children:r})}),IOe=k.forwardRef((e,t)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,label:c,...u}=e;return Tt(u,!1),o?w.jsx(Th,{size:24,className:n,ref:t,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...u,children:o}):w.jsx(il,{className:n,ref:t,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...u,children:r})}),OOe=k.forwardRef((e,t)=>{const{className:n,children:r,id:o,...i}=e;return Tt(i),w.jsx(uv,{gap:0,className:n,ref:t,id:o,role:"listbox",children:r})}),POe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return Tt(o),w.jsx(Do,{className:n,ref:t,children:w.jsx(Do,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),DOe=k.forwardRef((e,t)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=e;Tt(a);const l=k.useRef(null);return k.useEffect(()=>{if(!l.current||!r)return;const c=NY(l.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),w.jsxs(Do,{gap:0,className:n,ref:iv(t,l),id:s,role:"option",onMouseDown:c=>c.preventDefault(),onClick:o,"aria-selected":r||void 0,children:[i.icon&&w.jsx(Do,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:i.icon}),w.jsxs(uv,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[w.jsx(Jl,{className:"bn-mt-suggestion-menu-item-title",children:i.title}),w.jsx(Jl,{className:"bn-mt-suggestion-menu-item-subtitle",children:i.subtext})]}),i.badge&&w.jsx(Do,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:w.jsx(V3,{size:"xs",children:i.badge})})]})}),$Oe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return Tt(o),w.jsx(Do,{className:n,ref:t,children:r})}),LOe=k.forwardRef((e,t)=>{const{className:n,...r}=e;return Tt(r),w.jsx(jd,{className:n,type:"dots",size:16,ref:t})}),jOe=k.forwardRef((e,t)=>{const{className:n,children:r,id:o,columns:i,...s}=e;return Tt(s),w.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${i}, 1fr)`},ref:t,id:o,role:"grid",children:r})}),zOe=k.forwardRef((e,t)=>{const{className:n,children:r,columns:o,...i}=e;return Tt(i),w.jsx(Do,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:t,children:w.jsx(Do,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),BOe=k.forwardRef((e,t)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=e;Tt(a);const l=k.useRef(null);return k.useEffect(()=>{if(!l.current||!r)return;const c=NY(l.current,document.querySelector(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),w.jsx("div",{className:n,ref:iv(t,l),id:s,role:"option",onClick:o,"aria-selected":r||void 0,children:i.icon})}),VOe=k.forwardRef((e,t)=>{const{className:n,children:r,columns:o,...i}=e;return Tt(i),w.jsx(jd,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:t})}),FOe=k.forwardRef((e,t)=>{const{children:n,className:r,onMouseDown:o,onClick:i,...s}=e;return Tt(s,!1),w.jsx(il,{className:r,ref:t,onMouseDown:o,onClick:i,...s,children:n})}),HOe=k.forwardRef((e,t)=>{const{className:n,children:r,draggable:o,onDragStart:i,onDragEnd:s,style:a,label:l,...c}=e;return Tt(c,!1),w.jsx(il,{className:n,ref:t,"aria-label":l,draggable:o,onDragStart:i,onDragEnd:s,style:a,...c,children:r})}),yA=k.forwardRef((e,t)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:i,variant:s,...a}=e;Tt(a);const{ref:l,focused:c}=WY(),u=ZY(c),f=iv(t,l,u);return w.jsx(j3,{className:n,ref:f,role:"toolbar",onMouseEnter:o,onMouseLeave:i,gap:s==="action-toolbar"?2:void 0,children:r})}),bA=k.forwardRef((e,t)=>{const{className:n,items:r,isDisabled:o,...i}=e;Tt(i);const s=r.filter(a=>a.isSelected)[0];return s?w.jsxs(br,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[w.jsx(br.Target,{children:w.jsx(il,{onMouseDown:a=>{VR()&&a.currentTarget.focus()},leftSection:s.icon,rightSection:w.jsx(hOe,{}),size:"xs",variant:"subtle",disabled:o,children:s.text})}),w.jsx(br.Dropdown,{className:n,ref:t,children:r.map(a=>w.jsx(br.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?w.jsx(z3,{size:10,className:"bn-tick-icon"}):w.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),UOe={FormattingToolbar:{Root:yA,Button:gA,Select:bA},FilePanel:{Root:kOe,Button:COe,FileInput:EOe,TabPanel:TOe,TextInput:_Oe},GridSuggestionMenu:{Root:jOe,Item:BOe,EmptyItem:zOe,Loader:VOe},LinkToolbar:{Root:yA,Button:gA,Select:bA},SideMenu:{Root:NOe,Button:IOe},SuggestionMenu:{Root:OOe,Item:DOe,EmptyItem:POe,Label:$Oe,Loader:LOe},TableHandle:{Root:HOe,ExtendButton:FOe},Generic:{Badge:{Root:YIe,Group:JIe},Form:{Root:e=>w.jsx("div",{children:e.children}),TextInput:iOe},Menu:{Root:gOe,Trigger:bOe,Dropdown:vOe,Divider:wOe,Label:xOe,Item:yOe,Button:SOe},Popover:{Root:AOe,Trigger:MOe,Content:ROe},Toolbar:{Root:yA,Button:gA,Select:bA}},Comments:{Comment:nOe,Editor:rOe,Card:XIe,CardSection:QIe,ExpandSectionsPrompt:eOe}},GOe={activeClassName:""},WJ=e=>{const{className:t,theme:n,...r}=e,o=ol(),i=_Y(),s=o?.colorSchemePreference||i,a=k.useCallback(c=>{if(c&&(KIe(c),typeof n=="object")){if("light"in n&&"dark"in n){qz(n[s==="dark"?"dark":"light"],c);return}qz(n,c);return}},[s,n]),l=typeof n=="string"?n:s!=="no-preference"?s:"light";return w.jsx(rY.Provider,{value:UOe,children:w.jsx(nJ,{theme:GOe,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:w.jsx(eAe,{"data-mantine-color-scheme":l,className:_n("bn-mantine",t||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})};let Vr=class extends Error{constructor(t){super(t),this.name="ShikiError"}};function qOe(e){return oP(e)}function oP(e){return Array.isArray(e)?ZOe(e):e instanceof RegExp?e:typeof e=="object"?WOe(e):e}function ZOe(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=oP(e[n]);return t}function WOe(e){let t={};for(let n in e)t[n]=oP(e[n]);return t}function KJ(e,...t){return t.forEach(n=>{for(let r in n)e[r]=n[r]}),e}function YJ(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return t===0?e:~t===e.length-1?YJ(e.substring(0,e.length-1)):e.substr(~t+1)}var vA=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,pw=class{static hasCaptures(e){return e===null?!1:(vA.lastIndex=0,vA.test(e))}static replaceCaptures(e,t,n){return e.replace(vA,(r,o,i,s)=>{let a=n[parseInt(o||i,10)];if(a){let l=t.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(s){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function JJ(e,t){return e<t?-1:e>t?1:0}function XJ(e,t){if(e===null&&t===null)return 0;if(!e)return-1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let o=0;o<n;o++){let i=JJ(e[o],t[o]);if(i!==0)return i}return 0}return n-r}function Kz(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function QJ(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var eX=class{constructor(e){this.fn=e}cache=new Map;get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},qS=class{constructor(e,t,n){this._colorMap=e,this._defaults=t,this._root=n}static createFromRawTheme(e,t){return this.createFromParsedTheme(JOe(e),t)}static createFromParsedTheme(e,t){return QOe(e,t)}_cachedMatchRoot=new eX(e=>this._root.match(e));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(e===null)return this._defaults;const t=e.scopeName,r=this._cachedMatchRoot.get(t).find(o=>KOe(e.parent,o.parentScopes));return r?new tX(r.fontStyle,r.foreground,r.background):null}},wA=class bx{constructor(t,n){this.parent=t,this.scopeName=n}static push(t,n){for(const r of n)t=new bx(t,r);return t}static from(...t){let n=null;for(let r=0;r<t.length;r++)n=new bx(n,t[r]);return n}push(t){return new bx(this,t)}getSegments(){let t=this;const n=[];for(;t;)n.push(t.scopeName),t=t.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(t){return this===t?!0:this.parent===null?!1:this.parent.extends(t)}getExtensionIfDefined(t){const n=[];let r=this;for(;r&&r!==t;)n.push(r.scopeName),r=r.parent;return r===t?n.reverse():void 0}};function KOe(e,t){if(t.length===0)return!0;for(let n=0;n<t.length;n++){let r=t[n],o=!1;if(r===">"){if(n===t.length-1)return!1;r=t[++n],o=!0}for(;e&&!YOe(e.scopeName,r);){if(o)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}function YOe(e,t){return t===e||e.startsWith(t)&&e[t.length]==="."}var tX=class{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}};function JOe(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],r=0;for(let o=0,i=t.length;o<i;o++){let s=t[o];if(!s.settings)continue;let a;if(typeof s.scope=="string"){let f=s.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),a=f.split(",")}else Array.isArray(s.scope)?a=s.scope:a=[""];let l=-1;if(typeof s.settings.fontStyle=="string"){l=0;let f=s.settings.fontStyle.split(" ");for(let p=0,m=f.length;p<m;p++)switch(f[p]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof s.settings.foreground=="string"&&Kz(s.settings.foreground)&&(c=s.settings.foreground);let u=null;typeof s.settings.background=="string"&&Kz(s.settings.background)&&(u=s.settings.background);for(let f=0,p=a.length;f<p;f++){let y=a[f].trim().split(" "),b=y[y.length-1],x=null;y.length>1&&(x=y.slice(0,y.length-1),x.reverse()),n[r++]=new XOe(b,x,o,l,c,u)}}return n}var XOe=class{constructor(e,t,n,r,o,i){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=o,this.background=i}},Ko=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(Ko||{});function QOe(e,t){e.sort((l,c)=>{let u=JJ(l.scope,c.scope);return u!==0||(u=XJ(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",o="#ffffff";for(;e.length>=1&&e[0].scope==="";){let l=e.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(o=l.background)}let i=new e4e(t),s=new tX(n,i.getId(r),i.getId(o)),a=new n4e(new vN(0,null,-1,0,0),[]);for(let l=0,c=e.length;l<c;l++){let u=e[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,i.getId(u.foreground),i.getId(u.background))}return new qS(i,s,a)}var e4e=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(e===null)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},t4e=Object.freeze([]),vN=class nX{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(t,n,r,o,i){this.scopeDepth=t,this.parentScopes=n||t4e,this.fontStyle=r,this.foreground=o,this.background=i}clone(){return new nX(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(t){let n=[];for(let r=0,o=t.length;r<o;r++)n[r]=t[r].clone();return n}acceptOverwrite(t,n,r,o){this.scopeDepth>t?console.log("how did this happen?"):this.scopeDepth=t,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),o!==0&&(this.background=o)}},n4e=class wN{constructor(t,n=[],r={}){this._mainRule=t,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(t,n){if(t.scopeDepth!==n.scopeDepth)return n.scopeDepth-t.scopeDepth;let r=0,o=0;for(;t.parentScopes[r]===">"&&r++,n.parentScopes[o]===">"&&o++,!(r>=t.parentScopes.length||o>=n.parentScopes.length);){const i=n.parentScopes[o].length-t.parentScopes[r].length;if(i!==0)return i;r++,o++}return n.parentScopes.length-t.parentScopes.length}match(t){if(t!==""){let r=t.indexOf("."),o,i;if(r===-1?(o=t,i=""):(o=t.substring(0,r),i=t.substring(r+1)),this._children.hasOwnProperty(o))return this._children[o].match(i)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(wN._cmpBySpecificity),n}insert(t,n,r,o,i,s){if(n===""){this._doInsertHere(t,r,o,i,s);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new wN(this._mainRule.clone(),vN.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(t+1,c,r,o,i,s)}_doInsertHere(t,n,r,o,i){if(n===null){this._mainRule.acceptOverwrite(t,r,o,i);return}for(let s=0,a=this._rulesWithParentScopes.length;s<a;s++){let l=this._rulesWithParentScopes[s];if(XJ(l.parentScopes,n)===0){l.acceptOverwrite(t,r,o,i);return}}r===-1&&(r=this._mainRule.fontStyle),o===0&&(o=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new vN(t,n,r,o,i))}},Am=class Xs{static toBinaryStr(t){return t.toString(2).padStart(32,"0")}static print(t){const n=Xs.getLanguageId(t),r=Xs.getTokenType(t),o=Xs.getFontStyle(t),i=Xs.getForeground(t),s=Xs.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:i,background:s})}static getLanguageId(t){return(t&255)>>>0}static getTokenType(t){return(t&768)>>>8}static containsBalancedBrackets(t){return(t&1024)!==0}static getFontStyle(t){return(t&30720)>>>11}static getForeground(t){return(t&16744448)>>>15}static getBackground(t){return(t&4278190080)>>>24}static set(t,n,r,o,i,s,a){let l=Xs.getLanguageId(t),c=Xs.getTokenType(t),u=Xs.containsBalancedBrackets(t)?1:0,f=Xs.getFontStyle(t),p=Xs.getForeground(t),m=Xs.getBackground(t);return n!==0&&(l=n),r!==8&&(c=r),o!==null&&(u=o?1:0),i!==-1&&(f=i),s!==0&&(p=s),a!==0&&(m=a),(l<<0|c<<8|u<<10|f<<11|p<<15|m<<24)>>>0}};function ZS(e,t){const n=[],r=r4e(e);let o=r.next();for(;o!==null;){let l=0;if(o.length===2&&o.charAt(1)===":"){switch(o.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=r.next()}let c=s();if(n.push({matcher:c,priority:l}),o!==",")break;o=r.next()}return n;function i(){if(o==="-"){o=r.next();const l=i();return c=>!!l&&!l(c)}if(o==="("){o=r.next();const l=a();return o===")"&&(o=r.next()),l}if(Yz(o)){const l=[];do l.push(o),o=r.next();while(Yz(o));return c=>t(l,c)}return null}function s(){const l=[];let c=i();for(;c;)l.push(c),c=i();return u=>l.every(f=>f(u))}function a(){const l=[];let c=s();for(;c&&(l.push(c),o==="|"||o===",");){do o=r.next();while(o==="|"||o===",");c=s()}return u=>l.some(f=>f(u))}}function Yz(e){return!!e&&!!e.match(/[\w\.:]+/)}function r4e(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:()=>{if(!n)return null;const r=n[0];return n=t.exec(e),r}}}function rX(e){typeof e.dispose=="function"&&e.dispose()}var Q0=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},o4e=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},i4e=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},s4e=class{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Q0(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const e=this.Q;this.Q=[];const t=new i4e;for(const n of e)a4e(n,this.initialScopeName,this.repo,t);for(const n of t.references)if(n instanceof Q0){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function a4e(e,t,n,r){const o=n.lookup(e.scopeName);if(!o){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const i=n.lookup(t);e instanceof Q0?vx({baseGrammar:i,selfGrammar:o},r):xN(e.ruleName,{baseGrammar:i,selfGrammar:o,repository:o.repository},r);const s=n.injections(e.scopeName);if(s)for(const a of s)r.add(new Q0(a))}function xN(e,t,n){if(t.repository&&t.repository[e]){const r=t.repository[e];WS([r],t,n)}}function vx(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&WS(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&WS(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function WS(e,t,n){for(const r of e){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const o=r.repository?KJ({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&WS(r.patterns,{...t,repository:o},n);const i=r.include;if(!i)continue;const s=oX(i);switch(s.kind){case 0:vx({...t,selfGrammar:t.baseGrammar},n);break;case 1:vx(t,n);break;case 2:xN(s.ruleName,{...t,repository:o},n);break;case 3:case 4:const a=s.scopeName===t.selfGrammar.scopeName?t.selfGrammar:s.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(a){const l={baseGrammar:t.baseGrammar,selfGrammar:a,repository:o};s.kind===4?xN(s.ruleName,l,n):vx(l,n)}else s.kind===4?n.add(new o4e(s.scopeName,s.ruleName)):n.add(new Q0(s.scopeName));break}}}var l4e=class{kind=0},c4e=class{kind=1},u4e=class{constructor(e){this.ruleName=e}kind=2},d4e=class{constructor(e){this.scopeName=e}kind=3},f4e=class{constructor(e,t){this.scopeName=e,this.ruleName=t}kind=4};function oX(e){if(e==="$base")return new l4e;if(e==="$self")return new c4e;const t=e.indexOf("#");if(t===-1)return new d4e(e);if(t===0)return new u4e(e.substring(1));{const n=e.substring(0,t),r=e.substring(t+1);return new f4e(n,r)}}var h4e=/\\(\d+)/,Jz=/\\(\d+)/g,p4e=-1,iX=-2;var fv=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,t,n,r){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=pw.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=pw.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${YJ(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return!this._nameIsCapturing||this._name===null||e===null||t===null?this._name:pw.replaceCaptures(this._name,e,t)}getContentName(e,t){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:pw.replaceCaptures(this._contentName,e,t)}},m4e=class extends fv{retokenizeCapturedWithRuleId;constructor(e,t,n,r,o){super(e,t,n,r),this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,n,r){throw new Error("Not supported!")}},g4e=class extends fv{_match;captures;_cachedCompiledPatterns;constructor(e,t,n,r,o){super(e,t,n,null),this._match=new eb(r,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new tb,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Xz=class extends fv{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,n,r,o){super(e,t,n,r),this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const n of this.patterns)e.getRule(n).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new tb,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},SN=class extends fv{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,n,r,o,i,s,a,l,c){super(e,t,n,r),this._begin=new eb(o,this.id),this.beginCaptures=i,this._end=new eb(s||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new tb;for(const n of this.patterns)e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}},KS=class extends fv{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(e,t,n,r,o,i,s,a,l){super(e,t,n,r),this._begin=new eb(o,this.id),this.beginCaptures=i,this.whileCaptures=a,this._while=new eb(s,iX),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new tb;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new tb,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||""),this._cachedCompiledWhilePatterns}},sX=class Go{static createCaptureRule(t,n,r,o,i){return t.registerRule(s=>new m4e(n,s,r,o,i))}static getCompiledRuleId(t,n,r){return t.id||n.registerRule(o=>{if(t.id=o,t.match)return new g4e(t.$vscodeTextmateLocation,t.id,t.name,t.match,Go._compileCaptures(t.captures,n,r));if(typeof t.begin>"u"){t.repository&&(r=KJ({},r,t.repository));let i=t.patterns;return typeof i>"u"&&t.include&&(i=[{include:t.include}]),new Xz(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,Go._compilePatterns(i,n,r))}return t.while?new KS(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,Go._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,Go._compileCaptures(t.whileCaptures||t.captures,n,r),Go._compilePatterns(t.patterns,n,r)):new SN(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,Go._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,Go._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,Go._compilePatterns(t.patterns,n,r))}),t.id}static _compileCaptures(t,n,r){let o=[];if(t){let i=0;for(const s in t){if(s==="$vscodeTextmateLocation")continue;const a=parseInt(s,10);a>i&&(i=a)}for(let s=0;s<=i;s++)o[s]=null;for(const s in t){if(s==="$vscodeTextmateLocation")continue;const a=parseInt(s,10);let l=0;t[s].patterns&&(l=Go.getCompiledRuleId(t[s],n,r)),o[a]=Go.createCaptureRule(n,t[s].$vscodeTextmateLocation,t[s].name,t[s].contentName,l)}}return o}static _compilePatterns(t,n,r){let o=[];if(t)for(let i=0,s=t.length;i<s;i++){const a=t[i];let l=-1;if(a.include){const c=oX(a.include);switch(c.kind){case 0:case 1:l=Go.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=Go.getCompiledRuleId(u,n,r));break;case 3:case 4:const f=c.scopeName,p=c.kind===4?c.ruleName:null,m=n.getExternalGrammar(f,r);if(m)if(p){let y=m.repository[p];y&&(l=Go.getCompiledRuleId(y,n,m.repository))}else l=Go.getCompiledRuleId(m.repository.$self,n,m.repository);break}}else l=Go.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof Xz||c instanceof SN||c instanceof KS)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;o.push(l)}}return{patterns:o,hasMissingPatterns:(t?t.length:0)!==o.length}}},eb=class aX{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(t,n){if(t&&typeof t=="string"){const r=t.length;let o=0,i=[],s=!1;for(let a=0;a<r;a++)if(t.charAt(a)==="\\"&&a+1<r){const c=t.charAt(a+1);c==="z"?(i.push(t.substring(o,a)),i.push("$(?!\\n)(?<!\\n)"),o=a+2):(c==="A"||c==="G")&&(s=!0),a++}this.hasAnchor=s,o===0?this.source=t:(i.push(t.substring(o,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=t;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=h4e.test(this.source):this.hasBackReferences=!1}clone(){return new aX(this.source,this.ruleId)}setSource(t){this.source!==t&&(this.source=t,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(t,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(o=>t.substring(o.start,o.end));return Jz.lastIndex=0,this.source.replace(Jz,(o,i)=>QJ(r[parseInt(i,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let t=[],n=[],r=[],o=[],i,s,a,l;for(i=0,s=this.source.length;i<s;i++)a=this.source.charAt(i),t[i]=a,n[i]=a,r[i]=a,o[i]=a,a==="\\"&&i+1<s&&(l=this.source.charAt(i+1),l==="A"?(t[i+1]="",n[i+1]="",r[i+1]="A",o[i+1]="A"):l==="G"?(t[i+1]="",n[i+1]="G",r[i+1]="",o[i+1]="G"):(t[i+1]=l,n[i+1]=l,r[i+1]=l,o[i+1]=l),i++);return{A0_G0:t.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:o.join("")}}resolveAnchors(t,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:t?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},tb=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(n=>n.source);this._cached=new Qz(e,t,this._items.map(n=>n.ruleId))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map(o=>o.resolveAnchors(t,n));return new Qz(e,r,this._items.map(o=>o.ruleId))}},Qz=class{constructor(e,t,n){this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join(`
`)}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},xA=class{constructor(e,t){this.languageId=e,this.tokenType=t}},y4e=class kN{_defaultAttributes;_embeddedLanguagesMatcher;constructor(t,n){this._defaultAttributes=new xA(t,8),this._embeddedLanguagesMatcher=new b4e(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return t===null?kN._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}static _NULL_SCOPE_METADATA=new xA(0,0);_getBasicScopeAttributes=new eX(t=>{const n=this._scopeToLanguage(t),r=this._toStandardTokenType(t);return new xA(n,r)});_scopeToLanguage(t){return this._embeddedLanguagesMatcher.match(t)||0}_toStandardTokenType(t){const n=t.match(kN.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},b4e=class{values;scopesRegExp;constructor(e){if(e.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map(([n,r])=>QJ(n));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}},e7=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function lX(e,t,n,r,o,i,s,a){const l=t.content.length;let c=!1,u=-1;if(s){const m=v4e(e,t,n,r,o,i);o=m.stack,r=m.linePos,n=m.isFirstLine,u=m.anchorPosition}const f=Date.now();for(;!c;){if(a!==0&&Date.now()-f>a)return new e7(o,!0);p()}return new e7(o,!1);function p(){const m=w4e(e,t,n,r,o,u);if(!m){i.produce(o,l),c=!0;return}const y=m.captureIndices,b=m.matchedRuleId,x=y&&y.length>0?y[0].end>r:!1;if(b===p4e){const S=o.getRule(e);i.produce(o,y[0].start),o=o.withContentNameScopesList(o.nameScopesList),$y(e,t,n,o,i,S.endCaptures,y),i.produce(o,y[0].end);const E=o;if(o=o.parent,u=E.getAnchorPos(),!x&&E.getEnterPos()===r){o=E,i.produce(o,l),c=!0;return}}else{const S=e.getRule(b);i.produce(o,y[0].start);const E=o,T=S.getName(t.content,y),A=o.contentNameScopesList.pushAttributed(T,e);if(o=o.push(b,r,u,y[0].end===l,null,A,A),S instanceof SN){const M=S;$y(e,t,n,o,i,M.beginCaptures,y),i.produce(o,y[0].end),u=y[0].end;const R=M.getContentName(t.content,y),O=A.pushAttributed(R,e);if(o=o.withContentNameScopesList(O),M.endHasBackReferences&&(o=o.withEndRule(M.getEndWithResolvedBackReferences(t.content,y))),!x&&E.hasSameRuleAs(o)){o=o.pop(),i.produce(o,l),c=!0;return}}else if(S instanceof KS){const M=S;$y(e,t,n,o,i,M.beginCaptures,y),i.produce(o,y[0].end),u=y[0].end;const R=M.getContentName(t.content,y),O=A.pushAttributed(R,e);if(o=o.withContentNameScopesList(O),M.whileHasBackReferences&&(o=o.withEndRule(M.getWhileWithResolvedBackReferences(t.content,y))),!x&&E.hasSameRuleAs(o)){o=o.pop(),i.produce(o,l),c=!0;return}}else if($y(e,t,n,o,i,S.captures,y),i.produce(o,y[0].end),o=o.pop(),!x){o=o.safePop(),i.produce(o,l),c=!0;return}}y[0].end>r&&(r=y[0].end,n=!1)}}function v4e(e,t,n,r,o,i){let s=o.beginRuleCapturedEOL?0:-1;const a=[];for(let l=o;l;l=l.pop()){const c=l.getRule(e);c instanceof KS&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=k4e(l.rule,e,l.stack.endRule,n,r===s),f=c.findNextMatchSync(t,r,u);if(f){if(f.ruleId!==iX){o=l.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(i.produce(l.stack,f.captureIndices[0].start),$y(e,t,n,l.stack,i,l.rule.whileCaptures,f.captureIndices),i.produce(l.stack,f.captureIndices[0].end),s=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}else{o=l.stack.pop();break}}return{stack:o,linePos:r,anchorPosition:s,isFirstLine:n}}function w4e(e,t,n,r,o,i){const s=x4e(e,t,n,r,o,i),a=e.getInjections();if(a.length===0)return s;const l=S4e(a,e,t,n,r,o,i);if(!l)return s;if(!s)return l;const c=s.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:s}function x4e(e,t,n,r,o,i){const s=o.getRule(e),{ruleScanner:a,findOptions:l}=cX(s,e,o.endRule,n,r===i),c=a.findNextMatchSync(t,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function S4e(e,t,n,r,o,i,s){let a=Number.MAX_VALUE,l=null,c,u=0;const f=i.contentNameScopesList.getScopeNames();for(let p=0,m=e.length;p<m;p++){const y=e[p];if(!y.matcher(f))continue;const b=t.getRule(y.ruleId),{ruleScanner:x,findOptions:S}=cX(b,t,null,r,o===s),E=x.findNextMatchSync(n,o,S);if(!E)continue;const T=E.captureIndices[0].start;if(!(T>=a)&&(a=T,l=E.captureIndices,c=E.ruleId,u=y.priority,a===o))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function cX(e,t,n,r,o){return{ruleScanner:e.compileAG(t,n,r,o),findOptions:0}}function k4e(e,t,n,r,o){return{ruleScanner:e.compileWhileAG(t,n,r,o),findOptions:0}}function $y(e,t,n,r,o,i,s){if(i.length===0)return;const a=t.content,l=Math.min(i.length,s.length),c=[],u=s[0].end;for(let f=0;f<l;f++){const p=i[f];if(p===null)continue;const m=s[f];if(m.length===0)continue;if(m.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=m.start;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?o.produceFromScopes(c[c.length-1].scopes,m.start):o.produce(r,m.start),p.retokenizeCapturedWithRuleId){const b=p.getName(a,s),x=r.contentNameScopesList.pushAttributed(b,e),S=p.getContentName(a,s),E=x.pushAttributed(S,e),T=r.push(p.retokenizeCapturedWithRuleId,m.start,-1,!1,null,x,E),A=e.createOnigString(a.substring(0,m.end));lX(e,A,n&&m.start===0,m.start,T,o,!1,0),rX(A);continue}const y=p.getName(a,s);if(y!==null){const x=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(y,e);c.push(new C4e(x,m.end))}}for(;c.length>0;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var C4e=class{scopes;endPos;constructor(e,t){this.scopes=e,this.endPos=t}};function E4e(e,t,n,r,o,i,s,a){return new _4e(e,t,n,r,o,i,s,a)}function t7(e,t,n,r,o){const i=ZS(t,YS),s=sX.getCompiledRuleId(n,r,o.repository);for(const a of i)e.push({debugSelector:t,matcher:a.matcher,ruleId:s,grammar:o,priority:a.priority})}function YS(e,t){if(t.length<e.length)return!1;let n=0;return e.every(r=>{for(let o=n;o<t.length;o++)if(T4e(t[o],r))return n=o+1,!0;return!1})}function T4e(e,t){if(!e)return!1;if(e===t)return!0;const n=t.length;return e.length>n&&e.substr(0,n)===t&&e[n]==="."}var _4e=class{constructor(e,t,n,r,o,i,s,a){if(this._rootScopeName=e,this.balancedBracketSelectors=i,this._onigLib=a,this._basicScopeAttributesProvider=new y4e(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=n7(t,null),this._injections=null,this._tokenTypeMatchers=[],o)for(const l of Object.keys(o)){const c=ZS(l,YS);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:o[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e={lookup:o=>o===this._rootScopeName?this._grammar:this.getExternalGrammar(o),injections:o=>this._grammarRepository.injections(o)},t=[],n=this._rootScopeName,r=e.lookup(n);if(r){const o=r.injections;if(o)for(let s in o)t7(t,s,o[s],this,r);const i=this._grammarRepository.injections(n);i&&i.forEach(s=>{const a=this.getExternalGrammar(s);if(a){const l=a.injectionSelector;l&&t7(t,l,a,this,a)}})}return t.sort((o,i)=>o.priority-i.priority),t}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=n7(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){this._rootId===-1&&(this._rootId=sX.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let o;if(!t||t===CN.NULL){o=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),f=Am.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),p=this.getRule(this._rootId).getName(null,null);let m;p?m=o0.createRootAndLookUpScopeName(p,f,this):m=o0.createRoot("unknown",f),t=new CN(null,this._rootId,-1,-1,!1,null,m,m)}else o=!1,t.reset();e=e+`
`;const i=this.createOnigString(e),s=i.content.length,a=new M4e(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),l=lX(this,i,o,0,t,a,!0,r);return rX(i),{lineLength:s,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function n7(e,t){return e=qOe(e),e.repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var o0=class kl{constructor(t,n,r){this.parent=t,this.scopePath=n,this.tokenAttributes=r}static fromExtension(t,n){let r=t,o=t?.scopePath??null;for(const i of n)o=wA.push(o,i.scopeNames),r=new kl(r,o,i.encodedTokenAttributes);return r}static createRoot(t,n){return new kl(null,new wA(null,t),n)}static createRootAndLookUpScopeName(t,n,r){const o=r.getMetadataForScope(t),i=new wA(null,t),s=r.themeProvider.themeMatch(i),a=kl.mergeAttributes(n,o,s);return new kl(null,i,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return kl.equals(this,t)}static equals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.scopeName!==n.scopeName||t.tokenAttributes!==n.tokenAttributes)return!1;t=t.parent,n=n.parent}while(!0)}static mergeAttributes(t,n,r){let o=-1,i=0,s=0;return r!==null&&(o=r.fontStyle,i=r.foregroundId,s=r.backgroundId),Am.set(t,n.languageId,n.tokenType,null,o,i,s)}pushAttributed(t,n){if(t===null)return this;if(t.indexOf(" ")===-1)return kl._pushAttributed(this,t,n);const r=t.split(/ /g);let o=this;for(const i of r)o=kl._pushAttributed(o,i,n);return o}static _pushAttributed(t,n,r){const o=r.getMetadataForScope(n),i=t.scopePath.push(n),s=r.themeProvider.themeMatch(i),a=kl.mergeAttributes(t.tokenAttributes,o,s);return new kl(t,i,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(t){const n=[];let r=this;for(;r&&r!==t;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===t?n.reverse():void 0}},CN=class yf{constructor(t,n,r,o,i,s,a,l){this.parent=t,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=s,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=o}_stackElementBrand=void 0;static NULL=new yf(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(t){return t===null?!1:yf._equals(this,t)}static _equals(t,n){return t===n?!0:this._structuralEquals(t,n)?o0.equals(t.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.depth!==n.depth||t.ruleId!==n.ruleId||t.endRule!==n.endRule)return!1;t=t.parent,n=n.parent}while(!0)}clone(){return this}static _reset(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent}reset(){yf._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,n,r,o,i,s,a){return new yf(this,t,n,r,o,i,s,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(t){return t.getRule(this.ruleId)}toString(){const t=[];return this._writeString(t,0),"["+t.join(",")+"]"}_writeString(t,n){return this.parent&&(n=this.parent._writeString(t,n)),t[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)}withEndRule(t){return this.endRule===t?this:new yf(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(t){let n=this;for(;n&&n._enterPos===t._enterPos;){if(n.ruleId===t.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(t,n){const r=o0.fromExtension(t?.nameScopesList??null,n.nameScopesList);return new yf(t,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,o0.fromExtension(r,n.contentNameScopesList))}},A4e=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(e,t){this.balancedBracketScopes=e.flatMap(n=>n==="*"?(this.allowAny=!0,[]):ZS(n,YS).map(r=>r.matcher)),this.unbalancedBracketScopes=t.flatMap(n=>ZS(n,YS).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}},M4e=class{constructor(e,t,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let r=e?.tokenAttributes??0,o=!1;if(this.balancedBracketSelectors?.matchesAlways&&(o=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=e?.getScopeNames()??[];for(const s of this._tokenTypeOverrides)s.matcher(i)&&(r=Am.set(r,0,s.type,null,-1,0,0));this.balancedBracketSelectors&&(o=this.balancedBracketSelectors.match(i))}if(o&&(r=Am.set(r,0,8,o,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=t;return}const n=e?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}},R4e=class{constructor(e,t){this._onigLib=t,this._theme=e}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,n,r,o){if(!this._grammars.has(e)){let i=this._rawGrammars.get(e);if(!i)return null;this._grammars.set(e,E4e(e,i,t,n,r,o,this,this._onigLib))}return this._grammars.get(e)}},N4e=class{_options;_syncRegistry;_ensureGrammarCache;constructor(t){this._options=t,this._syncRegistry=new R4e(qS.createFromRawTheme(t.theme,t.colorMap),t.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(t,n){this._syncRegistry.setTheme(qS.createFromRawTheme(t,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(t,n,r){return this.loadGrammarWithConfiguration(t,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(t,n,r){return this._loadGrammar(t,n,r.embeddedLanguages,r.tokenTypes,new A4e(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(t){return this._loadGrammar(t,0,null,null,null)}_loadGrammar(t,n,r,o,i){const s=new s4e(this._syncRegistry,t);for(;s.Q.length>0;)s.Q.map(a=>this._loadSingleGrammar(a.scopeName)),s.processQueue();return this._grammarForScopeName(t,n,r,o,i)}_loadSingleGrammar(t){this._ensureGrammarCache.has(t)||(this._doLoadSingleGrammar(t),this._ensureGrammarCache.set(t,!0))}_doLoadSingleGrammar(t){const n=this._options.loadGrammar(t);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(t):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(t,n=[],r=0,o=null){return this._syncRegistry.addGrammar(t,n),this._grammarForScopeName(t.scopeName,r,o)}_grammarForScopeName(t,n=0,r=null,o=null,i=null){return this._syncRegistry.grammarForScopeName(t,n,r,o,i)}},EN=CN.NULL;const I4e=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class hv{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}hv.prototype.normal={};hv.prototype.property={};hv.prototype.space=void 0;function uX(e,t){const n={},r={};for(const o of e)Object.assign(n,o.property),Object.assign(r,o.normal);return new hv(n,r,t)}function TN(e){return e.toLowerCase()}class Zi{constructor(t,n){this.attribute=n,this.property=t}}Zi.prototype.attribute="";Zi.prototype.booleanish=!1;Zi.prototype.boolean=!1;Zi.prototype.commaOrSpaceSeparated=!1;Zi.prototype.commaSeparated=!1;Zi.prototype.defined=!1;Zi.prototype.mustUseProperty=!1;Zi.prototype.number=!1;Zi.prototype.overloadedBoolean=!1;Zi.prototype.property="";Zi.prototype.spaceSeparated=!1;Zi.prototype.space=void 0;let O4e=0;const Et=_h(),Lr=_h(),_N=_h(),Ae=_h(),On=_h(),cm=_h(),fs=_h();function _h(){return 2**++O4e}const AN=Object.freeze(Object.defineProperty({__proto__:null,boolean:Et,booleanish:Lr,commaOrSpaceSeparated:fs,commaSeparated:cm,number:Ae,overloadedBoolean:_N,spaceSeparated:On},Symbol.toStringTag,{value:"Module"})),SA=Object.keys(AN);class iP extends Zi{constructor(t,n,r,o){let i=-1;if(super(t,n),r7(this,"space",o),typeof r=="number")for(;++i<SA.length;){const s=SA[i];r7(this,SA[i],(r&AN[s])===AN[s])}}}iP.prototype.defined=!0;function r7(e,t,n){n&&(e[t]=n)}function sg(e){const t={},n={};for(const[r,o]of Object.entries(e.properties)){const i=new iP(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[TN(r)]=r,n[TN(i.attribute)]=r}return new hv(t,n,e.space)}const dX=sg({properties:{ariaActiveDescendant:null,ariaAtomic:Lr,ariaAutoComplete:null,ariaBusy:Lr,ariaChecked:Lr,ariaColCount:Ae,ariaColIndex:Ae,ariaColSpan:Ae,ariaControls:On,ariaCurrent:null,ariaDescribedBy:On,ariaDetails:null,ariaDisabled:Lr,ariaDropEffect:On,ariaErrorMessage:null,ariaExpanded:Lr,ariaFlowTo:On,ariaGrabbed:Lr,ariaHasPopup:null,ariaHidden:Lr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:On,ariaLevel:Ae,ariaLive:null,ariaModal:Lr,ariaMultiLine:Lr,ariaMultiSelectable:Lr,ariaOrientation:null,ariaOwns:On,ariaPlaceholder:null,ariaPosInSet:Ae,ariaPressed:Lr,ariaReadOnly:Lr,ariaRelevant:null,ariaRequired:Lr,ariaRoleDescription:On,ariaRowCount:Ae,ariaRowIndex:Ae,ariaRowSpan:Ae,ariaSelected:Lr,ariaSetSize:Ae,ariaSort:null,ariaValueMax:Ae,ariaValueMin:Ae,ariaValueNow:Ae,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function fX(e,t){return t in e?e[t]:t}function hX(e,t){return fX(e,t.toLowerCase())}const P4e=sg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cm,acceptCharset:On,accessKey:On,action:null,allow:null,allowFullScreen:Et,allowPaymentRequest:Et,allowUserMedia:Et,alt:null,as:null,async:Et,autoCapitalize:null,autoComplete:On,autoFocus:Et,autoPlay:Et,blocking:On,capture:null,charSet:null,checked:Et,cite:null,className:On,cols:Ae,colSpan:null,content:null,contentEditable:Lr,controls:Et,controlsList:On,coords:Ae|cm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Et,defer:Et,dir:null,dirName:null,disabled:Et,download:_N,draggable:Lr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Et,formTarget:null,headers:On,height:Ae,hidden:_N,high:Ae,href:null,hrefLang:null,htmlFor:On,httpEquiv:On,id:null,imageSizes:null,imageSrcSet:null,inert:Et,inputMode:null,integrity:null,is:null,isMap:Et,itemId:null,itemProp:On,itemRef:On,itemScope:Et,itemType:On,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Et,low:Ae,manifest:null,max:null,maxLength:Ae,media:null,method:null,min:null,minLength:Ae,multiple:Et,muted:Et,name:null,nonce:null,noModule:Et,noValidate:Et,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Et,optimum:Ae,pattern:null,ping:On,placeholder:null,playsInline:Et,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Et,referrerPolicy:null,rel:On,required:Et,reversed:Et,rows:Ae,rowSpan:Ae,sandbox:On,scope:null,scoped:Et,seamless:Et,selected:Et,shadowRootClonable:Et,shadowRootDelegatesFocus:Et,shadowRootMode:null,shape:null,size:Ae,sizes:null,slot:null,span:Ae,spellCheck:Lr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ae,step:null,style:null,tabIndex:Ae,target:null,title:null,translate:null,type:null,typeMustMatch:Et,useMap:null,value:Lr,width:Ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:On,axis:null,background:null,bgColor:null,border:Ae,borderColor:null,bottomMargin:Ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Et,declare:Et,event:null,face:null,frame:null,frameBorder:null,hSpace:Ae,leftMargin:Ae,link:null,longDesc:null,lowSrc:null,marginHeight:Ae,marginWidth:Ae,noResize:Et,noHref:Et,noShade:Et,noWrap:Et,object:null,profile:null,prompt:null,rev:null,rightMargin:Ae,rules:null,scheme:null,scrolling:Lr,standby:null,summary:null,text:null,topMargin:Ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Et,disableRemotePlayback:Et,prefix:null,property:null,results:Ae,security:null,unselectable:null},space:"html",transform:hX}),D4e=sg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:fs,accentHeight:Ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ae,amplitude:Ae,arabicForm:null,ascent:Ae,attributeName:null,attributeType:null,azimuth:Ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ae,by:null,calcMode:null,capHeight:Ae,className:On,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ae,diffuseConstant:Ae,direction:null,display:null,dur:null,divisor:Ae,dominantBaseline:null,download:Et,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ae,enableBackground:null,end:null,event:null,exponent:Ae,externalResourcesRequired:null,fill:null,fillOpacity:Ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cm,g2:cm,glyphName:cm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ae,horizOriginX:Ae,horizOriginY:Ae,id:null,ideographic:Ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ae,k:Ae,k1:Ae,k2:Ae,k3:Ae,k4:Ae,kernelMatrix:fs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ae,overlineThickness:Ae,paintOrder:null,panose1:null,path:null,pathLength:Ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:On,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ae,pointsAtY:Ae,pointsAtZ:Ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fs,rev:fs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fs,requiredFeatures:fs,requiredFonts:fs,requiredFormats:fs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ae,specularExponent:Ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ae,strikethroughThickness:Ae,string:null,stroke:null,strokeDashArray:fs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ae,strokeOpacity:Ae,strokeWidth:null,style:null,surfaceScale:Ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fs,tabIndex:Ae,tableValues:null,target:null,targetX:Ae,targetY:Ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ae,underlineThickness:Ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ae,values:null,vAlphabetic:Ae,vMathematical:Ae,vectorEffect:null,vHanging:Ae,vIdeographic:Ae,version:null,vertAdvY:Ae,vertOriginX:Ae,vertOriginY:Ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:fX}),pX=sg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),mX=sg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:hX}),gX=sg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),$4e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},L4e=/[A-Z]/g,o7=/-[a-z]/g,j4e=/^data[-\w.:]+$/i;function yX(e,t){const n=TN(t);let r=t,o=Zi;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&j4e.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(o7,B4e);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!o7.test(i)){let s=i.replace(L4e,z4e);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}o=iP}return new o(r,t)}function z4e(e){return"-"+e.toLowerCase()}function B4e(e){return e.charAt(1).toUpperCase()}const bX=uX([dX,P4e,pX,mX,gX],"html"),pv=uX([dX,D4e,pX,mX,gX],"svg"),i7={}.hasOwnProperty;function V4e(e,t){const n=t||{};function r(o,...i){let s=r.invalid;const a=r.handlers;if(o&&i7.call(o,e)){const l=String(o[e]);s=i7.call(a,l)?a[l]:r.unknown}if(s)return s.call(this,o,...i)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const F4e=/["&'<>`]/g,H4e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,U4e=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,G4e=/[|\\{}()[\]^$+*?.]/g,s7=new WeakMap;function q4e(e,t){if(e=e.replace(t.subset?Z4e(t.subset):F4e,r),t.subset||t.escapeOnly)return e;return e.replace(H4e,n).replace(U4e,r);function n(o,i,s){return t.format((o.charCodeAt(0)-55296)*1024+o.charCodeAt(1)-56320+65536,s.charCodeAt(i+2),t)}function r(o,i,s){return t.format(o.charCodeAt(0),s.charCodeAt(i+1),t)}}function Z4e(e){let t=s7.get(e);return t||(t=W4e(e),s7.set(e,t)),t}function W4e(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(G4e,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const K4e=/[\dA-Fa-f]/;function Y4e(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!K4e.test(String.fromCharCode(t))?r:r+";"}const J4e=/\d/;function X4e(e,t,n){const r="&#"+String(e);return n&&t&&!J4e.test(String.fromCharCode(t))?r:r+";"}const Q4e=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],kA={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},e3e=["cent","copy","divide","gt","lt","not","para","times"],vX={}.hasOwnProperty,MN={};let mw;for(mw in kA)vX.call(kA,mw)&&(MN[kA[mw]]=mw);const t3e=/[^\dA-Za-z]/;function n3e(e,t,n,r){const o=String.fromCharCode(e);if(vX.call(MN,o)){const i=MN[o],s="&"+i;return n&&Q4e.includes(i)&&!e3e.includes(i)&&(!r||t&&t!==61&&t3e.test(String.fromCharCode(t)))?s:s+";"}return""}function r3e(e,t,n){let r=Y4e(e,t,n.omitOptionalSemicolons),o;if((n.useNamedReferences||n.useShortestReferences)&&(o=n3e(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!o)&&n.useShortestReferences){const i=X4e(e,t,n.omitOptionalSemicolons);i.length<r.length&&(r=i)}return o&&(!n.useShortestReferences||o.length<r.length)?o:r}function um(e,t){return q4e(e,Object.assign({format:r3e},t))}const o3e=/^>|^->|<!--|-->|--!>|<!-$/g,i3e=[">"],s3e=["<",">"];function a3e(e,t,n,r){return r.settings.bogusComments?"<?"+um(e.value,Object.assign({},r.settings.characterReferences,{subset:i3e}))+">":"<!--"+e.value.replace(o3e,o)+"-->";function o(i){return um(i,Object.assign({},r.settings.characterReferences,{subset:s3e}))}}function l3e(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function JS(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,o=n.indexOf(t);for(;o!==-1;)r++,o=n.indexOf(t,o+t.length);return r}function xpt(e){const t=[],n=String(e||"");let r=n.indexOf(","),o=0,i=!1;for(;!i;){r===-1&&(r=n.length,i=!0);const s=n.slice(o,r).trim();(s||!i)&&t.push(s),o=r+1,r=n.indexOf(",",o)}return t}function wX(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Spt(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function xX(e){return e.join(" ").trim()}const c3e=/[ \t\n\f\r]/g;function cE(e){return typeof e=="object"?e.type==="text"?a7(e.value):!1:a7(e)}function a7(e){return e.replace(c3e,"")===""}const oo=kX(1),SX=kX(-1),u3e=[];function kX(e){return t;function t(n,r,o){const i=n?n.children:u3e;let s=(r||0)+e,a=i[s];if(!o)for(;a&&cE(a);)s+=e,a=i[s];return a}}const d3e={}.hasOwnProperty;function CX(e){return t;function t(n,r,o){return d3e.call(e,n.tagName)&&e[n.tagName](n,r,o)}}const sP=CX({body:h3e,caption:CA,colgroup:CA,dd:y3e,dt:g3e,head:CA,html:f3e,li:m3e,optgroup:b3e,option:v3e,p:p3e,rp:l7,rt:l7,tbody:x3e,td:c7,tfoot:S3e,th:c7,thead:w3e,tr:k3e});function CA(e,t,n){const r=oo(n,t,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&cE(r.value.charAt(0)))}function f3e(e,t,n){const r=oo(n,t);return!r||r.type!=="comment"}function h3e(e,t,n){const r=oo(n,t);return!r||r.type!=="comment"}function p3e(e,t,n){const r=oo(n,t);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function m3e(e,t,n){const r=oo(n,t);return!r||r.type==="element"&&r.tagName==="li"}function g3e(e,t,n){const r=oo(n,t);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function y3e(e,t,n){const r=oo(n,t);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function l7(e,t,n){const r=oo(n,t);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function b3e(e,t,n){const r=oo(n,t);return!r||r.type==="element"&&r.tagName==="optgroup"}function v3e(e,t,n){const r=oo(n,t);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function w3e(e,t,n){const r=oo(n,t);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function x3e(e,t,n){const r=oo(n,t);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function S3e(e,t,n){return!oo(n,t)}function k3e(e,t,n){const r=oo(n,t);return!r||r.type==="element"&&r.tagName==="tr"}function c7(e,t,n){const r=oo(n,t);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const C3e=CX({body:_3e,colgroup:A3e,head:T3e,html:E3e,tbody:M3e});function E3e(e){const t=oo(e,-1);return!t||t.type!=="comment"}function T3e(e){const t=new Set;for(const r of e.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||n.type==="element"}function _3e(e){const t=oo(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&cE(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function A3e(e,t,n){const r=SX(n,t),o=oo(e,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&sP(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="col")}function M3e(e,t,n){const r=SX(n,t),o=oo(e,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&sP(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="tr")}const gw={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function R3e(e,t,n,r){const o=r.schema,i=o.space==="svg"?!1:r.settings.omitOptionalTags;let s=o.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const a=[];let l;o.space==="html"&&e.tagName==="svg"&&(r.schema=pv);const c=N3e(r,e.properties),u=r.all(o.space==="html"&&e.tagName==="template"?e.content:e);return r.schema=o,u&&(s=!1),(c||!i||!C3e(e,t,n))&&(a.push("<",e.tagName,c?" "+c:""),s&&(o.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!s&&(!i||!sP(e,t,n))&&a.push("</"+e.tagName+">"),a.join("")}function N3e(e,t){const n=[];let r=-1,o;if(t){for(o in t)if(t[o]!==null&&t[o]!==void 0){const i=I3e(e,o,t[o]);i&&n.push(i)}}for(;++r<n.length;){const i=e.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&i!=='"'&&i!=="'"&&(n[r]+=" ")}return n.join("")}function I3e(e,t,n){const r=yX(e.schema,t),o=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,i=e.settings.allowDangerousCharacters?0:1;let s=e.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=um(r.attribute,Object.assign({},e.settings.characterReferences,{subset:gw.name[o][i]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?wX:xX)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?l:(e.settings.preferUnquoted&&(a=um(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:gw.unquoted[o][i]}))),a!==n&&(e.settings.quoteSmart&&JS(n,s)>JS(n,e.alternative)&&(s=e.alternative),a=s+um(n,Object.assign({},e.settings.characterReferences,{subset:(s==="'"?gw.single:gw.double)[o][i],attribute:!0}))+s),l+(a&&"="+a))}const O3e=["<","&"];function EX(e,t,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:um(e.value,Object.assign({},r.settings.characterReferences,{subset:O3e}))}function P3e(e,t,n,r){return r.settings.allowDangerousHtml?e.value:EX(e,t,n,r)}function D3e(e,t,n,r){return r.all(e)}const $3e=V4e("type",{invalid:L3e,unknown:j3e,handlers:{comment:a3e,doctype:l3e,element:R3e,raw:P3e,root:D3e,text:EX}});function L3e(e){throw new Error("Expected node, not `"+e+"`")}function j3e(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const z3e={},B3e={},V3e=[];function F3e(e,t){const n=t||z3e,r=n.quote||'"',o=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:H3e,all:U3e,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||I4e,characterReferences:n.characterReferences||B3e,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?pv:bX,quote:r,alternative:o}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function H3e(e,t,n){return $3e(e,t,n,this)}function U3e(e){const t=[],n=e&&e.children||V3e;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function XS(e,t){const n=typeof e=="string"?{}:{...e.colorReplacements},r=typeof e=="string"?e:e.name;for(const[o,i]of Object.entries(t?.colorReplacements||{}))typeof i=="string"?n[o]=i:o===r&&Object.assign(n,i);return n}function pd(e,t){return e&&(t?.[e?.toLowerCase()]||e)}function G3e(e){return Array.isArray(e)?e:[e]}async function TX(e){return Promise.resolve(typeof e=="function"?e():e).then(t=>t.default||t)}function aP(e){return!e||["plaintext","txt","text","plain"].includes(e)}function _X(e){return e==="ansi"||aP(e)}function lP(e){return e==="none"}function AX(e){return lP(e)}function MX(e,t){if(!t)return e;e.properties||={},e.properties.class||=[],typeof e.properties.class=="string"&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const r of n)r&&!e.properties.class.includes(r)&&e.properties.class.push(r);return e}function uE(e,t=!1){const n=e.split(/(\r?\n)/g);let r=0;const o=[];for(let i=0;i<n.length;i+=2){const s=t?n[i]+(n[i+1]||""):n[i];o.push([s,r]),r+=n[i].length,r+=n[i+1]?.length||0}return o}function q3e(e){const t=uE(e,!0).map(([o])=>o);function n(o){if(o===e.length)return{line:t.length-1,character:t[t.length-1].length};let i=o,s=0;for(const a of t){if(i<a.length)break;i-=a.length,s++}return{line:s,character:i}}function r(o,i){let s=0;for(let a=0;a<o;a++)s+=t[a].length;return s+=i,s}return{lines:t,indexToPos:n,posToIndex:r}}const cP="light-dark()",Z3e=["color","background-color"];function W3e(e,t){let n=0;const r=[];for(const o of t)o>n&&r.push({...e,content:e.content.slice(n,o),offset:e.offset+n}),n=o;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}function K3e(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort((r,o)=>r-o);return n.length?e.map(r=>r.flatMap(o=>{const i=n.filter(s=>o.offset<s&&s<o.offset+o.content.length).map(s=>s-o.offset).sort((s,a)=>s-a);return i.length?W3e(o,i):o})):e}function Y3e(e,t,n,r,o="css-vars"){const i={content:e.content,explanation:e.explanation,offset:e.offset},s=t.map(u=>QS(e.variants[u])),a=new Set(s.flatMap(u=>Object.keys(u))),l={},c=(u,f)=>{const p=f==="color"?"":f==="background-color"?"-bg":`-${f}`;return n+t[u]+(f==="color"?"":p)};return s.forEach((u,f)=>{for(const p of a){const m=u[p]||"inherit";if(f===0&&r&&Z3e.includes(p))if(r===cP&&s.length>1){const y=t.findIndex(E=>E==="light"),b=t.findIndex(E=>E==="dark");if(y===-1||b===-1)throw new Vr('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const x=s[y][p]||"inherit",S=s[b][p]||"inherit";l[p]=`light-dark(${x}, ${S})`,o==="css-vars"&&(l[c(f,p)]=m)}else l[p]=m;else o==="css-vars"&&(l[c(f,p)]=m)}}),i.htmlStyle=l,i}function QS(e){const t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&Ko.Italic&&(t["font-style"]="italic"),e.fontStyle&Ko.Bold&&(t["font-weight"]="bold");const n=[];e.fontStyle&Ko.Underline&&n.push("underline"),e.fontStyle&Ko.Strikethrough&&n.push("line-through"),n.length&&(t["text-decoration"]=n.join(" "))}return t}function RN(e){return typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t}:${n}`).join(";")}const RX=new WeakMap;function dE(e,t){RX.set(e,t)}function nb(e){return RX.get(e)}class ag{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(t,n){return new ag(Object.fromEntries(G3e(n).map(r=>[r,EN])),t)}constructor(...t){if(t.length===2){const[n,r]=t;this.lang=r,this._stacks=n}else{const[n,r,o]=t;this.lang=r,this._stacks={[o]:n}}}getInternalStack(t=this.theme){return this._stacks[t]}getScopes(t=this.theme){return J3e(this._stacks[t])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function J3e(e){const t=[],n=new Set;function r(o){if(n.has(o))return;n.add(o);const i=o?.nameScopesList?.scopeName;i&&t.push(i),o.parent&&r(o.parent)}return r(e),t}function X3e(e,t){if(!(e instanceof ag))throw new Vr("Invalid grammar state");return e.getInternalStack(t)}function Q3e(){const e=new WeakMap;function t(n){if(!e.has(n.meta)){let r=function(s){if(typeof s=="number"){if(s<0||s>n.source.length)throw new Vr(`Invalid decoration offset: ${s}. Code length: ${n.source.length}`);return{...o.indexToPos(s),offset:s}}else{const a=o.lines[s.line];if(a===void 0)throw new Vr(`Invalid decoration position ${JSON.stringify(s)}. Lines length: ${o.lines.length}`);let l=s.character;if(l<0&&(l=a.length+l),l<0||l>a.length)throw new Vr(`Invalid decoration position ${JSON.stringify(s)}. Line ${s.line} length: ${a.length}`);return{...s,character:l,offset:o.posToIndex(s.line,l)}}};const o=q3e(n.source),i=(n.options.decorations||[]).map(s=>({...s,start:r(s.start),end:r(s.end)}));ePe(i),e.set(n.meta,{decorations:i,converter:o,source:n.source})}return e.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const o=t(this).decorations.flatMap(s=>[s.start.offset,s.end.offset]);return K3e(n,o)},code(n){if(!this.options.decorations?.length)return;const r=t(this),o=Array.from(n.children).filter(u=>u.type==="element"&&u.tagName==="span");if(o.length!==r.converter.lines.length)throw new Vr(`Number of lines in code element (${o.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function i(u,f,p,m){const y=o[u];let b="",x=-1,S=-1;if(f===0&&(x=0),p===0&&(S=0),p===Number.POSITIVE_INFINITY&&(S=y.children.length),x===-1||S===-1)for(let T=0;T<y.children.length;T++)b+=NX(y.children[T]),x===-1&&b.length===f&&(x=T+1),S===-1&&b.length===p&&(S=T+1);if(x===-1)throw new Vr(`Failed to find start index for decoration ${JSON.stringify(m.start)}`);if(S===-1)throw new Vr(`Failed to find end index for decoration ${JSON.stringify(m.end)}`);const E=y.children.slice(x,S);if(!m.alwaysWrap&&E.length===y.children.length)a(y,m,"line");else if(!m.alwaysWrap&&E.length===1&&E[0].type==="element")a(E[0],m,"token");else{const T={type:"element",tagName:"span",properties:{},children:E};a(T,m,"wrapper"),y.children.splice(x,E.length,T)}}function s(u,f){o[u]=a(o[u],f,"line")}function a(u,f,p){const m=f.properties||{},y=f.transform||(b=>b);return u.tagName=f.tagName||"span",u.properties={...u.properties,...m,class:u.properties.class},f.properties?.class&&MX(u,f.properties.class),u=y(u,p)||u,u}const l=[],c=r.decorations.sort((u,f)=>f.start.offset-u.start.offset||u.end.offset-f.end.offset);for(const u of c){const{start:f,end:p}=u;if(f.line===p.line)i(f.line,f.character,p.character,u);else if(f.line<p.line){i(f.line,f.character,Number.POSITIVE_INFINITY,u);for(let m=f.line+1;m<p.line;m++)l.unshift(()=>s(m,u));i(p.line,0,p.character,u)}}l.forEach(u=>u())}}}function ePe(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new Vr(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){const o=e[r],i=n.start.offset<=o.start.offset&&o.start.offset<n.end.offset,s=n.start.offset<o.end.offset&&o.end.offset<=n.end.offset,a=o.start.offset<=n.start.offset&&n.start.offset<o.end.offset,l=o.start.offset<n.end.offset&&n.end.offset<=o.end.offset;if(i||s||a||l){if(i&&s||a&&l||a&&n.start.offset===n.end.offset||s&&o.start.offset===o.end.offset)continue;throw new Vr(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(o.start)} intersect.`)}}}}function NX(e){return e.type==="text"?e.value:e.type==="element"?e.children.map(NX).join(""):""}const tPe=[Q3e()];function ek(e){return[...e.transformers||[],...tPe]}var Pf=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],EA={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function nPe(e,t){const n=e.indexOf("\x1B",t);if(n!==-1&&e[n+1]==="["){const r=e.indexOf("m",n);if(r!==-1)return{sequence:e.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:e.length}}function u7(e){const t=e.shift();if(t==="2"){const n=e.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(t==="5"){const n=e.shift();if(n)return{type:"table",index:Number(n)}}}function rPe(e){const t=[];for(;e.length>0;){const n=e.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)t.push({type:"resetAll"});else if(r<=9)EA[r]&&t.push({type:"setDecoration",value:EA[r]});else if(r<=29){const o=EA[r-20];o&&(t.push({type:"resetDecoration",value:o}),o==="dim"&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:Pf[r-30]}});else if(r===38){const o=u7(e);o&&t.push({type:"setForegroundColor",value:o})}else if(r===39)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:Pf[r-40]}});else if(r===48){const o=u7(e);o&&t.push({type:"setBackgroundColor",value:o})}else r===49?t.push({type:"resetBackgroundColor"}):r===53?t.push({type:"setDecoration",value:"overline"}):r===55?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:Pf[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:Pf[r-100+8]}})}return t}function oPe(){let e=null,t=null,n=new Set;return{parse(r){const o=[];let i=0;do{const s=nPe(r,i),a=s.sequence?r.substring(i,s.startPosition):r.substring(i);if(a.length>0&&o.push({value:a,foreground:e,background:t,decorations:new Set(n)}),s.sequence){const l=rPe(s.sequence);for(const c of l)c.type==="resetAll"?(e=null,t=null,n.clear()):c.type==="resetForegroundColor"?e=null:c.type==="resetBackgroundColor"?t=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?e=c.value:c.type==="setBackgroundColor"?t=c.value:c.type==="setDecoration"&&n.add(c.value)}i=s.position}while(i<r.length);return o}}}var iPe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function sPe(e=iPe){function t(a){return e[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function o(){if(r)return r;r=[];for(let c=0;c<Pf.length;c++)r.push(t(Pf[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let f=0;f<6;f++)r.push(n([a[c],a[u],a[f]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function i(a){return o()[a]}function s(a){switch(a.type){case"named":return t(a.name);case"rgb":return n(a.rgb);case"table":return i(a.index)}}return{value:s}}function aPe(e,t,n){const r=XS(e,n),o=uE(t),i=sPe(Object.fromEntries(Pf.map(a=>[a,e.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),s=oPe();return o.map(a=>s.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?i.value(l.background):e.bg,u=l.foreground?i.value(l.foreground):e.fg):(c=l.foreground?i.value(l.foreground):e.fg,u=l.background?i.value(l.background):void 0),c=pd(c,r),u=pd(u,r),l.decorations.has("dim")&&(c=lPe(c));let f=Ko.None;return l.decorations.has("bold")&&(f|=Ko.Bold),l.decorations.has("italic")&&(f|=Ko.Italic),l.decorations.has("underline")&&(f|=Ko.Underline),l.decorations.has("strikethrough")&&(f|=Ko.Strikethrough),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:f}}))}function lPe(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(t)if(t[3]){const r=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${r}`}else return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map(r=>`${r}${r}`).join("")}80`;const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}function uP(e,t,n={}){const{lang:r="text",theme:o=e.getLoadedThemes()[0]}=n;if(aP(r)||lP(o))return uE(t).map(l=>[{content:l[0],offset:l[1]}]);const{theme:i,colorMap:s}=e.setTheme(o);if(r==="ansi")return aPe(i,t,n);const a=e.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new Vr(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(i.name))throw new Vr(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return uPe(t,a,i,s,n)}function cPe(...e){if(e.length===2)return nb(e[1]);const[t,n,r={}]=e,{lang:o="text",theme:i=t.getLoadedThemes()[0]}=r;if(aP(o)||lP(i))throw new Vr("Plain language does not have grammar state");if(o==="ansi")throw new Vr("ANSI language does not have grammar state");const{theme:s,colorMap:a}=t.setTheme(i),l=t.getLanguage(o);return new ag(tk(n,l,s,a,r).stateStack,l.name,s.name)}function uPe(e,t,n,r,o){const i=tk(e,t,n,r,o),s=new ag(tk(e,t,n,r,o).stateStack,t.name,n.name);return dE(i.tokens,s),i.tokens}function tk(e,t,n,r,o){const i=XS(n,o),{tokenizeMaxLineLength:s=0,tokenizeTimeLimit:a=500}=o,l=uE(e);let c=o.grammarState?X3e(o.grammarState,n.name)??EN:o.grammarContextCode!=null?tk(o.grammarContextCode,t,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:EN,u=[];const f=[];for(let p=0,m=l.length;p<m;p++){const[y,b]=l[p];if(y===""){u=[],f.push([]);continue}if(s>0&&y.length>=s){u=[],f.push([{content:y,offset:b,color:"",fontStyle:0}]);continue}let x,S,E;o.includeExplanation&&(x=t.tokenizeLine(y,c,a),S=x.tokens,E=0);const T=t.tokenizeLine2(y,c,a),A=T.tokens.length/2;for(let M=0;M<A;M++){const R=T.tokens[2*M],O=M+1<A?T.tokens[2*M+2]:y.length;if(R===O)continue;const I=T.tokens[2*M+1],L=pd(r[Am.getForeground(I)],i),$=Am.getFontStyle(I),B={content:y.substring(R,O),offset:b+R,color:L,fontStyle:$};if(o.includeExplanation){const H=[];if(o.includeExplanation!=="scopeName")for(const W of n.settings){let K;switch(typeof W.scope){case"string":K=W.scope.split(/,/).map(z=>z.trim());break;case"object":K=W.scope;break;default:continue}H.push({settings:W,selectors:K.map(z=>z.split(/ /))})}B.explanation=[];let V=0;for(;R+V<O;){const W=S[E],K=y.substring(W.startIndex,W.endIndex);V+=K.length,B.explanation.push({content:K,scopes:o.includeExplanation==="scopeName"?dPe(W.scopes):fPe(H,W.scopes)}),E+=1}}u.push(B)}f.push(u),u=[],c=T.ruleStack}return{tokens:f,stateStack:c}}function dPe(e){return e.map(t=>({scopeName:t}))}function fPe(e,t){const n=[];for(let r=0,o=t.length;r<o;r++){const i=t[r];n[r]={scopeName:i,themeMatches:pPe(e,i,t.slice(0,r))}}return n}function d7(e,t){return e===t||t.substring(0,e.length)===e&&t[e.length]==="."}function hPe(e,t,n){if(!d7(e[e.length-1],t))return!1;let r=e.length-2,o=n.length-1;for(;r>=0&&o>=0;)d7(e[r],n[o])&&(r-=1),o-=1;return r===-1}function pPe(e,t,n){const r=[];for(const{selectors:o,settings:i}of e)for(const s of o)if(hPe(s,t,n)){r.push(i);break}return r}function IX(e,t,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),o=r.map(l=>{const c=uP(e,t,{...n,theme:l.theme}),u=nb(c),f=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:f}}),i=mPe(...o.map(l=>l.tokens)),s=i[0].map((l,c)=>l.map((u,f)=>{const p={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(p.explanation=u.explanation),i.forEach((m,y)=>{const{content:b,explanation:x,offset:S,...E}=m[c][f];p.variants[r[y].color]=E}),p})),a=o[0].state?new ag(Object.fromEntries(o.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),o[0].state.lang):void 0;return a&&dE(s,a),s}function mPe(...e){const t=e.map(()=>[]),n=e.length;for(let r=0;r<e[0].length;r++){const o=e.map(l=>l[r]),i=t.map(()=>[]);t.forEach((l,c)=>l.push(i[c]));const s=o.map(()=>0),a=o.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(i[c].push(u),s[c]+=1,a[c]=o[c][s[c]]):(i[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return t}function nk(e,t,n){let r,o,i,s,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-",colorsRendering:f="css-vars"}=n,p=Object.entries(n.themes).filter(S=>S[1]).map(S=>({color:S[0],theme:S[1]})).sort((S,E)=>S.color===c?-1:E.color===c?1:0);if(p.length===0)throw new Vr("`themes` option must not be empty");const m=IX(e,t,n);if(l=nb(m),c&&cP!==c&&!p.find(S=>S.color===c))throw new Vr(`\`themes\` option must contain the defaultColor key \`${c}\``);const y=p.map(S=>e.getTheme(S.theme)),b=p.map(S=>S.color);i=m.map(S=>S.map(E=>Y3e(E,b,u,c,f))),l&&dE(i,l);const x=p.map(S=>XS(S.theme,n));o=f7(p,y,x,u,c,"fg",f),r=f7(p,y,x,u,c,"bg",f),s=`shiki-themes ${y.map(S=>S.name).join(" ")}`,a=c?void 0:[o,r].join(";")}else if("theme"in n){const c=XS(n.theme,n);i=uP(e,t,n);const u=e.getTheme(n.theme);r=pd(u.bg,c),o=pd(u.fg,c),s=u.name,l=nb(i)}else throw new Vr("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:o,bg:r,themeName:s,rootStyle:a,grammarState:l}}function f7(e,t,n,r,o,i,s){return e.map((a,l)=>{const c=pd(t[l][i],n[l])||"inherit",u=`${r+a.color}${i==="bg"?"-bg":""}:${c}`;if(l===0&&o){if(o===cP&&e.length>1){const f=e.findIndex(b=>b.color==="light"),p=e.findIndex(b=>b.color==="dark");if(f===-1||p===-1)throw new Vr('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const m=pd(t[f][i],n[f])||"inherit",y=pd(t[p][i],n[p])||"inherit";return`light-dark(${m}, ${y});${u}`}return c}return s==="css-vars"?u:null}).filter(a=>!!a).join(";")}function rk(e,t,n,r={meta:{},options:n,codeToHast:(o,i)=>rk(e,o,i),codeToTokens:(o,i)=>nk(e,o,i)}){let o=t;for(const y of ek(n))o=y.preprocess?.call(r,o,n)||o;let{tokens:i,fg:s,bg:a,themeName:l,rootStyle:c,grammarState:u}=nk(e,o,n);const{mergeWhitespaces:f=!0,mergeSameStyleTokens:p=!1}=n;f===!0?i=yPe(i):f==="never"&&(i=bPe(i)),p&&(i=vPe(i));const m={...r,get source(){return o}};for(const y of ek(n))i=y.tokens?.call(m,i)||i;return gPe(i,{...n,fg:s,bg:a,themeName:l,rootStyle:c},m,u)}function gPe(e,t,n,r=nb(e)){const o=ek(t),i=[],s={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=t;let c={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter(([y])=>!y.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:i};const f=[],p={...n,structure:a,addClassToHast:MX,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return s},get pre(){return c},get code(){return u},get lines(){return f}};if(e.forEach((y,b)=>{b&&(a==="inline"?s.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&i.push({type:"text",value:`
`}));let x={type:"element",tagName:"span",properties:{class:"line"},children:[]},S=0;for(const E of y){let T={type:"element",tagName:"span",properties:{...E.htmlAttrs},children:[{type:"text",value:E.content}]};const A=RN(E.htmlStyle||QS(E));A&&(T.properties.style=A);for(const M of o)T=M?.span?.call(p,T,b+1,S,x,E)||T;a==="inline"?s.children.push(T):a==="classic"&&x.children.push(T),S+=E.content.length}if(a==="classic"){for(const E of o)x=E?.line?.call(p,x,b+1)||x;f.push(x),i.push(x)}}),a==="classic"){for(const y of o)u=y?.code?.call(p,u)||u;c.children.push(u);for(const y of o)c=y?.pre?.call(p,c)||c;s.children.push(c)}let m=s;for(const y of o)m=y?.root?.call(p,m)||m;return r&&dE(m,r),m}function yPe(e){return e.map(t=>{const n=[];let r="",o=0;return t.forEach((i,s)=>{const l=!(i.fontStyle&&(i.fontStyle&Ko.Underline||i.fontStyle&Ko.Strikethrough));l&&i.content.match(/^\s+$/)&&t[s+1]?(o||(o=i.offset),r+=i.content):r?(l?n.push({...i,offset:o,content:r+i.content}):n.push({content:r,offset:o},i),o=0,r=""):n.push(i)}),n})}function bPe(e){return e.map(t=>t.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,o,i,s]=r;if(!o&&!s)return n;const a=[{...n,offset:n.offset+o.length,content:i}];return o&&a.unshift({content:o,offset:n.offset}),s&&a.push({content:s,offset:n.offset+o.length+i.length}),a}))}function vPe(e){return e.map(t=>{const n=[];for(const r of t){if(n.length===0){n.push({...r});continue}const o=n[n.length-1],i=RN(o.htmlStyle||QS(o)),s=RN(r.htmlStyle||QS(r)),a=o.fontStyle&&(o.fontStyle&Ko.Underline||o.fontStyle&Ko.Strikethrough),l=r.fontStyle&&(r.fontStyle&Ko.Underline||r.fontStyle&Ko.Strikethrough);!a&&!l&&i===s?o.content+=r.content:n.push({...r})}return n})}const wPe=F3e;function xPe(e,t,n){const r={meta:{},options:n,codeToHast:(i,s)=>rk(e,i,s),codeToTokens:(i,s)=>nk(e,i,s)};let o=wPe(rk(e,t,n,r));for(const i of ek(n))o=i.postprocess?.call(r,o,n)||o;return o}const h7={light:"#333333",dark:"#bbbbbb"},p7={light:"#fffffe",dark:"#1e1e1e"},m7="__shiki_resolved";function dP(e){if(e?.[m7])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||="dark",t.colorReplacements={...t.colorReplacements},t.settings||=[];let{bg:n,fg:r}=t;if(!n||!r){const a=t.settings?t.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&t?.colors?.["editor.foreground"]&&(r=t.colors["editor.foreground"]),!n&&t?.colors?.["editor.background"]&&(n=t.colors["editor.background"]),r||(r=t.type==="light"?h7.light:h7.dark),n||(n=t.type==="light"?p7.light:p7.dark),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let o=0;const i=new Map;function s(a){if(i.has(a))return i.get(a);o+=1;const l=`#${o.toString(16).padStart(8,"0").toLowerCase()}`;return t.colorReplacements?.[`#${l}`]?s(a):(i.set(a,l),l)}t.settings=t.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const u={...a,settings:{...a.settings}};if(l){const f=s(a.settings.foreground);t.colorReplacements[f]=a.settings.foreground,u.settings.foreground=f}if(c){const f=s(a.settings.background);t.colorReplacements[f]=a.settings.background,u.settings.background=f}return u});for(const a of Object.keys(t.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!t.colors[a]?.startsWith("#")){const l=s(t.colors[a]);t.colorReplacements[l]=t.colors[a],t.colors[a]=l}return Object.defineProperty(t,m7,{enumerable:!1,writable:!1,value:!0}),t}async function OX(e){return Array.from(new Set((await Promise.all(e.filter(t=>!_X(t)).map(async t=>await TX(t).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function PX(e){return(await Promise.all(e.map(async n=>AX(n)?null:dP(await TX(n))))).filter(n=>!!n)}let SPe=3;function kPe(e,t=3){t>SPe||console.trace(`[SHIKI DEPRECATE]: ${e}`)}class Hp extends Error{constructor(t){super(t),this.name="ShikiError"}}class CPe extends N4e{constructor(t,n,r,o={}){super(t),this._resolver=t,this._themes=n,this._langs=r,this._alias=o,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(t){return typeof t=="string"?this._resolvedThemes.get(t):this.loadTheme(t)}loadTheme(t){const n=dP(t);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(t){let n=this._textmateThemeCache.get(t);n||(n=qS.createFromRawTheme(t),this._textmateThemeCache.set(t,n)),this._syncRegistry.setTheme(n)}getGrammar(t){if(this._alias[t]){const n=new Set([t]);for(;this._alias[t];){if(t=this._alias[t],n.has(t))throw new Hp(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return this._resolvedGrammars.get(t)}loadLanguage(t){if(this.getGrammar(t.name))return;const n=new Set([...this._langMap.values()].filter(i=>i.embeddedLangsLazy?.includes(t.name)));this._resolver.addLanguage(t);const r={balancedBracketSelectors:t.balancedBracketSelectors||["*"],unbalancedBracketSelectors:t.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(t.scopeName,t);const o=this.loadGrammarWithConfiguration(t.scopeName,1,r);if(o.name=t.name,this._resolvedGrammars.set(t.name,o),t.aliases&&t.aliases.forEach(i=>{this._alias[i]=t.name}),this._loadedLanguagesCache=null,n.size)for(const i of n)this._resolvedGrammars.delete(i.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(i.scopeName),this._syncRegistry?._grammars?.delete(i.scopeName),this.loadLanguage(this._langMap.get(i.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(t){for(const o of t)this.resolveEmbeddedLanguages(o);const n=Array.from(this._langGraph.entries()),r=n.filter(([o,i])=>!i);if(r.length){const o=n.filter(([i,s])=>s&&s.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(i=>!r.includes(i));throw new Hp(`Missing languages ${r.map(([i])=>`\`${i}\``).join(", ")}, required by ${o.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[o,i]of n)this._resolver.addLanguage(i);for(const[o,i]of n)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(t){if(this._langMap.set(t.name,t),this._langGraph.set(t.name,t),t.embeddedLangs)for(const n of t.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class EPe{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(t,n){this._onigLib={createOnigScanner:r=>t.createScanner(r),createOnigString:r=>t.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(t){return this._langs.get(t)}loadGrammar(t){return this._scopeToLang.get(t)}addLanguage(t){this._langs.set(t.name,t),t.aliases&&t.aliases.forEach(n=>{this._langs.set(n,t)}),this._scopeToLang.set(t.scopeName,t),t.injectTo&&t.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(t.scopeName)})}getInjections(t){const n=t.split(".");let r=[];for(let o=1;o<=n.length;o++){const i=n.slice(0,o).join(".");r=[...r,...this._injections.get(i)||[]]}return r}}let wy=0;function TPe(e){wy+=1,e.warnings!==!1&&wy>=10&&wy%10===0&&console.warn(`[Shiki] ${wy} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new Hp("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(dP),o=new EPe(e.engine,n),i=new CPe(o,r,n,e.langAlias);let s;function a(E){x();const T=i.getGrammar(typeof E=="string"?E:E.name);if(!T)throw new Hp(`Language \`${E}\` not found, you may need to load it first`);return T}function l(E){if(E==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};x();const T=i.getTheme(E);if(!T)throw new Hp(`Theme \`${E}\` not found, you may need to load it first`);return T}function c(E){x();const T=l(E);s!==E&&(i.setTheme(T),s=E);const A=i.getColorMap();return{theme:T,colorMap:A}}function u(){return x(),i.getLoadedThemes()}function f(){return x(),i.getLoadedLanguages()}function p(...E){x(),i.loadLanguages(E.flat(1))}async function m(...E){return p(await OX(E))}function y(...E){x();for(const T of E.flat(1))i.loadTheme(T)}async function b(...E){return x(),y(await PX(E))}function x(){if(t)throw new Hp("Shiki instance has been disposed")}function S(){t||(t=!0,i.dispose(),wy-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:f,loadLanguage:m,loadLanguageSync:p,loadTheme:b,loadThemeSync:y,dispose:S,[Symbol.dispose]:S}}async function _Pe(e){e.engine||kPe("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,n,r]=await Promise.all([PX(e.themes||[]),OX(e.langs||[]),e.engine]);return TPe({...e,themes:t,langs:n,engine:r})}async function APe(e){const t=await _Pe(e);return{getLastGrammarState:(...n)=>cPe(t,...n),codeToTokensBase:(n,r)=>uP(t,n,r),codeToTokensWithThemes:(n,r)=>IX(t,n,r),codeToTokens:(n,r)=>nk(t,n,r),codeToHast:(n,r)=>rk(t,n,r),codeToHtml:(n,r)=>xPe(t,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function MPe(e){const t=e.langs,n=e.themes,r=e.engine;async function o(i){function s(f){if(typeof f=="string"){if(_X(f))return[];f=i.langAlias?.[f]||f;const p=t[f];if(!p)throw new Vr(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return p}return f}function a(f){if(AX(f))return"none";if(typeof f=="string"){const p=n[f];if(!p)throw new Vr(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return p}return f}const l=(i.themes??[]).map(f=>a(f)),c=(i.langs??[]).map(f=>s(f)),u=await APe({engine:i.engine??r(),...i,themes:l,langs:c});return{...u,loadLanguage(...f){return u.loadLanguage(...f.map(s))},loadTheme(...f){return u.loadTheme(...f.map(a))},getBundledLanguages(){return t},getBundledThemes(){return n}}}return o}function lg(e){if([...e].length!==1)throw new Error(`Expected "${e}" to be a single code point`);return e.codePointAt(0)}function RPe(e,t,n){return e.has(t)||e.set(t,n),e.get(t)}const fP=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),yo=String.raw;function cg(e,t){if(e==null)throw new Error(t??"Value expected");return e}const DX=yo`\[\^?`,$X=`c.? | C(?:-.?)?|${yo`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${yo`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${yo`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${yo`o\{[^\}]*\}?`}|${yo`\d{1,3}`}`,hP=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,yw=new RegExp(yo`
  \\ (?:
    ${$X}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*[^\)]*\)?
  )?
  | (?:${hP.source})+
  | ${DX}
  | .
`.replace(/\s+/g,""),"gsu"),TA=new RegExp(yo`
  \\ (?:
    ${$X}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${DX}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function NPe(e,t={}){const n={flags:"",...t,rules:{captureGroup:!1,singleline:!1,...t.rules}};if(typeof e!="string")throw new Error("String expected as pattern");const r=YPe(n.flags),o=[r.extended],i={captureGroup:n.rules.captureGroup,getCurrentModX(){return o.at(-1)},numOpenGroups:0,popModX(){o.pop()},pushModX(f){o.push(f)},replaceCurrentModX(f){o[o.length-1]=f},singleline:n.rules.singleline};let s=[],a;for(yw.lastIndex=0;a=yw.exec(e);){const f=IPe(i,e,a[0],yw.lastIndex);f.tokens?s.push(...f.tokens):f.token&&s.push(f.token),f.lastIndex!==void 0&&(yw.lastIndex=f.lastIndex)}const l=[];let c=0;s.filter(f=>f.type==="GroupOpen").forEach(f=>{f.kind==="capturing"?f.number=++c:f.raw==="("&&l.push(f)}),c||l.forEach((f,p)=>{f.kind="capturing",f.number=p+1});const u=c||l.length;return{tokens:s.map(f=>f.type==="EscapedNumber"?XPe(f,u):f).flat(),flags:r}}function IPe(e,t,n,r){const[o,i]=n;if(n==="["||n==="[^"){const s=OPe(t,n,r);return{tokens:s.tokens,lastIndex:s.lastIndex}}if(o==="\\"){if("AbBGyYzZ".includes(i))return{token:g7(n,n)};if(/^\\g[<']/.test(n)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(n))throw new Error(`Invalid group name "${n}"`);return{token:HPe(n)}}if(/^\\k[<']/.test(n)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(n))throw new Error(`Invalid group name "${n}"`);return{token:jX(n)}}if(i==="K")return{token:zX("keep",n)};if(i==="N"||i==="R")return{token:Df("newline",n,{negate:i==="N"})};if(i==="O")return{token:Df("any",n)};if(i==="X")return{token:Df("text_segment",n)};const s=LX(n,{inCharClass:!1});return Array.isArray(s)?{tokens:s}:{token:s}}if(o==="("){if(i==="*")return{token:ZPe(n)};if(n==="(?{")throw new Error(`Unsupported callout "${n}"`);if(n.startsWith("(?#")){if(t[r]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:r+1}}if(/^\(\?[-imx]+[:)]$/.test(n))return{token:qPe(n,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,n==="("&&!e.captureGroup||n==="(?:")return{token:$p("group",n)};if(n==="(?>")return{token:$p("atomic",n)};if(n==="(?="||n==="(?!"||n==="(?<="||n==="(?<!")return{token:$p(n[2]==="<"?"lookbehind":"lookahead",n,{negate:n.endsWith("!")})};if(n==="("&&e.captureGroup||n.startsWith("(?<")&&n.endsWith(">")||n.startsWith("(?'")&&n.endsWith("'"))return{token:$p("capturing",n,{...n!=="("&&{name:n.slice(3,-1)}})};if(n.startsWith("(?~")){if(n==="(?~|")throw new Error(`Unsupported absence function kind "${n}"`);return{token:$p("absence_repeater",n)}}throw n==="(?("?new Error(`Unsupported conditional "${n}"`):new Error(`Invalid or unsupported group option "${n}"`)}if(n===")"){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:BPe(n)}}if(e.getCurrentModX()){if(n==="#"){const s=t.indexOf(`
`,r);return{lastIndex:s===-1?t.length:s}}if(/^\s$/.test(n)){const s=/\s+/y;return s.lastIndex=r,{lastIndex:s.exec(t)?s.lastIndex:r}}}if(n===".")return{token:Df("dot",n)};if(n==="^"||n==="$"){const s=e.singleline?{"^":yo`\A`,$:yo`\Z`}[n]:n;return{token:g7(s,n)}}return n==="|"?{token:DPe(n)}:hP.test(n)?{tokens:QPe(n)}:{token:Vc(lg(n),n)}}function OPe(e,t,n){const r=[y7(t[1]==="^",t)];let o=1,i;for(TA.lastIndex=n;i=TA.exec(e);){const s=i[0];if(s[0]==="["&&s[1]!==":")o++,r.push(y7(s[1]==="^",s));else if(s==="]"){if(r.at(-1).type==="CharacterClassOpen")r.push(Vc(93,s));else if(o--,r.push($Pe(s)),!o)break}else{const a=PPe(s);Array.isArray(a)?r.push(...a):r.push(a)}}return{tokens:r,lastIndex:TA.lastIndex||e.length}}function PPe(e){if(e[0]==="\\")return LX(e,{inCharClass:!0});if(e[0]==="["){const t=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(e);if(!t||!fP.has(t.groups.name))throw new Error(`Invalid POSIX class "${e}"`);return Df("posix",e,{value:t.groups.name,negate:!!t.groups.negate})}return e==="-"?LPe(e):e==="&&"?jPe(e):Vc(lg(e),e)}function LX(e,{inCharClass:t}){const n=e[1];if(n==="c"||n==="C")return GPe(e);if("dDhHsSwW".includes(n))return WPe(e);if(e.startsWith(yo`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${e}"`);if(/^\\[pP]\{/.test(e)){if(e.length===3)throw new Error(`Incomplete or invalid Unicode property "${e}"`);return KPe(e)}if(new RegExp("^\\\\x[89A-Fa-f]\\p{AHex}","u").test(e))try{const r=e.split(/\\x/).slice(1).map(s=>parseInt(s,16)),o=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(r)),i=new TextEncoder;return[...o].map(s=>{const a=[...i.encode(s)].map(l=>`\\x${l.toString(16)}`).join("");return Vc(lg(s),a)})}catch{throw new Error(`Multibyte code "${e}" incomplete or invalid in Oniguruma`)}if(n==="u"||n==="x")return Vc(JPe(e),e);if(b7.has(n))return Vc(b7.get(n),e);if(/\d/.test(n))return zPe(t,e);if(e==="\\")throw new Error(yo`Incomplete escape "\"`);if(n==="M")throw new Error(`Unsupported meta "${e}"`);if([...e].length===2)return Vc(e.codePointAt(1),e);throw new Error(`Unexpected escape "${e}"`)}function DPe(e){return{type:"Alternator",raw:e}}function g7(e,t){return{type:"Assertion",kind:e,raw:t}}function jX(e){return{type:"Backreference",raw:e}}function Vc(e,t){return{type:"Character",value:e,raw:t}}function $Pe(e){return{type:"CharacterClassClose",raw:e}}function LPe(e){return{type:"CharacterClassHyphen",raw:e}}function jPe(e){return{type:"CharacterClassIntersector",raw:e}}function y7(e,t){return{type:"CharacterClassOpen",negate:e,raw:t}}function Df(e,t,n={}){return{type:"CharacterSet",kind:e,...n,raw:t}}function zX(e,t,n={}){return e==="keep"?{type:"Directive",kind:e,raw:t}:{type:"Directive",kind:e,flags:cg(n.flags),raw:t}}function zPe(e,t){return{type:"EscapedNumber",inCharClass:e,raw:t}}function BPe(e){return{type:"GroupClose",raw:e}}function $p(e,t,n={}){return{type:"GroupOpen",kind:e,...n,raw:t}}function VPe(e,t,n,r){return{type:"NamedCallout",kind:e,tag:t,arguments:n,raw:r}}function FPe(e,t,n,r){return{type:"Quantifier",kind:e,min:t,max:n,raw:r}}function HPe(e){return{type:"Subroutine",raw:e}}const UPe=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),b7=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function GPe(e){const t=e[1]==="c"?e[2]:e[3];if(!t||!/[A-Za-z]/.test(t))throw new Error(`Unsupported control character "${e}"`);return Vc(lg(t.toUpperCase())-64,e)}function qPe(e,t){let{on:n,off:r}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(e).groups;r??="";const o=(t.getCurrentModX()||n.includes("x"))&&!r.includes("x"),i=w7(n),s=w7(r),a={};if(i&&(a.enable=i),s&&(a.disable=s),e.endsWith(")"))return t.replaceCurrentModX(o),zX("flags",e,{flags:a});if(e.endsWith(":"))return t.pushModX(o),t.numOpenGroups++,$p("group",e,{...(i||s)&&{flags:a}});throw new Error(`Unexpected flag modifier "${e}"`)}function ZPe(e){const t=/\(\*(?<name>[A-Za-z_]\w*)?(?:\[(?<tag>(?:[A-Za-z_]\w*)?)\])?(?:\{(?<args>[^}]*)\})?\)/.exec(e);if(!t)throw new Error(`Incomplete or invalid named callout "${e}"`);const{name:n,tag:r,args:o}=t.groups;if(!n)throw new Error(`Invalid named callout "${e}"`);if(r==="")throw new Error(`Named callout tag with empty value not allowed "${e}"`);const i=o?o.split(",").filter(u=>u!=="").map(u=>/^[+-]?\d+$/.test(u)?+u:u):[],[s,a,l]=i,c=UPe.has(n)?n.toLowerCase():"custom";switch(c){case"fail":case"mismatch":case"skip":if(i.length>0)throw new Error(`Named callout arguments not allowed "${i}"`);break;case"error":if(i.length>1)throw new Error(`Named callout allows only one argument "${i}"`);if(typeof s=="string")throw new Error(`Named callout argument must be a number "${s}"`);break;case"max":if(!i.length||i.length>2)throw new Error(`Named callout must have one or two arguments "${i}"`);if(typeof s=="string"&&!/^[A-Za-z_]\w*$/.test(s))throw new Error(`Named callout argument one must be a tag or number "${s}"`);if(i.length===2&&(typeof a=="number"||!/^[<>X]$/.test(a)))throw new Error(`Named callout optional argument two must be '<', '>', or 'X' "${a}"`);break;case"count":case"total_count":if(i.length>1)throw new Error(`Named callout allows only one argument "${i}"`);if(i.length===1&&(typeof s=="number"||!/^[<>X]$/.test(s)))throw new Error(`Named callout optional argument must be '<', '>', or 'X' "${s}"`);break;case"cmp":if(i.length!==3)throw new Error(`Named callout must have three arguments "${i}"`);if(typeof s=="string"&&!/^[A-Za-z_]\w*$/.test(s))throw new Error(`Named callout argument one must be a tag or number "${s}"`);if(typeof a=="number"||!/^(?:[<>!=]=|[<>])$/.test(a))throw new Error(`Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' "${a}"`);if(typeof l=="string"&&!/^[A-Za-z_]\w*$/.test(l))throw new Error(`Named callout argument three must be a tag or number "${l}"`);break;case"custom":throw new Error(`Undefined callout name "${n}"`);default:throw new Error(`Unexpected named callout kind "${c}"`)}return VPe(c,r??null,o?.split(",")??null,e)}function v7(e){let t=null,n,r;if(e[0]==="{"){const{minStr:o,maxStr:i}=/^\{(?<minStr>\d*)(?:,(?<maxStr>\d*))?/.exec(e).groups,s=1e5;if(+o>s||i&&+i>s)throw new Error("Quantifier value unsupported in Oniguruma");if(n=+o,r=i===void 0?+o:i===""?1/0:+i,n>r&&(t="possessive",[n,r]=[r,n]),e.endsWith("?")){if(t==="possessive")throw new Error('Unsupported possessive interval quantifier chain with "?"');t="lazy"}else t||(t="greedy")}else n=e[0]==="+"?1:0,r=e[0]==="?"?1:1/0,t=e[1]==="+"?"possessive":e[1]==="?"?"lazy":"greedy";return FPe(t,n,r,e)}function WPe(e){const t=e[1].toLowerCase();return Df({d:"digit",h:"hex",s:"space",w:"word"}[t],e,{negate:e[1]!==t})}function KPe(e){const{p:t,neg:n,value:r}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(e).groups;return Df("property",e,{value:r,negate:t==="P"&&!n||t==="p"&&!!n})}function w7(e){const t={};return e.includes("i")&&(t.ignoreCase=!0),e.includes("m")&&(t.dotAll=!0),e.includes("x")&&(t.extended=!0),Object.keys(t).length?t:null}function YPe(e){const t={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null};for(let n=0;n<e.length;n++){const r=e[n];if(!"imxDPSWy".includes(r))throw new Error(`Invalid flag "${r}"`);if(r==="y"){if(!/^y{[gw]}/.test(e.slice(n)))throw new Error('Invalid or unspecified flag "y" mode');t.textSegmentMode=e[n+2]==="g"?"grapheme":"word",n+=3;continue}t[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[r]]=!0}return t}function JPe(e){if(new RegExp("^(?:\\\\u(?!\\p{AHex}{4})|\\\\x(?!\\p{AHex}{1,2}|\\{\\p{AHex}{1,8}\\}))","u").test(e))throw new Error(`Incomplete or invalid escape "${e}"`);const t=e[2]==="{"?new RegExp("^\\\\x\\{\\s*(?<hex>\\p{AHex}+)","u").exec(e).groups.hex:e.slice(2);return parseInt(t,16)}function XPe(e,t){const{raw:n,inCharClass:r}=e,o=n.slice(1);if(!r&&(o!=="0"&&o.length===1||o[0]!=="0"&&+o<=t))return[jX(n)];const i=[],s=o.match(/^[0-7]+|\d/g);for(let a=0;a<s.length;a++){const l=s[a];let c;if(a===0&&l!=="8"&&l!=="9"){if(c=parseInt(l,8),c>127)throw new Error(yo`Octal encoded byte above 177 unsupported "${n}"`)}else c=lg(l);i.push(Vc(c,(a===0?"\\":"")+l))}return i}function QPe(e){const t=[],n=new RegExp(hP,"gy");let r;for(;r=n.exec(e);){const o=r[0];if(o[0]==="{"){const i=/^\{(?<min>\d+),(?<max>\d+)\}\??$/.exec(o);if(i){const{min:s,max:a}=i.groups;if(+s>+a&&o.endsWith("?")){n.lastIndex--,t.push(v7(o.slice(0,-1)));continue}}}t.push(v7(o))}return t}function BX(e,t){if(!Array.isArray(e.body))throw new Error("Expected node with body array");if(e.body.length!==1)return!1;const n=e.body[0];return!t||Object.keys(t).every(r=>t[r]===n[r])}function eDe(e){return tDe.has(e.type)}const tDe=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function VX(e,t={}){const n={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t,rules:{captureGroup:!1,singleline:!1,...t.rules}},r=NPe(e,{flags:n.flags,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline}}),o=(p,m)=>{const y=r.tokens[i.nextIndex];switch(i.parent=p,i.nextIndex++,y.type){case"Alternator":return hh();case"Assertion":return nDe(y);case"Backreference":return rDe(y,i);case"Character":return fE(y.value,{useLastValid:!!m.isCheckingRangeEnd});case"CharacterClassHyphen":return oDe(y,i,m);case"CharacterClassOpen":return iDe(y,i,m);case"CharacterSet":return sDe(y,i);case"Directive":return fDe(y.kind,{flags:y.flags});case"GroupOpen":return aDe(y,i,m);case"NamedCallout":return pDe(y.kind,y.tag,y.arguments);case"Quantifier":return lDe(y,i);case"Subroutine":return cDe(y,i);default:throw new Error(`Unexpected token type "${y.type}"`)}},i={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:n.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:n.skipBackrefValidation,skipLookbehindValidation:n.skipLookbehindValidation,skipPropertyNameValidation:n.skipPropertyNameValidation,subroutines:[],tokens:r.tokens,unicodePropertyMap:n.unicodePropertyMap,walk:o},s=gDe(hDe(r.flags));let a=s.body[0];for(;i.nextIndex<r.tokens.length;){const p=o(a,{});p.type==="Alternative"?(s.body.push(p),a=p):a.body.push(p)}const{capturingGroups:l,hasNumberedRef:c,namedGroupsByName:u,subroutines:f}=i;if(c&&u.size&&!n.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(const{ref:p}of f)if(typeof p=="number"){if(p>l.length)throw new Error("Subroutine uses a group number that's not defined");p&&(l[p-1].isSubroutined=!0)}else if(u.has(p)){if(u.get(p).length>1)throw new Error(yo`Subroutine uses a duplicate group name "\g<${p}>"`);u.get(p)[0].isSubroutined=!0}else throw new Error(yo`Subroutine uses a group name that's not defined "\g<${p}>"`);return s}function nDe({kind:e}){return NN(cg({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[e],`Unexpected assertion kind "${e}"`),{negate:e===yo`\B`||e===yo`\Y`})}function rDe({raw:e},t){const n=/^\\k[<']/.test(e),r=n?e.slice(3,-1):e.slice(1),o=(i,s=!1)=>{const a=t.capturingGroups.length;let l=!1;if(i>a)if(t.skipBackrefValidation)l=!0;else throw new Error(`Not enough capturing groups defined to the left "${e}"`);return t.hasNumberedRef=!0,IN(s?a+1-i:i,{orphan:l})};if(n){const i=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(r);if(i)return o(+i.groups.num,!!i.groups.sign);if(/[-+]/.test(r))throw new Error(`Invalid backref name "${e}"`);if(!t.namedGroupsByName.has(r))throw new Error(`Group name not defined to the left "${e}"`);return IN(r)}return o(+r)}function oDe(e,t,n){const{tokens:r,walk:o}=t,i=t.parent,s=i.body.at(-1),a=r[t.nextIndex];if(!n.isCheckingRangeEnd&&s&&s.type!=="CharacterClass"&&s.type!=="CharacterClassRange"&&a&&a.type!=="CharacterClassOpen"&&a.type!=="CharacterClassClose"&&a.type!=="CharacterClassIntersector"){const l=o(i,{...n,isCheckingRangeEnd:!0});if(s.type==="Character"&&l.type==="Character")return i.body.pop(),dDe(s,l);throw new Error("Invalid character class range")}return fE(lg("-"))}function iDe({negate:e},t,n){const{tokens:r,walk:o}=t,i=r[t.nextIndex],s=[wx()];let a=k7(i);for(;a.type!=="CharacterClassClose";){if(a.type==="CharacterClassIntersector")s.push(wx()),t.nextIndex++;else{const c=s.at(-1);c.body.push(o(c,n))}a=k7(r[t.nextIndex],i)}const l=wx({negate:e});return s.length===1?l.body=s[0].body:(l.kind="intersection",l.body=s.map(c=>c.body.length===1?c.body[0]:c)),t.nextIndex++,l}function sDe({kind:e,negate:t,value:n},r){const{normalizeUnknownPropertyNames:o,skipPropertyNameValidation:i,unicodePropertyMap:s}=r;if(e==="property"){const a=hE(n);if(fP.has(a)&&!s?.has(a))e="posix",n=a;else return Lp(n,{negate:t,normalizeUnknownPropertyNames:o,skipPropertyNameValidation:i,unicodePropertyMap:s})}return e==="posix"?mDe(n,{negate:t}):ON(e,{negate:t})}function aDe(e,t,n){const{tokens:r,capturingGroups:o,namedGroupsByName:i,skipLookbehindValidation:s,walk:a}=t,l=yDe(e),c=l.type==="AbsenceFunction",u=S7(l),f=u&&l.negate;if(l.type==="CapturingGroup"&&(o.push(l),l.name&&RPe(i,l.name,[]).push(l)),c&&n.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");let p=C7(r[t.nextIndex]);for(;p.type!=="GroupClose";){if(p.type==="Alternator")l.body.push(hh()),t.nextIndex++;else{const m=l.body.at(-1),y=a(m,{...n,isInAbsenceFunction:n.isInAbsenceFunction||c,isInLookbehind:n.isInLookbehind||u,isInNegLookbehind:n.isInNegLookbehind||f});if(m.body.push(y),(u||n.isInLookbehind)&&!s){const b="Lookbehind includes a pattern not allowed by Oniguruma";if(f||n.isInNegLookbehind){if(x7(y)||y.type==="CapturingGroup")throw new Error(b)}else if(x7(y)||S7(y)&&y.negate)throw new Error(b)}}p=C7(r[t.nextIndex])}return t.nextIndex++,l}function lDe({kind:e,min:t,max:n},r){const o=r.parent,i=o.body.at(-1);if(!i||!eDe(i))throw new Error("Quantifier requires a repeatable token");const s=HX(e,t,n,i);return o.body.pop(),s}function cDe({raw:e},t){const{capturingGroups:n,subroutines:r}=t;let o=e.slice(3,-1);const i=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(o);if(i){const a=+i.groups.num,l=n.length;if(t.hasNumberedRef=!0,o={"":a,"+":l+a,"-":l+1-a}[i.groups.sign],o<1)throw new Error("Invalid subroutine number")}else o==="0"&&(o=0);const s=UX(o);return r.push(s),s}function uDe(e,t){return{type:"AbsenceFunction",kind:e,body:mv(t?.body)}}function hh(e){return{type:"Alternative",body:GX(e?.body)}}function NN(e,t){const n={type:"Assertion",kind:e};return(e==="word_boundary"||e==="text_segment_boundary")&&(n.negate=!!t?.negate),n}function IN(e,t){const n=!!t?.orphan;return{type:"Backreference",ref:e,...n&&{orphan:n}}}function FX(e,t){const n={name:void 0,isSubroutined:!1,...t};if(n.name!==void 0&&!bDe(n.name))throw new Error(`Group name "${n.name}" invalid in Oniguruma`);return{type:"CapturingGroup",number:e,...n.name&&{name:n.name},...n.isSubroutined&&{isSubroutined:n.isSubroutined},body:mv(t?.body)}}function fE(e,t){const n={useLastValid:!1,...t};if(e>1114111){const r=e.toString(16);if(n.useLastValid)e=1114111;else throw e>1310719?new Error(`Invalid code point out of range "\\x{${r}}"`):new Error(`Invalid code point out of range in JS "\\x{${r}}"`)}return{type:"Character",value:e}}function wx(e){const t={kind:"union",negate:!1,...e};return{type:"CharacterClass",kind:t.kind,negate:t.negate,body:GX(e?.body)}}function dDe(e,t){if(t.value<e.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:t}}function ON(e,t){const n=!!t?.negate,r={type:"CharacterSet",kind:e};return(e==="digit"||e==="hex"||e==="newline"||e==="space"||e==="word")&&(r.negate=n),(e==="text_segment"||e==="newline"&&!n)&&(r.variableLength=!0),r}function fDe(e,t={}){if(e==="keep")return{type:"Directive",kind:e};if(e==="flags")return{type:"Directive",kind:e,flags:cg(t.flags)};throw new Error(`Unexpected directive kind "${e}"`)}function hDe(e){return{type:"Flags",...e}}function Ba(e){const t=e?.atomic,n=e?.flags;if(t&&n)throw new Error("Atomic group cannot have flags");return{type:"Group",...t&&{atomic:t},...n&&{flags:n},body:mv(e?.body)}}function Ef(e){const t={behind:!1,negate:!1,...e};return{type:"LookaroundAssertion",kind:t.behind?"lookbehind":"lookahead",negate:t.negate,body:mv(e?.body)}}function pDe(e,t,n){return{type:"NamedCallout",kind:e,tag:t,arguments:n}}function mDe(e,t){const n=!!t?.negate;if(!fP.has(e))throw new Error(`Invalid POSIX class "${e}"`);return{type:"CharacterSet",kind:"posix",value:e,negate:n}}function HX(e,t,n,r){if(t>n)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:t,max:n,body:r}}function gDe(e,t){return{type:"Regex",body:mv(t?.body),flags:e}}function UX(e){return{type:"Subroutine",ref:e}}function Lp(e,t){const n={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t};let r=n.unicodePropertyMap?.get(hE(e));if(!r){if(n.normalizeUnknownPropertyNames)r=vDe(e);else if(n.unicodePropertyMap&&!n.skipPropertyNameValidation)throw new Error(yo`Invalid Unicode property "\p{${e}}"`)}return{type:"CharacterSet",kind:"property",value:r??e,negate:n.negate}}function yDe({flags:e,kind:t,name:n,negate:r,number:o}){switch(t){case"absence_repeater":return uDe("repeater");case"atomic":return Ba({atomic:!0});case"capturing":return FX(o,{name:n});case"group":return Ba({flags:e});case"lookahead":case"lookbehind":return Ef({behind:t==="lookbehind",negate:r});default:throw new Error(`Unexpected group kind "${t}"`)}}function mv(e){if(e===void 0)e=[hh()];else if(!Array.isArray(e)||!e.length||!e.every(t=>t.type==="Alternative"))throw new Error("Invalid body; expected array of one or more Alternative nodes");return e}function GX(e){if(e===void 0)e=[];else if(!Array.isArray(e)||!e.every(t=>!!t.type))throw new Error("Invalid body; expected array of nodes");return e}function x7(e){return e.type==="LookaroundAssertion"&&e.kind==="lookahead"}function S7(e){return e.type==="LookaroundAssertion"&&e.kind==="lookbehind"}function bDe(e){return/^[\p{Alpha}\p{Pc}][^)]*$/u.test(e)}function vDe(e){return e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,t=>t[0].toUpperCase()+t.slice(1).toLowerCase())}function hE(e){return e.replace(/[- _]+/g,"").toLowerCase()}function k7(e,t){return cg(e,`${t?.type==="Character"&&t.value===93?"Empty":"Unclosed"} character class`)}function C7(e){return cg(e,"Unclosed group")}function i0(e,t,n=null){function r(i,s){for(let a=0;a<i.length;a++){const l=o(i[a],s,a,i);a=Math.max(-1,a+l)}}function o(i,s=null,a=null,l=null){let c=0,u=!1;const f={node:i,parent:s,key:a,container:l,root:e,remove(){bw(l).splice(Math.max(0,xp(a)+c),1),c--,u=!0},removeAllNextSiblings(){return bw(l).splice(xp(a)+1)},removeAllPrevSiblings(){const S=xp(a)+c;return c-=S,bw(l).splice(0,Math.max(0,S))},replaceWith(S,E={}){const T=!!E.traverse;l?l[Math.max(0,xp(a)+c)]=S:cg(s,"Can't replace root node")[a]=S,T&&o(S,s,a,l),u=!0},replaceWithMultiple(S,E={}){const T=!!E.traverse;if(bw(l).splice(Math.max(0,xp(a)+c),1,...S),c+=S.length-1,T){let A=0;for(let M=0;M<S.length;M++)A+=o(S[M],s,xp(a)+M+A,l)}u=!0},skip(){u=!0}},{type:p}=i,m=t["*"],y=t[p],b=typeof m=="function"?m:m?.enter,x=typeof y=="function"?y:y?.enter;if(b?.(f,n),x?.(f,n),!u)switch(p){case"AbsenceFunction":case"CapturingGroup":case"Group":r(i.body,i);break;case"Alternative":case"CharacterClass":r(i.body,i);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":o(i.min,i,"min"),o(i.max,i,"max");break;case"LookaroundAssertion":r(i.body,i);break;case"Quantifier":o(i.body,i,"body");break;case"Regex":r(i.body,i),o(i.flags,i,"flags");break;default:throw new Error(`Unexpected node type "${p}"`)}return y?.exit?.(f,n),m?.exit?.(f,n),c}return o(e),e}function bw(e){if(!Array.isArray(e))throw new Error("Container expected");return e}function xp(e){if(typeof e!="number")throw new Error("Numeric key expected");return e}const wDe=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`;function xDe(e,t){for(let n=0;n<e.length;n++)e[n]>=t&&e[n]++}function SDe(e,t,n,r){return e.slice(0,t)+r+e.slice(t+n.length)}const la=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function pP(e,t,n,r){const o=new RegExp(String.raw`${t}|(?<$skip>\[\^?|\\?.)`,"gsu"),i=[!1];let s=0,a="";for(const l of e.matchAll(o)){const{0:c,groups:{$skip:u}}=l;if(!u&&(!r||r===la.DEFAULT==!s)){n instanceof Function?a+=n(l,{context:s?la.CHAR_CLASS:la.DEFAULT,negated:i[i.length-1]}):a+=n;continue}c[0]==="["?(s++,i.push(c[1]==="^")):c==="]"&&s&&(s--,i.pop()),a+=c}return a}function qX(e,t,n,r){pP(e,t,n,r)}function kDe(e,t,n=0,r){if(!new RegExp(t,"su").test(e))return null;const o=new RegExp(`${t}|(?<$skip>\\\\?.)`,"gsu");o.lastIndex=n;let i=0,s;for(;s=o.exec(e);){const{0:a,groups:{$skip:l}}=s;if(!l&&(!r||r===la.DEFAULT==!i))return s;a==="["?i++:a==="]"&&i&&i--,o.lastIndex==s.index&&o.lastIndex++}return null}function vw(e,t,n){return!!kDe(e,t,0,n)}function CDe(e,t){const n=/\\?./gsu;n.lastIndex=t;let r=e.length,o=0,i=1,s;for(;s=n.exec(e);){const[a]=s;if(a==="[")o++;else if(o)a==="]"&&o--;else if(a==="(")i++;else if(a===")"&&(i--,!i)){r=s.index;break}}return e.slice(t,r)}const E7=new RegExp(String.raw`(?<noncapturingStart>${wDe})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu");function EDe(e,t){const n=t?.hiddenCaptures??[];let r=t?.captureTransfers??new Map;if(!/\(\?>/.test(e))return{pattern:e,captureTransfers:r,hiddenCaptures:n};const o="(?>",i="(?:(?=(",s=[0],a=[];let l=0,c=0,u=NaN,f;do{f=!1;let p=0,m=0,y=!1,b;for(E7.lastIndex=Number.isNaN(u)?0:u+i.length;b=E7.exec(e);){const{0:x,index:S,groups:{capturingStart:E,noncapturingStart:T}}=b;if(x==="[")p++;else if(p)x==="]"&&p--;else if(x===o&&!y)u=S,y=!0;else if(y&&T)m++;else if(E)y?m++:(l++,s.push(l+c));else if(x===")"&&y){if(!m){c++;const A=l+c;if(e=`${e.slice(0,u)}${i}${e.slice(u+o.length,S)}))<$$${A}>)${e.slice(S+1)}`,f=!0,a.push(A),xDe(n,A),r.size){const M=new Map;r.forEach((R,O)=>{M.set(O>=A?O+1:O,R.map(I=>I>=A?I+1:I))}),r=M}break}m--}}}while(f);return n.push(...a),e=pP(e,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:p,groups:{backrefNum:m,wrappedBackrefNum:y}})=>{if(m){const b=+m;if(b>s.length-1)throw new Error(`Backref "${p}" greater than number of captures`);return`\\${s[b]}`}return`\\${y}`},la.DEFAULT),{pattern:e,captureTransfers:r,hiddenCaptures:n}}const ZX=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,_A=new RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${ZX})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu");function TDe(e){if(!new RegExp(`${ZX}\\+`).test(e))return{pattern:e};const t=[];let n=null,r=null,o="",i=0,s;for(_A.lastIndex=0;s=_A.exec(e);){const{0:a,index:l,groups:{qBase:c,qMod:u,invalidQ:f}}=s;if(a==="[")i||(r=l),i++;else if(a==="]")i?i--:r=null;else if(!i)if(u==="+"&&o&&!o.startsWith("(")){if(f)throw new Error(`Invalid quantifier "${a}"`);let p=-1;if(/^\{\d+\}$/.test(c))e=SDe(e,l+c.length,u,"");else{if(o===")"||o==="]"){const m=o===")"?n:r;if(m===null)throw new Error(`Invalid unmatched "${o}"`);e=`${e.slice(0,m)}(?>${e.slice(m,l)}${c})${e.slice(l+a.length)}`}else e=`${e.slice(0,l-o.length)}(?>${o}${c})${e.slice(l+a.length)}`;p+=4}_A.lastIndex+=p}else a[0]==="("?t.push(l):a===")"&&(n=t.length?t.pop():null);o=a}return{pattern:e}}const sa=String.raw,_De=sa`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,PN=sa`\(\?R=(?<rDepth>[^\)]+)\)|${_De}`,pE=sa`\(\?<(?![=!])(?<captureName>[^>]+)>`,WX=sa`${pE}|(?<unnamed>\()(?!\?)`,df=new RegExp(sa`${pE}|${PN}|\(\?|\\?.`,"gsu"),AA="Cannot use multiple overlapping recursions";function ADe(e,t){const{hiddenCaptures:n,mode:r}={hiddenCaptures:[],mode:"plugin",...t};let o=t?.captureTransfers??new Map;if(!new RegExp(PN,"su").test(e))return{pattern:e,captureTransfers:o,hiddenCaptures:n};if(r==="plugin"&&vw(e,sa`\(\?\(DEFINE\)`,la.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");const i=[],s=vw(e,sa`\\[1-9]`,la.DEFAULT),a=new Map,l=[];let c=!1,u=0,f=0,p;for(df.lastIndex=0;p=df.exec(e);){const{0:m,groups:{captureName:y,rDepth:b,gRNameOrNum:x,gRDepth:S}}=p;if(m==="[")u++;else if(u)m==="]"&&u--;else if(b){if(T7(b),c)throw new Error(AA);if(s)throw new Error(`${r==="external"?"Backrefs":"Numbered backrefs"} cannot be used with global recursion`);const E=e.slice(0,p.index),T=e.slice(df.lastIndex);if(vw(T,PN,la.DEFAULT))throw new Error(AA);const A=+b-1;e=_7(E,T,A,!1,n,i,f),o=M7(o,E,A,i.length,0,f);break}else if(x){T7(S);let E=!1;for(const H of l)if(H.name===x||H.num===+x){if(E=!0,H.hasRecursedWithin)throw new Error(AA);break}if(!E)throw new Error(sa`Recursive \g cannot be used outside the referenced group "${r==="external"?x:sa`\g<${x}&R=${S}>`}"`);const T=a.get(x),A=CDe(e,T);if(s&&vw(A,sa`${pE}|\((?!\?)`,la.DEFAULT))throw new Error(`${r==="external"?"Backrefs":"Numbered backrefs"} cannot be used with recursion of capturing groups`);const M=e.slice(T,p.index),R=A.slice(M.length+m.length),O=i.length,I=+S-1,L=_7(M,R,I,!0,n,i,f);o=M7(o,M,I,i.length-O,O,f);const $=e.slice(0,T),B=e.slice(T+A.length);e=`${$}${L}${B}`,df.lastIndex+=L.length-m.length-M.length-R.length,l.forEach(H=>H.hasRecursedWithin=!0),c=!0}else if(y)f++,a.set(String(f),df.lastIndex),a.set(y,df.lastIndex),l.push({num:f,name:y});else if(m[0]==="("){const E=m==="(";E&&(f++,a.set(String(f),df.lastIndex)),l.push(E?{num:f}:{})}else m===")"&&l.pop()}return n.push(...i),{pattern:e,captureTransfers:o,hiddenCaptures:n}}function T7(e){const t=`Max depth must be integer between 2 and 100; used ${e}`;if(!/^[1-9]\d*$/.test(e))throw new Error(t);if(e=+e,e<2||e>100)throw new Error(t)}function _7(e,t,n,r,o,i,s){const a=new Set;r&&qX(e+t,pE,({groups:{captureName:c}})=>{a.add(c)},la.DEFAULT);const l=[n,r?a:null,o,i,s];return`${e}${A7(`(?:${e}`,"forward",...l)}(?:)${A7(`${t})`,"backward",...l)}${t}`}function A7(e,t,n,r,o,i,s){const l=u=>t==="forward"?u+2:n-u+2-1;let c="";for(let u=0;u<n;u++){const f=l(u);c+=pP(e,sa`${WX}|\\k<(?<backref>[^>]+)>`,({0:p,groups:{captureName:m,unnamed:y,backref:b}})=>{if(b&&r&&!r.has(b))return p;const x=`_$${f}`;if(y||m){const S=s+i.length+1;return i.push(S),MDe(o,S),y?p:`(?<${m}${x}>`}return sa`\k<${b}${x}>`},la.DEFAULT)}return c}function MDe(e,t){for(let n=0;n<e.length;n++)e[n]>=t&&e[n]++}function M7(e,t,n,r,o,i){if(e.size&&r){let s=0;qX(t,WX,()=>s++,la.DEFAULT);const a=i-s+o,l=new Map;return e.forEach((c,u)=>{const f=(r-s*n)/n,p=s*n,m=u>a+s?u+r:u,y=[];for(const b of c)if(b<=a)y.push(b);else if(b>a+s+f)y.push(b+r);else if(b<=a+s)for(let x=0;x<=n;x++)y.push(b+s*x);else for(let x=0;x<=n;x++)y.push(b+p+f*x);l.set(m,y)}),l}return e}var Qr=String.fromCodePoint,bt=String.raw,Wc={flagGroups:(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})(),unicodeSets:(()=>{try{new RegExp("","v")}catch{return!1}return!0})()};Wc.bugFlagVLiteralHyphenIsRange=Wc.unicodeSets?(()=>{try{new RegExp(bt`[\d\-a]`,"v")}catch{return!0}return!1})():!1;Wc.bugNestedClassIgnoresNegation=Wc.unicodeSets&&new RegExp("[[^a]]","v").test("a");function ok(e,{enable:t,disable:n}){return{dotAll:!n?.dotAll&&!!(t?.dotAll||e.dotAll),ignoreCase:!n?.ignoreCase&&!!(t?.ignoreCase||e.ignoreCase)}}function rb(e,t,n){return e.has(t)||e.set(t,n),e.get(t)}function DN(e,t){return R7[e]>=R7[t]}function RDe(e,t){if(e==null)throw new Error(t??"Value expected");return e}var R7={ES2025:2025,ES2024:2024,ES2018:2018},NDe={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function KX(e={}){if({}.toString.call(e)!=="[object Object]")throw new Error("Unexpected options");if(e.target!==void 0&&!NDe[e.target])throw new Error(`Unexpected target "${e.target}"`);const t={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1,...e,rules:{allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1,...e.rules}};return t.target==="auto"&&(t.target=Wc.flagGroups?"ES2025":Wc.unicodeSets?"ES2024":"ES2018"),t}var IDe="[	-\r ]",ODe=new Set([Qr(304),Qr(305)]),Rc=bt`[\p{L}\p{M}\p{N}\p{Pc}]`;function YX(e){if(ODe.has(e))return[e];const t=new Set,n=e.toLowerCase(),r=n.toUpperCase(),o=$De.get(n),i=PDe.get(n),s=DDe.get(n);return[...r].length===1&&t.add(r),s&&t.add(s),o&&t.add(o),t.add(n),i&&t.add(i),[...t]}var mP=new Map(`C Other
Cc Control cntrl
Cf Format
Cn Unassigned
Co Private_Use
Cs Surrogate
L Letter
LC Cased_Letter
Ll Lowercase_Letter
Lm Modifier_Letter
Lo Other_Letter
Lt Titlecase_Letter
Lu Uppercase_Letter
M Mark Combining_Mark
Mc Spacing_Mark
Me Enclosing_Mark
Mn Nonspacing_Mark
N Number
Nd Decimal_Number digit
Nl Letter_Number
No Other_Number
P Punctuation punct
Pc Connector_Punctuation
Pd Dash_Punctuation
Pe Close_Punctuation
Pf Final_Punctuation
Pi Initial_Punctuation
Po Other_Punctuation
Ps Open_Punctuation
S Symbol
Sc Currency_Symbol
Sk Modifier_Symbol
Sm Math_Symbol
So Other_Symbol
Z Separator
Zl Line_Separator
Zp Paragraph_Separator
Zs Space_Separator
ASCII
ASCII_Hex_Digit AHex
Alphabetic Alpha
Any
Assigned
Bidi_Control Bidi_C
Bidi_Mirrored Bidi_M
Case_Ignorable CI
Cased
Changes_When_Casefolded CWCF
Changes_When_Casemapped CWCM
Changes_When_Lowercased CWL
Changes_When_NFKC_Casefolded CWKCF
Changes_When_Titlecased CWT
Changes_When_Uppercased CWU
Dash
Default_Ignorable_Code_Point DI
Deprecated Dep
Diacritic Dia
Emoji
Emoji_Component EComp
Emoji_Modifier EMod
Emoji_Modifier_Base EBase
Emoji_Presentation EPres
Extended_Pictographic ExtPict
Extender Ext
Grapheme_Base Gr_Base
Grapheme_Extend Gr_Ext
Hex_Digit Hex
IDS_Binary_Operator IDSB
IDS_Trinary_Operator IDST
ID_Continue IDC
ID_Start IDS
Ideographic Ideo
Join_Control Join_C
Logical_Order_Exception LOE
Lowercase Lower
Math
Noncharacter_Code_Point NChar
Pattern_Syntax Pat_Syn
Pattern_White_Space Pat_WS
Quotation_Mark QMark
Radical
Regional_Indicator RI
Sentence_Terminal STerm
Soft_Dotted SD
Terminal_Punctuation Term
Unified_Ideograph UIdeo
Uppercase Upper
Variation_Selector VS
White_Space space
XID_Continue XIDC
XID_Start XIDS`.split(/\s/).map(e=>[hE(e),e])),PDe=new Map([["s",Qr(383)],[Qr(383),"s"]]),DDe=new Map([[Qr(223),Qr(7838)],[Qr(107),Qr(8490)],[Qr(229),Qr(8491)],[Qr(969),Qr(8486)]]),$De=new Map([Gu(453),Gu(456),Gu(459),Gu(498),...MA(8072,8079),...MA(8088,8095),...MA(8104,8111),Gu(8124),Gu(8140),Gu(8188)]),LDe=new Map([["alnum",bt`[\p{Alpha}\p{Nd}]`],["alpha",bt`\p{Alpha}`],["ascii",bt`\p{ASCII}`],["blank",bt`[\p{Zs}\t]`],["cntrl",bt`\p{Cc}`],["digit",bt`\p{Nd}`],["graph",bt`[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]`],["lower",bt`\p{Lower}`],["print",bt`[[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",bt`[\p{P}\p{S}]`],["space",bt`\p{space}`],["upper",bt`\p{Upper}`],["word",bt`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",bt`\p{AHex}`]]);function jDe(e,t){const n=[];for(let r=e;r<=t;r++)n.push(r);return n}function Gu(e){const t=Qr(e);return[t.toLowerCase(),t]}function MA(e,t){return jDe(e,t).map(n=>Gu(n))}var JX=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]);function zDe(e,t){const n={accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025",...t};XX(e);const r={accuracy:n.accuracy,asciiWordBoundaries:n.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:DN(n.bestEffortTarget,"ES2024"),passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:e.flags.digitIsAscii,spaceIsAscii:e.flags.spaceIsAscii,wordIsAscii:e.flags.wordIsAscii};i0(e,BDe,r);const o={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},i={currentFlags:o,prevFlags:null,globalFlags:o,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:r.subroutineRefMap};i0(e,VDe,i);const s={groupsByName:i.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:i.reffedNodesByReferencer};return i0(e,FDe,s),e._originMap=i.groupOriginByCopy,e._strategy=r.strategy,e}var BDe={AbsenceFunction({node:e,parent:t,replaceWith:n}){const{body:r,kind:o}=e;if(o==="repeater"){const i=Ba();i.body[0].body.push(Ef({negate:!0,body:r}),Lp("Any"));const s=Ba();s.body[0].body.push(HX("greedy",0,1/0,i)),n(Ar(s,t),{traverse:!0})}else throw new Error('Unsupported absence function "(?~|"')},Alternative:{enter({node:e,parent:t,key:n},{flagDirectivesByAlt:r}){const o=e.body.filter(i=>i.kind==="flags");for(let i=n+1;i<t.body.length;i++){const s=t.body[i];rb(r,s,[]).push(...o)}},exit({node:e},{flagDirectivesByAlt:t}){if(t.get(e)?.length){const n=eQ(t.get(e));if(n){const r=Ba({flags:n});r.body[0].body=e.body,e.body=[Ar(r,e)]}}}},Assertion({node:e,parent:t,key:n,container:r,root:o,remove:i,replaceWith:s},a){const{kind:l,negate:c}=e,{asciiWordBoundaries:u,avoidSubclass:f,supportedGNodes:p,wordIsAscii:m}=a;if(l==="text_segment_boundary")throw new Error(`Unsupported text segment boundary "\\${c?"Y":"y"}"`);if(l==="line_end")s(Ar(Ef({body:[hh({body:[NN("string_end")]}),hh({body:[fE(10)]})]}),t));else if(l==="line_start")s(Ar(Nc(bt`(?<=\A|\n(?!\z))`,{skipLookbehindValidation:!0}),t));else if(l==="search_start")if(p.has(e))o.flags.sticky=!0,i();else{const y=r[n-1];if(y&&WDe(y))s(Ar(Ef({negate:!0}),t));else{if(f)throw new Error(bt`Uses "\G" in a way that requires a subclass`);s(qu(NN("string_start"),t)),a.strategy="clip_search"}}else if(!(l==="string_end"||l==="string_start"))if(l==="string_end_newline")s(Ar(Nc(bt`(?=\n?\z)`),t));else if(l==="word_boundary"){if(!m&&!u){const y=`(?:(?<=${Rc})(?!${Rc})|(?<!${Rc})(?=${Rc}))`,b=`(?:(?<=${Rc})(?=${Rc})|(?<!${Rc})(?!${Rc}))`;s(Ar(Nc(c?b:y),t))}}else throw new Error(`Unexpected assertion kind "${l}"`)},Backreference({node:e},{jsGroupNameMap:t}){let{ref:n}=e;typeof n=="string"&&!NA(n)&&(n=RA(n,t),e.ref=n)},CapturingGroup({node:e},{jsGroupNameMap:t,subroutineRefMap:n}){let{name:r}=e;r&&!NA(r)&&(r=RA(r,t),e.name=r),n.set(e.number,e),r&&n.set(r,e)},CharacterClassRange({node:e,parent:t,replaceWith:n}){if(t.kind==="intersection"){const r=wx({body:[e]});n(Ar(r,t),{traverse:!0})}},CharacterSet({node:e,parent:t,replaceWith:n},{accuracy:r,minTargetEs2024:o,digitIsAscii:i,spaceIsAscii:s,wordIsAscii:a}){const{kind:l,negate:c,value:u}=e;if(i&&(l==="digit"||u==="digit")){n(qu(ON("digit",{negate:c}),t));return}if(s&&(l==="space"||u==="space")){n(Ar(IA(Nc(IDe),c),t));return}if(a&&(l==="word"||u==="word")){n(qu(ON("word",{negate:c}),t));return}if(l==="any")n(qu(Lp("Any"),t));else if(l==="digit")n(qu(Lp("Nd",{negate:c}),t));else if(l!=="dot")if(l==="text_segment"){if(r==="strict")throw new Error(bt`Use of "\X" requires non-strict accuracy`);const f="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",p=bt`\p{RI}{2}|${f}(?:\u200D${f})*`;n(Ar(Nc(bt`(?>\r\n|${o?bt`\p{RGI_Emoji}`:p}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}),t))}else if(l==="hex")n(qu(Lp("AHex",{negate:c}),t));else if(l==="newline")n(Ar(Nc(c?`[^
]`:`(?>\r
?|[
\v\f\u2028\u2029])`),t));else if(l==="posix")if(!o&&(u==="graph"||u==="print")){if(r==="strict")throw new Error(`POSIX class "${u}" requires min target ES2024 or non-strict accuracy`);let f={graph:"!-~",print:" -~"}[u];c&&(f=`\0-${Qr(f.codePointAt(0)-1)}${Qr(f.codePointAt(2)+1)}-`),n(Ar(Nc(`[${f}]`),t))}else n(Ar(IA(Nc(LDe.get(u)),c),t));else if(l==="property")mP.has(hE(u))||(e.key="sc");else if(l==="space")n(qu(Lp("space",{negate:c}),t));else if(l==="word")n(Ar(IA(Nc(Rc),c),t));else throw new Error(`Unexpected character set kind "${l}"`)},Directive({node:e,parent:t,root:n,remove:r,replaceWith:o,removeAllPrevSiblings:i,removeAllNextSiblings:s}){const{kind:a,flags:l}=e;if(a==="flags")if(!l.enable&&!l.disable)r();else{const c=Ba({flags:l});c.body[0].body=s(),o(Ar(c,t),{traverse:!0})}else if(a==="keep"){const c=n.body[0],f=n.body.length===1&&BX(c,{type:"Group"})&&c.body[0].body.length===1?c.body[0]:n;if(t.parent!==f||f.body.length>1)throw new Error(bt`Uses "\K" in a way that's unsupported`);const p=Ef({behind:!0});p.body[0].body=i(),o(Ar(p,t))}else throw new Error(`Unexpected directive kind "${a}"`)},Flags({node:e,parent:t}){if(e.posixIsAscii)throw new Error('Unsupported flag "P"');if(e.textSegmentMode==="word")throw new Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach(n=>delete e[n]),Object.assign(e,{global:!1,hasIndices:!1,multiline:!1,sticky:e.sticky??!1}),t.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:e}){if(!e.flags)return;const{enable:t,disable:n}=e.flags;t?.extended&&delete t.extended,n?.extended&&delete n.extended,t?.dotAll&&n?.dotAll&&delete t.dotAll,t?.ignoreCase&&n?.ignoreCase&&delete t.ignoreCase,t&&!Object.keys(t).length&&delete e.flags.enable,n&&!Object.keys(n).length&&delete e.flags.disable,!e.flags.enable&&!e.flags.disable&&delete e.flags},LookaroundAssertion({node:e},t){const{kind:n}=e;n==="lookbehind"&&(t.passedLookbehind=!0)},NamedCallout({node:e,parent:t,replaceWith:n}){const{kind:r}=e;if(r==="fail")n(Ar(Ef({negate:!0}),t));else throw new Error(`Unsupported named callout "(*${r.toUpperCase()}"`)},Quantifier({node:e}){if(e.body.type==="Quantifier"){const t=Ba();t.body[0].body.push(e.body),e.body=Ar(t,e)}},Regex:{enter({node:e},{supportedGNodes:t}){const n=[];let r=!1,o=!1;for(const i of e.body)if(i.body.length===1&&i.body[0].kind==="search_start")i.body.pop();else{const s=nQ(i.body);s?(r=!0,Array.isArray(s)?n.push(...s):n.push(s)):o=!0}r&&!o&&n.forEach(i=>t.add(i))},exit(e,{accuracy:t,passedLookbehind:n,strategy:r}){if(t==="strict"&&n&&r)throw new Error(bt`Uses "\G" in a way that requires non-strict accuracy`)}},Subroutine({node:e},{jsGroupNameMap:t}){let{ref:n}=e;typeof n=="string"&&!NA(n)&&(n=RA(n,t),e.ref=n)}},VDe={Backreference({node:e},{multiplexCapturesToLeftByRef:t,reffedNodesByReferencer:n}){const{orphan:r,ref:o}=e;r||n.set(e,[...t.get(o).map(({node:i})=>i)])},CapturingGroup:{enter({node:e,parent:t,replaceWith:n,skip:r},{groupOriginByCopy:o,groupsByName:i,multiplexCapturesToLeftByRef:s,openRefs:a,reffedNodesByReferencer:l}){const c=o.get(e);if(c&&a.has(e.number)){const f=qu(N7(e.number),t);l.set(f,a.get(e.number)),n(f);return}a.set(e.number,e),s.set(e.number,[]),e.name&&rb(s,e.name,[]);const u=s.get(e.name??e.number);for(let f=0;f<u.length;f++){const p=u[f];if(c===p.node||c&&c===p.origin||e===p.origin){u.splice(f,1);break}}if(s.get(e.number).push({node:e,origin:c}),e.name&&s.get(e.name).push({node:e,origin:c}),e.name){const f=rb(i,e.name,new Map);let p=!1;if(c)p=!0;else for(const m of f.values())if(!m.hasDuplicateNameToRemove){p=!0;break}i.get(e.name).set(e,{node:e,hasDuplicateNameToRemove:p})}},exit({node:e},{openRefs:t}){t.delete(e.number)}},Group:{enter({node:e},t){t.prevFlags=t.currentFlags,e.flags&&(t.currentFlags=ok(t.currentFlags,e.flags))},exit(e,t){t.currentFlags=t.prevFlags}},Subroutine({node:e,parent:t,replaceWith:n},r){const{isRecursive:o,ref:i}=e;if(o){let u=t;for(;(u=u.parent)&&!(u.type==="CapturingGroup"&&(u.name===i||u.number===i)););r.reffedNodesByReferencer.set(e,u);return}const s=r.subroutineRefMap.get(i),a=i===0,l=a?N7(0):QX(s,r.groupOriginByCopy,null);let c=l;if(!a){const u=eQ(GDe(s,p=>p.type==="Group"&&!!p.flags)),f=u?ok(r.globalFlags,u):r.globalFlags;HDe(f,r.currentFlags)||(c=Ba({flags:qDe(f)}),c.body[0].body.push(l))}n(Ar(c,t),{traverse:!a})}},FDe={Backreference({node:e,parent:t,replaceWith:n},r){if(e.orphan){r.highestOrphanBackref=Math.max(r.highestOrphanBackref,e.ref);return}const i=r.reffedNodesByReferencer.get(e).filter(s=>UDe(s,e));if(!i.length)n(Ar(Ef({negate:!0}),t));else if(i.length>1){const s=Ba({atomic:!0,body:i.reverse().map(a=>hh({body:[IN(a.number)]}))});n(Ar(s,t))}else e.ref=i[0].number},CapturingGroup({node:e},t){e.number=++t.numCapturesToLeft,e.name&&t.groupsByName.get(e.name).get(e).hasDuplicateNameToRemove&&delete e.name},Regex:{exit({node:e},t){const n=Math.max(t.highestOrphanBackref-t.numCapturesToLeft,0);for(let r=0;r<n;r++){const o=FX();e.body.at(-1).body.push(o)}}},Subroutine({node:e},t){!e.isRecursive||e.ref===0||(e.ref=t.reffedNodesByReferencer.get(e).number)}};function XX(e){i0(e,{"*"({node:t,parent:n}){t.parent=n}})}function HDe(e,t){return e.dotAll===t.dotAll&&e.ignoreCase===t.ignoreCase}function UDe(e,t){let n=t;do{if(n.type==="Regex")return!1;if(n.type==="Alternative")continue;if(n===e)return!1;const r=tQ(n.parent);for(const o of r){if(o===n)break;if(o===e||rQ(o,e))return!0}}while(n=n.parent);throw new Error("Unexpected path")}function QX(e,t,n,r){const o=Array.isArray(e)?[]:{};for(const[i,s]of Object.entries(e))i==="parent"?o.parent=Array.isArray(n)?r:n:s&&typeof s=="object"?o[i]=QX(s,t,o,n):(i==="type"&&s==="CapturingGroup"&&t.set(o,t.get(e)??e),o[i]=s);return o}function N7(e){const t=UX(e);return t.isRecursive=!0,t}function GDe(e,t){const n=[];for(;e=e.parent;)(!t||t(e))&&n.push(e);return n}function RA(e,t){if(t.has(e))return t.get(e);const n=`$${t.size}_${e.replace(/^[^$_\p{IDS}]|[^$\u200C\u200D\p{IDC}]/ug,"_")}`;return t.set(e,n),n}function eQ(e){const t=["dotAll","ignoreCase"],n={enable:{},disable:{}};return e.forEach(({flags:r})=>{t.forEach(o=>{r.enable?.[o]&&(delete n.disable[o],n.enable[o]=!0),r.disable?.[o]&&(n.disable[o]=!0)})}),Object.keys(n.enable).length||delete n.enable,Object.keys(n.disable).length||delete n.disable,n.enable||n.disable?n:null}function qDe({dotAll:e,ignoreCase:t}){const n={};return(e||t)&&(n.enable={},e&&(n.enable.dotAll=!0),t&&(n.enable.ignoreCase=!0)),(!e||!t)&&(n.disable={},!e&&(n.disable.dotAll=!0),!t&&(n.disable.ignoreCase=!0)),n}function tQ(e){if(!e)throw new Error("Node expected");const{body:t}=e;return Array.isArray(t)?t:t?[t]:null}function nQ(e){const t=e.find(n=>n.kind==="search_start"||KDe(n,{negate:!1})||!ZDe(n));if(!t)return null;if(t.kind==="search_start")return t;if(t.type==="LookaroundAssertion")return t.body[0].body[0];if(t.type==="CapturingGroup"||t.type==="Group"){const n=[];for(const r of t.body){const o=nQ(r.body);if(!o)return null;Array.isArray(o)?n.push(...o):n.push(o)}return n}return null}function rQ(e,t){const n=tQ(e)??[];for(const r of n)if(r===t||rQ(r,t))return!0;return!1}function ZDe({type:e}){return e==="Assertion"||e==="Directive"||e==="LookaroundAssertion"}function WDe(e){const t=["Character","CharacterClass","CharacterSet"];return t.includes(e.type)||e.type==="Quantifier"&&e.min&&t.includes(e.body.type)}function KDe(e,t){const n={negate:null,...t};return e.type==="LookaroundAssertion"&&(n.negate===null||e.negate===n.negate)&&e.body.length===1&&BX(e.body[0],{type:"Assertion",kind:"search_start"})}function NA(e){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(e)}function Nc(e,t){const r=VX(e,{...t,unicodePropertyMap:mP}).body;return r.length>1||r[0].body.length>1?Ba({body:r}):r[0].body[0]}function IA(e,t){return e.negate=t,e}function qu(e,t){return e.parent=t,e}function Ar(e,t){return XX(e),e.parent=t,e}function YDe(e,t){const n=KX(t),r=DN(n.target,"ES2024"),o=DN(n.target,"ES2025"),i=n.rules.recursionLimit;if(!Number.isInteger(i)||i<2||i>20)throw new Error("Invalid recursionLimit; use 2-20");let s=null,a=null;if(!o){const m=[e.flags.ignoreCase];i0(e,JDe,{getCurrentModI:()=>m.at(-1),popModI(){m.pop()},pushModI(y){m.push(y)},setHasCasedChar(){m.at(-1)?s=!0:a=!0}})}const l={dotAll:e.flags.dotAll,ignoreCase:!!((e.flags.ignoreCase||s)&&!a)};let c=e;const u={accuracy:n.accuracy,appliedGlobalFlags:l,captureMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},inCharClass:!1,lastNode:c,originMap:e._originMap,recursionLimit:i,useAppliedIgnoreCase:!!(!o&&s&&a),useFlagMods:o,useFlagV:r,verbose:n.verbose};function f(m){return u.lastNode=c,c=m,RDe(XDe[m.type],`Unexpected node type "${m.type}"`)(m,u,f)}const p={pattern:e.body.map(f).join("|"),flags:f(e.flags),options:{...e.options}};return r||(delete p.options.force.v,p.options.disable.v=!0,p.options.unicodeSetsPlugin=null),p._captureTransfers=new Map,p._hiddenCaptures=[],u.captureMap.forEach((m,y)=>{m.hidden&&p._hiddenCaptures.push(y),m.transferTo&&rb(p._captureTransfers,m.transferTo,[]).push(y)}),p}var JDe={"*":{enter({node:e},t){if(O7(e)){const n=t.getCurrentModI();t.pushModI(e.flags?ok({ignoreCase:n},e.flags).ignoreCase:n)}},exit({node:e},t){O7(e)&&t.popModI()}},Backreference(e,t){t.setHasCasedChar()},Character({node:e},t){gP(Qr(e.value))&&t.setHasCasedChar()},CharacterClassRange({node:e,skip:t},n){t(),oQ(e,{firstOnly:!0}).length&&n.setHasCasedChar()},CharacterSet({node:e},t){e.kind==="property"&&JX.has(e.value)&&t.setHasCasedChar()}},XDe={Alternative({body:e},t,n){return e.map(n).join("")},Assertion({kind:e,negate:t}){if(e==="string_end")return"$";if(e==="string_start")return"^";if(e==="word_boundary")return t?bt`\B`:bt`\b`;throw new Error(`Unexpected assertion kind "${e}"`)},Backreference({ref:e},t){if(typeof e!="number")throw new Error("Unexpected named backref in transformed AST");if(!t.useFlagMods&&t.accuracy==="strict"&&t.currentFlags.ignoreCase&&!t.captureMap.get(e).ignoreCase)throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+e},CapturingGroup(e,t,n){const{body:r,name:o,number:i}=e,s={ignoreCase:t.currentFlags.ignoreCase},a=t.originMap.get(e);return a&&(s.hidden=!0,i>a.number&&(s.transferTo=a.number)),t.captureMap.set(i,s),`(${o?`?<${o}>`:""}${r.map(n).join("|")})`},Character({value:e},t){const n=Qr(e),r=Sp(e,{escDigit:t.lastNode.type==="Backreference",inCharClass:t.inCharClass,useFlagV:t.useFlagV});if(r!==n)return r;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&gP(n)){const o=YX(n);return t.inCharClass?o.join(""):o.length>1?`[${o.join("")}]`:o[0]}return n},CharacterClass(e,t,n){const{kind:r,negate:o,parent:i}=e;let{body:s}=e;if(r==="intersection"&&!t.useFlagV)throw new Error("Use of class intersection requires min target ES2024");Wc.bugFlagVLiteralHyphenIsRange&&t.useFlagV&&s.some(P7)&&(s=[fE(45),...s.filter(c=>!P7(c))]);const a=()=>`[${o?"^":""}${s.map(n).join(r==="intersection"?"&&":"")}]`;if(!t.inCharClass){if((!t.useFlagV||Wc.bugNestedClassIgnoresNegation)&&!o){const u=s.filter(f=>f.type==="CharacterClass"&&f.kind==="union"&&f.negate);if(u.length){const f=Ba(),p=f.body[0];return f.parent=i,p.parent=f,s=s.filter(m=>!u.includes(m)),e.body=s,s.length?(e.parent=p,p.body.push(e)):f.body.pop(),u.forEach(m=>{const y=hh({body:[m]});m.parent=y,y.parent=f,f.body.push(y)}),n(f)}}t.inCharClass=!0;const c=a();return t.inCharClass=!1,c}const l=s[0];if(r==="union"&&!o&&l&&((!t.useFlagV||!t.verbose)&&i.kind==="union"&&!(Wc.bugFlagVLiteralHyphenIsRange&&t.useFlagV)||!t.verbose&&i.kind==="intersection"&&s.length===1&&l.type!=="CharacterClassRange"))return s.map(n).join("");if(!t.useFlagV&&i.type==="CharacterClass")throw new Error("Use of nested character class requires min target ES2024");return a()},CharacterClassRange(e,t){const n=e.min.value,r=e.max.value,o={escDigit:!1,inCharClass:!0,useFlagV:t.useFlagV},i=Sp(n,o),s=Sp(r,o),a=new Set;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase){const l=oQ(e);r$e(l).forEach(u=>{a.add(Array.isArray(u)?`${Sp(u[0],o)}-${Sp(u[1],o)}`:Sp(u,o))})}return`${i}-${s}${[...a].join("")}`},CharacterSet({kind:e,negate:t,value:n,key:r},o){if(e==="dot")return o.currentFlags.dotAll?o.appliedGlobalFlags.dotAll||o.useFlagMods?".":"[^]":bt`[^\n]`;if(e==="digit")return t?bt`\D`:bt`\d`;if(e==="property"){if(o.useAppliedIgnoreCase&&o.currentFlags.ignoreCase&&JX.has(n))throw new Error(`Unicode property "${n}" can't be case-insensitive when other chars have specific case`);return`${t?bt`\P`:bt`\p`}{${r?`${r}=`:""}${n}}`}if(e==="word")return t?bt`\W`:bt`\w`;throw new Error(`Unexpected character set kind "${e}"`)},Flags(e,t){return(t.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":"")},Group({atomic:e,body:t,flags:n,parent:r},o,i){const s=o.currentFlags;n&&(o.currentFlags=ok(s,n));const a=t.map(i).join("|"),l=!o.verbose&&t.length===1&&r.type!=="Quantifier"&&!e&&(!o.useFlagMods||!n)?a:`(?${o$e(e,n,o.useFlagMods)}${a})`;return o.currentFlags=s,l},LookaroundAssertion({body:e,kind:t,negate:n},r,o){return`(?${`${t==="lookahead"?"":"<"}${n?"!":"="}`}${e.map(o).join("|")})`},Quantifier(e,t,n){return n(e.body)+i$e(e)},Subroutine({isRecursive:e,ref:t},n){if(!e)throw new Error("Unexpected non-recursive subroutine in transformed AST");const r=n.recursionLimit;return t===0?`(?R=${r})`:bt`\g<${t}&R=${r}>`}},QDe=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),e$e=new Set(["-","\\","]","^","["]),t$e=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),I7=new Map([[9,bt`\t`],[10,bt`\n`],[11,bt`\v`],[12,bt`\f`],[13,bt`\r`],[8232,bt`\u2028`],[8233,bt`\u2029`],[65279,bt`\uFEFF`]]),n$e=new RegExp("^\\p{Cased}$","u");function gP(e){return n$e.test(e)}function oQ(e,t){const n=!!t?.firstOnly,r=e.min.value,o=e.max.value,i=[];if(r<65&&(o===65535||o>=131071)||r===65536&&o>=131071)return i;for(let s=r;s<=o;s++){const a=Qr(s);if(!gP(a))continue;const l=YX(a).filter(c=>{const u=c.codePointAt(0);return u<r||u>o});if(l.length&&(i.push(...l),n))break}return i}function Sp(e,{escDigit:t,inCharClass:n,useFlagV:r}){if(I7.has(e))return I7.get(e);if(e<32||e>126&&e<160||e>262143||t&&s$e(e))return e>255?`\\u{${e.toString(16).toUpperCase()}}`:`\\x${e.toString(16).toUpperCase().padStart(2,"0")}`;const o=n?r?t$e:e$e:QDe,i=Qr(e);return(o.has(i)?"\\":"")+i}function r$e(e){const t=e.map(o=>o.codePointAt(0)).sort((o,i)=>o-i),n=[];let r=null;for(let o=0;o<t.length;o++)t[o+1]===t[o]+1?r??=t[o]:r===null?n.push(t[o]):(n.push([r,t[o]]),r=null);return n}function o$e(e,t,n){if(e)return">";let r="";if(t&&n){const{enable:o,disable:i}=t;r=(o?.ignoreCase?"i":"")+(o?.dotAll?"s":"")+(i?"-":"")+(i?.ignoreCase?"i":"")+(i?.dotAll?"s":"")}return`${r}:`}function i$e({kind:e,max:t,min:n}){let r;return!n&&t===1?r="?":!n&&t===1/0?r="*":n===1&&t===1/0?r="+":n===t?r=`{${n}}`:r=`{${n},${t===1/0?"":t}}`,r+{greedy:"",lazy:"?",possessive:"+"}[e]}function O7({type:e}){return e==="CapturingGroup"||e==="Group"||e==="LookaroundAssertion"}function s$e(e){return e>47&&e<58}function P7({type:e,value:t}){return e==="Character"&&t===45}var a$e=class $N extends RegExp{#t=new Map;#e=null;#r;#n=null;#o=null;rawOptions={};get source(){return this.#r||"(?:)"}constructor(t,n,r){const o=!!r?.lazyCompile;if(t instanceof RegExp){if(r)throw new Error("Cannot provide options when copying a regexp");const i=t;super(i,n),this.#r=i.source,i instanceof $N&&(this.#t=i.#t,this.#n=i.#n,this.#o=i.#o,this.rawOptions=i.rawOptions)}else{const i={hiddenCaptures:[],strategy:null,transfers:[],...r};super(o?"":t,n),this.#r=t,this.#t=c$e(i.hiddenCaptures,i.transfers),this.#o=i.strategy,this.rawOptions=r??{}}o||(this.#e=this)}exec(t){if(!this.#e){const{lazyCompile:o,...i}=this.rawOptions;this.#e=new $N(this.#r,this.flags,i)}const n=this.global||this.sticky,r=this.lastIndex;if(this.#o==="clip_search"&&n&&r){this.lastIndex=0;const o=this.#i(t.slice(r));return o&&(l$e(o,r,t,this.hasIndices),this.lastIndex+=r),o}return this.#i(t)}#i(t){this.#e.lastIndex=this.lastIndex;const n=super.exec.call(this.#e,t);if(this.lastIndex=this.#e.lastIndex,!n||!this.#t.size)return n;const r=[...n];n.length=1;let o;this.hasIndices&&(o=[...n.indices],n.indices.length=1);const i=[0];for(let s=1;s<r.length;s++){const{hidden:a,transferTo:l}=this.#t.get(s)??{};if(a?i.push(null):(i.push(n.length),n.push(r[s]),this.hasIndices&&n.indices.push(o[s])),l&&r[s]!==void 0){const c=i[l];if(!c)throw new Error(`Invalid capture transfer to "${c}"`);if(n[c]=r[s],this.hasIndices&&(n.indices[c]=o[s]),n.groups){this.#n||(this.#n=u$e(this.source));const u=this.#n.get(l);u&&(n.groups[u]=r[s],this.hasIndices&&(n.indices.groups[u]=o[s]))}}}return n}};function l$e(e,t,n,r){if(e.index+=t,e.input=n,r){const o=e.indices;for(let s=0;s<o.length;s++){const a=o[s];a&&(o[s]=[a[0]+t,a[1]+t])}const i=o.groups;i&&Object.keys(i).forEach(s=>{const a=i[s];a&&(i[s]=[a[0]+t,a[1]+t])})}}function c$e(e,t){const n=new Map;for(const r of e)n.set(r,{hidden:!0});for(const[r,o]of t)for(const i of o)rb(n,i,{}).transferTo=r;return n}function u$e(e){const t=/(?<capture>\((?:\?<(?![=!])(?<name>[^>]+)>|(?!\?)))|\\?./gsu,n=new Map;let r=0,o=0,i;for(;i=t.exec(e);){const{0:s,groups:{capture:a,name:l}}=i;s==="["?r++:r?s==="]"&&r--:a&&(o++,l&&n.set(o,l))}return n}function d$e(e,t){const n=f$e(e,t);return n.options?new a$e(n.pattern,n.flags,n.options):new RegExp(n.pattern,n.flags)}function f$e(e,t){const n=KX(t),r=VX(e,{flags:n.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline},skipBackrefValidation:n.rules.allowOrphanBackrefs,unicodePropertyMap:mP}),o=zDe(r,{accuracy:n.accuracy,asciiWordBoundaries:n.rules.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,bestEffortTarget:n.target}),i=YDe(o,n),s=ADe(i.pattern,{captureTransfers:i._captureTransfers,hiddenCaptures:i._hiddenCaptures,mode:"external"}),a=TDe(s.pattern),l=EDe(a.pattern,{captureTransfers:s.captureTransfers,hiddenCaptures:s.hiddenCaptures}),c={pattern:l.pattern,flags:`${n.hasIndices?"d":""}${n.global?"g":""}${i.flags}${i.options.disable.v?"u":"v"}`};if(n.avoidSubclass){if(n.lazyCompileLength!==1/0)throw new Error("Lazy compilation requires subclass")}else{const u=l.hiddenCaptures.sort((y,b)=>y-b),f=Array.from(l.captureTransfers),p=o._strategy,m=c.pattern.length>=n.lazyCompileLength;(u.length||f.length||p||m)&&(c.options={...u.length&&{hiddenCaptures:u},...f.length&&{transfers:f},...p&&{strategy:p},...m&&{lazyCompile:m}})}return c}const D7=4294967295;class h$e{constructor(t,n={}){this.patterns=t,this.options=n;const{forgiving:r=!1,cache:o,regexConstructor:i}=n;if(!i)throw new Error("Option `regexConstructor` is not provided");this.regexps=t.map(s=>{if(typeof s!="string")return s;const a=o?.get(s);if(a){if(a instanceof RegExp)return a;if(r)return null;throw a}try{const l=i(s);return o?.set(s,l),l}catch(l){if(o?.set(s,l),r)return null;throw l}})}regexps;findNextMatchSync(t,n,r){const o=typeof t=="string"?t:t.content,i=[];function s(a,l,c=0){return{index:a,captureIndices:l.indices.map(u=>u==null?{start:D7,end:D7,length:0}:{start:u[0]+c,end:u[1]+c,length:u[1]-u[0]})}}for(let a=0;a<this.regexps.length;a++){const l=this.regexps[a];if(l)try{l.lastIndex=n;const c=l.exec(o);if(!c)continue;if(c.index===n)return s(a,c,0);i.push([a,c,0])}catch(c){if(this.options.forgiving)continue;throw c}}if(i.length){const a=Math.min(...i.map(l=>l[1].index));for(const[l,c,u]of i)if(c.index===a)return s(l,c,u)}return null}}function p$e(e,t){return d$e(e,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...t})}function m$e(e={}){const t=Object.assign({target:"auto",cache:new Map},e);return t.regexConstructor||=n=>p$e(n,{target:t.target}),{createScanner(n){return new h$e(n,t)},createString(n){return{content:n}}}}const g$e={c:()=>Ne(()=>import("./c-BEm9jPuR.js"),[]),cpp:()=>Ne(()=>import("./cpp-DwbdDzZz.js"),__vite__mapDeps([6,7,8,9,10])),"c++":()=>Ne(()=>import("./cpp-DwbdDzZz.js"),__vite__mapDeps([6,7,8,9,10])),css:()=>Ne(()=>import("./css-thMyhgoI.js"),[]),glsl:()=>Ne(()=>import("./glsl-BnhNDUde.js"),__vite__mapDeps([8,9])),graphql:()=>Ne(()=>import("./graphql-CjpzR3J5.js"),__vite__mapDeps([11,12,13,14,15])),gql:()=>Ne(()=>import("./graphql-CjpzR3J5.js"),__vite__mapDeps([11,12,13,14,15])),haml:()=>Ne(()=>import("./haml-C6u1SEPK.js"),__vite__mapDeps([16,12,17])),html:()=>Ne(()=>import("./html-Di0qV9e9.js"),__vite__mapDeps([18,12,17])),java:()=>Ne(()=>import("./java-a6NgFDTw.js"),[]),javascript:()=>Ne(()=>import("./javascript-DWkXfOmy.js"),[]),js:()=>Ne(()=>import("./javascript-DWkXfOmy.js"),[]),json:()=>Ne(()=>import("./json-CAhrKACI.js"),[]),jsonc:()=>Ne(()=>import("./jsonc-hsrVBXzx.js"),[]),jsonl:()=>Ne(()=>import("./jsonl-BjDRLQe5.js"),[]),jsx:()=>Ne(()=>import("./jsx-CYoryoa-.js"),[]),julia:()=>Ne(()=>import("./julia-B_x4mOiC.js"),__vite__mapDeps([19,6,7,8,9,10,20,12,21])),jl:()=>Ne(()=>import("./julia-B_x4mOiC.js"),__vite__mapDeps([19,6,7,8,9,10,20,12,21])),less:()=>Ne(()=>import("./less-D_kW6FyH.js"),[]),markdown:()=>Ne(()=>import("./markdown-CI13SRvB.js"),[]),md:()=>Ne(()=>import("./markdown-CI13SRvB.js"),[]),mdx:()=>Ne(()=>import("./mdx-jxcz1tvo.js"),[]),php:()=>Ne(()=>import("./php-Li1gZcgm.js"),__vite__mapDeps([22,18,12,17,23,24,10,25])),postcss:()=>Ne(()=>import("./postcss-B6Y8ymK-.js"),[]),pug:()=>Ne(()=>import("./pug-BeGtHBib.js"),__vite__mapDeps([26,12,17,18])),jade:()=>Ne(()=>import("./pug-BeGtHBib.js"),__vite__mapDeps([26,12,17,18])),python:()=>Ne(()=>import("./python-2_G7h5rp.js"),[]),py:()=>Ne(()=>import("./python-2_G7h5rp.js"),[]),r:()=>Ne(()=>import("./r-BG_ByPbL.js"),[]),regexp:()=>Ne(()=>import("./regexp-YoNQ8D_6.js"),[]),regex:()=>Ne(()=>import("./regexp-YoNQ8D_6.js"),[]),sass:()=>Ne(()=>import("./sass-pz5lImlE.js"),[]),scss:()=>Ne(()=>import("./scss-DJS4KECY.js"),__vite__mapDeps([27,17])),shellscript:()=>Ne(()=>import("./shellscript-lCllR1Hz.js"),[]),bash:()=>Ne(()=>import("./shellscript-lCllR1Hz.js"),[]),sh:()=>Ne(()=>import("./shellscript-lCllR1Hz.js"),[]),shell:()=>Ne(()=>import("./shellscript-lCllR1Hz.js"),[]),zsh:()=>Ne(()=>import("./shellscript-lCllR1Hz.js"),[]),sql:()=>Ne(()=>import("./sql-BlMRzCLu.js"),[]),svelte:()=>Ne(()=>import("./svelte-CmLmIVpA.js"),__vite__mapDeps([28,12,13,17,29])),typescript:()=>Ne(()=>import("./typescript-CmcXfmKQ.js"),[]),ts:()=>Ne(()=>import("./typescript-CmcXfmKQ.js"),[]),vue:()=>Ne(()=>import("./vue-BoDiZ8fk.js"),__vite__mapDeps([30,17,12,13,25,18])),"vue-html":()=>Ne(()=>import("./vue-html-CushlTAs.js"),__vite__mapDeps([31,30,17,12,13,25,18])),wasm:()=>Ne(()=>import("./wasm-BzdluPJ6.js"),[]),wgsl:()=>Ne(()=>import("./wgsl-BphOKwv5.js"),[]),xml:()=>Ne(()=>import("./xml-CaEe8SME.js"),__vite__mapDeps([23,24])),yaml:()=>Ne(()=>import("./yaml-D_2ZYnRV.js"),[]),yml:()=>Ne(()=>import("./yaml-D_2ZYnRV.js"),[]),tsx:()=>Ne(()=>import("./tsx-CIOiSPxe.js"),[]),typescriptreact:()=>Ne(()=>import("./tsx-CIOiSPxe.js"),[]),haskell:()=>Ne(()=>import("./haskell-FnOM-vmz.js"),[]),hs:()=>Ne(()=>import("./haskell-FnOM-vmz.js"),[]),"c#":()=>Ne(()=>import("./csharp-BQ30bpRg.js"),[]),csharp:()=>Ne(()=>import("./csharp-BQ30bpRg.js"),[]),cs:()=>Ne(()=>import("./csharp-BQ30bpRg.js"),[]),latex:()=>Ne(()=>import("./latex-BooTHTNP.js"),__vite__mapDeps([32,21])),lua:()=>Ne(()=>import("./lua-Dj7FURKN.js"),__vite__mapDeps([33,9])),mermaid:()=>Ne(()=>import("./mermaid-gUpe-enh.js"),[]),mmd:()=>Ne(()=>import("./mermaid-gUpe-enh.js"),[]),ruby:()=>Ne(()=>import("./ruby-BTP7IeOl.js"),__vite__mapDeps([34,18,12,17,16,23,24,10,11,13,14,15,6,7,8,9,35,33,36])),rb:()=>Ne(()=>import("./ruby-BTP7IeOl.js"),__vite__mapDeps([34,18,12,17,16,23,24,10,11,13,14,15,6,7,8,9,35,33,36])),rust:()=>Ne(()=>import("./rust-DYFNg61u.js"),[]),rs:()=>Ne(()=>import("./rust-DYFNg61u.js"),[]),scala:()=>Ne(()=>import("./scala-7xzopAsN.js"),[]),swift:()=>Ne(()=>import("./swift-ByDN_Krv.js"),[]),kotlin:()=>Ne(()=>import("./kotlin-BEKa8fh_.js"),[]),kt:()=>Ne(()=>import("./kotlin-BEKa8fh_.js"),[]),kts:()=>Ne(()=>import("./kotlin-BEKa8fh_.js"),[]),"objective-c":()=>Ne(()=>import("./objective-c-Bub0I_Dw.js"),[]),objc:()=>Ne(()=>import("./objective-c-Bub0I_Dw.js"),[])},y$e={"github-dark":()=>Ne(()=>import("./github-dark-DHJKELXO.js"),[]),"github-light":()=>Ne(()=>import("./github-light-DAi9KRSo.js"),[])},b$e=MPe({langs:g$e,themes:y$e,engine:()=>m$e()}),v$e={defaultLanguage:"javascript",supportedLanguages:{text:{name:"Plain Text",aliases:["text","txt","plain"]},c:{name:"C",aliases:["c"]},cpp:{name:"C++",aliases:["cpp","c++"]},css:{name:"CSS",aliases:["css"]},glsl:{name:"GLSL",aliases:["glsl"]},graphql:{name:"GraphQL",aliases:["graphql","gql"]},haml:{name:"Ruby Haml",aliases:["haml"]},html:{name:"HTML",aliases:["html"]},java:{name:"Java",aliases:["java"]},javascript:{name:"JavaScript",aliases:["javascript","js"]},json:{name:"JSON",aliases:["json"]},jsonc:{name:"JSON with Comments",aliases:["jsonc"]},jsonl:{name:"JSON Lines",aliases:["jsonl"]},jsx:{name:"JSX",aliases:["jsx"]},julia:{name:"Julia",aliases:["julia","jl"]},less:{name:"Less",aliases:["less"]},markdown:{name:"Markdown",aliases:["markdown","md"]},mdx:{name:"MDX",aliases:["mdx"]},php:{name:"PHP",aliases:["php"]},postcss:{name:"PostCSS",aliases:["postcss"]},pug:{name:"Pug",aliases:["pug","jade"]},python:{name:"Python",aliases:["python","py"]},r:{name:"R",aliases:["r"]},regexp:{name:"RegExp",aliases:["regexp","regex"]},sass:{name:"Sass",aliases:["sass"]},scss:{name:"SCSS",aliases:["scss"]},shellscript:{name:"Shell",aliases:["shellscript","bash","sh","shell","zsh"]},sql:{name:"SQL",aliases:["sql"]},svelte:{name:"Svelte",aliases:["svelte"]},typescript:{name:"TypeScript",aliases:["typescript","ts"]},vue:{name:"Vue",aliases:["vue"]},"vue-html":{name:"Vue HTML",aliases:["vue-html"]},wasm:{name:"WebAssembly",aliases:["wasm"]},wgsl:{name:"WGSL",aliases:["wgsl"]},xml:{name:"XML",aliases:["xml"]},yaml:{name:"YAML",aliases:["yaml","yml"]},tsx:{name:"TSX",aliases:["tsx","typescriptreact"]},haskell:{name:"Haskell",aliases:["haskell","hs"]},csharp:{name:"C#",aliases:["c#","csharp","cs"]},latex:{name:"LaTeX",aliases:["latex"]},lua:{name:"Lua",aliases:["lua"]},mermaid:{name:"Mermaid",aliases:["mermaid","mmd"]},ruby:{name:"Ruby",aliases:["ruby","rb"]},rust:{name:"Rust",aliases:["rust","rs"]},scala:{name:"Scala",aliases:["scala"]},swift:{name:"Swift",aliases:["swift"]},kotlin:{name:"Kotlin",aliases:["kotlin","kt","kts"]},"objective-c":{name:"Objective C",aliases:["objective-c","objc"]}},createHighlighter:()=>b$e({themes:["github-dark","github-light"],langs:[]})};function w$e(e,t){const n=(e.nodeAfter??e.nodeBefore)?.marks.find(o=>o.type===t);if(!n)return e.pos;let r=e.pos+(e.nodeAfter?.nodeSize??0);for(;;){const o=e.doc.resolve(r);if(o.depth<1||o.nodeAfter&&!t.isInSet(o.marks()))return o.pos;let i=o.after(),s=e.doc.resolve(i),a=s.nodeAfter;for(;s.depth>0&&!a;)i=o.after(s.depth),s=e.doc.resolve(i),a=s.nodeAfter;let l=i+1,c=a?.firstChild;for(;c&&!c.isLeaf&&!t.isInSet(c.marks);)c=c.firstChild,l++;const u=c?.marks.find(p=>p.type===t);if(!c||!u||u.attrs.id!==n.attrs.id)return o.pos;const f=e.doc.resolve(l);r=f.pos+(f.nodeAfter?.nodeSize??0)}}function $7(){const e=document.createElement("span");return e.appendChild(document.createTextNode("")),e}function x$e(e){const{deletion:t,insertion:n}=e.schema.marks;if(!t)throw new Error("Failed to apply tracked changes to node: schema does not contain deletion mark. Did you forget to add it?");if(!n)throw new Error("Failed to apply tracked changes to node: schema does not contain insertion mark. Did you forget to add it?");const r=[];let o=null,i=null,s=0;return e.doc.descendants((a,l,c)=>{if(a.isTextblock&&a.childCount&&(a.children.every(b=>t.isInSet(b.marks))&&r.push(Gt.node(l,l+a.nodeSize,{"data-node-deletion":"true"})),a.children.every(b=>n.isInSet(b.marks))&&r.push(Gt.node(l,l+a.nodeSize,{"data-node-insertion":"true"}))),a.type.name!=="text")return!0;const u=a.marks.find(b=>b.type===t),f=a.marks.find(b=>b.type===n),p=i?.marks.find(b=>b.type===t),m=i?.marks.find(b=>b.type===n),y=s;return i=a,s=l+a.nodeSize,c===o?(o=c,!0):(o=c,(!u||!p)&&(!f||!m)||u?.attrs.id!==p?.attrs.id&&f?.attrs.id!==m?.attrs.id||(u&&r.push(Gt.widget(y,$7,{key:u.attrs.id,marks:[t.create({id:u.attrs.id})]})),f&&r.push(Gt.widget(y,$7,{key:f.attrs.id,marks:[n.create({id:f.attrs.id})]}))),!0)}),Rt.create(e.doc,r)}const ik=new Bt("@handlewithcare/prosemirror-suggest-changes");function S$e(){return new St({key:ik,state:{init(){return{enabled:!1}},apply(e,t){const n=e.getMeta(ik);return n&&"enabled"in n?n:t}},props:{decorations:x$e}})}function iQ(e,t,n,r,o){const i=l=>n.isInSet(l),s=l=>r.isInSet(l);i(e.marks)&&(e.isInline?t.removeMark(0,e.nodeSize,n):t.removeNodeMark(0,n)),e.descendants((l,c)=>{const u=s(l.marks),f=i(l.marks);if(!u&&!f)return!0;if(u){const{pos:y,deleted:b}=t.mapping.mapResult(c);if(b)return!1;const x=w$e(t.doc.resolve(y+l.nodeSize),r);return t.deleteRange(y,x),!1}const p=t.mapping.map(c),m=p+l.nodeSize;return l.isInline?t.removeMark(p,m,n):t.removeNodeMark(p,n),!0})}function L7(e,t,n){const r=e.marks.filter(o=>o.type===e.type.schema.marks.modification);for(const o of r)if(o.attrs.type==="attr"&&typeof o.attrs.attrName=="string")n.setNodeAttribute(t,o.attrs.attrName,o.attrs.previousValue);else if(o.attrs.type==="mark")o.attrs.previousValue?n.addNodeMark(0,e.type.schema.markFromJSON(o.attrs.previousValue)):n.removeNodeMark(t,e.type.schema.markFromJSON(o.attrs.previousValue));else if(o.attrs.type==="nodeType")n.setNodeMarkup(t,e.type.schema.nodes[o.attrs.previousValue],null);else throw new Error("Unknown modification type")}function sQ(e,t,n,r){const{modification:o}=e.type.schema.marks;if(!o)throw new Error("Failed to apply modifications to node: schema does not contain modification mark. Did you forget to add it?");const i=a=>o.isInSet(a);if(i(e.marks)){let a;do a=t.steps.length,t.removeNodeMark(0,o);while(t.steps.length>a);n<0&&L7(e,0,t)}e.descendants((a,l)=>{if(!i(a.marks))return!0;let u;do u=t.steps.length,t.removeNodeMark(l,o);while(t.steps.length>u);return n<0&&L7(a,l,t),!0})}function aQ(e,t){const{deletion:n,insertion:r}=e.schema.marks;if(!n)throw new Error("Failed to apply tracked changes to node: schema does not contain deletion mark. Did you forget to add it?");if(!r)throw new Error("Failed to apply tracked changes to node: schema does not contain insertion mark. Did you forget to add it?");const o=e.tr;return iQ(e.doc,o,r,n),sQ(o.doc,o,1),o.setMeta(ik,{skip:!0}),t?.(o),!0}function j7(e,t){const{deletion:n,insertion:r}=e.schema.marks;if(!n)throw new Error("Failed to apply tracked changes to node: schema does not contain deletion mark. Did you forget to add it?");if(!r)throw new Error("Failed to apply tracked changes to node: schema does not contain insertion mark. Did you forget to add it?");const o=e.tr;return iQ(e.doc,o,n,r),sQ(o.doc,o,-1),o.setMeta(ik,{skip:!0}),t?.(o),!0}var lQ="vercel.ai.error",k$e=Symbol.for(lQ),cQ,C$e=class uQ extends Error{constructor({name:t,message:n,cause:r}){super(n),this[cQ]=!0,this.name=t,this.cause=r}static isInstance(t){return uQ.hasMarker(t,lQ)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};cQ=k$e;var Rn=C$e,dQ="AI_APICallError",fQ=`vercel.ai.error.${dQ}`,E$e=Symbol.for(fQ),hQ,pQ=class extends Rn{constructor({message:t,url:n,requestBodyValues:r,statusCode:o,responseHeaders:i,responseBody:s,cause:a,isRetryable:l=o!=null&&(o===408||o===409||o===429||o>=500),data:c}){super({name:dQ,message:t,cause:a}),this[hQ]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=c}static isInstance(t){return Rn.hasMarker(t,fQ)}};hQ=E$e;function mQ(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var gQ="AI_InvalidArgumentError",yQ=`vercel.ai.error.${gQ}`,T$e=Symbol.for(yQ),bQ,_$e=class extends Rn{constructor({message:t,cause:n,argument:r}){super({name:gQ,message:t,cause:n}),this[bQ]=!0,this.argument=r}static isInstance(t){return Rn.hasMarker(t,yQ)}};bQ=T$e;var vQ="AI_InvalidPromptError",wQ=`vercel.ai.error.${vQ}`,A$e=Symbol.for(wQ),xQ,Xu=class extends Rn{constructor({prompt:t,message:n,cause:r}){super({name:vQ,message:`Invalid prompt: ${n}`,cause:r}),this[xQ]=!0,this.prompt=t}static isInstance(t){return Rn.hasMarker(t,wQ)}};xQ=A$e;var SQ="AI_JSONParseError",kQ=`vercel.ai.error.${SQ}`,M$e=Symbol.for(kQ),CQ,LN=class extends Rn{constructor({text:t,cause:n}){super({name:SQ,message:`JSON parsing failed: Text: ${t}.
Error message: ${mQ(n)}`,cause:n}),this[CQ]=!0,this.text=t}static isInstance(t){return Rn.hasMarker(t,kQ)}};CQ=M$e;var EQ="AI_TypeValidationError",TQ=`vercel.ai.error.${EQ}`,R$e=Symbol.for(TQ),_Q,N$e=class jN extends Rn{constructor({value:t,cause:n}){super({name:EQ,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${mQ(n)}`,cause:n}),this[_Q]=!0,this.value=t}static isInstance(t){return Rn.hasMarker(t,TQ)}static wrap({value:t,cause:n}){return jN.isInstance(n)&&n.value===t?n:new jN({value:t,cause:n})}};_Q=R$e;var ph=N$e,AQ="AI_UnsupportedFunctionalityError",MQ=`vercel.ai.error.${AQ}`,I$e=Symbol.for(MQ),RQ,sk=class extends Rn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:AQ,message:n}),this[RQ]=!0,this.functionality=t}static isInstance(t){return Rn.hasMarker(t,MQ)}};RQ=I$e;function ak(e){return e===null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"?!0:Array.isArray(e)?e.every(ak):typeof e=="object"?Object.entries(e).every(([t,n])=>typeof t=="string"&&ak(n)):!1}function z7(e){return Array.isArray(e)&&e.every(ak)}function zN(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,n])=>typeof t=="string"&&ak(n))}let O$e=(e,t=21)=>(n=t)=>{let r="",o=n|0;for(;o--;)r+=e[Math.random()*e.length|0];return r};var ff={exports:{}},B7;function P$e(){if(B7)return ff.exports;B7=1;const e=typeof Buffer<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(a,l,c){c==null&&l!==null&&typeof l=="object"&&(c=l,l=void 0),e&&Buffer.isBuffer(a)&&(a=a.toString()),a&&a.charCodeAt(0)===65279&&(a=a.slice(1));const u=JSON.parse(a,l);if(u===null||typeof u!="object")return u;const f=c&&c.protoAction||"error",p=c&&c.constructorAction||"error";if(f==="ignore"&&p==="ignore")return u;if(f!=="ignore"&&p!=="ignore"){if(t.test(a)===!1&&n.test(a)===!1)return u}else if(f!=="ignore"&&p==="ignore"){if(t.test(a)===!1)return u}else if(n.test(a)===!1)return u;return o(u,{protoAction:f,constructorAction:p,safe:c&&c.safe})}function o(a,{protoAction:l="error",constructorAction:c="error",safe:u}={}){let f=[a];for(;f.length;){const p=f;f=[];for(const m of p){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"__proto__")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"constructor")&&Object.prototype.hasOwnProperty.call(m.constructor,"prototype")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.constructor}for(const y in m){const b=m[y];b&&typeof b=="object"&&f.push(b)}}}return a}function i(a,l,c){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(a,l,c)}finally{Error.stackTraceLimit=u}}function s(a,l){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(a,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return ff.exports=i,ff.exports.default=i,ff.exports.parse=i,ff.exports.safeParse=s,ff.exports.scan=o,ff.exports}var D$e=P$e();const $$e=Rd(D$e);function L$e(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function j$e(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}var Ah=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=O$e(n,t);if(e==null)return o;if(n.includes(r))throw new _$e({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${o(i)}`};Ah();function z$e(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function B$e(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var BN=Symbol.for("vercel.ai.validator");function V$e(e){return{[BN]:!0,validate:e}}function F$e(e){return typeof e=="object"&&e!==null&&BN in e&&e[BN]===!0&&"validate"in e}function H$e(e){return F$e(e)?e:U$e(e)}function U$e(e){return V$e(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Mm({value:e,schema:t}){const n=H$e(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ph.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ph.wrap({value:e,cause:r})}}}function NQ({text:e,schema:t}){try{const n=$$e.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Mm({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:LN.isInstance(n)?n:new LN({text:e,cause:n})}}}var{btoa:G$e,atob:q$e}=globalThis;function IQ(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=q$e(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function V7(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return G$e(t)}var OQ="vercel.ai.error",Z$e=Symbol.for(OQ),PQ,W$e=class DQ extends Error{constructor({name:t,message:n,cause:r}){super(n),this[PQ]=!0,this.name=t,this.cause=r}static isInstance(t){return DQ.hasMarker(t,OQ)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};PQ=Z$e;var Rm=W$e;function $Q(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var LQ="AI_InvalidArgumentError",jQ=`vercel.ai.error.${LQ}`,K$e=Symbol.for(jQ),zQ,Y$e=class extends Rm{constructor({message:t,cause:n,argument:r}){super({name:LQ,message:t,cause:n}),this[zQ]=!0,this.argument=r}static isInstance(t){return Rm.hasMarker(t,jQ)}};zQ=K$e;var BQ="AI_JSONParseError",VQ=`vercel.ai.error.${BQ}`,J$e=Symbol.for(VQ),FQ,F7=class extends Rm{constructor({text:t,cause:n}){super({name:BQ,message:`JSON parsing failed: Text: ${t}.
Error message: ${$Q(n)}`,cause:n}),this[FQ]=!0,this.text=t}static isInstance(t){return Rm.hasMarker(t,VQ)}};FQ=J$e;var HQ="AI_TypeValidationError",UQ=`vercel.ai.error.${HQ}`,X$e=Symbol.for(UQ),GQ,Q$e=class VN extends Rm{constructor({value:t,cause:n}){super({name:HQ,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${$Q(n)}`,cause:n}),this[GQ]=!0,this.value=t}static isInstance(t){return Rm.hasMarker(t,UQ)}static wrap({value:t,cause:n}){return VN.isInstance(n)&&n.value===t?n:new VN({value:t,cause:n})}};GQ=X$e;var H7=Q$e;let e5e=(e,t=21)=>(n=t)=>{let r="",o=n|0;for(;o--;)r+=e[Math.random()*e.length|0];return r};var hf={exports:{}},U7;function t5e(){if(U7)return hf.exports;U7=1;const e=typeof Buffer<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(a,l,c){c==null&&l!==null&&typeof l=="object"&&(c=l,l=void 0),e&&Buffer.isBuffer(a)&&(a=a.toString()),a&&a.charCodeAt(0)===65279&&(a=a.slice(1));const u=JSON.parse(a,l);if(u===null||typeof u!="object")return u;const f=c&&c.protoAction||"error",p=c&&c.constructorAction||"error";if(f==="ignore"&&p==="ignore")return u;if(f!=="ignore"&&p!=="ignore"){if(t.test(a)===!1&&n.test(a)===!1)return u}else if(f!=="ignore"&&p==="ignore"){if(t.test(a)===!1)return u}else if(n.test(a)===!1)return u;return o(u,{protoAction:f,constructorAction:p,safe:c&&c.safe})}function o(a,{protoAction:l="error",constructorAction:c="error",safe:u}={}){let f=[a];for(;f.length;){const p=f;f=[];for(const m of p){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"__proto__")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"constructor")&&Object.prototype.hasOwnProperty.call(m.constructor,"prototype")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.constructor}for(const y in m){const b=m[y];b&&typeof b=="object"&&f.push(b)}}}return a}function i(a,l,c){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(a,l,c)}finally{Error.stackTraceLimit=u}}function s(a,l){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(a,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return hf.exports=i,hf.exports.default=i,hf.exports.parse=i,hf.exports.safeParse=s,hf.exports.scan=o,hf.exports}var n5e=t5e();const r5e=Rd(n5e);var o5e=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=e5e(n,t);if(e==null)return o;if(n.includes(r))throw new Y$e({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${o(i)}`};o5e();var lk=Symbol.for("vercel.ai.validator");function i5e(e){return{[lk]:!0,validate:e}}function s5e(e){return typeof e=="object"&&e!==null&&lk in e&&e[lk]===!0&&"validate"in e}function a5e(e){return s5e(e)?e:l5e(e)}function l5e(e){return i5e(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function c5e({value:e,schema:t}){const n=a5e(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:H7.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:H7.wrap({value:e,cause:r})}}}function G7({text:e,schema:t}){try{const n=r5e.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=c5e({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:F7.isInstance(n)?n:new F7({text:e,cause:n})}}}const u5e=Symbol("Let zodToJsonSchema decide on which parser to use"),q7={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},d5e=e=>typeof e=="string"?{...q7,name:e}:{...q7,...e},f5e=e=>{const t=d5e(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,o])=>[o._def,{def:o._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function qQ(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function dn(e,t,n,r,o){e[t]=n,qQ(e,t,r,o)}const ZQ=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function be(e,t,n){function r(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in s.prototype)u in a||Object.defineProperty(a,u,{value:s.prototype[u].bind(a)});a._zod.constr=s,a._zod.def=l}const o=n?.Parent??Object;class i extends o{}Object.defineProperty(i,"name",{value:e});function s(a){var l;const c=n?.Parent?new i:this;r(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class ob extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const WQ={};function Td(e){return WQ}function KQ(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function FN(e,t){return typeof t=="bigint"?t.toString():t}function yP(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function bP(e){return e==null}function vP(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function h5e(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const l=r.match(/\d?e-(\d?)/);l?.[1]&&(o=Number.parseInt(l[1]))}const i=n>o?n:o,s=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return s%a/10**i}const Z7=Symbol("evaluating");function en(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Z7)return r===void 0&&(r=Z7,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function wP(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function hu(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ug(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function W7(e){return JSON.stringify(e)}const YQ="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function ck(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const p5e=yP(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function ib(e){if(ck(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(ck(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function JQ(e){return ib(e)?{...e}:e}const m5e=new Set(["string","number","symbol"]);function Nm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Mh(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function Ye(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function g5e(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const y5e={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function b5e(e,t){const n=e._zod.def,r=ug(e._zod.def,{get shape(){const o={};for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(o[i]=n.shape[i])}return hu(this,"shape",o),o},checks:[]});return Mh(e,r)}function v5e(e,t){const n=e._zod.def,r=ug(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete o[i]}return hu(this,"shape",o),o},checks:[]});return Mh(e,r)}function w5e(e,t){if(!ib(t))throw new Error("Invalid input to extend: expected a plain object");const n=ug(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return hu(this,"shape",r),r},checks:[]});return Mh(e,n)}function x5e(e,t){const n=ug(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return hu(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return Mh(e,n)}function S5e(e,t,n){const r=ug(t._zod.def,{get shape(){const o=t._zod.def.shape,i={...o};if(n)for(const s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(i[s]=e?new e({type:"optional",innerType:o[s]}):o[s])}else for(const s in o)i[s]=e?new e({type:"optional",innerType:o[s]}):o[s];return hu(this,"shape",i),i},checks:[]});return Mh(t,r)}function k5e(e,t,n){const r=ug(t._zod.def,{get shape(){const o=t._zod.def.shape,i={...o};if(n)for(const s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(i[s]=new e({type:"nonoptional",innerType:o[s]}))}else for(const s in o)i[s]=new e({type:"nonoptional",innerType:o[s]});return hu(this,"shape",i),i},checks:[]});return Mh(t,r)}function s0(e,t=0){for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Up(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function ww(e){return typeof e=="string"?e:e?.message}function _d(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=ww(e.inst?._zod.def?.error?.(e))??ww(t?.error?.(e))??ww(n.customError?.(e))??ww(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function xP(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function sb(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const XQ=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,FN,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},QQ=be("$ZodError",XQ),eee=be("$ZodError",XQ,{Parent:Error});function C5e(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function E5e(e,t){const n=t||function(i){return i.message},r={_errors:[]},o=i=>{for(const s of i.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>o({issues:a}));else if(s.code==="invalid_key")o({issues:s.issues});else if(s.code==="invalid_element")o({issues:s.issues});else if(s.path.length===0)r._errors.push(n(s));else{let a=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(s))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return o(e),r}const T5e=e=>(t,n,r,o)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new ob;if(s.issues.length){const a=new(o?.Err??e)(s.issues.map(l=>_d(l,i,Td())));throw YQ(a,o?.callee),a}return s.value},_5e=e=>async(t,n,r,o)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const a=new(o?.Err??e)(s.issues.map(l=>_d(l,i,Td())));throw YQ(a,o?.callee),a}return s.value},tee=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new ob;return i.issues.length?{success:!1,error:new(e??QQ)(i.issues.map(s=>_d(s,o,Td())))}:{success:!0,data:i.value}},A5e=tee(eee),nee=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(s=>_d(s,o,Td())))}:{success:!0,data:i.value}},M5e=nee(eee),R5e=/^[cC][^\s-]{8,}$/,N5e=/^[0-9a-z]+$/,I5e=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,O5e=/^[0-9a-vA-V]{20}$/,P5e=/^[A-Za-z0-9]{27}$/,D5e=/^[a-zA-Z0-9_-]{21}$/,$5e=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,L5e=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,K7=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,j5e=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,z5e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function B5e(){return new RegExp(z5e,"u")}const V5e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,F5e=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,H5e=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,U5e=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,G5e=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ree=/^[A-Za-z0-9_-]*$/,q5e=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Z5e=/^\+(?:[0-9]){6,14}[0-9]$/,oee="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",W5e=new RegExp(`^${oee}$`);function iee(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function K5e(e){return new RegExp(`^${iee(e)}$`)}function Y5e(e){const t=iee({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${oee}T(?:${r})$`)}const J5e=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},X5e=/^\d+$/,Q5e=/^-?\d+(?:\.\d+)?/i,eLe=/true|false/i,tLe=/null/i,nLe=/^[^A-Z]*$/,rLe=/^[^a-z]*$/,Wi=be("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),see={number:"number",bigint:"bigint",object:"date"},aee=be("$ZodCheckLessThan",(e,t)=>{Wi.init(e,t);const n=see[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,i=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),lee=be("$ZodCheckGreaterThan",(e,t)=>{Wi.init(e,t);const n=see[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,i=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),oLe=be("$ZodCheckMultipleOf",(e,t)=>{Wi.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):h5e(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),iLe=be("$ZodCheckNumberFormat",(e,t)=>{Wi.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[o,i]=y5e[t.format];e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,a.minimum=o,a.maximum=i,n&&(a.pattern=X5e)}),e._zod.check=s=>{const a=s.value;if(n){if(!Number.isInteger(a)){s.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}a<o&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>i&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:e})}}),sLe=be("$ZodCheckMaxLength",(e,t)=>{var n;Wi.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!bP(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const s=xP(o);r.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),aLe=be("$ZodCheckMinLength",(e,t)=>{var n;Wi.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!bP(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const s=xP(o);r.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),lLe=be("$ZodCheckLengthEquals",(e,t)=>{var n;Wi.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!bP(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,i=o.length;if(i===t.length)return;const s=xP(o),a=i>t.length;r.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),mE=be("$ZodCheckStringFormat",(e,t)=>{var n,r;Wi.init(e,t),e._zod.onattach.push(o=>{const i=o._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),cLe=be("$ZodCheckRegex",(e,t)=>{mE.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),uLe=be("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=nLe),mE.init(e,t)}),dLe=be("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=rLe),mE.init(e,t)}),fLe=be("$ZodCheckIncludes",(e,t)=>{Wi.init(e,t);const n=Nm(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),hLe=be("$ZodCheckStartsWith",(e,t)=>{Wi.init(e,t);const n=new RegExp(`^${Nm(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),pLe=be("$ZodCheckEndsWith",(e,t)=>{Wi.init(e,t);const n=new RegExp(`.*${Nm(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),mLe=be("$ZodCheckOverwrite",(e,t)=>{Wi.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class gLe{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(s=>s),o=Math.min(...r.map(s=>s.length-s.trimStart().length)),i=r.map(s=>s.slice(o)).map(s=>" ".repeat(this.indent*2)+s);for(const s of i)this.content.push(s)}compile(){const t=Function,n=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...n,o.join(`
`))}}const yLe={major:4,minor:0,patch:17},zn=be("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=yLe;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const i of o._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,s,a)=>{let l=s0(i),c;for(const u of s){if(u._zod.def.when){if(!u._zod.def.when(i))continue}else if(l)continue;const f=i.issues.length,p=u._zod.check(i);if(p instanceof Promise&&a?.async===!1)throw new ob;if(c||p instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await p,i.issues.length!==f&&(l||(l=s0(i,f)))});else{if(i.issues.length===f)continue;l||(l=s0(i,f))}}return c?c.then(()=>i):i};e._zod.run=(i,s)=>{const a=e._zod.parse(i,s);if(a instanceof Promise){if(s.async===!1)throw new ob;return a.then(l=>o(l,r,s))}return o(a,r,s)}}e["~standard"]={validate:o=>{try{const i=A5e(e,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return M5e(e,o).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),SP=be("$ZodString",(e,t)=>{zn.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??J5e(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Xn=be("$ZodStringFormat",(e,t)=>{mE.init(e,t),SP.init(e,t)}),bLe=be("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=L5e),Xn.init(e,t)}),vLe=be("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=K7(r))}else t.pattern??(t.pattern=K7());Xn.init(e,t)}),wLe=be("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=j5e),Xn.init(e,t)}),xLe=be("$ZodURL",(e,t)=>{Xn.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:q5e.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),SLe=be("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=B5e()),Xn.init(e,t)}),kLe=be("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=D5e),Xn.init(e,t)}),CLe=be("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=R5e),Xn.init(e,t)}),ELe=be("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=N5e),Xn.init(e,t)}),TLe=be("$ZodULID",(e,t)=>{t.pattern??(t.pattern=I5e),Xn.init(e,t)}),_Le=be("$ZodXID",(e,t)=>{t.pattern??(t.pattern=O5e),Xn.init(e,t)}),ALe=be("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=P5e),Xn.init(e,t)}),MLe=be("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Y5e(t)),Xn.init(e,t)}),RLe=be("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=W5e),Xn.init(e,t)}),NLe=be("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=K5e(t)),Xn.init(e,t)}),ILe=be("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=$5e),Xn.init(e,t)}),OLe=be("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=V5e),Xn.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),PLe=be("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=F5e),Xn.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),DLe=be("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=H5e),Xn.init(e,t)}),$Le=be("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=U5e),Xn.init(e,t),e._zod.check=n=>{const[r,o]=n.value.split("/");try{if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function cee(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const LLe=be("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=G5e),Xn.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{cee(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function jLe(e){if(!ree.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return cee(n)}const zLe=be("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ree),Xn.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{jLe(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),BLe=be("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Z5e),Xn.init(e,t)});function VLe(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const FLe=be("$ZodJWT",(e,t)=>{Xn.init(e,t),e._zod.check=n=>{VLe(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),uee=be("$ZodNumber",(e,t)=>{zn.init(e,t),e._zod.pattern=e._zod.bag.pattern??Q5e,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...i?{received:i}:{}}),n}}),HLe=be("$ZodNumber",(e,t)=>{iLe.init(e,t),uee.init(e,t)}),ULe=be("$ZodBoolean",(e,t)=>{zn.init(e,t),e._zod.pattern=eLe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),GLe=be("$ZodNull",(e,t)=>{zn.init(e,t),e._zod.pattern=tLe,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const o=n.value;return o===null||n.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),n}}),qLe=be("$ZodAny",(e,t)=>{zn.init(e,t),e._zod.parse=n=>n}),ZLe=be("$ZodUnknown",(e,t)=>{zn.init(e,t),e._zod.parse=n=>n}),WLe=be("$ZodNever",(e,t)=>{zn.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Y7(e,t,n){e.issues.length&&t.issues.push(...Up(n,e.issues)),t.value[n]=e.value}const KLe=be("$ZodArray",(e,t)=>{zn.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const i=[];for(let s=0;s<o.length;s++){const a=o[s],l=t.element._zod.run({value:a,issues:[]},r);l instanceof Promise?i.push(l.then(c=>Y7(c,n,s))):Y7(l,n,s)}return i.length?Promise.all(i).then(()=>n):n}});function xw(e,t,n,r){e.issues.length&&t.issues.push(...Up(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const YLe=be("$ZodObject",(e,t)=>{zn.init(e,t);const n=yP(()=>{const f=Object.keys(t.shape);for(const m of f)if(!t.shape[m]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${m}": expected a Zod schema`);const p=g5e(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(p)}});en(e._zod,"propValues",()=>{const f=t.shape,p={};for(const m in f){const y=f[m]._zod;if(y.values){p[m]??(p[m]=new Set);for(const b of y.values)p[m].add(b)}}return p});const r=f=>{const p=new gLe(["shape","payload","ctx"]),m=n.value,y=E=>{const T=W7(E);return`shape[${T}]._zod.run({ value: input[${T}], issues: [] }, ctx)`};p.write("const input = payload.value;");const b=Object.create(null);let x=0;for(const E of m.keys)b[E]=`key_${x++}`;p.write("const newResult = {}");for(const E of m.keys){const T=b[E],A=W7(E);p.write(`const ${T} = ${y(E)};`),p.write(`
        if (${T}.issues.length) {
          payload.issues = payload.issues.concat(${T}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${A}, ...iss.path] : [${A}]
          })));
        }
        
        if (${T}.value === undefined) {
          if (${A} in input) {
            newResult[${A}] = undefined;
          }
        } else {
          newResult[${A}] = ${T}.value;
        }
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const S=p.compile();return(E,T)=>S(f,E,T)};let o;const i=ck,s=!WQ.jitless,l=s&&p5e.value,c=t.catchall;let u;e._zod.parse=(f,p)=>{u??(u=n.value);const m=f.value;if(!i(m))return f.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),f;const y=[];if(s&&l&&p?.async===!1&&p.jitless!==!0)o||(o=r(t.shape)),f=o(f,p);else{f.value={};const T=u.shape;for(const A of u.keys){const R=T[A]._zod.run({value:m[A],issues:[]},p);R instanceof Promise?y.push(R.then(O=>xw(O,f,A,m))):xw(R,f,A,m)}}if(!c)return y.length?Promise.all(y).then(()=>f):f;const b=[],x=u.keySet,S=c._zod,E=S.def.type;for(const T of Object.keys(m)){if(x.has(T))continue;if(E==="never"){b.push(T);continue}const A=S.run({value:m[T],issues:[]},p);A instanceof Promise?y.push(A.then(M=>xw(M,f,T,m))):xw(A,f,T,m)}return b.length&&f.issues.push({code:"unrecognized_keys",keys:b,input:m,inst:e}),y.length?Promise.all(y).then(()=>f):f}});function J7(e,t,n,r){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const o=e.filter(i=>!s0(i));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(i=>i.issues.map(s=>_d(s,r,Td())))}),t)}const dee=be("$ZodUnion",(e,t)=>{zn.init(e,t),en(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),en(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),en(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),en(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${o.map(i=>vP(i.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,i)=>{if(n)return r(o,i);let s=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:o.value,issues:[]},i);if(c instanceof Promise)a.push(c),s=!0;else{if(c.issues.length===0)return c;a.push(c)}}return s?Promise.all(a).then(l=>J7(l,o,e,i)):J7(a,o,e,i)}}),JLe=be("$ZodDiscriminatedUnion",(e,t)=>{dee.init(e,t);const n=e._zod.parse;en(e._zod,"propValues",()=>{const o={};for(const i of t.options){const s=i._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const[a,l]of Object.entries(s)){o[a]||(o[a]=new Set);for(const c of l)o[a].add(c)}}return o});const r=yP(()=>{const o=t.options,i=new Map;for(const s of o){const a=s._zod.propValues?.[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(const l of a){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,s)}}return i});e._zod.parse=(o,i)=>{const s=o.value;if(!ck(s))return o.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),o;const a=r.value.get(s?.[t.discriminator]);return a?a._zod.run(o,i):t.unionFallback?n(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),o)}}),XLe=be("$ZodIntersection",(e,t)=>{zn.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,i=t.left._zod.run({value:o,issues:[]},r),s=t.right._zod.run({value:o,issues:[]},r);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([l,c])=>X7(n,l,c)):X7(n,i,s)}});function HN(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(ib(e)&&ib(t)){const n=Object.keys(t),r=Object.keys(e).filter(i=>n.indexOf(i)!==-1),o={...e,...t};for(const i of r){const s=HN(e[i],t[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};o[i]=s.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],i=t[r],s=HN(o,i);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function X7(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),s0(e))return e;const r=HN(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const QLe=be("$ZodRecord",(e,t)=>{zn.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!ib(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const i=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const l of s)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:o[l],issues:[]},r);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&n.issues.push(...Up(l,u.issues)),n.value[l]=u.value})):(c.issues.length&&n.issues.push(...Up(l,c.issues)),n.value[l]=c.value)}let a;for(const l in o)s.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:a})}else{n.value={};for(const s of Reflect.ownKeys(o)){if(s==="__proto__")continue;const a=t.keyType._zod.run({value:s,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(c=>_d(c,r,Td())),input:s,path:[s],inst:e}),n.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:o[s],issues:[]},r);l instanceof Promise?i.push(l.then(c=>{c.issues.length&&n.issues.push(...Up(s,c.issues)),n.value[a.value]=c.value})):(l.issues.length&&n.issues.push(...Up(s,l.issues)),n.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>n):n}}),eje=be("$ZodEnum",(e,t)=>{zn.init(e,t);const n=KQ(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>m5e.has(typeof o)).map(o=>typeof o=="string"?Nm(o):o.toString()).join("|")})$`),e._zod.parse=(o,i)=>{const s=o.value;return r.has(s)||o.issues.push({code:"invalid_value",values:n,input:s,inst:e}),o}}),tje=be("$ZodLiteral",(e,t)=>{if(zn.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?Nm(n):n?Nm(n.toString()):String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}}),nje=be("$ZodTransform",(e,t)=>{zn.init(e,t),e._zod.parse=(n,r)=>{const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(s=>(n.value=s,n));if(o instanceof Promise)throw new ob;return n.value=o,n}});function Q7(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const rje=be("$ZodOptional",(e,t)=>{zn.init(e,t),e._zod.optin="optional",e._zod.optout="optional",en(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),en(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${vP(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>Q7(i,n.value)):Q7(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),oje=be("$ZodNullable",(e,t)=>{zn.init(e,t),en(e._zod,"optin",()=>t.innerType._zod.optin),en(e._zod,"optout",()=>t.innerType._zod.optout),en(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${vP(n.source)}|null)$`):void 0}),en(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),ije=be("$ZodDefault",(e,t)=>{zn.init(e,t),e._zod.optin="optional",en(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>eB(i,t)):eB(o,t)}});function eB(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const sje=be("$ZodPrefault",(e,t)=>{zn.init(e,t),e._zod.optin="optional",en(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),aje=be("$ZodNonOptional",(e,t)=>{zn.init(e,t),en(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>tB(i,e)):tB(o,e)}});function tB(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const lje=be("$ZodCatch",(e,t)=>{zn.init(e,t),en(e._zod,"optin",()=>t.innerType._zod.optin),en(e._zod,"optout",()=>t.innerType._zod.optout),en(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(s=>_d(s,r,Td()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(i=>_d(i,r,Td()))},input:n.value}),n.issues=[]),n)}}),cje=be("$ZodPipe",(e,t)=>{zn.init(e,t),en(e._zod,"values",()=>t.in._zod.values),en(e._zod,"optin",()=>t.in._zod.optin),en(e._zod,"optout",()=>t.out._zod.optout),en(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(i=>nB(i,t,r)):nB(o,t,r)}});function nB(e,t,n){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const uje=be("$ZodReadonly",(e,t)=>{zn.init(e,t),en(e._zod,"propValues",()=>t.innerType._zod.propValues),en(e._zod,"values",()=>t.innerType._zod.values),en(e._zod,"optin",()=>t.innerType._zod.optin),en(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(rB):rB(o)}});function rB(e){return e.value=Object.freeze(e.value),e}const dje=be("$ZodLazy",(e,t)=>{zn.init(e,t),en(e._zod,"innerType",()=>t.getter()),en(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),en(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),en(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),en(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),fje=be("$ZodCustom",(e,t)=>{Wi.init(e,t),zn.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(i=>oB(i,n,r,e));oB(o,n,r,e)}});function oB(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(sb(o))}}class fee{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function hje(){return new fee}const Ly=hje();function pje(e,t){return new e({type:"string",...Ye(t)})}function mje(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Ye(t)})}function iB(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Ye(t)})}function gje(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Ye(t)})}function yje(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ye(t)})}function bje(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ye(t)})}function vje(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ye(t)})}function wje(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Ye(t)})}function xje(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Ye(t)})}function Sje(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ye(t)})}function kje(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Ye(t)})}function Cje(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ye(t)})}function Eje(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Ye(t)})}function Tje(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Ye(t)})}function _je(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ye(t)})}function Aje(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ye(t)})}function Mje(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ye(t)})}function Rje(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ye(t)})}function Nje(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ye(t)})}function hee(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Ye(t)})}function Ije(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Ye(t)})}function Oje(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Ye(t)})}function Pje(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Ye(t)})}function Dje(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ye(t)})}function $je(e,t){return new e({type:"string",format:"date",check:"string_format",...Ye(t)})}function Lje(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Ye(t)})}function jje(e,t){return new e({type:"string",format:"duration",check:"string_format",...Ye(t)})}function zje(e,t){return new e({type:"number",checks:[],...Ye(t)})}function Bje(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Ye(t)})}function Vje(e,t){return new e({type:"boolean",...Ye(t)})}function Fje(e,t){return new e({type:"null",...Ye(t)})}function Hje(e){return new e({type:"any"})}function Uje(e){return new e({type:"unknown"})}function Gje(e,t){return new e({type:"never",...Ye(t)})}function sB(e,t){return new aee({check:"less_than",...Ye(t),value:e,inclusive:!1})}function OA(e,t){return new aee({check:"less_than",...Ye(t),value:e,inclusive:!0})}function aB(e,t){return new lee({check:"greater_than",...Ye(t),value:e,inclusive:!1})}function PA(e,t){return new lee({check:"greater_than",...Ye(t),value:e,inclusive:!0})}function lB(e,t){return new oLe({check:"multiple_of",...Ye(t),value:e})}function pee(e,t){return new sLe({check:"max_length",...Ye(t),maximum:e})}function uk(e,t){return new aLe({check:"min_length",...Ye(t),minimum:e})}function mee(e,t){return new lLe({check:"length_equals",...Ye(t),length:e})}function qje(e,t){return new cLe({check:"string_format",format:"regex",...Ye(t),pattern:e})}function Zje(e){return new uLe({check:"string_format",format:"lowercase",...Ye(e)})}function Wje(e){return new dLe({check:"string_format",format:"uppercase",...Ye(e)})}function Kje(e,t){return new fLe({check:"string_format",format:"includes",...Ye(t),includes:e})}function Yje(e,t){return new hLe({check:"string_format",format:"starts_with",...Ye(t),prefix:e})}function Jje(e,t){return new pLe({check:"string_format",format:"ends_with",...Ye(t),suffix:e})}function gv(e){return new mLe({check:"overwrite",tx:e})}function Xje(e){return gv(t=>t.normalize(e))}function Qje(){return gv(e=>e.trim())}function e9e(){return gv(e=>e.toLowerCase())}function t9e(){return gv(e=>e.toUpperCase())}function n9e(e,t,n){return new e({type:"array",element:t,...Ye(n)})}function r9e(e,t,n){const r=Ye(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function o9e(e,t,n){return new e({type:"custom",check:"custom",fn:t,...Ye(n)})}function i9e(e){const t=s9e(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(sb(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(sb(o))}},e(n.value,n)));return t}function s9e(e,t){const n=new Wi({check:"custom",...Ye(t)});return n._zod.check=e,n}class cB{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??Ly,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var r;const o=t._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(t);if(s)return s.count++,n.schemaPath.includes(t)&&(s.cycle=n.path),s.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,a);const l=t._zod.toJSONSchema?.();if(l)a.schema=l;else{const f={...n,schemaPath:[...n.schemaPath,t],path:n.path},p=t._zod.parent;if(p)a.ref=p,this.process(p,f),this.seen.get(p).isParent=!0;else{const m=a.schema;switch(o.type){case"string":{const y=m;y.type="string";const{minimum:b,maximum:x,format:S,patterns:E,contentEncoding:T}=t._zod.bag;if(typeof b=="number"&&(y.minLength=b),typeof x=="number"&&(y.maxLength=x),S&&(y.format=i[S]??S,y.format===""&&delete y.format),T&&(y.contentEncoding=T),E&&E.size>0){const A=[...E];A.length===1?y.pattern=A[0].source:A.length>1&&(a.schema.allOf=[...A.map(M=>({...this.target==="draft-7"||this.target==="draft-4"?{type:"string"}:{},pattern:M.source}))])}break}case"number":{const y=m,{minimum:b,maximum:x,format:S,multipleOf:E,exclusiveMaximum:T,exclusiveMinimum:A}=t._zod.bag;typeof S=="string"&&S.includes("int")?y.type="integer":y.type="number",typeof A=="number"&&(this.target==="draft-4"?(y.minimum=A,y.exclusiveMinimum=!0):y.exclusiveMinimum=A),typeof b=="number"&&(y.minimum=b,typeof A=="number"&&this.target!=="draft-4"&&(A>=b?delete y.minimum:delete y.exclusiveMinimum)),typeof T=="number"&&(this.target==="draft-4"?(y.maximum=T,y.exclusiveMaximum=!0):y.exclusiveMaximum=T),typeof x=="number"&&(y.maximum=x,typeof T=="number"&&this.target!=="draft-4"&&(T<=x?delete y.maximum:delete y.exclusiveMaximum)),typeof E=="number"&&(y.multipleOf=E);break}case"boolean":{const y=m;y.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{m.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{m.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const y=m,{minimum:b,maximum:x}=t._zod.bag;typeof b=="number"&&(y.minItems=b),typeof x=="number"&&(y.maxItems=x),y.type="array",y.items=this.process(o.element,{...f,path:[...f.path,"items"]});break}case"object":{const y=m;y.type="object",y.properties={};const b=o.shape;for(const E in b)y.properties[E]=this.process(b[E],{...f,path:[...f.path,"properties",E]});const x=new Set(Object.keys(b)),S=new Set([...x].filter(E=>{const T=o.shape[E]._zod;return this.io==="input"?T.optin===void 0:T.optout===void 0}));S.size>0&&(y.required=Array.from(S)),o.catchall?._zod.def.type==="never"?y.additionalProperties=!1:o.catchall?o.catchall&&(y.additionalProperties=this.process(o.catchall,{...f,path:[...f.path,"additionalProperties"]})):this.io==="output"&&(y.additionalProperties=!1);break}case"union":{const y=m;y.anyOf=o.options.map((b,x)=>this.process(b,{...f,path:[...f.path,"anyOf",x]}));break}case"intersection":{const y=m,b=this.process(o.left,{...f,path:[...f.path,"allOf",0]}),x=this.process(o.right,{...f,path:[...f.path,"allOf",1]}),S=T=>"allOf"in T&&Object.keys(T).length===1,E=[...S(b)?b.allOf:[b],...S(x)?x.allOf:[x]];y.allOf=E;break}case"tuple":{const y=m;y.type="array";const b=o.items.map((E,T)=>this.process(E,{...f,path:[...f.path,"prefixItems",T]}));if(this.target==="draft-2020-12"?y.prefixItems=b:y.items=b,o.rest){const E=this.process(o.rest,{...f,path:[...f.path,"items"]});this.target==="draft-2020-12"?y.items=E:y.additionalItems=E}o.rest&&(y.items=this.process(o.rest,{...f,path:[...f.path,"items"]}));const{minimum:x,maximum:S}=t._zod.bag;typeof x=="number"&&(y.minItems=x),typeof S=="number"&&(y.maxItems=S);break}case"record":{const y=m;y.type="object",this.target!=="draft-4"&&(y.propertyNames=this.process(o.keyType,{...f,path:[...f.path,"propertyNames"]})),y.additionalProperties=this.process(o.valueType,{...f,path:[...f.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const y=m,b=KQ(o.entries);b.every(x=>typeof x=="number")&&(y.type="number"),b.every(x=>typeof x=="string")&&(y.type="string"),y.enum=b;break}case"literal":{const y=m,b=[];for(const x of o.values)if(x===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof x=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");b.push(Number(x))}else b.push(x);if(b.length!==0)if(b.length===1){const x=b[0];y.type=x===null?"null":typeof x,this.target==="draft-4"?y.enum=[x]:y.const=x}else b.every(x=>typeof x=="number")&&(y.type="number"),b.every(x=>typeof x=="string")&&(y.type="string"),b.every(x=>typeof x=="boolean")&&(y.type="string"),b.every(x=>x===null)&&(y.type="null"),y.enum=b;break}case"file":{const y=m,b={type:"string",format:"binary",contentEncoding:"binary"},{minimum:x,maximum:S,mime:E}=t._zod.bag;x!==void 0&&(b.minLength=x),S!==void 0&&(b.maxLength=S),E?E.length===1?(b.contentMediaType=E[0],Object.assign(y,b)):y.anyOf=E.map(T=>({...b,contentMediaType:T})):Object.assign(y,b);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const y=this.process(o.innerType,f);m.anyOf=[y,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,f),a.ref=o.innerType;break}case"success":{const y=m;y.type="boolean";break}case"default":{this.process(o.innerType,f),a.ref=o.innerType,m.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,f),a.ref=o.innerType,this.io==="input"&&(m._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,f),a.ref=o.innerType;let y;try{y=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}m.default=y;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const y=m,b=t._zod.pattern;if(!b)throw new Error("Pattern not found in template literal");y.type="string",y.pattern=b.source;break}case"pipe":{const y=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(y,f),a.ref=y;break}case"readonly":{this.process(o.innerType,f),a.ref=o.innerType,m.readOnly=!0;break}case"promise":{this.process(o.innerType,f),a.ref=o.innerType;break}case"optional":{this.process(o.innerType,f),a.ref=o.innerType;break}case"lazy":{const y=t._zod.innerType;this.process(y,f),a.ref=y;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(t);return c&&Object.assign(a.schema,c),this.io==="input"&&Xr(t)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(t).schema}emit(t,n){const r={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},o=this.seen.get(t);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=u=>{const f=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const b=r.external.registry.get(u[0])?.id,x=r.external.uri??(E=>E);if(b)return{ref:x(b)};const S=u[1].defId??u[1].schema.id??`schema${this.counter++}`;return u[1].defId=S,{defId:S,ref:`${x("__shared")}#/${f}/${S}`}}if(u[1]===o)return{ref:"#"};const m=`#/${f}/`,y=u[1].schema.id??`__schema${this.counter++}`;return{defId:y,ref:m+y}},s=u=>{if(u[1].schema.$ref)return;const f=u[1],{ref:p,defId:m}=i(u);f.def={...f.schema},m&&(f.defId=m);const y=f.schema;for(const b in y)delete y[b];y.$ref=p};if(r.cycles==="throw")for(const u of this.seen.entries()){const f=u[1];if(f.cycle)throw new Error(`Cycle detected: #/${f.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of this.seen.entries()){const f=u[1];if(t===u[0]){s(u);continue}if(r.external){const m=r.external.registry.get(u[0])?.id;if(t!==u[0]&&m){s(u);continue}}if(this.metadataRegistry.get(u[0])?.id){s(u);continue}if(f.cycle){s(u);continue}if(f.count>1&&r.reused==="ref"){s(u);continue}}const a=(u,f)=>{const p=this.seen.get(u),m=p.def??p.schema,y={...m};if(p.ref===null)return;const b=p.ref;if(p.ref=null,b){a(b,f);const x=this.seen.get(b).schema;x.$ref&&(f.target==="draft-7"||f.target==="draft-4")?(m.allOf=m.allOf??[],m.allOf.push(x)):(Object.assign(m,x),Object.assign(m,y))}p.isParent||this.override({zodSchema:u,jsonSchema:m,path:p.path??[]})};for(const u of[...this.seen.entries()].reverse())a(u[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":console.warn(`Invalid target: ${this.target}`),r.external?.uri){const u=r.external.registry.get(t)?.id;if(!u)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(u)}Object.assign(l,o.def);const c=r.external?.defs??{};for(const u of this.seen.entries()){const f=u[1];f.def&&f.defId&&(c[f.defId]=f.def)}r.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function gee(e,t){if(e instanceof fee){const r=new cB(t),o={};for(const a of e._idmap.entries()){const[l,c]=a;r.process(c)}const i={},s={registry:e,uri:t?.uri,defs:o};for(const a of e._idmap.entries()){const[l,c]=a;i[l]=r.emit(c,{...t,external:s})}if(Object.keys(o).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[a]:o}}return{schemas:i}}const n=new cB(t);return n.process(e),n.emit(e,t)}function Xr(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const o=e._zod.def;switch(o.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Xr(o.element,n);case"object":{for(const i in o.shape)if(Xr(o.shape[i],n))return!0;return!1}case"union":{for(const i of o.options)if(Xr(i,n))return!0;return!1}case"intersection":return Xr(o.left,n)||Xr(o.right,n);case"tuple":{for(const i of o.items)if(Xr(i,n))return!0;return!!(o.rest&&Xr(o.rest,n))}case"record":return Xr(o.keyType,n)||Xr(o.valueType,n);case"map":return Xr(o.keyType,n)||Xr(o.valueType,n);case"set":return Xr(o.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Xr(o.innerType,n);case"lazy":return Xr(o.getter(),n);case"default":return Xr(o.innerType,n);case"prefault":return Xr(o.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return Xr(o.in,n)||Xr(o.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${o.type}`)}const a9e=be("ZodISODateTime",(e,t)=>{MLe.init(e,t),ar.init(e,t)});function l9e(e){return Dje(a9e,e)}const c9e=be("ZodISODate",(e,t)=>{RLe.init(e,t),ar.init(e,t)});function u9e(e){return $je(c9e,e)}const d9e=be("ZodISOTime",(e,t)=>{NLe.init(e,t),ar.init(e,t)});function f9e(e){return Lje(d9e,e)}const h9e=be("ZodISODuration",(e,t)=>{ILe.init(e,t),ar.init(e,t)});function p9e(e){return jje(h9e,e)}const m9e=(e,t)=>{QQ.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>E5e(e,n)},flatten:{value:n=>C5e(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,FN,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,FN,2)}},isEmpty:{get(){return e.issues.length===0}}})},gE=be("ZodError",m9e,{Parent:Error}),g9e=T5e(gE),y9e=_5e(gE),b9e=tee(gE),kP=nee(gE),Gn=be("ZodType",(e,t)=>(zn.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>Mh(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>g9e(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>b9e(e,n,r),e.parseAsync=async(n,r)=>y9e(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>kP(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(c6e(n,r)),e.superRefine=n=>e.check(u6e(n)),e.overwrite=n=>e.check(gv(n)),e.optional=()=>Ot(e),e.nullable=()=>fB(e),e.nullish=()=>Ot(fB(e)),e.nonoptional=n=>n6e(e,n),e.array=()=>vt(e),e.or=n=>Nt([e,n]),e.and=n=>q9e(e,n),e.transform=n=>hB(e,Y9e(n)),e.default=n=>Q9e(e,n),e.prefault=n=>t6e(e,n),e.catch=n=>o6e(e,n),e.pipe=n=>hB(e,n),e.readonly=()=>a6e(e),e.describe=n=>{const r=e.clone();return Ly.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return Ly.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Ly.get(e);const r=e.clone();return Ly.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),yee=be("_ZodString",(e,t)=>{SP.init(e,t),Gn.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(qje(...r)),e.includes=(...r)=>e.check(Kje(...r)),e.startsWith=(...r)=>e.check(Yje(...r)),e.endsWith=(...r)=>e.check(Jje(...r)),e.min=(...r)=>e.check(uk(...r)),e.max=(...r)=>e.check(pee(...r)),e.length=(...r)=>e.check(mee(...r)),e.nonempty=(...r)=>e.check(uk(1,...r)),e.lowercase=r=>e.check(Zje(r)),e.uppercase=r=>e.check(Wje(r)),e.trim=()=>e.check(Qje()),e.normalize=(...r)=>e.check(Xje(...r)),e.toLowerCase=()=>e.check(e9e()),e.toUpperCase=()=>e.check(t9e())}),v9e=be("ZodString",(e,t)=>{SP.init(e,t),yee.init(e,t),e.email=n=>e.check(mje(w9e,n)),e.url=n=>e.check(wje(x9e,n)),e.jwt=n=>e.check(Pje(D9e,n)),e.emoji=n=>e.check(xje(S9e,n)),e.guid=n=>e.check(iB(uB,n)),e.uuid=n=>e.check(gje(Sw,n)),e.uuidv4=n=>e.check(yje(Sw,n)),e.uuidv6=n=>e.check(bje(Sw,n)),e.uuidv7=n=>e.check(vje(Sw,n)),e.nanoid=n=>e.check(Sje(k9e,n)),e.guid=n=>e.check(iB(uB,n)),e.cuid=n=>e.check(kje(C9e,n)),e.cuid2=n=>e.check(Cje(E9e,n)),e.ulid=n=>e.check(Eje(T9e,n)),e.base64=n=>e.check(hee(bee,n)),e.base64url=n=>e.check(Ije(O9e,n)),e.xid=n=>e.check(Tje(_9e,n)),e.ksuid=n=>e.check(_je(A9e,n)),e.ipv4=n=>e.check(Aje(M9e,n)),e.ipv6=n=>e.check(Mje(R9e,n)),e.cidrv4=n=>e.check(Rje(N9e,n)),e.cidrv6=n=>e.check(Nje(I9e,n)),e.e164=n=>e.check(Oje(P9e,n)),e.datetime=n=>e.check(l9e(n)),e.date=n=>e.check(u9e(n)),e.time=n=>e.check(f9e(n)),e.duration=n=>e.check(p9e(n))});function X(e){return pje(v9e,e)}const ar=be("ZodStringFormat",(e,t)=>{Xn.init(e,t),yee.init(e,t)}),w9e=be("ZodEmail",(e,t)=>{wLe.init(e,t),ar.init(e,t)}),uB=be("ZodGUID",(e,t)=>{bLe.init(e,t),ar.init(e,t)}),Sw=be("ZodUUID",(e,t)=>{vLe.init(e,t),ar.init(e,t)}),x9e=be("ZodURL",(e,t)=>{xLe.init(e,t),ar.init(e,t)}),S9e=be("ZodEmoji",(e,t)=>{SLe.init(e,t),ar.init(e,t)}),k9e=be("ZodNanoID",(e,t)=>{kLe.init(e,t),ar.init(e,t)}),C9e=be("ZodCUID",(e,t)=>{CLe.init(e,t),ar.init(e,t)}),E9e=be("ZodCUID2",(e,t)=>{ELe.init(e,t),ar.init(e,t)}),T9e=be("ZodULID",(e,t)=>{TLe.init(e,t),ar.init(e,t)}),_9e=be("ZodXID",(e,t)=>{_Le.init(e,t),ar.init(e,t)}),A9e=be("ZodKSUID",(e,t)=>{ALe.init(e,t),ar.init(e,t)}),M9e=be("ZodIPv4",(e,t)=>{OLe.init(e,t),ar.init(e,t)}),R9e=be("ZodIPv6",(e,t)=>{PLe.init(e,t),ar.init(e,t)}),N9e=be("ZodCIDRv4",(e,t)=>{DLe.init(e,t),ar.init(e,t)}),I9e=be("ZodCIDRv6",(e,t)=>{$Le.init(e,t),ar.init(e,t)}),bee=be("ZodBase64",(e,t)=>{LLe.init(e,t),ar.init(e,t)});function vee(e){return hee(bee,e)}const O9e=be("ZodBase64URL",(e,t)=>{zLe.init(e,t),ar.init(e,t)}),P9e=be("ZodE164",(e,t)=>{BLe.init(e,t),ar.init(e,t)}),D9e=be("ZodJWT",(e,t)=>{FLe.init(e,t),ar.init(e,t)}),wee=be("ZodNumber",(e,t)=>{uee.init(e,t),Gn.init(e,t),e.gt=(r,o)=>e.check(aB(r,o)),e.gte=(r,o)=>e.check(PA(r,o)),e.min=(r,o)=>e.check(PA(r,o)),e.lt=(r,o)=>e.check(sB(r,o)),e.lte=(r,o)=>e.check(OA(r,o)),e.max=(r,o)=>e.check(OA(r,o)),e.int=r=>e.check(dB(r)),e.safe=r=>e.check(dB(r)),e.positive=r=>e.check(aB(0,r)),e.nonnegative=r=>e.check(PA(0,r)),e.negative=r=>e.check(sB(0,r)),e.nonpositive=r=>e.check(OA(0,r)),e.multipleOf=(r,o)=>e.check(lB(r,o)),e.step=(r,o)=>e.check(lB(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Jt(e){return zje(wee,e)}const $9e=be("ZodNumberFormat",(e,t)=>{HLe.init(e,t),wee.init(e,t)});function dB(e){return Bje($9e,e)}const L9e=be("ZodBoolean",(e,t)=>{ULe.init(e,t),Gn.init(e,t)});function Kt(e){return Vje(L9e,e)}const j9e=be("ZodNull",(e,t)=>{GLe.init(e,t),Gn.init(e,t)});function xee(e){return Fje(j9e,e)}const z9e=be("ZodAny",(e,t)=>{qLe.init(e,t),Gn.init(e,t)});function Gp(){return Hje(z9e)}const B9e=be("ZodUnknown",(e,t)=>{ZLe.init(e,t),Gn.init(e,t)});function Qt(){return Uje(B9e)}const V9e=be("ZodNever",(e,t)=>{WLe.init(e,t),Gn.init(e,t)});function Pi(e){return Gje(V9e,e)}const F9e=be("ZodArray",(e,t)=>{KLe.init(e,t),Gn.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(uk(n,r)),e.nonempty=n=>e.check(uk(1,n)),e.max=(n,r)=>e.check(pee(n,r)),e.length=(n,r)=>e.check(mee(n,r)),e.unwrap=()=>e.element});function vt(e,t){return n9e(F9e,e,t)}const CP=be("ZodObject",(e,t)=>{YLe.init(e,t),Gn.init(e,t),en(e,"shape",()=>t.shape),e.keyof=()=>Di(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Qt()}),e.loose=()=>e.clone({...e._zod.def,catchall:Qt()}),e.strict=()=>e.clone({...e._zod.def,catchall:Pi()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>w5e(e,n),e.merge=n=>x5e(e,n),e.pick=n=>b5e(e,n),e.omit=n=>v5e(e,n),e.partial=(...n)=>S5e(kee,e,n[0]),e.required=(...n)=>k5e(Cee,e,n[0])});function de(e,t){const n={type:"object",get shape(){return hu(this,"shape",e?wP(e):{}),this.shape},...Ye(t)};return new CP(n)}function Vn(e,t){return new CP({type:"object",get shape(){return hu(this,"shape",wP(e)),this.shape},catchall:Pi(),...Ye(t)})}function qp(e,t){return new CP({type:"object",get shape(){return hu(this,"shape",wP(e)),this.shape},catchall:Qt(),...Ye(t)})}const See=be("ZodUnion",(e,t)=>{dee.init(e,t),Gn.init(e,t),e.options=t.options});function Nt(e,t){return new See({type:"union",options:e,...Ye(t)})}const H9e=be("ZodDiscriminatedUnion",(e,t)=>{See.init(e,t),JLe.init(e,t)});function U9e(e,t,n){return new H9e({type:"union",options:t,discriminator:e,...Ye(n)})}const G9e=be("ZodIntersection",(e,t)=>{XLe.init(e,t),Gn.init(e,t)});function q9e(e,t){return new G9e({type:"intersection",left:e,right:t})}const Z9e=be("ZodRecord",(e,t)=>{QLe.init(e,t),Gn.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Qc(e,t,n){return new Z9e({type:"record",keyType:e,valueType:t,...Ye(n)})}const UN=be("ZodEnum",(e,t)=>{eje.init(e,t),Gn.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const i={};for(const s of r)if(n.has(s))i[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new UN({...t,checks:[],...Ye(o),entries:i})},e.exclude=(r,o)=>{const i={...t.entries};for(const s of r)if(n.has(s))delete i[s];else throw new Error(`Key ${s} not found in enum`);return new UN({...t,checks:[],...Ye(o),entries:i})}});function Di(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new UN({type:"enum",entries:n,...Ye(t)})}const W9e=be("ZodLiteral",(e,t)=>{tje.init(e,t),Gn.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Me(e,t){return new W9e({type:"literal",values:Array.isArray(e)?e:[e],...Ye(t)})}const K9e=be("ZodTransform",(e,t)=>{nje.init(e,t),Gn.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(sb(i,n.value,t));else{const s=i;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(sb(s))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(i=>(n.value=i,n)):(n.value=o,n)}});function Y9e(e){return new K9e({type:"transform",transform:e})}const kee=be("ZodOptional",(e,t)=>{rje.init(e,t),Gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ot(e){return new kee({type:"optional",innerType:e})}const J9e=be("ZodNullable",(e,t)=>{oje.init(e,t),Gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function fB(e){return new J9e({type:"nullable",innerType:e})}const X9e=be("ZodDefault",(e,t)=>{ije.init(e,t),Gn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Q9e(e,t){return new X9e({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():JQ(t)}})}const e6e=be("ZodPrefault",(e,t)=>{sje.init(e,t),Gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function t6e(e,t){return new e6e({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():JQ(t)}})}const Cee=be("ZodNonOptional",(e,t)=>{aje.init(e,t),Gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function n6e(e,t){return new Cee({type:"nonoptional",innerType:e,...Ye(t)})}const r6e=be("ZodCatch",(e,t)=>{lje.init(e,t),Gn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function o6e(e,t){return new r6e({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const i6e=be("ZodPipe",(e,t)=>{cje.init(e,t),Gn.init(e,t),e.in=t.in,e.out=t.out});function hB(e,t){return new i6e({type:"pipe",in:e,out:t})}const s6e=be("ZodReadonly",(e,t)=>{uje.init(e,t),Gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function a6e(e){return new s6e({type:"readonly",innerType:e})}const l6e=be("ZodLazy",(e,t)=>{dje.init(e,t),Gn.init(e,t),e.unwrap=()=>e._zod.def.getter()});function Eee(e){return new l6e({type:"lazy",getter:e})}const EP=be("ZodCustom",(e,t)=>{fje.init(e,t),Gn.init(e,t)});function Tee(e,t){return r9e(EP,e??(()=>!0),t)}function c6e(e,t={}){return o9e(EP,e,t)}function u6e(e){return i9e(e)}function Ad(e,t={error:`Input not instance of ${e.name}`}){const n=new EP({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...Ye(t)});return n._zod.bag.Class=e,n}var mt;mt||(mt={});function Hi(e){if(e.target!=="openAi")return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?ZQ(t,e.currentPath):t.join("/")}}function d6e(e,t){const n={type:"array"};return e.type?._def&&e.type?._def?.typeName!==mt.ZodAny&&(n.items=rn(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&dn(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&dn(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(dn(n,"minItems",e.exactLength.value,e.exactLength.message,t),dn(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function f6e(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?dn(n,"minimum",r.value,r.message,t):dn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dn(n,"maximum",r.value,r.message,t):dn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dn(n,"maximum",r.value,r.message,t));break;case"multipleOf":dn(n,"multipleOf",r.value,r.message,t);break}return n}function h6e(){return{type:"boolean"}}function _ee(e,t){return rn(e.type._def,t)}const p6e=(e,t)=>rn(e.innerType._def,t);function Aee(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((o,i)=>Aee(e,t,o))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return m6e(e,t)}}const m6e=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":dn(n,"minimum",r.value,r.message,t);break;case"max":dn(n,"maximum",r.value,r.message,t);break}return n};function g6e(e,t){return{...rn(e.innerType._def,t),default:e.defaultValue()}}function y6e(e,t){return t.effectStrategy==="input"?rn(e.schema._def,t):Hi(t)}function b6e(e){return{type:"string",enum:Array.from(e.values)}}const v6e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function w6e(e,t){const n=[rn(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),rn(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const o=[];return n.forEach(i=>{if(v6e(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...l}=i;s=l}else r=void 0;o.push(s)}}),o.length?{allOf:o,...r}:void 0}function x6e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let DA;const Pa={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(DA===void 0&&(DA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),DA),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Mee(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":dn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":dn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Da(n,"email",r.message,t);break;case"format:idn-email":Da(n,"idn-email",r.message,t);break;case"pattern:zod":ci(n,Pa.email,r.message,t);break}break;case"url":Da(n,"uri",r.message,t);break;case"uuid":Da(n,"uuid",r.message,t);break;case"regex":ci(n,r.regex,r.message,t);break;case"cuid":ci(n,Pa.cuid,r.message,t);break;case"cuid2":ci(n,Pa.cuid2,r.message,t);break;case"startsWith":ci(n,RegExp(`^${$A(r.value,t)}`),r.message,t);break;case"endsWith":ci(n,RegExp(`${$A(r.value,t)}$`),r.message,t);break;case"datetime":Da(n,"date-time",r.message,t);break;case"date":Da(n,"date",r.message,t);break;case"time":Da(n,"time",r.message,t);break;case"duration":Da(n,"duration",r.message,t);break;case"length":dn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),dn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{ci(n,RegExp($A(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Da(n,"ipv4",r.message,t),r.version!=="v4"&&Da(n,"ipv6",r.message,t);break}case"base64url":ci(n,Pa.base64url,r.message,t);break;case"jwt":ci(n,Pa.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&ci(n,Pa.ipv4Cidr,r.message,t),r.version!=="v4"&&ci(n,Pa.ipv6Cidr,r.message,t);break}case"emoji":ci(n,Pa.emoji(),r.message,t);break;case"ulid":{ci(n,Pa.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Da(n,"binary",r.message,t);break}case"contentEncoding:base64":{dn(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{ci(n,Pa.base64,r.message,t);break}}break}case"nanoid":ci(n,Pa.nanoid,r.message,t)}return n}function $A(e,t){return t.patternStrategy==="escape"?k6e(e):e}const S6e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function k6e(e){let t="";for(let n=0;n<e.length;n++)S6e.has(e[n])||(t+="\\"),t+=e[n];return t}function Da(e,t,n,r){e.format||e.anyOf?.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):dn(e,"format",t,n,r)}function ci(e,t,n,r){e.pattern||e.allOf?.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:pB(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):dn(e,"pattern",pB(t,r),n,r)}function pB(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let o="",i=!1,s=!1,a=!1;for(let l=0;l<r.length;l++){if(i){o+=r[l],i=!1;continue}if(n.i){if(s){if(r[l].match(/[a-z]/)){a?(o+=r[l],o+=`${r[l-2]}-${r[l]}`.toUpperCase(),a=!1):r[l+1]==="-"&&r[l+2]?.match(/[a-z]/)?(o+=r[l],a=!0):o+=`${r[l]}${r[l].toUpperCase()}`;continue}}else if(r[l].match(/[a-z]/)){o+=`[${r[l]}${r[l].toUpperCase()}]`;continue}}if(n.m){if(r[l]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(r[l]==="$"){o+=`($|(?=[\r
]))`;continue}}if(n.s&&r[l]==="."){o+=s?`${r[l]}\r
`:`[${r[l]}\r
]`;continue}o+=r[l],r[l]==="\\"?i=!0:s&&r[l]==="]"?s=!1:!s&&r[l]==="["&&(s=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function Ree(e,t){if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&e.keyType?._def.typeName===mt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,o)=>({...r,[o]:rn(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",o]})??Hi(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:rn(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===mt.ZodString&&e.keyType._def.checks?.length){const{type:r,...o}=Mee(e.keyType._def,t);return{...n,propertyNames:o}}else{if(e.keyType?._def.typeName===mt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===mt.ZodBranded&&e.keyType._def.type._def.typeName===mt.ZodString&&e.keyType._def.type._def.checks?.length){const{type:r,...o}=_ee(e.keyType._def,t);return{...n,propertyNames:o}}}return n}function C6e(e,t){if(t.mapStrategy==="record")return Ree(e,t);const n=rn(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Hi(t),r=rn(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Hi(t);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function E6e(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),o=Array.from(new Set(r.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:r}}function T6e(e){return e.target==="openAi"?void 0:{not:Hi({...e,currentPath:[...e.currentPath,"not"]})}}function _6e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const dk={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function A6e(e,t){if(t.target==="openApi3")return mB(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in dk&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((o,i)=>{const s=dk[i._def.typeName];return s&&!o.includes(s)?[...o,s]:o},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((o,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...o,s];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(r.length===n.length){const o=r.filter((i,s,a)=>a.indexOf(i)===s);return{type:o.length>1?o:o[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,o)=>[...r,...o._def.values.filter(i=>!r.includes(i))],[])};return mB(e,t)}const mB=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,o)=>rn(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${o}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function M6e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:dk[e.innerType._def.typeName],nullable:!0}:{type:[dk[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=rn(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=rn(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function R6e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",qQ(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?dn(n,"minimum",r.value,r.message,t):dn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dn(n,"maximum",r.value,r.message,t):dn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dn(n,"maximum",r.value,r.message,t));break;case"multipleOf":dn(n,"multipleOf",r.value,r.message,t);break}return n}function N6e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},o=[],i=e.shape();for(const a in i){let l=i[a];if(l===void 0||l._def===void 0)continue;let c=O6e(l);c&&n&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=rn(l._def,{...t,currentPath:[...t.currentPath,"properties",a],propertyPath:[...t.currentPath,"properties",a]});u!==void 0&&(r.properties[a]=u,c||o.push(a))}o.length&&(r.required=o);const s=I6e(e,t);return s!==void 0&&(r.additionalProperties=s),r}function I6e(e,t){if(e.catchall._def.typeName!=="ZodNever")return rn(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function O6e(e){try{return e.isOptional()}catch{return!0}}const P6e=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return rn(e.innerType._def,t);const n=rn(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Hi(t)},n]}:Hi(t)},D6e=(e,t)=>{if(t.pipeStrategy==="input")return rn(e.in._def,t);if(t.pipeStrategy==="output")return rn(e.out._def,t);const n=rn(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=rn(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(o=>o!==void 0)}};function $6e(e,t){return rn(e.type._def,t)}function L6e(e,t){const r={type:"array",uniqueItems:!0,items:rn(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&dn(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&dn(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function j6e(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>rn(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:rn(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>rn(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function z6e(e){return{not:Hi(e)}}function B6e(e){return Hi(e)}const V6e=(e,t)=>rn(e.innerType._def,t),F6e=(e,t,n)=>{switch(t){case mt.ZodString:return Mee(e,n);case mt.ZodNumber:return R6e(e,n);case mt.ZodObject:return N6e(e,n);case mt.ZodBigInt:return f6e(e,n);case mt.ZodBoolean:return h6e();case mt.ZodDate:return Aee(e,n);case mt.ZodUndefined:return z6e(n);case mt.ZodNull:return _6e(n);case mt.ZodArray:return d6e(e,n);case mt.ZodUnion:case mt.ZodDiscriminatedUnion:return A6e(e,n);case mt.ZodIntersection:return w6e(e,n);case mt.ZodTuple:return j6e(e,n);case mt.ZodRecord:return Ree(e,n);case mt.ZodLiteral:return x6e(e,n);case mt.ZodEnum:return b6e(e);case mt.ZodNativeEnum:return E6e(e);case mt.ZodNullable:return M6e(e,n);case mt.ZodOptional:return P6e(e,n);case mt.ZodMap:return C6e(e,n);case mt.ZodSet:return L6e(e,n);case mt.ZodLazy:return()=>e.getter()._def;case mt.ZodPromise:return $6e(e,n);case mt.ZodNaN:case mt.ZodNever:return T6e(n);case mt.ZodEffects:return y6e(e,n);case mt.ZodAny:return Hi(n);case mt.ZodUnknown:return B6e(n);case mt.ZodDefault:return g6e(e,n);case mt.ZodBranded:return _ee(e,n);case mt.ZodReadonly:return V6e(e,n);case mt.ZodCatch:return p6e(e,n);case mt.ZodPipeline:return D6e(e,n);case mt.ZodFunction:case mt.ZodVoid:case mt.ZodSymbol:return;default:return(r=>{})()}};function rn(e,t,n=!1){const r=t.seen.get(e);if(t.override){const a=t.override?.(e,t,r,n);if(a!==u5e)return a}if(r&&!n){const a=H6e(r,t);if(a!==void 0)return a}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const i=F6e(e,e.typeName,t),s=typeof i=="function"?rn(i(),t):i;if(s&&U6e(e,t,s),t.postProcess){const a=t.postProcess(s,e,t);return o.jsonSchema=s,a}return o.jsonSchema=s,s}const H6e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:ZQ(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Hi(t)):t.$refStrategy==="seen"?Hi(t):void 0}},U6e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Nee=(e,t)=>{const n=f5e(t);let r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[c,u])=>({...l,[c]:rn(u._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??Hi(n)}),{}):void 0;const o=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=rn(e._def,o===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,o]},!1)??Hi(n),s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=o===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,o].join("/"),[n.definitionPath]:{...r,[o]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};var ab={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},lb={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},cb={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ub={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},db={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},G6e=[ab,lb,cb,ub,db];ab.code+"",lb.code+"",cb.code+"",ub.code+"",db.code+"";ab.name+"",ab.code,lb.name+"",lb.code,cb.name+"",cb.code,ub.name+"",ub.code,db.name+"",db.code;G6e.map(e=>e.code);function q6e(e){const t=["ROOT"];let n=-1,r=null;function o(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function s(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":o(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(r,l+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l)):n=l;break}}}let a=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}function Iee(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=G7({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=G7({text:q6e(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Z6e={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},W6e={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},K6e={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Y6e={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},J6e={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},X6e={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Q6e={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},e8e={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},t8e={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},n8e={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},r8e={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},o8e={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},i8e={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},s8e={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},a8e={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},l8e={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},yE=[Z6e,W6e,K6e,Y6e,J6e,X6e,Q6e,e8e,t8e,n8e,r8e,o8e,i8e,s8e,a8e,l8e];Object.fromEntries(yE.map(e=>[e.code,e]));Object.fromEntries(yE.map(e=>[e.name,e.code]));yE.map(e=>e.code);function Oee(e,t){const n=yE.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function fk(e,t){if(e===t)return!0;if(e==null||t==null)return!1;if(typeof e!="object"&&typeof t!="object")return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!fk(e[o],t[o]))return!1;return!0}const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!r.includes(o)||!fk(e[o],t[o]))return!1;return!0}function c8e(e,t){var n;const r=(n=void 0)!=null?n:!1;return TP(Nee(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:o=>{const i=e.safeParse(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var GN=Symbol.for("vercel.ai.schema");function TP(e,{validate:t}={}){return{[GN]:!0,_type:void 0,[lk]:!0,jsonSchema:e,validate:t}}function u8e(e){return typeof e=="object"&&e!==null&&GN in e&&e[GN]===!0&&"jsonSchema"in e&&"validate"in e}function qN(e){return u8e(e)?e:c8e(e)}var d8e=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},$f="1.9.0",gB=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function f8e(e){var t=new Set([e]),n=new Set,r=e.match(gB);if(!r)return function(){return!1};var o={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(o.prerelease!=null)return function(l){return l===e};function i(a){return n.add(a),!1}function s(a){return t.add(a),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(gB);if(!c)return i(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||o.major!==u.major?i(l):o.major===0?o.minor===u.minor&&o.patch<=u.patch?s(l):i(l):o.minor<=u.minor?s(l):i(l)}}var h8e=f8e($f),p8e=$f.split(".")[0],fb=Symbol.for("opentelemetry.js.api."+p8e),hb=d8e;function _P(e,t,n,r){var o;r===void 0&&(r=!1);var i=hb[fb]=(o=hb[fb])!==null&&o!==void 0?o:{version:$f};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==$f){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+$f);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+$f+"."),!0}function pb(e){var t,n,r=(t=hb[fb])===null||t===void 0?void 0:t.version;if(!(!r||!h8e(r)))return(n=hb[fb])===null||n===void 0?void 0:n[e]}function AP(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+$f+".");var n=hb[fb];n&&delete n[e]}var m8e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},g8e=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},y8e=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return xy("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return xy("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return xy("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return xy("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return xy("verbose",this._namespace,t)},e})();function xy(e,t,n){var r=pb("diag");if(r)return n.unshift(t),r[e].apply(r,g8e([],m8e(n),!1))}var gs;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(gs||(gs={}));function b8e(e,t){e<gs.NONE?e=gs.NONE:e>gs.ALL&&(e=gs.ALL),t=t||{};function n(r,o){var i=t[r];return typeof i=="function"&&e>=o?i.bind(t):function(){}}return{error:n("error",gs.ERROR),warn:n("warn",gs.WARN),info:n("info",gs.INFO),debug:n("debug",gs.DEBUG),verbose:n("verbose",gs.VERBOSE)}}var v8e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},w8e=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},x8e="diag",hk=(function(){function e(){function t(o){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=pb("diag");if(a)return a[o].apply(a,w8e([],v8e(i),!1))}}var n=this,r=function(o,i){var s,a,l;if(i===void 0&&(i={logLevel:gs.INFO}),o===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof i=="number"&&(i={logLevel:i});var u=pb("diag"),f=b8e((a=i.logLevel)!==null&&a!==void 0?a:gs.INFO,o);if(u&&!i.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+p),f.warn("Current logger will overwrite one already registered from "+p)}return _P("diag",f,n,!0)};n.setLogger=r,n.disable=function(){AP(x8e,n)},n.createComponentLogger=function(o){return new y8e(o)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function S8e(e){return Symbol.for(e)}var k8e=(function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,o){var i=new e(n._currentContext);return i._currentContext.set(r,o),i},n.deleteValue=function(r){var o=new e(n._currentContext);return o._currentContext.delete(r),o}}return e})(),C8e=new k8e,E8e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},T8e=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},_8e=(function(){function e(){}return e.prototype.active=function(){return C8e},e.prototype.with=function(t,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return n.call.apply(n,T8e([r],E8e(o),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})(),A8e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},M8e=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},LA="context",R8e=new _8e,Pee=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return _P(LA,t,hk.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var o,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(o=this._getContextManager()).with.apply(o,M8e([t,n,r],A8e(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return pb(LA)||R8e},e.prototype.disable=function(){this._getContextManager().disable(),AP(LA,hk.instance())},e})(),ZN;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ZN||(ZN={}));var Dee="0000000000000000",$ee="00000000000000000000000000000000",N8e={traceId:$ee,spanId:Dee,traceFlags:ZN.NONE},a0=(function(){function e(t){t===void 0&&(t=N8e),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e})(),MP=S8e("OpenTelemetry Context Key SPAN");function RP(e){return e.getValue(MP)||void 0}function I8e(){return RP(Pee.getInstance().active())}function NP(e,t){return e.setValue(MP,t)}function O8e(e){return e.deleteValue(MP)}function P8e(e,t){return NP(e,new a0(t))}function Lee(e){var t;return(t=RP(e))===null||t===void 0?void 0:t.spanContext()}var D8e=/^([0-9a-f]{32})$/i,$8e=/^[0-9a-f]{16}$/i;function L8e(e){return D8e.test(e)&&e!==$ee}function j8e(e){return $8e.test(e)&&e!==Dee}function jee(e){return L8e(e.traceId)&&j8e(e.spanId)}function z8e(e){return new a0(e)}var jA=Pee.getInstance(),zee=(function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=jA.active());var o=!!n?.root;if(o)return new a0;var i=r&&Lee(r);return B8e(i)&&jee(i)?new a0(i):new a0},e.prototype.startActiveSpan=function(t,n,r,o){var i,s,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(i=n,a=r):(i=n,s=r,a=o);var l=s??jA.active(),c=this.startSpan(t,i,l),u=NP(l,c);return jA.with(u,a,void 0,c)}},e})();function B8e(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var V8e=new zee,F8e=(function(){function e(t,n,r,o){this._provider=t,this.name=n,this.version=r,this.options=o}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):V8e},e})(),H8e=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new zee},e})(),U8e=new H8e,yB=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){var o;return(o=this.getDelegateTracer(t,n,r))!==null&&o!==void 0?o:new F8e(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:U8e},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(t,n,r)},e})(),Im;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Im||(Im={}));var zA="trace",G8e=(function(){function e(){this._proxyTracerProvider=new yB,this.wrapSpanContext=z8e,this.isSpanContextValid=jee,this.deleteSpan=O8e,this.getSpan=RP,this.getActiveSpan=I8e,this.getSpanContext=Lee,this.setSpan=NP,this.setSpanContext=P8e}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=_P(zA,this._proxyTracerProvider,hk.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return pb(zA)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){AP(zA,hk.instance()),this._proxyTracerProvider=new yB},e})(),Bee=G8e.getInstance(),q8e=Object.defineProperty,IP=(e,t)=>{for(var n in t)q8e(e,n,{get:t[n],enumerable:!0})};function bE(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function Z8e(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[o,i]of Object.entries(e))r[o]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function W8e({response:e,status:t,statusText:n,headers:r,stream:o}){e.writeHead(t??200,n,r);const i=o.getReader();(async()=>{try{for(;;){const{done:a,value:l}=await i.read();if(a)break;e.write(l)}}catch(a){throw a}finally{e.end()}})()}var Vee=class extends Rn{constructor(){super({name:"AI_UnsupportedModelVersionError",message:'Unsupported model version. AI SDK 4 only supports models that implement specification version "v1". Please upgrade to AI SDK 5 to use this model.'})}},Fee="AI_InvalidArgumentError",Hee=`vercel.ai.error.${Fee}`,K8e=Symbol.for(Hee),Uee,Fn=class extends Rn{constructor({parameter:t,value:n,message:r}){super({name:Fee,message:`Invalid argument for parameter ${t}: ${r}`}),this[Uee]=!0,this.parameter=t,this.value=n}static isInstance(t){return Rn.hasMarker(t,Hee)}};Uee=K8e;var Gee="AI_RetryError",qee=`vercel.ai.error.${Gee}`,Y8e=Symbol.for(qee),Zee,WN=class extends Rn{constructor({message:t,reason:n,errors:r}){super({name:Gee,message:t}),this[Zee]=!0,this.reason=n,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return Rn.hasMarker(t,qee)}};Zee=Y8e;var J8e=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>Wee(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function Wee(e,{maxRetries:t,delayInMs:n,backoffFactor:r},o=[]){try{return await e()}catch(i){if(B$e(i)||t===0)throw i;const s=z$e(i),a=[...o,i],l=a.length;if(l>t)throw new WN({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:a});if(i instanceof Error&&pQ.isInstance(i)&&i.isRetryable===!0&&l<=t)return await j$e(n),Wee(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},a);throw l===1?i:new WN({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:a})}}function Kee({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Fn({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Fn({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:J8e({maxRetries:t})}}function l0({operationId:e,telemetry:t}){return{"operation.name":`${e}${t?.functionId!=null?` ${t.functionId}`:""}`,"resource.name":t?.functionId,"ai.operationId":e,"ai.telemetry.functionId":t?.functionId}}function Yee({model:e,settings:t,telemetry:n,headers:r}){var o;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,a])=>(i[`ai.settings.${s}`]=a,i),{}),...Object.entries((o=n?.metadata)!=null?o:{}).reduce((i,[s,a])=>(i[`ai.telemetry.metadata.${s}`]=a,i),{}),...Object.entries(r??{}).reduce((i,[s,a])=>(a!==void 0&&(i[`ai.request.headers.${s}`]=a),i),{})}}var X8e={startSpan(){return kw},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(kw);if(typeof n=="function")return n(kw);if(typeof r=="function")return r(kw)}},kw={spanContext(){return Q8e},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Q8e={traceId:"",spanId:"",traceFlags:0};function Jee({isEnabled:e=!1,tracer:t}={}){return e?t||Bee.getTracer("ai"):X8e}function c0({name:e,tracer:t,attributes:n,fn:r,endWhenDone:o=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return o&&i.end(),s}catch(s){try{eze(i,s)}finally{i.end()}throw s}})}function eze(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Im.ERROR,message:t.message})):e.setStatus({code:Im.ERROR})}function Il({telemetry:e,attributes:t}){return e?.isEnabled!==!0?{}:Object.entries(t).reduce((n,[r,o])=>{if(o===void 0)return n;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if(e?.recordInputs===!1)return n;const i=o.input();return i===void 0?n:{...n,[r]:i}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if(e?.recordOutputs===!1)return n;const i=o.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:o}},{})}var tze=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],nze=e=>{const t=typeof e=="string"?IQ(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function rze(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?nze(e):e}function oze({data:e,signatures:t}){const n=rze(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((o,i)=>n[i]===o))return r.mimeType}var Xee="AI_NoObjectGeneratedError",Qee=`vercel.ai.error.${Xee}`,ize=Symbol.for(Qee),ete,Lc=class extends Rn{constructor({message:t="No object generated.",cause:n,text:r,response:o,usage:i,finishReason:s}){super({name:Xee,message:t,cause:n}),this[ete]=!0,this.text=r,this.response=o,this.usage=i,this.finishReason=s}static isInstance(t){return Rn.hasMarker(t,Qee)}};ete=ize;var tte="AI_DownloadError",nte=`vercel.ai.error.${tte}`,sze=Symbol.for(nte),rte,BA=class extends Rn{constructor({url:t,statusCode:n,statusText:r,cause:o,message:i=o==null?`Failed to download ${t}: ${n} ${r}`:`Failed to download ${t}: ${o}`}){super({name:tte,message:i,cause:o}),this[rte]=!0,this.url=t,this.statusCode=n,this.statusText=r}static isInstance(t){return Rn.hasMarker(t,nte)}};rte=sze;async function aze({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new BA({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mimeType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw BA.isInstance(r)?r:new BA({url:n,cause:r})}}var ote="AI_InvalidDataContentError",ite=`vercel.ai.error.${ote}`,lze=Symbol.for(ite),ste,bB=class extends Rn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:ote,message:n,cause:t}),this[ste]=!0,this.content=e}static isInstance(e){return Rn.hasMarker(e,ite)}};ste=lze;var ate=Nt([X(),Ad(Uint8Array),Ad(ArrayBuffer),Tee(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function OP(e){return typeof e=="string"?e:e instanceof ArrayBuffer?V7(new Uint8Array(e)):V7(e)}function pk(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return IQ(e)}catch(t){throw new bB({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new bB({content:e})}function cze(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var lte="AI_InvalidMessageRoleError",cte=`vercel.ai.error.${lte}`,uze=Symbol.for(cte),ute,dze=class extends Rn{constructor({role:t,message:n=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:lte,message:n}),this[ute]=!0,this.role=t}static isInstance(t){return Rn.hasMarker(t,cte)}};ute=uze;function fze(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function mk({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=aze}){const o=await pze(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>hze(i,o))]}function hze(e,t){var n,r,o,i,s,a;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>mze(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var u;const f=(u=c.providerOptions)!=null?u:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:OP(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:f};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:f};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:f};case"text":return{type:"text",text:c.text,providerMetadata:f};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:f}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var u;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(u=c.providerOptions)!=null?u:c.experimental_providerMetadata}}),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};default:{const c=l;throw new dze({role:c})}}}async function pze(e,t,n,r){const o=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(o.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:a})=>[s.toString(),a]))}function mze(e,t){var n,r,o,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,a,l,c;const u=e.type;switch(u){case"image":a=e.image;break;case"file":a=e.data;break;default:throw new Error(`Unsupported part type: ${u}`)}try{l=typeof a=="string"?new URL(a):a}catch{l=a}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:f,base64Content:p}=fze(l.toString());if(f==null||p==null)throw new Error(`Invalid data URL format in part ${u}`);s=f,c=pk(p)}else{const f=t[l.toString()];f?(c=f.data,s??(s=f.mimeType)):c=l}else c=pk(l);switch(u){case"image":return c instanceof Uint8Array&&(s=(r=oze({data:c,signatures:tze}))!=null?r:s),{type:"image",image:c,mimeType:s,providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?OP(c):c,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function gk({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:o,frequencyPenalty:i,stopSequences:s,seed:a}){if(e!=null){if(!Number.isInteger(e))throw new Fn({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Fn({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Fn({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Fn({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Fn({parameter:"topK",value:r,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new Fn({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Fn({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(a!=null&&!Number.isInteger(a))throw new Fn({parameter:"seed",value:a,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:o,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:a}}function vB(e){var t,n,r;const o=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))o.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");o.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let a,l,c;try{[a,l]=i.url.split(","),c=a.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))o.push({type:"image",image:pk(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))o.push({type:"text",text:cze(pk(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");o.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return o}var dte="AI_MessageConversionError",fte=`vercel.ai.error.${dte}`,gze=Symbol.for(fte),hte,VA=class extends Rn{constructor({originalMessage:e,message:t}){super({name:dte,message:t}),this[hte]=!0,this.originalMessage=e}static isInstance(e){return Rn.hasMarker(e,fte)}};hte=gze;function yze(e,t){var n,r;const o=(n=t?.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const a=e[s],l=s===e.length-1,{role:c,content:u,experimental_attachments:f}=a;switch(c){case"system":{i.push({role:"system",content:u});break}case"user":{if(a.parts==null)i.push({role:"user",content:f?[{type:"text",text:u},...vB(f)]:u});else{const p=a.parts.filter(m=>m.type==="text").map(m=>({type:"text",text:m.text}));i.push({role:"user",content:f?[...p,...vB(f)]:p})}break}case"assistant":{if(a.parts!=null){let y=function(){const E=[];for(const A of S)switch(A.type){case"file":case"text":{E.push(A);break}case"reasoning":{for(const M of A.details)switch(M.type){case"text":E.push({type:"reasoning",text:M.text,signature:M.signature});break;case"redacted":E.push({type:"redacted-reasoning",data:M.data});break}break}case"tool-invocation":E.push({type:"tool-call",toolCallId:A.toolInvocation.toolCallId,toolName:A.toolInvocation.toolName,args:A.toolInvocation.args});break;default:{const M=A;throw new Error(`Unsupported part: ${M}`)}}i.push({role:"assistant",content:E});const T=S.filter(A=>A.type==="tool-invocation").map(A=>A.toolInvocation);T.length>0&&i.push({role:"tool",content:T.map(A=>{if(!("result"in A))throw new VA({originalMessage:a,message:"ToolInvocation must have a result: "+JSON.stringify(A)});const{toolCallId:M,toolName:R,result:O}=A,I=o[R];return I?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:M,toolName:R,result:I.experimental_toToolResultContent(O),experimental_content:I.experimental_toToolResultContent(O)}:{type:"tool-result",toolCallId:M,toolName:R,result:O}})}),S=[],x=!1,b++},b=0,x=!1,S=[];for(const E of a.parts)switch(E.type){case"text":{x&&y(),S.push(E);break}case"file":case"reasoning":{S.push(E);break}case"tool-invocation":{((r=E.toolInvocation.step)!=null?r:0)!==b&&y(),S.push(E),x=!0;break}}y();break}const p=a.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:u});break}const m=p.reduce((y,b)=>{var x;return Math.max(y,(x=b.step)!=null?x:0)},0);for(let y=0;y<=m;y++){const b=p.filter(x=>{var S;return((S=x.step)!=null?S:0)===y});b.length!==0&&(i.push({role:"assistant",content:[...l&&u&&y===0?[{type:"text",text:u}]:[],...b.map(({toolCallId:x,toolName:S,args:E})=>({type:"tool-call",toolCallId:x,toolName:S,args:E}))]}),i.push({role:"tool",content:b.map(x=>{if(!("result"in x))throw new VA({originalMessage:a,message:"ToolInvocation must have a result: "+JSON.stringify(x)});const{toolCallId:S,toolName:E,result:T}=x,A=o[E];return A?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:S,toolName:E,result:A.experimental_toToolResultContent(T),experimental_content:A.experimental_toToolResultContent(T)}:{type:"tool-result",toolCallId:S,toolName:E,result:T}})}))}u&&!l&&i.push({role:"assistant",content:u});break}case"data":break;default:{const p=c;throw new VA({originalMessage:a,message:`Unsupported role: ${p}`})}}}return i}var KN=Eee(()=>Nt([xee(),X(),Jt(),Kt(),Qc(X(),KN),vt(KN)])),wr=Qc(X(),Qc(X(),KN)),bze=vt(Nt([de({type:Me("text"),text:X()}),de({type:Me("image"),data:X(),mimeType:X().optional()})])),pte=de({type:Me("text"),text:X(),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),vze=de({type:Me("image"),image:Nt([ate,Ad(URL)]),mimeType:X().optional(),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),mte=de({type:Me("file"),data:Nt([ate,Ad(URL)]),filename:X().optional(),mimeType:X(),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),wze=de({type:Me("reasoning"),text:X(),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),xze=de({type:Me("redacted-reasoning"),data:X(),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),Sze=de({type:Me("tool-call"),toolCallId:X(),toolName:X(),args:Qt(),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),kze=de({type:Me("tool-result"),toolCallId:X(),toolName:X(),result:Qt(),content:bze.optional(),isError:Kt().optional(),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),Cze=de({role:Me("system"),content:X(),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),Eze=de({role:Me("user"),content:Nt([X(),vt(Nt([pte,vze,mte]))]),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),Tze=de({role:Me("assistant"),content:Nt([X(),vt(Nt([pte,mte,wze,xze,Sze]))]),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),_ze=de({role:Me("tool"),content:vt(kze),providerOptions:wr.optional(),experimental_providerMetadata:wr.optional()}),Aze=Nt([Cze,Eze,Tze,_ze]);function yk({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Xu({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Xu({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Xu({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Xu({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const r=Mze(e.messages)==="ui-messages"?yze(e.messages,{tools:t}):e.messages;if(r.length===0)throw new Xu({prompt:e,message:"messages must not be empty"});const o=Mm({value:r,schema:vt(Aze)});if(!o.success)throw new Xu({prompt:e,message:["message must be a CoreMessage or a UI message",`Validation error: ${o.error.message}`].join(`
`),cause:o.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Mze(e){if(!Array.isArray(e))throw new Xu({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received non-array value: ${JSON.stringify(e)}`].join(`
`),cause:e});if(e.length===0)return"messages";const t=e.map(Rze);if(t.some(r=>r==="has-ui-specific-parts"))return"ui-messages";const n=t.findIndex(r=>r!=="has-core-specific-parts"&&r!=="message");if(n===-1)return"messages";throw new Xu({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received message of type: "${t[n]}" at index ${n}`,`messages[${n}]: ${JSON.stringify(e[n])}`].join(`
`),cause:e})}function Rze(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}function bf({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}var Nze="JSON schema:",Ize="You MUST answer with a JSON object that matches the JSON schema above.",Oze="You MUST answer with JSON.";function mb({prompt:e,schema:t,schemaPrefix:n=t!=null?Nze:void 0,schemaSuffix:r=t!=null?Ize:Oze}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(o=>o!=null).join(`
`)}function xx(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:o}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:o}}}},t}var Pze={type:"no-schema",jsonSchema:void 0,validatePartialResult({value:e,textDelta:t}){return{success:!0,value:{partial:e,textDelta:t}}},validateFinalResult(e,t){return e===void 0?{success:!1,error:new Lc({message:"No object generated: response did not match schema.",text:t.text,response:t.response,usage:t.usage,finishReason:t.finishReason})}:{success:!0,value:e}},createElementStream(){throw new sk({functionality:"element streams in no-schema mode"})}},Dze=e=>({type:"object",jsonSchema:e.jsonSchema,validatePartialResult({value:t,textDelta:n}){return{success:!0,value:{partial:t,textDelta:n}}},validateFinalResult(t){return Mm({value:t,schema:e})},createElementStream(){throw new sk({functionality:"element streams in object mode"})}}),$ze=e=>{const{$schema:t,...n}=e.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:n}},required:["elements"],additionalProperties:!1},validatePartialResult({value:r,latestObject:o,isFirstDelta:i,isFinalDelta:s}){var a;if(!zN(r)||!z7(r.elements))return{success:!1,error:new ph({value:r,cause:"value must be an object that contains an array of elements"})};const l=r.elements,c=[];for(let p=0;p<l.length;p++){const m=l[p],y=Mm({value:m,schema:e});if(!(p===l.length-1&&!s)){if(!y.success)return y;c.push(y.value)}}const u=(a=o?.length)!=null?a:0;let f="";return i&&(f+="["),u>0&&(f+=","),f+=c.slice(u).map(p=>JSON.stringify(p)).join(","),s&&(f+="]"),{success:!0,value:{partial:c,textDelta:f}}},validateFinalResult(r){if(!zN(r)||!z7(r.elements))return{success:!1,error:new ph({value:r,cause:"value must be an object that contains an array of elements"})};const o=r.elements;for(const i of o){const s=Mm({value:i,schema:e});if(!s.success)return s}return{success:!0,value:o}},createElementStream(r){let o=0;return xx(r.pipeThrough(new TransformStream({transform(i,s){switch(i.type){case"object":{const a=i.object;for(;o<a.length;o++)s.enqueue(a[o]);break}case"text-delta":case"finish":case"error":break;default:{const a=i;throw new Error(`Unsupported chunk type: ${a}`)}}}})))}}},Lze=e=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},validateFinalResult(t){if(!zN(t)||typeof t.result!="string")return{success:!1,error:new ph({value:t,cause:'value must be an object that contains a string in the "result" property.'})};const n=t.result;return e.includes(n)?{success:!0,value:n}:{success:!1,error:new ph({value:t,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new sk({functionality:"partial results in enum mode"})},createElementStream(){throw new sk({functionality:"element streams in enum mode"})}});function gte({output:e,schema:t,enumValues:n}){switch(e){case"object":return Dze(qN(t));case"array":return $ze(qN(t));case"enum":return Lze(n);case"no-schema":return Pze;default:{const r=e;throw new Error(`Unsupported output: ${r}`)}}}function yte({output:e,mode:t,schema:n,schemaName:r,schemaDescription:o,enumValues:i}){if(e!=null&&e!=="object"&&e!=="array"&&e!=="enum"&&e!=="no-schema")throw new Fn({parameter:"output",value:e,message:"Invalid output type."});if(e==="no-schema"){if(t==="auto"||t==="tool")throw new Fn({parameter:"mode",value:t,message:'Mode must be "json" for no-schema output.'});if(n!=null)throw new Fn({parameter:"schema",value:n,message:"Schema is not supported for no-schema output."});if(o!=null)throw new Fn({parameter:"schemaDescription",value:o,message:"Schema description is not supported for no-schema output."});if(r!=null)throw new Fn({parameter:"schemaName",value:r,message:"Schema name is not supported for no-schema output."});if(i!=null)throw new Fn({parameter:"enumValues",value:i,message:"Enum values are not supported for no-schema output."})}if(e==="object"){if(n==null)throw new Fn({parameter:"schema",value:n,message:"Schema is required for object output."});if(i!=null)throw new Fn({parameter:"enumValues",value:i,message:"Enum values are not supported for object output."})}if(e==="array"){if(n==null)throw new Fn({parameter:"schema",value:n,message:"Element schema is required for array output."});if(i!=null)throw new Fn({parameter:"enumValues",value:i,message:"Enum values are not supported for array output."})}if(e==="enum"){if(n!=null)throw new Fn({parameter:"schema",value:n,message:"Schema is not supported for enum output."});if(o!=null)throw new Fn({parameter:"schemaDescription",value:o,message:"Schema description is not supported for enum output."});if(r!=null)throw new Fn({parameter:"schemaName",value:r,message:"Schema name is not supported for enum output."});if(i==null)throw new Fn({parameter:"enumValues",value:i,message:"Enum values are required for enum output."});for(const s of i)if(typeof s!="string")throw new Fn({parameter:"enumValues",value:s,message:"Enum values must be strings."})}}function bte(e){const t=e.map(n=>({...n,content:typeof n.content=="string"?n.content:n.content.map(jze)}));return JSON.stringify(t)}function jze(e){return e.type==="image"?{...e,image:e.image instanceof Uint8Array?OP(e.image):e.image}:e}var zze=Ah({prefix:"aiobj",size:24});async function Bze({model:e,enum:t,schema:n,schemaName:r,schemaDescription:o,mode:i,output:s="object",system:a,prompt:l,messages:c,maxRetries:u,abortSignal:f,headers:p,experimental_repairText:m,experimental_telemetry:y,experimental_providerMetadata:b,providerOptions:x=b,_internal:{generateId:S=zze,currentDate:E=()=>new Date}={},...T}){if(typeof e=="string"||e.specificationVersion!=="v1")throw new Vee;yte({output:s,mode:i,schema:n,schemaName:r,schemaDescription:o,enumValues:t});const{maxRetries:A,retry:M}=Kee({maxRetries:u}),R=gte({output:s,schema:n,enumValues:t});R.type==="no-schema"&&i===void 0&&(i="json");const O=Yee({model:e,telemetry:y,headers:p,settings:{...T,maxRetries:A}}),I=Jee(y);return c0({name:"ai.generateObject",attributes:Il({telemetry:y,attributes:{...l0({operationId:"ai.generateObject",telemetry:y}),...O,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:l,messages:c})},"ai.schema":R.jsonSchema!=null?{input:()=>JSON.stringify(R.jsonSchema)}:void 0,"ai.schema.name":r,"ai.schema.description":o,"ai.settings.output":R.type,"ai.settings.mode":i}}),tracer:I,fn:async L=>{var $,B,H,V;(i==="auto"||i==null)&&(i=e.defaultObjectGenerationMode);let W,K,z,G,F,Z,N,U,ee;switch(i){case"json":{const oe=yk({prompt:{system:R.jsonSchema==null?mb({prompt:a}):e.supportsStructuredOutputs?a:mb({prompt:a,schema:R.jsonSchema}),prompt:l,messages:c},tools:void 0}),he=await mk({prompt:oe,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:($=e.supportsUrl)==null?void 0:$.bind(e)}),le=await M(()=>c0({name:"ai.generateObject.doGenerate",attributes:Il({telemetry:y,attributes:{...l0({operationId:"ai.generateObject.doGenerate",telemetry:y}),...O,"ai.prompt.format":{input:()=>oe.type},"ai.prompt.messages":{input:()=>JSON.stringify(he)},"ai.settings.mode":i,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":T.frequencyPenalty,"gen_ai.request.max_tokens":T.maxTokens,"gen_ai.request.presence_penalty":T.presencePenalty,"gen_ai.request.temperature":T.temperature,"gen_ai.request.top_k":T.topK,"gen_ai.request.top_p":T.topP}}),tracer:I,fn:async ge=>{var Oe,je,ye,Ie,Le,$e;const me=await e.doGenerate({mode:{type:"object-json",schema:R.jsonSchema,name:r,description:o},...gk(T),inputFormat:oe.type,prompt:he,providerMetadata:x,abortSignal:f,headers:p}),Re={id:(je=(Oe=me.response)==null?void 0:Oe.id)!=null?je:S(),timestamp:(Ie=(ye=me.response)==null?void 0:ye.timestamp)!=null?Ie:E(),modelId:($e=(Le=me.response)==null?void 0:Le.modelId)!=null?$e:e.modelId};if(me.text===void 0)throw new Lc({message:"No object generated: the model did not return a response.",response:Re,usage:bf(me.usage),finishReason:me.finishReason});return ge.setAttributes(Il({telemetry:y,attributes:{"ai.response.finishReason":me.finishReason,"ai.response.object":{output:()=>me.text},"ai.response.id":Re.id,"ai.response.model":Re.modelId,"ai.response.timestamp":Re.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(me.providerMetadata),"ai.usage.promptTokens":me.usage.promptTokens,"ai.usage.completionTokens":me.usage.completionTokens,"gen_ai.response.finish_reasons":[me.finishReason],"gen_ai.response.id":Re.id,"gen_ai.response.model":Re.modelId,"gen_ai.usage.prompt_tokens":me.usage.promptTokens,"gen_ai.usage.completion_tokens":me.usage.completionTokens}})),{...me,objectText:me.text,responseData:Re}}}));W=le.objectText,K=le.finishReason,z=le.usage,G=le.warnings,F=le.rawResponse,U=le.logprobs,ee=le.providerMetadata,N=(B=le.request)!=null?B:{},Z=le.responseData;break}case"tool":{const oe=yk({prompt:{system:a,prompt:l,messages:c},tools:void 0}),he=await mk({prompt:oe,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(H=e.supportsUrl)==null?void 0:H.bind(e)}),le=oe.type,ge=await M(()=>c0({name:"ai.generateObject.doGenerate",attributes:Il({telemetry:y,attributes:{...l0({operationId:"ai.generateObject.doGenerate",telemetry:y}),...O,"ai.prompt.format":{input:()=>le},"ai.prompt.messages":{input:()=>bte(he)},"ai.settings.mode":i,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":T.frequencyPenalty,"gen_ai.request.max_tokens":T.maxTokens,"gen_ai.request.presence_penalty":T.presencePenalty,"gen_ai.request.temperature":T.temperature,"gen_ai.request.top_k":T.topK,"gen_ai.request.top_p":T.topP}}),tracer:I,fn:async Oe=>{var je,ye,Ie,Le,$e,me,Re,we;const Pe=await e.doGenerate({mode:{type:"object-tool",tool:{type:"function",name:r??"json",description:o??"Respond with a JSON object.",parameters:R.jsonSchema}},...gk(T),inputFormat:le,prompt:he,providerMetadata:x,abortSignal:f,headers:p}),Ze=(ye=(je=Pe.toolCalls)==null?void 0:je[0])==null?void 0:ye.args,rt={id:(Le=(Ie=Pe.response)==null?void 0:Ie.id)!=null?Le:S(),timestamp:(me=($e=Pe.response)==null?void 0:$e.timestamp)!=null?me:E(),modelId:(we=(Re=Pe.response)==null?void 0:Re.modelId)!=null?we:e.modelId};if(Ze===void 0)throw new Lc({message:"No object generated: the tool was not called.",response:rt,usage:bf(Pe.usage),finishReason:Pe.finishReason});return Oe.setAttributes(Il({telemetry:y,attributes:{"ai.response.finishReason":Pe.finishReason,"ai.response.object":{output:()=>Ze},"ai.response.id":rt.id,"ai.response.model":rt.modelId,"ai.response.timestamp":rt.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(Pe.providerMetadata),"ai.usage.promptTokens":Pe.usage.promptTokens,"ai.usage.completionTokens":Pe.usage.completionTokens,"gen_ai.response.finish_reasons":[Pe.finishReason],"gen_ai.response.id":rt.id,"gen_ai.response.model":rt.modelId,"gen_ai.usage.input_tokens":Pe.usage.promptTokens,"gen_ai.usage.output_tokens":Pe.usage.completionTokens}})),{...Pe,objectText:Ze,responseData:rt}}}));W=ge.objectText,K=ge.finishReason,z=ge.usage,G=ge.warnings,F=ge.rawResponse,U=ge.logprobs,ee=ge.providerMetadata,N=(V=ge.request)!=null?V:{},Z=ge.responseData;break}case void 0:throw new Error("Model does not have a default object generation mode.");default:{const oe=i;throw new Error(`Unsupported mode: ${oe}`)}}function D(oe){const he=NQ({text:oe});if(!he.success)throw new Lc({message:"No object generated: could not parse the response.",cause:he.error,text:oe,response:Z,usage:bf(z),finishReason:K});const le=R.validateFinalResult(he.value,{text:oe,response:Z,usage:bf(z)});if(!le.success)throw new Lc({message:"No object generated: response did not match schema.",cause:le.error,text:oe,response:Z,usage:bf(z),finishReason:K});return le.value}let ae;try{ae=D(W)}catch(oe){if(m!=null&&Lc.isInstance(oe)&&(LN.isInstance(oe.cause)||ph.isInstance(oe.cause))){const he=await m({text:W,error:oe.cause});if(he===null)throw oe;ae=D(he)}else throw oe}return L.setAttributes(Il({telemetry:y,attributes:{"ai.response.finishReason":K,"ai.response.object":{output:()=>JSON.stringify(ae)},"ai.usage.promptTokens":z.promptTokens,"ai.usage.completionTokens":z.completionTokens}})),new Vze({object:ae,finishReason:K,usage:bf(z),warnings:G,request:N,response:{...Z,headers:F?.headers,body:F?.body},logprobs:U,providerMetadata:ee})}})}var Vze=class{constructor(e){this.object=e.object,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.providerMetadata=e.providerMetadata,this.experimental_providerMetadata=e.providerMetadata,this.response=e.response,this.request=e.request,this.logprobs=e.logprobs}toJsonResponse(e){var t;return new Response(JSON.stringify(this.object),{status:(t=e?.status)!=null?t:200,headers:bE(e?.headers,{contentType:"application/json; charset=utf-8"})})}},kp=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((t,n)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&n(this.status.error),this._resolve=t,this._reject=n}),this.promise)}resolve(t){var n;this.status={type:"resolved",value:t},this.promise&&((n=this._resolve)==null||n.call(this,t))}reject(t){var n;this.status={type:"rejected",error:t},this.promise&&((n=this._reject)==null||n.call(this,t))}};function wB(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function Fze(){let e=[],t=null,n=!1,r=wB();const o=async()=>{if(n&&e.length===0){t?.close();return}if(e.length===0)return r=wB(),await r.promise,o();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await o():n&&t?.close()):t?.enqueue(i)}catch(i){t?.error(i),e.shift(),n&&e.length===0&&t?.close()}};return{stream:new ReadableStream({start(i){t=i},pull:o,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&t?.close()},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t?.close()}}}function Hze(){var e,t;return(t=(e=globalThis?.performance)==null?void 0:e.now())!=null?t:Date.now()}var Uze=Ah({prefix:"aiobj",size:24});function Gze({model:e,schema:t,schemaName:n,schemaDescription:r,mode:o,output:i="object",system:s,prompt:a,messages:l,maxRetries:c,abortSignal:u,headers:f,experimental_telemetry:p,experimental_providerMetadata:m,providerOptions:y=m,onError:b,onFinish:x,_internal:{generateId:S=Uze,currentDate:E=()=>new Date,now:T=Hze}={},...A}){if(typeof e=="string"||e.specificationVersion!=="v1")throw new Vee;yte({output:i,mode:o,schema:t,schemaName:n,schemaDescription:r});const M=gte({output:i,schema:t});return M.type==="no-schema"&&o===void 0&&(o="json"),new qze({model:e,telemetry:p,headers:f,settings:A,maxRetries:c,abortSignal:u,outputStrategy:M,system:s,prompt:a,messages:l,schemaName:n,schemaDescription:r,providerOptions:y,mode:o,onError:b,onFinish:x,generateId:S,currentDate:E,now:T})}var qze=class{constructor({model:e,headers:t,telemetry:n,settings:r,maxRetries:o,abortSignal:i,outputStrategy:s,system:a,prompt:l,messages:c,schemaName:u,schemaDescription:f,providerOptions:p,mode:m,onError:y,onFinish:b,generateId:x,currentDate:S,now:E}){this.objectPromise=new kp,this.usagePromise=new kp,this.providerMetadataPromise=new kp,this.warningsPromise=new kp,this.requestPromise=new kp,this.responsePromise=new kp;const{maxRetries:T,retry:A}=Kee({maxRetries:o}),M=Yee({model:e,telemetry:n,headers:t,settings:{...r,maxRetries:T}}),R=Jee(n),O=this,I=Fze(),L=new TransformStream({transform($,B){B.enqueue($),$.type==="error"&&y?.({error:$.error})}});this.baseStream=I.stream.pipeThrough(L),c0({name:"ai.streamObject",attributes:Il({telemetry:n,attributes:{...l0({operationId:"ai.streamObject",telemetry:n}),...M,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:l,messages:c})},"ai.schema":s.jsonSchema!=null?{input:()=>JSON.stringify(s.jsonSchema)}:void 0,"ai.schema.name":u,"ai.schema.description":f,"ai.settings.output":s.type,"ai.settings.mode":m}}),tracer:R,endWhenDone:!1,fn:async $=>{var B,H;(m==="auto"||m==null)&&(m=e.defaultObjectGenerationMode);let V,W;switch(m){case"json":{const $e=yk({prompt:{system:s.jsonSchema==null?mb({prompt:a}):e.supportsStructuredOutputs?a:mb({prompt:a,schema:s.jsonSchema}),prompt:l,messages:c},tools:void 0});V={mode:{type:"object-json",schema:s.jsonSchema,name:u,description:f},...gk(r),inputFormat:$e.type,prompt:await mk({prompt:$e,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(B=e.supportsUrl)==null?void 0:B.bind(e)}),providerMetadata:p,abortSignal:i,headers:t},W={transform:(me,Re)=>{switch(me.type){case"text-delta":Re.enqueue(me.textDelta);break;case"response-metadata":case"finish":case"error":Re.enqueue(me);break}}};break}case"tool":{const $e=yk({prompt:{system:a,prompt:l,messages:c},tools:void 0});V={mode:{type:"object-tool",tool:{type:"function",name:u??"json",description:f??"Respond with a JSON object.",parameters:s.jsonSchema}},...gk(r),inputFormat:$e.type,prompt:await mk({prompt:$e,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(H=e.supportsUrl)==null?void 0:H.bind(e)}),providerMetadata:p,abortSignal:i,headers:t},W={transform(me,Re){switch(me.type){case"tool-call-delta":Re.enqueue(me.argsTextDelta);break;case"response-metadata":case"finish":case"error":Re.enqueue(me);break}}};break}case void 0:throw new Error("Model does not have a default object generation mode.");default:{const $e=m;throw new Error(`Unsupported mode: ${$e}`)}}const{result:{stream:K,warnings:z,rawResponse:G,request:F},doStreamSpan:Z,startTimestampMs:N}=await A(()=>c0({name:"ai.streamObject.doStream",attributes:Il({telemetry:n,attributes:{...l0({operationId:"ai.streamObject.doStream",telemetry:n}),...M,"ai.prompt.format":{input:()=>V.inputFormat},"ai.prompt.messages":{input:()=>bte(V.prompt)},"ai.settings.mode":m,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:R,endWhenDone:!1,fn:async $e=>({startTimestampMs:E(),doStreamSpan:$e,result:await e.doStream(V)})}));O.requestPromise.resolve(F??{});let U,ee,D,ae,oe,he="",le="",ge={id:x(),timestamp:S(),modelId:e.modelId},Oe,je,ye=!0,Ie=!0;const Le=K.pipeThrough(new TransformStream(W)).pipeThrough(new TransformStream({async transform($e,me){var Re,we,Pe;if(ye){const Ze=E()-N;ye=!1,Z.addEvent("ai.stream.firstChunk",{"ai.stream.msToFirstChunk":Ze}),Z.setAttributes({"ai.stream.msToFirstChunk":Ze})}if(typeof $e=="string"){he+=$e,le+=$e;const{value:Ze,state:rt}=Iee(he);if(Ze!==void 0&&!fk(Oe,Ze)){const Bn=s.validatePartialResult({value:Ze,textDelta:le,latestObject:je,isFirstDelta:Ie,isFinalDelta:rt==="successful-parse"});Bn.success&&!fk(je,Bn.value.partial)&&(Oe=Ze,je=Bn.value.partial,me.enqueue({type:"object",object:je}),me.enqueue({type:"text-delta",textDelta:Bn.value.textDelta}),le="",Ie=!1)}return}switch($e.type){case"response-metadata":{ge={id:(Re=$e.id)!=null?Re:ge.id,timestamp:(we=$e.timestamp)!=null?we:ge.timestamp,modelId:(Pe=$e.modelId)!=null?Pe:ge.modelId};break}case"finish":{le!==""&&me.enqueue({type:"text-delta",textDelta:le}),ee=$e.finishReason,U=bf($e.usage),D=$e.providerMetadata,me.enqueue({...$e,usage:U,response:ge}),O.usagePromise.resolve(U),O.providerMetadataPromise.resolve(D),O.responsePromise.resolve({...ge,headers:G?.headers});const Ze=s.validateFinalResult(Oe,{text:he,response:ge,usage:U});Ze.success?(ae=Ze.value,O.objectPromise.resolve(ae)):(oe=new Lc({message:"No object generated: response did not match schema.",cause:Ze.error,text:he,response:ge,usage:U,finishReason:ee}),O.objectPromise.reject(oe));break}default:{me.enqueue($e);break}}},async flush($e){try{const me=U??{promptTokens:NaN,completionTokens:NaN,totalTokens:NaN};Z.setAttributes(Il({telemetry:n,attributes:{"ai.response.finishReason":ee,"ai.response.object":{output:()=>JSON.stringify(ae)},"ai.response.id":ge.id,"ai.response.model":ge.modelId,"ai.response.timestamp":ge.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(D),"ai.usage.promptTokens":me.promptTokens,"ai.usage.completionTokens":me.completionTokens,"gen_ai.response.finish_reasons":[ee],"gen_ai.response.id":ge.id,"gen_ai.response.model":ge.modelId,"gen_ai.usage.input_tokens":me.promptTokens,"gen_ai.usage.output_tokens":me.completionTokens}})),Z.end(),$.setAttributes(Il({telemetry:n,attributes:{"ai.usage.promptTokens":me.promptTokens,"ai.usage.completionTokens":me.completionTokens,"ai.response.object":{output:()=>JSON.stringify(ae)},"ai.response.providerMetadata":JSON.stringify(D)}})),await b?.({usage:me,object:ae,error:oe,response:{...ge,headers:G?.headers},warnings:z,providerMetadata:D,experimental_providerMetadata:D})}catch(me){$e.enqueue({type:"error",error:me})}finally{$.end()}}}));I.addStream(Le)}}).catch($=>{I.addStream(new ReadableStream({start(B){B.enqueue({type:"error",error:$}),B.close()}}))}).finally(()=>{I.close()}),this.outputStrategy=s}get object(){return this.objectPromise.value}get usage(){return this.usagePromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get warnings(){return this.warningsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get partialObjectStream(){return xx(this.baseStream.pipeThrough(new TransformStream({transform(e,t){switch(e.type){case"object":t.enqueue(e.object);break;case"text-delta":case"finish":case"error":break;default:{const n=e;throw new Error(`Unsupported chunk type: ${n}`)}}}})))}get elementStream(){return this.outputStrategy.createElementStream(this.baseStream)}get textStream(){return xx(this.baseStream.pipeThrough(new TransformStream({transform(e,t){switch(e.type){case"text-delta":t.enqueue(e.textDelta);break;case"object":case"finish":case"error":break;default:{const n=e;throw new Error(`Unsupported chunk type: ${n}`)}}}})))}get fullStream(){return xx(this.baseStream)}pipeTextStreamToResponse(e,t){W8e({response:e,status:t?.status,statusText:t?.statusText,headers:Z8e(t?.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e?.status)!=null?t:200,headers:bE(e?.headers,{contentType:"text/plain; charset=utf-8"})})}};Ah({prefix:"aitxt",size:24});Ah({prefix:"msg",size:24});var Zze={};IP(Zze,{object:()=>Kze,text:()=>Wze});var Wze=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),Kze=({schema:e})=>{const t=qN(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:mb({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=Iee(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const o=r.state;throw new Error(`Unsupported parse state: ${o}`)}}},parseOutput({text:n},r){const o=NQ({text:n});if(!o.success)throw new Lc({message:"No object generated: could not parse the response.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const i=Mm({value:o.value,schema:t});if(!i.success)throw new Lc({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return i.value}}};function vte(e,t){const n=e.getReader(),r=t.getReader();let o,i,s=!1,a=!1;async function l(u){try{o==null&&(o=n.read());const f=await o;o=void 0,f.done?u.close():u.enqueue(f.value)}catch(f){u.error(f)}}async function c(u){try{i==null&&(i=r.read());const f=await i;i=void 0,f.done?u.close():u.enqueue(f.value)}catch(f){u.error(f)}}return new ReadableStream({async pull(u){try{if(s){await c(u);return}if(a){await l(u);return}o==null&&(o=n.read()),i==null&&(i=r.read());const{result:f,reader:p}=await Promise.race([o.then(m=>({result:m,reader:n})),i.then(m=>({result:m,reader:r}))]);f.done||u.enqueue(f.value),p===n?(o=void 0,f.done&&(await c(u),s=!0)):(i=void 0,f.done&&(a=!0,await l(u)))}catch(f){u.error(f)}},cancel(){n.cancel(),r.cancel()}})}Ah({prefix:"aitxt",size:24});Ah({prefix:"msg",size:24});var Yze=de({name:X(),version:X()}).passthrough(),PP=de({_meta:Ot(de({}).passthrough())}).passthrough(),gb=PP,Jze=de({method:X(),params:Ot(PP)}),Xze=de({experimental:Ot(de({}).passthrough()),logging:Ot(de({}).passthrough()),prompts:Ot(de({listChanged:Ot(Kt())}).passthrough()),resources:Ot(de({subscribe:Ot(Kt()),listChanged:Ot(Kt())}).passthrough()),tools:Ot(de({listChanged:Ot(Kt())}).passthrough())}).passthrough();gb.extend({protocolVersion:X(),capabilities:Xze,serverInfo:Yze,instructions:Ot(X())});var Qze=gb.extend({nextCursor:Ot(X())}),e7e=de({name:X(),description:Ot(X()),inputSchema:de({type:Me("object"),properties:Ot(de({}).passthrough())}).passthrough()}).passthrough();Qze.extend({tools:vt(e7e)});var t7e=de({type:Me("text"),text:X()}).passthrough(),n7e=de({type:Me("image"),data:X().base64(),mimeType:X()}).passthrough(),wte=de({uri:X(),mimeType:Ot(X())}).passthrough(),r7e=wte.extend({text:X()}),o7e=wte.extend({blob:X().base64()}),i7e=de({type:Me("resource"),resource:Nt([r7e,o7e])}).passthrough();gb.extend({content:vt(Nt([t7e,n7e,i7e])),isError:Kt().default(!1).optional()}).or(gb.extend({toolResult:Qt()}));var vE="2.0",s7e=de({jsonrpc:Me(vE),id:Nt([X(),Jt().int()])}).merge(Jze).strict(),a7e=de({jsonrpc:Me(vE),id:Nt([X(),Jt().int()]),result:gb}).strict(),l7e=de({jsonrpc:Me(vE),id:Nt([X(),Jt().int()]),error:de({code:Jt().int(),message:X(),data:Ot(Qt())})}).strict(),c7e=de({jsonrpc:Me(vE)}).merge(de({method:X(),params:Ot(PP)})).strict();Nt([s7e,c7e,a7e,l7e]);var u7e={};IP(u7e,{mergeIntoDataStream:()=>h7e,toDataStream:()=>d7e,toDataStreamResponse:()=>f7e});function xte(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,o){o.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function DP(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var o;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&xB((o=n.data)==null?void 0:o.chunk,r);return}xB(n,r)}})).pipeThrough(xte(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Oee("text",n))}}))}function d7e(e,t){return DP(e,t).pipeThrough(new TextEncoderStream)}function f7e(e,t){var n;const r=DP(e,t?.callbacks).pipeThrough(new TextEncoderStream),o=t?.data,i=t?.init,s=o?vte(o.stream,r):r;return new Response(s,{status:(n=i?.status)!=null?n:200,statusText:i?.statusText,headers:bE(i?.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function h7e(e,t){t.dataStream.merge(DP(e,t.callbacks))}function xB(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var p7e={};IP(p7e,{mergeIntoDataStream:()=>y7e,toDataStream:()=>m7e,toDataStreamResponse:()=>g7e});function $P(e,t){const n=b7e();return L$e(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,o){o.enqueue(n(r.delta))}})).pipeThrough(xte(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,o)=>{o.enqueue(Oee("text",r))}}))}function m7e(e,t){return $P(e,t).pipeThrough(new TextEncoderStream)}function g7e(e,t={}){var n;const{init:r,data:o,callbacks:i}=t,s=$P(e,i).pipeThrough(new TextEncoderStream),a=o?vte(o.stream,s):s;return new Response(a,{status:(n=r?.status)!=null?n:200,statusText:r?.statusText,headers:bE(r?.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function y7e(e,t){t.dataStream.merge($P(e,t.callbacks))}function b7e(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}var jy={exports:{}};jy.exports;var SB;function v7e(){return SB||(SB=1,(function(e,t){var n=200,r="__lodash_hash_undefined__",o=1,i=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Function]",y="[object GeneratorFunction]",b="[object Map]",x="[object Number]",S="[object Null]",E="[object Object]",T="[object Promise]",A="[object Proxy]",M="[object RegExp]",R="[object Set]",O="[object String]",I="[object Symbol]",L="[object Undefined]",$="[object WeakMap]",B="[object ArrayBuffer]",H="[object DataView]",V="[object Float32Array]",W="[object Float64Array]",K="[object Int8Array]",z="[object Int16Array]",G="[object Int32Array]",F="[object Uint8Array]",Z="[object Uint8ClampedArray]",N="[object Uint16Array]",U="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,oe={};oe[V]=oe[W]=oe[K]=oe[z]=oe[G]=oe[F]=oe[Z]=oe[N]=oe[U]=!0,oe[a]=oe[l]=oe[B]=oe[u]=oe[H]=oe[f]=oe[p]=oe[m]=oe[b]=oe[x]=oe[E]=oe[M]=oe[R]=oe[O]=oe[$]=!1;var he=typeof z1=="object"&&z1&&z1.Object===Object&&z1,le=typeof self=="object"&&self&&self.Object===Object&&self,ge=he||le||Function("return this")(),Oe=t&&!t.nodeType&&t,je=Oe&&!0&&e&&!e.nodeType&&e,ye=je&&je.exports===Oe,Ie=ye&&he.process,Le=(function(){try{return Ie&&Ie.binding&&Ie.binding("util")}catch{}})(),$e=Le&&Le.isTypedArray;function me(q,Q){for(var ke=-1,ze=q==null?0:q.length,tn=0,gt=[];++ke<ze;){var Nn=q[ke];Q(Nn,ke,q)&&(gt[tn++]=Nn)}return gt}function Re(q,Q){for(var ke=-1,ze=Q.length,tn=q.length;++ke<ze;)q[tn+ke]=Q[ke];return q}function we(q,Q){for(var ke=-1,ze=q==null?0:q.length;++ke<ze;)if(Q(q[ke],ke,q))return!0;return!1}function Pe(q,Q){for(var ke=-1,ze=Array(q);++ke<q;)ze[ke]=Q(ke);return ze}function Ze(q){return function(Q){return q(Q)}}function rt(q,Q){return q.has(Q)}function Bn(q,Q){return q?.[Q]}function So(q){var Q=-1,ke=Array(q.size);return q.forEach(function(ze,tn){ke[++Q]=[tn,ze]}),ke}function Sr(q,Q){return function(ke){return q(Q(ke))}}function Ir(q){var Q=-1,ke=Array(q.size);return q.forEach(function(ze){ke[++Q]=ze}),ke}var Ft=Array.prototype,fe=Function.prototype,Se=Object.prototype,Be=ge["__core-js_shared__"],De=fe.toString,et=Se.hasOwnProperty,an=(function(){var q=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return q?"Symbol(src)_1."+q:""})(),Or=Se.toString,hn=RegExp("^"+De.call(et).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kr=ye?ge.Buffer:void 0,xn=ge.Symbol,pn=ge.Uint8Array,qn=Se.propertyIsEnumerable,Zn=Ft.splice,so=xn?xn.toStringTag:void 0,Ki=Object.getOwnPropertySymbols,qr=kr?kr.isBuffer:void 0,Qn=Sr(Object.keys,Object),Si=ai(ge,"DataView"),ao=ai(ge,"Map"),lr=ai(ge,"Promise"),ki=ai(ge,"Set"),Fe=ai(ge,"WeakMap"),Zt=ai(Object,"create"),Lo=Ti(Si),er=Ti(ao),on=Ti(lr),Wt=Ti(ki),jo=Ti(Fe),Sn=xn?xn.prototype:void 0,Yi=Sn?Sn.valueOf:void 0;function zo(q){var Q=-1,ke=q==null?0:q.length;for(this.clear();++Q<ke;){var ze=q[Q];this.set(ze[0],ze[1])}}function mu(){this.__data__=Zt?Zt(null):{},this.size=0}function wa(q){var Q=this.has(q)&&delete this.__data__[q];return this.size-=Q?1:0,Q}function Ds(q){var Q=this.__data__;if(Zt){var ke=Q[q];return ke===r?void 0:ke}return et.call(Q,q)?Q[q]:void 0}function $s(q){var Q=this.__data__;return Zt?Q[q]!==void 0:et.call(Q,q)}function Ji(q,Q){var ke=this.__data__;return this.size+=this.has(q)?0:1,ke[q]=Zt&&Q===void 0?r:Q,this}zo.prototype.clear=mu,zo.prototype.delete=wa,zo.prototype.get=Ds,zo.prototype.has=$s,zo.prototype.set=Ji;function cr(q){var Q=-1,ke=q==null?0:q.length;for(this.clear();++Q<ke;){var ze=q[Q];this.set(ze[0],ze[1])}}function Xi(){this.__data__=[],this.size=0}function Wn(q){var Q=this.__data__,ke=Ci(Q,q);if(ke<0)return!1;var ze=Q.length-1;return ke==ze?Q.pop():Zn.call(Q,ke,1),--this.size,!0}function xa(q){var Q=this.__data__,ke=Ci(Q,q);return ke<0?void 0:Q[ke][1]}function Sa(q){return Ci(this.__data__,q)>-1}function Bo(q,Q){var ke=this.__data__,ze=Ci(ke,q);return ze<0?(++this.size,ke.push([q,Q])):ke[ze][1]=Q,this}cr.prototype.clear=Xi,cr.prototype.delete=Wn,cr.prototype.get=xa,cr.prototype.has=Sa,cr.prototype.set=Bo;function Cr(q){var Q=-1,ke=q==null?0:q.length;for(this.clear();++Q<ke;){var ze=q[Q];this.set(ze[0],ze[1])}}function dl(){this.size=0,this.__data__={hash:new zo,map:new(ao||cr),string:new zo}}function ka(q){var Q=co(this,q).delete(q);return this.size-=Q?1:0,Q}function sc(q){return co(this,q).get(q)}function Ud(q){return co(this,q).has(q)}function Qi(q,Q){var ke=co(this,q),ze=ke.size;return ke.set(q,Q),this.size+=ke.size==ze?0:1,this}Cr.prototype.clear=dl,Cr.prototype.delete=ka,Cr.prototype.get=sc,Cr.prototype.has=Ud,Cr.prototype.set=Qi;function es(q){var Q=-1,ke=q==null?0:q.length;for(this.__data__=new Cr;++Q<ke;)this.add(q[Q])}function ii(q){return this.__data__.set(q,r),this}function Ls(q){return this.__data__.has(q)}es.prototype.add=es.prototype.push=ii,es.prototype.has=Ls;function si(q){var Q=this.__data__=new cr(q);this.size=Q.size}function ts(){this.__data__=new cr,this.size=0}function js(q){var Q=this.__data__,ke=Q.delete(q);return this.size=Q.size,ke}function fl(q){return this.__data__.get(q)}function Gd(q){return this.__data__.has(q)}function Ca(q,Q){var ke=this.__data__;if(ke instanceof cr){var ze=ke.__data__;if(!ao||ze.length<n-1)return ze.push([q,Q]),this.size=++ke.size,this;ke=this.__data__=new Cr(ze)}return ke.set(q,Q),this.size=ke.size,this}si.prototype.clear=ts,si.prototype.delete=js,si.prototype.get=fl,si.prototype.has=Gd,si.prototype.set=Ca;function Er(q,Q){var ke=yu(q),ze=!ke&&Dv(q),tn=!ke&&!ze&&uc(q),gt=!ke&&!ze&&!tn&&qd(q),Nn=ke||ze||tn||gt,ur=Nn?Pe(q.length,String):[],nr=ur.length;for(var mn in q)et.call(q,mn)&&!(Nn&&(mn=="length"||tn&&(mn=="offset"||mn=="parent")||gt&&(mn=="buffer"||mn=="byteLength"||mn=="byteOffset")||gu(mn,nr)))&&ur.push(mn);return ur}function Ci(q,Q){for(var ke=q.length;ke--;)if(cc(q[ke][0],Q))return ke;return-1}function hl(q,Q,ke){var ze=Q(q);return yu(q)?ze:Re(ze,ke(q))}function ko(q){return q==null?q===void 0?L:S:so&&so in Object(q)?_a(q):ml(q)}function zs(q){return dc(q)&&ko(q)==a}function Ei(q,Q,ke,ze,tn){return q===Q?!0:q==null||Q==null||!dc(q)&&!dc(Q)?q!==q&&Q!==Q:pl(q,Q,ke,ze,Ei,tn)}function pl(q,Q,ke,ze,tn,gt){var Nn=yu(q),ur=yu(Q),nr=Nn?l:Zr(q),mn=ur?l:Zr(Q);nr=nr==a?E:nr,mn=mn==a?E:mn;var Vo=nr==E,rs=mn==E,uo=nr==mn;if(uo&&uc(q)){if(!uc(Q))return!1;Nn=!0,Vo=!1}if(uo&&!Vo)return gt||(gt=new si),Nn||qd(q)?ns(q,Q,ke,ze,tn,gt):Bs(q,Q,nr,ke,ze,tn,gt);if(!(ke&o)){var _i=Vo&&et.call(q,"__wrapped__"),Fo=rs&&et.call(Q,"__wrapped__");if(_i||Fo){var gl=_i?q.value():q,Ra=Fo?Q.value():Q;return gt||(gt=new si),tn(gl,Ra,ke,ze,gt)}}return uo?(gt||(gt=new si),Ta(q,Q,ke,ze,tn,gt)):!1}function lo(q){if(!Ma(q)||tr(q))return!1;var Q=Ph(q)?hn:D;return Q.test(Ti(q))}function ac(q){return dc(q)&&bu(q.length)&&!!oe[ko(q)]}function Ea(q){if(!Co(q))return Qn(q);var Q=[];for(var ke in Object(q))et.call(q,ke)&&ke!="constructor"&&Q.push(ke);return Q}function ns(q,Q,ke,ze,tn,gt){var Nn=ke&o,ur=q.length,nr=Q.length;if(ur!=nr&&!(Nn&&nr>ur))return!1;var mn=gt.get(q);if(mn&&gt.get(Q))return mn==Q;var Vo=-1,rs=!0,uo=ke&i?new es:void 0;for(gt.set(q,Q),gt.set(Q,q);++Vo<ur;){var _i=q[Vo],Fo=Q[Vo];if(ze)var gl=Nn?ze(Fo,_i,Vo,Q,q,gt):ze(_i,Fo,Vo,q,Q,gt);if(gl!==void 0){if(gl)continue;rs=!1;break}if(uo){if(!we(Q,function(Ra,fc){if(!rt(uo,fc)&&(_i===Ra||tn(_i,Ra,ke,ze,gt)))return uo.push(fc)})){rs=!1;break}}else if(!(_i===Fo||tn(_i,Fo,ke,ze,gt))){rs=!1;break}}return gt.delete(q),gt.delete(Q),rs}function Bs(q,Q,ke,ze,tn,gt,Nn){switch(ke){case H:if(q.byteLength!=Q.byteLength||q.byteOffset!=Q.byteOffset)return!1;q=q.buffer,Q=Q.buffer;case B:return!(q.byteLength!=Q.byteLength||!gt(new pn(q),new pn(Q)));case u:case f:case x:return cc(+q,+Q);case p:return q.name==Q.name&&q.message==Q.message;case M:case O:return q==Q+"";case b:var ur=So;case R:var nr=ze&o;if(ur||(ur=Ir),q.size!=Q.size&&!nr)return!1;var mn=Nn.get(q);if(mn)return mn==Q;ze|=i,Nn.set(q,Q);var Vo=ns(ur(q),ur(Q),ze,tn,gt,Nn);return Nn.delete(q),Vo;case I:if(Yi)return Yi.call(q)==Yi.call(Q)}return!1}function Ta(q,Q,ke,ze,tn,gt){var Nn=ke&o,ur=Vs(q),nr=ur.length,mn=Vs(Q),Vo=mn.length;if(nr!=Vo&&!Nn)return!1;for(var rs=nr;rs--;){var uo=ur[rs];if(!(Nn?uo in Q:et.call(Q,uo)))return!1}var _i=gt.get(q);if(_i&&gt.get(Q))return _i==Q;var Fo=!0;gt.set(q,Q),gt.set(Q,q);for(var gl=Nn;++rs<nr;){uo=ur[rs];var Ra=q[uo],fc=Q[uo];if(ze)var jv=Nn?ze(fc,Ra,uo,Q,q,gt):ze(Ra,fc,uo,q,Q,gt);if(!(jv===void 0?Ra===fc||tn(Ra,fc,ke,ze,gt):jv)){Fo=!1;break}gl||(gl=uo=="constructor")}if(Fo&&!gl){var Lh=q.constructor,Zd=Q.constructor;Lh!=Zd&&"constructor"in q&&"constructor"in Q&&!(typeof Lh=="function"&&Lh instanceof Lh&&typeof Zd=="function"&&Zd instanceof Zd)&&(Fo=!1)}return gt.delete(q),gt.delete(Q),Fo}function Vs(q){return hl(q,Lv,lc)}function co(q,Q){var ke=q.__data__;return pt(Q)?ke[typeof Q=="string"?"string":"hash"]:ke.map}function ai(q,Q){var ke=Bn(q,Q);return lo(ke)?ke:void 0}function _a(q){var Q=et.call(q,so),ke=q[so];try{q[so]=void 0;var ze=!0}catch{}var tn=Or.call(q);return ze&&(Q?q[so]=ke:delete q[so]),tn}var lc=Ki?function(q){return q==null?[]:(q=Object(q),me(Ki(q),function(Q){return qn.call(q,Q)}))}:Dh,Zr=ko;(Si&&Zr(new Si(new ArrayBuffer(1)))!=H||ao&&Zr(new ao)!=b||lr&&Zr(lr.resolve())!=T||ki&&Zr(new ki)!=R||Fe&&Zr(new Fe)!=$)&&(Zr=function(q){var Q=ko(q),ke=Q==E?q.constructor:void 0,ze=ke?Ti(ke):"";if(ze)switch(ze){case Lo:return H;case er:return b;case on:return T;case Wt:return R;case jo:return $}return Q});function gu(q,Q){return Q=Q??s,!!Q&&(typeof q=="number"||ae.test(q))&&q>-1&&q%1==0&&q<Q}function pt(q){var Q=typeof q;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?q!=="__proto__":q===null}function tr(q){return!!an&&an in q}function Co(q){var Q=q&&q.constructor,ke=typeof Q=="function"&&Q.prototype||Se;return q===ke}function ml(q){return Or.call(q)}function Ti(q){if(q!=null){try{return De.call(q)}catch{}try{return q+""}catch{}}return""}function cc(q,Q){return q===Q||q!==q&&Q!==Q}var Dv=zs((function(){return arguments})())?zs:function(q){return dc(q)&&et.call(q,"callee")&&!qn.call(q,"callee")},yu=Array.isArray;function $v(q){return q!=null&&bu(q.length)&&!Ph(q)}var uc=qr||$h;function Aa(q,Q){return Ei(q,Q)}function Ph(q){if(!Ma(q))return!1;var Q=ko(q);return Q==m||Q==y||Q==c||Q==A}function bu(q){return typeof q=="number"&&q>-1&&q%1==0&&q<=s}function Ma(q){var Q=typeof q;return q!=null&&(Q=="object"||Q=="function")}function dc(q){return q!=null&&typeof q=="object"}var qd=$e?Ze($e):ac;function Lv(q){return $v(q)?Er(q):Ea(q)}function Dh(){return[]}function $h(){return!1}e.exports=Aa})(jy,jy.exports)),jy.exports}var w7e=v7e();const x7e=Rd(w7e);function S7e(e){let t=e.schema.cached.changeSetIDs||(e.schema.cached.changeSetIDs=Object.create(null)),n=t[e.name];return n==null&&(t[e.name]=n=Object.keys(e.schema.nodes).indexOf(e.name)+1),n}const Ste={encodeCharacter:e=>e,encodeNodeStart:e=>e.type.name,encodeNodeEnd:e=>-S7e(e.type),compareTokens:(e,t)=>e===t};function YN(e,t,n,r,o){for(let i=0,s=0;i<e.childCount;i++){let a=e.child(i),l=s+a.nodeSize,c=Math.max(s,n),u=Math.min(l,r);if(c<u)if(a.isText)for(let f=c;f<u;f++)o.push(t.encodeCharacter(a.text.charCodeAt(f-s),a.marks));else a.isLeaf?o.push(t.encodeNodeStart(a)):(c==s&&o.push(t.encodeNodeStart(a)),YN(a.content,t,Math.max(s+1,c)-s-1,Math.min(l-1,u)-s-1,o),u==l&&o.push(t.encodeNodeEnd(a)));s=l}return o}const k7e=5e3;function C7e(e,t){return Math.min(15,Math.max(2,Math.floor(Math.max(e,t)/10)))}function kte(e,t,n,r=Ste){let o=YN(e,r,n.fromA,n.toA,[]),i=YN(t,r,n.fromB,n.toB,[]),s=0,a=o.length,l=i.length,c=r.compareTokens;for(;s<o.length&&s<i.length&&c(o[s],i[s]);)s++;if(s==o.length&&s==i.length)return[];for(;a>s&&l>s&&c(o[a-1],i[l-1]);)a--,l--;if(a==s||l==s||a==l&&a==s+1)return[n.slice(s,a,s,l)];let u=a-s,f=l-s,p=Math.min(k7e,u+f),m=p+1,y=[],b=[];for(let x=m*2,S=0;S<x;S++)b[S]=-1;for(let x=0;x<=p;x++){for(let S=-x;S<=x;S+=2){let E=b[S+1+p],T=b[S-1+p],A=E<T?T:E+1,M=A+S;for(;A<u&&M<f&&c(o[s+A],i[s+M]);)A++,M++;if(b[S+p]=A,A>=u&&M>=f){let R=[],O=C7e(a-s,l-s),I=-1,L=-1,$=-1,B=-1,H=(V,W,K,z)=>{I>-1&&I<W+O?(I=V,$=K):(I>-1&&R.push(n.slice(I,L,$,B)),I=V,L=W,$=K,B=z)};for(let V=x-1;V>=0;V--){let W=b[S+1+p],K=b[S-1+p];W<K?(S--,A=K+s,M=A+S,H(A,A,M,M+1)):(S++,A=W+s,M=A+S,H(A,A+1,M,M)),b=y[V>>1]}return I>-1&&R.push(n.slice(I,L,$,B)),R.reverse()}}x%2==0&&y.push(b.slice())}return[n.slice(s,a,s,l)]}class un{constructor(t,n){this.length=t,this.data=n}cut(t){return t==this.length?this:new un(t,this.data)}static slice(t,n,r){if(n==r)return un.none;if(n==0&&r==un.len(t))return t;let o=[];for(let i=0,s=0;s<r;i++){let a=t[i],l=s+a.length,c=Math.min(r,l)-Math.max(n,s);c>0&&o.push(a.cut(c)),s=l}return o}static join(t,n,r){if(t.length==0)return n;if(n.length==0)return t;let o=r(t[t.length-1].data,n[0].data);if(o==null)return t.concat(n);let i=t.slice(0,t.length-1);i.push(new un(t[t.length-1].length+n[0].length,o));for(let s=1;s<n.length;s++)i.push(n[s]);return i}static len(t){let n=0;for(let r=0;r<t.length;r++)n+=t[r].length;return n}}un.none=[];class Ga{constructor(t,n,r,o,i,s){this.fromA=t,this.toA=n,this.fromB=r,this.toB=o,this.deleted=i,this.inserted=s}get lenA(){return this.toA-this.fromA}get lenB(){return this.toB-this.fromB}slice(t,n,r,o){return t==0&&r==0&&n==this.toA-this.fromA&&o==this.toB-this.fromB?this:new Ga(this.fromA+t,this.fromA+n,this.fromB+r,this.fromB+o,un.slice(this.deleted,t,n),un.slice(this.inserted,r,o))}static merge(t,n,r){if(t.length==0)return n;if(n.length==0)return t;let o=[];for(let i=0,s=0,a=t[0],l=n[0];;){if(!a&&!l)return o;if(a&&(!l||a.toB<l.fromA)){let c=s?n[s-1].toB-n[s-1].toA:0;o.push(c==0?a:new Ga(a.fromA,a.toA,a.fromB+c,a.toB+c,a.deleted,a.inserted)),a=i++==t.length?null:t[i]}else if(l&&(!a||l.toA<a.fromB)){let c=i?t[i-1].toB-t[i-1].toA:0;o.push(c==0?l:new Ga(l.fromA-c,l.toA-c,l.fromB,l.toB,l.deleted,l.inserted)),l=s++==n.length?null:n[s]}else{let c=Math.min(a.fromB,l.fromA),u=Math.min(a.fromA,l.fromA-(i?t[i-1].toB-t[i-1].toA:0)),f=u,p=Math.min(l.fromB,a.fromB+(s?n[s-1].toB-n[s-1].toA:0)),m=p,y=un.none,b=un.none,x=!1,S=!1;for(;;){let E=a?c>=a.fromB?a.toB:a.fromB:2e8,T=l?c>=l.fromA?l.toA:l.fromA:2e8,A=Math.min(E,T),M=a&&c>=a.fromB,R=l&&c>=l.fromA;if(!M&&!R)break;M&&c==a.fromB&&!x&&(y=un.join(y,a.deleted,r),f+=a.lenA,x=!0),M&&!R&&(b=un.join(b,un.slice(a.inserted,c-a.fromB,A-a.fromB),r),m+=A-c),R&&c==l.fromA&&!S&&(b=un.join(b,l.inserted,r),m+=l.lenB,S=!0),R&&!M&&(y=un.join(y,un.slice(l.deleted,c-l.fromA,A-l.fromA),r),f+=A-c),M&&A==a.toB&&(a=i++==t.length?null:t[i],x=!1),R&&A==l.toA&&(l=s++==n.length?null:n[s],S=!1),c=A}(u<f||p<m)&&o.push(new Ga(u,f,p,m,y,b))}}}}let JN;try{JN=new RegExp("[\\p{Alphabetic}_]","u")}catch{}const E7e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Cp(e){if(e<128)return e>=48&&e<=57||e>=65&&e<=90||e>=79&&e<=122;let t=String.fromCharCode(e);return JN?JN.test(t):t.toUpperCase()!=t.toLowerCase()||E7e.test(t)}function T7e(e,t,n){let r="";function o(i,s,a){for(let l=0,c=0;l<i.childCount;l++){let u=i.child(l),f=c+u.nodeSize,p=Math.max(c,s),m=Math.min(f,a);p<m&&(u.isText?r+=u.text.slice(Math.max(0,s-c),Math.min(u.text.length,a-c)):u.isLeaf?r+=" ":(p==c&&(r+=" "),o(u.content,Math.max(0,p-c-1),Math.min(u.content.size,a-c)),m==f&&(r+=" "))),c=f}}return o(e,t,n),r}const XN=30;function _7e(e,t){let n=[];for(let r=0;r<e.length;r++){let o=e[r].toB,i=r;for(;r<e.length-1&&e[r+1].fromB<=o+XN;)o=e[++r].toB;A7e(e,i,r+1,t,n)}return n}function A7e(e,t,n,r,o){let i=Math.max(0,e[t].fromB-XN),s=Math.min(r.content.size,e[n-1].toB+XN),a=T7e(r.content,i,s);for(let l=t;l<n;l++){let c=l,u=e[l],f=u.lenA,p=u.lenB;for(;l<n-1;){let m=e[l+1],y=!1,b=u.toB==s?!1:Cp(a.charCodeAt(u.toB-1-i));for(let x=u.toB;!y&&x<m.fromB;x++){let S=x==s?!1:Cp(a.charCodeAt(x-i));(!b||!S)&&x!=e[c].fromB&&(y=!0),b=S}if(y)break;f+=m.lenA,p+=m.lenB,u=m,l++}if(p>0&&f>0&&!(p==1&&f==1)){let m=e[c].fromB,y=e[l].toB;if(m<s&&Cp(a.charCodeAt(m-i)))for(;m>i&&Cp(a.charCodeAt(m-1-i));)m--;if(y>i&&Cp(a.charCodeAt(y-1-i)))for(;y<s&&Cp(a.charCodeAt(y-i));)y++;let b=M7e(e.slice(c,l+1),m,y),x=o.length?o[o.length-1]:null;x&&x.toA==b.fromA?o[o.length-1]=new Ga(x.fromA,b.toA,x.fromB,b.toB,x.deleted.concat(b.deleted),x.inserted.concat(b.inserted)):o.push(b)}else for(let m=c;m<=l;m++)o.push(e[m])}return e}function Cw(e,t){return e===t?e:null}function M7e(e,t,n){let r=e[0].fromA-(e[0].fromB-t),o=e[e.length-1],i=o.toA+(n-o.toB),s=un.none,a=un.none,l=(e[0].deleted.length?e[0].deleted:e[0].inserted)[0].data,c=(e[0].inserted.length?e[0].inserted:e[0].deleted)[0].data;for(let u=r,f=t,p=0;;p++){let m=p==e.length?null:e[p],y=m?m.fromA:i,b=m?m.fromB:n;if(y>u&&(s=un.join(s,[new un(y-u,l)],Cw)),b>f&&(a=un.join(a,[new un(b-f,c)],Cw)),!m)break;s=un.join(s,m.deleted,Cw),a=un.join(a,m.inserted,Cw),s.length&&(l=s[s.length-1].data),a.length&&(c=a[a.length-1].data),u=m.toA,f=m.toB}return new Ga(r,i,t,n,s,a)}class Kf{constructor(t,n){this.config=t,this.changes=n}addSteps(t,n,r){let o=[];for(let l=0;l<n.length;l++){let c=Array.isArray(r)?r[l]:r,u=0;n[l].forEach((f,p,m,y)=>{o.push(new Ga(f+u,p+u,m,y,f==p?un.none:[new un(p-f,c)],m==y?un.none:[new un(y-m,c)])),u=y-m-(p-f)})}if(o.length==0)return this;let i=QN(o,this.config.combine),s=Ga.merge(this.changes,i,this.config.combine),a=s;for(let l=0;l<a.length;l++){let c=a[l];if(c.fromA==c.toA||c.fromB==c.toB||!i.some(f=>f.toB>c.fromB&&f.fromB<c.toB))continue;let u=kte(this.config.doc.content,t.content,c,this.config.encoder);u.length==1&&u[0].fromB==0&&u[0].toB==c.toB-c.fromB||(a==s&&(a=s.slice()),u.length==1?a[l]=u[0]:(a.splice(l,1,...u),l+=u.length-1))}return new Kf(this.config,a)}get startDoc(){return this.config.doc}map(t){let n=r=>{let o=t(r);return o===r.data?r:new un(r.length,o)};return new Kf(this.config,this.changes.map(r=>new Ga(r.fromA,r.toA,r.fromB,r.toB,r.deleted.map(n),r.inserted.map(n))))}changedRange(t,n){if(t==this)return null;let r=n&&R7e(n),o=r?r.toB-r.fromB-(r.toA-r.fromA):0;function i(f){return!r||f<=r.fromA?f:f+o}let s=r?r.fromB:2e8,a=r?r.toB:-2e8;function l(f,p=f){s=Math.min(f,s),a=Math.max(p,a)}let c=this.changes,u=t.changes;for(let f=0,p=0;f<c.length&&p<u.length;){let m=c[f],y=u[p];m&&y&&N7e(m,y,i)?(f++,p++):y&&(!m||i(m.fromB)>=y.fromB)?(l(y.fromB,y.toB),p++):(l(i(m.fromB),i(m.toB)),f++)}return s<=a?{from:s,to:a}:null}static create(t,n=(o,i)=>o===i?o:null,r=Ste){return new Kf({combine:n,doc:t,encoder:r},[])}}Kf.computeDiff=kte;function QN(e,t,n=0,r=e.length){if(r==n+1)return[e[n]];let o=n+r>>1;return Ga.merge(QN(e,t,n,o),QN(e,t,o,r),t)}function kB(e){let t=2e8,n=-2e8;for(let r=0;r<e.length;r++){let o=e[r];t!=2e8&&(t=o.map(t,-1),n=o.map(n,1)),o.forEach((i,s,a,l)=>{t=Math.min(t,a),n=Math.max(n,l)})}return t==2e8?null:{from:t,to:n}}function R7e(e){let t=kB(e);if(!t)return null;let n=kB(e.map(r=>r.invert()).reverse());return{fromA:n.from,toA:n.to,fromB:t.from,toB:t.to}}function N7e(e,t,n){return n(e.fromB)==t.fromB&&n(e.toB)==t.toB&&CB(e.deleted,t.deleted)&&CB(e.inserted,t.inserted)}function CB(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n].length!=t[n].length||e[n].data!==t[n].data)return!1;return!0}const I7e=e=>e;function Cte(e,t=I7e){const n=ie.useSyncExternalStore(e.subscribe,ie.useCallback(()=>t(e.getState()),[e,t]),ie.useCallback(()=>t(e.getInitialState()),[e,t]));return ie.useDebugValue(n),n}var O7e=Object.defineProperty,P7e=(e,t,n)=>t in e?O7e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FA=(e,t,n)=>P7e(e,typeof t!="symbol"?t+"":t,n);const EB=e=>{let t;const n=new Set,r=(a,l)=>{const c=typeof a=="function"?a(t):a;if(!Object.is(c,t)){const u=t;t=l??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(f=>f(t,u))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>s,subscribe:a=>(n.add(a),()=>n.delete(a))},s=t=e(r,o,i);return i},TB=e=>e?EB(e):EB;function D7e(e){const{properties:t,required:n,$defs:r,...o}=e.parameters;return{schema:{type:"object",description:e.description,properties:{type:{type:"string",enum:[e.name]},...t},required:["type",...n??[]],additionalProperties:!1,...o},$defs:r}}function Ete(e){const t=e.map(r=>D7e(r)),n={};for(const r of t)for(const o in r.$defs){if(n[o]&&!x7e(n[o],r.$defs[o]))throw new Error(`Duplicate, but different definition for ${o}`);n[o]=r.$defs[o]}return{type:"object",properties:{operations:{type:"array",items:{anyOf:t.map(r=>r.schema)}}},additionalProperties:!1,required:["operations"],$defs:Object.keys(n).length>0?n:void 0}}function $7e(e){return new ReadableStream({async start(t){try{for await(const n of e)t.enqueue(n);t.close()}catch(n){t.error(n)}}})}function yb(e){if(e.locked)throw new Error("Stream (source) is already locked and cannot be iterated.");const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{if(t.locked)throw new Error("Stream is already locked and cannot be iterated again.");const n=t.getReader();return{async next(){const{done:r,value:o}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:o}}}},t}function Tte(e){return yb($7e(e))}async function*L7e(e){var t;let n=0,r=!0,o;for await(const i of e)if((t=i.operations)!=null&&t.length){for(let s=n;s<i.operations.length;s++){const a=i.operations[s];o=a,yield{partialOperation:a,isUpdateToPreviousOperation:s===n&&!r,isPossiblyPartial:s===i.operations.length-1},r=!1}n=i.operations.length-1}if(!o)throw new Error("No operations seen");yield{partialOperation:o,isUpdateToPreviousOperation:!0,isPossiblyPartial:!1}}async function*_te(e,t){let n=!1;for await(const r of e){const o=r.operation;o.ok?(yield{operation:o.value,isUpdateToPreviousOperation:n?!1:r.isUpdateToPreviousOperation,isPossiblyPartial:r.isPossiblyPartial},n=!1):(n=n||!r.isUpdateToPreviousOperation,t?.({...r,operation:o}))}}async function*Ate(e,t){for await(const n of e){const r=t.find(o=>o.name===n.partialOperation.type);if(!r){yield{operation:{ok:!1,error:`No matching function for ${n.partialOperation.type}`},isUpdateToPreviousOperation:n.isUpdateToPreviousOperation,isPossiblyPartial:n.isPossiblyPartial};continue}yield{operation:r.validate(n.partialOperation),isUpdateToPreviousOperation:n.isUpdateToPreviousOperation,isPossiblyPartial:n.isPossiblyPartial}}}async function*j7e(e,t){const n=Ate(e,t);yield*_te(n,r=>{if(!r.isPossiblyPartial)throw new Error("invalid operation: "+r.operation.error)})}async function*z7e(e,t){const n=Ate(e,t);yield*_te(n,r=>{throw new Error("invalid operation: "+r.operation.error)})}async function B7e(e,t){const{_generateObjectOptions:n,...r}=t;if(n&&("output"in n||"schema"in n))throw new Error("Cannot provide output or schema in _generateObjectOptions");const o={output:"object",schema:TP(Ete(e)),mode:r.model.provider==="mistral.chat"||r.model.provider==="google.generative-ai"?"auto":"tool",...r,...n??{}},i=await Bze(o),s=V7e(i.object);if(!s.ok)throw new Error(s.error);let a;return{streamObjectResult:void 0,generateObjectResult:i,get operationsSource(){return a||(a=Tte(z7e(s.value,e))),a},async getGeneratedOperations(){return i.object}}}function V7e(e){if(!e||typeof e!="object"||!("operations"in e)||!Array.isArray(e.operations))return{ok:!1,error:"No operations returned"};const t=e.operations;async function*n(){for(const r of t)yield{partialOperation:r,isUpdateToPreviousOperation:!1,isPossiblyPartial:!1}}return{ok:!0,value:n()}}async function F7e(e,t,n=()=>{}){const{_streamObjectOptions:r,...o}=t;if(r&&("output"in r||"schema"in r))throw new Error("Cannot provide output or schema in _streamObjectOptions");const i={output:"object",schema:TP(Ete(e)),mode:o.model.provider==="mistral.chat"||o.model.provider==="google.generative-ai"?"auto":"tool",...o,...t._streamObjectOptions??{}},s=Gze(i);let a;const[l,c]=s.fullStream.tee(),u=(async()=>{let f={operations:[]};const p=yb(G7e(c));for await(const m of p)m&&typeof m=="object"&&"operations"in m&&(f=m);return f})();return{streamObjectResult:s,generateObjectResult:void 0,get operationsSource(){return a||(a=Tte(j7e(L7e(H7e(U7e(yb(l)),n)),e))),a},async getGeneratedOperations(){return u}}}async function*H7e(e,t){let n=!0;for await(const r of e)n&&(t(),n=!1),yield r}function U7e(e){return yb(e.pipeThrough(new TransformStream({transform(t,n){switch(t.type){case"object":n.enqueue(t.object);break;case"text-delta":case"finish":break;case"error":n.error(t.error);break;default:{const r=t;throw new Error(`Unsupported chunk type: ${r}`)}}}})))}function G7e(e){return yb(e.pipeThrough(new TransformStream({transform(t,n){switch(t.type){case"object":n.enqueue(t.object);break;case"text-delta":case"finish":break;case"error":break;default:{const r=t;throw new Error(`Unsupported chunk type: ${r}`)}}}})))}function LP(e){return(e.type==="paragraph"||!e.type)&&!e.content||Array.isArray(e.content)&&e.content.length===0}class q7e{constructor(t,n,r){this.messages=t,this.llmResult=n,this.streamTools=r}async*applyToolCalls(){let t=this.llmResult.operationsSource;for(const n of this.streamTools)t=n.execute(t);yield*t}async execute(){for await(const t of this.applyToolCalls());}async _logToolCalls(){for await(const t of this.llmResult.operationsSource)console.log(JSON.stringify(t,null,2))}}function Z7e(e,t,n=!0,r=!0){let o=0,i=e.length;if(n)for(;o<i&&t(e[o]);)o++;if(r)for(;i>o&&t(e[i-1]);)i--;return e.slice(o,i)}function jP(e,t){return Z7e(e,n=>LP(n)&&t?.cursorBlockId!==n.id,t?.trimStart??!1,t?.trimEnd??!0)}function W7e(e,t){const n=e.getTextCursorPosition(),r=[];for(const o of t){const i=o.id===n.block.id;r.push({id:o.id,block:o.block}),i&&r.push({cursor:!0})}return r}async function eI(e,t){return await Promise.all(e.map(async n=>({id:n.id,block:await t(n)})))}function bk(e){return e.flatMap(t=>[{...t,children:[]},...bk(t.children)])}function Mte(e){return e.map(t=>typeof t=="object"&&t&&"id"in t?{...t,id:`${t.id}$`}:t)}async function Rte(e,t){const n=e.getTextCursorPosition().block.id,r=jP(e.document,{cursorBlockId:n}),o=await eI(bk(r),async s=>e.blocksToHTMLLossy([s])),i=W7e(e,o).filter(s=>"cursor"in s||!(t.excludeBlockIds||[]).includes(s.id));return{htmlBlocks:Mte(i)}}async function Nte(e,t){const n=await eI(bk(t.selectedBlocks),async r=>e.blocksToHTMLLossy([r]));return{htmlSelectedBlocks:Mte(n),htmlDocument:(await eI(bk(e.document),async r=>e.blocksToHTMLLossy([r]))).map(({block:r})=>({block:r}))}}function K7e(e){return[{role:"system",content:"You're manipulating a selected part of a text document using HTML blocks. \n      Make sure to follow the json schema provided and always include the trailing $ in ids. \n      List items are 1 block with 1 list item each, so block content `<ul><li>item1</li></ul>` is valid, but `<ul><li>item1</li><li>item2</li></ul>` is invalid. We'll merge them automatically.\n      This is the selection as an array of html blocks:"},{role:"system",content:JSON.stringify(e.htmlSelectedBlocks)},{role:"system",content:"This is the entire document (INCLUDING the selected text), find the selected text in there to understand the context:"},{role:"system",content:JSON.stringify(e.htmlDocument)},{role:"system",content:"The user asks you to do the following:"},{role:"user",content:e.userPrompt}]}function Y7e(e){return[{role:"system",content:"You're manipulating a text document using HTML blocks. \n        Make sure to follow the json schema provided. When referencing ids they MUST be EXACTLY the same (including the trailing $). \n        List items are 1 block with 1 list item each, so block content `<ul><li>item1</li></ul>` is valid, but `<ul><li>item1</li><li>item2</li></ul>` is invalid. We'll merge them automatically.\n        For code blocks, you can use the `data-language` attribute on a code block to specify the language.\n        This is the document as an array of html blocks (the cursor is BETWEEN two blocks as indicated by cursor: true):"},{role:"system",content:JSON.stringify(e.htmlBlocks)},{role:"system",content:'First, determine what part of the document the user is talking about. You SHOULD probably take cursor info into account if needed.\n       EXAMPLE: if user says "below" (without pointing to a specific part of the document) he / she probably indicates the block(s) after the cursor. \n       EXAMPLE: If you want to insert content AT the cursor position (UNLESS indicated otherwise by the user), \n       then you need `referenceId` to point to the block before the cursor with position `after` (or block below and `before`).\n      \n      '+(e.isEmptyDocument?"Because the document is empty, first update the empty block before adding new blocks.":"Prefer updating existing blocks over removing and adding (but this also depends on the user's question).")},{role:"system",content:"The user asks you to do the following:"},{role:"user",content:e.userPrompt}]}const J7e=async(e,t)=>{const n=jP(e.document).length===0;if(t.selectedBlocks){const r=await Nte(e,{selectedBlocks:t.selectedBlocks});return t.previousMessages?[...t.previousMessages,{role:"system",content:`After processing the previous response, this is the updated selection.
            Ignore previous documents, you MUST issue operations against this latest version of the document:`},{role:"system",content:JSON.stringify(r.htmlSelectedBlocks)},{role:"system",content:"This is the updated entire document:"},{role:"system",content:JSON.stringify(r.htmlDocument)},{role:"system",content:`You SHOULD use "update" operations to update blocks you added / edited previously 
          (unless the user explicitly asks you otherwise to add or delete other blocks).
          
          The user now asks you to do the following:`},{role:"user",content:t.userPrompt}]:K7e({...r,userPrompt:t.userPrompt})}else{const r=await Rte(e,t);return t.previousMessages?[...t.previousMessages,{role:"system",content:`After processing the previous response, this is the updated document.
            Ignore previous documents, you MUST issue operations against this latest version of the document:`},{role:"system",content:JSON.stringify(r.htmlBlocks)},{role:"system",content:`You SHOULD use "update" operations to update blocks you added / edited previously 
          (unless the user explicitly asks you otherwise to add or delete other blocks).
          
          The user now asks you to do the following:`},{role:"user",content:t.userPrompt}]:Y7e({...r,userPrompt:t.userPrompt,isEmptyDocument:n})}};function X7e(e){let t,n=!1;return e.descendants((r,o)=>n?!1:(r.isText&&(n=!0,t=o),!0)),t}function vk(e){var t;const n=ro(e),{modification:r}=n.marks,o=[],i=new Nd(e.before);for(let s=0;s<e.steps.length;s++){const a=e.steps[s],l=new Qf(e.mapping.maps.slice(0,s)).invert();if(a.structure){if(a instanceof Pn){if(a.to!==a.from+1||a.slice.openStart!==0||a.slice.openEnd!==1||a.slice.content.size!==2)throw new Error("Structure change is not in expected format (ReplaceStep)")}else if(a instanceof vr){if(a.insert!==1||a.slice.size!==2||a.gapTo!==a.to-1||a.gapFrom!==a.from+1)throw new Error("Structure change is not in expected format (ReplaceAroundStep)")}else throw new Error("Step is not a ReplaceStep or ReplaceAroundStep");const S=l.map(a.from),E=a.slice.content.firstChild,T=i.doc.resolve(i.mapping.map(S)).nodeAfter;let A=E.marks||[];E.type!==T.type&&(A=r.create({type:"nodeType",previousValue:T.type.name,newValue:E.type.name}).addToSet(A));const M=new Set([...Object.keys(E.attrs),...Object.keys(T.attrs)]);for(const O of M)E.attrs[O]!==T.attrs[O]&&(A=r.create({type:"attr",attrName:O,previousValue:T.attrs[O],newValue:E.attrs[O]}).addToSet(A));const R=i.steps.length;i.setNodeMarkup(i.mapping.map(S),E.type,E.attrs,A),o.push({prosemirrorSteps:i.steps.slice(R),selection:void 0,type:"replace"});continue}if(!(a instanceof Pn))throw new Error("Step is not a ReplaceStep");const c=l.map(a.from),u=l.map(a.to);if(a.slice.openStart>0||a.slice.openEnd>0)throw new Error("Slice has openStart or openEnd > 0, but structure=false");o.push({prosemirrorSteps:[],selection:{anchor:i.mapping.map(c),head:i.mapping.map(u)},type:"select"});const f=a.slice.content.textBetween(0,a.slice.size),p=f===i.doc.textBetween(i.mapping.map(c),i.mapping.map(u));let m;if(p)m=a.slice.content.size;else if(f.length===0)m=a.slice.content.size;else{const S=X7e(a.slice.content);if(S===void 0)throw new Error("unexpected: no first character found");m=S+1}let y=i.mapping.map(u);const b=i.mapping.map(u);let x=!0;for(let S=m;S<=a.slice.content.size;S++){const E=x&&c!==u,T=i.steps.length;if(E){const R=i.doc.resolve(i.mapping.map(c));(t=R.nodeAfter)!=null&&t.isBlock&&i.addNodeMark(R.pos,n.mark("deletion",{})),i.addMark(R.pos,y,n.mark("deletion",{})),y=i.mapping.map(u)}const A=new Te(a.slice.content.cut(0,S),0,0);i.replace(b,y,A).addMark(b,b+A.content.size,n.mark("insertion",{})),i.doc.nodesBetween(b,b+A.content.size,(R,O)=>O<b||O>b+A.content.size?!0:(R.isBlock&&i.addNodeMark(O,n.mark("insertion",{})),!1)),y=i.mapping.slice(T).map(y);const M=Ve.near(i.doc.resolve(b+A.content.size),-1);o.push({prosemirrorSteps:i.steps.slice(T),selection:{anchor:M.from,head:M.from},type:E?"replace":"insert"}),x=!1}}return o}async function zP(e){const t=Math.random()*.3+.85;if(e.type==="select")await new Promise(n=>setTimeout(n,100*t));else if(e.type==="insert")await new Promise(n=>setTimeout(n,10*t));else if(e.type==="replace")await new Promise(n=>setTimeout(n,200*t));else throw new ma(e.type)}function BP(e,t){e.setMeta("addToHistory",!1),t.selection&&e.setMeta("aiAgent",{selection:{anchor:t.selection.anchor,head:t.selection.head}});for(const n of t.prosemirrorSteps)if(e.maybeStep(n).failed)throw new Error("failed to apply step");return e}function Q7e(e,t,n){const r=new Nd(t);for(const s of e){const a=new Pn(r.mapping.map(s.fromA),r.mapping.map(s.toA),n.slice(s.fromB,s.toB));r.step(a)}const o=r.mapping.invert();let i=r.doc.content.findDiffStart(n.content);for(;i!==null;){const s=n.resolve(i).nodeAfter,a=r.doc.resolve(i).nodeAfter;if(!s||!a)throw new Error("diffNode not found");const l=!s.isLeaf&&s.content.eq(a.content),c=l?1:Math.min(s.nodeSize,a.nodeSize),u=i+c,f=o.map(i),p=o.map(u);let m=e.length;for(let b=0;b<e.length;b++)if(e[b].fromA>=p){m=b;break}e.splice(m,0,{fromA:f,toA:p,fromB:i,toB:u,deleted:[],inserted:[],type:l?"node-type-or-attr-update":"mark-update"}),r.step(new Pn(i,u,n.slice(i,u),l));const y=r.doc.content.findDiffStart(n.content);if(y===i)throw new Error("diffStart not moving");i=y}return e}const _B=(e,t)=>{const n=new Set,r=new Set;e.descendants(i=>{i.type.name==="tableCell"&&n.add(JSON.stringify(i.toJSON()))}),t.descendants(i=>{i.type.name==="tableCell"&&r.add(JSON.stringify(i.toJSON()))});const o=new Set([...n].filter(i=>r.has(i)));return{encodeCharacter:i=>i,encodeNodeStart:i=>{if(i.type.name==="tableCell"){const s=JSON.stringify(i.toJSON());return o.has(s)?s:i.type.name}return i.type.name},encodeNodeEnd:i=>{if(i.type.name==="tableCell"){const s=JSON.stringify(i.toJSON());return o.has(s)?s:-1}return-1},compareTokens:(i,s)=>i===s}};function VP(e,t,n=!1,r,o){const i=Fi(e.id,t),s=new Nd(t);O4(s,i.posBeforeNode,e.block,r,o);let a=s.doc,l=Kf.create(t,void 0,_B(t,a));if(l=l.addSteps(a,s.mapping.maps,0),n&&l.changes.length>0){const f=l.changes[l.changes.length-1],p=f.toA-f.fromA,m=f.toB-f.fromB;if(p>m){const y=t.slice(f.fromA+m,f.toA);s.step(new Pn(f.toB,f.toB,y)),a=s.doc,l=Kf.create(l.startDoc,void 0,_B(l.startDoc,a)),l=l.addSteps(a,s.mapping.maps,0)}}const c=[],u=_7e(l.changes,a);for(let f=0;f<u.length;f++){const p=u[f],m=a.slice(p.fromB,p.toB);if(m.openEnd===1&&m.openStart===0&&(p.type="node-type-or-attr-update",m.size>2)){const y={fromA:p.fromA,toA:p.fromA+1,fromB:p.fromB,toB:p.fromB+1,deleted:[],inserted:[],type:"node-type-or-attr-update"},b={fromA:p.fromA+1,toA:p.toA,fromB:p.fromB+1,toB:p.toB,deleted:[],inserted:[]};u.splice(f,1,y,b),f++}}Q7e(u,t,a);for(let f=0;f<u.length;f++){const p=u[f],m=a.slice(p.fromB,p.toB);if(m.openEnd>0&&m.size>1)throw new Error("unexpected, openEnd > 0 and size > 1, this should have been split into two steps");f===u.length-1&&n&&p.type==="mark-update"||c.push(new Pn(p.fromA,p.toA,m,p.type==="node-type-or-attr-update"))}return c}function eBe(e,t){if(!e||!Array.isArray(e)||e.length===0)return{ok:!1,error:"blocks is required"};const n=[];for(const r of e){const o=t(r);if(!o.ok)return{ok:!1,error:`Invalid block: ${o.error}`};n.push(o.value)}return{ok:!0,value:n}}function tBe(e){return(t,n)=>{const r=typeof e.schema=="function"?e.schema(t):e.schema;return{name:"add",description:e.description,parameters:{type:"object",properties:{referenceId:{type:"string",description:"MUST be an id of a block in the document"},position:{type:"string",enum:["before","after"],description:"`after` to add blocks AFTER (below) the block with `referenceId`, `before` to add the block BEFORE (above)"},blocks:{items:r.block,type:"array"}},required:["referenceId","position","blocks"],$defs:r.$defs},validate:o=>{if(o.type!=="add")return{ok:!1,error:"invalid operation type"};if(o.position!=="before"&&o.position!=="after")return{ok:!1,error:"invalid position"};if(!o.referenceId||!o.blocks)return{ok:!1,error:"referenceId and blocks are required"};let i=o.referenceId;if(n.idsSuffixed){if(!(i!=null&&i.endsWith("$")))return{ok:!1,error:"referenceId must end with $"};i=i.slice(0,-1)}if(!t.getBlock(i))return{ok:!1,error:"referenceId not found"};const s=eBe(o.blocks,a=>e.validateBlock(a,t));return s.ok?{ok:!0,value:{type:o.type,referenceId:i,position:o.position,blocks:s.value}}:s},execute:async function*(o){var i;let s=[];const a={};for await(const l of o){if(l.isUpdateToPreviousOperation||(s=[]),l.operation.type!=="add"){yield l;continue}const c=l.operation,u=await e.toJSONToolCall(t,{...l,operation:c});if(u&&!(l.isPossiblyPartial&&LP(u.blocks[u.blocks.length-1]))){for(let f=0;f<u.blocks.length;f++){const p=u.blocks[f],m=t.prosemirrorState.tr;let y=[];if(f<s.length){const b=await e.rebaseTool(s[f],t),x=VP({id:s[f],block:p},b.doc,!1).map(S=>S.map(b.invertMap));for(const S of x)m.step(S.map(m.mapping));y=vk(m),y=y.filter(S=>S.type!=="select")}else{const b=c.position==="after"?a[c.referenceId]:void 0,x=DW(m,[p],f>0?s[f-1]:b||c.referenceId,f>0?"after":c.position);s.push(...x.map(S=>S.id)),y=vk(m)}y.find(b=>b.type==="replace");for(const b of y)n.withDelays&&await zP(b),t.transact(x=>{BP(x,b)}),(i=n.onBlockUpdate)==null||i.call(n,s[f])}l.isPossiblyPartial||c.position==="after"&&(a[c.referenceId]=s[s.length-1])}}}}}}function nBe(e){return(t,n)=>{const r=typeof e.schema=="function"?e.schema(t):e.schema;return{name:"update",description:e.description,parameters:{type:"object",properties:{id:{type:"string",description:"id of block to update"},block:r.block},required:["id","block"],$defs:r.$defs},validate:o=>{if(o.type!=="update")return{ok:!1,error:"invalid operation type"};if(!o.id)return{ok:!1,error:"id is required"};let i=o.id;if(n.idsSuffixed){if(!(i!=null&&i.endsWith("$")))return{ok:!1,error:"id must end with $"};i=i.slice(0,-1)}if(!o.block)return{ok:!1,error:"block is required"};const s=t.getBlock(i);if(!s)return console.error("BLOCK NOT FOUND",i),{ok:!1,error:"block not found"};const a=e.validateBlock(o.block,t,s.type);return a.ok?{ok:!0,value:{type:o.type,id:i,block:a.value}}:a},execute:async function*(o){var i;let s=50;const a=n.updateSelection?{from:eN(t,n.updateSelection.from),to:eN(t,n.updateSelection.to)}:void 0;for await(const l of o){if(l.operation.type!=="update"){yield l;continue}const c=l.operation;if(l.isPossiblyPartial){const E=JSON.stringify(c.block).length;if(E<s)continue;s=E+50}else s=50;const u=await e.rebaseTool(c.id,t),f=a?u.invertMap.invert().map(a.from()):void 0,p=a?u.invertMap.invert().map(a.to()):void 0,m=await e.toJSONToolCall(t,l);if(!m)continue;const y=VP(m,u.doc,l.isPossiblyPartial,f,p);if(y.length===1&&l.isPossiblyPartial)continue;const b=y.map(E=>E.map(u.invertMap)),x=new Nd(t.prosemirrorState.doc);for(const E of b)x.step(E.map(x.mapping));const S=vk(x);for(const E of S)n.withDelays&&await zP(E),t.transact(T=>{BP(T,E)}),(i=n.onBlockUpdate)==null||i.call(n,c.id)}}}}}const rBe=(e,t)=>({name:"delete",description:"Delete a block",parameters:{type:"object",properties:{id:{type:"string",description:"id of block to delete"}},required:["id"]},validate:n=>{if(n.type!=="delete")return{ok:!1,error:"invalid operation type"};if(!n.id)return{ok:!1,error:"id is required"};let r=n.id;if(t.idsSuffixed){if(!(r!=null&&r.endsWith("$")))return{ok:!1,error:"id must end with $"};r=r.slice(0,-1)}return e.getBlock(r)?{ok:!0,value:{type:"delete",id:r}}:{ok:!1,error:"block not found"}},execute:async function*(n){var r;for await(const o of n){if(o.operation.type!=="delete"){yield o;continue}const i=o.operation,s=e.prosemirrorState.tr;qR(s,[i.id],[]);const a=vk(s);for(const l of a)t.withDelays&&await zP(l),e.transact(c=>{BP(c,l)}),(r=t.onBlockUpdate)==null||r.call(t,i.id)}}});function AB(e){const t=e.lastIndexOf("<"),n=e.lastIndexOf(">");let r=e;if(t>n&&(r=e.substring(0,t),!r.trim()))return;const o=r.match(/&[a-zA-Z0-9]*$/);o&&(r=r.substring(0,r.length-o[0].length));const i=new DOMParser().parseFromString(`<div>${r}</div>`,"text/html").body.firstChild;return i?i.innerHTML:""}function oBe(e){let t;if(aQ(e.prosemirrorState,n=>{t=n}),!t)throw new Error("applySuggestionsTr is not set");return t}function iBe(e,t){const n=t.mapping.invert();return{doc:t.doc,tr:()=>new Nd(t.doc),invertMap:n,rebaseTr:r=>{if(r.steps.length===0)throw new Error("No steps to apply");let o=e.prosemirrorState.tr;for(const i of r.steps){const s=i.map(n);if(!s)throw new Error("Step is not mapped");o=o.step(s)}return o}}}async function MB(e,t){var n;const r=oBe(t),o=lK(r.doc,e);if(!o)throw new Error("block not found");const i=await t.blocksToHTMLLossy([{...o,children:[]}]),s=(n=window.__TEST_OPTIONS)==null?void 0:n.mockID,a=await t.tryParseHTMLToBlocks(i);if(window.__TEST_OPTIONS&&(window.__TEST_OPTIONS.mockID=s),a.length!==1)throw new Error("html diff invalid block count");const l=a[0];if(l.id=e,VP({id:e,block:l},r.doc).length)throw new Error("html diff");return iBe(t,r)}function RB(e){return typeof e!="string"?{ok:!1,error:"block must be a string"}:{ok:!0,value:e}}const HA={add:tBe({description:"Insert new blocks",schema:{block:{type:"string",description:"html of block (MUST be a single HTML element)"}},validateBlock:RB,rebaseTool:MB,toJSONToolCall:async(e,t)=>{var n;const r=(n=window.__TEST_OPTIONS)==null?void 0:n.mockID,o=(await Promise.all(t.operation.blocks.map(async i=>{const s=t.isPossiblyPartial?AB(i):i;return s?(await e.tryParseHTMLToBlocks(s)).map(a=>(delete a.id,a)):[]}))).flat();if(window.__TEST_OPTIONS&&(window.__TEST_OPTIONS.mockID=r),o.length!==0)return{...t.operation,blocks:o}}}),update:nBe({description:"Update a block",schema:{block:{type:"string",description:"html of block (MUST be a single HTML element)"}},validateBlock:RB,rebaseTool:MB,toJSONToolCall:async(e,t)=>{const n=t.isPossiblyPartial?AB(t.operation.block):t.operation.block;if(!n)return;const r=(await e.tryParseHTMLToBlocks(n))[0];return window.__TEST_OPTIONS&&(window.__TEST_OPTIONS.mockID=void 0),delete r.id,{...t.operation,block:r}}}),delete:rBe};function sBe(e,t,n,r,o){const i={add:!0,update:!0,delete:!0,...n};return[...i.update?[HA.update(e,{idsSuffixed:!0,withDelays:t,updateSelection:r,onBlockUpdate:o})]:[],...i.add?[HA.add(e,{idsSuffixed:!0,withDelays:t,onBlockUpdate:o})]:[],...i.delete?[HA.delete(e,{idsSuffixed:!0,withDelays:t,onBlockUpdate:o})]:[]]}const Ite={getStreamTools:sBe,defaultPromptBuilder:J7e,promptHelpers:{getDataForPromptNoSelection:Rte,getDataForPromptWithSelection:Nte}};async function aBe(e,t){const{userPrompt:n,useSelection:r,deleteEmptyCursorBlock:o,stream:i,onStart:s,withDelays:a,dataFormat:l,previousResponse:c,...u}={maxRetries:2,deleteEmptyCursorBlock:!0,stream:!0,withDelays:!0,dataFormat:Ite,...t},f=t.promptBuilder??l.defaultPromptBuilder,p=l.getStreamTools,m=r?void 0:e.getTextCursorPosition().block,y=m&&o&&LP(m)&&jP(e.document).length>0?m.id:void 0,b=r?e.getSelectionCutBlocks():void 0;let x;c&&(x=c.messages.map(A=>A.role==="user"&&typeof A.content=="string"?{role:"system",content:`USER_MESSAGE: ${A.content}`}:A),x.push({role:"system",content:`ASSISTANT_MESSAGE: These are the operations returned by a previous LLM call: 
`+JSON.stringify(await c.llmResult.getGeneratedOperations())}));const S=await f(e,{selectedBlocks:b?.blocks,userPrompt:n,excludeBlockIds:y?[y]:void 0,previousMessages:x}),E=p(e,a,t.defaultStreamTools,b?{from:b._meta.startPos,to:b._meta.endPos}:void 0,t.onBlockUpdate);let T;return i?T=await F7e(E,{messages:S,...u},()=>{y&&e.removeBlocks([y]),s?.()}):(T=await B7e(E,{messages:S,...u}),y&&e.removeBlocks([y]),s?.()),new q7e(S,T,E)}const lBe={html:Ite},NB=new Bt("blocknote-agent-cursor");function cBe(e){return new St({key:NB,view:t=>({}),state:{init:()=>({selection:void 0}),apply:(t,n)=>{const r=t.getMeta("aiAgent");return r?{selection:r.selection}:{selection:void 0}}},props:{decorations:t=>{const{doc:n}=t,{selection:r}=NB.getState(t),o=[];if(!r)return Rt.create(n,[]);o.push(Gt.widget(r.head,()=>uBe(e),{key:"agent-cursor",side:10}));const i=Math.min(r.anchor,r.head),s=Math.max(r.anchor,r.head);return o.push(Gt.inline(i,s,C4(e),{inclusiveEnd:!0,inclusiveStart:!1})),Rt.create(n,o)}}})}const uBe=e=>{const t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base"),t.setAttribute("data-active","true");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${e.color}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${e.color}`),r.insertBefore(document.createTextNode(e.name),null),n.insertBefore(r,null),t.insertBefore(document.createTextNode(""),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode(""),null),t},dBe=new Bt("blocknote-ai-plugin");let Ote=class extends no{constructor(t,n){super(),FA(this,"previousRequestOptions"),FA(this,"_store",TB()(r=>({aiMenuState:"closed"}))),FA(this,"options"),this.editor=t,this.options=TB()(r=>({dataFormat:lBe.html,stream:!0,...n})),this.addProsemirrorPlugin(new St({key:dBe,filterTransaction:r=>{var o;const i=this.store.getState().aiMenuState;return!(i!=="closed"&&i.status==="ai-writing"&&(o=r.getMeta(Zq))!=null&&o.fixTables)}})),this.addProsemirrorPlugin(S$e()),this.addProsemirrorPlugin(cBe(n.agentCursor||{name:"AI",color:"#8bc6ff"}))}static key(){return"ai"}get store(){return this._store}openAIMenuAtBlock(t){this.editor.setForceSelectionVisible(!0),this.editor.isEditable=!1,this._store.setState({aiMenuState:{blockId:t,status:"user-input"}})}closeAIMenu(){this.previousRequestOptions=void 0,this._store.setState({aiMenuState:"closed",llmResponse:void 0}),this.editor.setForceSelectionVisible(!1),this.editor.isEditable=!0,this.editor.focus()}acceptChanges(){var t;const n=this.editor.prosemirrorState.doc;this.editor.exec((r,o)=>j7(r,i=>{o?.(i.setMeta("addToHistory",!1))})),this.editor.exec((r,o)=>{const i=r.tr;i.replace(0,i.doc.content.size,new Te(pe.from(n),0,0));const s=r.apply(i);return aQ(s,a=>{o?.(i.replace(0,i.doc.content.size,new Te(pe.from(a.doc),0,0)))})}),(t=this.editor.forkYDocPlugin)==null||t.merge({keepChanges:!0}),this.closeAIMenu()}rejectChanges(){var t;this.editor.exec((n,r)=>j7(n,o=>{r?.(o.setMeta("addToHistory",!1))})),(t=this.editor.forkYDocPlugin)==null||t.merge({keepChanges:!1}),this.closeAIMenu()}async retry(){const t=this.store.getState().aiMenuState;if(t==="closed"||t.status!=="error"||!this.previousRequestOptions)throw new Error("retry() is only valid when a previous response failed");if(t.error instanceof pQ||t.error instanceof WN)return this.callLLM(this.previousRequestOptions);{const n=t.error instanceof Error?t.error.message:String(t.error);return this.callLLM({userPrompt:`An error occured: ${n}
            Please retry the previous user request.`})}}setAIResponseStatus(t){const n=this.store.getState().aiMenuState;if(n!=="closed")if(t==="ai-writing"&&this.editor.setForceSelectionVisible(!1),typeof t=="object"){if(t.status!=="error")throw new ma(t.status);this._store.setState({aiMenuState:{status:t.status,error:t.error,blockId:n.blockId}})}else this._store.setState({aiMenuState:{status:t,blockId:n.blockId}})}async callLLM(t){var n;this.setAIResponseStatus("thinking"),(n=this.editor.forkYDocPlugin)==null||n.fork();let r;try{const o={...this.options.getState(),...t,previousResponse:this.store.getState().llmResponse};this.previousRequestOptions=o,r=await aBe(this.editor,{...o,onStart:()=>{var i;this.setAIResponseStatus("ai-writing"),(i=t.onStart)==null||i.call(t)},onBlockUpdate:i=>{var s;this._store.setState({aiMenuState:{blockId:i,status:"ai-writing"}}),(s=t.onBlockUpdate)==null||s.call(t,i)}}),this._store.setState({llmResponse:r}),await r.execute(),this.setAIResponseStatus("user-reviewing")}catch(o){this.setAIResponseStatus({status:"error",error:o}),console.warn("Error calling LLM",o)}return r}};function fBe(e){return t=>new Ote(t,e)}function Rh(e){return e.extension(Ote)}var Pte={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IB=ie.createContext&&ie.createContext(Pte),hBe=["attr","size","title"];function pBe(e,t){if(e==null)return{};var n=mBe(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mBe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wk.apply(this,arguments)}function OB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OB(Object(n),!0).forEach(function(r){gBe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gBe(e,t,n){return t=yBe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yBe(e){var t=bBe(e,"string");return typeof t=="symbol"?t:t+""}function bBe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dte(e){return e&&e.map((t,n)=>ie.createElement(t.tag,xk({key:n},t.attr),Dte(t.child)))}function sl(e){return t=>ie.createElement(vBe,wk({attr:xk({},e.attr)},t),Dte(e.child))}function vBe(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=pBe(e,hBe),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),ie.createElement("svg",wk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:xk(xk({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&ie.createElement("title",null,i),e.children)};return IB!==void 0?ie.createElement(IB.Consumer,null,n=>t(n)):t(Pte)}function $te(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function PB(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.8492 11.6983L17.1421 10.9912L7.24264 20.8907H3V16.648L14.3137 5.33432L19.9706 10.9912C20.3611 11.3817 20.3611 12.0149 19.9706 12.4054L12.8995 19.4765L11.4853 18.0622L17.8492 11.6983ZM15.7279 9.57696L14.3137 8.16274L5 17.4765V18.8907H6.41421L15.7279 9.57696ZM18.5563 2.50589L21.3848 5.33432C21.7753 5.72484 21.7753 6.35801 21.3848 6.74853L19.9706 8.16274L15.7279 3.9201L17.1421 2.50589C17.5327 2.11537 18.1658 2.11537 18.5563 2.50589Z"},child:[]}]})(e)}function wBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15.1986 9.94447C14.7649 9.5337 14.4859 8.98613 14.4085 8.39384L14.0056 5.31138L11.275 6.79724C10.7503 7.08274 10.1433 7.17888 9.55608 7.06948L6.49998 6.50015L7.06931 9.55625C7.17871 10.1435 7.08257 10.7505 6.79707 11.2751L5.31121 14.0057L8.39367 14.4086C8.98596 14.4861 9.53353 14.7651 9.94431 15.1987L12.0821 17.4557L13.4178 14.6486C13.6745 14.1092 14.109 13.6747 14.6484 13.418L17.4555 12.0823L15.1986 9.94447ZM15.2238 15.5079L13.0111 20.1581C12.8687 20.4573 12.5107 20.5844 12.2115 20.442C12.1448 20.4103 12.0845 20.3665 12.0337 20.3129L8.49229 16.5741C8.39749 16.474 8.27113 16.4096 8.13445 16.3918L3.02816 15.7243C2.69958 15.6814 2.46804 15.3802 2.51099 15.0516C2.52056 14.9784 2.54359 14.9075 2.5789 14.8426L5.04031 10.3192C5.1062 10.1981 5.12839 10.058 5.10314 9.92253L4.16 4.85991C4.09931 4.53414 4.3142 4.22086 4.63997 4.16017C4.7126 4.14664 4.78711 4.14664 4.85974 4.16017L9.92237 5.10331C10.0579 5.12855 10.198 5.10637 10.319 5.04048L14.8424 2.57907C15.1335 2.42068 15.4979 2.52825 15.6562 2.81931C15.6916 2.88421 15.7146 2.95507 15.7241 3.02833L16.3916 8.13462C16.4095 8.2713 16.4739 8.39766 16.5739 8.49245L20.3127 12.0338C20.5533 12.2617 20.5636 12.6415 20.3357 12.8821C20.2849 12.9357 20.2246 12.9795 20.1579 13.0112L15.5078 15.224C15.3833 15.2832 15.283 15.3835 15.2238 15.5079ZM16.0206 17.435L17.4348 16.0208L21.6775 20.2634L20.2633 21.6776L16.0206 17.435Z"},child:[]}]})(e)}function xBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function SBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 18H16.5C17.8807 18 19 16.8807 19 15.5C19 14.1193 17.8807 13 16.5 13H3V11H16.5C18.9853 11 21 13.0147 21 15.5C21 17.9853 18.9853 20 16.5 20H15V22L11 19L15 16V18ZM3 4H21V6H3V4ZM9 18V20H3V18H9Z"},child:[]}]})(e)}function kBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function CBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M6.23509 6.45329C4.85101 7.89148 4 9.84636 4 12C4 16.4183 7.58172 20 12 20C13.0808 20 14.1116 19.7857 15.0521 19.3972C15.1671 18.6467 14.9148 17.9266 14.8116 17.6746C14.582 17.115 13.8241 16.1582 12.5589 14.8308C12.2212 14.4758 12.2429 14.2035 12.3636 13.3943L12.3775 13.3029C12.4595 12.7486 12.5971 12.4209 14.4622 12.1248C15.4097 11.9746 15.6589 12.3533 16.0043 12.8777C16.0425 12.9358 16.0807 12.9928 16.1198 13.0499C16.4479 13.5297 16.691 13.6394 17.0582 13.8064C17.2227 13.881 17.428 13.9751 17.7031 14.1314C18.3551 14.504 18.3551 14.9247 18.3551 15.8472V15.9518C18.3551 16.3434 18.3168 16.6872 18.2566 16.9859C19.3478 15.6185 20 13.8854 20 12C20 8.70089 18.003 5.8682 15.1519 4.64482C14.5987 5.01813 13.8398 5.54726 13.575 5.91C13.4396 6.09538 13.2482 7.04166 12.6257 7.11976C12.4626 7.14023 12.2438 7.12589 12.012 7.11097C11.3905 7.07058 10.5402 7.01606 10.268 7.75495C10.0952 8.2232 10.0648 9.49445 10.6239 10.1543C10.7134 10.2597 10.7307 10.4547 10.6699 10.6735C10.59 10.9608 10.4286 11.1356 10.3783 11.1717C10.2819 11.1163 10.0896 10.8931 9.95938 10.7412C9.64554 10.3765 9.25405 9.92233 8.74797 9.78176C8.56395 9.73083 8.36166 9.68867 8.16548 9.64736C7.6164 9.53227 6.99443 9.40134 6.84992 9.09302C6.74442 8.8672 6.74488 8.55621 6.74529 8.22764C6.74529 7.8112 6.74529 7.34029 6.54129 6.88256C6.46246 6.70541 6.35689 6.56446 6.23509 6.45329ZM12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22Z"},child:[]}]})(e)}function EBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function TBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function _Be(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 4C9.4095 4 7.10606 5.23053 5.64274 7.14274L8 9.5H2V3.5L4.21863 5.71863C6.05061 3.452 8.85558 2 12 2 17.5228 2 22 6.47715 22 12H20C20 7.58172 16.4183 4 12 4ZM4 12C4 16.4183 7.58172 20 12 20 14.5905 20 16.894 18.7695 18.3573 16.8573L16 14.5 22 14.5V20.5L19.7814 18.2814C17.9494 20.548 15.1444 22 12 22 6.47715 22 2 17.5228 2 12H4Z"},child:[]}]})(e)}function Lte(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.0007 1.20825 18.3195 3.68108 20.7923 4.99992 18.3195 6.31876 17.0007 8.79159 15.6818 6.31876 13.209 4.99992 15.6818 3.68108 17.0007 1.20825ZM8.00065 4.33325 10.6673 9.33325 15.6673 11.9999 10.6673 14.6666 8.00065 19.6666 5.33398 14.6666.333984 11.9999 5.33398 9.33325 8.00065 4.33325ZM19.6673 16.3333 18.0007 13.2083 16.334 16.3333 13.209 17.9999 16.334 19.6666 18.0007 22.7916 19.6673 19.6666 22.7923 17.9999 19.6673 16.3333Z"},child:[]}]})(e)}function dg(e){if(!e.dictionary.ai)throw new Error("AI dictionary not found");return e.dictionary.ai}function ABe(){const e=ol();return dg(e.editor)}const MBe=e=>{const t=Xe(),{onManualPromptSubmit:n,promptText:r,onPromptTextChange:o}=e,[i,s]=k.useState(""),a=r||i,l=k.useCallback(async b=>{b.key==="Enter"&&n(a)},[a,n]),c=k.useCallback(b=>{const x=b.currentTarget.value;o&&o(x),r===void 0&&s(x)},[o,s,r]),u=k.useMemo(()=>B4(e.items,a),[a,e.items]),{selectedIndex:f,setSelectedIndex:p,handler:m}=CY(u,b=>b.onItemClick()),y=k.useCallback(b=>{b.key==="Enter"?u.length>0?m(b):l(b):m(b)},[l,m,u.length]);return k.useEffect(()=>{p(0)},[a,p]),w.jsxs("div",{className:"bn-combobox",children:[w.jsx(t.Generic.Form.Root,{children:w.jsx(t.Generic.Form.TextInput,{className:"bn-combobox-input",name:"ai-prompt",variant:"large",icon:e.icon,value:a||"",autoFocus:!0,placeholder:e.placeholder,disabled:e.disabled,onKeyDown:y,onChange:c,autoComplete:"off",rightSection:e.rightSection},"input-"+e.disabled)}),w.jsx(t.SuggestionMenu.Root,{className:"bn-combobox-items",id:"ai-suggestion-menu",children:u.map((b,x)=>w.jsx(t.SuggestionMenu.Item,{className:_n("bn-suggestion-menu-item",b.size==="small"?"bn-suggestion-menu-item-small":""),id:`bn-suggestion-menu-item-${x}`,isSelected:x===f,onClick:b.onItemClick,item:b},b.title))})]})};function RBe(e){const t=dg(e),n=Rh(e);return[{key:"continue_writing",title:t.ai_default_commands.continue_writing.title,aliases:t.ai_default_commands.continue_writing.aliases,icon:w.jsx(PB,{size:18}),onItemClick:async()=>{await n.callLLM({userPrompt:"Continue writing at the current cursor position related to the previous text. Add multiple blocks if needed. If the document looks like a template / draft, follow the template. Be extensive if needed.",defaultStreamTools:{add:!0,delete:!1,update:!1}})},size:"small"},{key:"summarize",title:t.ai_default_commands.summarize.title,aliases:t.ai_default_commands.summarize.aliases,icon:w.jsx(SBe,{size:18}),onItemClick:async()=>{await n.callLLM({userPrompt:"Summarize",defaultStreamTools:{add:!0,delete:!1,update:!1}})},size:"small"},{key:"action_items",title:t.ai_default_commands.add_action_items.title,aliases:t.ai_default_commands.add_action_items.aliases,icon:w.jsx(xBe,{size:18}),onItemClick:async()=>{await n.callLLM({userPrompt:"Add action items",defaultStreamTools:{add:!0,delete:!1,update:!1}})},size:"small"},{key:"write_anything",title:t.ai_default_commands.write_anything.title,aliases:t.ai_default_commands.write_anything.aliases,icon:w.jsx(PB,{size:18}),onItemClick:r=>{r(t.ai_default_commands.write_anything.prompt_placeholder)},size:"small"}]}function NBe(e){const t=dg(e),n=Rh(e);return[{key:"improve_writing",title:t.ai_default_commands.improve_writing.title,aliases:t.ai_default_commands.improve_writing.aliases,icon:w.jsx(kBe,{size:18}),onItemClick:async()=>{await n.callLLM({useSelection:!0,userPrompt:"Improve writing",defaultStreamTools:{add:!1,delete:!1,update:!0}})},size:"small"},{key:"fix_spelling",title:t.ai_default_commands.fix_spelling.title,aliases:t.ai_default_commands.fix_spelling.aliases,icon:w.jsx(TBe,{size:18}),onItemClick:async()=>{await n.callLLM({useSelection:!0,userPrompt:"Fix spelling",defaultStreamTools:{add:!1,delete:!1,update:!0}})},size:"small"},{key:"translate",title:t.ai_default_commands.translate.title,aliases:t.ai_default_commands.translate.aliases,icon:w.jsx(CBe,{size:18}),onItemClick:r=>{r(t.ai_default_commands.translate.prompt_placeholder)},size:"small"},{key:"simplify",title:t.ai_default_commands.simplify.title,aliases:t.ai_default_commands.simplify.aliases,icon:w.jsx(wBe,{size:18}),onItemClick:async()=>{await n.callLLM({useSelection:!0,userPrompt:"Simplify",defaultStreamTools:{add:!1,delete:!1,update:!0}})},size:"small"}]}function IBe(e){const t=dg(e),n=Rh(e);return[{key:"accept",title:t.ai_menu.actions.accept.title,aliases:t.ai_menu.actions.accept.aliases,icon:w.jsx(EBe,{size:18}),onItemClick:()=>{n.acceptChanges()},size:"small"},{key:"revert",title:t.ai_menu.actions.revert.title,aliases:t.ai_menu.actions.revert.aliases,icon:w.jsx($te,{size:18}),onItemClick:()=>{n.rejectChanges()},size:"small"}]}function OBe(e){const t=dg(e),n=Rh(e);return[{key:"retry",title:t.ai_menu.actions.retry.title,aliases:t.ai_menu.actions.retry.aliases,icon:w.jsx(_Be,{size:18}),onItemClick:async()=>{await n.retry()},size:"small"},{key:"cancel",title:t.ai_menu.actions.cancel.title,aliases:t.ai_menu.actions.cancel.aliases,icon:w.jsx($te,{size:18}),onItemClick:()=>{n.rejectChanges()},size:"small"}]}function PBe(e,t){return t==="user-input"?e.getSelection()?NBe(e):RBe(e):t==="user-reviewing"?IBe(e):t==="error"?OBe(e):[]}const DBe=e=>{const t=Qe(),[n,r]=k.useState(""),o=ABe(),i=Xe(),s=Rh(t),a=Cte(s.store,m=>m.aiMenuState!=="closed"?m.aiMenuState.status:"closed"),{items:l}=e,c=k.useMemo(()=>{let m=[];return l?m=l(t,a):m=PBe(t,a),m.map(y=>({...y,onItemClick:()=>{y.onItemClick(r)}}))},[l,a,t]),u=k.useCallback(async m=>{await s.callLLM({userPrompt:m,useSelection:t.getSelection()!==void 0})},[s,t]);k.useEffect(()=>{(a==="user-reviewing"||a==="error")&&r("")},[a]);const f=k.useMemo(()=>a==="thinking"?o.ai_menu.status.thinking:a==="ai-writing"?o.ai_menu.status.editing:a==="error"?o.ai_menu.status.error:o.ai_menu.input_placeholder,[a,o]),p=k.useMemo(()=>{if(a==="thinking"||a==="ai-writing")return w.jsx(i.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader bn-combobox-right-section"});if(a==="error")return w.jsx("div",{className:"bn-combobox-right-section bn-combobox-error",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 -960 960 960",width:"1em",fill:"currentColor",children:w.jsx("path",{d:"M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm0-160q17 0 28.5-11.5T520-480v-160q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640v160q0 17 11.5 28.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})})})},[i,a]);return w.jsx(MBe,{onManualPromptSubmit:e.onManualPromptSubmit||u,items:c,promptText:n,onPromptTextChange:r,placeholder:f,disabled:a==="thinking"||a==="ai-writing",icon:w.jsx("div",{className:"bn-combobox-icon",children:w.jsx(Lte,{})}),rightSection:p})},$Be=e=>{const t=e.blockID?document.querySelector(`[data-id="${e.blockID}"]`):void 0,n=k.useMemo(()=>t?{getBoundingClientRect:()=>t.getBoundingClientRect(),contextElement:t}:null,[t]),{isMounted:r,ref:o,style:i,getFloatingProps:s,isPositioned:a}=uu(!!t,n,3e3,{canDismiss:{enabled:!0,escapeKey:!0,outsidePress:e.canDismissViaOutsidePress},placement:"bottom",middleware:[Gi(10),Sh({apply({rects:l,elements:c}){Object.assign(c.floating.style,{width:`${l.reference.width}px`})}})],onOpenChange:e.onOpenChange,whileElementsMounted:(l,c,u)=>zC(l,c,u,{animationFrame:!0}),...e.floatingOptions});return r?w.jsx("div",{ref:o,style:{...i},...s(),children:a&&e.children}):null},LBe=e=>{const t=Qe(),n=Rh(t),r=Cte(n.store,s=>s.aiMenuState),o=r==="closed"?void 0:r.blockId,i=e.aiMenu||DBe;return w.jsx($Be,{canDismissViaOutsidePress:r==="closed"||r.status==="user-input",blockID:o,onOpenChange:s=>{s||r==="closed"||(r.status==="user-input"?n.closeAIMenu():(r.status==="user-reviewing"||r.status==="error")&&n.rejectChanges())},children:w.jsx(i,{})})},jBe={AI:Lte};function zBe(e){const t=Rh(e);return[{key:"ai",onItemClick:()=>{const n=e.getTextCursorPosition();n.block.content&&Array.isArray(n.block.content)&&n.block.content.length===0&&n.prevBlock?t.openAIMenuAtBlock(n.prevBlock.id):t.openAIMenuAtBlock(n.block.id)},...dg(e).slash_menu.ai,icon:w.jsx(jBe.AI,{})}]}const BBe={formatting_toolbar:{ai:{tooltip:"Edit with AI"}},slash_menu:{ai:{title:"Ask AI",subtext:"Write with AI",aliases:["ai","artificial intelligence","llm","assistant","generate"],group:"AI"}},ai_default_commands:{continue_writing:{title:"Continue Writing",aliases:void 0},summarize:{title:"Summarize",aliases:void 0},add_action_items:{title:"Add Action Items",aliases:void 0},write_anything:{title:"Write Anything",aliases:void 0,prompt_placeholder:"Write about "},simplify:{title:"Simplify",aliases:void 0},translate:{title:"Translate",aliases:void 0,prompt_placeholder:"Translate into "},fix_spelling:{title:"Fix Spelling",aliases:void 0},improve_writing:{title:"Improve Writing",aliases:void 0}},ai_menu:{input_placeholder:"Ask AI anything",status:{thinking:"Thinking",editing:"Editing",error:"Oops! Something went wrong"},actions:{accept:{title:"Accept",aliases:void 0},retry:{title:"Retry",aliases:void 0},cancel:{title:"Cancel",aliases:void 0},revert:{title:"Revert",aliases:void 0}}}};var jte="vercel.ai.error",VBe=Symbol.for(jte),zte,FBe=class Bte extends Error{constructor({name:t,message:n,cause:r}){super(n),this[zte]=!0,this.name=t,this.cause=r}static isInstance(t){return Bte.hasMarker(t,jte)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};zte=VBe;var xt=FBe,Vte="AI_APICallError",Fte=`vercel.ai.error.${Vte}`,HBe=Symbol.for(Fte),Hte,Jn=class extends xt{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:o,responseBody:i,cause:s,isRetryable:a=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:Vte,message:e,cause:s}),this[Hte]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=o,this.responseBody=i,this.isRetryable=a,this.data=l}static isInstance(e){return xt.hasMarker(e,Fte)}};Hte=HBe;var Ute="AI_EmptyResponseBodyError",Gte=`vercel.ai.error.${Ute}`,UBe=Symbol.for(Gte),qte,Zte=class extends xt{constructor({message:e="Empty response body"}={}){super({name:Ute,message:e}),this[qte]=!0}static isInstance(e){return xt.hasMarker(e,Gte)}};qte=UBe;function fg(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Wte="AI_InvalidArgumentError",Kte=`vercel.ai.error.${Wte}`,GBe=Symbol.for(Kte),Yte,wE=class extends xt{constructor({message:t,cause:n,argument:r}){super({name:Wte,message:t,cause:n}),this[Yte]=!0,this.argument=r}static isInstance(t){return xt.hasMarker(t,Kte)}};Yte=GBe;var Jte="AI_InvalidPromptError",Xte=`vercel.ai.error.${Jte}`,qBe=Symbol.for(Xte),Qte,Ep=class extends xt{constructor({prompt:e,message:t,cause:n}){super({name:Jte,message:`Invalid prompt: ${t}`,cause:n}),this[Qte]=!0,this.prompt=e}static isInstance(e){return xt.hasMarker(e,Xte)}};Qte=qBe;var ene="AI_JSONParseError",tne=`vercel.ai.error.${ene}`,ZBe=Symbol.for(tne),nne,Xl=class extends xt{constructor({text:e,cause:t}){super({name:ene,message:`JSON parsing failed: Text: ${e}.
Error message: ${fg(t)}`,cause:t}),this[nne]=!0,this.text=e}static isInstance(e){return xt.hasMarker(e,tne)}};nne=ZBe;var rne="AI_LoadAPIKeyError",one=`vercel.ai.error.${rne}`,WBe=Symbol.for(one),ine,Ew=class extends xt{constructor({message:e}){super({name:rne,message:e}),this[ine]=!0}static isInstance(e){return xt.hasMarker(e,one)}};ine=WBe;var sne="AI_NoSuchModelError",ane=`vercel.ai.error.${sne}`,KBe=Symbol.for(ane),lne,YBe=class extends xt{constructor({errorName:e=sne,modelId:t,modelType:n,message:r=`No such ${n}: ${t}`}){super({name:e,message:r}),this[lne]=!0,this.modelId=t,this.modelType=n}static isInstance(e){return xt.hasMarker(e,ane)}};lne=KBe;var cne="AI_TooManyEmbeddingValuesForCallError",une=`vercel.ai.error.${cne}`,JBe=Symbol.for(une),dne,XBe=class extends xt{constructor(e){super({name:cne,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[dne]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return xt.hasMarker(e,une)}};dne=JBe;var fne="AI_TypeValidationError",hne=`vercel.ai.error.${fne}`,QBe=Symbol.for(hne),pne,eVe=class tI extends xt{constructor({value:t,cause:n}){super({name:fne,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${fg(n)}`,cause:n}),this[pne]=!0,this.value=t}static isInstance(t){return xt.hasMarker(t,hne)}static wrap({value:t,cause:n}){return tI.isInstance(n)&&n.value===t?n:new tI({value:t,cause:n})}};pne=QBe;var Ui=eVe,mne="AI_UnsupportedFunctionalityError",gne=`vercel.ai.error.${mne}`,tVe=Symbol.for(gne),yne,Sx=class extends xt{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:mne,message:t}),this[yne]=!0,this.functionality=e}static isInstance(e){return xt.hasMarker(e,gne)}};yne=tVe;let DB=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function UA(e){}function nVe(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=UA,onError:n=UA,onRetry:r=UA,onComment:o}=e;let i="",s=!0,a,l="",c="";function u(b){const x=s?b.replace(/^\xEF\xBB\xBF/,""):b,[S,E]=rVe(`${i}${x}`);for(const T of S)f(T);i=E,s=!1}function f(b){if(b===""){m();return}if(b.startsWith(":")){o&&o(b.slice(b.startsWith(": ")?2:1));return}const x=b.indexOf(":");if(x!==-1){const S=b.slice(0,x),E=b[x+1]===" "?2:1,T=b.slice(x+E);p(S,T,b);return}p(b,"",b)}function p(b,x,S){switch(b){case"event":c=x;break;case"data":l=`${l}${x}
`;break;case"id":a=x.includes("\0")?void 0:x;break;case"retry":/^\d+$/.test(x)?r(parseInt(x,10)):n(new DB(`Invalid \`retry\` value: "${x}"`,{type:"invalid-retry",value:x,line:S}));break;default:n(new DB(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:x,line:S}));break}}function m(){l.length>0&&t({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function y(b={}){i&&b.consume&&f(i),s=!0,a=void 0,l="",c="",i=""}return{feed:u,reset:y}}function rVe(e){const t=[];let n="",r=0;for(;r<e.length;){const o=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(o!==-1&&i!==-1?s=Math.min(o,i):o!==-1?o===e.length-1?s=-1:s=o:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const a=e.slice(r,s);t.push(a),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}let oVe=class extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let o;super({start(i){o=nVe({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){o.feed(i)}})}};var yt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(yt||(yt={}));var iVe={};function Sk(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function xE(e){return Object.fromEntries([...e.headers])}var sVe=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=()=>{const i=n.length,s=new Array(t);for(let a=0;a<t;a++)s[a]=n[Math.random()*i|0];return s.join("")};if(e==null)return o;if(n.includes(r))throw new wE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${o()}`},bne=sVe();function nI(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var aVe=["fetch failed","failed to fetch"];function lVe({error:e,url:t,requestBodyValues:n}){if(nI(e))return e;if(e instanceof TypeError&&aVe.includes(e.message.toLowerCase())){const r=e.cause;if(r!=null)return new Jn({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function cVe(e=globalThis){var t,n,r;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(r=(n=e.process)==null?void 0:n.versions)!=null&&r.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function uVe(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function vne(e,...t){const n=uVe(e??{}),r=new Headers(n),o=r.get("user-agent")||"";return r.set("user-agent",[o,...t].filter(Boolean).join(" ")),Object.fromEntries(r)}var dVe="3.0.12";function fVe({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Ew({message:`${r} API key must be a string.`});if(typeof process>"u")throw new Ew({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=iVe[t],e==null)throw new Ew({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Ew({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var hVe=/"__proto__"\s*:/,pVe=/"constructor"\s*:/;function mVe(e){const t=JSON.parse(e);return t===null||typeof t!="object"||hVe.test(e)===!1&&pVe.test(e)===!1?t:gVe(t)}function gVe(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const o in r){const i=r[o];i&&typeof i=="object"&&t.push(i)}}}return e}function wne(e){const{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{return mVe(e)}finally{Error.stackTraceLimit=t}}var kk=Symbol.for("vercel.ai.validator");function yVe(e){return{[kk]:!0,validate:e}}function bVe(e){return typeof e=="object"&&e!==null&&kk in e&&e[kk]===!0&&"validate"in e}function vVe(e){return bVe(e)?e:typeof e=="function"?e():wVe(e)}function wVe(e){return yVe(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new Ui({value:t,cause:n.issues})}})}async function xVe({value:e,schema:t}){const n=await FP({value:e,schema:t});if(!n.success)throw Ui.wrap({value:e,cause:n.error});return n.value}async function FP({value:e,schema:t}){const n=vVe(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:Ui.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:Ui.wrap({value:e,cause:r}),rawValue:e}}}async function SVe({text:e,schema:t}){try{const n=wne(e);return t==null?n:xVe({value:n,schema:t})}catch(n){throw Xl.isInstance(n)||Ui.isInstance(n)?n:new Xl({text:e,cause:n})}}async function xne({text:e,schema:t}){try{const n=wne(e);return t==null?{success:!0,value:n,rawValue:n}:await FP({value:n,schema:t})}catch(n){return{success:!1,error:Xl.isInstance(n)?n:new Xl({text:e,cause:n}),rawValue:void 0}}}function kVe({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new oVe).pipeThrough(new TransformStream({async transform({data:n},r){n!=="[DONE]"&&r.enqueue(await xne({text:n,schema:t}))}}))}async function HP({provider:e,providerOptions:t,schema:n}){if(t?.[e]==null)return;const r=await FP({value:t[e],schema:n});if(!r.success)throw new wE({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var CVe=()=>globalThis.fetch,bb=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:o,abortSignal:i,fetch:s})=>EVe({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:o,abortSignal:i,fetch:s}),EVe=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:o,abortSignal:i,fetch:s=CVe()})=>{try{const a=await s(e,{method:"POST",headers:vne(t,`ai-sdk/provider-utils/${dVe}`,cVe()),body:n.content,signal:i}),l=xE(a);if(!a.ok){let c;try{c=await o({response:a,url:e,requestBodyValues:n.values})}catch(u){throw nI(u)||Jn.isInstance(u)?u:new Jn({message:"Failed to process error response",cause:u,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(nI(c)||Jn.isInstance(c))?c:new Jn({message:"Failed to process successful response",cause:c,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(a){throw lVe({error:a,url:e,requestBodyValues:n.values})}};function Sne({id:e,name:t,inputSchema:n}){return({execute:r,outputSchema:o,toModelOutput:i,onInputStart:s,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:o,execute:r,toModelOutput:i,onInputStart:s,onInputDelta:a,onInputAvailable:l})}function TVe({id:e,name:t,inputSchema:n,outputSchema:r}){return({execute:o,toModelOutput:i,onInputStart:s,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:r,execute:o,toModelOutput:i,onInputStart:s,onInputDelta:a,onInputAvailable:l})}async function Ck(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var _Ve=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:o,requestBodyValues:i})=>{const s=await r.text(),a=xE(r);if(s.trim()==="")return{responseHeaders:a,value:new Jn({message:r.statusText,url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,isRetryable:n?.(r)})};try{const l=await SVe({text:s,schema:e});return{responseHeaders:a,value:new Jn({message:t(l),url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new Jn({message:r.statusText,url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,isRetryable:n?.(r)})}}},AVe=e=>async({response:t})=>{const n=xE(t);if(t.body==null)throw new Zte({});return{responseHeaders:n,value:kVe({stream:t.body,schema:e})}},Ek=e=>async({response:t,url:n,requestBodyValues:r})=>{const o=await t.text(),i=await xne({text:o,schema:e}),s=xE(t);if(!i.success)throw new Jn({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:o,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},MVe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},RVe=Symbol("Let zodToJsonSchema decide on which parser to use"),$B={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},NVe=e=>typeof e=="string"?{...$B,name:e}:{...$B,...e};function Rs(){return{}}function IVe(e,t){var n,r,o;const i={type:"array"};return(n=e.type)!=null&&n._def&&((o=(r=e.type)==null?void 0:r._def)==null?void 0:o.typeName)!==yt.ZodAny&&(i.items=fn(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}function OVe(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function PVe(){return{type:"boolean"}}function kne(e,t){return fn(e.type._def,t)}var DVe=(e,t)=>fn(e.innerType._def,t);function Cne(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((o,i)=>Cne(e,t,o))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return $Ve(e)}}var $Ve=e=>{const t={type:"integer",format:"unix-time"};for(const n of e.checks)switch(n.kind){case"min":t.minimum=n.value;break;case"max":t.maximum=n.value;break}return t};function LVe(e,t){return{...fn(e.innerType._def,t),default:e.defaultValue()}}function jVe(e,t){return t.effectStrategy==="input"?fn(e.schema._def,t):Rs()}function zVe(e){return{type:"string",enum:Array.from(e.values)}}var BVe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function VVe(e,t){const n=[fn(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),fn(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(o=>!!o),r=[];return n.forEach(o=>{if(BVe(o))r.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:s,...a}=o;i=a}r.push(i)}}),r.length?{allOf:r}:void 0}function FVe(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var GA=void 0,$a={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(GA===void 0&&(GA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),GA),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Ene(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value;break;case"max":n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":La(n,"email",r.message,t);break;case"format:idn-email":La(n,"idn-email",r.message,t);break;case"pattern:zod":ui(n,$a.email,r.message,t);break}break;case"url":La(n,"uri",r.message,t);break;case"uuid":La(n,"uuid",r.message,t);break;case"regex":ui(n,r.regex,r.message,t);break;case"cuid":ui(n,$a.cuid,r.message,t);break;case"cuid2":ui(n,$a.cuid2,r.message,t);break;case"startsWith":ui(n,RegExp(`^${qA(r.value,t)}`),r.message,t);break;case"endsWith":ui(n,RegExp(`${qA(r.value,t)}$`),r.message,t);break;case"datetime":La(n,"date-time",r.message,t);break;case"date":La(n,"date",r.message,t);break;case"time":La(n,"time",r.message,t);break;case"duration":La(n,"duration",r.message,t);break;case"length":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"includes":{ui(n,RegExp(qA(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&La(n,"ipv4",r.message,t),r.version!=="v4"&&La(n,"ipv6",r.message,t);break}case"base64url":ui(n,$a.base64url,r.message,t);break;case"jwt":ui(n,$a.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&ui(n,$a.ipv4Cidr,r.message,t),r.version!=="v4"&&ui(n,$a.ipv6Cidr,r.message,t);break}case"emoji":ui(n,$a.emoji(),r.message,t);break;case"ulid":{ui(n,$a.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{La(n,"binary",r.message,t);break}case"contentEncoding:base64":{n.contentEncoding="base64";break}case"pattern:zod":{ui(n,$a.base64,r.message,t);break}}break}case"nanoid":ui(n,$a.nanoid,r.message,t)}return n}function qA(e,t){return t.patternStrategy==="escape"?UVe(e):e}var HVe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function UVe(e){let t="";for(let n=0;n<e.length;n++)HVe.has(e[n])||(t+="\\"),t+=e[n];return t}function La(e,t,n,r){var o;e.format||(o=e.anyOf)!=null&&o.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function ui(e,t,n,r){var o;e.pattern||(o=e.allOf)!=null&&o.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:LB(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=LB(t,r)}function LB(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},o=r.i?e.source.toLowerCase():e.source;let i="",s=!1,a=!1,l=!1;for(let c=0;c<o.length;c++){if(s){i+=o[c],s=!1;continue}if(r.i){if(a){if(o[c].match(/[a-z]/)){l?(i+=o[c],i+=`${o[c-2]}-${o[c]}`.toUpperCase(),l=!1):o[c+1]==="-"&&((n=o[c+2])!=null&&n.match(/[a-z]/))?(i+=o[c],l=!0):i+=`${o[c]}${o[c].toUpperCase()}`;continue}}else if(o[c].match(/[a-z]/)){i+=`[${o[c]}${o[c].toUpperCase()}]`;continue}}if(r.m){if(o[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&o[c]==="."){i+=a?`${o[c]}\r
`:`[${o[c]}\r
]`;continue}i+=o[c],o[c]==="\\"?s=!0:a&&o[c]==="]"?a=!1:!a&&o[c]==="["&&(a=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function Tne(e,t){var n,r,o,i,s,a;const l={type:"object",additionalProperties:(n=fn(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?n:t.allowedAdditionalProperties};if(((r=e.keyType)==null?void 0:r._def.typeName)===yt.ZodString&&((o=e.keyType._def.checks)!=null&&o.length)){const{type:c,...u}=Ene(e.keyType._def,t);return{...l,propertyNames:u}}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===yt.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===yt.ZodBranded&&e.keyType._def.type._def.typeName===yt.ZodString&&((a=e.keyType._def.type._def.checks)!=null&&a.length)){const{type:c,...u}=kne(e.keyType._def,t);return{...l,propertyNames:u}}}return l}function GVe(e,t){if(t.mapStrategy==="record")return Tne(e,t);const n=fn(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Rs(),r=fn(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Rs();return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function qVe(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),o=Array.from(new Set(r.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:r}}function ZVe(){return{not:Rs()}}function WVe(){return{type:"null"}}var rI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function KVe(e,t){const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in rI&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((o,i)=>{const s=rI[i._def.typeName];return s&&!o.includes(s)?[...o,s]:o},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((o,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...o,s];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(r.length===n.length){const o=r.filter((i,s,a)=>a.indexOf(i)===s);return{type:o.length>1?o:o[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,o)=>[...r,...o._def.values.filter(i=>!r.includes(i))],[])};return YVe(e,t)}var YVe=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,o)=>fn(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${o}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function JVe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[rI[e.innerType._def.typeName],"null"]};const n=fn(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function XVe(e){const t={type:"number"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"int":t.type="integer";break;case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function QVe(e,t){const n={type:"object",properties:{}},r=[],o=e.shape();for(const s in o){let a=o[s];if(a===void 0||a._def===void 0)continue;const l=tFe(a),c=fn(a._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});c!==void 0&&(n.properties[s]=c,l||r.push(s))}r.length&&(n.required=r);const i=eFe(e,t);return i!==void 0&&(n.additionalProperties=i),n}function eFe(e,t){if(e.catchall._def.typeName!=="ZodNever")return fn(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function tFe(e){try{return e.isOptional()}catch{return!0}}var nFe=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return fn(e.innerType._def,t);const r=fn(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:Rs()},r]}:Rs()},rFe=(e,t)=>{if(t.pipeStrategy==="input")return fn(e.in._def,t);if(t.pipeStrategy==="output")return fn(e.out._def,t);const n=fn(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=fn(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(o=>o!==void 0)}};function oFe(e,t){return fn(e.type._def,t)}function iFe(e,t){const r={type:"array",uniqueItems:!0,items:fn(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(r.minItems=e.minSize.value),e.maxSize&&(r.maxItems=e.maxSize.value),r}function sFe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>fn(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:fn(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>fn(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function aFe(){return{not:Rs()}}function lFe(){return Rs()}var cFe=(e,t)=>fn(e.innerType._def,t),uFe=(e,t,n)=>{switch(t){case yt.ZodString:return Ene(e,n);case yt.ZodNumber:return XVe(e);case yt.ZodObject:return QVe(e,n);case yt.ZodBigInt:return OVe(e);case yt.ZodBoolean:return PVe();case yt.ZodDate:return Cne(e,n);case yt.ZodUndefined:return aFe();case yt.ZodNull:return WVe();case yt.ZodArray:return IVe(e,n);case yt.ZodUnion:case yt.ZodDiscriminatedUnion:return KVe(e,n);case yt.ZodIntersection:return VVe(e,n);case yt.ZodTuple:return sFe(e,n);case yt.ZodRecord:return Tne(e,n);case yt.ZodLiteral:return FVe(e);case yt.ZodEnum:return zVe(e);case yt.ZodNativeEnum:return qVe(e);case yt.ZodNullable:return JVe(e,n);case yt.ZodOptional:return nFe(e,n);case yt.ZodMap:return GVe(e,n);case yt.ZodSet:return iFe(e,n);case yt.ZodLazy:return()=>e.getter()._def;case yt.ZodPromise:return oFe(e,n);case yt.ZodNaN:case yt.ZodNever:return ZVe();case yt.ZodEffects:return jVe(e,n);case yt.ZodAny:return Rs();case yt.ZodUnknown:return lFe();case yt.ZodDefault:return LVe(e,n);case yt.ZodBranded:return kne(e,n);case yt.ZodReadonly:return cFe(e,n);case yt.ZodCatch:return DVe(e,n);case yt.ZodPipeline:return rFe(e,n);case yt.ZodFunction:case yt.ZodVoid:case yt.ZodSymbol:return;default:return(r=>{})()}};function fn(e,t,n=!1){var r;const o=t.seen.get(e);if(t.override){const l=(r=t.override)==null?void 0:r.call(t,e,t,o,n);if(l!==RVe)return l}if(o&&!n){const l=dFe(o,t);if(l!==void 0)return l}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const s=uFe(e,e.typeName,t),a=typeof s=="function"?fn(s(),t):s;if(a&&fFe(e,t,a),t.postProcess){const l=t.postProcess(a,e,t);return i.jsonSchema=a,l}return i.jsonSchema=a,a}var dFe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:MVe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Rs()):t.$refStrategy==="seen"?Rs():void 0}},fFe=(e,t,n)=>(e.description&&(n.description=e.description),n),hFe=e=>{const t=NVe(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,o])=>[o._def,{def:o._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}},pFe=(e,t)=>{var n;const r=hFe(t);let o=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((c,[u,f])=>{var p;return{...c,[u]:(p=fn(f._def,{...r,currentPath:[...r.basePath,r.definitionPath,u]},!0))!=null?p:Rs()}},{}):void 0;const i=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,s=(n=fn(e._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1))!=null?n:Rs(),a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(s.title=a);const l=i===void 0?o?{...s,[r.definitionPath]:o}:s:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...o,[i]:s}};return l.$schema="http://json-schema.org/draft-07/schema#",l},mFe=pFe;function gFe(e,t){var n;const r=(n=void 0)!=null?n:!1;return _ne(()=>mFe(e,{$refStrategy:r?"root":"none"}),{validate:async o=>{const i=await e.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function yFe(e,t){var n;const r=(n=void 0)!=null?n:!1;return _ne(()=>gee(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"}),{validate:async o=>{const i=await kP(e,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function bFe(e){return"_zod"in e}function al(e,t){return bFe(e)?yFe(e):gFe(e)}var vFe=Symbol.for("vercel.ai.schema");function ll(e){let t;return()=>(t==null&&(t=e()),t)}function _ne(e,{validate:t}={}){return{[vFe]:!0,_type:void 0,[kk]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}var{btoa:wFe}=globalThis;function xFe(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return wFe(t)}function jB(e){return e instanceof Uint8Array?xFe(e):e}function SFe(e){return e?.replace(/\/$/,"")}var kFe="2.0.23",CFe=ll(()=>al(de({error:de({code:Jt().nullable(),message:X(),status:X()})}))),vb=_Ve({errorSchema:CFe,errorToMessage:e=>e.error.message}),EFe=ll(()=>al(de({outputDimensionality:Jt().optional(),taskType:Di(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),TFe=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){const o=await HP({provider:"google",providerOptions:r,schema:EFe});if(e.length>this.maxEmbeddingsPerCall)throw new XBe({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const i=Sk(await Ck(this.config.headers),t);if(e.length===1){const{responseHeaders:c,value:u,rawValue:f}=await bb({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType},failedResponseHandler:vb,successfulResponseHandler:Ek(AFe),abortSignal:n,fetch:this.config.fetch});return{embeddings:[u.embedding.values],usage:void 0,response:{headers:c,body:f}}}const{responseHeaders:s,value:a,rawValue:l}=await bb({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:e.map(c=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:c}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType}))},failedResponseHandler:vb,successfulResponseHandler:Ek(_Fe),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.embeddings.map(c=>c.values),usage:void 0,response:{headers:s,body:l}}}},_Fe=ll(()=>al(de({embeddings:vt(de({values:vt(Jt())}))}))),AFe=ll(()=>al(de({embedding:de({values:vt(Jt())})})));function Al(e){if(e==null||MFe(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:o,items:i,allOf:s,anyOf:a,oneOf:l,format:c,const:u,minLength:f,enum:p}=e,m={};if(n&&(m.description=n),r&&(m.required=r),c&&(m.format=c),u!==void 0&&(m.enum=[u]),t&&(Array.isArray(t)?t.includes("null")?(m.type=t.filter(y=>y!=="null")[0],m.nullable=!0):m.type=t:t==="null"?m.type="null":m.type=t),p!==void 0&&(m.enum=p),o!=null&&(m.properties=Object.entries(o).reduce((y,[b,x])=>(y[b]=Al(x),y),{})),i&&(m.items=Array.isArray(i)?i.map(Al):Al(i)),s&&(m.allOf=s.map(Al)),a)if(a.some(y=>typeof y=="object"&&y?.type==="null")){const y=a.filter(b=>!(typeof b=="object"&&b?.type==="null"));if(y.length===1){const b=Al(y[0]);typeof b=="object"&&(m.nullable=!0,Object.assign(m,b))}else m.anyOf=y.map(Al),m.nullable=!0}else m.anyOf=a.map(Al);return l&&(m.oneOf=l.map(Al)),f!==void 0&&(m.minLength=f),m}function MFe(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function RFe(e,t){var n;const r=[],o=[];let i=!0;const s=(n=t?.isGemmaModel)!=null?n:!1;for(const{role:a,content:l}of e)switch(a){case"system":{if(!i)throw new Sx({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:l});break}case"user":{i=!1;const c=[];for(const u of l)switch(u.type){case"text":{c.push({text:u.text});break}case"file":{const f=u.mediaType==="image/*"?"image/jpeg":u.mediaType;c.push(u.data instanceof URL?{fileData:{mimeType:f,fileUri:u.data.toString()}}:{inlineData:{mimeType:f,data:jB(u.data)}});break}}o.push({role:"user",parts:c});break}case"assistant":{i=!1,o.push({role:"model",parts:l.map(c=>{var u,f,p,m,y,b;switch(c.type){case"text":return c.text.length===0?void 0:{text:c.text,thoughtSignature:(f=(u=c.providerOptions)==null?void 0:u.google)==null?void 0:f.thoughtSignature};case"reasoning":return c.text.length===0?void 0:{text:c.text,thought:!0,thoughtSignature:(m=(p=c.providerOptions)==null?void 0:p.google)==null?void 0:m.thoughtSignature};case"file":{if(c.mediaType!=="image/png")throw new Sx({functionality:"Only PNG images are supported in assistant messages"});if(c.data instanceof URL)throw new Sx({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:c.mediaType,data:jB(c.data)}}}case"tool-call":return{functionCall:{name:c.toolName,args:c.input},thoughtSignature:(b=(y=c.providerOptions)==null?void 0:y.google)==null?void 0:b.thoughtSignature}}}).filter(c=>c!==void 0)});break}case"tool":{i=!1;const c=[];for(const u of l){const f=u.output;if(f.type==="content")for(const p of f.value)switch(p.type){case"text":c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:p.text}}});break;case"media":c.push({inlineData:{mimeType:p.mediaType,data:p.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:c.push({text:JSON.stringify(p)});break}else c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:f.value}}})}o.push({role:"user",parts:c});break}}if(s&&r.length>0&&o.length>0&&o[0].role==="user"){const a=r.map(l=>l.text).join(`

`);o[0].parts.unshift({text:a+`

`})}return{systemInstruction:r.length>0&&!s?{parts:r}:void 0,contents:o}}function zB(e){return e.includes("/")?e:`models/${e}`}var NFe=ll(()=>al(de({responseModalities:vt(Di(["TEXT","IMAGE"])).optional(),thinkingConfig:de({thinkingBudget:Jt().optional(),includeThoughts:Kt().optional()}).optional(),cachedContent:X().optional(),structuredOutputs:Kt().optional(),safetySettings:vt(de({category:Di(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:Di(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:Di(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:Kt().optional(),labels:Qc(X(),X()).optional(),mediaResolution:Di(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:de({aspectRatio:Di(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional()}).optional()})));function IFe({tools:e,toolChoice:t,modelId:n}){var r;e=e?.length?e:void 0;const o=[],i=n.includes("gemini-2"),s=n.includes("gemini-1.5-flash")&&!n.includes("-8b");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const a=e.some(f=>f.type==="function"),l=e.some(f=>f.type==="provider-defined");if(a&&l&&o.push({type:"unsupported-tool",tool:e.find(f=>f.type==="function"),details:"Cannot mix function tools with provider-defined tools in the same request. Please use either function tools or provider-defined tools, but not both."}),l){const f=[];return e.filter(m=>m.type==="provider-defined").forEach(m=>{switch(m.id){case"google.google_search":i?f.push({googleSearch:{}}):s?f.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:m.args.mode,dynamicThreshold:m.args.dynamicThreshold}}}):f.push({googleSearchRetrieval:{}});break;case"google.url_context":i?f.push({urlContext:{}}):o.push({type:"unsupported-tool",tool:m,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":i?f.push({codeExecution:{}}):o.push({type:"unsupported-tool",tool:m,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;default:o.push({type:"unsupported-tool",tool:m});break}}),{tools:f.length>0?f:void 0,toolConfig:void 0,toolWarnings:o}}const c=[];for(const f of e)switch(f.type){case"function":c.push({name:f.name,description:(r=f.description)!=null?r:"",parameters:Al(f.inputSchema)});break;default:o.push({type:"unsupported-tool",tool:f});break}if(t==null)return{tools:{functionDeclarations:c},toolConfig:void 0,toolWarnings:o};const u=t.type;switch(u){case"auto":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:o};default:{const f=u;throw new Sx({functionality:`tool choice type: ${f}`})}}}function BB({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var OFe=class{constructor(e,t){this.specificationVersion="v2";var n;this.modelId=e,this.config=t,this.generateId=(n=t.generateId)!=null?n:bne}get provider(){return this.config.provider}get supportedUrls(){var e,t,n;return(n=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?n:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,topK:o,frequencyPenalty:i,presencePenalty:s,stopSequences:a,responseFormat:l,seed:c,tools:u,toolChoice:f,providerOptions:p}){var m,y;const b=[],x=await HP({provider:"google",providerOptions:p,schema:NFe});((m=x?.thinkingConfig)==null?void 0:m.includeThoughts)===!0&&!this.config.provider.startsWith("google.vertex.")&&b.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const S=this.modelId.toLowerCase().startsWith("gemma-"),{contents:E,systemInstruction:T}=RFe(e,{isGemmaModel:S}),{tools:A,toolConfig:M,toolWarnings:R}=IFe({tools:u,toolChoice:f,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:n,topK:o,topP:r,frequencyPenalty:i,presencePenalty:s,stopSequences:a,seed:c,responseMimeType:l?.type==="json"?"application/json":void 0,responseSchema:l?.type==="json"&&l.schema!=null&&((y=x?.structuredOutputs)==null||y)?Al(l.schema):void 0,...x?.audioTimestamp&&{audioTimestamp:x.audioTimestamp},responseModalities:x?.responseModalities,thinkingConfig:x?.thinkingConfig,...x?.imageConfig&&{imageConfig:x.imageConfig},...x?.mediaResolution&&{mediaResolution:x.mediaResolution}},contents:E,systemInstruction:S?void 0:T,safetySettings:x?.safetySettings,tools:A,toolConfig:M,cachedContent:x?.cachedContent,labels:x?.labels},warnings:[...b,...R]}}async doGenerate(e){var t,n,r,o,i,s,a,l,c,u,f,p,m;const{args:y,warnings:b}=await this.getArgs(e),x=JSON.stringify(y),S=Sk(await Ck(this.config.headers),e.headers),{responseHeaders:E,value:T,rawValue:A}=await bb({url:`${this.config.baseURL}/${zB(this.modelId)}:generateContent`,headers:S,body:y,failedResponseHandler:vb,successfulResponseHandler:Ek($Fe),abortSignal:e.abortSignal,fetch:this.config.fetch}),M=T.candidates[0],R=[],O=(n=(t=M.content)==null?void 0:t.parts)!=null?n:[],I=T.usageMetadata;let L;for(const B of O)if("executableCode"in B&&((r=B.executableCode)!=null&&r.code)){const H=this.config.generateId();L=H,R.push({type:"tool-call",toolCallId:H,toolName:"code_execution",input:JSON.stringify(B.executableCode),providerExecuted:!0})}else"codeExecutionResult"in B&&B.codeExecutionResult?(R.push({type:"tool-result",toolCallId:L,toolName:"code_execution",result:{outcome:B.codeExecutionResult.outcome,output:B.codeExecutionResult.output},providerExecuted:!0}),L=void 0):"text"in B&&B.text!=null&&B.text.length>0?R.push({type:B.thought===!0?"reasoning":"text",text:B.text,providerMetadata:B.thoughtSignature?{google:{thoughtSignature:B.thoughtSignature}}:void 0}):"functionCall"in B?R.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:B.functionCall.name,input:JSON.stringify(B.functionCall.args),providerMetadata:B.thoughtSignature?{google:{thoughtSignature:B.thoughtSignature}}:void 0}):"inlineData"in B&&R.push({type:"file",data:B.inlineData.data,mediaType:B.inlineData.mimeType});const $=(o=VB({groundingMetadata:M.groundingMetadata,generateId:this.config.generateId}))!=null?o:[];for(const B of $)R.push(B);return{content:R,finishReason:BB({finishReason:M.finishReason,hasToolCalls:R.some(B=>B.type==="tool-call")}),usage:{inputTokens:(i=I?.promptTokenCount)!=null?i:void 0,outputTokens:(s=I?.candidatesTokenCount)!=null?s:void 0,totalTokens:(a=I?.totalTokenCount)!=null?a:void 0,reasoningTokens:(l=I?.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(c=I?.cachedContentTokenCount)!=null?c:void 0},warnings:b,providerMetadata:{google:{promptFeedback:(u=T.promptFeedback)!=null?u:null,groundingMetadata:(f=M.groundingMetadata)!=null?f:null,urlContextMetadata:(p=M.urlContextMetadata)!=null?p:null,safetyRatings:(m=M.safetyRatings)!=null?m:null,usageMetadata:I??null}},request:{body:x},response:{headers:E,body:A}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),o=Sk(await Ck(this.config.headers),e.headers),{responseHeaders:i,value:s}=await bb({url:`${this.config.baseURL}/${zB(this.modelId)}:streamGenerateContent?alt=sse`,headers:o,body:t,failedResponseHandler:vb,successfulResponseHandler:AVe(LFe),abortSignal:e.abortSignal,fetch:this.config.fetch});let a="unknown";const l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let c;const u=this.config.generateId;let f=!1,p=null,m=null,y=0;const b=new Set;let x;return{stream:s.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:n})},transform(S,E){var T,A,M,R,O,I,L,$,B,H,V,W;if(e.includeRawChunks&&E.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){E.enqueue({type:"error",error:S.error});return}const K=S.value,z=K.usageMetadata;z!=null&&(l.inputTokens=(T=z.promptTokenCount)!=null?T:void 0,l.outputTokens=(A=z.candidatesTokenCount)!=null?A:void 0,l.totalTokens=(M=z.totalTokenCount)!=null?M:void 0,l.reasoningTokens=(R=z.thoughtsTokenCount)!=null?R:void 0,l.cachedInputTokens=(O=z.cachedContentTokenCount)!=null?O:void 0);const G=(I=K.candidates)==null?void 0:I[0];if(G==null)return;const F=G.content,Z=VB({groundingMetadata:G.groundingMetadata,generateId:u});if(Z!=null)for(const N of Z)N.sourceType==="url"&&!b.has(N.url)&&(b.add(N.url),E.enqueue(N));if(F!=null){const N=(L=F.parts)!=null?L:[];for(const D of N)if("executableCode"in D&&(($=D.executableCode)!=null&&$.code)){const ae=u();x=ae,E.enqueue({type:"tool-call",toolCallId:ae,toolName:"code_execution",input:JSON.stringify(D.executableCode),providerExecuted:!0}),f=!0}else if("codeExecutionResult"in D&&D.codeExecutionResult){const ae=x;ae&&(E.enqueue({type:"tool-result",toolCallId:ae,toolName:"code_execution",result:{outcome:D.codeExecutionResult.outcome,output:D.codeExecutionResult.output},providerExecuted:!0}),x=void 0)}else"text"in D&&D.text!=null&&D.text.length>0&&(D.thought===!0?(p!==null&&(E.enqueue({type:"text-end",id:p}),p=null),m===null&&(m=String(y++),E.enqueue({type:"reasoning-start",id:m,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0})),E.enqueue({type:"reasoning-delta",id:m,delta:D.text,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0})):(m!==null&&(E.enqueue({type:"reasoning-end",id:m}),m=null),p===null&&(p=String(y++),E.enqueue({type:"text-start",id:p,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0})),E.enqueue({type:"text-delta",id:p,delta:D.text,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0})));const U=DFe(F.parts);if(U!=null)for(const D of U)E.enqueue({type:"file",mediaType:D.inlineData.mimeType,data:D.inlineData.data});const ee=PFe({parts:F.parts,generateId:u});if(ee!=null)for(const D of ee)E.enqueue({type:"tool-input-start",id:D.toolCallId,toolName:D.toolName,providerMetadata:D.providerMetadata}),E.enqueue({type:"tool-input-delta",id:D.toolCallId,delta:D.args,providerMetadata:D.providerMetadata}),E.enqueue({type:"tool-input-end",id:D.toolCallId,providerMetadata:D.providerMetadata}),E.enqueue({type:"tool-call",toolCallId:D.toolCallId,toolName:D.toolName,input:D.args,providerMetadata:D.providerMetadata}),f=!0}G.finishReason!=null&&(a=BB({finishReason:G.finishReason,hasToolCalls:f}),c={google:{promptFeedback:(B=K.promptFeedback)!=null?B:null,groundingMetadata:(H=G.groundingMetadata)!=null?H:null,urlContextMetadata:(V=G.urlContextMetadata)!=null?V:null,safetyRatings:(W=G.safetyRatings)!=null?W:null}},z!=null&&(c.google.usageMetadata=z))},flush(S){p!==null&&S.enqueue({type:"text-end",id:p}),m!==null&&S.enqueue({type:"reasoning-end",id:m}),S.enqueue({type:"finish",finishReason:a,usage:l,providerMetadata:c})}})),response:{headers:i},request:{body:r}}}};function PFe({parts:e,generateId:t}){const n=e?.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({type:"tool-call",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args),providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0}))}function DFe(e){return e?.filter(t=>"inlineData"in t)}function VB({groundingMetadata:e,generateId:t}){var n;return(n=e?.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({type:"source",sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var Ane=()=>de({webSearchQueries:vt(X()).nullish(),retrievalQueries:vt(X()).nullish(),searchEntryPoint:de({renderedContent:X()}).nullish(),groundingChunks:vt(de({web:de({uri:X(),title:X()}).nullish(),retrievedContext:de({uri:X(),title:X()}).nullish()})).nullish(),groundingSupports:vt(de({segment:de({startIndex:Jt().nullish(),endIndex:Jt().nullish(),text:X().nullish()}),segment_text:X().nullish(),groundingChunkIndices:vt(Jt()).nullish(),supportChunkIndices:vt(Jt()).nullish(),confidenceScores:vt(Jt()).nullish(),confidenceScore:vt(Jt()).nullish()})).nullish(),retrievalMetadata:Nt([de({webDynamicRetrievalScore:Jt()}),de({})]).nullish()}),Mne=()=>de({parts:vt(Nt([de({functionCall:de({name:X(),args:Qt()}),thoughtSignature:X().nullish()}),de({inlineData:de({mimeType:X(),data:X()})}),de({executableCode:de({language:X(),code:X()}).nullish(),codeExecutionResult:de({outcome:X(),output:X()}).nullish(),text:X().nullish(),thought:Kt().nullish(),thoughtSignature:X().nullish()})])).nullish()}),Tk=()=>de({category:X().nullish(),probability:X().nullish(),probabilityScore:Jt().nullish(),severity:X().nullish(),severityScore:Jt().nullish(),blocked:Kt().nullish()}),Rne=de({cachedContentTokenCount:Jt().nullish(),thoughtsTokenCount:Jt().nullish(),promptTokenCount:Jt().nullish(),candidatesTokenCount:Jt().nullish(),totalTokenCount:Jt().nullish()}),Nne=()=>de({urlMetadata:vt(de({retrievedUrl:X(),urlRetrievalStatus:X()}))}),$Fe=ll(()=>al(de({candidates:vt(de({content:Mne().nullish().or(de({}).strict()),finishReason:X().nullish(),safetyRatings:vt(Tk()).nullish(),groundingMetadata:Ane().nullish(),urlContextMetadata:Nne().nullish()})),usageMetadata:Rne.nullish(),promptFeedback:de({blockReason:X().nullish(),safetyRatings:vt(Tk()).nullish()}).nullish()}))),LFe=ll(()=>al(de({candidates:vt(de({content:Mne().nullish(),finishReason:X().nullish(),safetyRatings:vt(Tk()).nullish(),groundingMetadata:Ane().nullish(),urlContextMetadata:Nne().nullish()})).nullish(),usageMetadata:Rne.nullish(),promptFeedback:de({blockReason:X().nullish(),safetyRatings:vt(Tk()).nullish()}).nullish()}))),jFe=TVe({id:"google.code_execution",name:"code_execution",inputSchema:de({language:X().describe("The programming language of the code."),code:X().describe("The code to be executed.")}),outputSchema:de({outcome:X().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:X().describe("The output from the code execution.")})}),zFe=Sne({id:"google.google_search",name:"google_search",inputSchema:ll(()=>al(de({mode:Di(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:Jt().default(1)})))}),BFe=Sne({id:"google.url_context",name:"url_context",inputSchema:ll(()=>al(de({})))}),VFe={googleSearch:zFe,urlContext:BFe,codeExecution:jFe},FFe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,n,r;const{prompt:o,n:i=1,size:s="1024x1024",aspectRatio:a="1:1",seed:l,providerOptions:c,headers:u,abortSignal:f}=e,p=[];s!=null&&p.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&p.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});const m=await HP({provider:"google",providerOptions:c,schema:UFe}),y=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,b={sampleCount:i};a!=null&&(b.aspectRatio=a),m&&Object.assign(b,m);const x={instances:[{prompt:o}],parameters:b},{responseHeaders:S,value:E}=await bb({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:Sk(await Ck(this.config.headers),u),body:x,failedResponseHandler:vb,successfulResponseHandler:Ek(HFe),abortSignal:f,fetch:this.config.fetch});return{images:E.predictions.map(T=>T.bytesBase64Encoded),warnings:p??[],providerMetadata:{google:{images:E.predictions.map(T=>({}))}},response:{timestamp:y,modelId:this.modelId,headers:S}}}},HFe=ll(()=>al(de({predictions:vt(de({bytesBase64Encoded:X()})).default([])}))),UFe=ll(()=>al(de({personGeneration:Di(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:Di(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function SE(e={}){var t;const n=(t=SFe(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>vne({"x-goog-api-key":fVe({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${kFe}`),o=l=>{var c;return new OFe(l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:bne,supportedUrls:()=>({"*":[new RegExp(`^${n}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},i=l=>new TFe(l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=(l,c={})=>new FFe(l,c,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),a=function(l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return o(l)};return a.languageModel=o,a.chat=o,a.generativeAI=o,a.embedding=i,a.textEmbedding=i,a.textEmbeddingModel=i,a.image=s,a.imageModel=s,a.tools=VFe,a}SE();function eu(e){return Array.isArray?Array.isArray(e):Pne(e)==="[object Array]"}function GFe(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function qFe(e){return e==null?"":GFe(e)}function Ll(e){return typeof e=="string"}function Ine(e){return typeof e=="number"}function ZFe(e){return e===!0||e===!1||WFe(e)&&Pne(e)=="[object Boolean]"}function One(e){return typeof e=="object"}function WFe(e){return One(e)&&e!==null}function ys(e){return e!=null}function ZA(e){return!e.trim().length}function Pne(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const KFe="Incorrect 'index' type",YFe=e=>`Invalid value for key ${e}`,JFe=e=>`Pattern length exceeds max of ${e}.`,XFe=e=>`Missing ${e} property in key`,QFe=e=>`Property 'weight' in key '${e}' must be a positive integer`,FB=Object.prototype.hasOwnProperty;class eHe{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let o=Dne(r);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Dne(e){let t=null,n=null,r=null,o=1,i=null;if(Ll(e)||eu(e))r=e,t=HB(e),n=oI(e);else{if(!FB.call(e,"name"))throw new Error(XFe("name"));const s=e.name;if(r=s,FB.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(QFe(s));t=HB(s),n=oI(s),i=e.getFn}return{path:t,id:n,weight:o,src:r,getFn:i}}function HB(e){return eu(e)?e:e.split(".")}function oI(e){return eu(e)?e.join("."):e}function tHe(e,t){let n=[],r=!1;const o=(i,s,a)=>{if(ys(i))if(!s[a])n.push(i);else{let l=s[a];const c=i[l];if(!ys(c))return;if(a===s.length-1&&(Ll(c)||Ine(c)||ZFe(c)))n.push(qFe(c));else if(eu(c)){r=!0;for(let u=0,f=c.length;u<f;u+=1)o(c[u],s,a+1)}else s.length&&o(c,s,a+1)}};return o(e,Ll(t)?t.split("."):t,0),r?n:n[0]}const nHe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},rHe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},oHe={location:0,threshold:.6,distance:100},iHe={useExtendedSearch:!1,getFn:tHe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ft={...rHe,...nHe,...oHe,...iHe};const sHe=/[^ ]+/g;function aHe(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(o){const i=o.match(sHe).length;if(n.has(i))return n.get(i);const s=1/Math.pow(i,.5*e),a=parseFloat(Math.round(s*r)/r);return n.set(i,a),a},clear(){n.clear()}}}class UP{constructor({getFn:t=ft.getFn,fieldNormWeight:n=ft.fieldNormWeight}={}){this.norm=aHe(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ll(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ll(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!ys(t)||ZA(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((o,i)=>{let s=o.getFn?o.getFn(t):this.getFn(t,o.path);if(ys(s)){if(eu(s)){let a=[];const l=[{nestedArrIndex:-1,value:s}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(ys(u))if(Ll(u)&&!ZA(u)){let f={v:u,i:c,n:this.norm.get(u)};a.push(f)}else eu(u)&&u.forEach((f,p)=>{l.push({nestedArrIndex:p,value:f})})}r.$[i]=a}else if(Ll(s)&&!ZA(s)){let a={v:s,n:this.norm.get(s)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function $ne(e,t,{getFn:n=ft.getFn,fieldNormWeight:r=ft.fieldNormWeight}={}){const o=new UP({getFn:n,fieldNormWeight:r});return o.setKeys(e.map(Dne)),o.setSources(t),o.create(),o}function lHe(e,{getFn:t=ft.getFn,fieldNormWeight:n=ft.fieldNormWeight}={}){const{keys:r,records:o}=e,i=new UP({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(o),i}function Tw(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:o=ft.distance,ignoreLocation:i=ft.ignoreLocation}={}){const s=t/e.length;if(i)return s;const a=Math.abs(r-n);return o?s+a/o:a?1:s}function cHe(e=[],t=ft.minMatchCharLength){let n=[],r=-1,o=-1,i=0;for(let s=e.length;i<s;i+=1){let a=e[i];a&&r===-1?r=i:!a&&r!==-1&&(o=i-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}const Tf=32;function uHe(e,t,n,{location:r=ft.location,distance:o=ft.distance,threshold:i=ft.threshold,findAllMatches:s=ft.findAllMatches,minMatchCharLength:a=ft.minMatchCharLength,includeMatches:l=ft.includeMatches,ignoreLocation:c=ft.ignoreLocation}={}){if(t.length>Tf)throw new Error(JFe(Tf));const u=t.length,f=e.length,p=Math.max(0,Math.min(r,f));let m=i,y=p;const b=a>1||l,x=b?Array(f):[];let S;for(;(S=e.indexOf(t,y))>-1;){let O=Tw(t,{currentLocation:S,expectedLocation:p,distance:o,ignoreLocation:c});if(m=Math.min(O,m),y=S+u,b){let I=0;for(;I<u;)x[S+I]=1,I+=1}}y=-1;let E=[],T=1,A=u+f;const M=1<<u-1;for(let O=0;O<u;O+=1){let I=0,L=A;for(;I<L;)Tw(t,{errors:O,currentLocation:p+L,expectedLocation:p,distance:o,ignoreLocation:c})<=m?I=L:A=L,L=Math.floor((A-I)/2+I);A=L;let $=Math.max(1,p-L+1),B=s?f:Math.min(p+L,f)+u,H=Array(B+2);H[B+1]=(1<<O)-1;for(let W=B;W>=$;W-=1){let K=W-1,z=n[e.charAt(K)];if(b&&(x[K]=+!!z),H[W]=(H[W+1]<<1|1)&z,O&&(H[W]|=(E[W+1]|E[W])<<1|1|E[W+1]),H[W]&M&&(T=Tw(t,{errors:O,currentLocation:K,expectedLocation:p,distance:o,ignoreLocation:c}),T<=m)){if(m=T,y=K,y<=p)break;$=Math.max(1,2*p-y)}}if(Tw(t,{errors:O+1,currentLocation:p,expectedLocation:p,distance:o,ignoreLocation:c})>m)break;E=H}const R={isMatch:y>=0,score:Math.max(.001,T)};if(b){const O=cHe(x,a);O.length?l&&(R.indices=O):R.isMatch=!1}return R}function dHe(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}const _k=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class Lne{constructor(t,{location:n=ft.location,threshold:r=ft.threshold,distance:o=ft.distance,includeMatches:i=ft.includeMatches,findAllMatches:s=ft.findAllMatches,minMatchCharLength:a=ft.minMatchCharLength,isCaseSensitive:l=ft.isCaseSensitive,ignoreDiacritics:c=ft.ignoreDiacritics,ignoreLocation:u=ft.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:o,includeMatches:i,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:c,ignoreLocation:u},t=l?t:t.toLowerCase(),t=c?_k(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(m,y)=>{this.chunks.push({pattern:m,alphabet:dHe(m),startIndex:y})},p=this.pattern.length;if(p>Tf){let m=0;const y=p%Tf,b=p-y;for(;m<b;)f(this.pattern.substr(m,Tf),m),m+=Tf;if(y){const x=p-Tf;f(this.pattern.substr(x),x)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:o}=this.options;if(t=n?t:t.toLowerCase(),t=r?_k(t):t,this.pattern===t){let b={isMatch:!0,score:0};return o&&(b.indices=[[0,t.length-1]]),b}const{location:i,distance:s,threshold:a,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let f=[],p=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:x,startIndex:S})=>{const{isMatch:E,score:T,indices:A}=uHe(t,b,x,{location:i+S,distance:s,threshold:a,findAllMatches:l,minMatchCharLength:c,includeMatches:o,ignoreLocation:u});E&&(m=!0),p+=T,E&&A&&(f=[...f,...A])});let y={isMatch:m,score:m?p/this.chunks.length:1};return m&&o&&(y.indices=f),y}}class zd{constructor(t){this.pattern=t}static isMultiMatch(t){return UB(t,this.multiRegex)}static isSingleMatch(t){return UB(t,this.singleRegex)}search(){}}function UB(e,t){const n=e.match(t);return n?n[1]:null}class fHe extends zd{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class hHe extends zd{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class pHe extends zd{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class mHe extends zd{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class gHe extends zd{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class yHe extends zd{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class jne extends zd{constructor(t,{location:n=ft.location,threshold:r=ft.threshold,distance:o=ft.distance,includeMatches:i=ft.includeMatches,findAllMatches:s=ft.findAllMatches,minMatchCharLength:a=ft.minMatchCharLength,isCaseSensitive:l=ft.isCaseSensitive,ignoreDiacritics:c=ft.ignoreDiacritics,ignoreLocation:u=ft.ignoreLocation}={}){super(t),this._bitapSearch=new Lne(t,{location:n,threshold:r,distance:o,includeMatches:i,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class zne extends zd{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const o=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+i,o.push([r,n-1]);const s=!!o.length;return{isMatch:s,score:s?0:1,indices:o}}}const iI=[fHe,zne,pHe,mHe,yHe,gHe,hHe,jne],GB=iI.length,bHe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,vHe="|";function wHe(e,t={}){return e.split(vHe).map(n=>{let r=n.trim().split(bHe).filter(i=>i&&!!i.trim()),o=[];for(let i=0,s=r.length;i<s;i+=1){const a=r[i];let l=!1,c=-1;for(;!l&&++c<GB;){const u=iI[c];let f=u.isMultiMatch(a);f&&(o.push(new u(f,t)),l=!0)}if(!l)for(c=-1;++c<GB;){const u=iI[c];let f=u.isSingleMatch(a);if(f){o.push(new u(f,t));break}}}return o})}const xHe=new Set([jne.type,zne.type]);class SHe{constructor(t,{isCaseSensitive:n=ft.isCaseSensitive,ignoreDiacritics:r=ft.ignoreDiacritics,includeMatches:o=ft.includeMatches,minMatchCharLength:i=ft.minMatchCharLength,ignoreLocation:s=ft.ignoreLocation,findAllMatches:a=ft.findAllMatches,location:l=ft.location,threshold:c=ft.threshold,distance:u=ft.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:o,minMatchCharLength:i,findAllMatches:a,ignoreLocation:s,location:l,threshold:c,distance:u},t=n?t:t.toLowerCase(),t=r?_k(t):t,this.pattern=t,this.query=wHe(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:o,ignoreDiacritics:i}=this.options;t=o?t:t.toLowerCase(),t=i?_k(t):t;let s=0,a=[],l=0;for(let c=0,u=n.length;c<u;c+=1){const f=n[c];a.length=0,s=0;for(let p=0,m=f.length;p<m;p+=1){const y=f[p],{isMatch:b,indices:x,score:S}=y.search(t);if(b){if(s+=1,l+=S,r){const E=y.constructor.type;xHe.has(E)?a=[...a,...x]:a.push(x)}}else{l=0,s=0,a.length=0;break}}if(s){let p={isMatch:!0,score:l/s};return r&&(p.indices=a),p}}return{isMatch:!1,score:1}}}const sI=[];function kHe(...e){sI.push(...e)}function aI(e,t){for(let n=0,r=sI.length;n<r;n+=1){let o=sI[n];if(o.condition(e,t))return new o(e,t)}return new Lne(e,t)}const Ak={AND:"$and",OR:"$or"},lI={PATH:"$path",PATTERN:"$val"},cI=e=>!!(e[Ak.AND]||e[Ak.OR]),CHe=e=>!!e[lI.PATH],EHe=e=>!eu(e)&&One(e)&&!cI(e),qB=e=>({[Ak.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Bne(e,t,{auto:n=!0}={}){const r=o=>{let i=Object.keys(o);const s=CHe(o);if(!s&&i.length>1&&!cI(o))return r(qB(o));if(EHe(o)){const l=s?o[lI.PATH]:i[0],c=s?o[lI.PATTERN]:o[l];if(!Ll(c))throw new Error(YFe(l));const u={keyId:oI(l),pattern:c};return n&&(u.searcher=aI(c,t)),u}let a={children:[],operator:i[0]};return i.forEach(l=>{const c=o[l];eu(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return cI(e)||(e=qB(e)),r(e)}function THe(e,{ignoreFieldNorm:t=ft.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:o,norm:i,score:s})=>{const a=o?o.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(t?1:i))}),n.score=r})}function _He(e,t){const n=e.matches;t.matches=[],ys(n)&&n.forEach(r=>{if(!ys(r.indices)||!r.indices.length)return;const{indices:o,value:i}=r;let s={indices:o,value:i};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),t.matches.push(s)})}function AHe(e,t){t.score=e.score}function MHe(e,t,{includeMatches:n=ft.includeMatches,includeScore:r=ft.includeScore}={}){const o=[];return n&&o.push(_He),r&&o.push(AHe),e.map(i=>{const{idx:s}=i,a={item:t[s],refIndex:s};return o.length&&o.forEach(l=>{l(i,a)}),a})}class hg{constructor(t,n={},r){this.options={...ft,...n},this.options.useExtendedSearch,this._keyStore=new eHe(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof UP))throw new Error(KFe);this._myIndex=n||$ne(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ys(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,o=this._docs.length;r<o;r+=1){const i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,o-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:o,shouldSort:i,sortFn:s,ignoreFieldNorm:a}=this.options;let l=Ll(t)?Ll(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return THe(l,{ignoreFieldNorm:a}),i&&l.sort(s),Ine(n)&&n>-1&&(l=l.slice(0,n)),MHe(l,this._docs,{includeMatches:r,includeScore:o})}_searchStringList(t){const n=aI(t,this.options),{records:r}=this._myIndex,o=[];return r.forEach(({v:i,i:s,n:a})=>{if(!ys(i))return;const{isMatch:l,score:c,indices:u}=n.searchIn(i);l&&o.push({item:i,idx:s,matches:[{score:c,value:i,norm:a,indices:u}]})}),o}_searchLogical(t){const n=Bne(t,this.options),r=(a,l,c)=>{if(!a.children){const{keyId:f,searcher:p}=a,m=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:p});return m&&m.length?[{idx:c,item:l,matches:m}]:[]}const u=[];for(let f=0,p=a.children.length;f<p;f+=1){const m=a.children[f],y=r(m,l,c);if(y.length)u.push(...y);else if(a.operator===Ak.AND)return[]}return u},o=this._myIndex.records,i={},s=[];return o.forEach(({$:a,i:l})=>{if(ys(a)){let c=r(n,a,l);c.length&&(i[l]||(i[l]={idx:l,item:a,matches:[]},s.push(i[l])),c.forEach(({matches:u})=>{i[l].matches.push(...u)}))}}),s}_searchObjectList(t){const n=aI(t,this.options),{keys:r,records:o}=this._myIndex,i=[];return o.forEach(({$:s,i:a})=>{if(!ys(s))return;let l=[];r.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:s[u],searcher:n}))}),l.length&&i.push({idx:a,item:s,matches:l})}),i}_findMatches({key:t,value:n,searcher:r}){if(!ys(n))return[];let o=[];if(eu(n))n.forEach(({v:i,i:s,n:a})=>{if(!ys(i))return;const{isMatch:l,score:c,indices:u}=r.searchIn(i);l&&o.push({score:c,key:t,value:i,idx:s,norm:a,indices:u})});else{const{v:i,n:s}=n,{isMatch:a,score:l,indices:c}=r.searchIn(i);a&&o.push({score:l,key:t,value:i,norm:s,indices:c})}return o}}hg.version="7.1.0";hg.createIndex=$ne;hg.parseIndex=lHe;hg.config=ft;hg.parseQuery=Bne;kHe(SHe);const pr=GU(e=>({isSearchActive:!1,searchQuery:"",searchResults:[],isCommandPaletteOpen:!1,toggleSearch:()=>e(t=>({isSearchActive:!t.isSearchActive})),setSearchQuery:(t,n)=>{if(e({searchQuery:t}),t){const o=new hg(n,{keys:["title","content"],includeScore:!0}).search(t);e({searchResults:o.map(i=>i.item)})}else e({searchResults:[]})},openCommandPalette:()=>e({isCommandPaletteOpen:!0}),closeCommandPalette:()=>e({isCommandPaletteOpen:!1,searchQuery:"",searchResults:[]}),loadApiKey:async()=>{try{const t=await mr("get_google_api_key");e({googleApiKey:t})}catch(t){console.error("Failed to load API key:",t)}},deleteConfirmId:null,renamingNoteId:null,renameValue:"",contextMenu:null,isSettingsOpen:!1,isKanbanOpen:!1,isSupportOpen:!1,isRecording:!1,isAiSidebarOpen:!1,isSidebarFloating:!1,expandedFolders:new Set,deleteConfirmFolderId:null,googleApiKey:"",editor:null,aiMessages:[],aiStreamingMessage:"",aiIsLoading:!1,isProcessingRecording:!1,recordingStartTime:null,setDeleteConfirmId:t=>e({deleteConfirmId:t}),setDeleteConfirmFolderId:t=>e({deleteConfirmFolderId:t}),startRenaming:(t,n)=>e({renamingNoteId:t,renameValue:n}),finishRenaming:()=>e({renamingNoteId:null,renameValue:""}),setRenameValue:t=>e({renameValue:t}),setContextMenu:t=>e({contextMenu:t}),setIsSettingsOpen:t=>e({isSettingsOpen:t}),setIsKanbanOpen:t=>e({isKanbanOpen:t}),setIsSupportOpen:t=>e({isSupportOpen:t}),setIsRecording:t=>e({isRecording:t,recordingStartTime:t?Date.now():null}),setIsProcessingRecording:t=>e({isProcessingRecording:t}),setIsAiSidebarOpen:t=>e({isAiSidebarOpen:t}),setIsSidebarFloating:t=>e({isSidebarFloating:t}),setExpandedFolders:t=>e({expandedFolders:t}),setGoogleApiKey:t=>e({googleApiKey:t}),setEditor:t=>e({editor:t}),addAiMessage:t=>e(n=>({aiMessages:[...n.aiMessages,{...t,actionStatus:t.role==="assistant"?"pending":void 0}]})),updateLastAiMessage:t=>e(n=>{const r=[...n.aiMessages];return r.length>0&&r[r.length-1].role==="assistant"&&(r[r.length-1].content=t),{aiMessages:r}}),setAiMessageStatus:(t,n)=>e(r=>{const o=[...r.aiMessages];return o[t]&&(o[t].actionStatus=n),{aiMessages:o}}),setAiStreamingMessage:t=>e({aiStreamingMessage:t}),setAiIsLoading:t=>e({aiIsLoading:t}),clearAiChat:()=>e({aiMessages:[],aiStreamingMessage:"",aiIsLoading:!1})})),Vne=k.createContext(null);function RHe(){const e=k.useContext(Vne);if(!e)throw new Error("useEditorContext must be used within EditorProvider");return e}const NHe=e=>new Promise((t,n)=>{console.log("Starting base64 conversion for:",e.name,e.type,e.size);const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const o=r.result;console.log("Base64 conversion successful. Length:",o.length,"Prefix:",o.substring(0,50)),t(o)},r.onerror=o=>{console.error("Base64 conversion failed:",o),n(o)}});function IHe({children:e,currentNote:t,updateCurrentNoteContent:n,updateCurrentNoteTitle:r}){const{googleApiKey:o,setEditor:i}=pr(),s=k.useMemo(()=>o?SE({apiKey:o})("gemini-2.5-flash"):null,[o]),a=BC({tables:{splitCells:!0,cellBackgroundColor:!0,cellTextColor:!0,headers:!0},codeBlock:v$e,dictionary:{...xW,ai:BBe},extensions:s?[fBe({model:s})]:[],initialContent:t?.content?JSON.parse(t.content):void 0,uploadFile:async u=>{console.log("uploadFile triggered for:",u);try{return await NHe(u)}catch(f){throw console.error("uploadFile failed:",f),f}}}),l=k.useRef(null),c=k.useRef(null);return k.useEffect(()=>{i(a)},[a,i]),k.useEffect(()=>{if(t&&t.id!==l.current){console.log("Switching to note:",t.id),l.current=t.id;try{const u=t.content?JSON.parse(t.content):[];a.replaceBlocks(a.document,u)}catch{console.warn("Invalid JSON content, treating as plain text"),a.replaceBlocks(a.document,[{type:"paragraph",content:t.content||""}])}}},[t?.id,a]),k.useEffect(()=>{const u=()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{if(t){const f=JSON.stringify(a.document);n(f);const p=a.document[0];let m="Untitled";if(p){const y=p.content;typeof y=="string"?m=y||"Untitled":Array.isArray(y)&&(m=y.map(b=>b.text).join("")||"Untitled")}t.title!==m&&r(m)}},500)};return a.onChange(u),()=>{c.current&&clearTimeout(c.current)}},[a,t,n]),w.jsx(Vne.Provider,{value:{editor:a,updateCurrentNoteTitle:r},children:e})}function OHe(){return w.jsx(y3,{formattingToolbar:()=>w.jsxs(g3,{children:[...m3()]})})}function PHe(e){const t=st.c(3),{editor:n}=e,{googleApiKey:r}=pr();let o;return t[0]!==n||t[1]!==r?(o=w.jsx(TY,{triggerCharacter:"/",getItems:async i=>B4([...EY(n),...r?zBe(n):[]],i)}),t[0]=n,t[1]=r,t[2]=o):o=t[2],o}function ZB(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function yv(...e){return t=>{let n=!1;const r=e.map(o=>{const i=ZB(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():ZB(e[o],null)}}}}function vi(...e){return k.useCallback(yv(...e),e)}var DHe=Symbol.for("react.lazy"),Mk=Lb[" use ".trim().toString()];function $He(e){return typeof e=="object"&&e!==null&&"then"in e}function Fne(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===DHe&&"_payload"in e&&$He(e._payload)}function LHe(e){const t=zHe(e),n=k.forwardRef((r,o)=>{let{children:i,...s}=r;Fne(i)&&typeof Mk=="function"&&(i=Mk(i._payload));const a=k.Children.toArray(i),l=a.find(VHe);if(l){const c=l.props.children,u=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return w.jsx(t,{...s,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return w.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}var jHe=LHe("Slot");function zHe(e){const t=k.forwardRef((n,r)=>{let{children:o,...i}=n;if(Fne(o)&&typeof Mk=="function"&&(o=Mk(o._payload)),k.isValidElement(o)){const s=HHe(o),a=FHe(i,o.props);return o.type!==k.Fragment&&(a.ref=r?yv(r,s):s),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var BHe=Symbol("radix.slottable");function VHe(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===BHe}function FHe(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function HHe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UHe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GHe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),WB=e=>{const t=GHe(e);return t.charAt(0).toUpperCase()+t.slice(1)},Hne=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),qHe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZHe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WHe=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>k.createElement("svg",{ref:l,...ZHe,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Hne("lucide",o),...!i&&!qHe(a)&&{"aria-hidden":"true"},...a},[...s.map(([c,u])=>k.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=(e,t)=>{const n=k.forwardRef(({className:r,...o},i)=>k.createElement(WHe,{ref:i,iconNode:t,className:Hne(`lucide-${UHe(WB(e))}`,`lucide-${e}`,r),...o}));return n.displayName=WB(e),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KHe=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],YHe=at("arrow-up",KHe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JHe=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"m10.852 9.228-.383-.923",key:"1fjppe"}],["path",{d:"m13.148 14.772.382.924",key:"je3va1"}],["path",{d:"m13.531 8.305-.383.923",key:"18epck"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 0 0-5.63-1.446 3 3 0 0 0-.368 1.571 4 4 0 0 0-2.525 5.771",key:"jcbbz1"}],["path",{d:"M17.998 5.125a4 4 0 0 1 2.525 5.771",key:"1kkn7e"}],["path",{d:"M19.505 10.294a4 4 0 0 1-1.5 7.706",key:"18bmuc"}],["path",{d:"M4.032 17.483A4 4 0 0 0 11.464 20c.18-.311.892-.311 1.072 0a4 4 0 0 0 7.432-2.516",key:"uozx0d"}],["path",{d:"M4.5 10.291A4 4 0 0 0 6 18",key:"whdemb"}],["path",{d:"M6.002 5.125a3 3 0 0 0 .4 1.375",key:"1kqy2g"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XHe=at("brain-cog",JHe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QHe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_w=at("calendar",QHe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eUe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],KB=at("check",eUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tUe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],GP=at("chevron-down",tUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nUe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rUe=at("chevron-left",nUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oUe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rk=at("chevron-right",oUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iUe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sUe=at("chevron-up",iUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aUe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],YB=at("circle-check-big",aUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lUe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],JB=at("circle-check",lUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cUe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],Une=at("circle-stop",cUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uUe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dUe=at("circle-x",uUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fUe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],XB=at("clock",fUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hUe=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],QB=at("cpu",hUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pUe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mUe=at("download",pUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gUe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],u0=at("ellipsis",gUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yUe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Gne=at("external-link",yUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bUe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}]],eV=at("file-minus",bUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vUe=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],wUe=at("files",vUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xUe=[["path",{d:"M10 10.5 8 13l2 2.5",key:"m4t9c1"}],["path",{d:"m14 10.5 2 2.5-2 2.5",key:"14w2eb"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2z",key:"1u1bxd"}]],SUe=at("folder-code",xUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kUe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],CUe=at("folder-open",kUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EUe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],TUe=at("folder",EUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],AUe=at("globe",_Ue);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MUe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],tV=at("hash",MUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RUe=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],uI=at("list-todo",RUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NUe=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],IUe=at("list",NUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OUe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],nV=at("loader-circle",OUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PUe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],DUe=at("mic",PUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ue=[["path",{d:"M5 12h14",key:"1ays0h"}]],LUe=at("minus",$Ue);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jUe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],zUe=at("panel-left",jUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BUe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],VUe=at("panel-right",BUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FUe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],qne=at("panels-top-left",FUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HUe=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],UUe=at("paperclip",HUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GUe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qUe=at("pen-line",GUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZUe=[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],rV=at("pencil-ruler",ZUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WUe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wb=at("plus",WUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KUe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],YUe=at("refresh-cw",KUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JUe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],XUe=at("search",JUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QUe=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],oV=at("settings-2",QUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eGe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tGe=at("settings",eGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nGe=[["path",{d:"M22 2 2 22",key:"y4kqgn"}]],Zne=at("slash",nGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rGe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],jp=at("sparkles",rGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oGe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],iGe=at("square",oGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sGe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],aGe=at("star",sGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lGe=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],cGe=at("terminal",lGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uGe=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],iV=at("text-align-start",uGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dGe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fGe=at("trash-2",dGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hGe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],sV=at("triangle-alert",hGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pGe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],mGe=at("upload",pGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gGe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],aV=at("user",gGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yGe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Om=at("x",yGe),qP="-",bGe=e=>{const t=wGe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const a=s.split(qP);return a[0]===""&&a.length!==1&&a.shift(),Wne(a,t)||vGe(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},Wne=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?Wne(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const i=e.join(qP);return t.validators.find(({validator:s})=>s(i))?.classGroupId},lV=/^\[(.+)\]$/,vGe=e=>{if(lV.test(e)){const t=lV.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},wGe=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const o in n)dI(n[o],r,o,t);return r},dI=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const i=o===""?t:cV(t,o);i.classGroupId=n;return}if(typeof o=="function"){if(xGe(o)){dI(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{dI(s,cV(t,i),n,r)})})},cV=(e,t)=>{let n=e;return t.split(qP).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},xGe=e=>e.isThemeGetter,SGe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},fI="!",hI=":",kGe=hI.length,CGe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const i=[];let s=0,a=0,l=0,c;for(let y=0;y<o.length;y++){let b=o[y];if(s===0&&a===0){if(b===hI){i.push(o.slice(l,y)),l=y+kGe;continue}if(b==="/"){c=y;continue}}b==="["?s++:b==="]"?s--:b==="("?a++:b===")"&&a--}const u=i.length===0?o:o.substring(l),f=EGe(u),p=f!==u,m=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:m}};if(t){const o=t+hI,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=i=>n({className:i,parseClassName:o})}return r},EGe=e=>e.endsWith(fI)?e.substring(0,e.length-1):e.startsWith(fI)?e.substring(1):e,TGe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},_Ge=e=>({cache:SGe(e.cacheSize),parseClassName:CGe(e),sortModifiers:TGe(e),...bGe(e)}),AGe=/\s+/,MGe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=t,s=[],a=e.trim().split(AGe);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:p,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:b}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let x=!!b,S=r(x?y.substring(0,b):y);if(!S){if(!x){l=u+(l.length>0?" "+l:l);continue}if(S=r(y),!S){l=u+(l.length>0?" "+l:l);continue}x=!1}const E=i(p).join(":"),T=m?E+fI:E,A=T+S;if(s.includes(A))continue;s.push(A);const M=o(S,x);for(let R=0;R<M.length;++R){const O=M[R];s.push(T+O)}l=u+(l.length>0?" "+l:l)}return l};function RGe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Kne(t))&&(r&&(r+=" "),r+=n);return r}const Kne=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Kne(e[r]))&&(n&&(n+=" "),n+=t);return n};function NGe(e,...t){let n,r,o,i=s;function s(l){const c=t.reduce((u,f)=>f(u),e());return n=_Ge(c),r=n.cache.get,o=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=MGe(l,n);return o(l,u),u}return function(){return i(RGe.apply(null,arguments))}}const Jr=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Yne=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Jne=/^\((?:(\w[\w-]*):)?(.+)\)$/i,IGe=/^\d+\/\d+$/,OGe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PGe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DGe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,$Ge=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,LGe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Tp=e=>IGe.test(e),Mt=e=>!!e&&!Number.isNaN(Number(e)),Fu=e=>!!e&&Number.isInteger(Number(e)),WA=e=>e.endsWith("%")&&Mt(e.slice(0,-1)),Ic=e=>OGe.test(e),jGe=()=>!0,zGe=e=>PGe.test(e)&&!DGe.test(e),Xne=()=>!1,BGe=e=>$Ge.test(e),VGe=e=>LGe.test(e),FGe=e=>!Ue(e)&&!Ge(e),HGe=e=>pg(e,tre,Xne),Ue=e=>Yne.test(e),pf=e=>pg(e,nre,zGe),KA=e=>pg(e,WGe,Mt),uV=e=>pg(e,Qne,Xne),UGe=e=>pg(e,ere,VGe),Aw=e=>pg(e,rre,BGe),Ge=e=>Jne.test(e),Sy=e=>mg(e,nre),GGe=e=>mg(e,KGe),dV=e=>mg(e,Qne),qGe=e=>mg(e,tre),ZGe=e=>mg(e,ere),Mw=e=>mg(e,rre,!0),pg=(e,t,n)=>{const r=Yne.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},mg=(e,t,n=!1)=>{const r=Jne.exec(e);return r?r[1]?t(r[1]):n:!1},Qne=e=>e==="position"||e==="percentage",ere=e=>e==="image"||e==="url",tre=e=>e==="length"||e==="size"||e==="bg-size",nre=e=>e==="length",WGe=e=>e==="number",KGe=e=>e==="family-name",rre=e=>e==="shadow",YGe=()=>{const e=Jr("color"),t=Jr("font"),n=Jr("text"),r=Jr("font-weight"),o=Jr("tracking"),i=Jr("leading"),s=Jr("breakpoint"),a=Jr("container"),l=Jr("spacing"),c=Jr("radius"),u=Jr("shadow"),f=Jr("inset-shadow"),p=Jr("text-shadow"),m=Jr("drop-shadow"),y=Jr("blur"),b=Jr("perspective"),x=Jr("aspect"),S=Jr("ease"),E=Jr("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...A(),Ge,Ue],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],I=()=>[Ge,Ue,l],L=()=>[Tp,"full","auto",...I()],$=()=>[Fu,"none","subgrid",Ge,Ue],B=()=>["auto",{span:["full",Fu,Ge,Ue]},Fu,Ge,Ue],H=()=>[Fu,"auto",Ge,Ue],V=()=>["auto","min","max","fr",Ge,Ue],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],K=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...I()],G=()=>[Tp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],F=()=>[e,Ge,Ue],Z=()=>[...A(),dV,uV,{position:[Ge,Ue]}],N=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",qGe,HGe,{size:[Ge,Ue]}],ee=()=>[WA,Sy,pf],D=()=>["","none","full",c,Ge,Ue],ae=()=>["",Mt,Sy,pf],oe=()=>["solid","dashed","dotted","double"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[Mt,WA,dV,uV],ge=()=>["","none",y,Ge,Ue],Oe=()=>["none",Mt,Ge,Ue],je=()=>["none",Mt,Ge,Ue],ye=()=>[Mt,Ge,Ue],Ie=()=>[Tp,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ic],breakpoint:[Ic],color:[jGe],container:[Ic],"drop-shadow":[Ic],ease:["in","out","in-out"],font:[FGe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ic],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ic],shadow:[Ic],spacing:["px",Mt],text:[Ic],"text-shadow":[Ic],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Tp,Ue,Ge,x]}],container:["container"],columns:[{columns:[Mt,Ue,Ge,a]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[Fu,"auto",Ge,Ue]}],basis:[{basis:[Tp,"full","auto",a,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Mt,Tp,"auto","initial","none",Ue]}],grow:[{grow:["",Mt,Ge,Ue]}],shrink:[{shrink:["",Mt,Ge,Ue]}],order:[{order:[Fu,"first","last","none",Ge,Ue]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...K(),"normal"]}],"justify-self":[{"justify-self":["auto",...K()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...K(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...K(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...K(),"baseline"]}],"place-self":[{"place-self":["auto",...K()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[a,"screen",...G()]}],"min-w":[{"min-w":[a,"screen","none",...G()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",n,Sy,pf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ge,KA]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",WA,Ue]}],"font-family":[{font:[GGe,Ue,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Ge,Ue]}],"line-clamp":[{"line-clamp":[Mt,"none",Ge,KA]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",Ge,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ge,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Mt,"from-font","auto",Ge,pf]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[Mt,"auto",Ge,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:N()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Fu,Ge,Ue],radial:["",Ge,Ue],conic:[Fu,Ge,Ue]},ZGe,UGe]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Mt,Ge,Ue]}],"outline-w":[{outline:["",Mt,Sy,pf]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",u,Mw,Aw]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",f,Mw,Aw]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[Mt,pf]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",p,Mw,Aw]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[Mt,Ge,Ue]}],"mix-blend":[{"mix-blend":[...he(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":he()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Mt]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Ge,Ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Mt]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:N()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ge,Ue]}],filter:[{filter:["","none",Ge,Ue]}],blur:[{blur:ge()}],brightness:[{brightness:[Mt,Ge,Ue]}],contrast:[{contrast:[Mt,Ge,Ue]}],"drop-shadow":[{"drop-shadow":["","none",m,Mw,Aw]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",Mt,Ge,Ue]}],"hue-rotate":[{"hue-rotate":[Mt,Ge,Ue]}],invert:[{invert:["",Mt,Ge,Ue]}],saturate:[{saturate:[Mt,Ge,Ue]}],sepia:[{sepia:["",Mt,Ge,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",Ge,Ue]}],"backdrop-blur":[{"backdrop-blur":ge()}],"backdrop-brightness":[{"backdrop-brightness":[Mt,Ge,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[Mt,Ge,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Mt,Ge,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Mt,Ge,Ue]}],"backdrop-invert":[{"backdrop-invert":["",Mt,Ge,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[Mt,Ge,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[Mt,Ge,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",Mt,Ge,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ge,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Mt,"initial",Ge,Ue]}],ease:[{ease:["linear","initial",S,Ge,Ue]}],delay:[{delay:[Mt,Ge,Ue]}],animate:[{animate:["none",E,Ge,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Ge,Ue]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:Oe()}],"rotate-x":[{"rotate-x":Oe()}],"rotate-y":[{"rotate-y":Oe()}],"rotate-z":[{"rotate-z":Oe()}],scale:[{scale:je()}],"scale-x":[{"scale-x":je()}],"scale-y":[{"scale-y":je()}],"scale-z":[{"scale-z":je()}],"scale-3d":["scale-3d"],skew:[{skew:ye()}],"skew-x":[{"skew-x":ye()}],"skew-y":[{"skew-y":ye()}],transform:[{transform:[Ge,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ie()}],"translate-x":[{"translate-x":Ie()}],"translate-y":[{"translate-y":Ie()}],"translate-z":[{"translate-z":Ie()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge,Ue]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[Mt,Sy,pf,KA]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},JGe=NGe(YGe);function tu(...e){return JGe(Ss(e))}const XGe=e=>{const t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return`${t}:${n}`};function QGe(e){const t=st.c(4);let n;t[0]!==e?({...n}=e,t[0]=e,t[1]=n):n=t[1];let r;return t[2]!==n?(r=w.jsx("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...n}),t[2]=n,t[3]=r):r=t[3],r}function eqe(e){const t=st.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=tu("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",n),t[3]=n,t[4]=o):o=t[4];let i;return t[5]!==r||t[6]!==o?(i=w.jsx("ol",{"data-slot":"breadcrumb-list",className:o,...r}),t[5]=r,t[6]=o,t[7]=i):i=t[7],i}function pI(e){const t=st.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=tu("inline-flex items-center gap-1.5",n),t[3]=n,t[4]=o):o=t[4];let i;return t[5]!==r||t[6]!==o?(i=w.jsx("li",{"data-slot":"breadcrumb-item",className:o,...r}),t[5]=r,t[6]=o,t[7]=i):i=t[7],i}function ore(e){const t=st.c(10);let n,r,o;t[0]!==e?({asChild:n,className:r,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);const i=n?jHe:"a";let s;t[4]!==r?(s=tu("hover:text-foreground transition-colors",r),t[4]=r,t[5]=s):s=t[5];let a;return t[6]!==i||t[7]!==o||t[8]!==s?(a=w.jsx(i,{"data-slot":"breadcrumb-link",className:s,...o}),t[6]=i,t[7]=o,t[8]=s,t[9]=a):a=t[9],a}function tqe(e){const t=st.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=tu("text-foreground font-normal",n),t[3]=n,t[4]=o):o=t[4];let i;return t[5]!==r||t[6]!==o?(i=w.jsx("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:o,...r}),t[5]=r,t[6]=o,t[7]=i):i=t[7],i}function ire(e){const t=st.c(12);let n,r,o;t[0]!==e?({children:n,className:r,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);let i;t[4]!==r?(i=tu("[&>svg]:size-3.5",r),t[4]=r,t[5]=i):i=t[5];let s;t[6]!==n?(s=n??w.jsx(Rk,{}),t[6]=n,t[7]=s):s=t[7];let a;return t[8]!==o||t[9]!==i||t[10]!==s?(a=w.jsx("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:i,...o,children:s}),t[8]=o,t[9]=i,t[10]=s,t[11]=a):a=t[11],a}function nqe(){const e=st.c(37),{editor:t}=RHe(),{googleApiKey:n,setEditor:r}=pr(),{currentNote:o,folders:i}=ws();let s,a;if(e[0]!==t||e[1]!==r?(s=()=>(t&&r(t),()=>{r(null)}),a=[t,r],e[0]=t,e[1]=r,e[2]=s,e[3]=a):(s=e[2],a=e[3]),k.useEffect(s,a),!t){let $;return e[4]===Symbol.for("react.memo_cache_sentinel")?($=w.jsx("div",{className:"flex flex-col w-full h-full bg-zinc-930 items-center justify-center",children:w.jsx("div",{className:"text-zinc-400",children:"Loading editor..."})}),e[4]=$):$=e[4],$}let l;e[5]!==o||e[6]!==i?(l=()=>{if(!o?.folder_id)return[];const $=[];let B=o.folder_id,H=0;for(;B&&H<50;){const V=i.find(W=>W.id===B);if(V)$.unshift(V),B=V.parent_id;else break;H++}return $},e[5]=o,e[6]=i,e[7]=l):l=e[7];const c=l;let u;e[8]!==c?(u=c(),e[8]=c,e[9]=u):u=e[9];const f=u;let p;e[10]===Symbol.for("react.memo_cache_sentinel")?(p=w.jsx(pI,{children:w.jsx(ore,{className:"text-zinc-500 hover:text-zinc-300 text-xs",children:"Home"})}),e[10]=p):p=e[10];let m;e[11]!==f.length?(m=f.length>0&&w.jsx(ire,{children:w.jsx(Zne,{className:"size-3 text-zinc-600"})}),e[11]=f.length,e[12]=m):m=e[12];let y;e[13]!==f?(y=f.map(rqe),e[13]=f,e[14]=y):y=e[14];const b=o?.title||"Untitled";let x;e[15]!==b?(x=w.jsx(pI,{children:w.jsx(tqe,{className:"text-zinc-300 text-xs font-medium truncate max-w-[200px]",children:b})}),e[15]=b,e[16]=x):x=e[16];let S;e[17]!==m||e[18]!==y||e[19]!==x?(S=w.jsx("div",{className:"pointer-events-auto overflow-hidden",children:w.jsx(QGe,{children:w.jsxs(eqe,{children:[p,m,y,x]})})}),e[17]=m,e[18]=y,e[19]=x,e[20]=S):S=e[20];let E;e[21]===Symbol.for("react.memo_cache_sentinel")?(E=w.jsx("button",{className:"p-1.5 text-zinc-500 hover:text-yellow-400 hover:bg-zinc-800 rounded-md transition-colors",title:"Favorite",children:w.jsx(aGe,{size:16})}),e[21]=E):E=e[21];let T;e[22]===Symbol.for("react.memo_cache_sentinel")?(T=w.jsxs("div",{className:"flex items-center gap-1 pointer-events-auto bg-zinc-930 pl-2",children:[E,w.jsx("button",{className:"p-1.5 text-zinc-500 hover:text-zinc-200 hover:bg-zinc-800 rounded-md transition-colors",title:"Export",children:w.jsx(mGe,{size:16})})]}),e[22]=T):T=e[22];let A;e[23]!==S?(A=w.jsxs("div",{className:"absolute top-8 left-24 z-10 w-[calc(100%-8rem)] flex items-center justify-between pointer-events-none",children:[S,T]}),e[23]=S,e[24]=A):A=e[24];let M;e[25]!==n?(M=n&&w.jsx(LBe,{}),e[25]=n,e[26]=M):M=e[26];let R;e[27]===Symbol.for("react.memo_cache_sentinel")?(R=w.jsx(OHe,{}),e[27]=R):R=e[27];let O;e[28]!==t?(O=w.jsx(PHe,{editor:t}),e[28]=t,e[29]=O):O=e[29];let I;e[30]!==t||e[31]!==M||e[32]!==O?(I=w.jsx("div",{className:"flex-1",children:w.jsxs(WJ,{editor:t,formattingToolbar:!1,slashMenu:!1,className:"h-full bg-zinc-950 pl-24 pt-20 pr-12","data-theming-css-variables-demo":!0,children:[M,R,O]})}),e[30]=t,e[31]=M,e[32]=O,e[33]=I):I=e[33];let L;return e[34]!==A||e[35]!==I?(L=w.jsxs("div",{className:"flex flex-col w-full h-full bg-zinc-930 relative",children:[A,I]}),e[34]=A,e[35]=I,e[36]=L):L=e[36],L}function rqe(e){return w.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2.5",children:[w.jsx(pI,{children:w.jsx(ore,{className:"text-zinc-500 hover:text-zinc-300 text-xs text-nowrap",children:e.name})}),w.jsx(ire,{children:w.jsx(Zne,{className:"size-3 text-zinc-600"})})]},e.id)}const ZP=k.createContext({});function bv(e){const t=k.useRef(null);return t.current===null&&(t.current=e()),t.current}const WP=typeof window<"u",KP=WP?k.useLayoutEffect:k.useEffect,kE=k.createContext(null);function YP(e,t){e.indexOf(t)===-1&&e.push(t)}function JP(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const nu=(e,t,n)=>n>t?t:n<e?e:n;let XP=()=>{};const ru={},sre=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function are(e){return typeof e=="object"&&e!==null}const lre=e=>/^0[^.\s]+$/u.test(e);function QP(e){let t;return()=>(t===void 0&&(t=e()),t)}const ha=e=>e,oqe=(e,t)=>n=>t(e(n)),vv=(...e)=>e.reduce(oqe),xb=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class eD{constructor(){this.subscriptions=[]}add(t){return YP(this.subscriptions,t),()=>JP(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let i=0;i<o;i++){const s=this.subscriptions[i];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ul=e=>e*1e3,ca=e=>e/1e3;function cre(e,t){return t?e*(1e3/t):0}const ure=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,iqe=1e-7,sqe=12;function aqe(e,t,n,r,o){let i,s,a=0;do s=t+(n-t)/2,i=ure(s,r,o)-e,i>0?n=s:t=s;while(Math.abs(i)>iqe&&++a<sqe);return s}function wv(e,t,n,r){if(e===t&&n===r)return ha;const o=i=>aqe(i,0,1,e,n);return i=>i===0||i===1?i:ure(o(i),t,r)}const dre=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,fre=e=>t=>1-e(1-t),hre=wv(.33,1.53,.69,.99),tD=fre(hre),pre=dre(tD),mre=e=>(e*=2)<1?.5*tD(e):.5*(2-Math.pow(2,-10*(e-1))),nD=e=>1-Math.sin(Math.acos(e)),gre=fre(nD),yre=dre(nD),lqe=wv(.42,0,1,1),cqe=wv(0,0,.58,1),bre=wv(.42,0,.58,1),uqe=e=>Array.isArray(e)&&typeof e[0]!="number",vre=e=>Array.isArray(e)&&typeof e[0]=="number",dqe={linear:ha,easeIn:lqe,easeInOut:bre,easeOut:cqe,circIn:nD,circInOut:yre,circOut:gre,backIn:tD,backInOut:pre,backOut:hre,anticipate:mre},fqe=e=>typeof e=="string",fV=e=>{if(vre(e)){XP(e.length===4);const[t,n,r,o]=e;return wv(t,n,r,o)}else if(fqe(e))return dqe[e];return e},Rw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function hqe(e,t){let n=new Set,r=new Set,o=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){s.has(u)&&(c.schedule(u),e()),u(a)}const c={schedule:(u,f=!1,p=!1)=>{const y=p&&o?n:r;return f&&s.add(u),y.has(u)||y.add(u),u},cancel:u=>{r.delete(u),s.delete(u)},process:u=>{if(a=u,o){i=!0;return}o=!0,[n,r]=[r,n],n.forEach(l),n.clear(),o=!1,i&&(i=!1,c.process(u))}};return c}const pqe=40;function wre(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=Rw.reduce((T,A)=>(T[A]=hqe(i),T),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:p,render:m,postRender:y}=s,b=()=>{const T=ru.useManualTiming?o.timestamp:performance.now();n=!1,ru.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(T-o.timestamp,pqe),1)),o.timestamp=T,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),u.process(o),f.process(o),p.process(o),m.process(o),y.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(b))},x=()=>{n=!0,r=!0,o.isProcessing||e(b)};return{schedule:Rw.reduce((T,A)=>{const M=s[A];return T[A]=(R,O=!1,I=!1)=>(n||x(),M.schedule(R,O,I)),T},{}),cancel:T=>{for(let A=0;A<Rw.length;A++)s[Rw[A]].cancel(T)},state:o,steps:s}}const{schedule:jn,cancel:ou,state:Ro,steps:YA}=wre(typeof requestAnimationFrame<"u"?requestAnimationFrame:ha,!0);let kx;function mqe(){kx=void 0}const Li={now:()=>(kx===void 0&&Li.set(Ro.isProcessing||ru.useManualTiming?Ro.timestamp:performance.now()),kx),set:e=>{kx=e,queueMicrotask(mqe)}},xre=e=>t=>typeof t=="string"&&t.startsWith(e),rD=xre("--"),gqe=xre("var(--"),oD=e=>gqe(e)?yqe.test(e.split("/*")[0].trim()):!1,yqe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gg={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Sb={...gg,transform:e=>nu(0,1,e)},Nw={...gg,default:1},d0=e=>Math.round(e*1e5)/1e5,iD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bqe(e){return e==null}const vqe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sD=(e,t)=>n=>!!(typeof n=="string"&&vqe.test(n)&&n.startsWith(e)||t&&!bqe(n)&&Object.prototype.hasOwnProperty.call(n,t)),Sre=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,i,s,a]=r.match(iD);return{[e]:parseFloat(o),[t]:parseFloat(i),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},wqe=e=>nu(0,255,e),JA={...gg,transform:e=>Math.round(wqe(e))},Lf={test:sD("rgb","red"),parse:Sre("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+JA.transform(e)+", "+JA.transform(t)+", "+JA.transform(n)+", "+d0(Sb.transform(r))+")"};function xqe(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const mI={test:sD("#"),parse:xqe,transform:Lf.transform},xv=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Zu=xv("deg"),Gl=xv("%"),dt=xv("px"),Sqe=xv("vh"),kqe=xv("vw"),hV={...Gl,parse:e=>Gl.parse(e)/100,transform:e=>Gl.transform(e*100)},Zp={test:sD("hsl","hue"),parse:Sre("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gl.transform(d0(t))+", "+Gl.transform(d0(n))+", "+d0(Sb.transform(r))+")"},jr={test:e=>Lf.test(e)||mI.test(e)||Zp.test(e),parse:e=>Lf.test(e)?Lf.parse(e):Zp.test(e)?Zp.parse(e):mI.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Lf.transform(e):Zp.transform(e),getAnimatableNone:e=>{const t=jr.parse(e);return t.alpha=0,jr.transform(t)}},Cqe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Eqe(e){return isNaN(e)&&typeof e=="string"&&(e.match(iD)?.length||0)+(e.match(Cqe)?.length||0)>0}const kre="number",Cre="color",Tqe="var",_qe="var(",pV="${}",Aqe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function kb(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let i=0;const a=t.replace(Aqe,l=>(jr.test(l)?(r.color.push(i),o.push(Cre),n.push(jr.parse(l))):l.startsWith(_qe)?(r.var.push(i),o.push(Tqe),n.push(l)):(r.number.push(i),o.push(kre),n.push(parseFloat(l))),++i,pV)).split(pV);return{values:n,split:a,indexes:r,types:o}}function Ere(e){return kb(e).values}function Tre(e){const{split:t,types:n}=kb(e),r=t.length;return o=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],o[s]!==void 0){const a=n[s];a===kre?i+=d0(o[s]):a===Cre?i+=jr.transform(o[s]):i+=o[s]}return i}}const Mqe=e=>typeof e=="number"?0:jr.test(e)?jr.getAnimatableNone(e):e;function Rqe(e){const t=Ere(e);return Tre(e)(t.map(Mqe))}const Md={test:Eqe,parse:Ere,createTransformer:Tre,getAnimatableNone:Rqe};function XA(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Nqe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,i=0,s=0;if(!t)o=i=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=XA(l,a,e+1/3),i=XA(l,a,e),s=XA(l,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:r}}function Nk(e,t){return n=>n>0?t:e}const ir=(e,t,n)=>e+(t-e)*n,QA=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},Iqe=[mI,Lf,Zp],Oqe=e=>Iqe.find(t=>t.test(e));function mV(e){const t=Oqe(e);if(!t)return!1;let n=t.parse(e);return t===Zp&&(n=Nqe(n)),n}const gV=(e,t)=>{const n=mV(e),r=mV(t);if(!n||!r)return Nk(e,t);const o={...n};return i=>(o.red=QA(n.red,r.red,i),o.green=QA(n.green,r.green,i),o.blue=QA(n.blue,r.blue,i),o.alpha=ir(n.alpha,r.alpha,i),Lf.transform(o))},gI=new Set(["none","hidden"]);function Pqe(e,t){return gI.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Dqe(e,t){return n=>ir(e,t,n)}function aD(e){return typeof e=="number"?Dqe:typeof e=="string"?oD(e)?Nk:jr.test(e)?gV:jqe:Array.isArray(e)?_re:typeof e=="object"?jr.test(e)?gV:$qe:Nk}function _re(e,t){const n=[...e],r=n.length,o=e.map((i,s)=>aD(i)(i,t[s]));return i=>{for(let s=0;s<r;s++)n[s]=o[s](i);return n}}function $qe(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=aD(e[o])(e[o],t[o]));return o=>{for(const i in r)n[i]=r[i](o);return n}}function Lqe(e,t){const n=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const i=t.types[o],s=e.indexes[i][r[i]],a=e.values[s]??0;n[o]=a,r[i]++}return n}const jqe=(e,t)=>{const n=Md.createTransformer(t),r=kb(e),o=kb(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?gI.has(e)&&!o.values.length||gI.has(t)&&!r.values.length?Pqe(e,t):vv(_re(Lqe(r,o),o.values),n):Nk(e,t)};function Are(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ir(e,t,n):aD(e)(e,t)}const zqe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>jn.update(t,n),stop:()=>ou(t),now:()=>Ro.isProcessing?Ro.timestamp:Li.now()}},Mre=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let i=0;i<o;i++)r+=Math.round(e(i/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ik=2e4;function lD(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Ik;)t+=n,r=e.next(t);return t>=Ik?1/0:t}function Bqe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),o=Math.min(lD(r),Ik);return{type:"keyframes",ease:i=>r.next(o*i).value/t,duration:ca(o)}}const Vqe=5;function Rre(e,t,n){const r=Math.max(t-Vqe,0);return cre(n-e(r),t-r)}const gr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},eM=.001;function Fqe({duration:e=gr.duration,bounce:t=gr.bounce,velocity:n=gr.velocity,mass:r=gr.mass}){let o,i,s=1-t;s=nu(gr.minDamping,gr.maxDamping,s),e=nu(gr.minDuration,gr.maxDuration,ca(e)),s<1?(o=c=>{const u=c*s,f=u*e,p=u-n,m=yI(c,s),y=Math.exp(-f);return eM-p/m*y},i=c=>{const f=c*s*e,p=f*n+n,m=Math.pow(s,2)*Math.pow(c,2)*e,y=Math.exp(-f),b=yI(Math.pow(c,2),s);return(-o(c)+eM>0?-1:1)*((p-m)*y)/b}):(o=c=>{const u=Math.exp(-c*e),f=(c-n)*e+1;return-eM+u*f},i=c=>{const u=Math.exp(-c*e),f=(n-c)*(e*e);return u*f});const a=5/e,l=Uqe(o,i,a);if(e=Ul(e),isNaN(l))return{stiffness:gr.stiffness,damping:gr.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:e}}}const Hqe=12;function Uqe(e,t,n){let r=n;for(let o=1;o<Hqe;o++)r=r-e(r)/t(r);return r}function yI(e,t){return e*Math.sqrt(1-t*t)}const Gqe=["duration","bounce"],qqe=["stiffness","damping","mass"];function yV(e,t){return t.some(n=>e[n]!==void 0)}function Zqe(e){let t={velocity:gr.velocity,stiffness:gr.stiffness,damping:gr.damping,mass:gr.mass,isResolvedFromDuration:!1,...e};if(!yV(e,qqe)&&yV(e,Gqe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,i=2*nu(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:gr.mass,stiffness:o,damping:i}}else{const n=Fqe(e);t={...t,...n,mass:gr.mass},t.isResolvedFromDuration=!0}return t}function Ok(e=gr.visualDuration,t=gr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:f,velocity:p,isResolvedFromDuration:m}=Zqe({...n,velocity:-ca(n.velocity||0)}),y=p||0,b=c/(2*Math.sqrt(l*u)),x=s-i,S=ca(Math.sqrt(l/u)),E=Math.abs(x)<5;r||(r=E?gr.restSpeed.granular:gr.restSpeed.default),o||(o=E?gr.restDelta.granular:gr.restDelta.default);let T;if(b<1){const M=yI(S,b);T=R=>{const O=Math.exp(-b*S*R);return s-O*((y+b*S*x)/M*Math.sin(M*R)+x*Math.cos(M*R))}}else if(b===1)T=M=>s-Math.exp(-S*M)*(x+(y+S*x)*M);else{const M=S*Math.sqrt(b*b-1);T=R=>{const O=Math.exp(-b*S*R),I=Math.min(M*R,300);return s-O*((y+b*S*x)*Math.sinh(I)+M*x*Math.cosh(I))/M}}const A={calculatedDuration:m&&f||null,next:M=>{const R=T(M);if(m)a.done=M>=f;else{let O=M===0?y:0;b<1&&(O=M===0?Ul(y):Rre(T,M,R));const I=Math.abs(O)<=r,L=Math.abs(s-R)<=o;a.done=I&&L}return a.value=a.done?s:R,a},toString:()=>{const M=Math.min(lD(A),Ik),R=Mre(O=>A.next(M*O).value,M,30);return M+"ms "+R},toTransition:()=>{}};return A}Ok.applyToOptions=e=>{const t=Bqe(e,100,Ok);return e.ease=t.ease,e.duration=Ul(t.duration),e.type="keyframes",e};function bI({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:s,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=e[0],p={done:!1,value:f},m=I=>a!==void 0&&I<a||l!==void 0&&I>l,y=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let b=n*t;const x=f+b,S=s===void 0?x:s(x);S!==x&&(b=S-f);const E=I=>-b*Math.exp(-I/r),T=I=>S+E(I),A=I=>{const L=E(I),$=T(I);p.done=Math.abs(L)<=c,p.value=p.done?S:$};let M,R;const O=I=>{m(p.value)&&(M=I,R=Ok({keyframes:[p.value,y(p.value)],velocity:Rre(T,I,p.value),damping:o,stiffness:i,restDelta:c,restSpeed:u}))};return O(0),{calculatedDuration:null,next:I=>{let L=!1;return!R&&M===void 0&&(L=!0,A(I),O(I)),M!==void 0&&I>=M?R.next(I-M):(!L&&A(I),p)}}}function Wqe(e,t,n){const r=[],o=n||ru.mix||Are,i=e.length-1;for(let s=0;s<i;s++){let a=o(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||ha:t;a=vv(l,a)}r.push(a)}return r}function Nre(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const i=e.length;if(XP(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Wqe(t,r,o),l=a.length,c=u=>{if(s&&u<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const p=xb(e[f],e[f+1],u);return a[f](p)};return n?u=>c(nu(e[0],e[i-1],u)):c}function Kqe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=xb(0,t,r);e.push(ir(n,1,o))}}function Yqe(e){const t=[0];return Kqe(t,e.length-1),t}function Jqe(e,t){return e.map(n=>n*t)}function Xqe(e,t){return e.map(()=>t||bre).splice(0,e.length-1)}function f0({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=uqe(r)?r.map(fV):fV(r),i={done:!1,value:t[0]},s=Jqe(n&&n.length===t.length?n:Yqe(t),e),a=Nre(s,t,{ease:Array.isArray(o)?o:Xqe(t,o)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const Qqe=e=>e!==null;function cD(e,{repeat:t,repeatType:n="loop"},r,o=1){const i=e.filter(Qqe),a=o<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const eZe={decay:bI,inertia:bI,tween:f0,keyframes:f0,spring:Ok};function Ire(e){typeof e.type=="string"&&(e.type=eZe[e.type])}class uD{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const tZe=e=>e/100;class CE extends uD{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Li.now()&&this.tick(Li.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Ire(t);const{type:n=f0,repeat:r=0,repeatDelay:o=0,repeatType:i,velocity:s=0}=t;let{keyframes:a}=t;const l=n||f0;l!==f0&&typeof a[0]!="number"&&(this.mixKeyframes=vv(tZe,Are(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=lD(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:o,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:p,repeatDelay:m,type:y,onUpdate:b,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const S=this.currentTime-c*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?S<0:S>o;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let T=this.currentTime,A=r;if(f){const I=Math.min(this.currentTime,o)/a;let L=Math.floor(I),$=I%1;!$&&I>=1&&($=1),$===1&&L--,L=Math.min(L,f+1),!!(L%2)&&(p==="reverse"?($=1-$,m&&($-=m/a)):p==="mirror"&&(A=s)),T=nu(0,1,$)*a}const M=E?{done:!1,value:u[0]}:A.next(T);i&&(M.value=i(M.value));let{done:R}=M;!E&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return O&&y!==bI&&(M.value=cD(u,this.options,x,this.speed)),b&&b(M.value),O&&this.finish(),M}then(t,n){return this.finished.then(t,n)}get duration(){return ca(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ca(t)}get time(){return ca(this.currentTime)}set time(t){t=Ul(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Li.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ca(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=zqe,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Li.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function nZe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const jf=e=>e*180/Math.PI,vI=e=>{const t=jf(Math.atan2(e[1],e[0]));return wI(t)},rZe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:vI,rotateZ:vI,skewX:e=>jf(Math.atan(e[1])),skewY:e=>jf(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},wI=e=>(e=e%360,e<0&&(e+=360),e),bV=vI,vV=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),wV=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),oZe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vV,scaleY:wV,scale:e=>(vV(e)+wV(e))/2,rotateX:e=>wI(jf(Math.atan2(e[6],e[5]))),rotateY:e=>wI(jf(Math.atan2(-e[2],e[0]))),rotateZ:bV,rotate:bV,skewX:e=>jf(Math.atan(e[4])),skewY:e=>jf(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function xI(e){return e.includes("scale")?1:0}function SI(e,t){if(!e||e==="none")return xI(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=oZe,o=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=rZe,o=a}if(!o)return xI(t);const i=r[t],s=o[1].split(",").map(sZe);return typeof i=="function"?i(s):s[i]}const iZe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return SI(n,t)};function sZe(e){return parseFloat(e.trim())}const yg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bg=new Set(yg),xV=e=>e===gg||e===dt,aZe=new Set(["x","y","z"]),lZe=yg.filter(e=>!aZe.has(e));function cZe(e){const t=[];return lZe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Yf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>SI(t,"x"),y:(e,{transform:t})=>SI(t,"y")};Yf.translateX=Yf.x;Yf.translateY=Yf.y;const Jf=new Set;let kI=!1,CI=!1,EI=!1;function Ore(){if(CI){const e=Array.from(Jf).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=cZe(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([i,s])=>{r.getValue(i)?.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}CI=!1,kI=!1,Jf.forEach(e=>e.complete(EI)),Jf.clear()}function Pre(){Jf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(CI=!0)})}function uZe(){EI=!0,Pre(),Ore(),EI=!1}class dD{constructor(t,n,r,o,i,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Jf.add(this),kI||(kI=!0,jn.read(Pre),jn.resolveKeyframes(Ore))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;if(t[0]===null){const i=o?.get(),s=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,s);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=s),o&&i===void 0&&o.set(t[0])}nZe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Jf.delete(this)}cancel(){this.state==="scheduled"&&(Jf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const dZe=e=>e.startsWith("--");function fZe(e,t,n){dZe(t)?e.style.setProperty(t,n):e.style[t]=n}const hZe=QP(()=>window.ScrollTimeline!==void 0),pZe={};function mZe(e,t){const n=QP(e);return()=>pZe[t]??n()}const Dre=mZe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zy=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,SV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zy([0,.65,.55,1]),circOut:zy([.55,0,1,.45]),backIn:zy([.31,.01,.66,-.59]),backOut:zy([.33,1.53,.69,.99])};function $re(e,t){if(e)return typeof e=="function"?Dre()?Mre(e,t):"ease-out":vre(e)?zy(e):Array.isArray(e)?e.map(n=>$re(n,t)||SV.easeOut):SV[e]}function gZe(e,t,n,{delay:r=0,duration:o=300,repeat:i=0,repeatType:s="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const f=$re(a,o);Array.isArray(f)&&(u.easing=f);const p={delay:r,duration:o,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),e.animate(u,p)}function Lre(e){return typeof e=="function"&&"applyToOptions"in e}function yZe({type:e,...t}){return Lre(e)&&Dre()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class bZe extends uD{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:o,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=t,XP(typeof t.type!="string");const c=yZe(t);this.animation=gZe(n,r,o,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=cD(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):fZe(n,r,u),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ca(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ca(t)}get time(){return ca(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ul(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&hZe()?(this.animation.timeline=t,ha):n(this)}}const jre={anticipate:mre,backInOut:pre,circInOut:yre};function vZe(e){return e in jre}function wZe(e){typeof e.ease=="string"&&vZe(e.ease)&&(e.ease=jre[e.ease])}const kV=10;class xZe extends bZe{constructor(t){wZe(t),Ire(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:o,element:i,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new CE({...s,autoplay:!1}),l=Ul(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-kV).value,a.sample(l).value,kV),a.stop()}}const CV=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Md.test(e)||e==="0")&&!e.startsWith("url("));function SZe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function kZe(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],s=CV(o,t),a=CV(i,t);return!s||!a?!1:SZe(e)||(n==="spring"||Lre(n))&&r}function TI(e){e.duration=0,e.type="keyframes"}const CZe=new Set(["opacity","clipPath","filter","transform"]),EZe=QP(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function TZe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:o,damping:i,type:s}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return EZe()&&n&&CZe.has(n)&&(n!=="transform"||!c)&&!l&&!r&&o!=="mirror"&&i!==0&&s!=="inertia"}const _Ze=40;class AZe extends uD{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:s="loop",keyframes:a,name:l,motionValue:c,element:u,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Li.now();const p={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:i,repeatType:s,name:l,motionValue:c,element:u,...f},m=u?.KeyframeResolver||dD;this.keyframeResolver=new m(a,(y,b,x)=>this.onKeyframesResolved(y,b,p,!x),l,c,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,o){this.keyframeResolver=void 0;const{name:i,type:s,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=Li.now(),kZe(t,i,s,a)||((ru.instantAnimations||!l)&&u?.(cD(t,r,n)),t[0]=t[t.length-1],TI(r),r.repeat=0);const p={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>_Ze?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!c&&TZe(p)?new xZe({...p,element:p.motionValue.owner.current}):new CE(p);m.finished.then(()=>this.notifyFinished()).catch(ha),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),uZe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const MZe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RZe(e){const t=MZe.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function zre(e,t,n=1){const[r,o]=RZe(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const s=i.trim();return sre(s)?parseFloat(s):s}return oD(o)?zre(o,t,n+1):o}function fD(e,t){return e?.[t]??e?.default??e}const Bre=new Set(["width","height","top","left","right","bottom",...yg]),NZe={test:e=>e==="auto",parse:e=>e},Vre=e=>t=>t.test(e),Fre=[gg,dt,Gl,Zu,kqe,Sqe,NZe],EV=e=>Fre.find(Vre(e));function IZe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||lre(e):!0}const OZe=new Set(["brightness","contrast","saturate","opacity"]);function PZe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(iD)||[];if(!r)return e;const o=n.replace(r,"");let i=OZe.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+o+")"}const DZe=/\b([a-z-]*)\(.*?\)/gu,_I={...Md,getAnimatableNone:e=>{const t=e.match(DZe);return t?t.map(PZe).join(" "):e}},TV={...gg,transform:Math.round},$Ze={rotate:Zu,rotateX:Zu,rotateY:Zu,rotateZ:Zu,scale:Nw,scaleX:Nw,scaleY:Nw,scaleZ:Nw,skew:Zu,skewX:Zu,skewY:Zu,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:Sb,originX:hV,originY:hV,originZ:dt},hD={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,backgroundPositionX:dt,backgroundPositionY:dt,...$Ze,zIndex:TV,fillOpacity:Sb,strokeOpacity:Sb,numOctaves:TV},LZe={...hD,color:jr,backgroundColor:jr,outlineColor:jr,fill:jr,stroke:jr,borderColor:jr,borderTopColor:jr,borderRightColor:jr,borderBottomColor:jr,borderLeftColor:jr,filter:_I,WebkitFilter:_I},Hre=e=>LZe[e];function Ure(e,t){let n=Hre(e);return n!==_I&&(n=Md),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const jZe=new Set(["auto","none","0"]);function zZe(e,t,n){let r=0,o;for(;r<e.length&&!o;){const i=e[r];typeof i=="string"&&!jZe.has(i)&&kb(i).values.length&&(o=e[r]),r++}if(o&&n)for(const i of t)e[i]=Ure(n,o)}class BZe extends dD{constructor(t,n,r,o,i){super(t,n,r,o,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),oD(c))){const u=zre(c,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Bre.has(r)||t.length!==2)return;const[o,i]=t,s=EV(o),a=EV(i);if(s!==a)if(xV(s)&&xV(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Yf[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)(t[o]===null||IZe(t[o]))&&r.push(o);r.length&&zZe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yf[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=Yf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{t.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function Gre(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const o=n?.[e]??r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const qre=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Zre(e){return are(e)&&"offsetHeight"in e}const _V=30,VZe=e=>!isNaN(parseFloat(e)),h0={current:void 0};class FZe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const o=Li.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Li.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=VZe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new eD);const r=this.events[t].add(n);return t==="change"?()=>{r(),jn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return h0.current&&h0.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=Li.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>_V)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,_V);return cre(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mh(e,t){return new FZe(e,t)}const{schedule:pD}=wre(queueMicrotask,!1),ja={x:!1,y:!1};function Wre(){return ja.x||ja.y}function HZe(e){return e==="x"||e==="y"?ja[e]?null:(ja[e]=!0,()=>{ja[e]=!1}):ja.x||ja.y?null:(ja.x=ja.y=!0,()=>{ja.x=ja.y=!1})}function Kre(e,t){const n=Gre(e),r=new AbortController,o={passive:!0,...t,signal:r.signal};return[n,o,()=>r.abort()]}function AV(e){return!(e.pointerType==="touch"||Wre())}function UZe(e,t,n={}){const[r,o,i]=Kre(e,n),s=a=>{if(!AV(a))return;const{target:l}=a,c=t(l,a);if(typeof c!="function"||!l)return;const u=f=>{AV(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,o)};return r.forEach(a=>{a.addEventListener("pointerenter",s,o)}),i}const Yre=(e,t)=>t?e===t?!0:Yre(e,t.parentElement):!1,mD=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,GZe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qZe(e){return GZe.has(e.tagName)||e.tabIndex!==-1}const Cx=new WeakSet;function MV(e){return t=>{t.key==="Enter"&&e(t)}}function tM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const ZZe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=MV(()=>{if(Cx.has(n))return;tM(n,"down");const o=MV(()=>{tM(n,"up")}),i=()=>tM(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function RV(e){return mD(e)&&!Wre()}function WZe(e,t,n={}){const[r,o,i]=Kre(e,n),s=a=>{const l=a.currentTarget;if(!RV(a))return;Cx.add(l);const c=t(l,a),u=(m,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),Cx.has(l)&&Cx.delete(l),RV(m)&&typeof c=="function"&&c(m,{success:y})},f=m=>{u(m,l===window||l===document||n.useGlobalTarget||Yre(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",f,o),window.addEventListener("pointercancel",p,o)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",s,o),Zre(a)&&(a.addEventListener("focus",c=>ZZe(c,o)),!qZe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function Jre(e){return are(e)&&"ownerSVGElement"in e}function KZe(e){return Jre(e)&&e.tagName==="svg"}function YZe(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],i=e[2+n],s=e[3+n],a=Nre(o,i,s);return t?a(r):a}const bo=e=>!!(e&&e.getVelocity);function JZe(e,t,n){const r=e.get();let o=null,i=r,s;const a=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,l=()=>{o&&(o.stop(),o=null)},c=()=>{l(),o=new CE({keyframes:[IV(e.get()),IV(i)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:s})};if(e.attach((u,f)=>{i=u,s=p=>f(NV(p,a)),jn.postRender(c)},l),bo(t)){const u=t.on("change",p=>e.set(NV(p,a))),f=e.on("destroy",u);return()=>{u(),f()}}return l}function NV(e,t){return t?e+t:e}function IV(e){return typeof e=="number"?e:parseFloat(e)}const XZe=[...Fre,jr,Md],QZe=e=>XZe.find(Vre(e)),Sv=k.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function OV(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function eWe(...e){return t=>{let n=!1;const r=e.map(o=>{const i=OV(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():OV(e[o],null)}}}}function tWe(...e){return k.useCallback(eWe(...e),e)}class nWe extends k.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=Zre(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=o-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function rWe({children:e,isPresent:t,anchorX:n,root:r}){const o=k.useId(),i=k.useRef(null),s=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=k.useContext(Sv),l=tWe(i,e?.ref);return k.useInsertionEffect(()=>{const{width:c,height:u,top:f,left:p,right:m}=s.current;if(t||!i.current||!c||!u)return;const y=n==="left"?`left: ${p}`:`right: ${m}`;i.current.dataset.motionPopId=o;const b=document.createElement("style");a&&(b.nonce=a);const x=r??document.head;return x.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{x.contains(b)&&x.removeChild(b)}},[t]),w.jsx(nWe,{isPresent:t,childRef:i,sizeRef:s,children:k.cloneElement(e,{ref:l})})}const oWe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:i,mode:s,anchorX:a,root:l})=>{const c=bv(iWe),u=k.useId();let f=!0,p=k.useMemo(()=>(f=!1,{id:u,initial:t,isPresent:n,custom:o,onExitComplete:m=>{c.set(m,!0);for(const y of c.values())if(!y)return;r&&r()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[n,c,r]);return i&&f&&(p={...p}),k.useMemo(()=>{c.forEach((m,y)=>c.set(y,!1))},[n]),k.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),s==="popLayout"&&(e=w.jsx(rWe,{isPresent:n,anchorX:a,root:l,children:e})),w.jsx(kE.Provider,{value:p,children:e})};function iWe(){return new Map}function Xre(e=!0){const t=k.useContext(kE);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=t,i=k.useId();k.useEffect(()=>{if(e)return o(i)},[e]);const s=k.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const Iw=e=>e.key||"";function PV(e){const t=[];return k.Children.forEach(e,n=>{k.isValidElement(n)&&t.push(n)}),t}const Wa=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:i="sync",propagate:s=!1,anchorX:a="left",root:l})=>{const[c,u]=Xre(s),f=k.useMemo(()=>PV(e),[e]),p=s&&!c?[]:f.map(Iw),m=k.useRef(!0),y=k.useRef(f),b=bv(()=>new Map),[x,S]=k.useState(f),[E,T]=k.useState(f);KP(()=>{m.current=!1,y.current=f;for(let R=0;R<E.length;R++){const O=Iw(E[R]);p.includes(O)?b.delete(O):b.get(O)!==!0&&b.set(O,!1)}},[E,p.length,p.join("-")]);const A=[];if(f!==x){let R=[...f];for(let O=0;O<E.length;O++){const I=E[O],L=Iw(I);p.includes(L)||(R.splice(O,0,I),A.push(I))}return i==="wait"&&A.length&&(R=A),T(PV(R)),S(f),null}const{forceRender:M}=k.useContext(ZP);return w.jsx(w.Fragment,{children:E.map(R=>{const O=Iw(R),I=s&&!c?!1:f===E||p.includes(O),L=()=>{if(b.has(O))b.set(O,!0);else return;let $=!0;b.forEach(B=>{B||($=!1)}),$&&(M?.(),T(y.current),s&&u?.(),r&&r())};return w.jsx(oWe,{isPresent:I,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:i,root:l,onExitComplete:I?void 0:L,anchorX:a,children:R},O)})})},Qre=k.createContext({strict:!1}),DV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pm={};for(const e in DV)Pm[e]={isEnabled:t=>DV[e].some(n=>!!t[n])};function sWe(e){for(const t in e)Pm[t]={...Pm[t],...e[t]}}const aWe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pk(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||aWe.has(e)}let eoe=e=>!Pk(e);function lWe(e){typeof e=="function"&&(eoe=t=>t.startsWith("on")?!Pk(t):e(t))}try{lWe(require("@emotion/is-prop-valid").default)}catch{}function cWe(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(eoe(o)||n===!0&&Pk(o)||!t&&!Pk(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}const EE=k.createContext({});function TE(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Cb(e){return typeof e=="string"||Array.isArray(e)}const gD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yD=["initial",...gD];function _E(e){return TE(e.animate)||yD.some(t=>Cb(e[t]))}function toe(e){return!!(_E(e)||e.variants)}function uWe(e,t){if(_E(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Cb(n)?n:void 0,animate:Cb(r)?r:void 0}}return e.inherit!==!1?t:{}}function dWe(e){const{initial:t,animate:n}=uWe(e,k.useContext(EE));return k.useMemo(()=>({initial:t,animate:n}),[$V(t),$V(n)])}function $V(e){return Array.isArray(e)?e.join(" "):e}const Eb={};function fWe(e){for(const t in e)Eb[t]=e[t],rD(t)&&(Eb[t].isCSSVariable=!0)}function noe(e,{layout:t,layoutId:n}){return bg.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Eb[e]||e==="opacity")}const hWe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pWe=yg.length;function mWe(e,t,n){let r="",o=!0;for(let i=0;i<pWe;i++){const s=yg[i],a=e[s];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(s.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=qre(a,hD[s]);if(!l){o=!1;const u=hWe[s]||s;r+=`${u}(${c}) `}n&&(t[s]=c)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function bD(e,t,n){const{style:r,vars:o,transformOrigin:i}=e;let s=!1,a=!1;for(const l in t){const c=t[l];if(bg.has(l)){s=!0;continue}else if(rD(l)){o[l]=c;continue}else{const u=qre(c,hD[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(t.transform||(s||n?r.transform=mWe(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const vD=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function roe(e,t,n){for(const r in t)!bo(t[r])&&!noe(r,n)&&(e[r]=t[r])}function gWe({transformTemplate:e},t){return k.useMemo(()=>{const n=vD();return bD(n,t,e),Object.assign({},n.vars,n.style)},[t])}function yWe(e,t){const n=e.style||{},r={};return roe(r,n,e),Object.assign(r,gWe(e,t)),r}function bWe(e,t){const n={},r=yWe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const vWe={offset:"stroke-dashoffset",array:"stroke-dasharray"},wWe={offset:"strokeDashoffset",array:"strokeDasharray"};function xWe(e,t,n=1,r=0,o=!0){e.pathLength=1;const i=o?vWe:wWe;e[i.offset]=dt.transform(-r);const s=dt.transform(t),a=dt.transform(n);e[i.array]=`${s} ${a}`}function ooe(e,{attrX:t,attrY:n,attrScale:r,pathLength:o,pathSpacing:i=1,pathOffset:s=0,...a},l,c,u){if(bD(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p}=e;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=u?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&xWe(f,o,i,s,!1)}const ioe=()=>({...vD(),attrs:{}}),soe=e=>typeof e=="string"&&e.toLowerCase()==="svg";function SWe(e,t,n,r){const o=k.useMemo(()=>{const i=ioe();return ooe(i,t,soe(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};roe(i,e.style,e),o.style={...i,...o.style}}return o}const kWe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wD(e){return typeof e!="string"||e.includes("-")?!1:!!(kWe.indexOf(e)>-1||/[A-Z]/u.test(e))}function CWe(e,t,n,{latestValues:r},o,i=!1){const a=(wD(e)?SWe:bWe)(t,r,o,e),l=cWe(t,typeof e=="string",i),c=e!==k.Fragment?{...l,...a,ref:n}:{},{children:u}=t,f=k.useMemo(()=>bo(u)?u.get():u,[u]);return k.createElement(e,{...c,children:f})}function LV(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function xD(e,t,n,r){if(typeof t=="function"){const[o,i]=LV(r);t=t(n!==void 0?n:e.custom,o,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,i]=LV(r);t=t(n!==void 0?n:e.custom,o,i)}return t}function Ex(e){return bo(e)?e.get():e}function EWe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,o){return{latestValues:TWe(n,r,o,e),renderState:t()}}function TWe(e,t,n,r){const o={},i=r(e,{});for(const p in i)o[p]=Ex(i[p]);let{initial:s,animate:a}=e;const l=_E(e),c=toe(e);t&&c&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let u=n?n.initial===!1:!1;u=u||s===!1;const f=u?a:s;if(f&&typeof f!="boolean"&&!TE(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const y=xD(e,p[m]);if(y){const{transitionEnd:b,transition:x,...S}=y;for(const E in S){let T=S[E];if(Array.isArray(T)){const A=u?T.length-1:0;T=T[A]}T!==null&&(o[E]=T)}for(const E in b)o[E]=b[E]}}}return o}const aoe=e=>(t,n)=>{const r=k.useContext(EE),o=k.useContext(kE),i=()=>EWe(e,t,r,o);return n?i():bv(i)};function SD(e,t,n){const{style:r}=e,o={};for(const i in r)(bo(r[i])||t.style&&bo(t.style[i])||noe(i,e)||n?.getValue(i)?.liveStyle!==void 0)&&(o[i]=r[i]);return o}const _We=aoe({scrapeMotionValuesFromProps:SD,createRenderState:vD});function loe(e,t,n){const r=SD(e,t,n);for(const o in e)if(bo(e[o])||bo(t[o])){const i=yg.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[i]=e[o]}return r}const AWe=aoe({scrapeMotionValuesFromProps:loe,createRenderState:ioe}),MWe=Symbol.for("motionComponentSymbol");function Wp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function RWe(e,t,n){return k.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Wp(n)&&(n.current=r))},[t])}const kD=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),NWe="framerAppearId",coe="data-"+kD(NWe),uoe=k.createContext({});function IWe(e,t,n,r,o){const{visualElement:i}=k.useContext(EE),s=k.useContext(Qre),a=k.useContext(kE),l=k.useContext(Sv).reducedMotion,c=k.useRef(null);r=r||s.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,f=k.useContext(uoe);u&&!u.projection&&o&&(u.type==="html"||u.type==="svg")&&OWe(c.current,n,o,f);const p=k.useRef(!1);k.useInsertionEffect(()=>{u&&p.current&&u.update(n,a)});const m=n[coe],y=k.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return KP(()=>{u&&(p.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),y.current&&u.animationState&&u.animationState.animateChanges())}),k.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),y.current=!1),u.enteringChildren=void 0)}),u}function OWe(e,t,n,r){const{layoutId:o,layout:i,drag:s,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:doe(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!s||a&&Wp(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function doe(e){if(e)return e.options.allowProjection!==!1?e.projection:doe(e.parent)}function nM(e,{forwardMotionProps:t=!1}={},n,r){n&&sWe(n);const o=wD(e)?AWe:_We;function i(a,l){let c;const u={...k.useContext(Sv),...a,layoutId:PWe(a)},{isStatic:f}=u,p=dWe(a),m=o(a,f);if(!f&&WP){DWe();const y=$We(u);c=y.MeasureLayout,p.visualElement=IWe(e,m,u,r,y.ProjectionNode)}return w.jsxs(EE.Provider,{value:p,children:[c&&p.visualElement?w.jsx(c,{visualElement:p.visualElement,...u}):null,CWe(e,a,RWe(m,p.visualElement,l),m,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const s=k.forwardRef(i);return s[MWe]=e,s}function PWe({layoutId:e}){const t=k.useContext(ZP).id;return t&&e!==void 0?t+"-"+e:e}function DWe(e,t){k.useContext(Qre).strict}function $We(e){const{drag:t,layout:n}=Pm;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function LWe(e,t){if(typeof Proxy>"u")return nM;const n=new Map,r=(i,s)=>nM(i,s,e,t),o=(i,s)=>r(i,s);return new Proxy(o,{get:(i,s)=>s==="create"?r:(n.has(s)||n.set(s,nM(s,void 0,e,t)),n.get(s))})}function foe({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function jWe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function zWe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function rM(e){return e===void 0||e===1}function AI({scale:e,scaleX:t,scaleY:n}){return!rM(e)||!rM(t)||!rM(n)}function vf(e){return AI(e)||hoe(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function hoe(e){return jV(e.x)||jV(e.y)}function jV(e){return e&&e!=="0%"}function Dk(e,t,n){const r=e-n,o=t*r;return n+o}function zV(e,t,n,r,o){return o!==void 0&&(e=Dk(e,o,r)),Dk(e,n,r)+t}function MI(e,t=0,n=1,r,o){e.min=zV(e.min,t,n,r,o),e.max=zV(e.max,t,n,r,o)}function poe(e,{x:t,y:n}){MI(e.x,t.translate,t.scale,t.originPoint),MI(e.y,n.translate,n.scale,n.originPoint)}const BV=.999999999999,VV=1.0000000000001;function BWe(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let i,s;for(let a=0;a<o;a++){i=n[a],s=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Yp(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,poe(e,s)),r&&vf(i.latestValues)&&Yp(e,i.latestValues))}t.x<VV&&t.x>BV&&(t.x=1),t.y<VV&&t.y>BV&&(t.y=1)}function Kp(e,t){e.min=e.min+t,e.max=e.max+t}function FV(e,t,n,r,o=.5){const i=ir(e.min,e.max,o);MI(e,t,n,i,r)}function Yp(e,t){FV(e.x,t.x,t.scaleX,t.scale,t.originX),FV(e.y,t.y,t.scaleY,t.scale,t.originY)}function moe(e,t){return foe(zWe(e.getBoundingClientRect(),t))}function VWe(e,t,n){const r=moe(e,n),{scroll:o}=t;return o&&(Kp(r.x,o.offset.x),Kp(r.y,o.offset.y)),r}const HV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jp=()=>({x:HV(),y:HV()}),UV=()=>({min:0,max:0}),Mr=()=>({x:UV(),y:UV()}),RI={current:null},goe={current:!1};function FWe(){if(goe.current=!0,!!WP)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>RI.current=e.matches;e.addEventListener("change",t),t()}else RI.current=!1}const HWe=new WeakMap;function UWe(e,t,n){for(const r in t){const o=t[r],i=n[r];if(bo(o))e.addValue(r,o);else if(bo(i))e.addValue(r,mh(o,{owner:e}));else if(i!==o)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(o):s.hasAnimated||s.set(o)}else{const s=e.getStaticValue(r);e.addValue(r,mh(s!==void 0?s:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const GV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GWe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Li.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,jn.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=_E(n),this.isVariantNode=toe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&bo(m)&&m.set(l[p])}}mount(t){this.current=t,HWe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),goe.current||FWe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:RI.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ou(this.notifyUpdate),ou(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=bg.has(t);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&jn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Pm){const n=Pm[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<GV.length;r++){const o=GV[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const i="on"+o,s=t[i];s&&(this.propEventSubscriptions[o]=this.on(o,s))}this.prevMotionValues=UWe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=mh(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(sre(r)||lre(r))?r=parseFloat(r):!QZe(r)&&Md.test(n)&&(r=Ure(t,n)),this.setBaseTarget(t,bo(r)?r.get():r)),bo(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=xD(this.props,n,this.presenceContext?.custom);i&&(r=i[t])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!bo(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new eD),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){pD.render(this.render)}}class yoe extends GWe{constructor(){super(...arguments),this.KeyframeResolver=BZe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;bo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function boe(e,{style:t,vars:n},r,o){const i=e.style;let s;for(s in t)i[s]=t[s];o?.applyProjectionStyles(i,r);for(s in n)i.setProperty(s,n[s])}function qWe(e){return window.getComputedStyle(e)}class ZWe extends yoe{constructor(){super(...arguments),this.type="html",this.renderInstance=boe}readValueFromInstance(t,n){if(bg.has(n))return this.projection?.isProjecting?xI(n):iZe(t,n);{const r=qWe(t),o=(rD(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return moe(t,n)}build(t,n,r){bD(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return SD(t,n,r)}}const voe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function WWe(e,t,n,r){boe(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(voe.has(o)?o:kD(o),t.attrs[o])}class KWe extends yoe{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(bg.has(n)){const r=Hre(n);return r&&r.default||0}return n=voe.has(n)?n:kD(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return loe(t,n,r)}build(t,n,r){ooe(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,o){WWe(t,n,r,o)}mount(t){this.isSVGTag=soe(t.tagName),super.mount(t)}}const YWe=(e,t)=>wD(e)?new KWe(t):new ZWe(t,{allowProjection:e!==k.Fragment});function dm(e,t,n){const r=e.getProps();return xD(r,t,n!==void 0?n:r.custom,e)}const NI=e=>Array.isArray(e);function JWe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,mh(n))}function XWe(e){return NI(e)?e[e.length-1]||0:e}function QWe(e,t){const n=dm(e,t);let{transitionEnd:r={},transition:o={},...i}=n||{};i={...i,...r};for(const s in i){const a=XWe(i[s]);JWe(e,s,a)}}function eKe(e){return!!(bo(e)&&e.add)}function II(e,t){const n=e.getValue("willChange");if(eKe(n))return n.add(t);if(!n&&ru.WillChange){const r=new ru.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function woe(e){return e.props[coe]}const tKe=e=>e!==null;function nKe(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(tKe),i=t&&n!=="loop"&&t%2===1?0:o.length-1;return o[i]}const rKe={type:"spring",stiffness:500,damping:25,restSpeed:10},oKe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),iKe={type:"keyframes",duration:.8},sKe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aKe=(e,{keyframes:t})=>t.length>2?iKe:bg.has(e)?e.startsWith("scale")?oKe(t[1]):rKe:sKe;function lKe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:i,repeatType:s,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const CD=(e,t,n,r={},o,i)=>s=>{const a=fD(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Ul(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:o};lKe(a)||Object.assign(u,aKe(e,u)),u.duration&&(u.duration=Ul(u.duration)),u.repeatDelay&&(u.repeatDelay=Ul(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(TI(u),u.delay===0&&(f=!0)),(ru.instantAnimations||ru.skipAnimations)&&(f=!0,TI(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,f&&!i&&t.get()!==void 0){const p=nKe(u.keyframes,a);if(p!==void 0){jn.update(()=>{u.onUpdate(p),u.onComplete()});return}}return a.isSync?new CE(u):new AZe(u)};function cKe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function xoe(e,t,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...a}=t;r&&(i=r);const l=[],c=o&&e.animationState&&e.animationState.getState()[o];for(const u in a){const f=e.getValue(u,e.latestValues[u]??null),p=a[u];if(p===void 0||c&&cKe(c,u))continue;const m={delay:n,...fD(i||{},u)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===y&&!m.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const S=woe(e);if(S){const E=window.MotionHandoffAnimation(S,u,jn);E!==null&&(m.startTime=E,b=!0)}}II(e,u),f.start(CD(u,f,p,e.shouldReduceMotion&&Bre.has(u)?{type:!1}:m,e,b));const x=f.animation;x&&l.push(x)}return s&&Promise.all(l).then(()=>{jn.update(()=>{s&&QWe(e,s)})}),l}function Soe(e,t,n,r=0,o=1){const i=Array.from(e).sort((c,u)=>c.sortNodePosition(u)).indexOf(t),s=e.size,a=(s-1)*r;return typeof n=="function"?n(i,s):o===1?i*r:a-i*r}function OI(e,t,n={}){const r=dm(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const i=r?()=>Promise.all(xoe(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:f}=o;return uKe(e,t,l,c,u,f,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[l,c]=a==="beforeChildren"?[i,s]:[s,i];return l().then(()=>c())}else return Promise.all([i(),s(n.delay)])}function uKe(e,t,n=0,r=0,o=0,i=1,s){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(OI(l,t,{...s,delay:n+(typeof r=="function"?0:r)+Soe(e.variantChildren,l,r,o,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function dKe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(i=>OI(e,i,n));r=Promise.all(o)}else if(typeof t=="string")r=OI(e,t,n);else{const o=typeof t=="function"?dm(e,t,n.custom):t;r=Promise.all(xoe(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function koe(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const fKe=yD.length;function Coe(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Coe(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<fKe;n++){const r=yD[n],o=e.props[r];(Cb(o)||o===!1)&&(t[r]=o)}return t}const hKe=[...gD].reverse(),pKe=gD.length;function mKe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>dKe(e,n,r)))}function gKe(e){let t=mKe(e),n=qV(),r=!0;const o=l=>(c,u)=>{const f=dm(e,u,l==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:p,transitionEnd:m,...y}=f;c={...c,...y,...m}}return c};function i(l){t=l(e)}function s(l){const{props:c}=e,u=Coe(e.parent)||{},f=[],p=new Set;let m={},y=1/0;for(let x=0;x<pKe;x++){const S=hKe[x],E=n[S],T=c[S]!==void 0?c[S]:u[S],A=Cb(T),M=S===l?E.isActive:null;M===!1&&(y=x);let R=T===u[S]&&T!==c[S]&&A;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),E.protectedKeys={...m},!E.isActive&&M===null||!T&&!E.prevProp||TE(T)||typeof T=="boolean")continue;const O=yKe(E.prevProp,T);let I=O||S===l&&E.isActive&&!R&&A||x>y&&A,L=!1;const $=Array.isArray(T)?T:[T];let B=$.reduce(o(S),{});M===!1&&(B={});const{prevResolvedValues:H={}}=E,V={...H,...B},W=G=>{I=!0,p.has(G)&&(L=!0,p.delete(G)),E.needsAnimating[G]=!0;const F=e.getValue(G);F&&(F.liveStyle=!1)};for(const G in V){const F=B[G],Z=H[G];if(m.hasOwnProperty(G))continue;let N=!1;NI(F)&&NI(Z)?N=!koe(F,Z):N=F!==Z,N?F!=null?W(G):p.add(G):F!==void 0&&p.has(G)?W(G):E.protectedKeys[G]=!0}E.prevProp=T,E.prevResolvedValues=B,E.isActive&&(m={...m,...B}),r&&e.blockInitialAnimation&&(I=!1);const K=R&&O;I&&(!K||L)&&f.push(...$.map(G=>{const F={type:S};if(typeof G=="string"&&r&&!K&&e.manuallyAnimateOnMount&&e.parent){const{parent:Z}=e,N=dm(Z,G);if(Z.enteringChildren&&N){const{delayChildren:U}=N.transition||{};F.delay=Soe(Z.enteringChildren,e,U)}}return{animation:G,options:F}}))}if(p.size){const x={};if(typeof c.initial!="boolean"){const S=dm(e,Array.isArray(c.initial)?c.initial[0]:c.initial);S&&S.transition&&(x.transition=S.transition)}p.forEach(S=>{const E=e.getBaseTarget(S),T=e.getValue(S);T&&(T.liveStyle=!0),x[S]=E??null}),f.push({animation:x})}let b=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(f):Promise.resolve()}function a(l,c){if(n[l].isActive===c)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(l,c)),n[l].isActive=c;const u=s(l);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:s,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=qV()}}}function yKe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!koe(t,e):!1}function mf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qV(){return{animate:mf(!0),whileInView:mf(),whileHover:mf(),whileTap:mf(),whileDrag:mf(),whileFocus:mf(),exit:mf()}}class Bd{constructor(t){this.isMounted=!1,this.node=t}update(){}}class bKe extends Bd{constructor(t){super(t),t.animationState||(t.animationState=gKe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();TE(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let vKe=0;class wKe extends Bd{constructor(){super(...arguments),this.id=vKe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const xKe={animation:{Feature:bKe},exit:{Feature:wKe}};function Tb(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function kv(e){return{point:{x:e.pageX,y:e.pageY}}}const SKe=e=>t=>mD(t)&&e(t,kv(t));function p0(e,t,n,r){return Tb(e,t,SKe(n),r)}const Eoe=1e-4,kKe=1-Eoe,CKe=1+Eoe,Toe=.01,EKe=0-Toe,TKe=0+Toe;function hi(e){return e.max-e.min}function _Ke(e,t,n){return Math.abs(e-t)<=n}function ZV(e,t,n,r=.5){e.origin=r,e.originPoint=ir(t.min,t.max,e.origin),e.scale=hi(n)/hi(t),e.translate=ir(n.min,n.max,e.origin)-e.originPoint,(e.scale>=kKe&&e.scale<=CKe||isNaN(e.scale))&&(e.scale=1),(e.translate>=EKe&&e.translate<=TKe||isNaN(e.translate))&&(e.translate=0)}function m0(e,t,n,r){ZV(e.x,t.x,n.x,r?r.originX:void 0),ZV(e.y,t.y,n.y,r?r.originY:void 0)}function WV(e,t,n){e.min=n.min+t.min,e.max=e.min+hi(t)}function AKe(e,t,n){WV(e.x,t.x,n.x),WV(e.y,t.y,n.y)}function KV(e,t,n){e.min=t.min-n.min,e.max=e.min+hi(t)}function g0(e,t,n){KV(e.x,t.x,n.x),KV(e.y,t.y,n.y)}function ea(e){return[e("x"),e("y")]}const _oe=({current:e})=>e?e.ownerDocument.defaultView:null,YV=(e,t)=>Math.abs(e-t);function MKe(e,t){const n=YV(e.x,t.x),r=YV(e.y,t.y);return Math.sqrt(n**2+r**2)}class Aoe{constructor(t,n,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=iM(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=MKe(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!y)return;const{point:b}=p,{timestamp:x}=Ro;this.history.push({...b,timestamp:x});const{onStart:S,onMove:E}=this.handlers;m||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=oM(m,this.transformPagePoint),jn.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=iM(p.type==="pointercancel"?this.lastMoveEventInfo:oM(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,S),b&&b(p,S)},!mD(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=o||window;const a=kv(t),l=oM(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ro;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=n;f&&f(t,iM(l,this.history)),this.removeListeners=vv(p0(this.contextWindow,"pointermove",this.handlePointerMove),p0(this.contextWindow,"pointerup",this.handlePointerUp),p0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ou(this.updatePoint)}}function oM(e,t){return t?{point:t(e.point)}:e}function JV(e,t){return{x:e.x-t.x,y:e.y-t.y}}function iM({point:e},t){return{point:e,delta:JV(e,Moe(t)),offset:JV(e,RKe(t)),velocity:NKe(t,.1)}}function RKe(e){return e[0]}function Moe(e){return e[e.length-1]}function NKe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=Moe(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>Ul(t)));)n--;if(!r)return{x:0,y:0};const i=ca(o.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const s={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function IKe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ir(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ir(n,e,r.max):Math.min(e,n)),e}function XV(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function OKe(e,{top:t,left:n,bottom:r,right:o}){return{x:XV(e.x,n,o),y:XV(e.y,t,r)}}function QV(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function PKe(e,t){return{x:QV(e.x,t.x),y:QV(e.y,t.y)}}function DKe(e,t){let n=.5;const r=hi(e),o=hi(t);return o>r?n=xb(t.min,t.max-r,e.min):r>o&&(n=xb(e.min,e.max-o,t.min)),nu(0,1,n)}function $Ke(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const PI=.35;function LKe(e=PI){return e===!1?e=0:e===!0&&(e=PI),{x:eF(e,"left","right"),y:eF(e,"top","bottom")}}function eF(e,t,n){return{min:tF(e,t),max:tF(e,n)}}function tF(e,t){return typeof e=="number"?e:e[t]||0}const jKe=new WeakMap;class zKe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(kv(f).point)},s=(f,p)=>{const{drag:m,dragPropagation:y,onDragStart:b}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HZe(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ea(S=>{let E=this.getAxisMotionValue(S).get()||0;if(Gl.test(E)){const{projection:T}=this.visualElement;if(T&&T.layout){const A=T.layout.layoutBox[S];A&&(E=hi(A)*(parseFloat(E)/100))}}this.originPoint[S]=E}),b&&jn.postRender(()=>b(f,p)),II(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:b,onDrag:x}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=p;if(y&&this.currentDirection===null){this.currentDirection=BKe(S),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",p.point,S),this.updateAxis("y",p.point,S),this.visualElement.render(),x&&x(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>ea(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Aoe(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:_oe(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!r)return;const{velocity:s}=o;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&jn.postRender(()=>a(r,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!Ow(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=IKe(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;t&&Wp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=OKe(r.layoutBox,t):this.constraints=!1,this.elastic=LKe(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ea(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=$Ke(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Wp(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=VWe(r,o.root,this.visualElement.getTransformPagePoint());let s=PKe(o.layout.layoutBox,i);if(n){const a=n(jWe(s));this.hasMutatedConstraints=!!a,a&&(s=foe(a))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ea(u=>{if(!Ow(u,n,this.currentDirection))return;let f=l&&l[u]||{};s&&(f={min:0,max:0});const p=o?200:1e6,m=o?40:1e7,y={type:"inertia",velocity:r?t[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return II(this.visualElement,t),r.start(CD(t,r,0,n,this.visualElement,!1))}stopAnimation(){ea(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ea(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ea(n=>{const{drag:r}=this.getProps();if(!Ow(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:s,max:a}=o.layout.layoutBox[n];i.set(t[n]-ir(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wp(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};ea(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const l=a.get();o[s]=DKe({min:l,max:l},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ea(s=>{if(!Ow(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:c}=this.constraints[s];a.set(ir(l,c,o[s]))})}addListeners(){if(!this.visualElement.current)return;jKe.set(this.visualElement,this);const t=this.visualElement.current,n=p0(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Wp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),jn.read(r);const s=Tb(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ea(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())}));return()=>{s(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:s=PI,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function Ow(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function BKe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class VKe extends Bd{constructor(t){super(t),this.removeGroupControls=ha,this.removeListeners=ha,this.controls=new zKe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ha}unmount(){this.removeGroupControls(),this.removeListeners()}}const nF=e=>(t,n)=>{e&&jn.postRender(()=>e(t,n))};class FKe extends Bd{constructor(){super(...arguments),this.removePointerDownListener=ha}onPointerDown(t){this.session=new Aoe(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_oe(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:nF(t),onStart:nF(n),onMove:r,onEnd:(i,s)=>{delete this.session,o&&jn.postRender(()=>o(i,s))}}}mount(){this.removePointerDownListener=p0(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rF(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ky={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(dt.test(e))e=parseFloat(e);else return e;const n=rF(e,t.target.x),r=rF(e,t.target.y);return`${n}% ${r}%`}},HKe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=Md.parse(e);if(o.length>5)return r;const i=Md.createTransformer(e),s=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;o[0+s]/=a,o[1+s]/=l;const c=ir(a,l,.5);return typeof o[2+s]=="number"&&(o[2+s]/=c),typeof o[3+s]=="number"&&(o[3+s]/=c),i(o)}};let sM=!1;class UKe extends k.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:i}=t;fWe(GKe),i&&(n.group&&n.group.add(i),r&&r.register&&o&&r.register(i),sM&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Tx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,sM=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||jn.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pD.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;sM=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Roe(e){const[t,n]=Xre(),r=k.useContext(ZP);return w.jsx(UKe,{...e,layoutGroup:r,switchLayoutGroup:k.useContext(uoe),isPresent:t,safeToRemove:n})}const GKe={borderRadius:{...ky,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ky,borderTopRightRadius:ky,borderBottomLeftRadius:ky,borderBottomRightRadius:ky,boxShadow:HKe};function qKe(e,t,n){const r=bo(e)?e:mh(e);return r.start(CD("",r,t,n)),r.animation}const ZKe=(e,t)=>e.depth-t.depth;class WKe{constructor(){this.children=[],this.isDirty=!1}add(t){YP(this.children,t),this.isDirty=!0}remove(t){JP(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ZKe),this.isDirty=!1,this.children.forEach(t)}}function KKe(e,t){const n=Li.now(),r=({timestamp:o})=>{const i=o-n;i>=t&&(ou(r),e(i-t))};return jn.setup(r,!0),()=>ou(r)}const Noe=["TopLeft","TopRight","BottomLeft","BottomRight"],YKe=Noe.length,oF=e=>typeof e=="string"?parseFloat(e):e,iF=e=>typeof e=="number"||dt.test(e);function JKe(e,t,n,r,o,i){o?(e.opacity=ir(0,n.opacity??1,XKe(r)),e.opacityExit=ir(t.opacity??1,0,QKe(r))):i&&(e.opacity=ir(t.opacity??1,n.opacity??1,r));for(let s=0;s<YKe;s++){const a=`border${Noe[s]}Radius`;let l=sF(t,a),c=sF(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||iF(l)===iF(c)?(e[a]=Math.max(ir(oF(l),oF(c),r),0),(Gl.test(c)||Gl.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=ir(t.rotate||0,n.rotate||0,r))}function sF(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const XKe=Ioe(0,.5,gre),QKe=Ioe(.5,.95,ha);function Ioe(e,t,n){return r=>r<e?0:r>t?1:n(xb(e,t,r))}function aF(e,t){e.min=t.min,e.max=t.max}function Ys(e,t){aF(e.x,t.x),aF(e.y,t.y)}function lF(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function cF(e,t,n,r,o){return e-=t,e=Dk(e,1/n,r),o!==void 0&&(e=Dk(e,1/o,r)),e}function eYe(e,t=0,n=1,r=.5,o,i=e,s=e){if(Gl.test(t)&&(t=parseFloat(t),t=ir(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=ir(i.min,i.max,r);e===i&&(a-=t),e.min=cF(e.min,t,n,a,o),e.max=cF(e.max,t,n,a,o)}function uF(e,t,[n,r,o],i,s){eYe(e,t[n],t[r],t[o],t.scale,i,s)}const tYe=["x","scaleX","originX"],nYe=["y","scaleY","originY"];function dF(e,t,n,r){uF(e.x,t,tYe,n?n.x:void 0,r?r.x:void 0),uF(e.y,t,nYe,n?n.y:void 0,r?r.y:void 0)}function fF(e){return e.translate===0&&e.scale===1}function Ooe(e){return fF(e.x)&&fF(e.y)}function hF(e,t){return e.min===t.min&&e.max===t.max}function rYe(e,t){return hF(e.x,t.x)&&hF(e.y,t.y)}function pF(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Poe(e,t){return pF(e.x,t.x)&&pF(e.y,t.y)}function mF(e){return hi(e.x)/hi(e.y)}function gF(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class oYe{constructor(){this.members=[]}add(t){YP(this.members,t),t.scheduleRender()}remove(t){if(JP(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const i=this.members[o];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iYe(e,t,n){let r="";const o=e.x.translate/t.x,i=e.y.translate/t.y,s=n?.z||0;if((o||i||s)&&(r=`translate3d(${o}px, ${i}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:p,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const aM=["","X","Y","Z"],sYe=1e3;let aYe=0;function lM(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Doe(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=woe(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",jn,!(o||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Doe(r)}function $oe({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(s={},a=t?.()){this.id=aYe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(uYe),this.nodes.forEach(pYe),this.nodes.forEach(mYe),this.nodes.forEach(dYe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new WKe)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new eD),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=Jre(s)&&!KZe(s),this.instance=s;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let u,f=0;const p=()=>this.root.updateBlockedByResize=!1;jn.read(()=>{f=window.innerWidth}),e(s,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,u&&u(),u=KKe(p,250),Tx.hasAnimatedSinceResize&&(Tx.hasAnimatedSinceResize=!1,this.nodes.forEach(vF)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||wYe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=c.getProps(),S=!this.targetLayout||!Poe(this.targetLayout,m),E=!f&&p;if(this.options.layoutRoot||this.resumeFrom||E||f&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...fD(y,"layout"),onPlay:b,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(u,E)}else f||vF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ou(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gYe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Doe(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yF);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(bF);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hYe),this.nodes.forEach(lYe),this.nodes.forEach(cYe)):this.nodes.forEach(bF),this.clearAllSnapshots();const a=Li.now();Ro.delta=nu(0,1e3/60,a-Ro.timestamp),Ro.timestamp=a,Ro.isProcessing=!0,YA.update.process(Ro),YA.preRender.process(Ro),YA.render.process(Ro),Ro.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fYe),this.sharedNodes.forEach(yYe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!hi(this.snapshot.measuredBox.x)&&!hi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Ooe(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;s&&this.instance&&(a||vf(this.latestValues)||u)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),xYe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Mr();const a=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(SYe))){const{scroll:c}=this.root;c&&(Kp(a.x,c.offset.x),Kp(a.y,c.offset.y))}return a}removeElementScroll(s){const a=Mr();if(Ys(a,s),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:f}=c;c!==this.root&&u&&f.layoutScroll&&(u.wasRoot&&Ys(a,s),Kp(a.x,u.offset.x),Kp(a.y,u.offset.y))}return a}applyTransform(s,a=!1){const l=Mr();Ys(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Yp(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),vf(u.latestValues)&&Yp(l,u.latestValues)}return vf(this.latestValues)&&Yp(l,this.latestValues),l}removeTransform(s){const a=Mr();Ys(a,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!vf(c.latestValues))continue;AI(c.latestValues)&&c.updateSnapshot();const u=Mr(),f=c.measurePageBox();Ys(u,f),dF(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return vf(this.latestValues)&&dF(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ro.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Ro.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mr(),this.relativeTargetOrigin=Mr(),g0(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ys(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mr(),this.targetWithTransforms=Mr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AKe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ys(this.target,this.layout.layoutBox),poe(this.target,this.targetDelta)):Ys(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mr(),this.relativeTargetOrigin=Mr(),g0(this.relativeTargetOrigin,this.target,p.target),Ys(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||AI(this.parent.latestValues)||hoe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),a=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ro.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Ys(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;BWe(this.layoutCorrected,this.treeScale,this.path,a),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Mr());const{target:m}=s;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lF(this.prevProjectionDelta.x,this.projectionDelta.x),lF(this.prevProjectionDelta.y,this.projectionDelta.y)),m0(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!gF(this.projectionDelta.x,this.prevProjectionDelta.x)||!gF(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jp(),this.projectionDelta=Jp(),this.projectionDeltaWithTransform=Jp()}setAnimationOrigin(s,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Jp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Mr(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,b=m!==y,x=this.getStack(),S=!x||x.members.length<=1,E=!!(b&&!S&&this.options.crossfade===!0&&!this.path.some(vYe));this.animationProgress=0;let T;this.mixTargetDelta=A=>{const M=A/1e3;wF(f.x,s.x,M),wF(f.y,s.y,M),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(g0(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bYe(this.relativeTarget,this.relativeTargetOrigin,p,M),T&&rYe(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Mr()),Ys(T,this.relativeTarget)),b&&(this.animationValues=u,JKe(u,c,this.latestValues,M,E,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ou(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jn.update(()=>{Tx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mh(0)),this.currentAnimation=qKe(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sYe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=s;if(!(!a||!l||!c)){if(this!==s&&this.layout&&c&&Loe(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Mr();const f=hi(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const p=hi(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+p}Ys(a,l),Yp(a,u),m0(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new oYe),this.sharedNodes.get(s).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&lM("z",s,c,this.animationValues);for(let u=0;u<aM.length;u++)lM(`rotate${aM[u]}`,s,c,this.animationValues),lM(`skew${aM[u]}`,s,c,this.animationValues);s.render();for(const u in c)s.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);s.scheduleRender()}applyProjectionStyles(s,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Ex(a?.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Ex(a?.pointerEvents)||""),this.hasProjected&&!vf(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=iYe(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),s.transform=f;const{x:p,y:m}=this.projectionDelta;s.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,c.animationValues?s.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:s.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const y in Eb){if(u[y]===void 0)continue;const{correct:b,applyTo:x,isCSSVariable:S}=Eb[y],E=f==="none"?u[y]:b(u[y],c);if(x){const T=x.length;for(let A=0;A<T;A++)s[x[A]]=E}else S?this.options.visualElement.renderState.vars[y]=E:s[y]=E}this.options.layoutId&&(s.pointerEvents=c===this?Ex(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(yF),this.root.sharedNodes.clear()}}}function lYe(e){e.updateLayout()}function cYe(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:o}=e.options,i=t.source!==e.layout.source;o==="size"?ea(u=>{const f=i?t.measuredBox[u]:t.layoutBox[u],p=hi(f);f.min=n[u].min,f.max=f.min+p}):Loe(o,t.layoutBox,n)&&ea(u=>{const f=i?t.measuredBox[u]:t.layoutBox[u],p=hi(n[u]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const s=Jp();m0(s,n,t.layoutBox);const a=Jp();i?m0(a,e.applyTransform(r,!0),t.measuredBox):m0(a,n,t.layoutBox);const l=!Ooe(s);let c=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:p}=u;if(f&&p){const m=Mr();g0(m,t.layoutBox,f.layoutBox);const y=Mr();g0(y,n,p.layoutBox),Poe(m,y)||(c=!0),u.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=m,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:a,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function uYe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function dYe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function fYe(e){e.clearSnapshot()}function yF(e){e.clearMeasurements()}function bF(e){e.isLayoutDirty=!1}function hYe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function vF(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function pYe(e){e.resolveTargetDelta()}function mYe(e){e.calcProjection()}function gYe(e){e.resetSkewAndRotation()}function yYe(e){e.removeLeadSnapshot()}function wF(e,t,n){e.translate=ir(t.translate,0,n),e.scale=ir(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function xF(e,t,n,r){e.min=ir(t.min,n.min,r),e.max=ir(t.max,n.max,r)}function bYe(e,t,n,r){xF(e.x,t.x,n.x,r),xF(e.y,t.y,n.y,r)}function vYe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const wYe={duration:.45,ease:[.4,0,.1,1]},SF=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),kF=SF("applewebkit/")&&!SF("chrome/")?Math.round:ha;function CF(e){e.min=kF(e.min),e.max=kF(e.max)}function xYe(e){CF(e.x),CF(e.y)}function Loe(e,t,n){return e==="position"||e==="preserve-aspect"&&!_Ke(mF(t),mF(n),.2)}function SYe(e){return e!==e.root&&e.scroll?.wasRoot}const kYe=$oe({attachResizeListener:(e,t)=>Tb(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cM={current:void 0},joe=$oe({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!cM.current){const e=new kYe({});e.mount(window),e.setOptions({layoutScroll:!0}),cM.current=e}return cM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),CYe={pan:{Feature:FKe},drag:{Feature:VKe,ProjectionNode:joe,MeasureLayout:Roe}};function EF(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=r[o];i&&jn.postRender(()=>i(t,kv(t)))}class EYe extends Bd{mount(){const{current:t}=this.node;t&&(this.unmount=UZe(t,(n,r)=>(EF(this.node,r,"Start"),o=>EF(this.node,o,"End"))))}unmount(){}}class TYe extends Bd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vv(Tb(this.node.current,"focus",()=>this.onFocus()),Tb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TF(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=r[o];i&&jn.postRender(()=>i(t,kv(t)))}class _Ye extends Bd{mount(){const{current:t}=this.node;t&&(this.unmount=WZe(t,(n,r)=>(TF(this.node,r,"Start"),(o,{success:i})=>TF(this.node,o,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const DI=new WeakMap,uM=new WeakMap,AYe=e=>{const t=DI.get(e.target);t&&t(e)},MYe=e=>{e.forEach(AYe)};function RYe({root:e,...t}){const n=e||document;uM.has(n)||uM.set(n,{});const r=uM.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(MYe,{root:e,...t})),r[o]}function NYe(e,t,n){const r=RYe(t);return DI.set(e,n),r.observe(e),()=>{DI.delete(e),r.unobserve(e)}}const IYe={some:0,all:1};class OYe extends Bd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:i}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:IYe[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),p=c?u:f;p&&p(l)};return NYe(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(PYe(t,n))&&this.startObserver()}unmount(){}}function PYe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const DYe={inView:{Feature:OYe},tap:{Feature:_Ye},focus:{Feature:TYe},hover:{Feature:EYe}},$Ye={layout:{ProjectionNode:joe,MeasureLayout:Roe}},LYe={...xKe,...DYe,...CYe,...$Ye},or=LWe(LYe,YWe);function $k(e){const t=bv(()=>mh(e)),{isStatic:n}=k.useContext(Sv);if(n){const[,r]=k.useState(e);k.useEffect(()=>t.on("change",r),[])}return t}function zoe(e,t){const n=$k(t()),r=()=>n.set(t());return r(),KP(()=>{const o=()=>jn.preRender(r,!1,!0),i=e.map(s=>s.on("change",o));return()=>{i.forEach(s=>s()),ou(r)}}),n}function jYe(e){h0.current=[],e();const t=zoe(h0.current,e);return h0.current=void 0,t}function zYe(e,t,n,r){if(typeof e=="function")return jYe(e);const o=YZe(t,n,r);return Array.isArray(e)?_F(e,o):_F([e],([i])=>o(i))}function _F(e,t){const n=bv(()=>[]);return zoe(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function AF(e,t={}){const{isStatic:n}=k.useContext(Sv),r=()=>bo(e)?e.get():e;if(n)return zYe(r);const o=$k(r());return k.useInsertionEffect(()=>JZe(o,e,t),[o,JSON.stringify(t)]),o}const BYe={some:0,all:1};function VYe(e,t,{root:n,margin:r,amount:o="some"}={}){const i=Gre(e),s=new WeakMap,a=c=>{c.forEach(u=>{const f=s.get(u.target);if(u.isIntersecting!==!!f)if(u.isIntersecting){const p=t(u.target,u);typeof p=="function"?s.set(u.target,p):l.unobserve(u.target)}else typeof f=="function"&&(f(u),s.delete(u.target))})},l=new IntersectionObserver(a,{root:n,rootMargin:r,threshold:typeof o=="number"?o:BYe[o]});return i.forEach(c=>l.observe(c)),()=>l.disconnect()}function FYe(e,{root:t,margin:n,amount:r,once:o=!1,initial:i=!1}={}){const[s,a]=k.useState(i);return k.useEffect(()=>{if(!e.current||o&&s)return;const l=()=>(a(!0),o?void 0:()=>a(!1)),c={root:t&&t.current||void 0,margin:n,amount:r};return VYe(e.current,l,c)},[t,e,n,o,r]),s}function HYe(e,t){const n=[];for(let r=0;r<e;r++){const o=Math.floor(Math.random()*4e3)-2e3,i=Math.floor(Math.random()*4e3)-2e3;n.push(`${o}px ${i}px ${t}`)}return n.join(", ")}function dM(e){const t=st.c(30);let n,r,o,i,s,a;t[0]!==e?({count:o,size:i,transition:s,starColor:a,className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6]);const l=o===void 0?1e3:o,c=i===void 0?1:i;let u;t[7]!==s?(u=s===void 0?{repeat:1/0,duration:50,ease:"linear"}:s,t[7]=s,t[8]=u):u=t[8];const f=u,p=a===void 0?"#fff":a,[m,y]=k.useState("");let b,x;t[9]!==l||t[10]!==p?(b=()=>{y(HYe(l,p))},x=[l,p],t[9]=l,t[10]=p,t[11]=b,t[12]=x):(b=t[11],x=t[12]),k.useEffect(b,x);let S;t[13]===Symbol.for("react.memo_cache_sentinel")?(S={y:[0,-2e3]},t[13]=S):S=t[13];let E;t[14]!==n?(E=tu("absolute top-0 left-0 w-full h-[2000px]",n),t[14]=n,t[15]=E):E=t[15];const T=`${c}px`,A=`${c}px`;let M;t[16]!==m||t[17]!==T||t[18]!==A?(M=w.jsx("div",{className:"absolute bg-transparent rounded-full",style:{width:T,height:A,boxShadow:m}}),t[16]=m,t[17]=T,t[18]=A,t[19]=M):M=t[19];const R=`${c}px`,O=`${c}px`;let I;t[20]!==m||t[21]!==R||t[22]!==O?(I=w.jsx("div",{className:"absolute bg-transparent rounded-full top-[2000px]",style:{width:R,height:O,boxShadow:m}}),t[20]=m,t[21]=R,t[22]=O,t[23]=I):I=t[23];let L;return t[24]!==r||t[25]!==M||t[26]!==I||t[27]!==E||t[28]!==f?(L=w.jsxs(or.div,{"data-slot":"star-layer",animate:S,transition:f,className:E,...r,children:[M,I]}),t[24]=r,t[25]=M,t[26]=I,t[27]=E,t[28]=f,t[29]=L):L=t[29],L}function UYe(e){const t=st.c(49);let n,r,o,i,s,a,l,c;t[0]!==e?({children:n,className:r,factor:i,speed:s,transition:a,starColor:l,pointerEvents:c,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a,t[7]=l,t[8]=c):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6],l=t[7],c=t[8]);const u=i===void 0?.05:i,f=s===void 0?50:s;let p;t[9]!==a?(p=a===void 0?{stiffness:50,damping:20}:a,t[9]=a,t[10]=p):p=t[10];const m=p,y=l===void 0?"#fff":l,b=c===void 0?!0:c,x=$k(1),S=$k(1),E=AF(x,m),T=AF(S,m);let A;t[11]!==u||t[12]!==x||t[13]!==S?(A=N=>{const U=window.innerWidth/2,ee=window.innerHeight/2,D=-(N.clientX-U)*u,ae=-(N.clientY-ee)*u;x.set(D),S.set(ae)},t[11]=u,t[12]=x,t[13]=S,t[14]=A):A=t[14];const M=A;let R;t[15]!==r?(R=tu("relative size-full overflow-hidden bg-[radial-gradient(ellipse_at_bottom,_#262626_0%,_#000_100%)]",r),t[15]=r,t[16]=R):R=t[16];let O;t[17]!==E||t[18]!==T?(O={x:E,y:T},t[17]=E,t[18]=T,t[19]=O):O=t[19];const I=!b;let L;t[20]!==I?(L=tu({"pointer-events-none":I}),t[20]=I,t[21]=L):L=t[21];let $;t[22]!==f?($={repeat:1/0,duration:f,ease:"linear"},t[22]=f,t[23]=$):$=t[23];let B;t[24]!==y||t[25]!==$?(B=w.jsx(dM,{count:1e3,size:1,transition:$,starColor:y}),t[24]=y,t[25]=$,t[26]=B):B=t[26];const H=f*2;let V;t[27]!==H?(V={repeat:1/0,duration:H,ease:"linear"},t[27]=H,t[28]=V):V=t[28];let W;t[29]!==y||t[30]!==V?(W=w.jsx(dM,{count:400,size:2,transition:V,starColor:y}),t[29]=y,t[30]=V,t[31]=W):W=t[31];const K=f*3;let z;t[32]!==K?(z={repeat:1/0,duration:K,ease:"linear"},t[32]=K,t[33]=z):z=t[33];let G;t[34]!==y||t[35]!==z?(G=w.jsx(dM,{count:200,size:3,transition:z,starColor:y}),t[34]=y,t[35]=z,t[36]=G):G=t[36];let F;t[37]!==L||t[38]!==B||t[39]!==W||t[40]!==G||t[41]!==O?(F=w.jsxs(or.div,{style:O,className:L,children:[B,W,G]}),t[37]=L,t[38]=B,t[39]=W,t[40]=G,t[41]=O,t[42]=F):F=t[42];let Z;return t[43]!==n||t[44]!==M||t[45]!==o||t[46]!==F||t[47]!==R?(Z=w.jsxs("div",{"data-slot":"stars-background",className:R,onMouseMove:M,...o,children:[F,n]}),t[43]=n,t[44]=M,t[45]=o,t[46]=F,t[47]=R,t[48]=Z):Z=t[48],Z}function $I(e){const t=st.c(24);let n,r,o,i,s,a,l,c;t[0]!==e?({text:l,duration:o,transition:c,wave:i,className:n,color:s,shimmeringColor:a,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a,t[7]=l,t[8]=c):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6],l=t[7],c=t[8]);const u=o===void 0?1:o,f=i===void 0?!1:i,p=s===void 0?"var(--color-neutral-500)":s,m=a===void 0?"var(--color-neutral-300)":a;let y;t[9]!==n?(y=tu("relative inline-block [perspective:500px]",n),t[9]=n,t[10]=y):y=t[10];let b;t[11]!==p||t[12]!==m?(b={"--shimmering-color":m,"--color":p,color:"var(--color)"},t[11]=p,t[12]=m,t[13]=b):b=t[13];const x=b;let S;t[14]!==u||t[15]!==l||t[16]!==c||t[17]!==f?(S=l?.split("")?.map((T,A)=>w.jsx(or.span,{className:"inline-block whitespace-pre [transform-style:preserve-3d]",initial:{...f?{scale:1,rotateY:0}:{},color:"var(--color)"},animate:{...f?{x:[0,5,0],y:[0,-5,0],scale:[1,1.1,1],rotateY:[0,15,0]}:{},color:["var(--color)","var(--shimmering-color)","var(--color)"]},transition:{duration:u,repeat:1/0,repeatType:"loop",repeatDelay:l.length*.05,delay:A*u/l.length,ease:"easeInOut",...c},children:T},A)),t[14]=u,t[15]=l,t[16]=c,t[17]=f,t[18]=S):S=t[18];let E;return t[19]!==r||t[20]!==y||t[21]!==x||t[22]!==S?(E=w.jsx(or.span,{className:y,style:x,...r,children:S}),t[19]=r,t[20]=y,t[21]=x,t[22]=S,t[23]=E):E=t[23],E}function GYe({ref:e,inView:t=!1,inViewMargin:n="0px",inViewOnce:r=!0,spacing:o=5,text:i,transition:s={type:"spring",bounce:0,duration:2,delay:.5},...a}){const l=k.useRef(null);k.useImperativeHandle(e,()=>l.current);const c=FYe(l,{once:r,margin:n}),u=!t||c,f=k.useMemo(()=>i.split(" "),[i]);return w.jsx("span",{ref:l,"data-slot":"writing-text",...a,children:f.map((p,m)=>w.jsxs(or.span,{className:"inline-block will-change-transform will-change-opacity",style:{marginRight:o},initial:{opacity:0,y:10},animate:u?{opacity:1,y:0}:void 0,transition:{...s,delay:m*(s?.delay??0)},children:[p," "]},m))})}function qYe(){const e=st.c(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=w.jsx("div",{className:"absolute inset-0 z-0",children:w.jsx(UYe,{})}),e[0]=t):t=e[0];let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=w.jsx("div",{className:"text-zinc-100 text-xl font-medium mb-2",children:w.jsx($I,{className:"text-4xl font-semibold",text:"Welcome to Logia",wave:!0})}),e[1]=n):n=e[1];let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=w.jsxs("div",{className:"relative flex-1 flex items-center justify-center bg-zinc-950 h-full",children:[t,w.jsxs("div",{className:"text-center z-10",children:[n,w.jsx("div",{className:"text-zinc-300 text-sm",children:w.jsx(GYe,{className:"text-2xl",text:"Select a note or create a new one to get started",spacing:9,transition:{duration:2,delay:.1}})})]})]}),e[2]=r):r=e[2],r}const ZYe=k.lazy(()=>Ne(()=>import("./Canvas-WFRTPhL-.js"),__vite__mapDeps([37,38])));function WYe(){const e=st.c(7),{currentNote:t,updateCurrentNoteContent:n,updateCurrentNoteTitle:r}=ws();if(!t){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsx(qYe,{}),e[0]=s):s=e[0],s}if(t.note_type==="canvas"){let s;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsx("div",{className:"h-full w-full",children:w.jsx(k.Suspense,{fallback:w.jsx("div",{className:"h-full w-full flex items-center justify-center bg-zinc-950",children:w.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),children:w.jsx(ZYe,{})})}),e[1]=s):s=e[1],s}let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=w.jsx(nqe,{}),e[2]=o):o=e[2];let i;return e[3]!==t||e[4]!==n||e[5]!==r?(i=w.jsx(IHe,{currentNote:t,updateCurrentNoteContent:n,updateCurrentNoteTitle:r,children:o}),e[3]=t,e[4]=n,e[5]=r,e[6]=i):i=e[6],i}function KYe(){const e=st.c(18),{isAiSidebarOpen:t,setIsAiSidebarOpen:n,isSidebarFloating:r,setIsSidebarFloating:o}=pr();let i;e[0]!==r||e[1]!==o?(i=()=>o(!r),e[0]=r,e[1]=o,e[2]=i):i=e[2];const s=`p-2 rounded-md transition-all duration-200 ${r?"text-blue-400 bg-blue-400/10":"text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800"}`,a=r?"Pin Sidebar":"Float Sidebar";let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=w.jsx(zUe,{size:18}),e[3]=l):l=e[3];let c;e[4]!==i||e[5]!==s||e[6]!==a?(c=w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("button",{onClick:i,className:s,title:a,children:l})}),e[4]=i,e[5]=s,e[6]=a,e[7]=c):c=e[7];let u;e[8]!==t||e[9]!==n?(u=()=>n(!t),e[8]=t,e[9]=n,e[10]=u):u=e[10];const f=`p-2 rounded-md transition-all duration-200 ${t?"text-blue-400 bg-blue-400/10":"text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800"}`;let p;e[11]===Symbol.for("react.memo_cache_sentinel")?(p=w.jsx(VUe,{size:18}),e[11]=p):p=e[11];let m;e[12]!==u||e[13]!==f?(m=w.jsx("div",{className:"flex items-center",children:w.jsx("button",{onClick:u,className:f,title:"Toggle AI Sidebar",children:p})}),e[12]=u,e[13]=f,e[14]=m):m=e[14];let y;return e[15]!==c||e[16]!==m?(y=w.jsxs("header",{className:"h-10 bg-zinc-950/90 px-4 border-b border-zinc-300/20 flex items-center justify-between flex-shrink-0",children:[c,m]}),e[15]=c,e[16]=m,e[17]=y):y=e[17],y}var $r=function(){return $r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$r.apply(this,arguments)},MF={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},RF={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Pw={width:"20px",height:"20px",position:"absolute",zIndex:1},YYe={top:$r($r({},MF),{top:"-5px"}),right:$r($r({},RF),{left:void 0,right:"-5px"}),bottom:$r($r({},MF),{top:void 0,bottom:"-5px"}),left:$r($r({},RF),{left:"-5px"}),topRight:$r($r({},Pw),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:$r($r({},Pw),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:$r($r({},Pw),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:$r($r({},Pw),{left:"-10px",top:"-10px",cursor:"nw-resize"})},JYe=k.memo(function(e){var t=e.onResizeStart,n=e.direction,r=e.children,o=e.replaceStyles,i=e.className,s=k.useCallback(function(c){t(c,n)},[t,n]),a=k.useCallback(function(c){t(c,n)},[t,n]),l=k.useMemo(function(){return $r($r({position:"absolute",userSelect:"none"},YYe[n]),o??{})},[o,n]);return w.jsx("div",{className:i||void 0,style:l,onMouseDown:s,onTouchStart:a,children:r})}),XYe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ml=function(){return Ml=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ml.apply(this,arguments)},QYe={width:"auto",height:"auto"},Dw=function(e,t,n){return Math.max(Math.min(e,n),t)},NF=function(e,t,n){var r=Math.round(e/t);return r*t+n*(r-1)},_p=function(e,t){return new RegExp(e,"i").test(t)},$w=function(e){return!!(e.touches&&e.touches.length)},eJe=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},IF=function(e,t,n){n===void 0&&(n=0);var r=t.reduce(function(i,s,a){return Math.abs(s-e)<Math.abs(t[i]-e)?a:i},0),o=Math.abs(t[r]-e);return n===0||o<n?t[r]:e},fM=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},Lw=function(e,t,n,r){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var o=Number(e.replace("%",""))/100;return t*o}if(e.endsWith("vw")){var o=Number(e.replace("vw",""))/100;return n*o}if(e.endsWith("vh")){var o=Number(e.replace("vh",""))/100;return r*o}}return e},tJe=function(e,t,n,r,o,i,s){return r=Lw(r,e.width,t,n),o=Lw(o,e.height,t,n),i=Lw(i,e.width,t,n),s=Lw(s,e.height,t,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof o>"u"?void 0:Number(o),minWidth:typeof i>"u"?void 0:Number(i),minHeight:typeof s>"u"?void 0:Number(s)}},nJe=function(e){return Array.isArray(e)?e:[e,e]},rJe=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],OF="__resizable_base__",Boe=(function(e){XYe(t,e);function t(n){var r,o,i,s,a=e.call(this,n)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var l=a.parentNode;if(!l)return null;var c=a.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add(OF):c.className+=OF,l.appendChild(c),c},a.removeBase=function(l){var c=a.parentNode;c&&c.removeChild(l)},a.state={isResizing:!1,width:(o=(r=a.propsSize)===null||r===void 0?void 0:r.width)!==null&&o!==void 0?o:"auto",height:(s=(i=a.propsSize)===null||i===void 0?void 0:i.height)!==null&&s!==void 0?s:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||QYe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var n=0,r=0;if(this.resizable&&this.window){var o=this.resizable.offsetWidth,i=this.resizable.offsetHeight,s=this.resizable.style.position;s!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:o,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:i,this.resizable.style.position=s}return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var n=this,r=this.props.size,o=function(a){var l;if(typeof n.state[a]>"u"||n.state[a]==="auto")return"auto";if(n.propsSize&&n.propsSize[a]&&(!((l=n.propsSize[a])===null||l===void 0)&&l.toString().endsWith("%"))){if(n.state[a].toString().endsWith("%"))return n.state[a].toString();var c=n.getParentSize(),u=Number(n.state[a].toString().replace("px","")),f=u/c[a]*100;return"".concat(f,"%")}return fM(n.state[a])},i=r&&typeof r.width<"u"&&!this.state.isResizing?fM(r.width):o("width"),s=r&&typeof r.height<"u"&&!this.state.isResizing?fM(r.height):o("height");return{width:i,height:s}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var r=!1,o=this.parentNode.style.flexWrap;o!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var i={width:n.offsetWidth,height:n.offsetHeight};return r&&(this.parentNode.style.flexWrap=o),this.removeBase(n),i},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(n,r){var o=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===n&&(typeof o>"u"||o==="auto")?"auto":n},t.prototype.calculateNewMaxFromBoundary=function(n,r){var o=this.props.boundsByDirection,i=this.state.direction,s=o&&_p("left",i),a=o&&_p("top",i),l,c;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(l=s?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),c=a?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=s?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=s?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(n=n&&n<l?n:l),c&&Number.isFinite(c)&&(r=r&&r<c?r:c),{maxWidth:n,maxHeight:r}},t.prototype.calculateNewSizeFromDirection=function(n,r){var o=this.props.scale||1,i=nJe(this.props.resizeRatio||1),s=i[0],a=i[1],l=this.state,c=l.direction,u=l.original,f=this.props,p=f.lockAspectRatio,m=f.lockAspectRatioExtraHeight,y=f.lockAspectRatioExtraWidth,b=u.width,x=u.height,S=m||0,E=y||0;return _p("right",c)&&(b=u.width+(n-u.x)*s/o,p&&(x=(b-E)/this.ratio+S)),_p("left",c)&&(b=u.width-(n-u.x)*s/o,p&&(x=(b-E)/this.ratio+S)),_p("bottom",c)&&(x=u.height+(r-u.y)*a/o,p&&(b=(x-S)*this.ratio+E)),_p("top",c)&&(x=u.height-(r-u.y)*a/o,p&&(b=(x-S)*this.ratio+E)),{newWidth:b,newHeight:x}},t.prototype.calculateNewSizeFromAspectRatio=function(n,r,o,i){var s=this.props,a=s.lockAspectRatio,l=s.lockAspectRatioExtraHeight,c=s.lockAspectRatioExtraWidth,u=typeof i.width>"u"?10:i.width,f=typeof o.width>"u"||o.width<0?n:o.width,p=typeof i.height>"u"?10:i.height,m=typeof o.height>"u"||o.height<0?r:o.height,y=l||0,b=c||0;if(a){var x=(p-y)*this.ratio+b,S=(m-y)*this.ratio+b,E=(u-b)/this.ratio+y,T=(f-b)/this.ratio+y,A=Math.max(u,x),M=Math.min(f,S),R=Math.max(p,E),O=Math.min(m,T);n=Dw(n,A,M),r=Dw(r,R,O)}else n=Dw(n,u,f),r=Dw(r,p,m);return{newWidth:n,newHeight:r}},t.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var o=r.getBoundingClientRect();this.parentLeft=o.left*n,this.parentTop=o.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var i=this.props.bounds.getBoundingClientRect();this.targetLeft=i.left*n,this.targetTop=i.top*n}if(this.resizable){var s=this.resizable.getBoundingClientRect(),a=s.left,l=s.top,c=s.right,u=s.bottom;this.resizableLeft=a*n,this.resizableRight=c*n,this.resizableTop=l*n,this.resizableBottom=u*n}},t.prototype.onResizeStart=function(n,r){if(!(!this.resizable||!this.window)){var o=0,i=0;if(n.nativeEvent&&eJe(n.nativeEvent)?(o=n.nativeEvent.clientX,i=n.nativeEvent.clientY):n.nativeEvent&&$w(n.nativeEvent)&&(o=n.nativeEvent.touches[0].clientX,i=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var s=this.props.onResizeStart(n,r,this.resizable);if(s===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var c=this.parentNode;if(c){var u=this.window.getComputedStyle(c).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",a=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var f={original:{x:o,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Ml(Ml({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:r,flexBasis:a};this.setState(f)}},t.prototype.onMouseMove=function(n){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&$w(n))try{n.preventDefault(),n.stopPropagation()}catch{}var o=this.props,i=o.maxWidth,s=o.maxHeight,a=o.minWidth,l=o.minHeight,c=$w(n)?n.touches[0].clientX:n.clientX,u=$w(n)?n.touches[0].clientY:n.clientY,f=this.state,p=f.direction,m=f.original,y=f.width,b=f.height,x=this.getParentSize(),S=tJe(x,this.window.innerWidth,this.window.innerHeight,i,s,a,l);i=S.maxWidth,s=S.maxHeight,a=S.minWidth,l=S.minHeight;var E=this.calculateNewSizeFromDirection(c,u),T=E.newHeight,A=E.newWidth,M=this.calculateNewMaxFromBoundary(i,s);this.props.snap&&this.props.snap.x&&(A=IF(A,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(T=IF(T,this.props.snap.y,this.props.snapGap));var R=this.calculateNewSizeFromAspectRatio(A,T,{width:M.maxWidth,height:M.maxHeight},{width:a,height:l});if(A=R.newWidth,T=R.newHeight,this.props.grid){var O=NF(A,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),I=NF(T,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),L=this.props.snapGap||0,$=L===0||Math.abs(O-A)<=L?O:A,B=L===0||Math.abs(I-T)<=L?I:T;A=$,T=B}var H={width:A-m.width,height:T-m.height};if(this.delta=H,y&&typeof y=="string"){if(y.endsWith("%")){var V=A/x.width*100;A="".concat(V,"%")}else if(y.endsWith("vw")){var W=A/this.window.innerWidth*100;A="".concat(W,"vw")}else if(y.endsWith("vh")){var K=A/this.window.innerHeight*100;A="".concat(K,"vh")}}if(b&&typeof b=="string"){if(b.endsWith("%")){var V=T/x.height*100;T="".concat(V,"%")}else if(b.endsWith("vw")){var W=T/this.window.innerWidth*100;T="".concat(W,"vw")}else if(b.endsWith("vh")){var K=T/this.window.innerHeight*100;T="".concat(K,"vh")}}var z={width:this.createSizeForCssProperty(A,"width"),height:this.createSizeForCssProperty(T,"height")};this.flexDir==="row"?z.flexBasis=z.width:this.flexDir==="column"&&(z.flexBasis=z.height);var G=this.state.width!==z.width,F=this.state.height!==z.height,Z=this.state.flexBasis!==z.flexBasis,N=G||F||Z;N&&Ur.flushSync(function(){r.setState(z)}),this.props.onResize&&N&&this.props.onResize(n,p,this.resizable,H)}},t.prototype.onMouseUp=function(n){var r,o,i=this.state,s=i.isResizing,a=i.direction;i.original,!(!s||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,a,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(o=this.props.size.height)!==null&&o!==void 0?o:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Ml(Ml({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(n){var r,o;this.setState({width:(r=n.width)!==null&&r!==void 0?r:"auto",height:(o=n.height)!==null&&o!==void 0?o:"auto"})},t.prototype.renderResizer=function(){var n=this,r=this.props,o=r.enable,i=r.handleStyles,s=r.handleClasses,a=r.handleWrapperStyle,l=r.handleWrapperClass,c=r.handleComponent;if(!o)return null;var u=Object.keys(o).map(function(f){return o[f]!==!1?w.jsx(JYe,{direction:f,onResizeStart:n.onResizeStart,replaceStyles:i&&i[f],className:s&&s[f],children:c&&c[f]?c[f]:null},f):null});return w.jsx("div",{className:l,style:a,children:u})},t.prototype.render=function(){var n=this,r=Object.keys(this.props).reduce(function(s,a){return rJe.indexOf(a)!==-1||(s[a]=n.props[a]),s},{}),o=Ml(Ml(Ml({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(o.flexBasis=this.state.flexBasis);var i=this.props.as||"div";return w.jsxs(i,Ml({style:o,className:this.props.className},r,{ref:function(s){s&&(n.resizable=s)},children:[this.state.isResizing&&w.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t})(k.PureComponent);const Voe=typeof document<"u"?ie.useLayoutEffect:()=>{};var hM;const oJe=(hM=ie.useInsertionEffect)!==null&&hM!==void 0?hM:Voe;function iJe(e){const t=k.useRef(null);return oJe(()=>{t.current=e},[e]),k.useCallback((...n)=>{const r=t.current;return r?.(...n)},[])}const Vd=e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},zf=e=>e&&"window"in e&&e.window===e?e:Vd(e).defaultView||window;function sJe(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function aJe(e){return sJe(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let lJe=!1;function ED(){return lJe}function Foe(e,t){if(!ED())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:aJe(n)?n=n.host:n=n.parentNode}return!1}const LI=(e=document)=>{var t;if(!ED())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function Hoe(e){return ED()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function cJe(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function uJe(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Uoe(e){let t=null;return()=>(t==null&&(t=e()),t)}const dJe=Uoe(function(){return uJe(/^Mac/i)}),fJe=Uoe(function(){return cJe(/Android/i)});function Goe(){let e=k.useRef(new Map),t=k.useCallback((o,i,s,a)=>{let l=a?.once?(...c)=>{e.current.delete(s),s(...c)}:s;e.current.set(s,{type:i,eventTarget:o,fn:l,options:a}),o.addEventListener(i,l,a)},[]),n=k.useCallback((o,i,s,a)=>{var l;let c=((l=e.current.get(s))===null||l===void 0?void 0:l.fn)||s;o.removeEventListener(i,c,a),e.current.delete(s)},[]),r=k.useCallback(()=>{e.current.forEach((o,i)=>{n(o.eventTarget,o.type,i,o.options)})},[n]);return k.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function hJe(e){return e.mozInputSource===0&&e.isTrusted?!0:fJe()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function qoe(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function pJe(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function Zoe(e){let t=k.useRef({isFocused:!1,observer:null});Voe(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=iJe(r=>{e?.(r)});return k.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let o=r.target,i=s=>{if(t.current.isFocused=!1,o.disabled){let a=qoe(s);n(a)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&o.disabled){var s;(s=t.current.observer)===null||s===void 0||s.disconnect();let a=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),t.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let mJe=!1,Cv=null,jI=new Set,y0=new Map,gh=!1,zI=!1;const gJe={Tab:!0,Escape:!0};function TD(e,t){for(let n of jI)n(e,t)}function yJe(e){return!(e.metaKey||!dJe()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function Lk(e){gh=!0,yJe(e)&&(Cv="keyboard",TD("keyboard",e))}function fm(e){Cv="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(gh=!0,TD("pointer",e))}function Woe(e){hJe(e)&&(gh=!0,Cv="virtual")}function Koe(e){e.target===window||e.target===document||mJe||!e.isTrusted||(!gh&&!zI&&(Cv="virtual",TD("virtual",e)),gh=!1,zI=!1)}function Yoe(){gh=!1,zI=!0}function BI(e){if(typeof window>"u"||typeof document>"u"||y0.get(zf(e)))return;const t=zf(e),n=Vd(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){gh=!0,r.apply(this,arguments)},n.addEventListener("keydown",Lk,!0),n.addEventListener("keyup",Lk,!0),n.addEventListener("click",Woe,!0),t.addEventListener("focus",Koe,!0),t.addEventListener("blur",Yoe,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",fm,!0),n.addEventListener("pointermove",fm,!0),n.addEventListener("pointerup",fm,!0)),t.addEventListener("beforeunload",()=>{Joe(e)},{once:!0}),y0.set(t,{focus:r})}const Joe=(e,t)=>{const n=zf(e),r=Vd(e);t&&r.removeEventListener("DOMContentLoaded",t),y0.has(n)&&(n.HTMLElement.prototype.focus=y0.get(n).focus,r.removeEventListener("keydown",Lk,!0),r.removeEventListener("keyup",Lk,!0),r.removeEventListener("click",Woe,!0),n.removeEventListener("focus",Koe,!0),n.removeEventListener("blur",Yoe,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",fm,!0),r.removeEventListener("pointermove",fm,!0),r.removeEventListener("pointerup",fm,!0)),y0.delete(n))};function bJe(e){const t=Vd(e);let n;return t.readyState!=="loading"?BI(e):(n=()=>{BI(e)},t.addEventListener("DOMContentLoaded",n)),()=>Joe(e,n)}typeof document<"u"&&bJe();function Xoe(){return Cv!=="pointer"}const vJe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function wJe(e,t,n){let r=Vd(n?.target);const o=typeof window<"u"?zf(n?.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?zf(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,s=typeof window<"u"?zf(n?.target).HTMLElement:HTMLElement,a=typeof window<"u"?zf(n?.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!vJe.has(r.activeElement.type)||r.activeElement instanceof i||r.activeElement instanceof s&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof a&&!gJe[n.key])}function xJe(e,t,n){BI(),k.useEffect(()=>{let r=(o,i)=>{wJe(!!n?.isTextInput,o,i)&&e(Xoe())};return jI.add(r),()=>{jI.delete(r)}},t)}function SJe(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:o}=e;const i=k.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),o&&o(!1),!0},[r,o]),s=Zoe(i),a=k.useCallback(l=>{const c=Vd(l.target),u=c?LI(c):LI();l.target===l.currentTarget&&u===Hoe(l.nativeEvent)&&(n&&n(l),o&&o(!0),s(l))},[o,n,s]);return{focusProps:{onFocus:!t&&(n||o||r)?a:void 0,onBlur:!t&&(r||o)?i:void 0}}}function kJe(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:o}=e,i=k.useRef({isFocusWithin:!1}),{addGlobalListener:s,removeAllGlobalListeners:a}=Goe(),l=k.useCallback(f=>{f.currentTarget.contains(f.target)&&i.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(i.current.isFocusWithin=!1,a(),n&&n(f),o&&o(!1))},[n,o,i,a]),c=Zoe(l),u=k.useCallback(f=>{if(!f.currentTarget.contains(f.target))return;const p=Vd(f.target),m=LI(p);if(!i.current.isFocusWithin&&m===Hoe(f.nativeEvent)){r&&r(f),o&&o(!0),i.current.isFocusWithin=!0,c(f);let y=f.currentTarget;s(p,"focus",b=>{if(i.current.isFocusWithin&&!Foe(y,b.target)){let x=new p.defaultView.FocusEvent("blur",{relatedTarget:b.target});pJe(x,y);let S=qoe(x);l(S)}},{capture:!0})}},[r,o,c,s,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:l}}}let VI=!1,jw=0;function CJe(){VI=!0,setTimeout(()=>{VI=!1},50)}function PF(e){e.pointerType==="touch"&&CJe()}function EJe(){if(!(typeof document>"u"))return jw===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",PF),jw++,()=>{jw--,!(jw>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",PF)}}function TJe(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:o}=e,[i,s]=k.useState(!1),a=k.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;k.useEffect(EJe,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=Goe(),{hoverProps:u,triggerHoverEnd:f}=k.useMemo(()=>{let p=(b,x)=>{if(a.pointerType=x,o||x==="touch"||a.isHovered||!b.currentTarget.contains(b.target))return;a.isHovered=!0;let S=b.currentTarget;a.target=S,l(Vd(b.target),"pointerover",E=>{a.isHovered&&a.target&&!Foe(a.target,E.target)&&m(E,E.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:S,pointerType:x}),n&&n(!0),s(!0)},m=(b,x)=>{let S=a.target;a.pointerType="",a.target=null,!(x==="touch"||!a.isHovered||!S)&&(a.isHovered=!1,c(),r&&r({type:"hoverend",target:S,pointerType:x}),n&&n(!1),s(!1))},y={};return typeof PointerEvent<"u"&&(y.onPointerEnter=b=>{VI&&b.pointerType==="mouse"||p(b,b.pointerType)},y.onPointerLeave=b=>{!o&&b.currentTarget.contains(b.target)&&m(b,b.pointerType)}),{hoverProps:y,triggerHoverEnd:m}},[t,n,r,o,a,l,c]);return k.useEffect(()=>{o&&f({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:u,isHovered:i}}function _Je(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,o=k.useRef({isFocused:!1,isFocusVisible:t||Xoe()}),[i,s]=k.useState(!1),[a,l]=k.useState(()=>o.current.isFocused&&o.current.isFocusVisible),c=k.useCallback(()=>l(o.current.isFocused&&o.current.isFocusVisible),[]),u=k.useCallback(m=>{o.current.isFocused=m,s(m),c()},[c]);xJe(m=>{o.current.isFocusVisible=m,c()},[],{isTextInput:n});let{focusProps:f}=SJe({isDisabled:r,onFocusChange:u}),{focusWithinProps:p}=kJe({isDisabled:!r,onFocusWithinChange:u});return{isFocused:i,isFocusVisible:a,focusProps:r?p:f}}var AJe=Object.defineProperty,MJe=(e,t,n)=>t in e?AJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pM=(e,t,n)=>(MJe(e,typeof t!="symbol"?t+"":t,n),n);let RJe=class{constructor(){pM(this,"current",this.detect()),pM(this,"handoffState","pending"),pM(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ql=new RJe;function Nh(e){var t,n;return ql.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?(n=(t=e.current)==null?void 0:t.ownerDocument)!=null?n:document:null:document}function AE(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function va(){let e=[],t={addEventListener(n,r,o,i){return n.addEventListener(r,o,i),t.add(()=>n.removeEventListener(r,o,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return AE(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,o){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=va();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let o of e.splice(r,1))o()}},dispose(){for(let n of e.splice(0))n()}};return t}function vg(){let[e]=k.useState(va);return k.useEffect(()=>()=>e.dispose(),[e]),e}let wn=(e,t)=>{ql.isServer?k.useEffect(e,t):k.useLayoutEffect(e,t)};function Ih(e){let t=k.useRef(e);return wn(()=>{t.current=e},[e]),t}let ct=function(e){let t=Ih(e);return ie.useCallback((...n)=>t.current(...n),[t])};function NJe(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function IJe(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function OJe({disabled:e=!1}={}){let t=k.useRef(null),[n,r]=k.useState(!1),o=vg(),i=ct(()=>{t.current=null,r(!1),o.dispose()}),s=ct(a=>{if(o.dispose(),t.current===null){t.current=a.currentTarget,r(!0);{let l=Nh(a.currentTarget);o.addEventListener(l,"pointerup",i,!1),o.addEventListener(l,"pointermove",c=>{if(t.current){let u=NJe(c);r(IJe(u,t.current.getBoundingClientRect()))}},!1),o.addEventListener(l,"pointercancel",i,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:s,onPointerUp:i,onClick:i}}}let PJe=k.createContext(void 0);function Qoe(){return k.useContext(PJe)}function FI(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function nl(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,nl),r}var Dm=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Dm||{}),ud=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ud||{});function Gr(){let e=$Je();return k.useCallback(t=>DJe({mergeRefs:e,...t}),[e])}function DJe({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:s,mergeRefs:a}){a=a??LJe;let l=eie(t,e);if(i)return zw(l,n,r,s,a);let c=o??0;if(c&2){let{static:u=!1,...f}=l;if(u)return zw(f,n,r,s,a)}if(c&1){let{unmount:u=!0,...f}=l;return nl(u?0:1,{0(){return null},1(){return zw({...f,hidden:!0,style:{display:"none"}},n,r,s,a)}})}return zw(l,n,r,s,a)}function zw(e,t={},n,r,o){let{as:i=n,children:s,refName:a="ref",...l}=mM(e,["unmount","static"]),c=e.ref!==void 0?{[a]:e.ref}:{},u=typeof s=="function"?s(t):s;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let p=!1,m=[];for(let[y,b]of Object.entries(t))typeof b=="boolean"&&(p=!0),b===!0&&m.push(y.replace(/([A-Z])/g,x=>`-${x.toLowerCase()}`));if(p){f["data-headlessui-state"]=m.join(" ");for(let y of m)f[`data-${y}`]=""}}if(i===k.Fragment&&(Object.keys(wf(l)).length>0||Object.keys(wf(f)).length>0))if(!k.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(wf(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(wf(l)).concat(Object.keys(wf(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,m=p?.className,y=typeof m=="function"?(...S)=>FI(m(...S),l.className):FI(m,l.className),b=y?{className:y}:{},x=eie(u.props,wf(mM(l,["ref"])));for(let S in f)S in x&&delete f[S];return k.cloneElement(u,Object.assign({},x,f,c,{ref:o(jJe(u),c.ref)},b))}return k.createElement(i,Object.assign({},mM(l,["ref"]),i!==k.Fragment&&c,i!==k.Fragment&&f),u)}function $Je(){let e=k.useRef([]),t=k.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function LJe(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function eie(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[o=>{var i;return(i=o?.preventDefault)==null?void 0:i.call(o)}]);for(let r in n)Object.assign(t,{[r](o,...i){let s=n[r];for(let a of s){if((o instanceof Event||o?.nativeEvent instanceof Event)&&o.defaultPrevented)return;a(o,...i)}}});return t}function tie(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];for(let r in n)Object.assign(t,{[r](...o){let i=n[r];for(let s of i)s?.(...o)}});return t}function xr(e){var t;return Object.assign(k.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function wf(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function mM(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function jJe(e){return ie.version.split(".")[0]>="19"?e.props.ref:e.ref}let zJe="span";var jk=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(jk||{});function BJe(e,t){var n;let{features:r=1,...o}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Gr()({ourProps:i,theirProps:o,slot:{},defaultTag:zJe,name:"Hidden"})}let HI=xr(BJe),VJe=k.createContext(void 0);function FJe(){return k.useContext(VJe)}function _D(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function Kc(e){return _D(e)&&"tagName"in e}function Ns(e){return Kc(e)&&"accessKey"in e}function jl(e){return Kc(e)&&"tabIndex"in e}function HJe(e){return Kc(e)&&"style"in e}function UJe(e){return Ns(e)&&e.nodeName==="IFRAME"}function nie(e){return Ns(e)&&e.nodeName==="INPUT"}function DF(e){return Ns(e)&&e.nodeName==="LABEL"}function GJe(e){return Ns(e)&&e.nodeName==="FIELDSET"}function rie(e){return Ns(e)&&e.nodeName==="LEGEND"}function qJe(e){return Kc(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function ZJe(e){let t=e.parentElement,n=null;for(;t&&!GJe(t);)rie(t)&&(n=t),t=t.parentElement;let r=t?.getAttribute("disabled")==="";return r&&WJe(n)?!1:r}function WJe(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(rie(t))return!1;t=t.previousElementSibling}return!0}let oie=Symbol();function KJe(e,t=!0){return Object.assign(e,{[oie]:t})}function xi(...e){let t=k.useRef(e);k.useEffect(()=>{t.current=e},[e]);let n=ct(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||r?.[oie])?void 0:n}let AD=k.createContext(null);AD.displayName="DescriptionContext";function iie(){let e=k.useContext(AD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,iie),t}return e}function sie(){let[e,t]=k.useState([]);return[e.length>0?e.join(" "):void 0,k.useMemo(()=>function(n){let r=ct(i=>(t(s=>[...s,i]),()=>t(s=>{let a=s.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),o=k.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ie.createElement(AD.Provider,{value:o},n.children)},[t])]}let YJe="p";function JJe(e,t){let n=k.useId(),r=Qoe(),{id:o=`headlessui-description-${n}`,...i}=e,s=iie(),a=xi(t);wn(()=>s.register(o),[o,s.register]);let l=r||!1,c=k.useMemo(()=>({...s.slot,disabled:l}),[s.slot,l]),u={ref:a,...s.props,id:o};return Gr()({ourProps:u,theirProps:i,slot:c,defaultTag:YJe,name:s.name||"Description"})}let XJe=xr(JJe),_b=Object.assign(XJe,{});var go=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(go||{});let ME=k.createContext(null);ME.displayName="LabelContext";function MD(){let e=k.useContext(ME);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,MD),t}return e}function QJe(e){var t,n,r;let o=(n=(t=k.useContext(ME))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[o,...e].filter(Boolean).join(" "):o}function aie({inherit:e=!1}={}){let t=QJe(),[n,r]=k.useState([]),o=e?[t,...n].filter(Boolean):n;return[o.length>0?o.join(" "):void 0,k.useMemo(()=>function(i){let s=ct(l=>(r(c=>[...c,l]),()=>r(c=>{let u=c.slice(),f=u.indexOf(l);return f!==-1&&u.splice(f,1),u}))),a=k.useMemo(()=>({register:s,slot:i.slot,name:i.name,props:i.props,value:i.value}),[s,i.slot,i.name,i.props,i.value]);return ie.createElement(ME.Provider,{value:a},i.children)},[r])]}let eXe="label";function tXe(e,t){var n;let r=k.useId(),o=MD(),i=FJe(),s=Qoe(),{id:a=`headlessui-label-${r}`,htmlFor:l=i??((n=o.props)==null?void 0:n.htmlFor),passive:c=!1,...u}=e,f=xi(t);wn(()=>o.register(a),[a,o.register]);let p=ct(x=>{let S=x.currentTarget;if(!(x.target!==x.currentTarget&&qJe(x.target))&&(DF(S)&&x.preventDefault(),o.props&&"onClick"in o.props&&typeof o.props.onClick=="function"&&o.props.onClick(x),DF(S))){let E=document.getElementById(S.htmlFor);if(E){let T=E.getAttribute("disabled");if(T==="true"||T==="")return;let A=E.getAttribute("aria-disabled");if(A==="true"||A==="")return;(nie(E)&&(E.type==="file"||E.type==="radio"||E.type==="checkbox")||E.role==="radio"||E.role==="checkbox"||E.role==="switch")&&E.click(),E.focus({preventScroll:!0})}}}),m=s||!1,y=k.useMemo(()=>({...o.slot,disabled:m}),[o.slot,m]),b={ref:f,...o.props,id:a,htmlFor:l,onClick:p};return c&&("onClick"in b&&(delete b.htmlFor,delete b.onClick),"onClick"in u&&delete u.onClick),Gr()({ourProps:b,theirProps:u,slot:y,defaultTag:l?eXe:"div",name:o.name||"Label"})}let nXe=xr(tXe);Object.assign(nXe,{});let rXe=k.createContext(()=>{});function oXe({value:e,children:t}){return ie.createElement(rXe.Provider,{value:e},t)}function iXe(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function sXe(e,t=!1){let[n,r]=k.useReducer(()=>({}),{}),o=k.useMemo(()=>iXe(e),[e,n]);return wn(()=>{if(!e)return;let i=new ResizeObserver(r);return i.observe(e),()=>{i.disconnect()}},[e]),t?{width:`${o.width}px`,height:`${o.height}px`}:o}let lie=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var aXe=Object.defineProperty,lXe=(e,t,n)=>t in e?aXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cXe=(e,t,n)=>(lXe(e,t+"",n),n),cie=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Js=(e,t,n)=>(cie(e,t,"read from private field"),n?n.call(e):t.get(e)),gM=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},$F=(e,t,n,r)=>(cie(e,t,"write to private field"),t.set(e,n),n),Cl,By,Vy;let uie=class{constructor(t){gM(this,Cl,{}),gM(this,By,new lie(()=>new Set)),gM(this,Vy,new Set),cXe(this,"disposables",va()),$F(this,Cl,t),ql.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Js(this,Cl)}subscribe(t,n){if(ql.isServer)return()=>{};let r={selector:t,callback:n,current:t(Js(this,Cl))};return Js(this,Vy).add(r),this.disposables.add(()=>{Js(this,Vy).delete(r)})}on(t,n){return ql.isServer?()=>{}:(Js(this,By).get(t).add(n),this.disposables.add(()=>{Js(this,By).get(t).delete(n)}))}send(t){let n=this.reduce(Js(this,Cl),t);if(n!==Js(this,Cl)){$F(this,Cl,n);for(let r of Js(this,Vy)){let o=r.selector(Js(this,Cl));die(r.current,o)||(r.current=o,r.callback(o))}for(let r of Js(this,By).get(t.type))r(Js(this,Cl),t)}}};Cl=new WeakMap,By=new WeakMap,Vy=new WeakMap;function die(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:yM(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:yM(e.entries(),t.entries()):LF(e)&&LF(t)?yM(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function yM(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function LF(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function jF(e){let[t,n]=e(),r=va();return(...o)=>{t(...o),r.dispose(),r.microTask(n)}}var uXe=Object.defineProperty,dXe=(e,t,n)=>t in e?uXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zF=(e,t,n)=>(dXe(e,typeof t!="symbol"?t+"":t,n),n),fie=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(fie||{});let fXe={0(e,t){let n=t.id,r=e.stack,o=e.stack.indexOf(n);if(o!==-1){let i=e.stack.slice();return i.splice(o,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let o=e.stack.slice();return o.splice(r,1),{...e,stack:o}}},hXe=class hie extends uie{constructor(){super(...arguments),zF(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),zF(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new hie({stack:[]})}reduce(t,n){return nl(n.type,fXe,t,n)}};const RE=new lie(()=>hXe.new());var bM={exports:{}},vM={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BF;function pXe(){if(BF)return vM;BF=1;var e=$b();function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,o=e.useRef,i=e.useEffect,s=e.useMemo,a=e.useDebugValue;return vM.useSyncExternalStoreWithSelector=function(l,c,u,f,p){var m=o(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=s(function(){function x(M){if(!S){if(S=!0,E=M,M=f(M),p!==void 0&&y.hasValue){var R=y.value;if(p(R,M))return T=R}return T=M}if(R=T,n(E,M))return R;var O=f(M);return p!==void 0&&p(R,O)?(E=M,R):(E=M,T=O)}var S=!1,E,T,A=u===void 0?null:u;return[function(){return x(c())},A===null?void 0:function(){return x(A())}]},[c,u,f,p]);var b=r(l,m[0],m[1]);return i(function(){y.hasValue=!0,y.value=b},[b]),a(b),b},vM}var VF;function mXe(){return VF||(VF=1,bM.exports=pXe()),bM.exports}var gXe=mXe();function qa(e,t,n=die){return gXe.useSyncExternalStoreWithSelector(ct(r=>e.subscribe(yXe,r)),ct(()=>e.state),ct(()=>e.state),ct(t),n)}function yXe(e){return e}function Ev(e,t){let n=k.useId(),r=RE.get(t),[o,i]=qa(r,k.useCallback(s=>[r.selectors.isTop(s,n),r.selectors.inStack(s,n)],[r,n]));return wn(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?o:!0:!1}let UI=new Map,b0=new Map;function FF(e){var t;let n=(t=b0.get(e))!=null?t:0;return b0.set(e,n+1),n!==0?()=>HF(e):(UI.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>HF(e))}function HF(e){var t;let n=(t=b0.get(e))!=null?t:1;if(n===1?b0.delete(e):b0.set(e,n-1),n!==1)return;let r=UI.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,UI.delete(e))}function pie(e,{allowed:t,disallowed:n}={}){let r=Ev(e,"inert-others");wn(()=>{var o,i;if(!r)return;let s=va();for(let l of(o=n?.())!=null?o:[])l&&s.add(FF(l));let a=(i=t?.())!=null?i:[];for(let l of a){if(!l)continue;let c=Nh(l);if(!c)continue;let u=l.parentElement;for(;u&&u!==c.body;){for(let f of u.children)a.some(p=>f.contains(p))||s.add(FF(f));u=u.parentElement}}return s.dispose},[r,t,n])}function mie(e,t,n){let r=Ih(o=>{let i=o.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});k.useEffect(()=>{if(!e)return;let o=t===null?null:Ns(t)?t:t.current;if(!o)return;let i=va();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}return()=>i.dispose()},[t,r,e])}let zk=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),bXe=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Va=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Va||{}),GI=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(GI||{}),vXe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(vXe||{});function gie(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(zk)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function wXe(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(bXe)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var RD=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(RD||{});function ND(e,t=0){var n;return e===((n=Nh(e))==null?void 0:n.body)?!1:nl(t,{0(){return e.matches(zk)},1(){let r=e;for(;r!==null;){if(r.matches(zk))return!0;r=r.parentElement}return!1}})}function yie(e){let t=Nh(e);va().nextFrame(()=>{t&&jl(t.activeElement)&&!ND(t.activeElement,0)&&Zl(e)})}var xXe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(xXe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Zl(e){e?.focus({preventScroll:!0})}let SXe=["textarea","input"].join(",");function kXe(e){var t,n;return(n=(t=e?.matches)==null?void 0:t.call(e,SXe))!=null?n:!1}function bie(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let s=o.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function CXe(e,t){return hm(gie(),t,{relativeTo:e})}function hm(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?n?bie(e):e:t&64?wXe(e):gie(e);o.length>0&&s.length>1&&(s=s.filter(m=>!o.some(y=>y!=null&&"current"in y?y?.current===m:y===m))),r=r??i.activeElement;let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=t&32?{preventScroll:!0}:{},u=0,f=s.length,p;do{if(u>=f||u+f<=0)return 0;let m=l+u;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}p=s[m],p?.focus(c),u+=a}while(p!==i.activeElement);return t&6&&kXe(p)&&p.select(),2}function vie(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function EXe(){return/Android/gi.test(window.navigator.userAgent)}function UF(){return vie()||EXe()}function Xp(e,t,n,r){let o=Ih(n);k.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function wie(e,t,n,r){let o=Ih(n);k.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const GF=30;function xie(e,t,n){let r=Ih(n),o=k.useCallback(function(a,l){if(a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of u)if(f!==null&&(f.contains(c)||a.composed&&a.composedPath().includes(f)))return;return!ND(c,RD.Loose)&&c.tabIndex!==-1&&a.preventDefault(),r.current(a,c)},[r,t]),i=k.useRef(null);Xp(e,"pointerdown",a=>{var l,c;UF()||(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Xp(e,"pointerup",a=>{if(UF()||!i.current)return;let l=i.current;return i.current=null,o(a,()=>l)},!0);let s=k.useRef({x:0,y:0});Xp(e,"touchstart",a=>{s.current.x=a.touches[0].clientX,s.current.y=a.touches[0].clientY},!0),Xp(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-s.current.x)>=GF||Math.abs(l.y-s.current.y)>=GF))return o(a,()=>jl(a.target)?a.target:null)},!0),wie(e,"blur",a=>o(a,()=>UJe(window.document.activeElement)?window.document.activeElement:null),!0)}function $m(...e){return k.useMemo(()=>Nh(...e),[...e])}var TXe=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(TXe||{});const Bw={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},_Xe=200,qF=5;function AXe(e,{trigger:t,action:n,close:r,select:o}){let i=k.useRef(null),s=k.useRef(null),a=k.useRef(null);Xp(e&&t!==null,"pointerdown",l=>{_D(l?.target)&&t!=null&&t.contains(l.target)&&(s.current=l.x,a.current=l.y,i.current=l.timeStamp)}),Xp(e&&t!==null,"pointerup",l=>{var c,u;let f=i.current;if(f===null||(i.current=null,!jl(l.target))||Math.abs(l.x-((c=s.current)!=null?c:l.x))<qF&&Math.abs(l.y-((u=a.current)!=null?u:l.y))<qF)return;let p=n(l);switch(p.kind){case 0:return;case 1:{l.timeStamp-f>_Xe&&(o(p.target),r());break}case 2:{r();break}}},{capture:!0})}function Sie(e,t,n,r){let o=Ih(n);k.useEffect(()=>{e=e??window;function i(s){o.current(s)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function MXe(e,t){return k.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||t?.tagName==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function RXe(e){return k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function NXe(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...i){let s=t[o].call(n,...i);s&&(n=s,r.forEach(a=>a()))}}}function IXe(){let e;return{before({doc:t}){var n;let r=t.documentElement,o=(n=t.defaultView)!=null?n:window;e=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-o);n.style(r,"paddingRight",`${i}px`)}}}function OXe(){return vie()?{before({doc:e,d:t,meta:n}){function r(o){return n.containers.flatMap(i=>i()).some(i=>i.contains(o))}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=va();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let i=(o=window.scrollY)!=null?o:window.pageYOffset,s=null;t.addEventListener(e,"click",a=>{if(jl(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),u=e.querySelector(c);jl(u)&&!r(u)&&(s=u)}catch{}},!0),t.addEventListener(e,"touchstart",a=>{if(jl(a.target)&&HJe(a.target))if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;t.style(l,"overscrollBehavior","contain")}else t.style(a.target,"touchAction","none")}),t.addEventListener(e,"touchmove",a=>{if(jl(a.target)){if(nie(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function PXe(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function DXe(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Bf=NXe(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:va(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:DXe(n)},o=[OXe(),IXe(),PXe()];o.forEach(({before:i})=>i?.(r)),o.forEach(({after:i})=>i?.(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Bf.subscribe(()=>{let e=Bf.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&Bf.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Bf.dispatch("TEARDOWN",n)}});function $Xe(e,t,n=()=>({containers:[]})){let r=RXe(Bf),o=t?r.get(t):void 0,i=o?o.count>0:!1;return wn(()=>{if(!(!t||!e))return Bf.dispatch("PUSH",t,n),()=>Bf.dispatch("POP",t,n)},[e,t]),i}function kie(e,t,n=()=>[document.body]){let r=Ev(e,"scroll-lock");$Xe(r,t,o=>{var i;return{containers:[...(i=o.containers)!=null?i:[],n]}})}function ZF(e){return[e.screenX,e.screenY]}function LXe(){let e=k.useRef([-1,-1]);return{wasMoved(t){let n=ZF(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=ZF(t)}}}function jXe(e=0){let[t,n]=k.useState(e),r=k.useCallback(l=>n(l),[t]),o=k.useCallback(l=>n(c=>c|l),[t]),i=k.useCallback(l=>(t&l)===l,[t]),s=k.useCallback(l=>n(c=>c&~l),[n]),a=k.useCallback(l=>n(c=>c^l),[n]);return{flags:t,setFlag:r,addFlag:o,hasFlag:i,removeFlag:s,toggleFlag:a}}var zXe={},WF,KF;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((WF=process==null?void 0:zXe)==null?void 0:WF.NODE_ENV)==="test"&&typeof((KF=Element?.prototype)==null?void 0:KF.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var BXe=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(BXe||{});function Cie(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function Eie(e,t,n,r){let[o,i]=k.useState(n),{hasFlag:s,addFlag:a,removeFlag:l}=jXe(e&&o?3:0),c=k.useRef(!1),u=k.useRef(!1),f=vg();return wn(()=>{var p;if(e){if(n&&i(!0),!t){n&&a(3);return}return(p=r?.start)==null||p.call(r,n),VXe(t,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){u.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var m;u.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(c.current=!1,l(7),n||i(!1),(m=r?.end)==null||m.call(r,n))}})}},[e,n,t,f]),e?[o,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function VXe(e,{prepare:t,run:n,done:r,inFlight:o}){let i=va();return HXe(e,{prepare:t,inFlight:o}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(FXe(e,r))})}),i.dispose}function FXe(e,t){var n,r;let o=va();if(!e)return o.dispose;let i=!1;o.add(()=>{i=!0});let s=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return s.length===0?(t(),o.dispose):(Promise.allSettled(s.map(a=>a.finished)).then(()=>{i||t()}),o.dispose)}function HXe(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function UXe(e,{container:t,accept:n,walk:r}){let o=k.useRef(n),i=k.useRef(r);k.useEffect(()=>{o.current=n,i.current=r},[n,r]),wn(()=>{if(!t||!e)return;let s=Nh(t);if(!s)return;let a=o.current,l=i.current,c=Object.assign(f=>a(f),{acceptNode:a}),u=s.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,c,!1);for(;u.nextNode();)l(u.currentNode)},[t,e,o,i])}function ID(e,t){let n=k.useRef([]),r=ct(e);k.useEffect(()=>{let o=[...n.current];for(let[i,s]of t.entries())if(n.current[i]!==s){let a=r(t,o);return n.current=t,a}},[r,...t])}let wg=k.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});wg.displayName="FloatingContext";let OD=k.createContext(null);OD.displayName="PlacementContext";function GXe(e){return k.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function qXe(){return k.useContext(wg).setReference}function ZXe(){return k.useContext(wg).getReferenceProps}function WXe(){let{getFloatingProps:e,slot:t}=k.useContext(wg);return k.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function KXe(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=k.useContext(OD),n=k.useMemo(()=>e,[JSON.stringify(e,(o,i)=>{var s;return(s=i?.outerHTML)!=null?s:i})]);wn(()=>{t?.(n??null)},[t,n]);let r=k.useContext(wg);return k.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let YF=4;function YXe({children:e,enabled:t=!0}){let[n,r]=k.useState(null),[o,i]=k.useState(0),s=k.useRef(null),[a,l]=k.useState(null);JXe(a);let c=t&&n!==null&&a!==null,{to:u="bottom",gap:f=0,offset:p=0,padding:m=0,inner:y}=XXe(n,a),[b,x="center"]=u.split(" ");wn(()=>{c&&i(0)},[c]);let{refs:S,floatingStyles:E,context:T}=kh({open:c,placement:b==="selection"?x==="center"?"bottom":`bottom-${x}`:x==="center"?`${b}`:`${b}-${x}`,strategy:"absolute",transform:!1,middleware:[Gi({mainAxis:b==="selection"?0:f,crossAxis:p}),cu({padding:m}),b!=="selection"&&As({padding:m}),b==="selection"&&y?w2e({...y,padding:m,overflowRef:s,offset:o,minItemsVisible:YF,referenceOverflowThreshold:m,onFallbackChange(B){var H,V;if(!B)return;let W=T.elements.floating;if(!W)return;let K=parseFloat(getComputedStyle(W).scrollPaddingBottom)||0,z=Math.min(YF,W.childElementCount),G=0,F=0;for(let Z of(V=(H=T.elements.floating)==null?void 0:H.childNodes)!=null?V:[])if(Ns(Z)){let N=Z.offsetTop,U=N+Z.clientHeight+K,ee=W.scrollTop,D=ee+W.clientHeight;if(N>=ee&&U<=D)z--;else{F=Math.max(0,Math.min(U,D)-Math.max(N,ee)),G=Z.clientHeight;break}}z>=1&&i(Z=>{let N=G*z-F+K;return Z>=N?Z:N})}}):null,Sh({padding:m,apply({availableWidth:B,availableHeight:H,elements:V}){Object.assign(V.floating.style,{overflow:"auto",maxWidth:`${B}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${H}px)`})}})].filter(Boolean),whileElementsMounted:zC}),[A=b,M=x]=T.placement.split("-");b==="selection"&&(A="selection");let R=k.useMemo(()=>({anchor:[A,M].filter(Boolean).join(" ")}),[A,M]),O=x2e(T,{overflowRef:s,onChange:i}),{getReferenceProps:I,getFloatingProps:L}=i3([O]),$=ct(B=>{l(B),S.setFloating(B)});return k.createElement(OD.Provider,{value:r},k.createElement(wg.Provider,{value:{setFloating:$,setReference:S.setReference,styles:E,getReferenceProps:I,getFloatingProps:L,slot:R}},e))}function JXe(e){wn(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let o=parseInt(n);isNaN(o)||r!==o&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function XXe(e,t){var n,r,o;let i=wM((n=e?.gap)!=null?n:"var(--anchor-gap, 0)",t),s=wM((r=e?.offset)!=null?r:"var(--anchor-offset, 0)",t),a=wM((o=e?.padding)!=null?o:"var(--anchor-padding, 0)",t);return{...e,gap:i,offset:s,padding:a}}function wM(e,t,n=void 0){let r=vg(),o=ct((l,c)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[n,null];let u=JF(l,c);return[u,f=>{let p=Tie(l);{let m=p.map(y=>window.getComputedStyle(c).getPropertyValue(y));r.requestAnimationFrame(function y(){r.nextFrame(y);let b=!1;for(let[S,E]of p.entries()){let T=window.getComputedStyle(c).getPropertyValue(E);if(m[S]!==T){m[S]=T,b=!0;break}}if(!b)return;let x=JF(l,c);u!==x&&(f(x),u=x)})}return r.dispose}]}return[n,null]}),i=k.useMemo(()=>o(e,t)[0],[e,t]),[s=i,a]=k.useState();return wn(()=>{let[l,c]=o(e,t);if(a(l),!!c)return c(a)},[e,t]),s}function Tie(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),o=t[1].slice(n+1).trim();return o?[r,...Tie(o)]:[r]}return[]}function JF(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let NE=k.createContext(null);NE.displayName="OpenClosedContext";var pi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(pi||{});function Tv(){return k.useContext(NE)}function _ie({value:e,children:t}){return ie.createElement(NE.Provider,{value:e},t)}function QXe({children:e}){return ie.createElement(NE.Provider,{value:null},e)}function eQe(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let rd=[];eQe(()=>{function e(t){if(!jl(t.target)||t.target===document.body||rd[0]===t.target)return;let n=t.target;n=n.closest(zk),rd.unshift(n??t.target),rd=rd.filter(r=>r!=null&&r.isConnected),rd.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function tQe(e){throw new Error("Unexpected object: "+e)}var Br=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Br||{});function Vw(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),o=r??-1;switch(e.focus){case 0:{for(let i=0;i<n.length;++i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 1:{o===-1&&(o=n.length);for(let i=o-1;i>=0;--i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 2:{for(let i=o+1;i<n.length;++i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 3:{for(let i=n.length-1;i>=0;--i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 4:{for(let i=0;i<n.length;++i)if(t.resolveId(n[i],i,n)===e.id)return i;return r}case 5:return null;default:tQe(e)}}var Aie=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Aie||{});function PD(e){let t=ct(e),n=k.useRef(!1);k.useEffect(()=>(n.current=!1,()=>{n.current=!0,AE(()=>{n.current&&t()})}),[t])}function nQe(){let e=typeof document>"u";return(t=>t.useSyncExternalStore)(Lb)(()=>()=>{},()=>!1,()=>!e)}function _v(){let e=nQe(),[t,n]=k.useState(ql.isHandoffComplete);return t&&ql.isHandoffComplete===!1&&n(!1),k.useEffect(()=>{t!==!0&&n(!0)},[t]),k.useEffect(()=>ql.handoff(),[]),e?!1:t}let Mie=k.createContext(!1);function rQe(){return k.useContext(Mie)}function XF(e){return ie.createElement(Mie.Provider,{value:e.force},e.children)}function oQe(e){let t=rQe(),n=k.useContext(Nie),[r,o]=k.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(ql.isServer)return null;let s=e?.getElementById("headlessui-portal-root");if(s)return s;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return k.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),k.useEffect(()=>{t||n!==null&&o(n.current)},[n,o,t]),r}let Rie=k.Fragment,iQe=xr(function(e,t){let{ownerDocument:n=null,...r}=e,o=k.useRef(null),i=xi(KJe(m=>{o.current=m}),t),s=$m(o),a=n??s,l=oQe(a),[c]=k.useState(()=>{var m;return ql.isServer?null:(m=a?.createElement("div"))!=null?m:null}),u=k.useContext(qI),f=_v();wn(()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))},[l,c]),wn(()=>{if(c&&u)return u.register(c)},[u,c]),PD(()=>{var m;!l||!c||(_D(c)&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&((m=l.parentElement)==null||m.removeChild(l)))});let p=Gr();return f?!l||!c?null:Ur.createPortal(p({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:Rie,name:"Portal"}),c):null});function sQe(e,t){let n=xi(t),{enabled:r=!0,ownerDocument:o,...i}=e,s=Gr();return r?ie.createElement(iQe,{...i,ownerDocument:o,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:Rie,name:"Portal"})}let aQe=k.Fragment,Nie=k.createContext(null);function lQe(e,t){let{target:n,...r}=e,o={ref:xi(t)},i=Gr();return ie.createElement(Nie.Provider,{value:n},i({ourProps:o,theirProps:r,defaultTag:aQe,name:"Popover.Group"}))}let qI=k.createContext(null);function cQe(){let e=k.useContext(qI),t=k.useRef([]),n=ct(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ct(i=>{let s=t.current.indexOf(i);s!==-1&&t.current.splice(s,1),e&&e.unregister(i)}),o=k.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,k.useMemo(()=>function({children:i}){return ie.createElement(qI.Provider,{value:o},i)},[o])]}let uQe=xr(sQe),Iie=xr(lQe),Oie=Object.assign(uQe,{Group:Iie});function dQe(e,t=typeof document<"u"?document.defaultView:null,n){let r=Ev(e,"escape");Sie(t,"keydown",o=>{r&&(o.defaultPrevented||o.key===go.Escape&&n(o))})}function fQe(){var e;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=k.useState((e=t?.matches)!=null?e:!1);return wn(()=>{if(!t)return;function o(i){r(i.matches)}return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),n}function hQe({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=$m(n),o=ct(()=>{var i,s;let a=[];for(let l of e)l!==null&&(Kc(l)?a.push(l):"current"in l&&Kc(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(i=r?.querySelectorAll("html > *, body > *"))!=null?i:[])l!==document.body&&l!==document.head&&Kc(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((s=n?.getRootNode())==null?void 0:s.host))||a.some(c=>l.contains(c))||a.push(l));return a});return{resolveContainers:o,contains:ct(i=>o().some(s=>s.contains(i)))}}let Pie=k.createContext(null);function QF({children:e,node:t}){let[n,r]=k.useState(null),o=Die(t??n);return ie.createElement(Pie.Provider,{value:o},e,o===null&&ie.createElement(HI,{features:jk.Hidden,ref:i=>{var s,a;if(i){for(let l of(a=(s=Nh(i))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&Kc(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function Die(e=null){var t;return(t=k.useContext(Pie))!=null?t:e}function DD(){let e=k.useRef(!1);return wn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Fy=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Fy||{});function pQe(){let e=k.useRef(0);return wie(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function $ie(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)Kc(n.current)&&t.add(n.current);return t}let mQe="div";var _f=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(_f||{});function gQe(e,t){let n=k.useRef(null),r=xi(n,t),{initialFocus:o,initialFocusFallback:i,containers:s,features:a=15,...l}=e;_v()||(a=0);let c=$m(n);wQe(a,{ownerDocument:c});let u=xQe(a,{ownerDocument:c,container:n,initialFocus:o,initialFocusFallback:i});SQe(a,{ownerDocument:c,container:n,containers:s,previousActiveElement:u});let f=pQe(),p=ct(E=>{if(!Ns(n.current))return;let T=n.current;(A=>A())(()=>{nl(f.current,{[Fy.Forwards]:()=>{hm(T,Va.First,{skipElements:[E.relatedTarget,i]})},[Fy.Backwards]:()=>{hm(T,Va.Last,{skipElements:[E.relatedTarget,i]})}})})}),m=Ev(!!(a&2),"focus-trap#tab-lock"),y=vg(),b=k.useRef(!1),x={ref:r,onKeyDown(E){E.key=="Tab"&&(b.current=!0,y.requestAnimationFrame(()=>{b.current=!1}))},onBlur(E){if(!(a&4))return;let T=$ie(s);Ns(n.current)&&T.add(n.current);let A=E.relatedTarget;jl(A)&&A.dataset.headlessuiFocusGuard!=="true"&&(Lie(T,A)||(b.current?hm(n.current,nl(f.current,{[Fy.Forwards]:()=>Va.Next,[Fy.Backwards]:()=>Va.Previous})|Va.WrapAround,{relativeTo:E.target}):jl(E.target)&&Zl(E.target)))}},S=Gr();return ie.createElement(ie.Fragment,null,m&&ie.createElement(HI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:jk.Focusable}),S({ourProps:x,theirProps:l,defaultTag:mQe,name:"FocusTrap"}),m&&ie.createElement(HI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:jk.Focusable}))}let yQe=xr(gQe),bQe=Object.assign(yQe,{features:_f});function vQe(e=!0){let t=k.useRef(rd.slice());return ID(([n],[r])=>{r===!0&&n===!1&&AE(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=rd.slice())},[e,rd,t]),ct(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function wQe(e,{ownerDocument:t}){let n=!!(e&8),r=vQe(n);ID(()=>{n||t?.activeElement===t?.body&&Zl(r())},[n]),PD(()=>{n&&Zl(r())})}function xQe(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:o}){let i=k.useRef(null),s=Ev(!!(e&1),"focus-trap#initial-focus"),a=DD();return ID(()=>{if(e===0)return;if(!s){o!=null&&o.current&&Zl(o.current);return}let l=n.current;l&&AE(()=>{if(!a.current)return;let c=t?.activeElement;if(r!=null&&r.current){if(r?.current===c){i.current=c;return}}else if(l.contains(c)){i.current=c;return}if(r!=null&&r.current)Zl(r.current);else{if(e&16){if(hm(l,Va.First|Va.AutoFocus)!==GI.Error)return}else if(hm(l,Va.First)!==GI.Error)return;if(o!=null&&o.current&&(Zl(o.current),t?.activeElement===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[o,s,e]),i}function SQe(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:o}){let i=DD(),s=!!(e&4);Sie(t?.defaultView,"focus",a=>{if(!s||!i.current)return;let l=$ie(r);Ns(n.current)&&l.add(n.current);let c=o.current;if(!c)return;let u=a.target;Ns(u)?Lie(l,u)?(o.current=u,Zl(u)):(a.preventDefault(),a.stopPropagation(),Zl(c)):Zl(o.current)},!0)}function Lie(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function jie(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:Bie)!==k.Fragment||ie.Children.count(e.children)===1}let IE=k.createContext(null);IE.displayName="TransitionContext";var kQe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(kQe||{});function CQe(){let e=k.useContext(IE);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function EQe(){let e=k.useContext(OE);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let OE=k.createContext(null);OE.displayName="NestingContext";function PE(e){return"children"in e?PE(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function zie(e,t){let n=Ih(e),r=k.useRef([]),o=DD(),i=vg(),s=ct((m,y=ud.Hidden)=>{let b=r.current.findIndex(({el:x})=>x===m);b!==-1&&(nl(y,{[ud.Unmount](){r.current.splice(b,1)},[ud.Hidden](){r.current[b].state="hidden"}}),i.microTask(()=>{var x;!PE(r)&&o.current&&((x=n.current)==null||x.call(n))}))}),a=ct(m=>{let y=r.current.find(({el:b})=>b===m);return y?y.state!=="visible"&&(y.state="visible"):r.current.push({el:m,state:"visible"}),()=>s(m,ud.Unmount)}),l=k.useRef([]),c=k.useRef(Promise.resolve()),u=k.useRef({enter:[],leave:[]}),f=ct((m,y,b)=>{l.current.splice(0),t&&(t.chains.current[y]=t.chains.current[y].filter(([x])=>x!==m)),t?.chains.current[y].push([m,new Promise(x=>{l.current.push(x)})]),t?.chains.current[y].push([m,new Promise(x=>{Promise.all(u.current[y].map(([S,E])=>E)).then(()=>x())})]),y==="enter"?c.current=c.current.then(()=>t?.wait.current).then(()=>b(y)):b(y)}),p=ct((m,y,b)=>{Promise.all(u.current[y].splice(0).map(([x,S])=>S)).then(()=>{var x;(x=l.current.shift())==null||x()}).then(()=>b(y))});return k.useMemo(()=>({children:r,register:a,unregister:s,onStart:f,onStop:p,wait:c,chains:u}),[a,s,r,f,p,u,c])}let Bie=k.Fragment,Vie=Dm.RenderStrategy;function TQe(e,t){var n,r;let{transition:o=!0,beforeEnter:i,afterEnter:s,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:f,entered:p,leave:m,leaveFrom:y,leaveTo:b,...x}=e,[S,E]=k.useState(null),T=k.useRef(null),A=jie(e),M=xi(...A?[T,t,E]:t===null?[]:[t]),R=(n=x.unmount)==null||n?ud.Unmount:ud.Hidden,{show:O,appear:I,initial:L}=CQe(),[$,B]=k.useState(O?"visible":"hidden"),H=EQe(),{register:V,unregister:W}=H;wn(()=>V(T),[V,T]),wn(()=>{if(R===ud.Hidden&&T.current){if(O&&$!=="visible"){B("visible");return}return nl($,{hidden:()=>W(T),visible:()=>V(T)})}},[$,T,V,W,O,R]);let K=_v();wn(()=>{if(A&&K&&$==="visible"&&T.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[T,$,K,A]);let z=L&&!I,G=I&&O&&L,F=k.useRef(!1),Z=zie(()=>{F.current||(B("hidden"),W(T))},H),N=ct(le=>{F.current=!0;let ge=le?"enter":"leave";Z.onStart(T,ge,Oe=>{Oe==="enter"?i?.():Oe==="leave"&&a?.()})}),U=ct(le=>{let ge=le?"enter":"leave";F.current=!1,Z.onStop(T,ge,Oe=>{Oe==="enter"?s?.():Oe==="leave"&&l?.()}),ge==="leave"&&!PE(Z)&&(B("hidden"),W(T))});k.useEffect(()=>{A&&o||(N(O),U(O))},[O,A,o]);let ee=!(!o||!A||!K||z),[,D]=Eie(ee,S,O,{start:N,end:U}),ae=wf({ref:M,className:((r=FI(x.className,G&&c,G&&u,D.enter&&c,D.enter&&D.closed&&u,D.enter&&!D.closed&&f,D.leave&&m,D.leave&&!D.closed&&y,D.leave&&D.closed&&b,!D.transition&&O&&p))==null?void 0:r.trim())||void 0,...Cie(D)}),oe=0;$==="visible"&&(oe|=pi.Open),$==="hidden"&&(oe|=pi.Closed),O&&$==="hidden"&&(oe|=pi.Opening),!O&&$==="visible"&&(oe|=pi.Closing);let he=Gr();return ie.createElement(OE.Provider,{value:Z},ie.createElement(_ie,{value:oe},he({ourProps:ae,theirProps:x,defaultTag:Bie,features:Vie,visible:$==="visible",name:"Transition.Child"})))}function _Qe(e,t){let{show:n,appear:r=!1,unmount:o=!0,...i}=e,s=k.useRef(null),a=jie(e),l=xi(...a?[s,t]:t===null?[]:[t]);_v();let c=Tv();if(n===void 0&&c!==null&&(n=(c&pi.Open)===pi.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=k.useState(n?"visible":"hidden"),p=zie(()=>{n||f("hidden")}),[m,y]=k.useState(!0),b=k.useRef([n]);wn(()=>{m!==!1&&b.current[b.current.length-1]!==n&&(b.current.push(n),y(!1))},[b,n]);let x=k.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);wn(()=>{n?f("visible"):!PE(p)&&s.current!==null&&f("hidden")},[n,p]);let S={unmount:o},E=ct(()=>{var M;m&&y(!1),(M=e.beforeEnter)==null||M.call(e)}),T=ct(()=>{var M;m&&y(!1),(M=e.beforeLeave)==null||M.call(e)}),A=Gr();return ie.createElement(OE.Provider,{value:p},ie.createElement(IE.Provider,{value:x},A({ourProps:{...S,as:k.Fragment,children:ie.createElement(Fie,{ref:l,...S,...i,beforeEnter:E,beforeLeave:T})},theirProps:{},defaultTag:k.Fragment,features:Vie,visible:u==="visible",name:"Transition"})))}function AQe(e,t){let n=k.useContext(IE)!==null,r=Tv()!==null;return ie.createElement(ie.Fragment,null,!n&&r?ie.createElement(ZI,{ref:t,...e}):ie.createElement(Fie,{ref:t,...e}))}let ZI=xr(_Qe),Fie=xr(TQe),$D=xr(AQe),Hie=Object.assign(ZI,{Child:$D,Root:ZI});var MQe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(MQe||{}),RQe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(RQe||{});let NQe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},LD=k.createContext(null);LD.displayName="DialogContext";function DE(e){let t=k.useContext(LD);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,DE),n}return t}function IQe(e,t){return nl(t.type,NQe,e,t)}let eH=xr(function(e,t){let n=k.useId(),{id:r=`headlessui-dialog-${n}`,open:o,onClose:i,initialFocus:s,role:a="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:u=!1,...f}=e,p=k.useRef(!1);a=(function(){return a==="dialog"||a==="alertdialog"?a:(p.current||(p.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let m=Tv();o===void 0&&m!==null&&(o=(m&pi.Open)===pi.Open);let y=k.useRef(null),b=xi(y,t),x=$m(y),S=o?0:1,[E,T]=k.useReducer(IQe,{titleId:null,descriptionId:null,panelRef:k.createRef()}),A=ct(()=>i(!1)),M=ct(D=>T({type:0,id:D})),R=_v()?S===0:!1,[O,I]=cQe(),L={get current(){var D;return(D=E.panelRef.current)!=null?D:y.current}},$=Die(),{resolveContainers:B}=hQe({mainTreeNode:$,portals:O,defaultContainers:[L]}),H=m!==null?(m&pi.Closing)===pi.Closing:!1;pie(c||H?!1:R,{allowed:ct(()=>{var D,ae;return[(ae=(D=y.current)==null?void 0:D.closest("[data-headlessui-portal]"))!=null?ae:null]}),disallowed:ct(()=>{var D;return[(D=$?.closest("body > *:not(#headlessui-portal-root)"))!=null?D:null]})});let V=RE.get(null);wn(()=>{if(R)return V.actions.push(r),()=>V.actions.pop(r)},[V,r,R]);let W=qa(V,k.useCallback(D=>V.selectors.isTop(D,r),[V,r]));xie(W,B,D=>{D.preventDefault(),A()}),dQe(W,x?.defaultView,D=>{D.preventDefault(),D.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),A()}),kie(c||H?!1:R,x,B),mie(R,y,A);let[K,z]=sie(),G=k.useMemo(()=>[{dialogState:S,close:A,setTitleId:M,unmount:u},E],[S,E,A,M,u]),F=k.useMemo(()=>({open:S===0}),[S]),Z={ref:b,id:r,role:a,tabIndex:-1,"aria-modal":c?void 0:S===0?!0:void 0,"aria-labelledby":E.titleId,"aria-describedby":K,unmount:u},N=!fQe(),U=_f.None;R&&!c&&(U|=_f.RestoreFocus,U|=_f.TabLock,l&&(U|=_f.AutoFocus),N&&(U|=_f.InitialFocus));let ee=Gr();return ie.createElement(QXe,null,ie.createElement(XF,{force:!0},ie.createElement(Oie,null,ie.createElement(LD.Provider,{value:G},ie.createElement(Iie,{target:y},ie.createElement(XF,{force:!1},ie.createElement(z,{slot:F},ie.createElement(I,null,ie.createElement(bQe,{initialFocus:s,initialFocusFallback:y,containers:B,features:U},ie.createElement(oXe,{value:A},ee({ourProps:Z,theirProps:f,slot:F,defaultTag:OQe,features:PQe,visible:S===0,name:"Dialog"})))))))))))}),OQe="div",PQe=Dm.RenderStrategy|Dm.Static;function DQe(e,t){let{transition:n=!1,open:r,...o}=e,i=Tv(),s=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!s&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!o.static?ie.createElement(QF,null,ie.createElement(Hie,{show:r,transition:n,unmount:o.unmount},ie.createElement(eH,{ref:t,...o}))):ie.createElement(QF,null,ie.createElement(eH,{ref:t,open:r,...o}))}let $Qe="div";function LQe(e,t){let n=k.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:o=!1,...i}=e,[{dialogState:s,unmount:a},l]=DE("Dialog.Panel"),c=xi(t,l.panelRef),u=k.useMemo(()=>({open:s===0}),[s]),f=ct(x=>{x.stopPropagation()}),p={ref:c,id:r,onClick:f},m=o?$D:k.Fragment,y=o?{unmount:a}:{},b=Gr();return ie.createElement(m,{...y},b({ourProps:p,theirProps:i,slot:u,defaultTag:$Qe,name:"Dialog.Panel"}))}let jQe="div";function zQe(e,t){let{transition:n=!1,...r}=e,[{dialogState:o,unmount:i}]=DE("Dialog.Backdrop"),s=k.useMemo(()=>({open:o===0}),[o]),a={ref:t,"aria-hidden":!0},l=n?$D:k.Fragment,c=n?{unmount:i}:{},u=Gr();return ie.createElement(l,{...c},u({ourProps:a,theirProps:r,slot:s,defaultTag:jQe,name:"Dialog.Backdrop"}))}let BQe="h2";function VQe(e,t){let n=k.useId(),{id:r=`headlessui-dialog-title-${n}`,...o}=e,[{dialogState:i,setTitleId:s}]=DE("Dialog.Title"),a=xi(t);k.useEffect(()=>(s(r),()=>s(null)),[r,s]);let l=k.useMemo(()=>({open:i===0}),[i]),c={ref:a,id:r};return Gr()({ourProps:c,theirProps:o,slot:l,defaultTag:BQe,name:"Dialog.Title"})}let FQe=xr(DQe),Ab=xr(LQe);xr(zQe);let Bk=xr(VQe),Vk=Object.assign(FQe,{Panel:Ab,Title:Bk,Description:_b});function HQe(e,t){let n=k.useRef({left:0,top:0});if(wn(()=>{if(!t)return;let o=t.getBoundingClientRect();o&&(n.current=o)},[e,t]),t==null||!e||t===document.activeElement)return!1;let r=t.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let tH=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function nH(e){var t,n;let r=(t=e.innerText)!=null?t:"",o=e.cloneNode(!0);if(!Ns(o))return r;let i=!1;for(let a of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),i=!0;let s=i?(n=o.innerText)!=null?n:"":r;return tH.test(s)&&(s=s.replace(tH,"")),s}function UQe(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(o=>{let i=document.getElementById(o);if(i){let s=i.getAttribute("aria-label");return typeof s=="string"?s.trim():nH(i).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return nH(e).trim()}function GQe(e){let t=k.useRef(""),n=k.useRef("");return ct(()=>{let r=e.current;if(!r)return"";let o=r.innerText;if(t.current===o)return n.current;let i=UQe(r).trim().toLowerCase();return t.current=o,n.current=i,i})}var qQe=Object.defineProperty,ZQe=(e,t,n)=>t in e?qQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rH=(e,t,n)=>(ZQe(e,typeof t!="symbol"?t+"":t,n),n),No=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(No||{}),Fk=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Fk||{}),Cn=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e))(Cn||{});function oH(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=bie(t(e.items.slice()),i=>i.dataRef.current.domRef.current),o=n?r.indexOf(n):null;return o===-1&&(o=null),{items:r,activeItemIndex:o}}let WQe={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,pendingFocus:{focus:Br.Nothing},menuState:1}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0}},2:(e,t)=>{var n,r,o,i,s;if(e.menuState===1)return e;let a={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===Br.Nothing)return{...a,activeItemIndex:null};if(t.focus===Br.Specific)return{...a,activeItemIndex:e.items.findIndex(u=>u.id===t.id)};if(t.focus===Br.Previous){let u=e.activeItemIndex;if(u!==null){let f=e.items[u].dataRef.current.domRef,p=Vw(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(p!==null){let m=e.items[p].dataRef.current.domRef;if(((r=f.current)==null?void 0:r.previousElementSibling)===m.current||((o=m.current)==null?void 0:o.previousElementSibling)===null)return{...a,activeItemIndex:p}}}}else if(t.focus===Br.Next){let u=e.activeItemIndex;if(u!==null){let f=e.items[u].dataRef.current.domRef,p=Vw(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(p!==null){let m=e.items[p].dataRef.current.domRef;if(((i=f.current)==null?void 0:i.nextElementSibling)===m.current||((s=m.current)==null?void 0:s.nextElementSibling)===null)return{...a,activeItemIndex:p}}}}let l=oH(e),c=Vw(t,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...a,...l,activeItemIndex:c}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(s=>{var a;return((a=s.dataRef.current.textValue)==null?void 0:a.startsWith(r))&&!s.dataRef.current.disabled}),i=o?e.items.indexOf(o):-1;return i===-1||i===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:i,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(o=>o)),r=e.activeItemIndex;return e.pendingFocus.focus!==Br.Nothing&&(r=Vw(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:Br.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],o=new Set(t.items);for(let[i,s]of n.entries())if(o.has(s.id)&&(r.push(i),o.delete(s.id),o.size===0))break;if(r.length>0){n=n.slice();for(let i of r.reverse())n.splice(i,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...oH(e),pendingShouldSort:!1}:e};class jD extends uie{constructor(t){super(t),rH(this,"actions",{registerItem:jF(()=>{let n=[],r=new Set;return[(o,i)=>{r.has(i)||(r.add(i),n.push({id:o,dataRef:i}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:jF(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),rH(this,"selectors",{activeDescendantId(n){var r;let o=n.activeItemIndex,i=n.items;return o===null||(r=i[o])==null?void 0:r.id},isActive(n,r){var o;let i=n.activeItemIndex,s=n.items;return i!==null?((o=s[i])==null?void 0:o.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=RE.get(null);this.disposables.add(r.on(fie.Push,o=>{!r.selectors.isTop(o,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}}static new({id:t,__demoMode:n=!1}){return new jD({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Br.Nothing}})}reduce(t,n){return nl(n.type,WQe,t,n)}}const Uie=k.createContext(null);function zD(e){let t=k.useContext(Uie);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Gie),n}return t}function Gie({id:e,__demoMode:t=!1}){let n=k.useMemo(()=>jD.new({id:e,__demoMode:t}),[]);return PD(()=>n.dispose()),n}let KQe=k.Fragment;function YQe(e,t){let n=k.useId(),{__demoMode:r=!1,...o}=e,i=Gie({id:n,__demoMode:r}),[s,a,l]=qa(i,x=>[x.menuState,x.itemsElement,x.buttonElement]),c=xi(t),u=RE.get(null),f=qa(u,k.useCallback(x=>u.selectors.isTop(x,n),[u,n]));xie(f,[l,a],(x,S)=>{var E;i.send({type:Cn.CloseMenu}),ND(S,RD.Loose)||(x.preventDefault(),(E=i.state.buttonElement)==null||E.focus())});let p=ct(()=>{i.send({type:Cn.CloseMenu})}),m=k.useMemo(()=>({open:s===No.Open,close:p}),[s,p]),y={ref:c},b=Gr();return ie.createElement(YXe,null,ie.createElement(Uie.Provider,{value:i},ie.createElement(_ie,{value:nl(s,{[No.Open]:pi.Open,[No.Closed]:pi.Closed})},b({ourProps:y,theirProps:o,slot:m,defaultTag:KQe,name:"Menu"}))))}let JQe="button";function XQe(e,t){let n=zD("Menu.Button"),r=k.useId(),{id:o=`headlessui-menu-button-${r}`,disabled:i=!1,autoFocus:s=!1,...a}=e,l=k.useRef(null),c=ZXe(),u=xi(t,l,qXe(),ct(V=>n.send({type:Cn.SetButtonElement,element:V}))),f=ct(V=>{switch(V.key){case go.Space:case go.Enter:case go.ArrowDown:V.preventDefault(),V.stopPropagation(),n.send({type:Cn.OpenMenu,focus:{focus:Br.First}});break;case go.ArrowUp:V.preventDefault(),V.stopPropagation(),n.send({type:Cn.OpenMenu,focus:{focus:Br.Last}});break}}),p=ct(V=>{switch(V.key){case go.Space:V.preventDefault();break}}),[m,y,b]=qa(n,V=>[V.menuState,V.buttonElement,V.itemsElement]),x=m===No.Open;AXe(x,{trigger:y,action:k.useCallback(V=>{if(y!=null&&y.contains(V.target))return Bw.Ignore;let W=V.target.closest('[role="menuitem"]:not([data-disabled])');return Ns(W)?Bw.Select(W):b!=null&&b.contains(V.target)?Bw.Ignore:Bw.Close},[y,b]),close:k.useCallback(()=>n.send({type:Cn.CloseMenu}),[]),select:k.useCallback(V=>V.click(),[])});let S=ct(V=>{var W;if(V.button===Aie.Left){if(ZJe(V.currentTarget))return V.preventDefault();i||(m===No.Open?(Ur.flushSync(()=>n.send({type:Cn.CloseMenu})),(W=l.current)==null||W.focus({preventScroll:!0})):(V.preventDefault(),n.send({type:Cn.OpenMenu,focus:{focus:Br.Nothing},trigger:Fk.Pointer})))}}),E=k.useRef(null),T=ct(V=>{E.current=V.pointerType,V.pointerType==="mouse"&&S(V)}),A=ct(V=>{E.current!=="mouse"&&S(V)}),{isFocusVisible:M,focusProps:R}=_Je({autoFocus:s}),{isHovered:O,hoverProps:I}=TJe({isDisabled:i}),{pressed:L,pressProps:$}=OJe({disabled:i}),B=k.useMemo(()=>({open:m===No.Open,active:L||m===No.Open,disabled:i,hover:O,focus:M,autofocus:s}),[m,O,M,L,i,s]),H=tie(c(),{ref:u,id:o,type:MXe(e,l.current),"aria-haspopup":"menu","aria-controls":b?.id,"aria-expanded":m===No.Open,disabled:i||void 0,autoFocus:s,onKeyDown:f,onKeyUp:p,onPointerDown:T,onClick:A},R,I,$);return Gr()({ourProps:H,theirProps:a,slot:B,defaultTag:JQe,name:"Menu.Button"})}let QQe="div",eet=Dm.RenderStrategy|Dm.Static;function tet(e,t){let n=k.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:o,portal:i=!1,modal:s=!0,transition:a=!1,...l}=e,c=GXe(o),u=zD("Menu.Items"),[f,p]=KXe(c),m=WXe(),[y,b]=k.useState(null),x=xi(t,c?f:null,ct(Z=>u.send({type:Cn.SetItemsElement,element:Z})),b),[S,E]=qa(u,Z=>[Z.menuState,Z.buttonElement]),T=$m(E),A=$m(y);c&&(i=!0);let M=Tv(),[R,O]=Eie(a,y,M!==null?(M&pi.Open)===pi.Open:S===No.Open);mie(R,E,()=>{u.send({type:Cn.CloseMenu})});let I=qa(u,Z=>Z.__demoMode),L=I?!1:s&&S===No.Open;kie(L,A);let $=I?!1:s&&S===No.Open;pie($,{allowed:k.useCallback(()=>[E,y],[E,y])});let B=S!==No.Open,H=HQe(B,E)?!1:R;k.useEffect(()=>{let Z=y;Z&&S===No.Open&&Z!==A?.activeElement&&Z.focus({preventScroll:!0})},[S,y,A]),UXe(S===No.Open,{container:y,accept(Z){return Z.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:Z.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(Z){Z.setAttribute("role","none")}});let V=vg(),W=ct(Z=>{var N,U,ee;switch(V.dispose(),Z.key){case go.Space:if(u.state.searchQuery!=="")return Z.preventDefault(),Z.stopPropagation(),u.send({type:Cn.Search,value:Z.key});case go.Enter:if(Z.preventDefault(),Z.stopPropagation(),u.state.activeItemIndex!==null){let{dataRef:D}=u.state.items[u.state.activeItemIndex];(U=(N=D.current)==null?void 0:N.domRef.current)==null||U.click()}u.send({type:Cn.CloseMenu}),yie(u.state.buttonElement);break;case go.ArrowDown:return Z.preventDefault(),Z.stopPropagation(),u.send({type:Cn.GoToItem,focus:Br.Next});case go.ArrowUp:return Z.preventDefault(),Z.stopPropagation(),u.send({type:Cn.GoToItem,focus:Br.Previous});case go.Home:case go.PageUp:return Z.preventDefault(),Z.stopPropagation(),u.send({type:Cn.GoToItem,focus:Br.First});case go.End:case go.PageDown:return Z.preventDefault(),Z.stopPropagation(),u.send({type:Cn.GoToItem,focus:Br.Last});case go.Escape:Z.preventDefault(),Z.stopPropagation(),Ur.flushSync(()=>u.send({type:Cn.CloseMenu})),(ee=u.state.buttonElement)==null||ee.focus({preventScroll:!0});break;case go.Tab:Z.preventDefault(),Z.stopPropagation(),Ur.flushSync(()=>u.send({type:Cn.CloseMenu})),CXe(u.state.buttonElement,Z.shiftKey?Va.Previous:Va.Next);break;default:Z.key.length===1&&(u.send({type:Cn.Search,value:Z.key}),V.setTimeout(()=>u.send({type:Cn.ClearSearch}),350));break}}),K=ct(Z=>{switch(Z.key){case go.Space:Z.preventDefault();break}}),z=k.useMemo(()=>({open:S===No.Open}),[S]),G=tie(c?m():{},{"aria-activedescendant":qa(u,u.selectors.activeDescendantId),"aria-labelledby":qa(u,Z=>{var N;return(N=Z.buttonElement)==null?void 0:N.id}),id:r,onKeyDown:W,onKeyUp:K,role:"menu",tabIndex:S===No.Open?0:void 0,ref:x,style:{...l.style,...p,"--button-width":sXe(E,!0).width},...Cie(O)}),F=Gr();return ie.createElement(Oie,{enabled:i?e.static||R:!1,ownerDocument:T},F({ourProps:G,theirProps:l,slot:z,defaultTag:QQe,features:eet,visible:H,name:"Menu.Items"}))}let net=k.Fragment;function ret(e,t){let n=k.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:o=!1,...i}=e,s=zD("Menu.Item"),a=qa(s,B=>s.selectors.isActive(B,r)),l=k.useRef(null),c=xi(t,l),u=qa(s,B=>s.selectors.shouldScrollIntoView(B,r));wn(()=>{if(u)return va().requestAnimationFrame(()=>{var B,H;(H=(B=l.current)==null?void 0:B.scrollIntoView)==null||H.call(B,{block:"nearest"})})},[u,l]);let f=GQe(l),p=k.useRef({disabled:o,domRef:l,get textValue(){return f()}});wn(()=>{p.current.disabled=o},[p,o]),wn(()=>(s.actions.registerItem(r,p),()=>s.actions.unregisterItem(r)),[p,r]);let m=ct(()=>{s.send({type:Cn.CloseMenu})}),y=ct(B=>{if(o)return B.preventDefault();s.send({type:Cn.CloseMenu}),yie(s.state.buttonElement)}),b=ct(()=>{if(o)return s.send({type:Cn.GoToItem,focus:Br.Nothing});s.send({type:Cn.GoToItem,focus:Br.Specific,id:r})}),x=LXe(),S=ct(B=>x.update(B)),E=ct(B=>{x.wasMoved(B)&&(o||a||s.send({type:Cn.GoToItem,focus:Br.Specific,id:r,trigger:Fk.Pointer}))}),T=ct(B=>{x.wasMoved(B)&&(o||a&&s.state.activationTrigger===Fk.Pointer&&s.send({type:Cn.GoToItem,focus:Br.Nothing}))}),[A,M]=aie(),[R,O]=sie(),I=k.useMemo(()=>({active:a,focus:a,disabled:o,close:m}),[a,o,m]),L={id:r,ref:c,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-labelledby":A,"aria-describedby":R,disabled:void 0,onClick:y,onFocus:b,onPointerEnter:S,onMouseEnter:S,onPointerMove:E,onMouseMove:E,onPointerLeave:T,onMouseLeave:T},$=Gr();return ie.createElement(M,null,ie.createElement(O,null,$({ourProps:L,theirProps:i,slot:I,defaultTag:net,name:"Menu.Item"})))}let oet="div";function iet(e,t){let[n,r]=aie(),o=e,i={ref:t,"aria-labelledby":n,role:"group"},s=Gr();return ie.createElement(r,null,s({ourProps:i,theirProps:o,slot:{},defaultTag:oet,name:"Menu.Section"}))}let set="header";function aet(e,t){let n=k.useId(),{id:r=`headlessui-menu-heading-${n}`,...o}=e,i=MD();wn(()=>i.register(r),[r,i.register]);let s={id:r,ref:t,role:"presentation",...i.props};return Gr()({ourProps:s,theirProps:o,slot:{},defaultTag:set,name:"Menu.Heading"})}let cet="div";function uet(e,t){let n=e,r={ref:t,role:"separator"};return Gr()({ourProps:r,theirProps:n,slot:{},defaultTag:cet,name:"Menu.Separator"})}let det=xr(YQe),qie=xr(XQe),Zie=xr(tet),Hy=xr(ret),fet=xr(iet),het=xr(aet),pet=xr(uet),met=Object.assign(det,{Button:qie,Items:Zie,Item:Hy,Section:fet,Heading:het,Separator:pet});const get=e=>{const t=st.c(4),{isRunning:n}=e,r=k.useRef(null),o=k.useRef(void 0),i=k.useRef(0);let s,a;t[0]!==n?(s=()=>{const c=r.current;if(!c)return;const u=c.getContext("2d");if(!u)return;let f=0,p=0;const m=new Map,y=S=>{if(!m.has(S)){const E=p*.08+Math.random()*p*.12;m.set(S,E)}return m.get(S)},b=new ResizeObserver(S=>{const E=S[0];if(E){const{width:T,height:A}=E.contentRect;f=T,p=A;const M=window.devicePixelRatio||1;c.width=f*M,c.height=p*M,u.scale(M,M),m.clear()}});b.observe(c);const x=()=>{u.fillStyle="rgba(0, 0, 0, 0.6)",u.fillRect(0,0,f,p),u.strokeStyle="hsl(230, 15%, 25%)",u.lineWidth=.5,u.globalAlpha=.5,u.beginPath(),u.moveTo(0,p/2),u.lineTo(f,p/2),u.stroke();for(let A=0;A<f;A=A+100,A)u.beginPath(),u.moveTo(A,0),u.lineTo(A,p),u.stroke();u.globalAlpha=1;const S=p/2,E=p*.2,T=u.createLinearGradient(0,S-E,0,S+E);T.addColorStop(0,"hsl(200, 80%, 75%)"),T.addColorStop(.5,"hsl(220, 70%, 80%)"),T.addColorStop(1,"hsl(240, 80%, 75%)"),u.shadowColor="hsl(220, 80%, 70%)",u.shadowBlur=15,u.strokeStyle=T,u.lineWidth=3,u.lineCap="round",u.beginPath();for(let A=0;A<f;A=A+12,A){const M=A*.1+i.current,R=Math.floor(M/(2*Math.PI)),O=y(R),I=Math.abs(Math.sin(M))*O,L=S-I,$=S+I;u.moveTo(A,L),u.lineTo(A,$)}u.stroke(),u.shadowBlur=0,i.current=i.current+.05,o.current=requestAnimationFrame(x)};return n?(m.clear(),x()):(o.current&&(cancelAnimationFrame(o.current),o.current=void 0),u.fillStyle="rgba(0, 0, 0, 0.6)",u.fillRect(0,0,f,p)),()=>{b.disconnect(),o.current&&cancelAnimationFrame(o.current)}},a=[n],t[0]=n,t[1]=s,t[2]=a):(s=t[1],a=t[2]),k.useEffect(s,a);let l;return t[3]===Symbol.for("react.memo_cache_sentinel")?(l=w.jsx("canvas",{ref:r,className:"w-full h-full"}),t[3]=l):l=t[3],l};function yet(e){const t=st.c(18),{isRecording:n,isProcessing:r,onStop:o}=e,i=pr(bet),[s,a]=k.useState(0);let l,c;if(t[0]!==n||t[1]!==i?(l=()=>{let x;return n&&i?(a(Math.floor((Date.now()-i)/1e3)),x=setInterval(()=>{a(Math.floor((Date.now()-i)/1e3))},1e3)):a(0),()=>clearInterval(x)},c=[n,i],t[0]=n,t[1]=i,t[2]=l,t[3]=c):(l=t[2],c=t[3]),k.useEffect(l,c),r){let x;return t[4]===Symbol.for("react.memo_cache_sentinel")?(x=w.jsx("div",{className:"flex items-center justify-center gap-3 h-10 px-2 mb-2 bg-black/60 border-y border-zinc-700/50",children:w.jsx($I,{text:"Transcribing...",shimmeringColor:"#ffffff",className:"font-mono text-sm text-zinc-100"})}),t[4]=x):x=t[4],x}let u;t[5]!==s?(u=XGe(s),t[5]=s,t[6]=u):u=t[6];let f;t[7]!==u?(f=w.jsx("span",{className:"font-mono text-sm text-zinc-100 w-16 text-center",children:w.jsx($I,{text:u,shimmeringColor:"#ffffff"})}),t[7]=u,t[8]=f):f=t[8];let p;t[9]!==n?(p=w.jsx("div",{className:"flex-1 h-full mx-2",children:w.jsx(get,{isRunning:n})}),t[9]=n,t[10]=p):p=t[10];let m;t[11]===Symbol.for("react.memo_cache_sentinel")?(m=w.jsx(Une,{}),t[11]=m):m=t[11];let y;t[12]!==o?(y=w.jsx("button",{onClick:o,className:"text-sm flex items-center gap-1.5 bg-red-500/40 text-white px-2 py-1 rounded-lg hover:bg-red-600 transition-colors",children:m}),t[12]=o,t[13]=y):y=t[13];let b;return t[14]!==f||t[15]!==p||t[16]!==y?(b=w.jsxs("div",{className:"flex items-center justify-between h-10 px-2 mb-2 bg-black/60 border-y border-zinc-700/50",children:[f,p,y]}),t[14]=f,t[15]=p,t[16]=y,t[17]=b):b=t[17],b}function bet(e){return e.recordingStartTime}function vet(e){const t=st.c(32),{isOpen:n,onClose:r}=e;let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[0]=o):o=t[0];const[i,s]=k.useState(o),[a,l]=k.useState(null),[c,u]=k.useState(""),[f,p]=k.useState("kanban"),[m,y]=k.useState(null),[b,x]=k.useState(null),S=[{id:"todo",name:"Todo"},{id:"in-progress",name:"Doing"},{id:"done",name:"Done"}];let E;t[1]===Symbol.for("react.memo_cache_sentinel")?(E=async()=>{try{const me=await mr("get_kanban_data");s(me)}catch(me){console.error("Failed to load kanban tasks:",me)}},t[1]=E):E=t[1];const T=E,A=Eet;let M,R;t[2]!==n?(M=()=>{n&&T()},R=[n],t[2]=n,t[3]=M,t[4]=R):(M=t[3],R=t[4]),k.useEffect(M,R);const O=me=>{const we={id:Date.now().toString(),name:"New Task",column:me,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},Pe=[...i,we];s(Pe),A(Pe)},I=me=>{const Re=i.filter(we=>we.id!==me);s(Re),A(Re)},L=(me,Re)=>{l(me),u(Re)},$=()=>{if(a&&c.trim()){const me=i.map(Re=>Re.id===a?{...Re,name:c.trim(),updated_at:new Date().toISOString()}:Re);s(me),A(me)}l(null),u("")},B=()=>{l(null),u("")},H=me=>i.filter(Re=>Re.column===me).length,V=async(me,Re)=>{if(Re==="done"){y(me),await new Promise(Cet),x(me),await new Promise(ket);const we=i.map(Pe=>Pe.id===me?{...Pe,column:Re}:Pe);s(we),A(we),y(null),x(null)}else{const we=i.map(Pe=>Pe.id===me?{...Pe,column:Re}:Pe);s(we),A(we)}},W=xet;if(!n)return null;const K=Vk,z="relative z-[99999]";let G;t[5]===Symbol.for("react.memo_cache_sentinel")?(G=w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),t[5]=G):G=t[5];const F="fixed inset-0 flex items-center justify-center p-4",Z=Ab,N="bg-zinc-900/70 backdrop-blur-xl border border-zinc-500/50 rounded-xl w-full max-w-6xl h-[85vh] overflow-hidden flex flex-col shadow-2xl",U=wet;let ee;t[6]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>p("kanban"),t[6]=ee):ee=t[6];const D=`flex items-center px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${f==="kanban"?"bg-zinc-800 text-zinc-100":"text-zinc-500 hover:text-zinc-300"}`;let ae;t[7]===Symbol.for("react.memo_cache_sentinel")?(ae=w.jsx(qne,{size:16,className:"mr-2"}),t[7]=ae):ae=t[7];let oe;t[8]!==D?(oe=w.jsx("div",{className:"flex items-center space-x-6",children:w.jsx("div",{className:"flex items-center space-x-1",children:w.jsxs("button",{onClick:ee,className:D,children:[ae,"Kanban View"]})})}),t[8]=D,t[9]=oe):oe=t[9];let he;t[10]===Symbol.for("react.memo_cache_sentinel")?(he=w.jsx(Om,{size:20}),t[10]=he):he=t[10];let le;t[11]!==r?(le=w.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-zinc-300 transition-colors p-2 hover:bg-zinc-800 rounded-md",children:he}),t[11]=r,t[12]=le):le=t[12];let ge;t[13]!==oe||t[14]!==le?(ge=w.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-200/20",children:[oe,le]}),t[13]=oe,t[14]=le,t[15]=ge):ge=t[15];const Oe="flex-1 overflow-x-auto p-6",je=f==="kanban"?w.jsx("div",{className:"flex h-full gap-4",children:S.map(me=>w.jsxs("div",{className:"flex-1 min-w-[300px] flex flex-col h-full rounded-lg bg-zinc-900/40 border border-blue-300/10",children:[w.jsx("div",{className:"flex items-center justify-between p-3 mb-2",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("div",{className:`px-2 py-0.5 rounded text-xs font-medium flex items-center ${me.id==="todo"?"bg-zinc-800 text-zinc-400":me.id==="in-progress"?"bg-blue-900/30 text-blue-400":"bg-green-900/30 text-green-400"}`,children:[me.id==="todo"&&w.jsx(uI,{size:12,className:"mr-1.5"}),me.id==="in-progress"&&w.jsx(XB,{size:12,className:"mr-1.5"}),me.id==="done"&&w.jsx(YB,{size:12,className:"mr-1.5"}),me.name]}),w.jsx("span",{className:"text-zinc-600 text-xs font-medium px-1.5 bg-zinc-800/50 rounded-sm",children:H(me.id)}),w.jsx("button",{onClick:()=>O(me.id),className:"p-1 text-zinc-500 hover:text-zinc-200 hover:bg-zinc-700/50 rounded transition-colors",title:"Add Task",children:w.jsx(wb,{size:14})})]})}),w.jsx("div",{className:"flex-1 overflow-y-auto px-2 pb-2 space-y-2",children:w.jsx(Wa,{mode:"popLayout",children:i.filter(Re=>Re.column===me.id).map(Re=>w.jsx(or.div,{layoutId:Re.column==="done"?void 0:Re.id,initial:{opacity:0,x:me.id==="done"?-10:-20},animate:{opacity:b===Re.id?0:1,x:0,transition:{duration:me.id==="done"?.4:.2}},exit:{opacity:0,scale:.95},transition:{duration:.2},children:w.jsx("div",{className:`group relative rounded-lg p-3 shadow-sm hover:border-zinc-600/50 transition-colors border ${W(Re.column)}`,children:a===Re.id?w.jsx("input",{type:"text",value:c,onChange:we=>u(we.target.value),onBlur:$,onKeyDown:we=>{we.key==="Enter"&&$(),we.key==="Escape"&&B()},className:"bg-zinc-900 border border-zinc-700/80 rounded px-2 py-1 text-zinc-300 w-full outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/20 transition-all text-sm placeholder-zinc-600",autoFocus:!0}):w.jsxs("div",{className:"flex gap-3",children:[w.jsx("div",{className:"pt-0.5",children:w.jsxs(met,{as:"div",className:"relative",children:[w.jsx(qie,{className:"flex items-center justify-center p-1 rounded hover:bg-zinc-800 text-zinc-600 hover:text-zinc-300 transition-colors",children:w.jsx(u0,{size:14})}),w.jsx(Hie,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:w.jsx(Zie,{className:"absolute left-0 mt-1 w-32 origin-top-left rounded-md bg-zinc-900 border border-zinc-800 shadow-xl focus:outline-none z-50",children:w.jsxs("div",{className:"p-1",children:[me.id!=="todo"&&w.jsx(Hy,{children:we=>{const{active:Pe}=we;return w.jsxs("button",{onClick:()=>V(Re.id,"todo"),className:`${Pe?"bg-zinc-800 text-zinc-200":"text-zinc-400"} group flex w-full items-center rounded-sm px-2 py-1.5 text-xs`,children:[w.jsx(uI,{size:12,className:"mr-2"}),"To Todo"]})}}),me.id!=="in-progress"&&w.jsx(Hy,{children:we=>{const{active:Pe}=we;return w.jsxs("button",{onClick:()=>V(Re.id,"in-progress"),className:`${Pe?"bg-zinc-800 text-blue-400":"text-blue-400/80"} group flex w-full items-center rounded-sm px-2 py-1.5 text-xs`,children:[w.jsx(XB,{size:12,className:"mr-2"}),"Doing"]})}}),me.id!=="done"&&w.jsx(Hy,{children:we=>{const{active:Pe}=we;return w.jsxs("button",{onClick:()=>V(Re.id,"done"),className:`${Pe?"bg-zinc-800 text-green-400":"text-green-400/80"} group flex w-full items-center rounded-sm px-2 py-1.5 text-xs`,children:[w.jsx(YB,{size:12,className:"mr-2"}),"Done"]})}}),w.jsx("div",{className:"my-1 h-px bg-zinc-800"}),w.jsx(Hy,{children:we=>{const{active:Pe}=we;return w.jsx("button",{onClick:()=>I(Re.id),className:`${Pe?"bg-red-900/20 text-red-400":"text-red-400/80"} group flex w-full items-center rounded-sm px-2 py-1.5 text-xs`,children:"Delete"})}})]})})})]})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:`m-0 font-medium text-sm cursor-pointer text-zinc-300 line-clamp-2 transition-all duration-300 ${m===Re.id||Re.column==="done"?"line-through text-zinc-500 opacity-60":""}`,onDoubleClick:()=>L(Re.id,Re.name),children:Re.name}),w.jsxs("div",{className:"flex items-center mt-2.5",children:[w.jsx("div",{className:"w-5 h-5 flex items-center justify-center rounded bg-zinc-900 border border-zinc-800 text-zinc-600 mr-2",children:w.jsx("span",{className:"text-[10px] font-serif",children:"T"})}),w.jsx("div",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium border ${Re.column==="todo"?"border-zinc-800 text-zinc-500":Re.column==="in-progress"?"border-blue-900/30 text-blue-500 bg-blue-900/10":"border-green-900/30 text-green-500 bg-green-900/10"}`,children:Re.column==="todo"?"Todo":Re.column==="in-progress"?"Doing":"Done"})]})]})]})})},Re.id))})})]},me.id))}):w.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:"Table view coming soon"});let ye;t[16]!==je?(ye=w.jsx("div",{className:Oe,children:je}),t[16]=je,t[17]=ye):ye=t[17];let Ie;t[18]!==Z||t[19]!==ge||t[20]!==ye||t[21]!==U?(Ie=w.jsxs(Z,{className:N,onClick:U,children:[ge,ye]}),t[18]=Z,t[19]=ge,t[20]=ye,t[21]=U,t[22]=Ie):Ie=t[22];let Le;t[23]!==r||t[24]!==Ie?(Le=w.jsx("div",{className:F,onClick:r,children:Ie}),t[23]=r,t[24]=Ie,t[25]=Le):Le=t[25];let $e;return t[26]!==K||t[27]!==n||t[28]!==r||t[29]!==Le||t[30]!==G?($e=w.jsxs(K,{open:n,onClose:r,className:z,children:[G,Le]}),t[26]=K,t[27]=n,t[28]=r,t[29]=Le,t[30]=G,t[31]=$e):$e=t[31],$e}function wet(e){return e.stopPropagation()}function xet(e){switch(e){case"in-progress":return"bg-gradient-to-br from-zinc-950 to-blue-900/40 border-blue-900/30";case"done":return"bg-gradient-to-br from-zinc-950 to-green-900/40 border-green-900/30";default:return"bg-zinc-950 border-zinc-800/60"}}function ket(e){return setTimeout(e,120)}function Cet(e){return setTimeout(e,120)}async function Eet(e){try{await mr("save_kanban_data",{tasks:e})}catch(t){console.error("Failed to save kanban data:",t)}}var Wie={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},iH=ie.createContext&&ie.createContext(Wie),Tet=["attr","size","title"];function _et(e,t){if(e==null)return{};var n=Aet(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Aet(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Hk(){return Hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hk.apply(this,arguments)}function sH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Uk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sH(Object(n),!0).forEach(function(r){Met(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sH(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Met(e,t,n){return t=Ret(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ret(e){var t=Net(e,"string");return typeof t=="symbol"?t:t+""}function Net(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kie(e){return e&&e.map((t,n)=>ie.createElement(t.tag,Uk({key:n},t.attr),Kie(t.child)))}function Iet(e){return t=>ie.createElement(Oet,Hk({attr:Uk({},e.attr)},t),Kie(e.child))}function Oet(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=_et(e,Tet),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),ie.createElement("svg",Hk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:Uk(Uk({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&ie.createElement("title",null,i),e.children)};return iH!==void 0?ie.createElement(iH.Consumer,null,n=>t(n)):t(Wie)}function xM(e){return Iet({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7 4V2H17V4H22V6H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V6H2V4H7ZM6 6V20H18V6H6ZM9 9H11V17H9V9ZM13 9H15V17H13V9Z"},child:[]}]})(e)}k.createContext(void 0);function Pet(e){const t=Det(e),n=k.forwardRef((r,o)=>{const{children:i,...s}=r,a=k.Children.toArray(i),l=a.find(Let);if(l){const c=l.props.children,u=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return w.jsx(t,{...s,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return w.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function Det(e){const t=k.forwardRef((n,r)=>{const{children:o,...i}=n;if(k.isValidElement(o)){const s=zet(o),a=jet(i,o.props);return o.type!==k.Fragment&&(a.ref=r?yv(r,s):s),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $et=Symbol("radix.slottable");function Let(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$et}function jet(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function zet(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Bet=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],io=Bet.reduce((e,t)=>{const n=Pet(`Primitive.${t}`),r=k.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Vet(e,t){e&&Ur.flushSync(()=>e.dispatchEvent(t))}var Fet=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Het="VisuallyHidden",Yie=k.forwardRef((e,t)=>w.jsx(io.span,{...e,ref:t,style:{...Fet,...e.style}}));Yie.displayName=Het;var Uet=Yie;function Get(e,t){const n=k.createContext(t),r=i=>{const{children:s,...a}=i,l=k.useMemo(()=>a,Object.values(a));return w.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function o(i){const s=k.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,o]}function xg(e,t=[]){let n=[];function r(i,s){const a=k.createContext(s),l=n.length;n=[...n,s];const c=f=>{const{scope:p,children:m,...y}=f,b=p?.[e]?.[l]||a,x=k.useMemo(()=>y,Object.values(y));return w.jsx(b.Provider,{value:x,children:m})};c.displayName=i+"Provider";function u(f,p){const m=p?.[e]?.[l]||a,y=k.useContext(m);if(y)return y;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const o=()=>{const i=n.map(s=>k.createContext(s));return function(a){const l=a?.[e]||i;return k.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,qet(o,...t)]}function qet(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function aH(e){const t=Zet(e),n=k.forwardRef((r,o)=>{const{children:i,...s}=r,a=k.Children.toArray(i),l=a.find(Ket);if(l){const c=l.props.children,u=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return w.jsx(t,{...s,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return w.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function Zet(e){const t=k.forwardRef((n,r)=>{const{children:o,...i}=n;if(k.isValidElement(o)){const s=Jet(o),a=Yet(i,o.props);return o.type!==k.Fragment&&(a.ref=r?yv(r,s):s),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Wet=Symbol("radix.slottable");function Ket(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Wet}function Yet(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Jet(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Xet(e){const t=e+"CollectionProvider",[n,r]=xg(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:x,children:S}=b,E=ie.useRef(null),T=ie.useRef(new Map).current;return w.jsx(o,{scope:x,itemMap:T,collectionRef:E,children:S})};s.displayName=t;const a=e+"CollectionSlot",l=aH(a),c=ie.forwardRef((b,x)=>{const{scope:S,children:E}=b,T=i(a,S),A=vi(x,T.collectionRef);return w.jsx(l,{ref:A,children:E})});c.displayName=a;const u=e+"CollectionItemSlot",f="data-radix-collection-item",p=aH(u),m=ie.forwardRef((b,x)=>{const{scope:S,children:E,...T}=b,A=ie.useRef(null),M=vi(x,A),R=i(u,S);return ie.useEffect(()=>(R.itemMap.set(A,{ref:A,...T}),()=>void R.itemMap.delete(A))),w.jsx(p,{[f]:"",ref:M,children:E})});m.displayName=u;function y(b){const x=i(e+"CollectionConsumer",b);return ie.useCallback(()=>{const E=x.collectionRef.current;if(!E)return[];const T=Array.from(E.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((R,O)=>T.indexOf(R.ref.current)-T.indexOf(O.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:s,Slot:c,ItemSlot:m},y,r]}function Wo(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}var iu=globalThis?.document?k.useLayoutEffect:()=>{},Qet=Lb[" useInsertionEffect ".trim().toString()]||iu;function Av({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,i,s]=ett({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:o;{const u=k.useRef(e!==void 0);k.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=k.useCallback(u=>{if(a){const f=ttt(u)?u(e):u;f!==e&&s.current?.(f)}else i(u)},[a,e,i,s]);return[l,c]}function ett({defaultProp:e,onChange:t}){const[n,r]=k.useState(e),o=k.useRef(n),i=k.useRef(t);return Qet(()=>{i.current=t},[t]),k.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function ttt(e){return typeof e=="function"}function ntt(e,t){return k.useReducer((n,r)=>t[n][r]??n,e)}var Sg=e=>{const{present:t,children:n}=e,r=rtt(t),o=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),i=vi(r.ref,ott(o));return typeof n=="function"||r.isPresent?k.cloneElement(o,{ref:i}):null};Sg.displayName="Presence";function rtt(e){const[t,n]=k.useState(),r=k.useRef(null),o=k.useRef(e),i=k.useRef("none"),s=e?"mounted":"unmounted",[a,l]=ntt(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const c=Fw(r.current);i.current=a==="mounted"?c:"none"},[a]),iu(()=>{const c=r.current,u=o.current;if(u!==e){const p=i.current,m=Fw(c);e?l("MOUNT"):m==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),iu(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,f=m=>{const b=Fw(r.current).includes(CSS.escape(m.animationName));if(m.target===t&&b&&(l("ANIMATION_END"),!o.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},p=m=>{m.target===t&&(i.current=Fw(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Fw(e){return e?.animationName||"none"}function ott(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var itt=Lb[" useId ".trim().toString()]||(()=>{}),stt=0;function pm(e){const[t,n]=k.useState(itt());return iu(()=>{n(r=>r??String(stt++))},[e]),t?`radix-${t}`:""}var $E="Collapsible",[att,Jie]=xg($E),[ltt,BD]=att($E),Xie=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:i,onOpenChange:s,...a}=e,[l,c]=Av({prop:r,defaultProp:o??!1,onChange:s,caller:$E});return w.jsx(ltt,{scope:n,disabled:i,contentId:pm(),open:l,onOpenToggle:k.useCallback(()=>c(u=>!u),[c]),children:w.jsx(io.div,{"data-state":FD(l),"data-disabled":i?"":void 0,...a,ref:t})})});Xie.displayName=$E;var Qie="CollapsibleTrigger",ese=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=BD(Qie,n);return w.jsx(io.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":FD(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:Wo(e.onClick,o.onOpenToggle)})});ese.displayName=Qie;var VD="CollapsibleContent",tse=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=BD(VD,e.__scopeCollapsible);return w.jsx(Sg,{present:n||o.open,children:({present:i})=>w.jsx(ctt,{...r,ref:t,present:i})})});tse.displayName=VD;var ctt=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...i}=e,s=BD(VD,n),[a,l]=k.useState(r),c=k.useRef(null),u=vi(t,c),f=k.useRef(0),p=f.current,m=k.useRef(0),y=m.current,b=s.open||a,x=k.useRef(b),S=k.useRef(void 0);return k.useEffect(()=>{const E=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(E)},[]),iu(()=>{const E=c.current;if(E){S.current=S.current||{transitionDuration:E.style.transitionDuration,animationName:E.style.animationName},E.style.transitionDuration="0s",E.style.animationName="none";const T=E.getBoundingClientRect();f.current=T.height,m.current=T.width,x.current||(E.style.transitionDuration=S.current.transitionDuration,E.style.animationName=S.current.animationName),l(r)}},[s.open,r]),w.jsx(io.div,{"data-state":FD(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!b,...i,ref:u,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:b&&o})});function FD(e){return e?"open":"closed"}var utt=Xie,dtt=ese,ftt=tse,htt=k.createContext(void 0);function ptt(e){const t=k.useContext(htt);return e||t||"ltr"}var cl="Accordion",mtt=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[HD,gtt,ytt]=Xet(cl),[LE,Gpt]=xg(cl,[ytt,Jie]),UD=Jie(),nse=ie.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,i=r;return w.jsx(HD.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?w.jsx(xtt,{...i,ref:t}):w.jsx(wtt,{...o,ref:t})})});nse.displayName=cl;var[rse,btt]=LE(cl),[ose,vtt]=LE(cl,{collapsible:!1}),wtt=ie.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:i=!1,...s}=e,[a,l]=Av({prop:n,defaultProp:r??"",onChange:o,caller:cl});return w.jsx(rse,{scope:e.__scopeAccordion,value:ie.useMemo(()=>a?[a]:[],[a]),onItemOpen:l,onItemClose:ie.useCallback(()=>i&&l(""),[i,l]),children:w.jsx(ose,{scope:e.__scopeAccordion,collapsible:i,children:w.jsx(ise,{...s,ref:t})})})}),xtt=ie.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...i}=e,[s,a]=Av({prop:n,defaultProp:r??[],onChange:o,caller:cl}),l=ie.useCallback(u=>a((f=[])=>[...f,u]),[a]),c=ie.useCallback(u=>a((f=[])=>f.filter(p=>p!==u)),[a]);return w.jsx(rse,{scope:e.__scopeAccordion,value:s,onItemOpen:l,onItemClose:c,children:w.jsx(ose,{scope:e.__scopeAccordion,collapsible:!0,children:w.jsx(ise,{...i,ref:t})})})}),[Stt,jE]=LE(cl),ise=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:i="vertical",...s}=e,a=ie.useRef(null),l=vi(a,t),c=gtt(n),f=ptt(o)==="ltr",p=Wo(e.onKeyDown,m=>{if(!mtt.includes(m.key))return;const y=m.target,b=c().filter(I=>!I.ref.current?.disabled),x=b.findIndex(I=>I.ref.current===y),S=b.length;if(x===-1)return;m.preventDefault();let E=x;const T=0,A=S-1,M=()=>{E=x+1,E>A&&(E=T)},R=()=>{E=x-1,E<T&&(E=A)};switch(m.key){case"Home":E=T;break;case"End":E=A;break;case"ArrowRight":i==="horizontal"&&(f?M():R());break;case"ArrowDown":i==="vertical"&&M();break;case"ArrowLeft":i==="horizontal"&&(f?R():M());break;case"ArrowUp":i==="vertical"&&R();break}const O=E%S;b[O].ref.current?.focus()});return w.jsx(Stt,{scope:n,disabled:r,direction:o,orientation:i,children:w.jsx(HD.Slot,{scope:n,children:w.jsx(io.div,{...s,"data-orientation":i,ref:l,onKeyDown:r?void 0:p})})})}),Gk="AccordionItem",[ktt,GD]=LE(Gk),sse=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,i=jE(Gk,n),s=btt(Gk,n),a=UD(n),l=pm(),c=r&&s.value.includes(r)||!1,u=i.disabled||e.disabled;return w.jsx(ktt,{scope:n,open:c,disabled:u,triggerId:l,children:w.jsx(utt,{"data-orientation":i.orientation,"data-state":dse(c),...a,...o,ref:t,disabled:u,open:c,onOpenChange:f=>{f?s.onItemOpen(r):s.onItemClose(r)}})})});sse.displayName=Gk;var ase="AccordionHeader",Ctt=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=jE(cl,n),i=GD(ase,n);return w.jsx(io.h3,{"data-orientation":o.orientation,"data-state":dse(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:t})});Ctt.displayName=ase;var WI="AccordionTrigger",lse=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=jE(cl,n),i=GD(WI,n),s=vtt(WI,n),a=UD(n);return w.jsx(HD.ItemSlot,{scope:n,children:w.jsx(dtt,{"aria-disabled":i.open&&!s.collapsible||void 0,"data-orientation":o.orientation,id:i.triggerId,...a,...r,ref:t})})});lse.displayName=WI;var cse="AccordionContent",use=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=jE(cl,n),i=GD(cse,n),s=UD(n);return w.jsx(ftt,{role:"region","aria-labelledby":i.triggerId,"data-orientation":o.orientation,...s,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});use.displayName=cse;function dse(e){return e?"open":"closed"}var Ett=nse,Ttt=sse,_tt=lse,lH=use;function Lm(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>t.current?.(...n),[])}function Att(e,t=globalThis?.document){const n=Lm(e);k.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Mtt="DismissableLayer",KI="dismissableLayer.update",Rtt="dismissableLayer.pointerDownOutside",Ntt="dismissableLayer.focusOutside",cH,fse=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zE=k.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=e,c=k.useContext(fse),[u,f]=k.useState(null),p=u?.ownerDocument??globalThis?.document,[,m]=k.useState({}),y=vi(t,O=>f(O)),b=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=b.indexOf(x),E=u?b.indexOf(u):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,A=E>=S,M=Ott(O=>{const I=O.target,L=[...c.branches].some($=>$.contains(I));!A||L||(o?.(O),s?.(O),O.defaultPrevented||a?.())},p),R=Ptt(O=>{const I=O.target;[...c.branches].some($=>$.contains(I))||(i?.(O),s?.(O),O.defaultPrevented||a?.())},p);return Att(O=>{E===c.layers.size-1&&(r?.(O),!O.defaultPrevented&&a&&(O.preventDefault(),a()))},p),k.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(cH=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),uH(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=cH)}},[u,p,n,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),uH())},[u,c]),k.useEffect(()=>{const O=()=>m({});return document.addEventListener(KI,O),()=>document.removeEventListener(KI,O)},[]),w.jsx(io.div,{...l,ref:y,style:{pointerEvents:T?A?"auto":"none":void 0,...e.style},onFocusCapture:Wo(e.onFocusCapture,R.onFocusCapture),onBlurCapture:Wo(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Wo(e.onPointerDownCapture,M.onPointerDownCapture)})});zE.displayName=Mtt;var Itt="DismissableLayerBranch",hse=k.forwardRef((e,t)=>{const n=k.useContext(fse),r=k.useRef(null),o=vi(t,r);return k.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),w.jsx(io.div,{...e,ref:o})});hse.displayName=Itt;function Ott(e,t=globalThis?.document){const n=Lm(e),r=k.useRef(!1),o=k.useRef(()=>{});return k.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){pse(Rtt,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Ptt(e,t=globalThis?.document){const n=Lm(e),r=k.useRef(!1);return k.useEffect(()=>{const o=i=>{i.target&&!r.current&&pse(Ntt,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function uH(){const e=new CustomEvent(KI);document.dispatchEvent(e)}function pse(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Vet(o,i):o.dispatchEvent(i)}var qpt=zE,Zpt=hse,SM="focusScope.autoFocusOnMount",kM="focusScope.autoFocusOnUnmount",dH={bubbles:!1,cancelable:!0},Dtt="FocusScope",mse=k.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[a,l]=k.useState(null),c=Lm(o),u=Lm(i),f=k.useRef(null),p=vi(t,b=>l(b)),m=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let b=function(T){if(m.paused||!a)return;const A=T.target;a.contains(A)?f.current=A:Wu(f.current,{select:!0})},x=function(T){if(m.paused||!a)return;const A=T.relatedTarget;A!==null&&(a.contains(A)||Wu(f.current,{select:!0}))},S=function(T){if(document.activeElement===document.body)for(const M of T)M.removedNodes.length>0&&Wu(a)};document.addEventListener("focusin",b),document.addEventListener("focusout",x);const E=new MutationObserver(S);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",x),E.disconnect()}}},[r,a,m.paused]),k.useEffect(()=>{if(a){hH.add(m);const b=document.activeElement;if(!a.contains(b)){const S=new CustomEvent(SM,dH);a.addEventListener(SM,c),a.dispatchEvent(S),S.defaultPrevented||($tt(Vtt(gse(a)),{select:!0}),document.activeElement===b&&Wu(a))}return()=>{a.removeEventListener(SM,c),setTimeout(()=>{const S=new CustomEvent(kM,dH);a.addEventListener(kM,u),a.dispatchEvent(S),S.defaultPrevented||Wu(b??document.body,{select:!0}),a.removeEventListener(kM,u),hH.remove(m)},0)}}},[a,c,u,m]);const y=k.useCallback(b=>{if(!n&&!r||m.paused)return;const x=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,S=document.activeElement;if(x&&S){const E=b.currentTarget,[T,A]=Ltt(E);T&&A?!b.shiftKey&&S===A?(b.preventDefault(),n&&Wu(T,{select:!0})):b.shiftKey&&S===T&&(b.preventDefault(),n&&Wu(A,{select:!0})):S===E&&b.preventDefault()}},[n,r,m.paused]);return w.jsx(io.div,{tabIndex:-1,...s,ref:p,onKeyDown:y})});mse.displayName=Dtt;function $tt(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Wu(r,{select:t}),document.activeElement!==n)return}function Ltt(e){const t=gse(e),n=fH(t,e),r=fH(t.reverse(),e);return[n,r]}function gse(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function fH(e,t){for(const n of e)if(!jtt(n,{upTo:t}))return n}function jtt(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ztt(e){return e instanceof HTMLInputElement&&"select"in e}function Wu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ztt(e)&&t&&e.select()}}var hH=Btt();function Btt(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=pH(e,t),e.unshift(t)},remove(t){e=pH(e,t),e[0]?.resume()}}}function pH(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Vtt(e){return e.filter(t=>t.tagName!=="A")}var Ftt="Portal",yse=k.forwardRef((e,t)=>{const{container:n,...r}=e,[o,i]=k.useState(!1);iu(()=>i(!0),[]);const s=n||o&&globalThis?.document?.body;return s?X4.createPortal(w.jsx(io.div,{...r,ref:t}),s):null});yse.displayName=Ftt;var CM=0;function Htt(){k.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??mH()),document.body.insertAdjacentElement("beforeend",e[1]??mH()),CM++,()=>{CM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),CM--}},[])}function mH(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Utt=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ap=new WeakMap,Hw=new WeakMap,Uw={},EM=0,bse=function(e){return e&&(e.host||bse(e.parentNode))},Gtt=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=bse(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},qtt=function(e,t,n,r){var o=Gtt(t,Array.isArray(e)?e:[e]);Uw[n]||(Uw[n]=new WeakMap);var i=Uw[n],s=[],a=new Set,l=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),y=m!==null&&m!=="false",b=(Ap.get(p)||0)+1,x=(i.get(p)||0)+1;Ap.set(p,b),i.set(p,x),s.push(p),b===1&&y&&Hw.set(p,!0),x===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",p,S)}})};return u(t),a.clear(),EM++,function(){s.forEach(function(f){var p=Ap.get(f)-1,m=i.get(f)-1;Ap.set(f,p),i.set(f,m),p||(Hw.has(f)||f.removeAttribute(r),Hw.delete(f)),m||f.removeAttribute(n)}),EM--,EM||(Ap=new WeakMap,Ap=new WeakMap,Hw=new WeakMap,Uw={})}},Ztt=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Utt(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),qtt(r,o,n,"aria-hidden")):function(){return null}};function Wtt(e){const t=Ktt(e),n=k.forwardRef((r,o)=>{const{children:i,...s}=r,a=k.Children.toArray(i),l=a.find(Jtt);if(l){const c=l.props.children,u=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return w.jsx(t,{...s,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return w.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function Ktt(e){const t=k.forwardRef((n,r)=>{const{children:o,...i}=n;if(k.isValidElement(o)){const s=Qtt(o),a=Xtt(i,o.props);return o.type!==k.Fragment&&(a.ref=r?yv(r,s):s),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ytt=Symbol("radix.slottable");function Jtt(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ytt}function Xtt(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Qtt(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var BE="Dialog",[vse,Wpt]=xg(BE),[ent,ul]=vse(BE),wse=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=e,a=k.useRef(null),l=k.useRef(null),[c,u]=Av({prop:r,defaultProp:o??!1,onChange:i,caller:BE});return w.jsx(ent,{scope:t,triggerRef:a,contentRef:l,contentId:pm(),titleId:pm(),descriptionId:pm(),open:c,onOpenChange:u,onOpenToggle:k.useCallback(()=>u(f=>!f),[u]),modal:s,children:n})};wse.displayName=BE;var xse="DialogTrigger",tnt=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(xse,n),i=vi(t,o.triggerRef);return w.jsx(io.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":WD(o.open),...r,ref:i,onClick:Wo(e.onClick,o.onOpenToggle)})});tnt.displayName=xse;var qD="DialogPortal",[nnt,Sse]=vse(qD,{forceMount:void 0}),kse=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=ul(qD,t);return w.jsx(nnt,{scope:t,forceMount:n,children:k.Children.map(r,s=>w.jsx(Sg,{present:n||i.open,children:w.jsx(yse,{asChild:!0,container:o,children:s})}))})};kse.displayName=qD;var qk="DialogOverlay",Cse=k.forwardRef((e,t)=>{const n=Sse(qk,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=ul(qk,e.__scopeDialog);return i.modal?w.jsx(Sg,{present:r||i.open,children:w.jsx(ont,{...o,ref:t})}):null});Cse.displayName=qk;var rnt=Wtt("DialogOverlay.RemoveScroll"),ont=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(qk,n);return w.jsx(zY,{as:rnt,allowPinchZoom:!0,shards:[o.contentRef],children:w.jsx(io.div,{"data-state":WD(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),yh="DialogContent",Ese=k.forwardRef((e,t)=>{const n=Sse(yh,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=ul(yh,e.__scopeDialog);return w.jsx(Sg,{present:r||i.open,children:i.modal?w.jsx(int,{...o,ref:t}):w.jsx(snt,{...o,ref:t})})});Ese.displayName=yh;var int=k.forwardRef((e,t)=>{const n=ul(yh,e.__scopeDialog),r=k.useRef(null),o=vi(t,n.contentRef,r);return k.useEffect(()=>{const i=r.current;if(i)return Ztt(i)},[]),w.jsx(Tse,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wo(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Wo(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&i.preventDefault()}),onFocusOutside:Wo(e.onFocusOutside,i=>i.preventDefault())})}),snt=k.forwardRef((e,t)=>{const n=ul(yh,e.__scopeDialog),r=k.useRef(!1),o=k.useRef(!1);return w.jsx(Tse,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;n.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),Tse=k.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=e,a=ul(yh,n),l=k.useRef(null),c=vi(t,l);return Htt(),w.jsxs(w.Fragment,{children:[w.jsx(mse,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:w.jsx(zE,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":WD(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),w.jsxs(w.Fragment,{children:[w.jsx(lnt,{titleId:a.titleId}),w.jsx(unt,{contentRef:l,descriptionId:a.descriptionId})]})]})}),ZD="DialogTitle",_se=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(ZD,n);return w.jsx(io.h2,{id:o.titleId,...r,ref:t})});_se.displayName=ZD;var Ase="DialogDescription",ant=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(Ase,n);return w.jsx(io.p,{id:o.descriptionId,...r,ref:t})});ant.displayName=Ase;var Mse="DialogClose",Rse=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(Mse,n);return w.jsx(io.button,{type:"button",...r,ref:t,onClick:Wo(e.onClick,()=>o.onOpenChange(!1))})});Rse.displayName=Mse;function WD(e){return e?"open":"closed"}var Nse="DialogTitleWarning",[Kpt,Ise]=Get(Nse,{contentName:yh,titleName:ZD,docsSlug:"dialog"}),lnt=({titleId:e})=>{const t=Ise(Nse),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return k.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},cnt="DialogDescriptionWarning",unt=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ise(cnt).contentName}}.`;return k.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},dnt=wse,fnt=kse,Ose=Cse,Pse=Ese,Dse=_se,hnt=Rse;function pnt(e){const[t,n]=k.useState(void 0);return iu(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var mnt="Arrow",$se=k.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...i}=e;return w.jsx(io.svg,{...i,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});$se.displayName=mnt;var gnt=$se,KD="Popper",[Lse,jse]=xg(KD),[ynt,zse]=Lse(KD),Bse=e=>{const{__scopePopper:t,children:n}=e,[r,o]=k.useState(null);return w.jsx(ynt,{scope:t,anchor:r,onAnchorChange:o,children:n})};Bse.displayName=KD;var Vse="PopperAnchor",Fse=k.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,i=zse(Vse,n),s=k.useRef(null),a=vi(t,s),l=k.useRef(null);return k.useEffect(()=>{const c=l.current;l.current=r?.current||s.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:w.jsx(io.div,{...o,ref:a})});Fse.displayName=Vse;var YD="PopperContent",[bnt,vnt]=Lse(YD),Hse=k.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,...b}=e,x=zse(YD,n),[S,E]=k.useState(null),T=vi(t,le=>E(le)),[A,M]=k.useState(null),R=pnt(A),O=R?.width??0,I=R?.height??0,L=r+(i!=="center"?"-"+i:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},B=Array.isArray(c)?c:[c],H=B.length>0,V={padding:$,boundary:B.filter(xnt),altBoundary:H},{refs:W,floatingStyles:K,placement:z,isPositioned:G,middlewareData:F}=UK({strategy:"fixed",placement:L,whileElementsMounted:(...le)=>zC(...le,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[Gi({mainAxis:o+I,alignmentAxis:s}),l&&cu({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?cN():void 0,...V}),l&&As({...V}),Sh({...V,apply:({elements:le,rects:ge,availableWidth:Oe,availableHeight:je})=>{const{width:ye,height:Ie}=ge.reference,Le=le.floating.style;Le.setProperty("--radix-popper-available-width",`${Oe}px`),Le.setProperty("--radix-popper-available-height",`${je}px`),Le.setProperty("--radix-popper-anchor-width",`${ye}px`),Le.setProperty("--radix-popper-anchor-height",`${Ie}px`)}}),A&&t3({element:A,padding:a}),Snt({arrowWidth:O,arrowHeight:I}),p&&GEe({strategy:"referenceHidden",...V})]}),[Z,N]=qse(z),U=Lm(y);iu(()=>{G&&U?.()},[G,U]);const ee=F.arrow?.x,D=F.arrow?.y,ae=F.arrow?.centerOffset!==0,[oe,he]=k.useState();return iu(()=>{S&&he(window.getComputedStyle(S).zIndex)},[S]),w.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:G?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:w.jsx(bnt,{scope:n,placedSide:Z,onArrowChange:M,arrowX:ee,arrowY:D,shouldHideArrow:ae,children:w.jsx(io.div,{"data-side":Z,"data-align":N,...b,ref:T,style:{...b.style,animation:G?void 0:"none"}})})})});Hse.displayName=YD;var Use="PopperArrow",wnt={top:"bottom",right:"left",bottom:"top",left:"right"},Gse=k.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,i=vnt(Use,r),s=wnt[i.placedSide];return w.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:w.jsx(gnt,{...o,ref:n,style:{...o.style,display:"block"}})})});Gse.displayName=Use;function xnt(e){return e!==null}var Snt=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,s=o.arrow?.centerOffset!==0,a=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[c,u]=qse(n),f={start:"0%",center:"50%",end:"100%"}[u],p=(o.arrow?.x??0)+a/2,m=(o.arrow?.y??0)+l/2;let y="",b="";return c==="bottom"?(y=s?f:`${p}px`,b=`${-l}px`):c==="top"?(y=s?f:`${p}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=s?f:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=s?f:`${m}px`),{data:{x:y,y:b}}}});function qse(e){const[t,n="center"]=e.split("-");return[t,n]}var knt=Bse,Cnt=Fse,Ent=Hse,Tnt=Gse,_nt=Symbol("radix.slottable");function Ant(e){const t=({children:n})=>w.jsx(w.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=_nt,t}var[VE,Ypt]=xg("Tooltip",[jse]),FE=jse(),Zse="TooltipProvider",Mnt=700,YI="tooltip.open",[Rnt,JD]=VE(Zse),Wse=e=>{const{__scopeTooltip:t,delayDuration:n=Mnt,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:i}=e,s=k.useRef(!0),a=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),w.jsx(Rnt,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:k.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:i})};Wse.displayName=Zse;var Mb="Tooltip",[Nnt,HE]=VE(Mb),Kse=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o,onOpenChange:i,disableHoverableContent:s,delayDuration:a}=e,l=JD(Mb,e.__scopeTooltip),c=FE(t),[u,f]=k.useState(null),p=pm(),m=k.useRef(0),y=s??l.disableHoverableContent,b=a??l.delayDuration,x=k.useRef(!1),[S,E]=Av({prop:r,defaultProp:o??!1,onChange:O=>{O?(l.onOpen(),document.dispatchEvent(new CustomEvent(YI))):l.onClose(),i?.(O)},caller:Mb}),T=k.useMemo(()=>S?x.current?"delayed-open":"instant-open":"closed",[S]),A=k.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,E(!0)},[E]),M=k.useCallback(()=>{window.clearTimeout(m.current),m.current=0,E(!1)},[E]),R=k.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,E(!0),m.current=0},b)},[b,E]);return k.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),w.jsx(knt,{...c,children:w.jsx(Nnt,{scope:t,contentId:p,open:S,stateAttribute:T,trigger:u,onTriggerChange:f,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayedRef.current?R():A()},[l.isOpenDelayedRef,R,A]),onTriggerLeave:k.useCallback(()=>{y?M():(window.clearTimeout(m.current),m.current=0)},[M,y]),onOpen:A,onClose:M,disableHoverableContent:y,children:n})})};Kse.displayName=Mb;var JI="TooltipTrigger",Yse=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=HE(JI,n),i=JD(JI,n),s=FE(n),a=k.useRef(null),l=vi(t,a,o.onTriggerChange),c=k.useRef(!1),u=k.useRef(!1),f=k.useCallback(()=>c.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),w.jsx(Cnt,{asChild:!0,...s,children:w.jsx(io.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:Wo(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:Wo(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:Wo(e.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Wo(e.onFocus,()=>{c.current||o.onOpen()}),onBlur:Wo(e.onBlur,o.onClose),onClick:Wo(e.onClick,o.onClose)})})});Yse.displayName=JI;var Int="TooltipPortal",[Jpt,Ont]=VE(Int,{forceMount:void 0}),jm="TooltipContent",Jse=k.forwardRef((e,t)=>{const n=Ont(jm,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=e,s=HE(jm,e.__scopeTooltip);return w.jsx(Sg,{present:r||s.open,children:s.disableHoverableContent?w.jsx(Xse,{side:o,...i,ref:t}):w.jsx(Pnt,{side:o,...i,ref:t})})}),Pnt=k.forwardRef((e,t)=>{const n=HE(jm,e.__scopeTooltip),r=JD(jm,e.__scopeTooltip),o=k.useRef(null),i=vi(t,o),[s,a]=k.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:f}=r,p=k.useCallback(()=>{a(null),f(!1)},[f]),m=k.useCallback((y,b)=>{const x=y.currentTarget,S={x:y.clientX,y:y.clientY},E=jnt(S,x.getBoundingClientRect()),T=znt(S,E),A=Bnt(b.getBoundingClientRect()),M=Fnt([...T,...A]);a(M),f(!0)},[f]);return k.useEffect(()=>()=>p(),[p]),k.useEffect(()=>{if(l&&u){const y=x=>m(x,u),b=x=>m(x,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",b)}}},[l,u,m,p]),k.useEffect(()=>{if(s){const y=b=>{const x=b.target,S={x:b.clientX,y:b.clientY},E=l?.contains(x)||u?.contains(x),T=!Vnt(S,s);E?p():T&&(p(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,s,c,p]),w.jsx(Xse,{...e,ref:i})}),[Dnt,$nt]=VE(Mb,{isInside:!1}),Lnt=Ant("TooltipContent"),Xse=k.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:s,...a}=e,l=HE(jm,n),c=FE(n),{onClose:u}=l;return k.useEffect(()=>(document.addEventListener(YI,u),()=>document.removeEventListener(YI,u)),[u]),k.useEffect(()=>{if(l.trigger){const f=p=>{p.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),w.jsx(zE,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:w.jsxs(Ent,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[w.jsx(Lnt,{children:r}),w.jsx(Dnt,{scope:n,isInside:!0,children:w.jsx(Uet,{id:l.contentId,role:"tooltip",children:o||r})})]})})});Jse.displayName=jm;var Qse="TooltipArrow",eae=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=FE(n);return $nt(Qse,n).isInside?null:w.jsx(Tnt,{...o,...r,ref:t})});eae.displayName=Qse;function jnt(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function znt(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Bnt(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function Vnt(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const a=t[i],l=t[s],c=a.x,u=a.y,f=l.x,p=l.y;u>r!=p>r&&n<(f-c)*(r-u)/(p-u)+c&&(o=!o)}return o}function Fnt(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Hnt(t)}function Hnt(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Unt=Wse,Gnt=Kse,qnt=Yse,tae=Jse,Xpt=eae;function nae(e){const t=st.c(8),{value:n,defaultValue:r,onChange:o}=e,[i,s]=k.useState(n!==void 0?n:r);let a,l;t[0]!==n?(a=()=>{n!==void 0&&s(n)},l=[n],t[0]=n,t[1]=a,t[2]=l):(a=t[1],l=t[2]),k.useEffect(a,l);let c;t[3]!==o?(c=(p,...m)=>{const y=m;s(p),o?.(p,...y)},t[3]=o,t[4]=c):c=t[4];const u=c;let f;return t[5]!==u||t[6]!==i?(f=[i,u],t[5]=u,t[6]=i,t[7]=f):f=t[7],f}function UE(e){const t=k.createContext(void 0);return[o=>{const i=st.c(3),{value:s,children:a}=o;let l;return i[0]!==a||i[1]!==s?(l=w.jsx(t.Provider,{value:s,children:a}),i[0]=a,i[1]=s,i[2]=l):l=i[2],l},()=>{const o=k.useContext(t);if(o===void 0)throw new Error(`useContext must be used within ${e??"a Provider"}`);return o}]}const[Znt,Wnt]=UE("AccordionContext"),[Knt,Ynt]=UE("AccordionItemContext");function Jnt(e){const t=st.c(13),n=e?.value,r=e?.defaultValue,o=e?.onValueChange;let i;t[0]!==n||t[1]!==r||t[2]!==o?(i={value:n,defaultValue:r,onChange:o},t[0]=n,t[1]=r,t[2]=o,t[3]=i):i=t[3];const[s,a]=nae(i);let l;t[4]!==a||t[5]!==s?(l={value:s,setValue:a},t[4]=a,t[5]=s,t[6]=l):l=t[6];let c;t[7]!==e||t[8]!==a?(c=w.jsx(Ett,{"data-slot":"accordion",...e,onValueChange:a}),t[7]=e,t[8]=a,t[9]=c):c=t[9];let u;return t[10]!==l||t[11]!==c?(u=w.jsx(Znt,{value:l,children:c}),t[10]=l,t[11]=c,t[12]=u):u=t[12],u}function Xnt(e){const t=st.c(17),{value:n}=Wnt();let r;t[0]!==e.value||t[1]!==n?(r=n?.includes(e?.value)??!1,t[0]=e.value,t[1]=n,t[2]=r):r=t[2];const[o,i]=k.useState(r);let s;t[3]!==e.value||t[4]!==n?(s=()=>{i(n?.includes(e?.value)??!1)},t[3]=e.value,t[4]=n,t[5]=s):s=t[5];const a=e?.value;let l;t[6]!==a||t[7]!==n?(l=[n,a],t[6]=a,t[7]=n,t[8]=l):l=t[8],k.useEffect(s,l);let c;t[9]!==o||t[10]!==e.value?(c={isOpen:o,setIsOpen:i,value:e.value},t[9]=o,t[10]=e.value,t[11]=c):c=t[11];let u;t[12]!==e?(u=w.jsx(Ttt,{"data-slot":"accordion-item",...e}),t[12]=e,t[13]=u):u=t[13];let f;return t[14]!==c||t[15]!==u?(f=w.jsx(Knt,{value:c,children:u}),t[14]=c,t[15]=u,t[16]=f):f=t[16],f}function Qnt(e){const t=st.c(2);let n;return t[0]!==e?(n=w.jsx(_tt,{"data-slot":"accordion-trigger",...e}),t[0]=e,t[1]=n):n=t[1],n}function ert(e){const t=st.c(13);let n,r,o;t[0]!==e?({keepRendered:r,transition:o,...n}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);const i=r===void 0?!1:r;let s;t[4]!==o?(s=o===void 0?{type:"spring",stiffness:150,damping:22}:o,t[4]=o,t[5]=s):s=t[5];const a=s,{isOpen:l}=Ynt();let c;t[6]!==l||t[7]!==i||t[8]!==n||t[9]!==a?(c=i?w.jsx(lH,{asChild:!0,forceMount:!0,children:w.jsx(or.div,{"data-slot":"accordion-content",initial:{height:0,opacity:0,"--mask-stop":"0%"},animate:l?{height:"auto",opacity:1,"--mask-stop":"100%"}:{height:0,opacity:0,"--mask-stop":"0%"},transition:a,style:{maskImage:"linear-gradient(black var(--mask-stop), transparent var(--mask-stop))",WebkitMaskImage:"linear-gradient(black var(--mask-stop), transparent var(--mask-stop))",overflow:"hidden"},...n},"accordion-content")}):l&&w.jsx(lH,{asChild:!0,forceMount:!0,children:w.jsx(or.div,{"data-slot":"accordion-content",initial:{height:0,opacity:0,"--mask-stop":"0%"},animate:{height:"auto",opacity:1,"--mask-stop":"100%"},exit:{height:0,opacity:0,"--mask-stop":"0%"},transition:a,style:{maskImage:"linear-gradient(black var(--mask-stop), transparent var(--mask-stop))",WebkitMaskImage:"linear-gradient(black var(--mask-stop), transparent var(--mask-stop))",overflow:"hidden"},...n},"accordion-content")}),t[6]=l,t[7]=i,t[8]=n,t[9]=a,t[10]=c):c=t[10];let u;return t[11]!==c?(u=w.jsx(Wa,{children:c}),t[11]=c,t[12]=u):u=t[12],u}const[trt,nrt]=UE("FilesContext"),[rrt,ort]=UE("FolderContext");function irt(e){const t=st.c(29);let n,r,o,i,s,a;t[0]!==e?({children:n,defaultOpen:a,open:o,onOpenChange:r,style:s,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6]);let l;t[7]!==a?(l=a===void 0?[]:a,t[7]=a,t[8]=l):l=t[8];const c=l;let u;t[9]!==c||t[10]!==r||t[11]!==o?(u={value:o,defaultValue:c,onChange:r},t[9]=c,t[10]=r,t[11]=o,t[12]=u):u=t[12];const[f,p]=nae(u);let m;t[13]!==f?(m=f??[],t[13]=f,t[14]=m):m=t[14];let y;t[15]!==m?(y={open:m},t[15]=m,t[16]=y):y=t[16];let b;t[17]!==s?(b={position:"relative",overflow:"auto",...s},t[17]=s,t[18]=b):b=t[18];let x;t[19]!==n||t[20]!==c||t[21]!==o||t[22]!==i||t[23]!==p||t[24]!==b?(x=w.jsx(Jnt,{"data-slot":"files",type:"multiple",defaultValue:c,value:o,onValueChange:p,style:b,...i,children:n}),t[19]=n,t[20]=c,t[21]=o,t[22]=i,t[23]=p,t[24]=b,t[25]=x):x=t[25];let S;return t[26]!==y||t[27]!==x?(S=w.jsx(trt,{value:y,children:x}),t[26]=y,t[27]=x,t[28]=S):S=t[28],S}function srt(e){const t=st.c(14);let n,r;t[0]!==e?({value:r,...n}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);const{open:o}=nrt();let i;t[3]!==o||t[4]!==r?(i=o.includes(r),t[3]=o,t[4]=r,t[5]=i):i=t[5];let s;t[6]!==i?(s={isOpen:i},t[6]=i,t[7]=s):s=t[7];let a;t[8]!==n||t[9]!==r?(a=w.jsx(Xnt,{"data-slot":"folder-item",value:r,...n}),t[8]=n,t[9]=r,t[10]=a):a=t[10];let l;return t[11]!==s||t[12]!==a?(l=w.jsx(rrt,{value:s,children:a}),t[11]=s,t[12]=a,t[13]=l):l=t[13],l}function art(e){const t=st.c(2);let n;return t[0]!==e?(n=w.jsx(Qnt,{"data-slot":"folder-trigger",...e}),t[0]=e,t[1]=n):n=t[1],n}function lrt(e){const t=st.c(2);let n;return t[0]!==e?(n=w.jsx(ert,{"data-slot":"folder-content",...e}),t[0]=e,t[1]=n):n=t[1],n}function crt(e){const t=st.c(15);let n,r,o,i;t[0]!==e?({closeIcon:n,openIcon:r,transition:i,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i):(n=t[1],r=t[2],o=t[3],i=t[4]);let s;t[5]!==i?(s=i===void 0?{duration:.15}:i,t[5]=i,t[6]=s):s=t[6];const a=s,{isOpen:l}=ort(),c=l?"open":"close";let u,f,p;t[7]===Symbol.for("react.memo_cache_sentinel")?(u={scale:.9},f={scale:1},p={scale:.9},t[7]=u,t[8]=f,t[9]=p):(u=t[7],f=t[8],p=t[9]);const m=l?r:n;let y;return t[10]!==o||t[11]!==c||t[12]!==m||t[13]!==a?(y=w.jsx(Wa,{mode:"wait",children:w.jsx(or.span,{"data-slot":"folder-icon",initial:u,animate:f,exit:p,transition:a,...o,children:m},c)}),t[10]=o,t[11]=c,t[12]=m,t[13]=a,t[14]=y):y=t[14],y}function urt(e){const t=st.c(2);let n;return t[0]!==e?(n=w.jsx("span",{"data-slot":"folder-label",...e}),t[0]=e,t[1]=n):n=t[1],n}function gH(e){const t=st.c(2);let n;return t[0]!==e?(n=w.jsx("div",{"data-slot":"file",...e}),t[0]=e,t[1]=n):n=t[1],n}function yH(e){const t=st.c(2);let n;return t[0]!==e?(n=w.jsx("span",{"data-slot":"file-icon",...e}),t[0]=e,t[1]=n):n=t[1],n}function bH(e){const t=st.c(2);let n;return t[0]!==e?(n=w.jsx("span",{"data-slot":"file-label",...e}),t[0]=e,t[1]=n):n=t[1],n}const drt=e=>{const t=st.c(44),{onSelectNote:n,onSelectFolder:r,onContextMenu:o,onDeleteFolder:i,onDeleteNote:s,selectedFolderId:a,expandedFolders:l,onExpandedFoldersChange:c,renamingNoteId:u,renamingFolderId:f,renameValue:p,folderRenameValue:m,onRename:y,onFolderRename:b,onRenameValueChange:x,onFolderRenameValueChange:S,onStartRenaming:E,onStartFolderRenaming:T,selectedNoteId:A}=e,M=ws(frt),R=ws(hrt);let O;t[0]!==R?(O=H=>H===void 0?R.filter(prt):R.filter(V=>V.parent_id===H),t[0]=R,t[1]=O):O=t[1];const I=O;let L;t[2]!==M?(L=H=>H===void 0?M.filter(mrt):M.filter(V=>V.folder_id===H),t[2]=M,t[3]=L):L=t[3];const $=L;let B;if(t[4]!==l||t[5]!==m||t[6]!==I||t[7]!==$||t[8]!==o||t[9]!==i||t[10]!==s||t[11]!==c||t[12]!==b||t[13]!==S||t[14]!==y||t[15]!==x||t[16]!==r||t[17]!==n||t[18]!==T||t[19]!==E||t[20]!==p||t[21]!==f||t[22]!==u||t[23]!==a||t[24]!==A){const H=(N,U)=>{const ee=U===void 0?0:U,D=I(N.id),ae=$(N.id),oe=a===N.id,he=D.length>0||ae.length>0;return w.jsxs(srt,{value:N.id,children:[w.jsxs("div",{className:`flex items-center py-1.5 px-1 rounded-md cursor-pointer transition-all duration-200 group
            ${oe?"bg-blue-600/10 text-blue-100 border-l-2 border-blue-500":"hover:bg-zinc-800/70 text-zinc-300"}`,style:{paddingLeft:`${ee*8}px`},onClick:le=>{le.stopPropagation(),r(N.id)},onContextMenu:le=>o(le,{folder:N}),onDoubleClick:()=>T(N.id,N.name),children:[w.jsxs(art,{className:"flex items-center flex-1",children:[w.jsx("div",{className:"flex items-start mr-0.5",children:he?w.jsx(crt,{closeIcon:w.jsx(Rk,{size:14,className:oe?"text-blue-300":"text-zinc-500"}),openIcon:w.jsx(GP,{size:14,className:oe?"text-blue-300":"text-zinc-500"})}):w.jsx("div",{className:"w-4"})}),l.has(N.id)?w.jsx(CUe,{size:16,className:oe?"text-blue-200":"text-blue-400"}):w.jsx(TUe,{size:16,className:oe?"text-blue-200":"text-blue-400"}),f===N.id?w.jsx("input",{type:"text",value:m,onChange:le=>S(le.target.value),onBlur:b,onKeyDown:le=>{le.key==="Enter"&&b(),le.key},className:"flex-1 bg-zinc-700 text-white text-sm px-1 py-0.5 border-none outline-none focus:ring-0",autoFocus:!0,onClick:grt}):w.jsx(urt,{className:oe?"text-blue-100/90 text-sm truncate px-1 py-0.5":"text-zinc-300 text-sm truncate px-1 py-0.5",children:N.name})]}),w.jsx("button",{onClick:le=>{le.stopPropagation(),o(le,{folder:N})},className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-white ml-auto mr-1 active:scale-95 transition-all",title:"More options",children:w.jsx(u0,{size:14})}),w.jsx("button",{onClick:le=>i(N.id,le),className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-red-400 active:scale-95 transition-all",title:"Delete folder",children:w.jsx(xM,{size:12})})]}),w.jsxs(lrt,{className:"ml-4",children:[D.map(le=>H(le,ee+1)),ae.map(le=>w.jsx(gH,{className:`
                group relative font-small px-2 py-1.5 rounded-md cursor-pointer transition-all duration-200 flex items-center
                ${le.id===u?"bg-zinc-800":le.id===A?"bg-blue-600/20 text-blue-100 border-l-2 border-blue-500":"hover:bg-zinc-800/50 text-zinc-300"}
              `,style:{paddingLeft:`${(ee+1)*16+8}px`},onClick:()=>n(le),onContextMenu:ge=>o(ge,{note:le}),onDoubleClick:()=>E(le.id,le.title||"Untitled"),children:w.jsxs("div",{className:"flex items-center justify-between w-full",children:[w.jsx("div",{className:"flex-1 min-w-0 pr-2",children:w.jsxs("div",{className:`
                    font-small text-sm truncate flex items-start
                    ${le.id===u?"text-white":le.id===A?"text-blue-100":"text-zinc-300"}
                  `,children:[w.jsx(yH,{className:`mr-2 flex-shrink-0 mt-0.5 ${le.id===A?"text-blue-300":"text-zinc-500"}`,children:le.note_type==="canvas"?w.jsx(rV,{size:15}):w.jsx(eV,{size:13})}),u===le.id?w.jsx("input",{type:"text",value:p,onChange:ge=>x(ge.target.value),onBlur:y,onKeyDown:ge=>{ge.key==="Enter"&&y(),ge.key},className:"w-full bg-zinc-700 text-white text-sm p-0 border-none outline-none focus:ring-0",autoFocus:!0,onClick:yrt}):w.jsx(bH,{className:le.id===A?"text-blue-100":"text-zinc-300",children:le.title||"Untitled"})]})}),w.jsx("button",{onClick:ge=>{ge.stopPropagation(),o(ge,{note:le})},className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-white hover:bg-zinc-700/50 rounded transition-all duration-200 flex-shrink-0 active:scale-95 ml-auto mr-1",title:"More options",children:w.jsx(u0,{size:14})}),w.jsx("button",{onClick:ge=>s(le.id,ge),className:`opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-red-400
                  hover:bg-zinc-700 rounded transition-all duration-200 flex-shrink-0 active:scale-95`,title:"Delete note",children:w.jsx(xM,{size:12})})]})},le.id))]})]},N.id)},V=I(void 0),W=$(void 0);let K;t[26]!==l?(K=Array.from(l),t[26]=l,t[27]=K):K=t[27];let z;t[28]!==c?(z=N=>c(new Set(N)),t[28]=c,t[29]=z):z=t[29];const G=V.map(N=>H(N));let F;t[30]!==K||t[31]!==z||t[32]!==G?(F=w.jsx(irt,{open:K,onOpenChange:z,children:G}),t[30]=K,t[31]=z,t[32]=G,t[33]=F):F=t[33];let Z;t[34]!==o||t[35]!==s||t[36]!==y||t[37]!==x||t[38]!==n||t[39]!==E||t[40]!==p||t[41]!==u||t[42]!==A?(Z=N=>w.jsx(gH,{className:`
            group relative font-small px-2 py-1.5 rounded-lg cursor-pointer transition-all duration-200 flex items-center
            ${N.id===u?"bg-zinc-800 border border-zinc-700":N.id===A?"bg-blue-600/30 text-blue-100 border-l-2 border-blue-500":"hover:bg-zinc-800/50 border border-transparent text-zinc-300"}
          `,onClick:()=>n(N),onContextMenu:U=>o(U,{note:N}),onDoubleClick:()=>E(N.id,N.title||"Untitled"),children:w.jsxs("div",{className:"flex items-center justify-between w-full",children:[w.jsx("div",{className:"flex-1 min-w-0 pr-2",children:w.jsxs("div",{className:`
                font-small text-sm truncate flex items-start
                ${N.id===u?"text-white":N.id===A?"text-blue-100":"text-zinc-300"}
              `,children:[w.jsx(yH,{className:`mr-2 flex-shrink-0 ${N.id===A?"text-blue-300":"text-zinc-500"}`,children:N.note_type==="canvas"?w.jsx(rV,{size:17}):w.jsx(eV,{size:15})}),u===N.id?w.jsx("input",{type:"text",value:p,onChange:U=>x(U.target.value),onBlur:y,onKeyDown:U=>{U.key==="Enter"&&y(),U.key},className:"w-full bg-zinc-700 text-white text-sm p-0 border-none outline-none focus:ring-0",autoFocus:!0,onClick:brt}):w.jsx(bH,{className:N.id===A?"text-blue-100":"text-zinc-300",children:N.title||"Untitled"})]})}),w.jsx("button",{onClick:U=>{U.stopPropagation(),o(U,{note:N})},className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-white hover:bg-zinc-700/50 rounded transition-all duration-200 flex-shrink-0 active:scale-95 ml-auto mr-1",title:"More options",children:w.jsx(u0,{size:14})}),w.jsx("button",{onClick:U=>s(N.id,U),className:`opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-red-400
              hover:bg-zinc-700 rounded transition-all duration-200 flex-shrink-0 active:scale-95`,title:"Delete note",children:w.jsx(xM,{size:12})})]})},N.id),t[34]=o,t[35]=s,t[36]=y,t[37]=x,t[38]=n,t[39]=E,t[40]=p,t[41]=u,t[42]=A,t[43]=Z):Z=t[43],B=w.jsxs("div",{className:"space-y-1",children:[F,W.map(Z)]}),t[4]=l,t[5]=m,t[6]=I,t[7]=$,t[8]=o,t[9]=i,t[10]=s,t[11]=c,t[12]=b,t[13]=S,t[14]=y,t[15]=x,t[16]=r,t[17]=n,t[18]=T,t[19]=E,t[20]=p,t[21]=f,t[22]=u,t[23]=a,t[24]=A,t[25]=B}else B=t[25];return B};function frt(e){return e.notes}function hrt(e){return e.folders}function prt(e){return e.parent_id==null}function mrt(e){return e.folder_id==null}function grt(e){return e.stopPropagation()}function yrt(e){return e.stopPropagation()}function brt(e){return e.stopPropagation()}let vrt={data:""},wrt=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||vrt},xrt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Srt=/\/\*[^]*?\*\/|  +/g,vH=/\n+/g,od=(e,t)=>{let n="",r="",o="";for(let i in e){let s=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+s+";":r+=i[1]=="f"?od(s,i):i+"{"+od(s,i[1]=="k"?"":t)+"}":typeof s=="object"?r+=od(s,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):s!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=od.p?od.p(i,s):i+":"+s+";")}return n+(t&&o?t+"{"+o+"}":o)+r},Oc={},rae=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+rae(e[n]);return t}return e},krt=(e,t,n,r,o)=>{let i=rae(e),s=Oc[i]||(Oc[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Oc[s]){let l=i!==e?e:(c=>{let u,f,p=[{}];for(;u=xrt.exec(c.replace(Srt,""));)u[4]?p.shift():u[3]?(f=u[3].replace(vH," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(vH," ").trim();return p[0]})(e);Oc[s]=od(o?{["@keyframes "+s]:l}:l,n?"":"."+s)}let a=n&&Oc.g?Oc.g:null;return n&&(Oc.g=Oc[s]),((l,c,u,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Oc[s],t,r,a),s},Crt=(e,t,n)=>e.reduce((r,o,i)=>{let s=t[i];if(s&&s.call){let a=s(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;s=l?"."+l:a&&typeof a=="object"?a.props?"":od(a,""):a===!1?"":a}return r+o+(s??"")},"");function GE(e){let t=this||{},n=e.call?e(t.p):e;return krt(n.unshift?n.raw?Crt(n,[].slice.call(arguments,1),t.p):n.reduce((r,o)=>Object.assign(r,o&&o.call?o(t.p):o),{}):n,wrt(t.target),t.g,t.o,t.k)}let oae,XI,QI;GE.bind({g:1});let su=GE.bind({k:1});function Ert(e,t,n,r){od.p=t,oae=e,XI=n,QI=r}function Fd(e,t){let n=this||{};return function(){let r=arguments;function o(i,s){let a=Object.assign({},i),l=a.className||o.className;n.p=Object.assign({theme:XI&&XI()},a),n.o=/ *go\d+/.test(l),a.className=GE.apply(n,r)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),QI&&c[0]&&QI(a),oae(c,a)}return o}}var Trt=e=>typeof e=="function",Zk=(e,t)=>Trt(e)?e(t):e,_rt=(()=>{let e=0;return()=>(++e).toString()})(),iae=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Art=20,XD="default",sae=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:r}=t;return sae(e,{type:e.toasts.find(s=>s.id===r.id)?1:0,toast:r});case 3:let{toastId:o}=t;return{...e,toasts:e.toasts.map(s=>s.id===o||o===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},_x=[],aae={toasts:[],pausedAt:void 0,settings:{toastLimit:Art}},zl={},lae=(e,t=XD)=>{zl[t]=sae(zl[t]||aae,e),_x.forEach(([n,r])=>{n===t&&r(zl[t])})},cae=e=>Object.keys(zl).forEach(t=>lae(e,t)),Mrt=e=>Object.keys(zl).find(t=>zl[t].toasts.some(n=>n.id===e)),qE=(e=XD)=>t=>{lae(t,e)},Rrt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Nrt=(e={},t=XD)=>{let[n,r]=k.useState(zl[t]||aae),o=k.useRef(zl[t]);k.useEffect(()=>(o.current!==zl[t]&&r(zl[t]),_x.push([t,r]),()=>{let s=_x.findIndex(([a])=>a===t);s>-1&&_x.splice(s,1)}),[t]);let i=n.toasts.map(s=>{var a,l,c;return{...e,...e[s.type],...s,removeDelay:s.removeDelay||((a=e[s.type])==null?void 0:a.removeDelay)||e?.removeDelay,duration:s.duration||((l=e[s.type])==null?void 0:l.duration)||e?.duration||Rrt[s.type],style:{...e.style,...(c=e[s.type])==null?void 0:c.style,...s.style}}});return{...n,toasts:i}},Irt=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||_rt()}),Mv=e=>(t,n)=>{let r=Irt(t,e,n);return qE(r.toasterId||Mrt(r.id))({type:2,toast:r}),r.id},to=(e,t)=>Mv("blank")(e,t);to.error=Mv("error");to.success=Mv("success");to.loading=Mv("loading");to.custom=Mv("custom");to.dismiss=(e,t)=>{let n={type:3,toastId:e};t?qE(t)(n):cae(n)};to.dismissAll=e=>to.dismiss(void 0,e);to.remove=(e,t)=>{let n={type:4,toastId:e};t?qE(t)(n):cae(n)};to.removeAll=e=>to.remove(void 0,e);to.promise=(e,t,n)=>{let r=to.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let i=t.success?Zk(t.success,o):void 0;return i?to.success(i,{id:r,...n,...n?.success}):to.dismiss(r),o}).catch(o=>{let i=t.error?Zk(t.error,o):void 0;i?to.error(i,{id:r,...n,...n?.error}):to.dismiss(r)}),e};var Ort=1e3,Prt=(e,t="default")=>{let{toasts:n,pausedAt:r}=Nrt(e,t),o=k.useRef(new Map).current,i=k.useCallback((f,p=Ort)=>{if(o.has(f))return;let m=setTimeout(()=>{o.delete(f),s({type:4,toastId:f})},p);o.set(f,m)},[]);k.useEffect(()=>{if(r)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let y=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(y<0){m.visible&&to.dismiss(m.id);return}return setTimeout(()=>to.dismiss(m.id,t),y)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,r,t]);let s=k.useCallback(qE(t),[t]),a=k.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=k.useCallback((f,p)=>{s({type:1,toast:{id:f,height:p}})},[s]),c=k.useCallback(()=>{r&&s({type:6,time:Date.now()})},[r,s]),u=k.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:y=8,defaultPosition:b}=p||{},x=n.filter(T=>(T.position||b)===(f.position||b)&&T.height),S=x.findIndex(T=>T.id===f.id),E=x.filter((T,A)=>A<S&&T.visible).length;return x.filter(T=>T.visible).slice(...m?[E+1]:[0,E]).reduce((T,A)=>T+(A.height||0)+y,0)},[n]);return k.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=o.get(f.id);p&&(clearTimeout(p),o.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},Drt=su`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,$rt=su`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Lrt=su`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,jrt=Fd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Drt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${$rt} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Lrt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,zrt=su`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Brt=Fd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${zrt} 1s linear infinite;
`,Vrt=su`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Frt=su`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Hrt=Fd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Vrt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Frt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Urt=Fd("div")`
  position: absolute;
`,Grt=Fd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,qrt=su`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Zrt=Fd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${qrt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Wrt=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?k.createElement(Zrt,null,t):t:n==="blank"?null:k.createElement(Grt,null,k.createElement(Brt,{...r}),n!=="loading"&&k.createElement(Urt,null,n==="error"?k.createElement(jrt,{...r}):k.createElement(Hrt,{...r})))},Krt=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Yrt=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Jrt="0%{opacity:0;} 100%{opacity:1;}",Xrt="0%{opacity:1;} 100%{opacity:0;}",Qrt=Fd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,eot=Fd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,tot=(e,t)=>{let n=e.includes("top")?1:-1,[r,o]=iae()?[Jrt,Xrt]:[Krt(n),Yrt(n)];return{animation:t?`${su(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${su(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},not=k.memo(({toast:e,position:t,style:n,children:r})=>{let o=e.height?tot(e.position||t||"top-center",e.visible):{opacity:0},i=k.createElement(Wrt,{toast:e}),s=k.createElement(eot,{...e.ariaProps},Zk(e.message,e));return k.createElement(Qrt,{className:e.className,style:{...o,...n,...e.style}},typeof r=="function"?r({icon:i,message:s}):k.createElement(k.Fragment,null,i,s))});Ert(k.createElement);var rot=({id:e,className:t,style:n,onHeightUpdate:r,children:o})=>{let i=k.useCallback(s=>{if(s){let a=()=>{let l=s.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return k.createElement("div",{ref:i,className:t,style:n},o)},oot=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:iae()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...o}},iot=GE`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Gw=16,sot=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:o,toasterId:i,containerStyle:s,containerClassName:a})=>{let{toasts:l,handlers:c}=Prt(n,i);return k.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Gw,left:Gw,right:Gw,bottom:Gw,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let f=u.position||t,p=c.calculateOffset(u,{reverseOrder:e,gutter:r,defaultPosition:t}),m=oot(f,p);return k.createElement(rot,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?iot:"",style:m},u.type==="custom"?Zk(u.message,u):o?o(u):k.createElement(not,{toast:u,position:f}))}))},Po=to;async function aot(e,t){if(e==null)return Promise.resolve();const n=t?.abortSignal;return new Promise((r,o)=>{if(n?.aborted){o(wH());return}const i=setTimeout(()=>{s(),r()},e),s=()=>{clearTimeout(i),n?.removeEventListener("abort",a)},a=()=>{s(),o(wH())};n?.addEventListener("abort",a)})}function wH(){return new DOMException("Delay was aborted","AbortError")}var Rv=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=()=>{const i=n.length,s=new Array(t);for(let a=0;a<t;a++)s[a]=n[Math.random()*i|0];return s.join("")};if(e==null)return o;if(n.includes(r))throw new wE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${o()}`},lot=Rv();function QD(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function uae(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}function cot({mediaType:e,url:t,supportedUrls:n}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(n).map(([r,o])=>{const i=r.toLowerCase();return i==="*"||i==="*/*"?{mediaTypePrefix:"",regexes:o}:{mediaTypePrefix:i.replace(/\*/,""),regexes:o}}).filter(({mediaTypePrefix:r})=>e.startsWith(r)).flatMap(({regexes:r})=>r).some(r=>r.test(t))}var uot=/"__proto__"\s*:/,dot=/"constructor"\s*:/;function fot(e){const t=JSON.parse(e);return t===null||typeof t!="object"||uot.test(e)===!1&&dot.test(e)===!1?t:hot(t)}function hot(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const o in r){const i=r[o];i&&typeof i=="object"&&t.push(i)}}}return e}function pot(e){const{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{return fot(e)}finally{Error.stackTraceLimit=t}}var Wk=Symbol.for("vercel.ai.validator");function mot(e){return{[Wk]:!0,validate:e}}function got(e){return typeof e=="object"&&e!==null&&Wk in e&&e[Wk]===!0&&"validate"in e}function yot(e){return got(e)?e:bot(e)}function bot(e){return mot(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new Ui({value:t,cause:n.issues})}})}async function xH({value:e,schema:t}){const n=await Nv({value:e,schema:t});if(!n.success)throw Ui.wrap({value:e,cause:n.error});return n.value}async function Nv({value:e,schema:t}){const n=yot(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:Ui.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:Ui.wrap({value:e,cause:r}),rawValue:e}}}async function Kk({text:e,schema:t}){try{const n=pot(e);return t==null?{success:!0,value:n,rawValue:n}:await Nv({value:n,schema:t})}catch(n){return{success:!1,error:Xl.isInstance(n)?n:new Xl({text:e,cause:n}),rawValue:void 0}}}function vot(e,t){var n;const r=(n=void 0)!=null?n:!1;return e$(Nee(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:async o=>{const i=await e.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function wot(e,t){var n;const r=(n=void 0)!=null?n:!1,o=gee(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"});return e$(o,{validate:async i=>{const s=await kP(e,i);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function xot(e){return"_zod"in e}function Sot(e,t){return xot(e)?wot(e):vot(e)}var eO=Symbol.for("vercel.ai.schema");function e$(e,{validate:t}={}){return{[eO]:!0,_type:void 0,[Wk]:!0,jsonSchema:e,validate:t}}function kot(e){return typeof e=="object"&&e!==null&&eO in e&&e[eO]===!0&&"jsonSchema"in e&&"validate"in e}function ZE(e){return e==null?e$({properties:{},additionalProperties:!1}):kot(e)?e:Sot(e)}var{btoa:Cot,atob:Eot}=globalThis;function dae(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=Eot(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function tO(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Cot(t)}function Tot(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*fae({execute:e,input:t,options:n}){const r=e(t,n);if(Tot(r)){let o;for await(const i of r)o=i,yield{type:"preliminary",output:i};yield{type:"final",output:o}}else yield{type:"final",output:await r}}class SH extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function TM(e){}function _ot(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=TM,onError:n=TM,onRetry:r=TM,onComment:o}=e;let i="",s=!0,a,l="",c="";function u(b){const x=s?b.replace(/^\xEF\xBB\xBF/,""):b,[S,E]=Aot(`${i}${x}`);for(const T of S)f(T);i=E,s=!1}function f(b){if(b===""){m();return}if(b.startsWith(":")){o&&o(b.slice(b.startsWith(": ")?2:1));return}const x=b.indexOf(":");if(x!==-1){const S=b.slice(0,x),E=b[x+1]===" "?2:1,T=b.slice(x+E);p(S,T,b);return}p(b,"",b)}function p(b,x,S){switch(b){case"event":c=x;break;case"data":l=`${l}${x}
`;break;case"id":a=x.includes("\0")?void 0:x;break;case"retry":/^\d+$/.test(x)?r(parseInt(x,10)):n(new SH(`Invalid \`retry\` value: "${x}"`,{type:"invalid-retry",value:x,line:S}));break;default:n(new SH(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:x,line:S}));break}}function m(){l.length>0&&t({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function y(b={}){i&&b.consume&&f(i),s=!0,a=void 0,l="",c="",i=""}return{feed:u,reset:y}}function Aot(e){const t=[];let n="",r=0;for(;r<e.length;){const o=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(o!==-1&&i!==-1?s=Math.min(o,i):o!==-1?s=o:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const a=e.slice(r,s);t.push(a),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class Mot extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let o;super({start(i){o=_ot({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){o.feed(i)}})}}var Rot={};function nO(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Iv(e){return Object.fromEntries([...e.headers])}var Not=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=()=>{const i=n.length,s=new Array(t);for(let a=0;a<t;a++)s[a]=n[Math.random()*i|0];return s.join("")};if(e==null)return o;if(n.includes(r))throw new wE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${o()}`};Not();function Rb(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var Iot=["fetch failed","failed to fetch"];function hae({error:e,url:t,requestBodyValues:n}){if(Rb(e))return e;if(e instanceof TypeError&&Iot.includes(e.message.toLowerCase())){const r=e.cause;if(r!=null)return new Jn({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function pae(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}var Oot=()=>globalThis.fetch,Pot=async({url:e,headers:t={},successfulResponseHandler:n,failedResponseHandler:r,abortSignal:o,fetch:i=Oot()})=>{try{const s=await i(e,{method:"GET",headers:pae(t),signal:o}),a=Iv(s);if(!s.ok){let l;try{l=await r({response:s,url:e,requestBodyValues:{}})}catch(c){throw Rb(c)||Jn.isInstance(c)?c:new Jn({message:"Failed to process error response",cause:c,statusCode:s.status,url:e,responseHeaders:a,requestBodyValues:{}})}throw l.value}try{return await n({response:s,url:e,requestBodyValues:{}})}catch(l){throw l instanceof Error&&(Rb(l)||Jn.isInstance(l))?l:new Jn({message:"Failed to process successful response",cause:l,statusCode:s.status,url:e,responseHeaders:a,requestBodyValues:{}})}}catch(s){throw hae({error:s,url:e,requestBodyValues:{}})}};function Ax({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=Rot[t],!(e==null||typeof e!="string")))return e}var Dot=/"__proto__"\s*:/,$ot=/"constructor"\s*:/;function Lot(e){const t=JSON.parse(e);return t===null||typeof t!="object"||Dot.test(e)===!1&&$ot.test(e)===!1?t:jot(t)}function jot(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const o in r){const i=r[o];i&&typeof i=="object"&&t.push(i)}}}return e}function mae(e){const{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{return Lot(e)}finally{Error.stackTraceLimit=t}}var rO=Symbol.for("vercel.ai.validator");function zot(e){return{[rO]:!0,validate:e}}function Bot(e){return typeof e=="object"&&e!==null&&rO in e&&e[rO]===!0&&"validate"in e}function Vot(e){return Bot(e)?e:Fot(e)}function Fot(e){return zot(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new Ui({value:t,cause:n.issues})}})}async function Hot({value:e,schema:t}){const n=await gae({value:e,schema:t});if(!n.success)throw Ui.wrap({value:e,cause:n.error});return n.value}async function gae({value:e,schema:t}){const n=Vot(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:Ui.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:Ui.wrap({value:e,cause:r}),rawValue:e}}}async function Uot({text:e,schema:t}){try{const n=mae(e);return t==null?n:Hot({value:n,schema:t})}catch(n){throw Xl.isInstance(n)||Ui.isInstance(n)?n:new Xl({text:e,cause:n})}}async function yae({text:e,schema:t}){try{const n=mae(e);return t==null?{success:!0,value:n,rawValue:n}:await gae({value:n,schema:t})}catch(n){return{success:!1,error:Xl.isInstance(n)?n:new Xl({text:e,cause:n}),rawValue:void 0}}}function Got({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Mot).pipeThrough(new TransformStream({async transform({data:n},r){n!=="[DONE]"&&r.enqueue(await yae({text:n,schema:t}))}}))}var qot=()=>globalThis.fetch,oO=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:o,abortSignal:i,fetch:s})=>Zot({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:o,abortSignal:i,fetch:s}),Zot=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:o,abortSignal:i,fetch:s=qot()})=>{try{const a=await s(e,{method:"POST",headers:pae(t),body:n.content,signal:i}),l=Iv(a);if(!a.ok){let c;try{c=await o({response:a,url:e,requestBodyValues:n.values})}catch(u){throw Rb(u)||Jn.isInstance(u)?u:new Jn({message:"Failed to process error response",cause:u,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Rb(c)||Jn.isInstance(c))?c:new Jn({message:"Failed to process successful response",cause:c,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(a){throw hae({error:a,url:e,requestBodyValues:n.values})}};async function Vf(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Yk=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:o,requestBodyValues:i})=>{const s=await r.text(),a=Iv(r);if(s.trim()==="")return{responseHeaders:a,value:new Jn({message:r.statusText,url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,isRetryable:n?.(r)})};try{const l=await Uot({text:s,schema:e});return{responseHeaders:a,value:new Jn({message:t(l),url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new Jn({message:r.statusText,url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,isRetryable:n?.(r)})}}},Wot=e=>async({response:t})=>{const n=Iv(t);if(t.body==null)throw new Zte({});return{responseHeaders:n,value:Got({stream:t.body,schema:e})}},t$=e=>async({response:t,url:n,requestBodyValues:r})=>{const o=await t.text(),i=await yae({text:o,schema:e}),s=Iv(t);if(!i.success)throw new Jn({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:o,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}};function Kot(e){return e?.replace(/\/$/,"")}var Yot={},Jot="vercel.ai.gateway.error",_M=Symbol.for(Jot),kH,CH,Is=class bae extends(CH=Error,kH=_M,CH){constructor({message:t,statusCode:n=500,cause:r}){super(t),this[kH]=!0,this.statusCode=n,this.cause=r}static isInstance(t){return bae.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&_M in t&&t[_M]===!0}},vae="GatewayAuthenticationError",Xot=`vercel.ai.gateway.error.${vae}`,EH=Symbol.for(Xot),TH,_H,WE=class wae extends(_H=Is,TH=EH,_H){constructor({message:t="Authentication failed",statusCode:n=401,cause:r}={}){super({message:t,statusCode:n,cause:r}),this[TH]=!0,this.name=vae,this.type="authentication_error"}static isInstance(t){return Is.hasMarker(t)&&EH in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:n,message:r="Authentication failed",statusCode:o=401,cause:i}){let s;return t?s=`AI Gateway authentication failed: Invalid API key provided.

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:n?s=`AI Gateway authentication failed: Invalid OIDC token provided.

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed

Alternative: Provide an API key via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:s=`AI Gateway authentication failed: No authentication provided.

Provide either an API key or OIDC token.

API key instructions:

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

OIDC token instructions:

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed`,new wae({message:s,statusCode:o,cause:i})}},xae="GatewayInvalidRequestError",Qot=`vercel.ai.gateway.error.${xae}`,AH=Symbol.for(Qot),MH,RH,eit=class extends(RH=Is,MH=AH,RH){constructor({message:e="Invalid request",statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[MH]=!0,this.name=xae,this.type="invalid_request_error"}static isInstance(e){return Is.hasMarker(e)&&AH in e}},Sae="GatewayRateLimitError",tit=`vercel.ai.gateway.error.${Sae}`,NH=Symbol.for(tit),IH,OH,nit=class extends(OH=Is,IH=NH,OH){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[IH]=!0,this.name=Sae,this.type="rate_limit_exceeded"}static isInstance(e){return Is.hasMarker(e)&&NH in e}},kae="GatewayModelNotFoundError",rit=`vercel.ai.gateway.error.${kae}`,PH=Symbol.for(rit),oit=de({modelId:X()}),DH,$H,Cae=class extends($H=Is,DH=PH,$H){constructor({message:e="Model not found",statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[DH]=!0,this.name=kae,this.type="model_not_found",this.modelId=n}static isInstance(e){return Is.hasMarker(e)&&PH in e}},Eae="GatewayInternalServerError",iit=`vercel.ai.gateway.error.${Eae}`,LH=Symbol.for(iit),jH,zH,BH=class extends(zH=Is,jH=LH,zH){constructor({message:e="Internal server error",statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[jH]=!0,this.name=Eae,this.type="internal_server_error"}static isInstance(e){return Is.hasMarker(e)&&LH in e}},Tae="GatewayResponseError",sit=`vercel.ai.gateway.error.${Tae}`,VH=Symbol.for(sit),FH,HH,ait=class extends(HH=Is,FH=VH,HH){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:n,validationError:r,cause:o}={}){super({message:e,statusCode:t,cause:o}),this[FH]=!0,this.name=Tae,this.type="response_error",this.response=n,this.validationError=r}static isInstance(e){return Is.hasMarker(e)&&VH in e}};function UH({response:e,statusCode:t,defaultMessage:n="Gateway request failed",cause:r,authMethod:o}){const i=lit.safeParse(e);if(!i.success)return new ait({message:`Invalid error response format: ${n}`,statusCode:t,response:e,validationError:i.error,cause:r});const s=i.data,a=s.error.type,l=s.error.message;switch(a){case"authentication_error":return WE.createContextualError({apiKeyProvided:o==="api-key",oidcTokenProvided:o==="oidc",statusCode:t,cause:r});case"invalid_request_error":return new eit({message:l,statusCode:t,cause:r});case"rate_limit_exceeded":return new nit({message:l,statusCode:t,cause:r});case"model_not_found":{const c=oit.safeParse(s.error.param);return new Cae({message:l,statusCode:t,modelId:c.success?c.data.modelId:void 0,cause:r})}case"internal_server_error":return new BH({message:l,statusCode:t,cause:r});default:return new BH({message:l,statusCode:t,cause:r})}}var lit=de({error:de({message:X(),type:X().nullish(),param:Qt().nullish(),code:Nt([X(),Jt()]).nullish()})});function Nb(e,t){var n;return Is.isInstance(e)?e:Jn.isInstance(e)?UH({response:cit(e),statusCode:(n=e.statusCode)!=null?n:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):UH({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function cit(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var _ae="ai-gateway-auth-method";function Jk(e){const t=uit.safeParse(e[_ae]);return t.success?t.data:void 0}var uit=Nt([Me("api-key"),Me("oidc")]),dit=class{constructor(e){this.config=e}async getAvailableModels(){try{const{value:e}=await Pot({url:`${this.config.baseURL}/config`,headers:await Vf(this.config.headers()),successfulResponseHandler:t$(mit),failedResponseHandler:Yk({errorSchema:Gp(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw Nb(e)}}},fit=de({specificationVersion:Me("v2"),provider:X(),modelId:X()}),hit=de({input:X(),output:X()}),pit=de({id:X(),name:X(),description:X().nullish(),pricing:hit.nullish(),specification:fit}),mit=de({models:vt(pit)}),git=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){const{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,o=await Vf(this.config.headers());try{const{responseHeaders:i,value:s,rawValue:a}=await oO({url:this.getUrl(),headers:nO(o,e.headers,this.getModelConfigHeaders(this.modelId,!1),await Vf(this.config.o11yHeaders)),body:t,successfulResponseHandler:t$(Gp()),failedResponseHandler:Yk({errorSchema:Gp(),errorToMessage:l=>l}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...s,request:{body:t},response:{headers:i,body:a},warnings:n}}catch(i){throw Nb(i,Jk(o))}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,o=await Vf(this.config.headers());try{const{value:i,responseHeaders:s}=await oO({url:this.getUrl(),headers:nO(o,e.headers,this.getModelConfigHeaders(this.modelId,!0),await Vf(this.config.o11yHeaders)),body:t,successfulResponseHandler:Wot(Gp()),failedResponseHandler:Yk({errorSchema:Gp(),errorToMessage:a=>a}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:i.pipeThrough(new TransformStream({start(a){n.length>0&&a.enqueue({type:"stream-start",warnings:n})},transform(a,l){if(a.success){const c=a.value;if(c.type==="raw"&&!e.includeRawChunks)return;c.type==="response-metadata"&&c.timestamp&&typeof c.timestamp=="string"&&(c.timestamp=new Date(c.timestamp)),l.enqueue(c)}else l.error(a.error)}})),request:{body:t},response:{headers:s}}}catch(i){throw Nb(i,Jk(o))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(const t of e.prompt)for(const n of t.content)if(this.isFilePart(n)){const r=n;if(r.data instanceof Uint8Array){const o=Uint8Array.from(r.data),i=Buffer.from(o).toString("base64");r.data=new URL(`data:${r.mediaType||"application/octet-stream"};base64,${i}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},yit=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){var o;const i=await Vf(this.config.headers());try{const{responseHeaders:s,value:a,rawValue:l}=await oO({url:this.getUrl(),headers:nO(i,t??{},this.getModelConfigHeaders(),await Vf(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...r??{}},successfulResponseHandler:t$(bit),failedResponseHandler:Yk({errorSchema:Gp(),errorToMessage:c=>c}),...n&&{abortSignal:n},fetch:this.config.fetch});return{embeddings:a.embeddings,usage:(o=a.usage)!=null?o:void 0,providerMetadata:a.providerMetadata,response:{headers:s,body:l}}}catch(s){throw Nb(s,Jk(i))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},bit=de({embeddings:vt(vt(Jt())),usage:de({tokens:Jt()}).nullish(),providerMetadata:Qc(X(),Qc(X(),Qt())).optional()});async function vit(){var e,t;const n=(t=(e=Aae().headers)==null?void 0:e["x-vercel-oidc-token"])!=null?t:Yot.VERCEL_OIDC_TOKEN;if(!n)throw new WE({message:"OIDC token not available",statusCode:401});return n}async function wit(){var e;return(e=Aae().headers)==null?void 0:e["x-vercel-id"]}var xit=Symbol.for("@vercel/request-context");function Aae(){var e,t,n;return(n=(t=(e=globalThis[xit])==null?void 0:e.get)==null?void 0:t.call(e))!=null?n:{}}var Sit="0.0.1";function kit(e={}){var t,n;let r=null,o=null;const i=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5;let s=0;const a=(n=Kot(e.baseURL))!=null?n:"https://ai-gateway.vercel.sh/v1/ai",l=async()=>{const m=await Eit(e);if(m)return{Authorization:`Bearer ${m.token}`,"ai-gateway-protocol-version":Sit,[_ae]:m.authMethod,...e.headers};throw WE.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},c=()=>{const m=Ax({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),y=Ax({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),b=Ax({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const x=await wit();return{...m&&{"ai-o11y-deployment-id":m},...y&&{"ai-o11y-environment":y},...b&&{"ai-o11y-region":b},...x&&{"ai-o11y-request-id":x}}}},u=m=>new git(m,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),f=async()=>{var m,y,b;const x=(b=(y=(m=e._internal)==null?void 0:m.currentDate)==null?void 0:y.call(m).getTime())!=null?b:Date.now();return(!r||x-s>i)&&(s=x,r=new dit({baseURL:a,headers:l,fetch:e.fetch}).getAvailableModels().then(S=>(o=S,S)).catch(async S=>{throw Nb(S,Jk(await l()))})),o?Promise.resolve(o):r},p=function(m){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return u(m)};return p.getAvailableModels=f,p.imageModel=m=>{throw new YBe({modelId:m,modelType:"imageModel"})},p.languageModel=u,p.textEmbeddingModel=m=>new yit(m,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),p}var Cit=kit();async function Eit(e){const t=Ax({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await vit(),authMethod:"oidc"}}catch{return null}}var Tit=Object.defineProperty,_it=(e,t)=>{for(var n in t)Tit(e,n,{get:t[n],enumerable:!0})},Mae="AI_NoOutputSpecifiedError",Rae=`vercel.ai.error.${Mae}`,Ait=Symbol.for(Rae),Nae,Iae=class extends xt{constructor({message:e="No output specified."}={}){super({name:Mae,message:e}),this[Nae]=!0}static isInstance(e){return xt.hasMarker(e,Rae)}};Nae=Ait;var Oae="AI_InvalidArgumentError",Pae=`vercel.ai.error.${Oae}`,Mit=Symbol.for(Pae),Dae,Rl=class extends xt{constructor({parameter:e,value:t,message:n}){super({name:Oae,message:`Invalid argument for parameter ${e}: ${n}`}),this[Dae]=!0,this.parameter=e,this.value=t}static isInstance(e){return xt.hasMarker(e,Pae)}};Dae=Mit;var $ae="AI_InvalidToolInputError",Lae=`vercel.ai.error.${$ae}`,Rit=Symbol.for(Lae),jae,zae=class extends xt{constructor({toolInput:e,toolName:t,cause:n,message:r=`Invalid input for tool ${t}: ${fg(n)}`}){super({name:$ae,message:r,cause:n}),this[jae]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return xt.hasMarker(e,Lae)}};jae=Rit;var Bae="AI_NoObjectGeneratedError",Vae=`vercel.ai.error.${Bae}`,Nit=Symbol.for(Vae),Fae,GH=class extends xt{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:o,finishReason:i}){super({name:Bae,message:e,cause:t}),this[Fae]=!0,this.text=n,this.response=r,this.usage=o,this.finishReason=i}static isInstance(e){return xt.hasMarker(e,Vae)}};Fae=Nit;var Hae="AI_NoOutputGeneratedError",Uae=`vercel.ai.error.${Hae}`,Iit=Symbol.for(Uae),Gae,Oit=class extends xt{constructor({message:e="No output generated.",cause:t}={}){super({name:Hae,message:e,cause:t}),this[Gae]=!0}static isInstance(e){return xt.hasMarker(e,Uae)}};Gae=Iit;var qae="AI_NoSuchToolError",Zae=`vercel.ai.error.${qae}`,Pit=Symbol.for(Zae),Wae,iO=class extends xt{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:qae,message:n}),this[Wae]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return xt.hasMarker(e,Zae)}};Wae=Pit;var Kae="AI_ToolCallRepairError",Yae=`vercel.ai.error.${Kae}`,Dit=Symbol.for(Yae),Jae,$it=class extends xt{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${fg(e)}`}){super({name:Kae,message:n,cause:e}),this[Jae]=!0,this.originalError=t}static isInstance(e){return xt.hasMarker(e,Yae)}};Jae=Dit;var Lit=class extends xt{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},Xae="AI_InvalidMessageRoleError",Qae=`vercel.ai.error.${Xae}`,jit=Symbol.for(Qae),ele,zit=class extends xt{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Xae,message:t}),this[ele]=!0,this.role=e}static isInstance(e){return xt.hasMarker(e,Qae)}};ele=jit;var tle="AI_DownloadError",nle=`vercel.ai.error.${tle}`,Bit=Symbol.for(nle),rle,AM=class extends xt{constructor({url:e,statusCode:t,statusText:n,cause:r,message:o=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:tle,message:o,cause:r}),this[rle]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return xt.hasMarker(e,nle)}};rle=Bit;var ole="AI_RetryError",ile=`vercel.ai.error.${ole}`,Vit=Symbol.for(ile),sle,qH=class extends xt{constructor({message:e,reason:t,errors:n}){super({name:ole,message:e}),this[sle]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return xt.hasMarker(e,ile)}};sle=Vit;function Xk(e){if(typeof e!="string"){if(e.specificationVersion!=="v2")throw new Lit({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return Fit().languageModel(e)}function Fit(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:Cit}var Hit=[{mediaType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mediaType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mediaType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mediaType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mediaType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],Uit=e=>{const t=typeof e=="string"?dae(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function Git(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?Uit(e):e}function qit({data:e,signatures:t}){const n=Git(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((o,i)=>n[i]===o))return r.mediaType}async function Zit({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new AM({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mediaType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw AM.isInstance(r)?r:new AM({url:n,cause:r})}}function Wit(e){try{const[t,n]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mediaType:void 0,base64Content:void 0}}}var ale=Nt([X(),Ad(Uint8Array),Ad(ArrayBuffer),Tee(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function lle(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol==="data:"){const{mediaType:t,base64Content:n}=Wit(e.toString());if(t==null||n==null)throw new xt({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:n,mediaType:t}}return{data:e,mediaType:void 0}}function Kit(e){return typeof e=="string"?e:e instanceof ArrayBuffer?tO(new Uint8Array(e)):tO(e)}async function cle({prompt:e,supportedUrls:t,downloadImplementation:n=Zit}){const r=await Jit(e.messages,n,t);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(o=>Yit({message:o,downloadedAssets:r}))]}function Yit({message:e,downloadedAssets:t}){const n=e.role;switch(n){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(r=>Xit(r,t)).filter(r=>r.type!=="text"||r.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(r=>r.type!=="text"||r.text!=="").map(r=>{const o=r.providerOptions;switch(r.type){case"file":{const{data:i,mediaType:s}=lle(r.data);return{type:"file",data:i,filename:r.filename,mediaType:s??r.mediaType,providerOptions:o}}case"reasoning":return{type:"reasoning",text:r.text,providerOptions:o};case"text":return{type:"text",text:r.text,providerOptions:o};case"tool-call":return{type:"tool-call",toolCallId:r.toolCallId,toolName:r.toolName,input:r.input,providerExecuted:r.providerExecuted,providerOptions:o};case"tool-result":return{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:o}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(r=>({type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:r.providerOptions})),providerOptions:e.providerOptions};default:{const r=n;throw new zit({role:r})}}}async function Jit(e,t,n){const r=e.filter(i=>i.role==="user").map(i=>i.content).filter(i=>Array.isArray(i)).flat().filter(i=>i.type==="image"||i.type==="file").map(i=>{var s;const a=(s=i.mediaType)!=null?s:i.type==="image"?"image/*":void 0;let l=i.type==="image"?i.image:i.data;if(typeof l=="string")try{l=new URL(l)}catch{}return{mediaType:a,data:l}}).filter(i=>i.data instanceof URL&&i.mediaType!=null&&!cot({url:i.data.toString(),mediaType:i.mediaType,supportedUrls:n})).map(i=>i.data),o=await Promise.all(r.map(async i=>({url:i,data:await t({url:i})})));return Object.fromEntries(o.map(({url:i,data:s})=>[i.toString(),s]))}function Xit(e,t){var n;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let r;const o=e.type;switch(o){case"image":r=e.image;break;case"file":r=e.data;break;default:throw new Error(`Unsupported part type: ${o}`)}const{data:i,mediaType:s}=lle(r);let a=s??e.mediaType,l=i;if(l instanceof URL){const c=t[l.toString()];c&&(l=c.data,a??(a=c.mediaType))}switch(o){case"image":return(l instanceof Uint8Array||typeof l=="string")&&(a=(n=qit({data:l,signatures:Hit}))!=null?n:a),{type:"file",mediaType:a??"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":{if(a==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:a,filename:e.filename,data:l,providerOptions:e.providerOptions}}}}function sO({maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:o,frequencyPenalty:i,seed:s,stopSequences:a}){if(e!=null){if(!Number.isInteger(e))throw new Rl({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new Rl({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Rl({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Rl({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Rl({parameter:"topK",value:r,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new Rl({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Rl({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Rl({parameter:"seed",value:s,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:o,frequencyPenalty:i,stopSequences:a,seed:s}}function Qit(e){return e!=null&&Object.keys(e).length>0}function ule({tools:e,toolChoice:t,activeTools:n}){return Qit(e)?{tools:(n!=null?Object.entries(e).filter(([o])=>n.includes(o)):Object.entries(e)).map(([o,i])=>{const s=i.type;switch(s){case void 0:case"dynamic":case"function":return{type:"function",name:o,description:i.description,inputSchema:ZE(i.inputSchema).jsonSchema,providerOptions:i.providerOptions};case"provider-defined":return{type:"provider-defined",name:o,id:i.id,args:i.args};default:{const a=s;throw new Error(`Unsupported tool type: ${a}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var Ib=Eee(()=>Nt([xee(),X(),Jt(),Kt(),Qc(X(),Ib),vt(Ib)])),Yt=Qc(X(),Qc(X(),Ib)),dle=de({type:Me("text"),text:X(),providerOptions:Yt.optional()}),est=de({type:Me("image"),image:Nt([ale,Ad(URL)]),mediaType:X().optional(),providerOptions:Yt.optional()}),fle=de({type:Me("file"),data:Nt([ale,Ad(URL)]),filename:X().optional(),mediaType:X(),providerOptions:Yt.optional()}),tst=de({type:Me("reasoning"),text:X(),providerOptions:Yt.optional()}),nst=de({type:Me("tool-call"),toolCallId:X(),toolName:X(),input:Qt(),providerOptions:Yt.optional(),providerExecuted:Kt().optional()}),rst=U9e("type",[de({type:Me("text"),value:X()}),de({type:Me("json"),value:Ib}),de({type:Me("error-text"),value:X()}),de({type:Me("error-json"),value:Ib}),de({type:Me("content"),value:vt(Nt([de({type:Me("text"),text:X()}),de({type:Me("media"),data:X(),mediaType:X()})]))})]),hle=de({type:Me("tool-result"),toolCallId:X(),toolName:X(),output:rst,providerOptions:Yt.optional()}),ost=de({role:Me("system"),content:X(),providerOptions:Yt.optional()}),ist=de({role:Me("user"),content:Nt([X(),vt(Nt([dle,est,fle]))]),providerOptions:Yt.optional()}),sst=de({role:Me("assistant"),content:Nt([X(),vt(Nt([dle,fle,tst,nst,hle]))]),providerOptions:Yt.optional()}),ast=de({role:Me("tool"),content:vt(hle),providerOptions:Yt.optional()}),lst=Nt([ost,ist,sst,ast]);async function ple(e){if(e.prompt==null&&e.messages==null)throw new Ep({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Ep({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Ep({prompt:e,message:"system must be a string"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new Ep({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new Ep({prompt:e,message:"messages must not be empty"});const n=await Nv({value:t,schema:vt(lst)});if(!n.success)throw new Ep({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:n.error});return{messages:t,system:e.system}}function mle(e){return WE.isInstance(e)||Cae.isInstance(e)?new xt({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}function zm({operationId:e,telemetry:t}){return{"operation.name":`${e}${t?.functionId!=null?` ${t.functionId}`:""}`,"resource.name":t?.functionId,"ai.operationId":e,"ai.telemetry.functionId":t?.functionId}}function gle({model:e,settings:t,telemetry:n,headers:r}){var o;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,a])=>(i[`ai.settings.${s}`]=a,i),{}),...Object.entries((o=n?.metadata)!=null?o:{}).reduce((i,[s,a])=>(i[`ai.telemetry.metadata.${s}`]=a,i),{}),...Object.entries(r??{}).reduce((i,[s,a])=>(a!==void 0&&(i[`ai.request.headers.${s}`]=a),i),{})}}var cst={startSpan(){return qw},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(qw);if(typeof n=="function")return n(qw);if(typeof r=="function")return r(qw)}},qw={spanContext(){return ust},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},ust={traceId:"",spanId:"",traceFlags:0};function yle({isEnabled:e=!1,tracer:t}={}){return e?t||Bee.getTracer("ai"):cst}function Bm({name:e,tracer:t,attributes:n,fn:r,endWhenDone:o=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return o&&i.end(),s}catch(s){try{n$(i,s)}finally{i.end()}throw s}})}function n$(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Im.ERROR,message:t.message})):e.setStatus({code:Im.ERROR})}function ua({telemetry:e,attributes:t}){return e?.isEnabled!==!0?{}:Object.entries(t).reduce((n,[r,o])=>{if(o==null)return n;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if(e?.recordInputs===!1)return n;const i=o.input();return i==null?n:{...n,[r]:i}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if(e?.recordOutputs===!1)return n;const i=o.output();return i==null?n:{...n,[r]:i}}return{...n,[r]:o}},{})}function ble(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(n=>n.type==="file"?{...n,data:n.data instanceof Uint8Array?Kit(n.data):n.data}:n)})))}function vle(e,t){return{inputTokens:Cy(e.inputTokens,t.inputTokens),outputTokens:Cy(e.outputTokens,t.outputTokens),totalTokens:Cy(e.totalTokens,t.totalTokens),reasoningTokens:Cy(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:Cy(e.cachedInputTokens,t.cachedInputTokens)}}function Cy(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function aO(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function dst({error:e,exponentialBackoffDelay:t}){const n=e.responseHeaders;if(!n)return t;let r;const o=n["retry-after-ms"];if(o){const s=parseFloat(o);Number.isNaN(s)||(r=s)}const i=n["retry-after"];if(i&&r===void 0){const s=parseFloat(i);Number.isNaN(s)?r=Date.parse(i)-Date.now():r=s*1e3}return r!=null&&!Number.isNaN(r)&&0<=r&&(r<60*1e3||r<t)?r:t}var fst=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2,abortSignal:r}={})=>async o=>wle(o,{maxRetries:e,delayInMs:t,backoffFactor:n,abortSignal:r});async function wle(e,{maxRetries:t,delayInMs:n,backoffFactor:r,abortSignal:o},i=[]){try{return await e()}catch(s){if(uae(s)||t===0)throw s;const a=QD(s),l=[...i,s],c=l.length;if(c>t)throw new qH({message:`Failed after ${c} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:l});if(s instanceof Error&&Jn.isInstance(s)&&s.isRetryable===!0&&c<=t)return await aot(dst({error:s,exponentialBackoffDelay:n}),{abortSignal:o}),wle(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r,abortSignal:o},l);throw c===1?s:new qH({message:`Failed after ${c} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:l})}}function xle({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new Rl({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Rl({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const n=e??2;return{maxRetries:n,retry:fst({maxRetries:n,abortSignal:t})}}function ZH(e){const t=e.filter(n=>n.type==="text");if(t.length!==0)return t.map(n=>n.text).join("")}var Sle=class{constructor({data:e,mediaType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=tO(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=dae(this.base64Data)),this.uint8ArrayData}},hst=class extends Sle{constructor(e){super(e),this.type="file"}};async function kle({toolCall:e,tools:t,repairToolCall:n,system:r,messages:o}){try{if(t==null)throw new iO({toolName:e.toolName});try{return await WH({toolCall:e,tools:t})}catch(i){if(n==null||!(iO.isInstance(i)||zae.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,inputSchema:({toolName:a})=>{const{inputSchema:l}=t[a];return ZE(l).jsonSchema},system:r,messages:o,error:i})}catch(a){throw new $it({cause:a,originalError:i})}if(s==null)throw i;return await WH({toolCall:s,tools:t})}}catch(i){return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,dynamic:!0,invalid:!0,error:i}}}async function WH({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new iO({toolName:e.toolName,availableTools:Object.keys(t)});const o=ZE(r.inputSchema),i=e.input.trim()===""?await Nv({value:{},schema:o}):await Kk({text:e.input,schema:o});if(i.success===!1)throw new zae({toolName:n,toolInput:e.input,cause:i.error});return r.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:n,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var Cle=class{constructor({content:e,finishReason:t,usage:n,warnings:r,request:o,response:i,providerMetadata:s}){this.content=e,this.finishReason=t,this.usage=n,this.warnings=r,this.request=o,this.response=i,this.providerMetadata=s}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!1)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic===!1)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function Ele(e){return({steps:t})=>t.length===e}async function Tle({stopConditions:e,steps:t}){return(await Promise.all(e.map(n=>n({steps:t})))).some(n=>n)}function MM({output:e,tool:t,errorMode:n}){return n==="text"?{type:"error-text",value:fg(e)}:n==="json"?{type:"error-json",value:KH(e)}:t?.toModelOutput?t.toModelOutput(e):typeof e=="string"?{type:"text",value:e}:{type:"json",value:KH(e)}}function KH(e){return e===void 0?null:e}function lO({content:e,tools:t}){const n=[],r=e.filter(i=>i.type!=="source").filter(i=>(i.type!=="tool-result"||i.providerExecuted)&&(i.type!=="tool-error"||i.providerExecuted)).filter(i=>i.type!=="text"||i.text.length>0).map(i=>{switch(i.type){case"text":return{type:"text",text:i.text,providerOptions:i.providerMetadata};case"reasoning":return{type:"reasoning",text:i.text,providerOptions:i.providerMetadata};case"file":return{type:"file",data:i.file.base64,mediaType:i.file.mediaType,providerOptions:i.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,providerExecuted:i.providerExecuted,providerOptions:i.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:MM({tool:t?.[i.toolName],output:i.output,errorMode:"none"}),providerExecuted:!0,providerOptions:i.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:MM({tool:t?.[i.toolName],output:i.error,errorMode:"json"}),providerOptions:i.providerMetadata}}});r.length>0&&n.push({role:"assistant",content:r});const o=e.filter(i=>i.type==="tool-result"||i.type==="tool-error").filter(i=>!i.providerExecuted).map(i=>({type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:MM({tool:t?.[i.toolName],output:i.type==="tool-result"?i.output:i.error,errorMode:i.type==="tool-error"?"text":"none"})}));return o.length>0&&n.push({role:"tool",content:o}),n}var pst=Rv({prefix:"aitxt",size:24});async function mst({model:e,tools:t,toolChoice:n,system:r,prompt:o,messages:i,maxRetries:s,abortSignal:a,headers:l,stopWhen:c=Ele(1),experimental_output:u,experimental_telemetry:f,providerOptions:p,experimental_activeTools:m,activeTools:y=m,experimental_prepareStep:b,prepareStep:x=b,experimental_repairToolCall:S,experimental_context:E,_internal:{generateId:T=pst,currentDate:A=()=>new Date}={},onStepFinish:M,...R}){const O=Xk(e),I=aO(c),{maxRetries:L,retry:$}=xle({maxRetries:s,abortSignal:a}),B=sO(R),H=gle({model:O,telemetry:f,headers:l,settings:{...B,maxRetries:L}}),V=await ple({system:r,prompt:o,messages:i}),W=yle(f);try{return await Bm({name:"ai.generateText",attributes:ua({telemetry:f,attributes:{...zm({operationId:"ai.generateText",telemetry:f}),...H,"ai.model.provider":O.provider,"ai.model.id":O.modelId,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:o,messages:i})}}}),tracer:W,fn:async K=>{var z,G,F,Z,N,U;const ee=sO(R);let D,ae=[],oe=[];const he=[],le=[];do{const Oe=[...V.messages,...he],je=await x?.({model:O,steps:le,stepNumber:le.length,messages:Oe}),ye=await cle({prompt:{system:(z=je?.system)!=null?z:V.system,messages:(G=je?.messages)!=null?G:Oe},supportedUrls:await O.supportedUrls}),Ie=Xk((F=je?.model)!=null?F:O),{toolChoice:Le,tools:$e}=ule({tools:t,toolChoice:(Z=je?.toolChoice)!=null?Z:n,activeTools:(N=je?.activeTools)!=null?N:y});D=await $(()=>{var Ze;return Bm({name:"ai.generateText.doGenerate",attributes:ua({telemetry:f,attributes:{...zm({operationId:"ai.generateText.doGenerate",telemetry:f}),...H,"ai.model.provider":Ie.provider,"ai.model.id":Ie.modelId,"ai.prompt.messages":{input:()=>ble(ye)},"ai.prompt.tools":{input:()=>$e?.map(rt=>JSON.stringify(rt))},"ai.prompt.toolChoice":{input:()=>Le!=null?JSON.stringify(Le):void 0},"gen_ai.system":Ie.provider,"gen_ai.request.model":Ie.modelId,"gen_ai.request.frequency_penalty":R.frequencyPenalty,"gen_ai.request.max_tokens":R.maxOutputTokens,"gen_ai.request.presence_penalty":R.presencePenalty,"gen_ai.request.stop_sequences":R.stopSequences,"gen_ai.request.temperature":(Ze=R.temperature)!=null?Ze:void 0,"gen_ai.request.top_k":R.topK,"gen_ai.request.top_p":R.topP}}),tracer:W,fn:async rt=>{var Bn,So,Sr,Ir,Ft,fe,Se,Be;const De=await Ie.doGenerate({...ee,tools:$e,toolChoice:Le,responseFormat:u?.responseFormat,prompt:ye,providerOptions:p,abortSignal:a,headers:l}),et={id:(So=(Bn=De.response)==null?void 0:Bn.id)!=null?So:T(),timestamp:(Ir=(Sr=De.response)==null?void 0:Sr.timestamp)!=null?Ir:A(),modelId:(fe=(Ft=De.response)==null?void 0:Ft.modelId)!=null?fe:Ie.modelId,headers:(Se=De.response)==null?void 0:Se.headers,body:(Be=De.response)==null?void 0:Be.body};return rt.setAttributes(ua({telemetry:f,attributes:{"ai.response.finishReason":De.finishReason,"ai.response.text":{output:()=>ZH(De.content)},"ai.response.toolCalls":{output:()=>{const an=YH(De.content);return an==null?void 0:JSON.stringify(an)}},"ai.response.id":et.id,"ai.response.model":et.modelId,"ai.response.timestamp":et.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(De.providerMetadata),"ai.usage.promptTokens":De.usage.inputTokens,"ai.usage.completionTokens":De.usage.outputTokens,"gen_ai.response.finish_reasons":[De.finishReason],"gen_ai.response.id":et.id,"gen_ai.response.model":et.modelId,"gen_ai.usage.input_tokens":De.usage.inputTokens,"gen_ai.usage.output_tokens":De.usage.outputTokens}})),{...De,response:et}}})});const me=await Promise.all(D.content.filter(Ze=>Ze.type==="tool-call").map(Ze=>kle({toolCall:Ze,tools:t,repairToolCall:S,system:r,messages:Oe})));for(const Ze of me){if(Ze.invalid)continue;const rt=t[Ze.toolName];rt?.onInputAvailable!=null&&await rt.onInputAvailable({input:Ze.input,toolCallId:Ze.toolCallId,messages:Oe,abortSignal:a,experimental_context:E})}const Re=me.filter(Ze=>Ze.invalid&&Ze.dynamic);oe=[];for(const Ze of Re)oe.push({type:"tool-error",toolCallId:Ze.toolCallId,toolName:Ze.toolName,input:Ze.input,error:QD(Ze.error),dynamic:!0});ae=me.filter(Ze=>!Ze.providerExecuted),t!=null&&oe.push(...await gst({toolCalls:ae.filter(Ze=>!Ze.invalid),tools:t,tracer:W,telemetry:f,messages:Oe,abortSignal:a,experimental_context:E}));const we=bst({content:D.content,toolCalls:me,toolOutputs:oe});he.push(...lO({content:we,tools:t}));const Pe=new Cle({content:we,finishReason:D.finishReason,usage:D.usage,warnings:D.warnings,providerMetadata:D.providerMetadata,request:(U=D.request)!=null?U:{},response:{...D.response,messages:structuredClone(he)}});le.push(Pe),await M?.(Pe)}while(ae.length>0&&oe.length===ae.length&&!await Tle({stopConditions:I,steps:le}));K.setAttributes(ua({telemetry:f,attributes:{"ai.response.finishReason":D.finishReason,"ai.response.text":{output:()=>ZH(D.content)},"ai.response.toolCalls":{output:()=>{const Oe=YH(D.content);return Oe==null?void 0:JSON.stringify(Oe)}},"ai.response.providerMetadata":JSON.stringify(D.providerMetadata),"ai.usage.promptTokens":D.usage.inputTokens,"ai.usage.completionTokens":D.usage.outputTokens}}));const ge=le[le.length-1];return new yst({steps:le,resolvedOutput:await u?.parseOutput({text:ge.text},{response:ge.response,usage:ge.usage,finishReason:ge.finishReason})})}})}catch(K){throw mle(K)}}async function gst({toolCalls:e,tools:t,tracer:n,telemetry:r,messages:o,abortSignal:i,experimental_context:s}){return(await Promise.all(e.map(async({toolCallId:l,toolName:c,input:u})=>{const f=t[c];if(f?.execute!=null)return Bm({name:"ai.toolCall",attributes:ua({telemetry:r,attributes:{...zm({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":c,"ai.toolCall.id":l,"ai.toolCall.args":{output:()=>JSON.stringify(u)}}}),tracer:n,fn:async p=>{try{const m=fae({execute:f.execute.bind(f),input:u,options:{toolCallId:l,messages:o,abortSignal:i,experimental_context:s}});let y;for await(const b of m)b.type==="final"&&(y=b.output);try{p.setAttributes(ua({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(y)}}}))}catch{}return{type:"tool-result",toolCallId:l,toolName:c,input:u,output:y,dynamic:f.type==="dynamic"}}catch(m){return n$(p,m),{type:"tool-error",toolCallId:l,toolName:c,input:u,error:m,dynamic:f.type==="dynamic"}}}})}))).filter(l=>l!=null)}var yst=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>vle(e,t.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(this.resolvedOutput==null)throw new Iae;return this.resolvedOutput}};function YH(e){const t=e.filter(n=>n.type==="tool-call");if(t.length!==0)return t.map(n=>({toolCallId:n.toolCallId,toolName:n.toolName,input:n.input}))}function bst({content:e,toolCalls:t,toolOutputs:n}){return[...e.map(r=>{switch(r.type){case"text":case"reasoning":case"source":return r;case"file":return{type:"file",file:new Sle(r)};case"tool-call":return t.find(o=>o.toolCallId===r.toolCallId);case"tool-result":{const o=t.find(i=>i.toolCallId===r.toolCallId);if(o==null)throw new Error(`Tool call ${r.toolCallId} not found.`);return r.isError?{type:"tool-error",toolCallId:r.toolCallId,toolName:r.toolName,input:o.input,error:r.result,providerExecuted:!0,dynamic:o.dynamic}:{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,input:o.input,output:r.result,providerExecuted:!0,dynamic:o.dynamic}}}}),...n]}function KE(e,t){const n=new Headers(e??{});for(const[r,o]of Object.entries(t))n.has(r)||n.set(r,o);return n}function vst({status:e,statusText:t,headers:n,textStream:r}){return new Response(r.pipeThrough(new TextEncoderStream),{status:e??200,statusText:t,headers:KE(n,{"content-type":"text/plain; charset=utf-8"})})}function _le({response:e,status:t,statusText:n,headers:r,stream:o}){e.writeHead(t??200,n,r);const i=o.getReader();(async()=>{try{for(;;){const{done:a,value:l}=await i.read();if(a)break;e.write(l)}}catch(a){throw a}finally{e.end()}})()}function wst({response:e,status:t,statusText:n,headers:r,textStream:o}){_le({response:e,status:t,statusText:n,headers:Object.fromEntries(KE(r,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:o.pipeThrough(new TextEncoderStream)})}var Ale=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}},Mle={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"};function xst({status:e,statusText:t,headers:n,stream:r,consumeSseStream:o}){let i=r.pipeThrough(new Ale);if(o){const[s,a]=i.tee();i=s,o({stream:a})}return new Response(i.pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:KE(n,Mle)})}function Sst({originalMessages:e,responseMessageId:t}){if(e==null)return;const n=e[e.length-1];return n?.role==="assistant"?n.id:typeof t=="function"?t():t}Nt([Vn({type:Me("text-start"),id:X(),providerMetadata:Yt.optional()}),Vn({type:Me("text-delta"),id:X(),delta:X(),providerMetadata:Yt.optional()}),Vn({type:Me("text-end"),id:X(),providerMetadata:Yt.optional()}),Vn({type:Me("error"),errorText:X()}),Vn({type:Me("tool-input-start"),toolCallId:X(),toolName:X(),providerExecuted:Kt().optional(),dynamic:Kt().optional()}),Vn({type:Me("tool-input-delta"),toolCallId:X(),inputTextDelta:X()}),Vn({type:Me("tool-input-available"),toolCallId:X(),toolName:X(),input:Qt(),providerExecuted:Kt().optional(),providerMetadata:Yt.optional(),dynamic:Kt().optional()}),Vn({type:Me("tool-input-error"),toolCallId:X(),toolName:X(),input:Qt(),providerExecuted:Kt().optional(),providerMetadata:Yt.optional(),dynamic:Kt().optional(),errorText:X()}),Vn({type:Me("tool-output-available"),toolCallId:X(),output:Qt(),providerExecuted:Kt().optional(),dynamic:Kt().optional(),preliminary:Kt().optional()}),Vn({type:Me("tool-output-error"),toolCallId:X(),errorText:X(),providerExecuted:Kt().optional(),dynamic:Kt().optional()}),Vn({type:Me("reasoning"),text:X(),providerMetadata:Yt.optional()}),Vn({type:Me("reasoning-start"),id:X(),providerMetadata:Yt.optional()}),Vn({type:Me("reasoning-delta"),id:X(),delta:X(),providerMetadata:Yt.optional()}),Vn({type:Me("reasoning-end"),id:X(),providerMetadata:Yt.optional()}),Vn({type:Me("reasoning-part-finish")}),Vn({type:Me("source-url"),sourceId:X(),url:X(),title:X().optional(),providerMetadata:Yt.optional()}),Vn({type:Me("source-document"),sourceId:X(),mediaType:X(),title:X(),filename:X().optional(),providerMetadata:Yt.optional()}),Vn({type:Me("file"),url:X(),mediaType:X(),providerMetadata:Yt.optional()}),Vn({type:X().startsWith("data-"),id:X().optional(),data:Qt(),transient:Kt().optional()}),Vn({type:Me("start-step")}),Vn({type:Me("finish-step")}),Vn({type:Me("start"),messageId:X().optional(),messageMetadata:Qt().optional()}),Vn({type:Me("finish"),messageMetadata:Qt().optional()}),Vn({type:Me("abort")}),Vn({type:Me("message-metadata"),messageMetadata:Qt()})]);function kst(e){return e.type.startsWith("data-")}function Rle(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const o=t[r];if(o===void 0)continue;const i=r in e?e[r]:void 0,s=o!==null&&typeof o=="object"&&!Array.isArray(o)&&!(o instanceof Date)&&!(o instanceof RegExp),a=i!=null&&typeof i=="object"&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp);s&&a?n[r]=Rle(i,o):n[r]=o}return n}function Cst(e){const t=["ROOT"];let n=-1,r=null;function o(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function s(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":o(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(r,l+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l)):n=l;break}}}let a=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}async function Nle(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Kk({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Kk({text:Cst(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}function RM(e){return e.type.startsWith("tool-")}function JH(e){return e.type.split("-").slice(1).join("-")}function Est({lastMessage:e,messageId:t}){return{message:e?.role==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Tst({stream:e,messageMetadataSchema:t,dataPartSchemas:n,runUpdateMessageJob:r,onError:o,onToolCall:i,onData:s}){return e.pipeThrough(new TransformStream({async transform(a,l){await r(async({state:c,write:u})=>{var f,p,m,y;function b(A){const R=c.message.parts.filter(RM).find(O=>O.toolCallId===A);if(R==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return R}function x(A){const R=c.message.parts.filter(O=>O.type==="dynamic-tool").find(O=>O.toolCallId===A);if(R==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return R}function S(A){var M;const R=c.message.parts.find(L=>RM(L)&&L.toolCallId===A.toolCallId),O=A,I=R;R!=null?(R.state=A.state,I.input=O.input,I.output=O.output,I.errorText=O.errorText,I.rawInput=O.rawInput,I.preliminary=O.preliminary,I.providerExecuted=(M=O.providerExecuted)!=null?M:R.providerExecuted,O.providerMetadata!=null&&R.state==="input-available"&&(R.callProviderMetadata=O.providerMetadata)):c.message.parts.push({type:`tool-${A.toolName}`,toolCallId:A.toolCallId,state:A.state,input:O.input,output:O.output,rawInput:O.rawInput,errorText:O.errorText,providerExecuted:O.providerExecuted,preliminary:O.preliminary,...O.providerMetadata!=null?{callProviderMetadata:O.providerMetadata}:{}})}function E(A){var M;const R=c.message.parts.find(L=>L.type==="dynamic-tool"&&L.toolCallId===A.toolCallId),O=A,I=R;R!=null?(R.state=A.state,I.toolName=A.toolName,I.input=O.input,I.output=O.output,I.errorText=O.errorText,I.rawInput=(M=O.rawInput)!=null?M:I.rawInput,I.preliminary=O.preliminary,O.providerMetadata!=null&&R.state==="input-available"&&(R.callProviderMetadata=O.providerMetadata)):c.message.parts.push({type:"dynamic-tool",toolName:A.toolName,toolCallId:A.toolCallId,state:A.state,input:O.input,output:O.output,errorText:O.errorText,preliminary:O.preliminary,...O.providerMetadata!=null?{callProviderMetadata:O.providerMetadata}:{}})}async function T(A){if(A!=null){const M=c.message.metadata!=null?Rle(c.message.metadata,A):A;t!=null&&await xH({value:M,schema:t}),c.message.metadata=M}}switch(a.type){case"text-start":{const A={type:"text",text:"",providerMetadata:a.providerMetadata,state:"streaming"};c.activeTextParts[a.id]=A,c.message.parts.push(A),u();break}case"text-delta":{const A=c.activeTextParts[a.id];A.text+=a.delta,A.providerMetadata=(f=a.providerMetadata)!=null?f:A.providerMetadata,u();break}case"text-end":{const A=c.activeTextParts[a.id];A.state="done",A.providerMetadata=(p=a.providerMetadata)!=null?p:A.providerMetadata,delete c.activeTextParts[a.id],u();break}case"reasoning-start":{const A={type:"reasoning",text:"",providerMetadata:a.providerMetadata,state:"streaming"};c.activeReasoningParts[a.id]=A,c.message.parts.push(A),u();break}case"reasoning-delta":{const A=c.activeReasoningParts[a.id];A.text+=a.delta,A.providerMetadata=(m=a.providerMetadata)!=null?m:A.providerMetadata,u();break}case"reasoning-end":{const A=c.activeReasoningParts[a.id];A.providerMetadata=(y=a.providerMetadata)!=null?y:A.providerMetadata,A.state="done",delete c.activeReasoningParts[a.id],u();break}case"file":{c.message.parts.push({type:"file",mediaType:a.mediaType,url:a.url}),u();break}case"source-url":{c.message.parts.push({type:"source-url",sourceId:a.sourceId,url:a.url,title:a.title,providerMetadata:a.providerMetadata}),u();break}case"source-document":{c.message.parts.push({type:"source-document",sourceId:a.sourceId,mediaType:a.mediaType,title:a.title,filename:a.filename,providerMetadata:a.providerMetadata}),u();break}case"tool-input-start":{const A=c.message.parts.filter(RM);c.partialToolCalls[a.toolCallId]={text:"",toolName:a.toolName,index:A.length,dynamic:a.dynamic},a.dynamic?E({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-streaming",input:void 0}):S({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-streaming",input:void 0,providerExecuted:a.providerExecuted}),u();break}case"tool-input-delta":{const A=c.partialToolCalls[a.toolCallId];A.text+=a.inputTextDelta;const{value:M}=await Nle(A.text);A.dynamic?E({toolCallId:a.toolCallId,toolName:A.toolName,state:"input-streaming",input:M}):S({toolCallId:a.toolCallId,toolName:A.toolName,state:"input-streaming",input:M}),u();break}case"tool-input-available":{a.dynamic?E({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-available",input:a.input,providerMetadata:a.providerMetadata}):S({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-available",input:a.input,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}),u(),i&&!a.providerExecuted&&await i({toolCall:a});break}case"tool-input-error":{a.dynamic?E({toolCallId:a.toolCallId,toolName:a.toolName,state:"output-error",input:a.input,errorText:a.errorText,providerMetadata:a.providerMetadata}):S({toolCallId:a.toolCallId,toolName:a.toolName,state:"output-error",input:void 0,rawInput:a.input,errorText:a.errorText,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}),u();break}case"tool-output-available":{if(a.dynamic){const A=x(a.toolCallId);E({toolCallId:a.toolCallId,toolName:A.toolName,state:"output-available",input:A.input,output:a.output,preliminary:a.preliminary})}else{const A=b(a.toolCallId);S({toolCallId:a.toolCallId,toolName:JH(A),state:"output-available",input:A.input,output:a.output,providerExecuted:a.providerExecuted,preliminary:a.preliminary})}u();break}case"tool-output-error":{if(a.dynamic){const A=x(a.toolCallId);E({toolCallId:a.toolCallId,toolName:A.toolName,state:"output-error",input:A.input,errorText:a.errorText})}else{const A=b(a.toolCallId);S({toolCallId:a.toolCallId,toolName:JH(A),state:"output-error",input:A.input,rawInput:A.rawInput,errorText:a.errorText})}u();break}case"start-step":{c.message.parts.push({type:"step-start"});break}case"finish-step":{c.activeTextParts={},c.activeReasoningParts={};break}case"start":{a.messageId!=null&&(c.message.id=a.messageId),await T(a.messageMetadata),(a.messageId!=null||a.messageMetadata!=null)&&u();break}case"finish":{await T(a.messageMetadata),a.messageMetadata!=null&&u();break}case"message-metadata":{await T(a.messageMetadata),a.messageMetadata!=null&&u();break}case"error":{o?.(new Error(a.errorText));break}default:if(kst(a)){n?.[a.type]!=null&&await xH({value:a.data,schema:n[a.type]});const A=a;if(A.transient){s?.(A);break}const M=A.id!=null?c.message.parts.find(R=>A.type===R.type&&A.id===R.id):void 0;M!=null?M.data=A.data:c.message.parts.push(A),s?.(A),u()}}l.enqueue(a)})}}))}function _st({messageId:e,originalMessages:t=[],onFinish:n,onError:r,stream:o}){let i=t?.[t.length-1];i?.role!=="assistant"?i=void 0:e=i.id;let s=!1;const a=o.pipeThrough(new TransformStream({transform(u,f){if(u.type==="start"){const p=u;p.messageId==null&&e!=null&&(p.messageId=e)}u.type==="abort"&&(s=!0),f.enqueue(u)}}));if(n==null)return a;const l=Est({lastMessage:i?structuredClone(i):void 0,messageId:e??""});return Tst({stream:a,runUpdateMessageJob:async u=>{await u({state:l,write:()=>{}})},onError:r}).pipeThrough(new TransformStream({transform(u,f){f.enqueue(u)},async flush(){const u=l.message.id===i?.id;await n({isAborted:s,isContinuation:u,responseMessage:l.message,messages:[...u?t.slice(0,-1):t,l.message]})}}))}function Ast({response:e,status:t,statusText:n,headers:r,stream:o,consumeSseStream:i}){let s=o.pipeThrough(new Ale);if(i){const[a,l]=s.tee();s=a,i({stream:l})}_le({response:e,status:t,statusText:n,headers:Object.fromEntries(KE(r,Mle).entries()),stream:s.pipeThrough(new TextEncoderStream)})}function Zw(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:o}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:o}}}},t}async function Mst({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t?.(r)}finally{n.releaseLock()}}function XH(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function Rst(){let e=[],t=null,n=!1,r=XH();const o=()=>{n=!0,r.resolve(),e.forEach(s=>s.cancel()),e=[],t?.close()},i=async()=>{if(n&&e.length===0){t?.close();return}if(e.length===0)return r=XH(),await r.promise,i();try{const{value:s,done:a}=await e[0].read();a?(e.shift(),e.length>0?await i():n&&t?.close()):t?.enqueue(s)}catch(s){t?.error(s),e.shift(),o()}};return{stream:new ReadableStream({start(s){t=s},pull:i,async cancel(){for(const s of e)await s.cancel();e=[],n=!0}}),addStream:s=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(s.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&t?.close()},terminate:o}}var Ww=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise)}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}};function Nst(e,t){return new ReadableStream({async start(n){const r=e.getReader();try{for(;;){const{done:o,value:i}=await r.read();if(o){n.close();break}n.enqueue(i)}}catch(o){await t({error:o,controller:n})}},cancel(n){return e.cancel(n)}})}function Ist(){var e,t;return(t=(e=globalThis?.performance)==null?void 0:e.now())!=null?t:Date.now()}function Ost({tools:e,generatorStream:t,tracer:n,telemetry:r,system:o,messages:i,abortSignal:s,repairToolCall:a,experimental_context:l}){let c=null;const u=new ReadableStream({start(S){c=S}}),f=new Set,p=new Map;let m=!1,y;function b(){m&&f.size===0&&(y!=null&&c.enqueue(y),c.close())}const x=new TransformStream({async transform(S,E){const T=S.type;switch(T){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":{E.enqueue(S);break}case"file":{E.enqueue({type:"file",file:new hst({data:S.data,mediaType:S.mediaType})});break}case"finish":{y={type:"finish",finishReason:S.finishReason,usage:S.usage,providerMetadata:S.providerMetadata};break}case"tool-call":{try{const A=await kle({toolCall:S,tools:e,repairToolCall:a,system:o,messages:i});if(E.enqueue(A),A.invalid){c.enqueue({type:"tool-error",toolCallId:A.toolCallId,toolName:A.toolName,input:A.input,error:QD(A.error),dynamic:!0});break}const M=e[A.toolName];if(p.set(A.toolCallId,A.input),M.onInputAvailable!=null&&await M.onInputAvailable({input:A.input,toolCallId:A.toolCallId,messages:i,abortSignal:s,experimental_context:l}),M.execute!=null&&A.providerExecuted!==!0){const R=lot();f.add(R),Bm({name:"ai.toolCall",attributes:ua({telemetry:r,attributes:{...zm({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":A.toolName,"ai.toolCall.id":A.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(A.input)}}}),tracer:n,fn:async O=>{let I;try{const L=fae({execute:M.execute.bind(M),input:A.input,options:{toolCallId:A.toolCallId,messages:i,abortSignal:s,experimental_context:l}});for await(const $ of L)c.enqueue({...A,type:"tool-result",output:$.output,...$.type==="preliminary"&&{preliminary:!0}}),$.type==="final"&&(I=$.output)}catch(L){n$(O,L),c.enqueue({...A,type:"tool-error",error:L}),f.delete(R),b();return}f.delete(R),b();try{O.setAttributes(ua({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(I)}}}))}catch{}}})}}catch(A){c.enqueue({type:"error",error:A})}break}case"tool-result":{const A=S.toolName;S.isError?c.enqueue({type:"tool-error",toolCallId:S.toolCallId,toolName:A,input:p.get(S.toolCallId),providerExecuted:S.providerExecuted,error:S.result}):E.enqueue({type:"tool-result",toolCallId:S.toolCallId,toolName:A,input:p.get(S.toolCallId),output:S.result,providerExecuted:S.providerExecuted});break}default:{const A=T;throw new Error(`Unhandled chunk type: ${A}`)}}},flush(){m=!0,b()}});return new ReadableStream({async start(S){return Promise.all([t.pipeThrough(x).pipeTo(new WritableStream({write(E){S.enqueue(E)},close(){}})),u.pipeTo(new WritableStream({write(E){S.enqueue(E)},close(){S.close()}}))])}})}var Pst=Rv({prefix:"aitxt",size:24});function Dst({model:e,tools:t,toolChoice:n,system:r,prompt:o,messages:i,maxRetries:s,abortSignal:a,headers:l,stopWhen:c=Ele(1),experimental_output:u,experimental_telemetry:f,prepareStep:p,providerOptions:m,experimental_activeTools:y,activeTools:b=y,experimental_repairToolCall:x,experimental_transform:S,includeRawChunks:E=!1,onChunk:T,onError:A=({error:V})=>{console.error(V)},onFinish:M,onAbort:R,onStepFinish:O,experimental_context:I,_internal:{now:L=Ist,generateId:$=Pst,currentDate:B=()=>new Date}={},...H}){return new Lst({model:Xk(e),telemetry:f,headers:l,settings:H,maxRetries:s,abortSignal:a,system:r,prompt:o,messages:i,tools:t,toolChoice:n,transforms:aO(S),activeTools:b,repairToolCall:x,stopConditions:aO(c),output:u,providerOptions:m,prepareStep:p,includeRawChunks:E,onChunk:T,onError:A,onFinish:M,onAbort:R,onStepFinish:O,now:L,currentDate:B,generateId:$,experimental_context:I})}function $st(e){if(!e)return new TransformStream({transform(s,a){a.enqueue({part:s,partialOutput:void 0})}});let t,n="",r="",o="";function i({controller:s,partialOutput:a=void 0}){s.enqueue({part:{type:"text-delta",id:t,text:r},partialOutput:a}),r=""}return new TransformStream({async transform(s,a){if(s.type==="finish-step"&&r.length>0&&i({controller:a}),s.type!=="text-delta"&&s.type!=="text-start"&&s.type!=="text-end"){a.enqueue({part:s,partialOutput:void 0});return}if(t==null)t=s.id;else if(s.id!==t){a.enqueue({part:s,partialOutput:void 0});return}if(s.type==="text-start"){a.enqueue({part:s,partialOutput:void 0});return}if(s.type==="text-end"){r.length>0&&i({controller:a}),a.enqueue({part:s,partialOutput:void 0});return}n+=s.text,r+=s.text;const l=await e.parsePartial({text:n});if(l!=null){const c=JSON.stringify(l.partial);c!==o&&(i({controller:a,partialOutput:l.partial}),o=c)}}})}var Lst=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:o,abortSignal:i,system:s,prompt:a,messages:l,tools:c,toolChoice:u,transforms:f,activeTools:p,repairToolCall:m,stopConditions:y,output:b,providerOptions:x,prepareStep:S,includeRawChunks:E,now:T,currentDate:A,generateId:M,onChunk:R,onError:O,onFinish:I,onAbort:L,onStepFinish:$,experimental_context:B}){this._totalUsage=new Ww,this._finishReason=new Ww,this._steps=new Ww,this.output=b,this.includeRawChunks=E,this.tools=c;let H,V=[];const W=[];let K,z,G={},F=[];const Z=[];let N,U={},ee={};const D=new TransformStream({async transform(Ie,Le){var $e,me,Re;Le.enqueue(Ie);const{part:we}=Ie;if((we.type==="text-delta"||we.type==="reasoning-delta"||we.type==="source"||we.type==="tool-call"||we.type==="tool-result"||we.type==="tool-input-start"||we.type==="tool-input-delta"||we.type==="raw")&&await R?.({chunk:we}),we.type==="error"&&await O({error:mle(we.error)}),we.type==="text-start"&&(U[we.id]={type:"text",text:"",providerMetadata:we.providerMetadata},V.push(U[we.id])),we.type==="text-delta"){const Pe=U[we.id];if(Pe==null){Le.enqueue({part:{type:"error",error:`text part ${we.id} not found`},partialOutput:void 0});return}Pe.text+=we.text,Pe.providerMetadata=($e=we.providerMetadata)!=null?$e:Pe.providerMetadata}if(we.type==="text-end"&&delete U[we.id],we.type==="reasoning-start"&&(ee[we.id]={type:"reasoning",text:"",providerMetadata:we.providerMetadata},V.push(ee[we.id])),we.type==="reasoning-delta"){const Pe=ee[we.id];if(Pe==null){Le.enqueue({part:{type:"error",error:`reasoning part ${we.id} not found`},partialOutput:void 0});return}Pe.text+=we.text,Pe.providerMetadata=(me=we.providerMetadata)!=null?me:Pe.providerMetadata}if(we.type==="reasoning-end"){const Pe=ee[we.id];if(Pe==null){Le.enqueue({part:{type:"error",error:`reasoning part ${we.id} not found`},partialOutput:void 0});return}Pe.providerMetadata=(Re=we.providerMetadata)!=null?Re:Pe.providerMetadata,delete ee[we.id]}if(we.type==="file"&&V.push({type:"file",file:we.file}),we.type==="source"&&V.push(we),we.type==="tool-call"&&V.push(we),we.type==="tool-result"&&!we.preliminary&&V.push(we),we.type==="tool-error"&&V.push(we),we.type==="start-step"&&(G=we.request,F=we.warnings),we.type==="finish-step"){const Pe=lO({content:V,tools:c}),Ze=new Cle({content:V,finishReason:we.finishReason,usage:we.usage,warnings:F,request:G,response:{...we.response,messages:[...W,...Pe]},providerMetadata:we.providerMetadata});await $?.(Ze),Z.push(Ze),V=[],ee={},U={},W.push(...Pe),H.resolve()}we.type==="finish"&&(z=we.totalUsage,K=we.finishReason)},async flush(Ie){try{if(Z.length===0){const Re=new Oit({message:"No output generated. Check the stream for errors."});ye._finishReason.reject(Re),ye._totalUsage.reject(Re),ye._steps.reject(Re);return}const Le=K??"unknown",$e=z??{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};ye._finishReason.resolve(Le),ye._totalUsage.resolve($e),ye._steps.resolve(Z);const me=Z[Z.length-1];await I?.({finishReason:Le,totalUsage:$e,usage:me.usage,content:me.content,text:me.text,reasoningText:me.reasoningText,reasoning:me.reasoning,files:me.files,sources:me.sources,toolCalls:me.toolCalls,staticToolCalls:me.staticToolCalls,dynamicToolCalls:me.dynamicToolCalls,toolResults:me.toolResults,staticToolResults:me.staticToolResults,dynamicToolResults:me.dynamicToolResults,request:me.request,response:me.response,warnings:me.warnings,providerMetadata:me.providerMetadata,steps:Z}),N.setAttributes(ua({telemetry:t,attributes:{"ai.response.finishReason":Le,"ai.response.text":{output:()=>me.text},"ai.response.toolCalls":{output:()=>{var Re;return(Re=me.toolCalls)!=null&&Re.length?JSON.stringify(me.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify(me.providerMetadata),"ai.usage.inputTokens":$e.inputTokens,"ai.usage.outputTokens":$e.outputTokens,"ai.usage.totalTokens":$e.totalTokens,"ai.usage.reasoningTokens":$e.reasoningTokens,"ai.usage.cachedInputTokens":$e.cachedInputTokens}}))}catch(Le){Ie.error(Le)}finally{N.end()}}}),ae=Rst();this.addStream=ae.addStream,this.closeStream=ae.close;let oe=ae.stream;oe=Nst(oe,({error:Ie,controller:Le})=>{uae(Ie)&&i?.aborted?(L?.({steps:Z}),Le.enqueue({type:"abort"}),Le.close()):Le.error(Ie)}),oe=oe.pipeThrough(new TransformStream({start(Ie){Ie.enqueue({type:"start"})}}));for(const Ie of f)oe=oe.pipeThrough(Ie({tools:c,stopStream(){ae.terminate()}}));this.baseStream=oe.pipeThrough($st(b)).pipeThrough(D);const{maxRetries:he,retry:le}=xle({maxRetries:o,abortSignal:i}),ge=yle(t),Oe=sO(r),je=gle({model:e,telemetry:t,headers:n,settings:{...Oe,maxRetries:he}}),ye=this;Bm({name:"ai.streamText",attributes:ua({telemetry:t,attributes:{...zm({operationId:"ai.streamText",telemetry:t}),...je,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:a,messages:l})}}}),tracer:ge,endWhenDone:!1,fn:async Ie=>{N=Ie;async function Le({currentStep:$e,responseMessages:me,usage:Re}){var we,Pe,Ze,rt,Bn;const So=ye.includeRawChunks;H=new Ww;const Sr=await ple({system:s,prompt:a,messages:l}),Ir=[...Sr.messages,...me],Ft=await S?.({model:e,steps:Z,stepNumber:Z.length,messages:Ir}),fe=await cle({prompt:{system:(we=Ft?.system)!=null?we:Sr.system,messages:(Pe=Ft?.messages)!=null?Pe:Ir},supportedUrls:await e.supportedUrls}),Se=Xk((Ze=Ft?.model)!=null?Ze:e),{toolChoice:Be,tools:De}=ule({tools:c,toolChoice:(rt=Ft?.toolChoice)!=null?rt:u,activeTools:(Bn=Ft?.activeTools)!=null?Bn:p}),{result:{stream:et,response:an,request:Or},doStreamSpan:hn,startTimestampMs:kr}=await le(()=>Bm({name:"ai.streamText.doStream",attributes:ua({telemetry:t,attributes:{...zm({operationId:"ai.streamText.doStream",telemetry:t}),...je,"ai.model.provider":Se.provider,"ai.model.id":Se.modelId,"ai.prompt.messages":{input:()=>ble(fe)},"ai.prompt.tools":{input:()=>De?.map(Fe=>JSON.stringify(Fe))},"ai.prompt.toolChoice":{input:()=>Be!=null?JSON.stringify(Be):void 0},"gen_ai.system":Se.provider,"gen_ai.request.model":Se.modelId,"gen_ai.request.frequency_penalty":Oe.frequencyPenalty,"gen_ai.request.max_tokens":Oe.maxOutputTokens,"gen_ai.request.presence_penalty":Oe.presencePenalty,"gen_ai.request.stop_sequences":Oe.stopSequences,"gen_ai.request.temperature":Oe.temperature,"gen_ai.request.top_k":Oe.topK,"gen_ai.request.top_p":Oe.topP}}),tracer:ge,endWhenDone:!1,fn:async Fe=>({startTimestampMs:T(),doStreamSpan:Fe,result:await Se.doStream({...Oe,tools:De,toolChoice:Be,responseFormat:b?.responseFormat,prompt:fe,providerOptions:x,abortSignal:i,headers:n,includeRawChunks:So})})})),xn=Ost({tools:c,generatorStream:et,tracer:ge,telemetry:t,system:s,messages:Ir,repairToolCall:m,abortSignal:i,experimental_context:B}),pn=Or??{},qn=[],Zn=[];let so;const Ki={};let qr="unknown",Qn={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},Si,ao=!0,lr={id:M(),timestamp:A(),modelId:e.modelId},ki="";ye.addStream(xn.pipeThrough(new TransformStream({async transform(Fe,Zt){var Lo,er,on,Wt;if(Fe.type==="stream-start"){so=Fe.warnings;return}if(ao){const Sn=T()-kr;ao=!1,hn.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Sn}),hn.setAttributes({"ai.response.msToFirstChunk":Sn}),Zt.enqueue({type:"start-step",request:pn,warnings:so??[]})}const jo=Fe.type;switch(jo){case"text-start":case"text-end":{Zt.enqueue(Fe);break}case"text-delta":{Fe.delta.length>0&&(Zt.enqueue({type:"text-delta",id:Fe.id,text:Fe.delta,providerMetadata:Fe.providerMetadata}),ki+=Fe.delta);break}case"reasoning-start":case"reasoning-end":{Zt.enqueue(Fe);break}case"reasoning-delta":{Zt.enqueue({type:"reasoning-delta",id:Fe.id,text:Fe.delta,providerMetadata:Fe.providerMetadata});break}case"tool-call":{Zt.enqueue(Fe),qn.push(Fe);break}case"tool-result":{Zt.enqueue(Fe),Fe.preliminary||Zn.push(Fe);break}case"tool-error":{Zt.enqueue(Fe),Zn.push(Fe);break}case"response-metadata":{lr={id:(Lo=Fe.id)!=null?Lo:lr.id,timestamp:(er=Fe.timestamp)!=null?er:lr.timestamp,modelId:(on=Fe.modelId)!=null?on:lr.modelId};break}case"finish":{Qn=Fe.usage,qr=Fe.finishReason,Si=Fe.providerMetadata;const Sn=T()-kr;hn.addEvent("ai.stream.finish"),hn.setAttributes({"ai.response.msToFinish":Sn,"ai.response.avgOutputTokensPerSecond":1e3*((Wt=Qn.outputTokens)!=null?Wt:0)/Sn});break}case"file":{Zt.enqueue(Fe);break}case"source":{Zt.enqueue(Fe);break}case"tool-input-start":{Ki[Fe.id]=Fe.toolName;const Sn=c?.[Fe.toolName];Sn?.onInputStart!=null&&await Sn.onInputStart({toolCallId:Fe.id,messages:Ir,abortSignal:i,experimental_context:B}),Zt.enqueue({...Fe,dynamic:Sn?.type==="dynamic"});break}case"tool-input-end":{delete Ki[Fe.id],Zt.enqueue(Fe);break}case"tool-input-delta":{const Sn=Ki[Fe.id],Yi=c?.[Sn];Yi?.onInputDelta!=null&&await Yi.onInputDelta({inputTextDelta:Fe.delta,toolCallId:Fe.id,messages:Ir,abortSignal:i,experimental_context:B}),Zt.enqueue(Fe);break}case"error":{Zt.enqueue(Fe),qr="error";break}case"raw":{So&&Zt.enqueue(Fe);break}default:{const Sn=jo;throw new Error(`Unknown chunk type: ${Sn}`)}}},async flush(Fe){const Zt=qn.length>0?JSON.stringify(qn):void 0;try{hn.setAttributes(ua({telemetry:t,attributes:{"ai.response.finishReason":qr,"ai.response.text":{output:()=>ki},"ai.response.toolCalls":{output:()=>Zt},"ai.response.id":lr.id,"ai.response.model":lr.modelId,"ai.response.timestamp":lr.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(Si),"ai.usage.inputTokens":Qn.inputTokens,"ai.usage.outputTokens":Qn.outputTokens,"ai.usage.totalTokens":Qn.totalTokens,"ai.usage.reasoningTokens":Qn.reasoningTokens,"ai.usage.cachedInputTokens":Qn.cachedInputTokens,"gen_ai.response.finish_reasons":[qr],"gen_ai.response.id":lr.id,"gen_ai.response.model":lr.modelId,"gen_ai.usage.input_tokens":Qn.inputTokens,"gen_ai.usage.output_tokens":Qn.outputTokens}}))}catch{}finally{hn.end()}Fe.enqueue({type:"finish-step",finishReason:qr,usage:Qn,providerMetadata:Si,response:{...lr,headers:an?.headers}});const Lo=vle(Re,Qn);await H.promise;const er=qn.filter(Wt=>Wt.providerExecuted!==!0),on=Zn.filter(Wt=>Wt.providerExecuted!==!0);if(er.length>0&&on.length===er.length&&!await Tle({stopConditions:y,steps:Z})){me.push(...lO({content:Z[Z.length-1].content,tools:c}));try{await Le({currentStep:$e+1,responseMessages:me,usage:Lo})}catch(Wt){Fe.enqueue({type:"error",error:Wt}),ye.closeStream()}}else Fe.enqueue({type:"finish",finishReason:qr,totalUsage:Lo}),ye.closeStream()}})))}await Le({currentStep:0,responseMessages:[],usage:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0}})}}).catch(Ie=>{ye.addStream(new ReadableStream({start(Le){Le.enqueue({type:"error",error:Ie}),Le.close()}})),ye.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(e=>e[e.length-1])}get content(){return this.finalStep.then(e=>e.content)}get warnings(){return this.finalStep.then(e=>e.warnings)}get providerMetadata(){return this.finalStep.then(e=>e.providerMetadata)}get text(){return this.finalStep.then(e=>e.text)}get reasoningText(){return this.finalStep.then(e=>e.reasoningText)}get reasoning(){return this.finalStep.then(e=>e.reasoning)}get sources(){return this.finalStep.then(e=>e.sources)}get files(){return this.finalStep.then(e=>e.files)}get toolCalls(){return this.finalStep.then(e=>e.toolCalls)}get staticToolCalls(){return this.finalStep.then(e=>e.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(e=>e.dynamicToolCalls)}get toolResults(){return this.finalStep.then(e=>e.toolResults)}get staticToolResults(){return this.finalStep.then(e=>e.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(e=>e.dynamicToolResults)}get usage(){return this.finalStep.then(e=>e.usage)}get request(){return this.finalStep.then(e=>e.request)}get response(){return this.finalStep.then(e=>e.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return Zw(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.text)}})))}get fullStream(){return Zw(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await Mst({stream:this.fullStream,onError:e?.onError})}catch(n){(t=e?.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new Iae;return Zw(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:o=!0,sendSources:i=!1,sendStart:s=!0,sendFinish:a=!0,onError:l=fg}={}){const c=t!=null?Sst({originalMessages:e,responseMessageId:t}):void 0,u={},f=m=>{var y,b;const x=u[m];return((b=(y=this.tools)==null?void 0:y[x])==null?void 0:b.type)==="dynamic"?!0:void 0},p=this.fullStream.pipeThrough(new TransformStream({transform:async(m,y)=>{const b=r?.({part:m}),x=m.type;switch(x){case"text-start":{y.enqueue({type:"text-start",id:m.id,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"text-delta":{y.enqueue({type:"text-delta",id:m.id,delta:m.text,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"text-end":{y.enqueue({type:"text-end",id:m.id,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"reasoning-start":{y.enqueue({type:"reasoning-start",id:m.id,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"reasoning-delta":{o&&y.enqueue({type:"reasoning-delta",id:m.id,delta:m.text,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"reasoning-end":{y.enqueue({type:"reasoning-end",id:m.id,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"file":{y.enqueue({type:"file",mediaType:m.file.mediaType,url:`data:${m.file.mediaType};base64,${m.file.base64}`});break}case"source":{i&&m.sourceType==="url"&&y.enqueue({type:"source-url",sourceId:m.id,url:m.url,title:m.title,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}}),i&&m.sourceType==="document"&&y.enqueue({type:"source-document",sourceId:m.id,mediaType:m.mediaType,title:m.title,filename:m.filename,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"tool-input-start":{u[m.id]=m.toolName;const S=f(m.id);y.enqueue({type:"tool-input-start",toolCallId:m.id,toolName:m.toolName,...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...S!=null?{dynamic:S}:{}});break}case"tool-input-delta":{y.enqueue({type:"tool-input-delta",toolCallId:m.id,inputTextDelta:m.delta});break}case"tool-call":{u[m.toolCallId]=m.toolName;const S=f(m.toolCallId);m.invalid?y.enqueue({type:"tool-input-error",toolCallId:m.toolCallId,toolName:m.toolName,input:m.input,...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{},...S!=null?{dynamic:S}:{},errorText:l(m.error)}):y.enqueue({type:"tool-input-available",toolCallId:m.toolCallId,toolName:m.toolName,input:m.input,...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{},...S!=null?{dynamic:S}:{}});break}case"tool-result":{const S=f(m.toolCallId);y.enqueue({type:"tool-output-available",toolCallId:m.toolCallId,output:m.output,...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...m.preliminary!=null?{preliminary:m.preliminary}:{},...S!=null?{dynamic:S}:{}});break}case"tool-error":{const S=f(m.toolCallId);y.enqueue({type:"tool-output-error",toolCallId:m.toolCallId,errorText:l(m.error),...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...S!=null?{dynamic:S}:{}});break}case"error":{y.enqueue({type:"error",errorText:l(m.error)});break}case"start-step":{y.enqueue({type:"start-step"});break}case"finish-step":{y.enqueue({type:"finish-step"});break}case"start":{s&&y.enqueue({type:"start",...b!=null?{messageMetadata:b}:{},...c!=null?{messageId:c}:{}});break}case"finish":{a&&y.enqueue({type:"finish",...b!=null?{messageMetadata:b}:{}});break}case"abort":{y.enqueue(m);break}case"tool-input-end":break;case"raw":break;default:{const S=x;throw new Error(`Unknown chunk type: ${S}`)}}b!=null&&x!=="start"&&x!=="finish"&&y.enqueue({type:"message-metadata",messageMetadata:b})}}));return Zw(_st({stream:p,messageId:c??t?.(),originalMessages:e,onFinish:n,onError:l}))}pipeUIMessageStreamToResponse(e,{originalMessages:t,generateMessageId:n,onFinish:r,messageMetadata:o,sendReasoning:i,sendSources:s,sendFinish:a,sendStart:l,onError:c,...u}={}){Ast({response:e,stream:this.toUIMessageStream({originalMessages:t,generateMessageId:n,onFinish:r,messageMetadata:o,sendReasoning:i,sendSources:s,sendFinish:a,sendStart:l,onError:c}),...u})}pipeTextStreamToResponse(e,t){wst({response:e,textStream:this.textStream,...t})}toUIMessageStreamResponse({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:o,sendSources:i,sendFinish:s,sendStart:a,onError:l,...c}={}){return xst({stream:this.toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:o,sendSources:i,sendFinish:s,sendStart:a,onError:l}),...c})}toTextStreamResponse(e){return vst({textStream:this.textStream,...e})}};Rv({prefix:"aiobj",size:24});Rv({prefix:"aiobj",size:24});var jst={};_it(jst,{object:()=>Bst,text:()=>zst});var zst=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),Bst=({schema:e})=>{const t=ZE(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:n}){const r=await Nle(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const o=r.state;throw new Error(`Unsupported parse state: ${o}`)}}},async parseOutput({text:n},r){const o=await Kk({text:n});if(!o.success)throw new GH({message:"No object generated: could not parse the response.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const i=await Nv({value:o.value,schema:t});if(!i.success)throw new GH({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return i.value}}},Vst=qp({name:X(),version:X()}),r$=qp({_meta:Ot(de({}).loose())}),Ob=r$,Fst=de({method:X(),params:Ot(r$)}),Hst=qp({experimental:Ot(de({}).loose()),logging:Ot(de({}).loose()),prompts:Ot(qp({listChanged:Ot(Kt())})),resources:Ot(qp({subscribe:Ot(Kt()),listChanged:Ot(Kt())})),tools:Ot(qp({listChanged:Ot(Kt())}))});Ob.extend({protocolVersion:X(),capabilities:Hst,serverInfo:Vst,instructions:Ot(X())});var Ust=Ob.extend({nextCursor:Ot(X())}),Gst=de({name:X(),description:Ot(X()),inputSchema:de({type:Me("object"),properties:Ot(de({}).loose())}).loose()}).loose();Ust.extend({tools:vt(Gst)});var qst=de({type:Me("text"),text:X()}).loose(),Zst=de({type:Me("image"),data:vee(),mimeType:X()}).loose(),Ile=de({uri:X(),mimeType:Ot(X())}).loose(),Wst=Ile.extend({text:X()}),Kst=Ile.extend({blob:vee()}),Yst=de({type:Me("resource"),resource:Nt([Wst,Kst])}).loose();Ob.extend({content:vt(Nt([qst,Zst,Yst])),isError:Kt().default(!1).optional()}).or(Ob.extend({toolResult:Qt()}));var YE="2.0",Jst=de({jsonrpc:Me(YE),id:Nt([X(),Jt().int()])}).merge(Fst).strict(),Xst=de({jsonrpc:Me(YE),id:Nt([X(),Jt().int()]),result:Ob}).strict(),Qst=de({jsonrpc:Me(YE),id:Nt([X(),Jt().int()]),error:de({code:Jt().int(),message:X(),data:Ot(Qt())})}).strict(),eat=de({jsonrpc:Me(YE)}).merge(de({method:X(),params:Ot(r$)})).strict();Nt([Jst,eat,Xst,Qst]);var tat=de({type:Me("text"),text:X(),state:Di(["streaming","done"]).optional(),providerMetadata:Yt.optional()}),nat=de({type:Me("reasoning"),text:X(),state:Di(["streaming","done"]).optional(),providerMetadata:Yt.optional()}),rat=de({type:Me("source-url"),sourceId:X(),url:X(),title:X().optional(),providerMetadata:Yt.optional()}),oat=de({type:Me("source-document"),sourceId:X(),mediaType:X(),title:X(),filename:X().optional(),providerMetadata:Yt.optional()}),iat=de({type:Me("file"),mediaType:X(),filename:X().optional(),url:X(),providerMetadata:Yt.optional()}),sat=de({type:Me("step-start")}),aat=de({type:X().startsWith("data-"),id:X().optional(),data:Qt()}),lat=[de({type:Me("dynamic-tool"),toolName:X(),toolCallId:X(),state:Me("input-streaming"),input:Qt().optional(),output:Pi().optional(),errorText:Pi().optional()}),de({type:Me("dynamic-tool"),toolName:X(),toolCallId:X(),state:Me("input-available"),input:Qt(),output:Pi().optional(),errorText:Pi().optional(),callProviderMetadata:Yt.optional()}),de({type:Me("dynamic-tool"),toolName:X(),toolCallId:X(),state:Me("output-available"),input:Qt(),output:Qt(),errorText:Pi().optional(),callProviderMetadata:Yt.optional(),preliminary:Kt().optional()}),de({type:Me("dynamic-tool"),toolName:X(),toolCallId:X(),state:Me("output-error"),input:Qt(),output:Pi().optional(),errorText:X(),callProviderMetadata:Yt.optional()})],cat=[de({type:X().startsWith("tool-"),toolCallId:X(),state:Me("input-streaming"),input:Qt().optional(),output:Pi().optional(),errorText:Pi().optional()}),de({type:X().startsWith("tool-"),toolCallId:X(),state:Me("input-available"),input:Qt(),output:Pi().optional(),errorText:Pi().optional(),callProviderMetadata:Yt.optional()}),de({type:X().startsWith("tool-"),toolCallId:X(),state:Me("output-available"),input:Qt(),output:Qt(),errorText:Pi().optional(),callProviderMetadata:Yt.optional(),preliminary:Kt().optional()}),de({type:X().startsWith("tool-"),toolCallId:X(),state:Me("output-error"),input:Qt(),output:Pi().optional(),errorText:X(),callProviderMetadata:Yt.optional()})];de({id:X(),role:Di(["system","user","assistant"]),metadata:Qt().optional(),parts:vt(Nt([tat,nat,rat,oat,iat,sat,aat,...lat,...cat]))});const uat=async({transcriptionText:e,googleApiKey:t,editor:n,updateCurrentNoteContent:r,updateCurrentNoteTitle:o,saveCurrentNote:i,currentContent:s})=>{if(!t)return console.warn("Google API Key is missing provided to processTranscription"),Po("API Key missing - Saved raw text",{icon:""}),QH(e,n,r,i,s);const a=Po.loading(" Structuring with AI...");console.log("Starting AI structuring...");try{const c=SE({apiKey:t})("models/gemini-2.5-flash"),u=`You are an expert note-taker. Transform the raw transcription into a highly structured, educational note using BlockNote JSON blocks.

Your goal is to organize the information for effective learning, using the most appropriate block types.

Output MUST be a valid JSON array of blocks. Do not wrap in markdown.

Each block must have: "id" (unique string), "type", "props" (object), "content", "children" (array, usually []).

CRITICAL STRUCTURE RULES:
1. 'content': This is where the text goes. It can be a simple string OR an array of styled text objects.
   - Simple: "content": "Hello world"
   - Styled: "content": [{"type":"text", "text":"Bold", "styles":{"bold":true}}, {"type":"text", "text":" normal", "styles":{}}]
2. 'children': This is ONLY for nested blocks (like sub-bullets). It MUST NOT contain text objects.
   - CORRECT: "children": [{"id": "...", "type": "bulletListItem", ...}]
   - INCORRECT: "children": [{"type":"text", "text":"..."}] -> THIS WILL CRASH THE APP.

AVAILABLE BLOCK STRUCTURES:

1. PARAGRAPHS & QUOTES:
   - {"id": "unique-id-1", "type": "paragraph", "props": {"textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "Simple text", "children": []}
   - {"id": "unique-id-2", "type": "paragraph", "props": {"textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": [{"type":"text", "text":"Bold Text", "styles":{"bold":true}}, {"type":"text", "text":" normal text", "styles":{}}], "children": []}
   - {"id": "unique-id-3", "type": "quote", "props": {}, "content": "Key takeaway or important definition", "children": []}

2. HEADINGS (Use hierarchy):
   - {"id": "unique-id-4", "type": "heading", "props": {"level": 1, "textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "Main Title", "children": []}
   - {"id": "unique-id-5", "type": "heading", "props": {"level": 2, "textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "Section Title", "children": []}
   - {"id": "unique-id-6", "type": "heading", "props": {"level": 3, "textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "Subsection", "children": []}

3. LISTS (Use for steps, features, pros/cons):
   - {"id": "unique-id-8", "type": "bulletListItem", "props": {}, "content": "Point", "children": []}
   - {"id": "unique-id-9", "type": "numberedListItem", "props": {}, "content": "Step 1", "children": []}
   - {"id": "unique-id-10", "type": "checkListItem", "props": {}, "content": "Task", "children": []}
   - {"id": "unique-id-11", "type": "toggleListItem", "props": {}, "content": "Click to reveal detail", "children": []}
   
   *NESTING LISTS*: To nest a list item, put the child list item block inside the 'children' array of the parent.
   - {"id": "parent", "type": "bulletListItem", "content": "Parent", "children": [{"id": "child", "type": "bulletListItem", "content": "Child", "children": []}]}

4. CODE (For technical terms/snippets):
   - {"id": "unique-id-12", "type": "codeBlock", "props": {"language": "javascript", "textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "console.log('code');", "children": []}

5. TABLES (Use for comparisons/data):
   - {"id": "unique-id-13", "type": "table", "props": {"textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": {"type": "tableContent", "rows": [{"cells": ["Col1", "Col2"]}, {"cells": ["Val1", "Val2"]}]}, "children": []}

RULES:
- Generate unique IDs for each block (e.g., using random strings or sequential numbers).
- Organize content logically with headings.
- Use TABLES for comparisons.
- Use CODE BLOCKS for code.
- Use BOLD text for key terms (using the content array format).
- **CRITICAL RULE: The first block MUST be a Heading Level 1 with a VERY SHORT, concise title (max 3-5 words) summarizing the note. This will be used as the filename.**`,{text:f}=await mst({model:c,system:u,prompt:e});console.log("AI Generation result:",f);const p=f.replace(/```json/g,"").replace(/```/g,"").trim();let m=JSON.parse(p);if(!Array.isArray(m))throw new Error("AI output is not an array");if(m=[{id:Date.now().toString(),type:"heading",props:{level:2},content:"Audio Transcript",children:[]},...m],n)try{const b=n.document[n.document.length-1];n.insertBlocks(m,b,"after"),r(JSON.stringify(n.document)),i()}catch(b){console.warn("Editor insertion failed, falling back to store update",b);const x=[...s,...m];r(JSON.stringify(x)),i()}else{const b=[...s,...m];r(JSON.stringify(b)),i()}Po.success("Processed & Structured!",{id:a})}catch(l){console.error("AI Structuring failed completely:",l);let c="AI structuring failed, using raw text.";return l.message?.includes("API key")?c="Invalid API Key. Using raw text.":l.message?.includes("fetch")&&(c="Network error. Using raw text."),Po.error(c,{id:a}),QH(e,n,r,i,s)}},QH=(e,t,n,r,o)=>{const i={id:Date.now().toString(),type:"paragraph",props:{},content:e,children:[]};if(t)try{const s=t.document[t.document.length-1];t.insertBlocks([i],s,"after"),n(JSON.stringify(t.document)),r()}catch{const a=[...o,i];n(JSON.stringify(a)),r()}else{const s=[...o,i];n(JSON.stringify(s)),r()}},eU=()=>{const e=ws(ye=>ye.currentNote),{loadNotes:t,loadFolders:n,selectNote:r,deleteNote:o,createNote:i,createFolder:s,updateNote:a,updateFolder:l,deleteFolder:c,updateCurrentNoteContent:u}=ws.getState(),f=pr(ye=>ye.deleteConfirmId),p=pr(ye=>ye.deleteConfirmFolderId),m=pr(ye=>ye.renamingNoteId),y=pr(ye=>ye.renameValue),b=pr(ye=>ye.contextMenu),x=pr(ye=>ye.isKanbanOpen),S=pr(ye=>ye.isRecording),E=pr(ye=>ye.isProcessingRecording),[T,A]=k.useState(null),[M,R]=k.useState(""),[O,I]=k.useState(null),L=pr(ye=>ye.expandedFolders),{openCommandPalette:$,setDeleteConfirmId:B,setDeleteConfirmFolderId:H,startRenaming:V,finishRenaming:W,setRenameValue:K,setContextMenu:z,setIsKanbanOpen:G,setIsRecording:F,setIsSettingsOpen:Z,setExpandedFolders:N,setIsProcessingRecording:U}=pr.getState();k.useEffect(()=>{t(),n()},[t,n]),k.useEffect(()=>{const ye=()=>z(null);return window.addEventListener("click",ye),()=>window.removeEventListener("click",ye)},[z]);const ee=async(ye="text",Ie)=>{try{await i(ye,Ie||O||void 0)}catch(Le){console.error("Error creating note",Le)}},D=async ye=>{try{await s("New Folder",ye||O||void 0)}catch(Ie){console.error("Error creating folder",Ie)}},ae=async(ye,Ie)=>{Ie.stopPropagation(),H(ye)},oe=async(ye,Ie)=>{Ie.stopPropagation(),B(ye)},he=async()=>{if(p)try{await c(p),H(null)}catch(ye){console.log("Failed to delete folder",ye)}},le=async()=>{if(f)try{await o(f),B(null)}catch(ye){console.log("Failed to delete note",ye)}},ge=()=>{m&&y.trim()&&a(m,{title:y.trim()}),W()},Oe=()=>{T&&M.trim()&&l(T,{name:M.trim()}),A(null),R("")},je=ye=>{I(ye)};return w.jsxs(w.Fragment,{children:[w.jsxs(Boe,{as:"aside",className:"bg-zinc-950 pb-2 border-r border-zinc-900 flex flex-col h-full text-zinc-400 select-none",defaultSize:{width:260,height:"100%"},minWidth:240,maxWidth:360,enable:{right:!0},handleClasses:{right:"w-0.5 bg-zinc-900 hover:bg-blue-500/50 transition-colors delay-150"},children:[w.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden px-3 py-2 gap-4",children:[w.jsxs("div",{className:"space-y-0.5",children:[w.jsxs("button",{onClick:$,className:"w-full border border-blue-200/40 flex items-center gap-3 px-2 py-1.5 mb-2 text-sm font-medium hover:bg-zinc-900 text-zinc-400 hover:text-zinc-200 rounded-md transition-colors group",children:[w.jsx(XUe,{size:16}),w.jsx("span",{children:"Search"}),w.jsxs("kbd",{className:"ml-auto pointer-events-none hidden h-5 select-none items-center gap-1 rounded border border-zinc-800 bg-zinc-900 px-1.5 font-mono text-[10px] text-zinc-500 opacity-0 group-hover:opacity-100 font-medium transition-opacity sm:flex",children:[w.jsx("span",{className:"text-xs",children:""}),"P"]})]}),w.jsxs("button",{onClick:()=>G(!0),className:"w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 text-zinc-400 hover:text-zinc-200 rounded-md transition-colors",children:[w.jsx(uI,{size:16}),w.jsx("span",{children:"To-do List"})]}),w.jsxs("button",{disabled:!e||e.note_type==="canvas",onClick:async()=>{if(!(!e||e.note_type==="canvas")&&!S)try{await mr("start_recording"),F(!0)}catch{Po.error("Recording failed")}},className:`w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 rounded-md transition-colors
                     ${S?"text-red-400 animate-pulse":"text-zinc-400 hover:text-zinc-200"}
                     ${!e||e.note_type==="canvas"?"opacity-50 cursor-not-allowed":""}
                    `,children:[w.jsx(jp,{size:16}),w.jsx("span",{children:"AI Audio Capture"}),S&&w.jsx("span",{className:"ml-auto w-2 h-2 rounded-full bg-red-500"})]}),w.jsxs("button",{onClick:()=>{console.log("Opening Settings via Sidebar"),Z(!0)},className:"w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 text-zinc-400 hover:text-zinc-200 rounded-md transition-colors",children:[w.jsx(tGe,{size:16}),w.jsx("span",{children:"Settings"})]})]}),w.jsxs("div",{className:"flex flex-col flex-1 min-h-0 space-y-1",children:[w.jsxs("div",{className:"flex items-center justify-between px-2 text-xs font-semibold text-zinc-500 group cursor-pointer hover:text-zinc-400 transition-colors mb-1",children:[w.jsxs("span",{className:"flex items-center gap-1",children:["Notes ",w.jsx(GP,{size:10})]}),w.jsxs("div",{className:"flex items-center gap-1 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity",children:[w.jsx("button",{onClick:ye=>{ye.stopPropagation(),ee("text")},className:"hover:bg-zinc-800 p-0.5 rounded text-zinc-500 hover:text-zinc-300",title:"New Note",children:w.jsx(wUe,{size:16})}),w.jsx("button",{onClick:ye=>{ye.stopPropagation(),ee("canvas")},className:"hover:bg-zinc-800 p-0.5 rounded text-zinc-500 hover:text-zinc-300",title:"New Canvas",children:w.jsx(qne,{size:16})}),w.jsx("button",{onClick:ye=>{ye.stopPropagation(),D()},className:"hover:bg-zinc-800 p-0.5 rounded text-zinc-500 hover:text-zinc-300",title:"New Folder",children:w.jsx(wb,{size:20})})]})]}),w.jsx("div",{onClick:()=>I(null),className:"flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-zinc-800 scrollbar-track-transparent",children:w.jsx(drt,{onSelectNote:r,onSelectFolder:je,onContextMenu:(ye,Ie)=>{ye.preventDefault(),ye.stopPropagation(),z({x:ye.clientX,y:ye.clientY,...Ie})},onDeleteFolder:ae,onDeleteNote:oe,selectedFolderId:O,selectedNoteId:e?.id||null,expandedFolders:L,onExpandedFoldersChange:N,renamingNoteId:m,renamingFolderId:T,renameValue:y,folderRenameValue:M,onRename:ge,onFolderRename:Oe,onRenameValueChange:K,onFolderRenameValueChange:R,onStartRenaming:V,onStartFolderRenaming:(ye,Ie)=>{A(ye),R(Ie)}})})]}),w.jsxs("div",{className:"pt-2 border-t border-zinc-900/50 space-y-1 flex-shrink-0",children:[w.jsx("div",{className:"px-2 text-xs font-semibold text-zinc-600 mb-2",children:"Others"}),w.jsxs("button",{className:"w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 text-zinc-500 hover:text-zinc-300 rounded-md transition-colors",children:[w.jsx(fGe,{size:16}),w.jsx("span",{children:"Trash"})]}),w.jsxs("button",{className:"w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 text-zinc-500 hover:text-zinc-300 rounded-md transition-colors",children:[w.jsx(Gne,{size:16}),w.jsx("span",{children:"Learn More"})]})]})]}),w.jsx(Wa,{children:(S||E)&&w.jsx(or.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden border-t border-zinc-800 bg-zinc-900/30",children:w.jsx(yet,{isRecording:S,isProcessing:E,onStop:async()=>{U(!0),F(!1);try{const ye=await mr("stop_recording");let Ie="";try{Ie=JSON.parse(ye).text||ye}catch{Ie=ye}if(!Ie||Ie.trim()==="")throw new Error("No transcript generated");let Le=e;if(!Le)try{await i("text"),Le=ws.getState().currentNote}catch(we){console.error("Failed to create note",we),Po.error("Could not create new note"),U(!1);return}if(!Le){Po.error("No active note found."),U(!1);return}const $e=pr.getState().googleApiKey,me=pr.getState().editor,Re=JSON.parse(Le.content||"[]")||[];await uat({transcriptionText:Ie,googleApiKey:$e,editor:me,updateCurrentNoteContent:u,saveCurrentNote:ws.getState().saveCurrentNote,currentContent:Re})}catch(ye){console.error("Audio capture process failed",ye),Po.error("Recording process failed")}finally{U(!1)}}})})})]}),w.jsxs(Vk,{open:f!==null,onClose:()=>B(null),className:"relative z-[1000]",children:[w.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm",onClick:()=>B(null)}),w.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:w.jsxs(Ab,{className:"bg-zinc-800 border border-zinc-700 rounded-xl p-6 max-w-sm w-full",children:[w.jsx(Bk,{className:"text-white font-medium mb-2",children:"Delete Note"}),w.jsx(_b,{className:"text-zinc-400 text-sm mb-6",children:"Irreversible action."}),w.jsxs("div",{className:"flex gap-3 justify-end",children:[w.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 text-sm text-zinc-400 hover:text-white hover:bg-zinc-700 rounded-lg",children:"Cancel"}),w.jsx("button",{onClick:le,className:"px-4 py-2 text-sm bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Delete"})]})]})})]}),w.jsxs(Vk,{open:p!==null,onClose:()=>H(null),className:"relative z-[1000]",children:[w.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm",onClick:()=>H(null)}),w.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:w.jsxs(Ab,{className:"bg-zinc-800 border border-zinc-700 rounded-xl p-6 max-w-sm w-full",children:[w.jsx(Bk,{className:"text-white font-medium mb-2",children:"Delete Folder"}),w.jsx(_b,{className:"text-zinc-400 text-sm mb-6",children:"Irreversible action."}),w.jsxs("div",{className:"flex gap-3 justify-end",children:[w.jsx("button",{onClick:()=>H(null),className:"px-4 py-2 text-sm text-zinc-400 hover:text-white hover:bg-zinc-700 rounded-lg",children:"Cancel"}),w.jsx("button",{onClick:he,className:"px-4 py-2 text-sm bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Delete"})]})]})})]}),w.jsx(Wa,{children:b&&w.jsxs(or.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1,ease:"easeOut"},style:{top:b.y,left:b.x},className:"absolute z-50 bg-zinc-900 border border-zinc-800 rounded-lg shadow-xl py-1.5 min-w-[140px] overflow-hidden",children:[b.note&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>{V(b.note.id,b.note.title||"Untitled"),z(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"Rename"}),w.jsx("button",{onClick:ye=>{oe(b.note.id,ye),z(null)},className:"w-full text-left px-3 py-1.5 text-xs text-red-400 hover:bg-zinc-800 hover:text-red-300 transition-colors",children:"Delete"})]}),b.folder&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>{ee("text",b.folder.id),z(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"New Note"}),w.jsx("button",{onClick:()=>{ee("canvas",b.folder.id),z(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"New Canvas"}),w.jsx("button",{onClick:()=>{D(b.folder.id),z(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"New Folder"}),w.jsx("div",{className:"h-px bg-zinc-800 my-1 mx-2"}),w.jsx("button",{onClick:()=>{A(b.folder.id),R(b.folder.name),z(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"Rename"}),w.jsx("button",{onClick:ye=>{ae(b.folder.id,ye),z(null)},className:"w-full text-left px-3 py-1.5 text-xs text-red-400 hover:bg-zinc-800 hover:text-red-300 transition-colors",children:"Delete"})]})]})}),w.jsx(vet,{isOpen:x,onClose:()=>G(!1)})]})},dat=()=>{const e=st.c(35),{searchQuery:t,setSearchQuery:n,searchResults:r,isCommandPaletteOpen:o,closeCommandPalette:i}=pr(),{notes:s,selectNote:a}=ws(),[l,c]=k.useState(0);let u,f;e[0]!==o?(u=()=>{},f=[o],e[0]=o,e[1]=u,e[2]=f):(u=e[1],f=e[2]),k.useEffect(u,f);let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{c(0)},e[3]=p):p=e[3];let m;if(e[4]!==r?(m=[r],e[4]=r,e[5]=m):m=e[5],k.useEffect(p,m),!o)return null;let y;e[6]!==i||e[7]!==r||e[8]!==a||e[9]!==l?(y=R=>{R.key==="ArrowDown"?(R.preventDefault(),c(O=>(O+1)%r.length)):R.key==="ArrowUp"?(R.preventDefault(),c(O=>(O-1+r.length)%r.length)):R.key==="Enter"?(R.preventDefault(),r[l]&&(a(r[l]),i(),setTimeout(fat,100))):R.key==="Escape"&&(R.preventDefault(),console.log("Escape key pressed in input"),i())},e[6]=i,e[7]=r,e[8]=a,e[9]=l,e[10]=y):y=e[10];const b=y;let x;e[11]!==s||e[12]!==n?(x=R=>n(R.target.value,s),e[11]=s,e[12]=n,e[13]=x):x=e[13];let S;e[14]!==b||e[15]!==t||e[16]!==x?(S=w.jsx("input",{type:"text",placeholder:"Search notes (Esc to close)",value:t,onChange:x,onKeyDown:b,autoFocus:!0}),e[14]=b,e[15]=t,e[16]=x,e[17]=S):S=e[17];let E;if(e[18]!==i||e[19]!==r||e[20]!==a||e[21]!==l){let R;e[23]!==i||e[24]!==a||e[25]!==l?(R=(O,I)=>w.jsx("li",{className:I===l?"selected":"",onClick:()=>{a(O),i(),setTimeout(pat,100)},children:O.title},O.id),e[23]=i,e[24]=a,e[25]=l,e[26]=R):R=e[26],E=r.map(R),e[18]=i,e[19]=r,e[20]=a,e[21]=l,e[22]=E}else E=e[22];let T;e[27]!==E?(T=w.jsx("ul",{children:E}),e[27]=E,e[28]=T):T=e[28];let A;e[29]!==S||e[30]!==T?(A=w.jsx("div",{className:"command-palette-container",onClick:hat,children:w.jsxs("div",{className:"command-palette-content",children:[S,T]})}),e[29]=S,e[30]=T,e[31]=A):A=e[31];let M;return e[32]!==i||e[33]!==A?(M=w.jsx("div",{className:"command-palette-overlay",onClick:i,children:A}),e[32]=i,e[33]=A,e[34]=M):M=e[34],M};function fat(){const e=document.querySelector(".bn-editor");if(e)e.focus();else{const t=document.querySelector('[contenteditable="true"]');t&&t.focus()}}function hat(e){return e.stopPropagation()}function pat(){const e=document.querySelector(".bn-editor");if(e)e.focus();else{const t=document.querySelector('[contenteditable="true"]');t&&t.focus()}}function mat(e){const t=st.c(2),{wordCount:n}=e;let r;return t[0]!==n?(r=w.jsx("footer",{className:"h-8 border-t border-zinc-800 px-6 flex items-center justify-between text-xs text-zinc-400 flex-shrink-0",children:w.jsx("div",{className:"flex items-center space-x-4",children:w.jsxs("span",{children:["Words: ",n]})})}),t[0]=n,t[1]=r):r=t[1],r}const zr=(...e)=>e.filter(Boolean).join(" "),gat=`
  *:focus-visible {
    outline-offset: 0 !important;
    --ring-offset: 0 !important;
  }
  textarea::-webkit-scrollbar {
    width: 6px;
  }
  textarea::-webkit-scrollbar-track {
    background: transparent;
  }
  textarea::-webkit-scrollbar-thumb {
    background-color: #444444;
    border-radius: 3px;
  }
  textarea::-webkit-scrollbar-thumb:hover {
    background-color: #555555;
  }
`,Ole=document.createElement("style");Ole.innerText=gat;document.head.appendChild(Ole);const Ple=ie.forwardRef((e,t)=>{const n=st.c(9);let r,o;n[0]!==e?({className:r,...o}=e,n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]);let i;n[3]!==r?(i=zr("flex w-full rounded-md border-none bg-transparent px-3 py-2.5 text-base text-gray-100 placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] resize-none scrollbar-thin scrollbar-thumb-[#444444] scrollbar-track-transparent hover:scrollbar-thumb-[#555555]",r),n[3]=r,n[4]=i):i=n[4];let s;return n[5]!==o||n[6]!==t||n[7]!==i?(s=w.jsx("textarea",{className:i,ref:t,rows:1,...o}),n[5]=o,n[6]=t,n[7]=i,n[8]=s):s=n[8],s});Ple.displayName="Textarea";const yat=Unt,bat=Gnt,vat=qnt,Dle=ie.forwardRef((e,t)=>{const n=st.c(11);let r,o,i;n[0]!==e?({className:r,sideOffset:i,...o}=e,n[0]=e,n[1]=r,n[2]=o,n[3]=i):(r=n[1],o=n[2],i=n[3]);const s=i===void 0?4:i;let a;n[4]!==r?(a=zr("z-50 overflow-hidden rounded-md border border-[#333333] bg-[#1F2023] px-3 py-1.5 text-sm text-white shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),n[4]=r,n[5]=a):a=n[5];let l;return n[6]!==o||n[7]!==t||n[8]!==s||n[9]!==a?(l=w.jsx(tae,{ref:t,sideOffset:s,className:a,...o}),n[6]=o,n[7]=t,n[8]=s,n[9]=a,n[10]=l):l=n[10],l});Dle.displayName=tae.displayName;const wat=dnt,xat=fnt,$le=ie.forwardRef((e,t)=>{const n=st.c(9);let r,o;n[0]!==e?({className:r,...o}=e,n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]);let i;n[3]!==r?(i=zr("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),n[3]=r,n[4]=i):i=n[4];let s;return n[5]!==o||n[6]!==t||n[7]!==i?(s=w.jsx(Ose,{ref:t,className:i,...o}),n[5]=o,n[6]=t,n[7]=i,n[8]=s):s=n[8],s});$le.displayName=Ose.displayName;const Lle=ie.forwardRef((e,t)=>{const n=st.c(13);let r,o,i;n[0]!==e?({className:o,children:r,...i}=e,n[0]=e,n[1]=r,n[2]=o,n[3]=i):(r=n[1],o=n[2],i=n[3]);let s;n[4]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsx($le,{}),n[4]=s):s=n[4];let a;n[5]!==o?(a=zr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-[90vw] md:max-w-[800px] translate-x-[-50%] translate-y-[-50%] gap-4 border border-[#333333] bg-[#1F2023] p-0 shadow-xl duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 rounded-2xl",o),n[5]=o,n[6]=a):a=n[6];let l;n[7]===Symbol.for("react.memo_cache_sentinel")?(l=w.jsxs(hnt,{className:"absolute right-4 top-4 z-10 rounded-full bg-[#2E3033]/80 p-2 hover:bg-[#2E3033] transition-all",children:[w.jsx(Om,{className:"h-5 w-5 text-gray-200 hover:text-white"}),w.jsx("span",{className:"sr-only",children:"Close"})]}),n[7]=l):l=n[7];let c;return n[8]!==r||n[9]!==i||n[10]!==t||n[11]!==a?(c=w.jsxs(xat,{children:[s,w.jsxs(Pse,{ref:t,className:a,...i,children:[r,l]})]}),n[8]=r,n[9]=i,n[10]=t,n[11]=a,n[12]=c):c=n[12],c});Lle.displayName=Pse.displayName;const jle=ie.forwardRef((e,t)=>{const n=st.c(9);let r,o;n[0]!==e?({className:r,...o}=e,n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]);let i;n[3]!==r?(i=zr("text-lg font-semibold leading-none tracking-tight text-gray-100",r),n[3]=r,n[4]=i):i=n[4];let s;return n[5]!==o||n[6]!==t||n[7]!==i?(s=w.jsx(Dse,{ref:t,className:i,...o}),n[5]=o,n[6]=t,n[7]=i,n[8]=s):s=n[8],s});jle.displayName=Dse.displayName;const zle=ie.forwardRef((e,t)=>{const n=st.c(13);let r,o,i,s;n[0]!==e?({className:r,variant:i,size:s,...o}=e,n[0]=e,n[1]=r,n[2]=o,n[3]=i,n[4]=s):(r=n[1],o=n[2],i=n[3],s=n[4]);const a=i===void 0?"default":i,l=s===void 0?"default":s;let c;if(n[5]!==r||n[6]!==l||n[7]!==a){const f={default:"bg-white hover:bg-white/80 text-black",outline:"border border-[#444444] bg-transparent hover:bg-[#3A3A40]",ghost:"bg-transparent hover:bg-[#3A3A40]"},p={default:"h-10 px-4 py-2",sm:"h-8 px-3 text-sm",lg:"h-12 px-6",icon:"h-8 w-8 rounded-full aspect-[1/1]"};c=zr("inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50",f[a],p[l],r),n[5]=r,n[6]=l,n[7]=a,n[8]=c}else c=n[8];let u;return n[9]!==o||n[10]!==t||n[11]!==c?(u=w.jsx("button",{className:c,ref:t,...o}),n[9]=o,n[10]=t,n[11]=c,n[12]=u):u=n[12],u});zle.displayName="Button";const Sat=e=>{const t=st.c(17),{isRecording:n,onStartRecording:r,onStopRecording:o,visualizerBars:i}=e,s=i===void 0?32:i,[a,l]=ie.useState(0),c=ie.useRef(null);let u,f;t[0]!==n||t[1]!==r||t[2]!==o||t[3]!==a?(u=()=>(n?(r(),c.current=setInterval(()=>l(Tat),1e3)):(c.current&&(clearInterval(c.current),c.current=null),o(a),l(0)),()=>{c.current&&clearInterval(c.current)}),f=[n,a,r,o],t[0]=n,t[1]=r,t[2]=o,t[3]=a,t[4]=u,t[5]=f):(u=t[4],f=t[5]),ie.useEffect(u,f);const p=_at,m=n?"opacity-100":"opacity-0 h-0";let y;t[6]!==m?(y=zr("flex flex-col items-center justify-center w-full transition-all duration-300 py-3",m),t[6]=m,t[7]=y):y=t[7];let b;t[8]===Symbol.for("react.memo_cache_sentinel")?(b=w.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500 animate-pulse"}),t[8]=b):b=t[8];const x=p(a);let S;t[9]!==x?(S=w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[b,w.jsx("span",{className:"font-mono text-sm text-white/80",children:x})]}),t[9]=x,t[10]=S):S=t[10];let E;t[11]!==s?(E=w.jsx("div",{className:"w-full h-10 flex items-center justify-center gap-0.5 px-4",children:[...Array(s)].map(Aat)}),t[11]=s,t[12]=E):E=t[12];let T;return t[13]!==y||t[14]!==S||t[15]!==E?(T=w.jsxs("div",{className:y,children:[S,E]}),t[13]=y,t[14]=S,t[15]=E,t[16]=T):T=t[16],T},kat=e=>{const t=st.c(11),{imageUrl:n,onClose:r}=e;if(!n)return null;const o=!!n;let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=w.jsx(jle,{className:"sr-only",children:"Image Preview"}),t[0]=i):i=t[0];let s,a,l,c;t[1]===Symbol.for("react.memo_cache_sentinel")?(s={opacity:0,scale:.95},a={opacity:1,scale:1},l={opacity:0,scale:.95},c={duration:.2,ease:"easeOut"},t[1]=s,t[2]=a,t[3]=l,t[4]=c):(s=t[1],a=t[2],l=t[3],c=t[4]);let u;t[5]!==n?(u=w.jsxs(Lle,{className:"p-0 border-none bg-transparent shadow-none max-w-[90vw] md:max-w-[800px]",children:[i,w.jsx(or.div,{initial:s,animate:a,exit:l,transition:c,className:"relative bg-[#1F2023] rounded-2xl overflow-hidden shadow-2xl",children:w.jsx("img",{src:n,alt:"Full preview",className:"w-full max-h-[80vh] object-contain rounded-2xl"})})]}),t[5]=n,t[6]=u):u=t[6];let f;return t[7]!==r||t[8]!==o||t[9]!==u?(f=w.jsx(wat,{open:o,onOpenChange:r,children:u}),t[7]=r,t[8]=o,t[9]=u,t[10]=f):f=t[10],f},Ble=ie.createContext({isLoading:!1,value:"",setValue:()=>{},maxHeight:240,onSubmit:void 0,disabled:!1});function Vle(){const e=ie.useContext(Ble);if(!e)throw new Error("usePromptInput must be used within a PromptInput");return e}const Fle=ie.forwardRef((e,t)=>{const n=st.c(22),{className:r,isLoading:o,maxHeight:i,value:s,onValueChange:a,onSubmit:l,children:c,disabled:u,onDragOver:f,onDragLeave:p,onDrop:m}=e,y=o===void 0?!1:o,b=i===void 0?240:i,x=u===void 0?!1:u,[S,E]=ie.useState(s||"");let T;n[0]!==a?(T=H=>{E(H),a?.(H)},n[0]=a,n[1]=T):T=n[1];const A=T,M=s??S,R=a??A;let O;n[2]!==x||n[3]!==y||n[4]!==b||n[5]!==l||n[6]!==M||n[7]!==R?(O={isLoading:y,value:M,setValue:R,maxHeight:b,onSubmit:l,disabled:x},n[2]=x,n[3]=y,n[4]=b,n[5]=l,n[6]=M,n[7]=R,n[8]=O):O=n[8];const I=y&&"border-red-500/70";let L;n[9]!==r||n[10]!==I?(L=zr("rounded-3xl border border-[#444444] bg-[#1F2023] p-2 shadow-[0_8px_30px_rgba(0,0,0,0.24)] transition-all duration-300",I,r),n[9]=r,n[10]=I,n[11]=L):L=n[11];let $;n[12]!==c||n[13]!==p||n[14]!==f||n[15]!==m||n[16]!==t||n[17]!==L?($=w.jsx("div",{ref:t,className:L,onDragOver:f,onDragLeave:p,onDrop:m,children:c}),n[12]=c,n[13]=p,n[14]=f,n[15]=m,n[16]=t,n[17]=L,n[18]=$):$=n[18];let B;return n[19]!==$||n[20]!==O?(B=w.jsx(yat,{children:w.jsx(Ble.Provider,{value:O,children:$})}),n[19]=$,n[20]=O,n[21]=B):B=n[21],B});Fle.displayName="PromptInput";const Cat=e=>{const t=st.c(28);let n,r,o,i,s;t[0]!==e?({className:n,onKeyDown:r,disableAutosize:s,placeholder:o,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5]);const a=s===void 0?!1:s,{value:l,setValue:c,maxHeight:u,onSubmit:f,disabled:p}=Vle(),m=ie.useRef(null);let y;t[6]!==a||t[7]!==u?(y=()=>{a||!m.current||(m.current.style.height="auto",m.current.style.height=typeof u=="number"?`${Math.min(m.current.scrollHeight,u)}px`:`min(${m.current.scrollHeight}px, ${u})`)},t[6]=a,t[7]=u,t[8]=y):y=t[8];let b;t[9]!==a||t[10]!==u||t[11]!==l?(b=[l,u,a],t[9]=a,t[10]=u,t[11]=l,t[12]=b):b=t[12],ie.useEffect(y,b);let x;t[13]!==r||t[14]!==f?(x=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),f?.()),r?.(M)},t[13]=r,t[14]=f,t[15]=x):x=t[15];const S=x;let E;t[16]!==c?(E=M=>c(M.target.value),t[16]=c,t[17]=E):E=t[17];let T;t[18]!==n?(T=zr("text-base",n),t[18]=n,t[19]=T):T=t[19];let A;return t[20]!==p||t[21]!==S||t[22]!==o||t[23]!==i||t[24]!==E||t[25]!==T||t[26]!==l?(A=w.jsx(Ple,{ref:m,value:l,onChange:E,onKeyDown:S,className:T,disabled:p,placeholder:o,...i}),t[20]=p,t[21]=S,t[22]=o,t[23]=i,t[24]=E,t[25]=T,t[26]=l,t[27]=A):A=t[27],A},Eat=e=>{const t=st.c(10);let n,r,o;t[0]!==e?({children:n,className:r,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);let i;t[4]!==r?(i=zr("flex items-center gap-2",r),t[4]=r,t[5]=i):i=t[5];let s;return t[6]!==n||t[7]!==o||t[8]!==i?(s=w.jsx("div",{className:i,...o,children:n}),t[6]=n,t[7]=o,t[8]=i,t[9]=s):s=t[9],s},tU=e=>{const t=st.c(17);let n,r,o,i,s;t[0]!==e?({tooltip:s,children:n,className:r,side:i,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5]);const a=i===void 0?"top":i,{disabled:l}=Vle();let c;t[6]!==n||t[7]!==l?(c=w.jsx(vat,{asChild:!0,disabled:l,children:n}),t[6]=n,t[7]=l,t[8]=c):c=t[8];let u;t[9]!==r||t[10]!==a||t[11]!==s?(u=w.jsx(Dle,{side:a,className:r,children:s}),t[9]=r,t[10]=a,t[11]=s,t[12]=u):u=t[12];let f;return t[13]!==o||t[14]!==c||t[15]!==u?(f=w.jsxs(bat,{...o,children:[c,u]}),t[13]=o,t[14]=c,t[15]=u,t[16]=f):f=t[16],f},nU=()=>{const e=st.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=w.jsx("div",{className:"relative h-6 w-[1.5px] mx-1",children:w.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-[#9b87f5]/70 to-transparent rounded-full",style:{clipPath:"polygon(0% 0%, 100% 0%, 100% 40%, 140% 50%, 100% 60%, 100% 100%, 0% 100%, 0% 60%, -40% 50%, 0% 40%)"}})}),e[0]=t):t=e[0],t},Hle=ie.forwardRef((e,t)=>{const n=st.c(172),{onSend:r,isLoading:o,placeholder:i,className:s}=e,a=r===void 0?Mat:r,l=o===void 0?!1:o,c=i===void 0?"Type your message here...":i,[u,f]=ie.useState("");let p;n[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],n[0]=p):p=n[0];const[m,y]=ie.useState(p);let b;n[1]===Symbol.for("react.memo_cache_sentinel")?(b={},n[1]=b):b=n[1];const[x,S]=ie.useState(b),[E,T]=ie.useState(null),[A,M]=ie.useState(!1),[R,O]=ie.useState(!1),[I,L]=ie.useState(!1),[$,B]=ie.useState(!1),H=ie.useRef(null),V=ie.useRef(null);let W;n[2]===Symbol.for("react.memo_cache_sentinel")?(W=pt=>{pt==="search"?(O(Rat),L(!1)):pt==="think"&&(L(Nat),O(!1))},n[2]=W):W=n[2];const K=W;let z;n[3]===Symbol.for("react.memo_cache_sentinel")?(z=()=>B(Iat),n[3]=z):z=n[3];const G=z,F=Oat;let Z;n[4]===Symbol.for("react.memo_cache_sentinel")?(Z=pt=>{if(!F(pt)){console.log("Only image files are allowed");return}if(pt.size>10485760){console.log("File too large (max 10MB)");return}y([pt]);const tr=new FileReader;tr.onload=Co=>S({[pt.name]:Co.target?.result}),tr.readAsDataURL(pt)},n[4]=Z):Z=n[4];const N=Z,U=Pat,ee=Dat;let D;n[5]===Symbol.for("react.memo_cache_sentinel")?(D=pt=>{pt.preventDefault(),pt.stopPropagation();const Co=Array.from(pt.dataTransfer.files).filter(ml=>F(ml));Co.length>0&&N(Co[0])},n[5]=D):D=n[5];const ae=D;let oe;n[6]!==x||n[7]!==m?(oe=pt=>{const tr=m[pt];tr&&x[tr.name]&&S({}),y([])},n[6]=x,n[7]=m,n[8]=oe):oe=n[8];const he=oe;let le;n[9]===Symbol.for("react.memo_cache_sentinel")?(le=pt=>T(pt),n[9]=le):le=n[9];const ge=le;let Oe;n[10]===Symbol.for("react.memo_cache_sentinel")?(Oe=pt=>{const tr=pt.clipboardData?.items;if(tr){for(let Co=0;Co<tr.length;Co++)if(tr[Co].type.indexOf("image")!==-1){const ml=tr[Co].getAsFile();if(ml){pt.preventDefault(),N(ml);break}}}},n[10]=Oe):Oe=n[10];const je=Oe;let ye,Ie;n[11]===Symbol.for("react.memo_cache_sentinel")?(ye=()=>(document.addEventListener("paste",je),()=>document.removeEventListener("paste",je)),Ie=[je],n[11]=ye,n[12]=Ie):(ye=n[11],Ie=n[12]),ie.useEffect(ye,Ie);let Le;n[13]!==m||n[14]!==u||n[15]!==a||n[16]!==$||n[17]!==R||n[18]!==I?(Le=()=>{if(u.trim()||m.length>0){let pt="";R?pt="[Search: ":I?pt="[Think: ":$&&(pt="[Canvas: ");const tr=pt?`${pt}${u}]`:u;a(tr,m),f(""),y([]),S({})}},n[13]=m,n[14]=u,n[15]=a,n[16]=$,n[17]=R,n[18]=I,n[19]=Le):Le=n[19];const $e=Le,me=$at;let Re;n[20]!==a?(Re=pt=>{console.log(`Stopped recording after ${pt} seconds`),M(!1),a(`[Voice message - ${pt} seconds]`,[])},n[20]=a,n[21]=Re):Re=n[21];const we=Re,Pe=u.trim()!==""||m.length>0,Ze=A&&"border-red-500/70";let rt;n[22]!==s||n[23]!==Ze?(rt=zr("w-full bg-[#1F2023] border-[#444444] shadow-[0_8px_30px_rgba(0,0,0,0.24)] transition-all duration-300 ease-in-out",Ze,s),n[22]=s,n[23]=Ze,n[24]=rt):rt=n[24];const Bn=l||A,So=t||V;let Sr;n[25]!==x||n[26]!==m||n[27]!==he||n[28]!==A?(Sr=m.length>0&&!A&&w.jsx("div",{className:"flex flex-wrap gap-2 p-0 pb-1 transition-all duration-300",children:m.map((pt,tr)=>w.jsx("div",{className:"relative group",children:pt.type.startsWith("image/")&&x[pt.name]&&w.jsxs("div",{className:"w-16 h-16 rounded-xl overflow-hidden cursor-pointer transition-all duration-300",onClick:()=>ge(x[pt.name]),children:[w.jsx("img",{src:x[pt.name],alt:pt.name,className:"h-full w-full object-cover"}),w.jsx("button",{onClick:Co=>{Co.stopPropagation(),he(tr)},className:"absolute top-1 right-1 rounded-full bg-black/70 p-0.5 opacity-100 transition-opacity",children:w.jsx(Om,{className:"h-3 w-3 text-white"})})]})},tr))}),n[25]=x,n[26]=m,n[27]=he,n[28]=A,n[29]=Sr):Sr=n[29];const Ir=A?"h-0 overflow-hidden opacity-0":"opacity-100";let Ft;n[30]!==Ir?(Ft=zr("transition-all duration-300",Ir),n[30]=Ir,n[31]=Ft):Ft=n[31];const fe=R?"Search the web...":I?"Think deeply...":$?"Create on canvas...":c;let Se;n[32]!==fe?(Se=w.jsx(Cat,{placeholder:fe,className:"text-base"}),n[32]=fe,n[33]=Se):Se=n[33];let Be;n[34]!==Ft||n[35]!==Se?(Be=w.jsx("div",{className:Ft,children:Se}),n[34]=Ft,n[35]=Se,n[36]=Be):Be=n[36];let De;n[37]!==we||n[38]!==A?(De=A&&w.jsx(Sat,{isRecording:A,onStartRecording:me,onStopRecording:we}),n[37]=we,n[38]=A,n[39]=De):De=n[39];const et=A?"opacity-0 invisible h-0":"opacity-100 visible";let an;n[40]!==et?(an=zr("flex items-center gap-1 transition-opacity duration-300",et),n[40]=et,n[41]=an):an=n[41];let Or;n[42]===Symbol.for("react.memo_cache_sentinel")?(Or=()=>H.current?.click(),n[42]=Or):Or=n[42];let hn;n[43]===Symbol.for("react.memo_cache_sentinel")?(hn=w.jsx(UUe,{className:"h-5 w-5 transition-colors"}),n[43]=hn):hn=n[43];let kr;n[44]===Symbol.for("react.memo_cache_sentinel")?(kr=w.jsx("input",{ref:H,type:"file",className:"hidden",onChange:pt=>{pt.target.files&&pt.target.files.length>0&&N(pt.target.files[0]),pt.target&&(pt.target.value="")},accept:"image/*"}),n[44]=kr):kr=n[44];let xn;n[45]!==A?(xn=w.jsx(tU,{tooltip:"Upload image",children:w.jsxs("button",{onClick:Or,className:"flex h-8 w-8 text-[#9CA3AF] cursor-pointer items-center justify-center rounded-full transition-colors hover:bg-gray-600/30 hover:text-[#D1D5DB]",disabled:A,children:[hn,kr]})}),n[45]=A,n[46]=xn):xn=n[46];let pn;n[47]===Symbol.for("react.memo_cache_sentinel")?(pn=()=>K("search"),n[47]=pn):pn=n[47];const qn=R?"bg-[#1EAEDB]/15 border-[#1EAEDB] text-[#1EAEDB]":"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]";let Zn;n[48]!==qn?(Zn=zr("rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8",qn),n[48]=qn,n[49]=Zn):Zn=n[49];const so=R?360:0,Ki=R?1.1:1;let qr;n[50]!==so||n[51]!==Ki?(qr={rotate:so,scale:Ki},n[50]=so,n[51]=Ki,n[52]=qr):qr=n[52];const Qn=R?360:15;let Si;n[53]===Symbol.for("react.memo_cache_sentinel")?(Si={type:"spring",stiffness:300,damping:10},n[53]=Si):Si=n[53];let ao;n[54]!==Qn?(ao={rotate:Qn,scale:1.1,transition:Si},n[54]=Qn,n[55]=ao):ao=n[55];let lr;n[56]===Symbol.for("react.memo_cache_sentinel")?(lr={type:"spring",stiffness:260,damping:25},n[56]=lr):lr=n[56];const ki=R?"text-[#1EAEDB]":"text-inherit";let Fe;n[57]!==ki?(Fe=zr("w-4 h-4",ki),n[57]=ki,n[58]=Fe):Fe=n[58];let Zt;n[59]!==Fe?(Zt=w.jsx(AUe,{className:Fe}),n[59]=Fe,n[60]=Zt):Zt=n[60];let Lo;n[61]!==qr||n[62]!==ao||n[63]!==Zt?(Lo=w.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:w.jsx(or.div,{animate:qr,whileHover:ao,transition:lr,children:Zt})}),n[61]=qr,n[62]=ao,n[63]=Zt,n[64]=Lo):Lo=n[64];let er;n[65]!==R?(er=R&&w.jsx(or.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-xs overflow-hidden whitespace-nowrap text-[#1EAEDB] flex-shrink-0",children:"Search"}),n[65]=R,n[66]=er):er=n[66];let on;n[67]!==er?(on=w.jsx(Wa,{children:er}),n[67]=er,n[68]=on):on=n[68];let Wt;n[69]!==Zn||n[70]!==Lo||n[71]!==on?(Wt=w.jsxs("button",{type:"button",onClick:pn,className:Zn,children:[Lo,on]}),n[69]=Zn,n[70]=Lo,n[71]=on,n[72]=Wt):Wt=n[72];let jo;n[73]===Symbol.for("react.memo_cache_sentinel")?(jo=w.jsx(nU,{}),n[73]=jo):jo=n[73];let Sn;n[74]===Symbol.for("react.memo_cache_sentinel")?(Sn=()=>K("think"),n[74]=Sn):Sn=n[74];const Yi=I?"bg-[#8B5CF6]/15 border-[#8B5CF6] text-[#8B5CF6]":"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]";let zo;n[75]!==Yi?(zo=zr("rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8",Yi),n[75]=Yi,n[76]=zo):zo=n[76];const mu=I?360:0,wa=I?1.1:1;let Ds;n[77]!==mu||n[78]!==wa?(Ds={rotate:mu,scale:wa},n[77]=mu,n[78]=wa,n[79]=Ds):Ds=n[79];const $s=I?360:15;let Ji;n[80]===Symbol.for("react.memo_cache_sentinel")?(Ji={type:"spring",stiffness:300,damping:10},n[80]=Ji):Ji=n[80];let cr;n[81]!==$s?(cr={rotate:$s,scale:1.1,transition:Ji},n[81]=$s,n[82]=cr):cr=n[82];let Xi;n[83]===Symbol.for("react.memo_cache_sentinel")?(Xi={type:"spring",stiffness:260,damping:25},n[83]=Xi):Xi=n[83];const Wn=I?"text-[#8B5CF6]":"text-inherit";let xa;n[84]!==Wn?(xa=zr("w-4 h-4",Wn),n[84]=Wn,n[85]=xa):xa=n[85];let Sa;n[86]!==xa?(Sa=w.jsx(XHe,{className:xa}),n[86]=xa,n[87]=Sa):Sa=n[87];let Bo;n[88]!==Ds||n[89]!==cr||n[90]!==Sa?(Bo=w.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:w.jsx(or.div,{animate:Ds,whileHover:cr,transition:Xi,children:Sa})}),n[88]=Ds,n[89]=cr,n[90]=Sa,n[91]=Bo):Bo=n[91];let Cr;n[92]!==I?(Cr=I&&w.jsx(or.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-xs overflow-hidden whitespace-nowrap text-[#8B5CF6] flex-shrink-0",children:"Think"}),n[92]=I,n[93]=Cr):Cr=n[93];let dl;n[94]!==Cr?(dl=w.jsx(Wa,{children:Cr}),n[94]=Cr,n[95]=dl):dl=n[95];let ka;n[96]!==zo||n[97]!==Bo||n[98]!==dl?(ka=w.jsxs("button",{type:"button",onClick:Sn,className:zo,children:[Bo,dl]}),n[96]=zo,n[97]=Bo,n[98]=dl,n[99]=ka):ka=n[99];let sc;n[100]===Symbol.for("react.memo_cache_sentinel")?(sc=w.jsx(nU,{}),n[100]=sc):sc=n[100];const Ud=$?"bg-[#F97316]/15 border-[#F97316] text-[#F97316]":"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]";let Qi;n[101]!==Ud?(Qi=zr("rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8",Ud),n[101]=Ud,n[102]=Qi):Qi=n[102];const es=$?360:0,ii=$?1.1:1;let Ls;n[103]!==es||n[104]!==ii?(Ls={rotate:es,scale:ii},n[103]=es,n[104]=ii,n[105]=Ls):Ls=n[105];const si=$?360:15;let ts;n[106]===Symbol.for("react.memo_cache_sentinel")?(ts={type:"spring",stiffness:300,damping:10},n[106]=ts):ts=n[106];let js;n[107]!==si?(js={rotate:si,scale:1.1,transition:ts},n[107]=si,n[108]=js):js=n[108];let fl;n[109]===Symbol.for("react.memo_cache_sentinel")?(fl={type:"spring",stiffness:260,damping:25},n[109]=fl):fl=n[109];const Gd=$?"text-[#F97316]":"text-inherit";let Ca;n[110]!==Gd?(Ca=zr("w-4 h-4",Gd),n[110]=Gd,n[111]=Ca):Ca=n[111];let Er;n[112]!==Ca?(Er=w.jsx(SUe,{className:Ca}),n[112]=Ca,n[113]=Er):Er=n[113];let Ci;n[114]!==Ls||n[115]!==js||n[116]!==Er?(Ci=w.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:w.jsx(or.div,{animate:Ls,whileHover:js,transition:fl,children:Er})}),n[114]=Ls,n[115]=js,n[116]=Er,n[117]=Ci):Ci=n[117];let hl;n[118]!==$?(hl=$&&w.jsx(or.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-xs overflow-hidden whitespace-nowrap text-[#F97316] flex-shrink-0",children:"Canvas"}),n[118]=$,n[119]=hl):hl=n[119];let ko;n[120]!==hl?(ko=w.jsx(Wa,{children:hl}),n[120]=hl,n[121]=ko):ko=n[121];let zs;n[122]!==Qi||n[123]!==Ci||n[124]!==ko?(zs=w.jsxs("button",{type:"button",onClick:G,className:Qi,children:[Ci,ko]}),n[122]=Qi,n[123]=Ci,n[124]=ko,n[125]=zs):zs=n[125];let Ei;n[126]!==Wt||n[127]!==ka||n[128]!==zs?(Ei=w.jsxs("div",{className:"flex items-center",children:[Wt,jo,ka,sc,zs]}),n[126]=Wt,n[127]=ka,n[128]=zs,n[129]=Ei):Ei=n[129];let pl;n[130]!==an||n[131]!==xn||n[132]!==Ei?(pl=w.jsxs("div",{className:an,children:[xn,Ei]}),n[130]=an,n[131]=xn,n[132]=Ei,n[133]=pl):pl=n[133];const lo=l?"Stop generation":A?"Stop recording":Pe?"Send message":"Voice message",ac=A?"bg-transparent hover:bg-gray-600/30 text-red-500 hover:text-red-400":Pe?"bg-white hover:bg-white/80 text-[#1F2023]":"bg-transparent hover:bg-gray-600/30 text-[#9CA3AF] hover:text-[#D1D5DB]";let Ea;n[134]!==ac?(Ea=zr("h-8 w-8 rounded-full transition-all duration-200",ac),n[134]=ac,n[135]=Ea):Ea=n[135];let ns;n[136]!==$e||n[137]!==Pe||n[138]!==A?(ns=()=>{A?M(!1):Pe?$e():M(!0)},n[136]=$e,n[137]=Pe,n[138]=A,n[139]=ns):ns=n[139];const Bs=l&&!Pe;let Ta;n[140]!==Pe||n[141]!==l||n[142]!==A?(Ta=l?w.jsx(iGe,{className:"h-4 w-4 fill-[#1F2023] animate-pulse"}):A?w.jsx(Une,{className:"h-5 w-5 text-red-500"}):Pe?w.jsx(YHe,{className:"h-4 w-4 text-[#1F2023]"}):w.jsx(DUe,{className:"h-5 w-5 text-[#1F2023] transition-colors"}),n[140]=Pe,n[141]=l,n[142]=A,n[143]=Ta):Ta=n[143];let Vs;n[144]!==Ea||n[145]!==ns||n[146]!==Bs||n[147]!==Ta?(Vs=w.jsx(zle,{variant:"default",size:"icon",className:Ea,onClick:ns,disabled:Bs,children:Ta}),n[144]=Ea,n[145]=ns,n[146]=Bs,n[147]=Ta,n[148]=Vs):Vs=n[148];let co;n[149]!==lo||n[150]!==Vs?(co=w.jsx(tU,{tooltip:lo,children:Vs}),n[149]=lo,n[150]=Vs,n[151]=co):co=n[151];let ai;n[152]!==pl||n[153]!==co?(ai=w.jsxs(Eat,{className:"flex items-center justify-between gap-2 p-0 pt-2",children:[pl,co]}),n[152]=pl,n[153]=co,n[154]=ai):ai=n[154];let _a;n[155]!==$e||n[156]!==u||n[157]!==l||n[158]!==rt||n[159]!==Bn||n[160]!==So||n[161]!==Sr||n[162]!==Be||n[163]!==De||n[164]!==ai?(_a=w.jsxs(Fle,{value:u,onValueChange:f,isLoading:l,onSubmit:$e,className:rt,disabled:Bn,ref:So,onDragOver:U,onDragLeave:ee,onDrop:ae,children:[Sr,Be,De,ai]}),n[155]=$e,n[156]=u,n[157]=l,n[158]=rt,n[159]=Bn,n[160]=So,n[161]=Sr,n[162]=Be,n[163]=De,n[164]=ai,n[165]=_a):_a=n[165];let lc;n[166]===Symbol.for("react.memo_cache_sentinel")?(lc=()=>T(null),n[166]=lc):lc=n[166];let Zr;n[167]!==E?(Zr=w.jsx(kat,{imageUrl:E,onClose:lc}),n[167]=E,n[168]=Zr):Zr=n[168];let gu;return n[169]!==_a||n[170]!==Zr?(gu=w.jsxs(w.Fragment,{children:[_a,Zr]}),n[169]=_a,n[170]=Zr,n[171]=gu):gu=n[171],gu});Hle.displayName="PromptInputBox";function Tat(e){return e+1}function _at(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function Aat(e,t){return w.jsx("div",{className:"w-0.5 rounded-full bg-white/50 animate-pulse",style:{height:`${Math.max(15,Math.random()*100)}%`,animationDelay:`${t*.05}s`,animationDuration:`${.5+Math.random()*.5}s`}},t)}function Mat(){}function Rat(e){return!e}function Nat(e){return!e}function Iat(e){return!e}function Oat(e){return e.type.startsWith("image/")}function Pat(e){e.preventDefault(),e.stopPropagation()}function Dat(e){e.preventDefault(),e.stopPropagation()}function $at(){return console.log("Started recording")}const Lat=async(e,t)=>{if(!e)throw console.error("Editor instance not found"),new Error("Editor not connected");console.log("Executing AI Action:",JSON.stringify(t,null,2));try{switch(t.action){case"insertText":jat(e,t.data);break;case"insertCode":zat(e,t.data);break;case"insertHeading":Bat(e,t.data);break;case"insertParagraph":Vat(e,t.data);break;case"update":Fat(e,t.data);break;case"delete":Hat(e,t.data);break;case"replace":Uat(e,t.data);break;default:const n=Oh(t.data);n&&e.insertInlineContent(n)}console.log("Successfully executed action")}catch(n){throw console.error("Failed to execute AI action:",n),n}},jat=(e,t)=>{const n=Oh(t);n&&e.insertInlineContent(n)},zat=(e,t)=>{const n=t.code||t.text||Oh(t),r=t.language||"plaintext",o=i$(e);o&&e.insertBlocks([{type:"codeBlock",props:{language:r},content:n}],o,"after")},Bat=(e,t)=>{const n=t.text||Oh(t),r=t.level||2,o=i$(e);o&&e.insertBlocks([{type:"heading",props:{level:r},content:n}],o,"after")},Vat=(e,t)=>{const n=t.text||Oh(t),r=i$(e);r&&e.insertBlocks([{type:"paragraph",content:n}],r,"after")},Fat=(e,t)=>{const{blockId:n,searchText:r,newContent:o,newType:i}=t;let s=n;if(!s&&r&&(s=o$(e,r)),!s)throw console.warn("No block found to update"),new Error("Could not find the block to update. Try specifying the text more precisely.");const a={};o&&(a.content=o),i&&(a.type=i),e.updateBlock(s,a),console.log(`Updated block ${s}`)},Hat=(e,t)=>{const{blockIds:n,searchText:r}=t;let o=n||[];if(o.length===0&&r){const i=o$(e,r);i&&(o=[i])}if(o.length===0)throw console.warn("No blocks found to delete"),new Error("Could not find the block(s) to delete.");e.removeBlocks(o),console.log(`Deleted blocks: ${o.join(", ")}`)},Uat=(e,t)=>{const{blockIds:n,searchText:r,newBlocks:o,newContent:i}=t;let s=n||[];if(s.length===0&&r){const l=o$(e,r);l&&(s=[l])}if(s.length===0)throw console.warn("No blocks found to replace"),new Error("Could not find the block(s) to replace.");let a=[];if(o&&Array.isArray(o)?a=o.map(l=>({type:l.type||"paragraph",content:typeof l.content=="string"?l.content:Oh(l),...l.props?{props:l.props}:{}})):i&&(a=[{type:"paragraph",content:i}]),a.length===0)throw new Error("No replacement content provided.");e.replaceBlocks(s,a),console.log(`Replaced blocks: ${s.join(", ")}`)},o$=(e,t)=>{let n=null;const r=t.toLowerCase().trim();return e.forEachBlock(o=>n?!1:Gat(o).toLowerCase().includes(r)?(n=o.id,!1):!0),n},Gat=e=>e.content?typeof e.content=="string"?e.content:Array.isArray(e.content)?e.content.map(t=>t.text||"").join(""):"":"",i$=e=>{const t=e.document;return t&&t.length>0?t[t.length-1].id:null},Oh=e=>{if(!e)return"";if(typeof e=="string")return e;if(e.text)return e.text;if(e.code)return e.code;if(e.content){if(typeof e.content=="string")return e.content;if(Array.isArray(e.content))return e.content.map(t=>typeof t=="string"?t:t.text?t.text:"").join("")}return e.blocks&&Array.isArray(e.blocks)?e.blocks.map(t=>Oh(t)).join(`

`):""},Ule=e=>{switch(e){case"insertCode":case"insertHeading":case"insertText":case"insertParagraph":return{icon:wb,label:"Add",color:"green",textClass:"text-green-400"};case"delete":return{icon:LUe,label:"Delete",color:"red",textClass:"text-red-400"};case"update":return{icon:qUe,label:"Update",color:"yellow",textClass:"text-yellow-400"};case"replace":return{icon:YUe,label:"Replace",color:"blue",textClass:"text-blue-400"};default:return{icon:wb,label:"Edit",color:"zinc",textClass:"text-zinc-400"}}},qat=e=>{const t=e.data||{};return t.text||t.code||t.newContent||t.searchText||""};function Zat(e){const t=st.c(76),{actionDataList:n,status:r,onStatusChange:o}=e,[i,s]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(0),f=n.length,p=f===1;let m;t[0]!==n||t[1]!==o||t[2]!==f?(m=async()=>{const Z=pr.getState().editor;if(!Z){Po.error("Editor not connected");return}l(!0);let N=0;for(let U=0;U<n.length;U++){const ee=n[U];try{await Lat(Z,ee),N++,u(U+1)}catch(D){const ae=D;console.error(`Failed action ${U+1}:`,ae),Po.error(`Action ${U+1} failed: ${ae.message||"Unknown error"}`)}}l(!1),N>0&&(o("approved"),N<f&&Po.success(`Applied ${N}/${f} changes`))},t[0]=n,t[1]=o,t[2]=f,t[3]=m):m=t[3];const y=m;if(r==="approved"){let Z;t[4]===Symbol.for("react.memo_cache_sentinel")?(Z=w.jsx("div",{className:"bg-green-500/20 p-1 rounded",children:w.jsx(KB,{size:14,className:"text-green-400"})}),t[4]=Z):Z=t[4];const N=f>1?"s":"";let U;t[5]!==N||t[6]!==f?(U=w.jsxs("div",{className:"flex items-center gap-2",children:[Z,w.jsxs("span",{className:"text-xs text-green-400 font-medium",children:[f," Change",N," Applied"]})]}),t[5]=N,t[6]=f,t[7]=U):U=t[7];let ee;t[8]!==n?(ee=n.slice(0,3).map(Kat),t[8]=n,t[9]=ee):ee=t[9];let D;t[10]!==f?(D=f>3&&w.jsxs("p",{className:"text-xs text-zinc-600",children:["...and ",f-3," more"]}),t[10]=f,t[11]=D):D=t[11];let ae;t[12]!==ee||t[13]!==D?(ae=w.jsxs("div",{className:"mt-2 space-y-1",children:[ee,D]}),t[12]=ee,t[13]=D,t[14]=ae):ae=t[14];let oe;return t[15]!==U||t[16]!==ae?(oe=w.jsxs("div",{className:"bg-green-950/30 border border-green-800/40 rounded-lg p-3",children:[U,ae]}),t[15]=U,t[16]=ae,t[17]=oe):oe=t[17],oe}if(r==="refused"){let Z;t[18]===Symbol.for("react.memo_cache_sentinel")?(Z=w.jsx("div",{className:"bg-zinc-800 p-1 rounded",children:w.jsx(Om,{size:14,className:"text-zinc-500"})}),t[18]=Z):Z=t[18];const N=f>1?"s":"";let U;return t[19]!==N||t[20]!==f?(U=w.jsx("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-lg p-2 opacity-60",children:w.jsxs("div",{className:"flex items-center gap-2",children:[Z,w.jsxs("span",{className:"text-xs text-zinc-500 line-through",children:[f," change",N," refused"]})]})}),t[19]=N,t[20]=f,t[21]=U):U=t[21],U}let b;t[22]!==n?(b=n.slice(0,3).map(Wat),t[22]=n,t[23]=b):b=t[23];let x;t[24]!==b?(x=w.jsx("div",{className:"flex -space-x-1",children:b}),t[24]=b,t[25]=x):x=t[25];const S=f>1?"s":"";let E;t[26]!==S||t[27]!==f?(E=w.jsxs("span",{className:"text-xs font-semibold text-zinc-200 uppercase tracking-wider",children:[f," Edit",S]}),t[26]=S,t[27]=f,t[28]=E):E=t[28];let T;t[29]!==x||t[30]!==E?(T=w.jsxs("div",{className:"flex items-center gap-2",children:[x,E]}),t[29]=x,t[30]=E,t[31]=T):T=t[31];let A;t[32]!==i||t[33]!==p?(A=!p&&w.jsxs("button",{onClick:()=>s(!i),className:"flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300",children:[i?w.jsx(sUe,{size:14}):w.jsx(GP,{size:14}),i?"Less":"Details"]}),t[32]=i,t[33]=p,t[34]=A):A=t[34];let M;t[35]!==T||t[36]!==A?(M=w.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-zinc-800 bg-zinc-900/80",children:[T,A]}),t[35]=T,t[36]=A,t[37]=M):M=t[37];let R;if(t[38]!==n||t[39]!==i||t[40]!==p||t[41]!==f){let Z;t[43]!==i?(Z=(N,U)=>{const ee=Ule(N.action),D=ee.icon,ae=qat(N);return w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx(D,{size:12,className:`${ee.textClass} mt-0.5 flex-shrink-0`}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm text-zinc-300",children:N.description}),i&&ae&&w.jsxs("p",{className:"text-xs text-zinc-500 font-mono truncate mt-0.5",children:[ae.substring(0,60),ae.length>60?"...":""]})]})]},U)},t[43]=i,t[44]=Z):Z=t[44],R=n.slice(0,i?f:p?1:2).map(Z),t[38]=n,t[39]=i,t[40]=p,t[41]=f,t[42]=R}else R=t[42];let O;t[45]!==i||t[46]!==p||t[47]!==f?(O=!p&&!i&&f>2&&w.jsxs("p",{className:"text-xs text-zinc-500 pl-5",children:["+",f-2," more changes"]}),t[45]=i,t[46]=p,t[47]=f,t[48]=O):O=t[48];let I;t[49]!==O||t[50]!==R?(I=w.jsxs("div",{className:"px-3 py-2 border-b border-zinc-800/50 space-y-1.5",children:[R,O]}),t[49]=O,t[50]=R,t[51]=I):I=t[51];let L;t[52]!==a||t[53]!==c||t[54]!==f?(L=a&&w.jsxs("div",{className:"px-3 py-2 bg-blue-950/30 border-b border-blue-900/30",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),w.jsxs("span",{className:"text-xs text-blue-400",children:["Applying changes... ",c,"/",f]})]}),w.jsx("div",{className:"mt-2 h-1 bg-zinc-800 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${c/f*100}%`}})})]}),t[52]=a,t[53]=c,t[54]=f,t[55]=L):L=t[55];let $;t[56]===Symbol.for("react.memo_cache_sentinel")?($=w.jsx(KB,{size:14}),t[56]=$):$=t[56];const B=p?"Approve":`Approve All (${f})`;let H;t[57]!==y||t[58]!==a||t[59]!==B?(H=w.jsxs("button",{onClick:y,disabled:a,className:"flex-1 bg-green-600 hover:bg-green-500 disabled:bg-green-800 disabled:cursor-not-allowed text-white text-xs font-semibold py-2.5 rounded-md transition-all shadow-md hover:shadow-lg active:scale-95 flex items-center justify-center gap-1.5",children:[$,B]}),t[57]=y,t[58]=a,t[59]=B,t[60]=H):H=t[60];let V;t[61]!==o?(V=()=>o("refused"),t[61]=o,t[62]=V):V=t[62];let W;t[63]===Symbol.for("react.memo_cache_sentinel")?(W=w.jsx(Om,{size:14}),t[63]=W):W=t[63];const K=p?"Refuse":"Refuse All";let z;t[64]!==a||t[65]!==V||t[66]!==K?(z=w.jsxs("button",{onClick:V,disabled:a,className:"flex-1 bg-zinc-800 hover:bg-zinc-700 disabled:cursor-not-allowed text-zinc-400 hover:text-zinc-200 text-xs font-medium py-2.5 rounded-md transition-all active:scale-95 flex items-center justify-center gap-1.5",children:[W,K]}),t[64]=a,t[65]=V,t[66]=K,t[67]=z):z=t[67];let G;t[68]!==H||t[69]!==z?(G=w.jsxs("div",{className:"flex gap-2 p-3 bg-zinc-900/50",children:[H,z]}),t[68]=H,t[69]=z,t[70]=G):G=t[70];let F;return t[71]!==I||t[72]!==L||t[73]!==G||t[74]!==M?(F=w.jsxs("div",{className:"bg-zinc-900 border border-zinc-700/50 rounded-lg overflow-hidden shadow-lg",children:[M,I,L,G]}),t[71]=I,t[72]=L,t[73]=G,t[74]=M,t[75]=F):F=t[75],F}function Wat(e,t){const n=Ule(e.action),r=n.icon;return w.jsx("div",{className:"w-5 h-5 rounded-full bg-zinc-800 border border-zinc-700 flex items-center justify-center",children:w.jsx(r,{size:10,className:n.textClass})},t)}function Kat(e,t){return w.jsxs("p",{className:"text-xs text-zinc-500",children:[" ",e.description]},t)}function Qpt(){}const Yat=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jat=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Xat={};function rU(e,t){return(Xat.jsx?Jat:Yat).test(e)}var Mp={},NM,oU;function Qat(){if(oU)return NM;oU=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",p="comment",m="declaration";NM=function(b,x){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];x=x||{};var S=1,E=1;function T(V){var W=V.match(t);W&&(S+=W.length);var K=V.lastIndexOf(l);E=~K?V.length-K:E+V.length}function A(){var V={line:S,column:E};return function(W){return W.position=new M(V),I(),W}}function M(V){this.start=V,this.end={line:S,column:E},this.source=x.source}M.prototype.content=b;function R(V){var W=new Error(x.source+":"+S+":"+E+": "+V);if(W.reason=V,W.filename=x.source,W.line=S,W.column=E,W.source=b,!x.silent)throw W}function O(V){var W=V.exec(b);if(W){var K=W[0];return T(K),b=b.slice(K.length),W}}function I(){O(n)}function L(V){var W;for(V=V||[];W=$();)W!==!1&&V.push(W);return V}function $(){var V=A();if(!(c!=b.charAt(0)||u!=b.charAt(1))){for(var W=2;f!=b.charAt(W)&&(u!=b.charAt(W)||c!=b.charAt(W+1));)++W;if(W+=2,f===b.charAt(W-1))return R("End of comment missing");var K=b.slice(2,W-2);return E+=2,T(K),b=b.slice(W),E+=2,V({type:p,comment:K})}}function B(){var V=A(),W=O(r);if(W){if($(),!O(o))return R("property missing ':'");var K=O(i),z=V({type:m,property:y(W[0].replace(e,f)),value:K?y(K[0].replace(e,f)):f});return O(s),z}}function H(){var V=[];L(V);for(var W;W=B();)W!==!1&&(V.push(W),L(V));return V}return I(),H()};function y(b){return b?b.replace(a,f):f}return NM}var iU;function elt(){if(iU)return Mp;iU=1;var e=Mp&&Mp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.default=n;const t=e(Qat());function n(r,o){let i=null;if(!r||typeof r!="string")return i;const s=(0,t.default)(r),a=typeof o=="function";return s.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?o(c,u,l):u&&(i=i||{},i[c]=u)}),i}return Mp}var Ey={},sU;function tlt(){if(sU)return Ey;sU=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,i=function(c){return!c||n.test(c)||e.test(c)},s=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),i(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(o,a):c=c.replace(r,a),c.replace(t,s))};return Ey.camelCase=l,Ey}var Ty,aU;function nlt(){if(aU)return Ty;aU=1;var e=Ty&&Ty.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(elt()),n=tlt();function r(o,i){var s={};return!o||typeof o!="string"||(0,t.default)(o,function(a,l){a&&l&&(s[(0,n.camelCase)(a,i)]=l)}),s}return r.default=r,Ty=r,Ty}var rlt=nlt();const olt=Rd(rlt),Gle=qle("end"),s$=qle("start");function qle(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function ilt(e){const t=s$(e),n=Gle(e);if(t&&n)return{start:t,end:n}}function v0(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?lU(e.position):"start"in e||"end"in e?lU(e):"line"in e||"column"in e?cO(e):""}function cO(e){return cU(e&&e.line)+":"+cU(e&&e.column)}function lU(e){return cO(e&&e.start)+"-"+cO(e&&e.end)}function cU(e){return e&&typeof e=="number"?e:1}class oi extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let o="",i={},s=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?o=t:!i.cause&&t&&(s=!0,o=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?i.ruleId=r:(i.source=r.slice(0,l),i.ruleId=r.slice(l+1))}if(!i.place&&i.ancestors&&i.ancestors){const l=i.ancestors[i.ancestors.length-1];l&&(i.place=l.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=a?a.line:void 0,this.name=v0(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=s&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}oi.prototype.file="";oi.prototype.name="";oi.prototype.reason="";oi.prototype.message="";oi.prototype.stack="";oi.prototype.column=void 0;oi.prototype.line=void 0;oi.prototype.ancestors=void 0;oi.prototype.cause=void 0;oi.prototype.fatal=void 0;oi.prototype.place=void 0;oi.prototype.ruleId=void 0;oi.prototype.source=void 0;const a$={}.hasOwnProperty,slt=new Map,alt=/[A-Z]/g,llt=new Set(["table","tbody","thead","tfoot","tr"]),clt=new Set(["td","th"]),Zle="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ult(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=blt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=ylt(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?pv:bX,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Wle(o,e,void 0);return i&&typeof i!="string"?i:o.create(e,o.Fragment,{children:i||void 0},void 0)}function Wle(e,t,n){if(t.type==="element")return dlt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return flt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return plt(e,t,n);if(t.type==="mdxjsEsm")return hlt(e,t);if(t.type==="root")return mlt(e,t,n);if(t.type==="text")return glt(e,t)}function dlt(e,t,n){const r=e.schema;let o=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(o=pv,e.schema=o),e.ancestors.push(t);const i=Yle(e,t.tagName,!1),s=vlt(e,t);let a=c$(e,t);return llt.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!cE(l):!0})),Kle(e,s,i,t),l$(s,a),e.ancestors.pop(),e.schema=r,e.create(t,i,s,n)}function flt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Pb(e,t.position)}function hlt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Pb(e,t.position)}function plt(e,t,n){const r=e.schema;let o=r;t.name==="svg"&&r.space==="html"&&(o=pv,e.schema=o),e.ancestors.push(t);const i=t.name===null?e.Fragment:Yle(e,t.name,!0),s=wlt(e,t),a=c$(e,t);return Kle(e,s,i,t),l$(s,a),e.ancestors.pop(),e.schema=r,e.create(t,i,s,n)}function mlt(e,t,n){const r={};return l$(r,c$(e,t)),e.create(t,e.Fragment,r,n)}function glt(e,t){return t.value}function Kle(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function l$(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function ylt(e,t,n){return r;function r(o,i,s,a){const c=Array.isArray(s.children)?n:t;return a?c(i,s,a):c(i,s)}}function blt(e,t){return n;function n(r,o,i,s){const a=Array.isArray(i.children),l=s$(r);return t(o,i,s,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function vlt(e,t){const n={};let r,o;for(o in t.properties)if(o!=="children"&&a$.call(t.properties,o)){const i=xlt(e,o,t.properties[o]);if(i){const[s,a]=i;e.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&clt.has(t.tagName)?r=a:n[s]=a}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function wlt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const s=i.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Pb(e,t.position);else{const o=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,i=e.evaluater.evaluateExpression(a.expression)}else Pb(e,t.position);else i=r.value===null?!0:r.value;n[o]=i}return n}function c$(e,t){const n=[];let r=-1;const o=e.passKeys?new Map:slt;for(;++r<t.children.length;){const i=t.children[r];let s;if(e.passKeys){const l=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(l){const c=o.get(l)||0;s=l+"-"+c,o.set(l,c+1)}}const a=Wle(e,i,s);a!==void 0&&n.push(a)}return n}function xlt(e,t,n){const r=yX(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?wX(n):xX(n)),r.property==="style"){let o=typeof n=="object"?n:Slt(e,String(n));return e.stylePropertyNameCase==="css"&&(o=klt(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&r.space?$4e[r.property]||r.property:r.attribute,n]}}function Slt(e,t){try{return olt(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,o=new oi("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Zle+"#cannot-parse-style-attribute",o}}function Yle(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let i=-1,s;for(;++i<o.length;){const a=rU(o[i])?{type:"Identifier",name:o[i]}:{type:"Literal",value:o[i]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(i&&a.type==="Literal"),optional:!1}:a}r=s}else r=rU(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const o=r.value;return a$.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(r);Pb(e)}function Pb(e,t){const n=new oi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Zle+"#cannot-handle-mdx-estrees-without-createevaluater",n}function klt(e){const t={};let n;for(n in e)a$.call(e,n)&&(t[Clt(n)]=e[n]);return t}function Clt(e){let t=e.replace(alt,Elt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Elt(e){return"-"+e.toLowerCase()}const IM={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Tlt={};function u$(e,t){const n=Tlt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Jle(e,r,o)}function Jle(e,t,n){if(_lt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return uU(e.children,t,n)}return Array.isArray(e)?uU(e,t,n):""}function uU(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=Jle(e[o],t,n);return r.join("")}function _lt(e){return!!(e&&typeof e=="object")}const dU=document.createElement("i");function d$(e){const t="&"+e+";";dU.innerHTML=t;const n=dU.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ks(e,t,n,r){const o=e.length;let i=0,s;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);i<r.length;)s=r.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function na(e,t){return e.length>0?(ks(e,e.length,0,t),e):t}const fU={}.hasOwnProperty;function Xle(e){const t={};let n=-1;for(;++n<e.length;)Alt(t,e[n]);return t}function Alt(e,t){let n;for(n in t){const o=(fU.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let s;if(i)for(s in i){fU.call(o,s)||(o[s]=[]);const a=i[s];Mlt(o[s],Array.isArray(a)?a:a?[a]:[])}}}function Mlt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ks(e,0,0,r)}function Qle(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ka(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const di=Hd(/[A-Za-z]/),Xo=Hd(/[\dA-Za-z]/),Rlt=Hd(/[#-'*+\--9=?A-Z^-~]/);function Qk(e){return e!==null&&(e<32||e===127)}const uO=Hd(/\d/),Nlt=Hd(/[\dA-Fa-f]/),Ilt=Hd(/[!-/:-@[-`{-~]/);function ot(e){return e!==null&&e<-2}function An(e){return e!==null&&(e<0||e===32)}function jt(e){return e===-2||e===-1||e===32}const JE=Hd(new RegExp("\\p{P}|\\p{S}","u")),bh=Hd(/\s/);function Hd(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function kg(e){const t=[];let n=-1,r=0,o=0;for(;++n<e.length;){const i=e.charCodeAt(n);let s="";if(i===37&&Xo(e.charCodeAt(n+1))&&Xo(e.charCodeAt(n+2)))o=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(s=String.fromCharCode(i));else if(i>55295&&i<57344){const a=e.charCodeAt(n+1);i<56320&&a>56319&&a<57344?(s=String.fromCharCode(i,a),o=1):s=""}else s=String.fromCharCode(i);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+o+1,s=""),o&&(n+=o,o=0)}return t.join("")+e.slice(r)}function Ut(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let i=0;return s;function s(l){return jt(l)?(e.enter(n),a(l)):t(l)}function a(l){return jt(l)&&i++<o?(e.consume(l),a):(e.exit(n),t(l))}}const Olt={tokenize:Plt};function Plt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,o);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ut(e,t,"linePrefix")}function o(a){return e.enter("paragraph"),i(a)}function i(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return ot(a)?(e.consume(a),e.exit("chunkText"),i):(e.consume(a),s)}}const Dlt={tokenize:$lt},hU={tokenize:Llt};function $lt(e){const t=this,n=[];let r=0,o,i,s;return a;function a(T){if(r<n.length){const A=n[r];return t.containerState=A[1],e.attempt(A[0].continuation,l,c)(T)}return c(T)}function l(T){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&E();const A=t.events.length;let M=A,R;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){R=t.events[M][1].end;break}S(r);let O=A;for(;O<t.events.length;)t.events[O][1].end={...R},O++;return ks(t.events,M+1,0,t.events.slice(A)),t.events.length=O,c(T)}return a(T)}function c(T){if(r===n.length){if(!o)return p(T);if(o.currentConstruct&&o.currentConstruct.concrete)return y(T);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(hU,u,f)(T)}function u(T){return o&&E(),S(r),p(T)}function f(T){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,y(T)}function p(T){return t.containerState={},e.attempt(hU,m,y)(T)}function m(T){return r++,n.push([t.currentConstruct,t.containerState]),p(T)}function y(T){if(T===null){o&&E(),S(0),e.consume(T);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:i}),b(T)}function b(T){if(T===null){x(e.exit("chunkFlow"),!0),S(0),e.consume(T);return}return ot(T)?(e.consume(T),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(T),b)}function x(T,A){const M=t.sliceStream(T);if(A&&M.push(null),T.previous=i,i&&(i.next=T),i=T,o.defineSkip(T.start),o.write(M),t.parser.lazy[T.start.line]){let R=o.events.length;for(;R--;)if(o.events[R][1].start.offset<s&&(!o.events[R][1].end||o.events[R][1].end.offset>s))return;const O=t.events.length;let I=O,L,$;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(L){$=t.events[I][1].end;break}L=!0}for(S(r),R=O;R<t.events.length;)t.events[R][1].end={...$},R++;ks(t.events,I+1,0,t.events.slice(O)),t.events.length=R}}function S(T){let A=n.length;for(;A-- >T;){const M=n[A];t.containerState=M[1],M[0].exit.call(t,e)}n.length=T}function E(){o.write([null]),i=void 0,o=void 0,t.containerState._closeFlow=void 0}}function Llt(e,t,n){return Ut(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Vm(e){if(e===null||An(e)||bh(e))return 1;if(JE(e))return 2}function XE(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const i=e[o].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const dO={name:"attention",resolveAll:jlt,tokenize:zlt};function jlt(e,t){let n=-1,r,o,i,s,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},p={...e[n][1].start};pU(f,-l),pU(p,l),s={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:p},i={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},o={type:l>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},e[r][1].end={...s.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=na(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=na(c,[["enter",o,t],["enter",s,t],["exit",s,t],["enter",i,t]]),c=na(c,XE(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=na(c,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=na(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,ks(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function zlt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=Vm(r);let i;return s;function s(l){return i=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===i)return e.consume(l),a;const c=e.exit("attentionSequence"),u=Vm(l),f=!u||u===2&&o||n.includes(l),p=!o||o===2&&u||n.includes(r);return c._open=!!(i===42?f:f&&(o||!p)),c._close=!!(i===42?p:p&&(u||!f)),t(l)}}function pU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Blt={name:"autolink",tokenize:Vlt};function Vlt(e,t,n){let r=0;return o;function o(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(m){return di(m)?(e.consume(m),s):m===64?n(m):c(m)}function s(m){return m===43||m===45||m===46||Xo(m)?(r=1,a(m)):c(m)}function a(m){return m===58?(e.consume(m),r=0,l):(m===43||m===45||m===46||Xo(m))&&r++<32?(e.consume(m),a):(r=0,c(m))}function l(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||Qk(m)?n(m):(e.consume(m),l)}function c(m){return m===64?(e.consume(m),u):Rlt(m)?(e.consume(m),c):n(m)}function u(m){return Xo(m)?f(m):n(m)}function f(m){return m===46?(e.consume(m),r=0,u):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):p(m)}function p(m){if((m===45||Xo(m))&&r++<63){const y=m===45?p:f;return e.consume(m),y}return n(m)}}const Ov={partial:!0,tokenize:Flt};function Flt(e,t,n){return r;function r(i){return jt(i)?Ut(e,o,"linePrefix")(i):o(i)}function o(i){return i===null||ot(i)?t(i):n(i)}}const ece={continuation:{tokenize:Ult},exit:Glt,name:"blockQuote",tokenize:Hlt};function Hlt(e,t,n){const r=this;return o;function o(s){if(s===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),i}return n(s)}function i(s){return jt(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function Ult(e,t,n){const r=this;return o;function o(s){return jt(s)?Ut(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):i(s)}function i(s){return e.attempt(ece,t,n)(s)}}function Glt(e){e.exit("blockQuote")}const tce={name:"characterEscape",tokenize:qlt};function qlt(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),o}function o(i){return Ilt(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const nce={name:"characterReference",tokenize:Zlt};function Zlt(e,t,n){const r=this;let o=0,i,s;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),l}function l(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),i=31,s=Xo,u(f))}function c(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,s=Nlt,u):(e.enter("characterReferenceValue"),i=7,s=uO,u(f))}function u(f){if(f===59&&o){const p=e.exit("characterReferenceValue");return s===Xo&&!d$(r.sliceSerialize(p))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(f)&&o++<i?(e.consume(f),u):n(f)}}const mU={partial:!0,tokenize:Klt},gU={concrete:!0,name:"codeFenced",tokenize:Wlt};function Wlt(e,t,n){const r=this,o={partial:!0,tokenize:M};let i=0,s=0,a;return l;function l(R){return c(R)}function c(R){const O=r.events[r.events.length-1];return i=O&&O[1].type==="linePrefix"?O[2].sliceSerialize(O[1],!0).length:0,a=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(R)}function u(R){return R===a?(s++,e.consume(R),u):s<3?n(R):(e.exit("codeFencedFenceSequence"),jt(R)?Ut(e,f,"whitespace")(R):f(R))}function f(R){return R===null||ot(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(mU,b,A)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(R))}function p(R){return R===null||ot(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(R)):jt(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ut(e,m,"whitespace")(R)):R===96&&R===a?n(R):(e.consume(R),p)}function m(R){return R===null||ot(R)?f(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(R))}function y(R){return R===null||ot(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(R)):R===96&&R===a?n(R):(e.consume(R),y)}function b(R){return e.attempt(o,A,x)(R)}function x(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),S}function S(R){return i>0&&jt(R)?Ut(e,E,"linePrefix",i+1)(R):E(R)}function E(R){return R===null||ot(R)?e.check(mU,b,A)(R):(e.enter("codeFlowValue"),T(R))}function T(R){return R===null||ot(R)?(e.exit("codeFlowValue"),E(R)):(e.consume(R),T)}function A(R){return e.exit("codeFenced"),t(R)}function M(R,O,I){let L=0;return $;function $(K){return R.enter("lineEnding"),R.consume(K),R.exit("lineEnding"),B}function B(K){return R.enter("codeFencedFence"),jt(K)?Ut(R,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):H(K)}function H(K){return K===a?(R.enter("codeFencedFenceSequence"),V(K)):I(K)}function V(K){return K===a?(L++,R.consume(K),V):L>=s?(R.exit("codeFencedFenceSequence"),jt(K)?Ut(R,W,"whitespace")(K):W(K)):I(K)}function W(K){return K===null||ot(K)?(R.exit("codeFencedFence"),O(K)):I(K)}}}function Klt(e,t,n){const r=this;return o;function o(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const OM={name:"codeIndented",tokenize:Jlt},Ylt={partial:!0,tokenize:Xlt};function Jlt(e,t,n){const r=this;return o;function o(c){return e.enter("codeIndented"),Ut(e,i,"linePrefix",5)(c)}function i(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(c):n(c)}function s(c){return c===null?l(c):ot(c)?e.attempt(Ylt,s,l)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||ot(c)?(e.exit("codeFlowValue"),s(c)):(e.consume(c),a)}function l(c){return e.exit("codeIndented"),t(c)}}function Xlt(e,t,n){const r=this;return o;function o(s){return r.parser.lazy[r.now().line]?n(s):ot(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):Ut(e,i,"linePrefix",5)(s)}function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):ot(s)?o(s):n(s)}}const Qlt={name:"codeText",previous:tct,resolve:ect,tokenize:nct};function ect(e){let t=e.length-4,n=3,r,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)o===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(o=r):(r===t||e[r][1].type==="lineEnding")&&(e[o][1].type="codeTextData",r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),t-=r-o-2,r=o+2),o=void 0);return e}function tct(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function nct(e,t,n){let r=0,o,i;return s;function s(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),l):f===96?(i=e.enter("codeTextSequence"),o=0,u(f)):ot(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||ot(f)?(e.exit("codeTextData"),l(f)):(e.consume(f),c)}function u(f){return f===96?(e.consume(f),o++,u):o===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(i.type="codeTextData",c(f))}}class rct{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const o=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return r&&_y(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),_y(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),_y(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);_y(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);_y(this.left,n.reverse())}}}function _y(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function rce(e){const t={};let n=-1,r,o,i,s,a,l,c;const u=new rct(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,oct(u,n)),n=t[n],c=!0);else if(r[1]._container){for(i=n,o=void 0;i--;)if(s=u.get(i),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(o&&(u.get(o)[1].type="lineEndingBlank"),s[1].type="lineEnding",o=i);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;o&&(r[1].end={...u.get(o)[1].start},a=u.slice(o,n),a.unshift(r),u.splice(o,n-o+1,a))}}return ks(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function oct(e,t){const n=e.get(t)[1],r=e.get(t)[2];let o=t-1;const i=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,l=[],c={};let u,f,p=-1,m=n,y=0,b=0;const x=[b];for(;m;){for(;e.get(++o)[1]!==m;);i.push(o),m._tokenizer||(u=r.sliceStream(m),m.next||u.push(null),f&&s.defineSkip(m.start),m._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),m._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(b=p+1,x.push(b),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(s.events=[],m?(m._tokenizer=void 0,m.previous=void 0):x.pop(),p=x.length;p--;){const S=a.slice(x[p],x[p+1]),E=i.pop();l.push([E,E+S.length-1]),e.splice(E,2,S)}for(l.reverse(),p=-1;++p<l.length;)c[y+l[p][0]]=y+l[p][1],y+=l[p][1]-l[p][0]-1;return c}const ict={resolve:act,tokenize:lct},sct={partial:!0,tokenize:cct};function act(e){return rce(e),e}function lct(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(a)}function o(a){return a===null?i(a):ot(a)?e.check(sct,s,i)(a):(e.consume(a),o)}function i(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function cct(e,t,n){const r=this;return o;function o(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Ut(e,i,"linePrefix")}function i(s){if(s===null||ot(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function oce(e,t,n,r,o,i,s,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(S){return S===60?(e.enter(r),e.enter(o),e.enter(i),e.consume(S),e.exit(i),p):S===null||S===32||S===41||Qk(S)?n(S):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),b(S))}function p(S){return S===62?(e.enter(i),e.consume(S),e.exit(i),e.exit(o),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),m(S))}function m(S){return S===62?(e.exit("chunkString"),e.exit(a),p(S)):S===null||S===60||ot(S)?n(S):(e.consume(S),S===92?y:m)}function y(S){return S===60||S===62||S===92?(e.consume(S),m):m(S)}function b(S){return!u&&(S===null||S===41||An(S))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(S)):u<c&&S===40?(e.consume(S),u++,b):S===41?(e.consume(S),u--,b):S===null||S===32||S===40||Qk(S)?n(S):(e.consume(S),S===92?x:b)}function x(S){return S===40||S===41||S===92?(e.consume(S),b):b(S)}}function ice(e,t,n,r,o,i){const s=this;let a=0,l;return c;function c(m){return e.enter(r),e.enter(o),e.consume(m),e.exit(o),e.enter(i),u}function u(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(m):m===93?(e.exit(i),e.enter(o),e.consume(m),e.exit(o),e.exit(r),t):ot(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||ot(m)||a++>999?(e.exit("chunkString"),u(m)):(e.consume(m),l||(l=!jt(m)),m===92?p:f)}function p(m){return m===91||m===92||m===93?(e.consume(m),a++,f):f(m)}}function sce(e,t,n,r,o,i){let s;return a;function a(p){return p===34||p===39||p===40?(e.enter(r),e.enter(o),e.consume(p),e.exit(o),s=p===40?41:p,l):n(p)}function l(p){return p===s?(e.enter(o),e.consume(p),e.exit(o),e.exit(r),t):(e.enter(i),c(p))}function c(p){return p===s?(e.exit(i),l(s)):p===null?n(p):ot(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),Ut(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(p))}function u(p){return p===s||p===null||ot(p)?(e.exit("chunkString"),c(p)):(e.consume(p),p===92?f:u)}function f(p){return p===s||p===92?(e.consume(p),u):u(p)}}function w0(e,t){let n;return r;function r(o){return ot(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r):jt(o)?Ut(e,r,n?"linePrefix":"lineSuffix")(o):t(o)}}const uct={name:"definition",tokenize:fct},dct={partial:!0,tokenize:hct};function fct(e,t,n){const r=this;let o;return i;function i(m){return e.enter("definition"),s(m)}function s(m){return ice.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return o=Ka(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),l):n(m)}function l(m){return An(m)?w0(e,c)(m):c(m)}function c(m){return oce(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function u(m){return e.attempt(dct,f,f)(m)}function f(m){return jt(m)?Ut(e,p,"whitespace")(m):p(m)}function p(m){return m===null||ot(m)?(e.exit("definition"),r.parser.defined.push(o),t(m)):n(m)}}function hct(e,t,n){return r;function r(a){return An(a)?w0(e,o)(a):n(a)}function o(a){return sce(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function i(a){return jt(a)?Ut(e,s,"whitespace")(a):s(a)}function s(a){return a===null||ot(a)?t(a):n(a)}}const pct={name:"hardBreakEscape",tokenize:mct};function mct(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),o}function o(i){return ot(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const gct={name:"headingAtx",resolve:yct,tokenize:bct};function yct(e,t){let n=e.length-2,r=3,o,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(o={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ks(e,r,n-r+1,[["enter",o,t],["enter",i,t],["exit",i,t],["exit",o,t]])),e}function bct(e,t,n){let r=0;return o;function o(u){return e.enter("atxHeading"),i(u)}function i(u){return e.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&r++<6?(e.consume(u),s):u===null||An(u)?(e.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||ot(u)?(e.exit("atxHeading"),t(u)):jt(u)?Ut(e,a,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||An(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),c)}}const vct=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],yU=["pre","script","style","textarea"],wct={concrete:!0,name:"htmlFlow",resolveTo:kct,tokenize:Cct},xct={partial:!0,tokenize:Tct},Sct={partial:!0,tokenize:Ect};function kct(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Cct(e,t,n){const r=this;let o,i,s,a,l;return c;function c(D){return u(D)}function u(D){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(D),f}function f(D){return D===33?(e.consume(D),p):D===47?(e.consume(D),i=!0,b):D===63?(e.consume(D),o=3,r.interrupt?t:N):di(D)?(e.consume(D),s=String.fromCharCode(D),x):n(D)}function p(D){return D===45?(e.consume(D),o=2,m):D===91?(e.consume(D),o=5,a=0,y):di(D)?(e.consume(D),o=4,r.interrupt?t:N):n(D)}function m(D){return D===45?(e.consume(D),r.interrupt?t:N):n(D)}function y(D){const ae="CDATA[";return D===ae.charCodeAt(a++)?(e.consume(D),a===ae.length?r.interrupt?t:H:y):n(D)}function b(D){return di(D)?(e.consume(D),s=String.fromCharCode(D),x):n(D)}function x(D){if(D===null||D===47||D===62||An(D)){const ae=D===47,oe=s.toLowerCase();return!ae&&!i&&yU.includes(oe)?(o=1,r.interrupt?t(D):H(D)):vct.includes(s.toLowerCase())?(o=6,ae?(e.consume(D),S):r.interrupt?t(D):H(D)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(D):i?E(D):T(D))}return D===45||Xo(D)?(e.consume(D),s+=String.fromCharCode(D),x):n(D)}function S(D){return D===62?(e.consume(D),r.interrupt?t:H):n(D)}function E(D){return jt(D)?(e.consume(D),E):$(D)}function T(D){return D===47?(e.consume(D),$):D===58||D===95||di(D)?(e.consume(D),A):jt(D)?(e.consume(D),T):$(D)}function A(D){return D===45||D===46||D===58||D===95||Xo(D)?(e.consume(D),A):M(D)}function M(D){return D===61?(e.consume(D),R):jt(D)?(e.consume(D),M):T(D)}function R(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),l=D,O):jt(D)?(e.consume(D),R):I(D)}function O(D){return D===l?(e.consume(D),l=null,L):D===null||ot(D)?n(D):(e.consume(D),O)}function I(D){return D===null||D===34||D===39||D===47||D===60||D===61||D===62||D===96||An(D)?M(D):(e.consume(D),I)}function L(D){return D===47||D===62||jt(D)?T(D):n(D)}function $(D){return D===62?(e.consume(D),B):n(D)}function B(D){return D===null||ot(D)?H(D):jt(D)?(e.consume(D),B):n(D)}function H(D){return D===45&&o===2?(e.consume(D),z):D===60&&o===1?(e.consume(D),G):D===62&&o===4?(e.consume(D),U):D===63&&o===3?(e.consume(D),N):D===93&&o===5?(e.consume(D),Z):ot(D)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(xct,ee,V)(D)):D===null||ot(D)?(e.exit("htmlFlowData"),V(D)):(e.consume(D),H)}function V(D){return e.check(Sct,W,ee)(D)}function W(D){return e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),K}function K(D){return D===null||ot(D)?V(D):(e.enter("htmlFlowData"),H(D))}function z(D){return D===45?(e.consume(D),N):H(D)}function G(D){return D===47?(e.consume(D),s="",F):H(D)}function F(D){if(D===62){const ae=s.toLowerCase();return yU.includes(ae)?(e.consume(D),U):H(D)}return di(D)&&s.length<8?(e.consume(D),s+=String.fromCharCode(D),F):H(D)}function Z(D){return D===93?(e.consume(D),N):H(D)}function N(D){return D===62?(e.consume(D),U):D===45&&o===2?(e.consume(D),N):H(D)}function U(D){return D===null||ot(D)?(e.exit("htmlFlowData"),ee(D)):(e.consume(D),U)}function ee(D){return e.exit("htmlFlow"),t(D)}}function Ect(e,t,n){const r=this;return o;function o(s){return ot(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):n(s)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function Tct(e,t,n){return r;function r(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(Ov,t,n)}}const _ct={name:"htmlText",tokenize:Act};function Act(e,t,n){const r=this;let o,i,s;return a;function a(N){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(N),l}function l(N){return N===33?(e.consume(N),c):N===47?(e.consume(N),M):N===63?(e.consume(N),T):di(N)?(e.consume(N),I):n(N)}function c(N){return N===45?(e.consume(N),u):N===91?(e.consume(N),i=0,y):di(N)?(e.consume(N),E):n(N)}function u(N){return N===45?(e.consume(N),m):n(N)}function f(N){return N===null?n(N):N===45?(e.consume(N),p):ot(N)?(s=f,G(N)):(e.consume(N),f)}function p(N){return N===45?(e.consume(N),m):f(N)}function m(N){return N===62?z(N):N===45?p(N):f(N)}function y(N){const U="CDATA[";return N===U.charCodeAt(i++)?(e.consume(N),i===U.length?b:y):n(N)}function b(N){return N===null?n(N):N===93?(e.consume(N),x):ot(N)?(s=b,G(N)):(e.consume(N),b)}function x(N){return N===93?(e.consume(N),S):b(N)}function S(N){return N===62?z(N):N===93?(e.consume(N),S):b(N)}function E(N){return N===null||N===62?z(N):ot(N)?(s=E,G(N)):(e.consume(N),E)}function T(N){return N===null?n(N):N===63?(e.consume(N),A):ot(N)?(s=T,G(N)):(e.consume(N),T)}function A(N){return N===62?z(N):T(N)}function M(N){return di(N)?(e.consume(N),R):n(N)}function R(N){return N===45||Xo(N)?(e.consume(N),R):O(N)}function O(N){return ot(N)?(s=O,G(N)):jt(N)?(e.consume(N),O):z(N)}function I(N){return N===45||Xo(N)?(e.consume(N),I):N===47||N===62||An(N)?L(N):n(N)}function L(N){return N===47?(e.consume(N),z):N===58||N===95||di(N)?(e.consume(N),$):ot(N)?(s=L,G(N)):jt(N)?(e.consume(N),L):z(N)}function $(N){return N===45||N===46||N===58||N===95||Xo(N)?(e.consume(N),$):B(N)}function B(N){return N===61?(e.consume(N),H):ot(N)?(s=B,G(N)):jt(N)?(e.consume(N),B):L(N)}function H(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),o=N,V):ot(N)?(s=H,G(N)):jt(N)?(e.consume(N),H):(e.consume(N),W)}function V(N){return N===o?(e.consume(N),o=void 0,K):N===null?n(N):ot(N)?(s=V,G(N)):(e.consume(N),V)}function W(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||An(N)?L(N):(e.consume(N),W)}function K(N){return N===47||N===62||An(N)?L(N):n(N)}function z(N){return N===62?(e.consume(N),e.exit("htmlTextData"),e.exit("htmlText"),t):n(N)}function G(N){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),F}function F(N){return jt(N)?Ut(e,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):Z(N)}function Z(N){return e.enter("htmlTextData"),s(N)}}const f$={name:"labelEnd",resolveAll:Ict,resolveTo:Oct,tokenize:Pct},Mct={tokenize:Dct},Rct={tokenize:$ct},Nct={tokenize:Lct};function Ict(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const o=r.type==="labelImage"?4:2;r.type="data",t+=o}}return e.length!==n.length&&ks(e,0,e.length,n),e}function Oct(e,t){let n=e.length,r=0,o,i,s,a;for(;n--;)if(o=e[n][1],i){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(i=n,o.type!=="labelLink")){r=2;break}}else o.type==="labelEnd"&&(s=n);const l={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[i][1].start},end:{...e[s][1].end}},u={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[s-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=na(a,e.slice(i+1,i+r+3)),a=na(a,[["enter",u,t]]),a=na(a,XE(t.parser.constructs.insideSpan.null,e.slice(i+r+4,s-3),t)),a=na(a,[["exit",u,t],e[s-2],e[s-1],["exit",c,t]]),a=na(a,e.slice(s+1)),a=na(a,[["exit",l,t]]),ks(e,i,e.length,a),e}function Pct(e,t,n){const r=this;let o=r.events.length,i,s;for(;o--;)if((r.events[o][1].type==="labelImage"||r.events[o][1].type==="labelLink")&&!r.events[o][1]._balanced){i=r.events[o][1];break}return a;function a(p){return i?i._inactive?f(p):(s=r.parser.defined.includes(Ka(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),l):n(p)}function l(p){return p===40?e.attempt(Mct,u,s?u:f)(p):p===91?e.attempt(Rct,u,s?c:f)(p):s?u(p):f(p)}function c(p){return e.attempt(Nct,u,f)(p)}function u(p){return t(p)}function f(p){return i._balanced=!0,n(p)}}function Dct(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),o}function o(f){return An(f)?w0(e,i)(f):i(f)}function i(f){return f===41?u(f):oce(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function s(f){return An(f)?w0(e,l)(f):u(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?sce(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return An(f)?w0(e,u)(f):u(f)}function u(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function $ct(e,t,n){const r=this;return o;function o(a){return ice.call(r,e,i,s,"reference","referenceMarker","referenceString")(a)}function i(a){return r.parser.defined.includes(Ka(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function Lct(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),o}function o(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const jct={name:"labelStartImage",resolveAll:f$.resolveAll,tokenize:zct};function zct(e,t,n){const r=this;return o;function o(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),i}function i(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Bct={name:"labelStartLink",resolveAll:f$.resolveAll,tokenize:Vct};function Vct(e,t,n){const r=this;return o;function o(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),i}function i(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const PM={name:"lineEnding",tokenize:Fct};function Fct(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ut(e,t,"linePrefix")}}const Mx={name:"thematicBreak",tokenize:Hct};function Hct(e,t,n){let r=0,o;return i;function i(c){return e.enter("thematicBreak"),s(c)}function s(c){return o=c,a(c)}function a(c){return c===o?(e.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||ot(c))?(e.exit("thematicBreak"),t(c)):n(c)}function l(c){return c===o?(e.consume(c),r++,l):(e.exit("thematicBreakSequence"),jt(c)?Ut(e,a,"whitespace")(c):a(c))}}const Ni={continuation:{tokenize:Zct},exit:Kct,name:"list",tokenize:qct},Uct={partial:!0,tokenize:Yct},Gct={partial:!0,tokenize:Wct};function qct(e,t,n){const r=this,o=r.events[r.events.length-1];let i=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,s=0;return a;function a(m){const y=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:uO(m)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(Mx,n,c)(m):c(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(m)}return n(m)}function l(m){return uO(m)&&++s<10?(e.consume(m),l):(!r.interrupt||s<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),c(m)):n(m)}function c(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Ov,r.interrupt?n:u,e.attempt(Uct,p,f))}function u(m){return r.containerState.initialBlankLine=!0,i++,p(m)}function f(m){return jt(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function Zct(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ov,o,i);function o(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ut(e,t,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!jt(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Gct,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ut(e,e.attempt(Ni,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Wct(e,t,n){const r=this;return Ut(e,o,"listItemIndent",r.containerState.size+1);function o(i){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(i):n(i)}}function Kct(e){e.exit(this.containerState.type)}function Yct(e,t,n){const r=this;return Ut(e,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(i){const s=r.events[r.events.length-1];return!jt(i)&&s&&s[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const bU={name:"setextUnderline",resolveTo:Jct,tokenize:Xct};function Jct(e,t){let n=e.length,r,o,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const s={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",i?(e.splice(o,0,["enter",s,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=s,e.push(["exit",s,t]),e}function Xct(e,t,n){const r=this;let o;return i;function i(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),o=c,s(c)):n(c)}function s(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===o?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),jt(c)?Ut(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||ot(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const Qct={tokenize:eut};function eut(e){const t=this,n=e.attempt(Ov,r,e.attempt(this.parser.constructs.flowInitial,o,Ut(e,e.attempt(this.parser.constructs.flow,o,e.attempt(ict,o)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const tut={resolveAll:lce()},nut=ace("string"),rut=ace("text");function ace(e){return{resolveAll:lce(e==="text"?out:void 0),tokenize:t};function t(n){const r=this,o=this.parser.constructs[e],i=n.attempt(o,s,a);return s;function s(u){return c(u)?i(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),i(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=o[u];let p=-1;if(f)for(;++p<f.length;){const m=f[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function lce(e){return t;function t(n,r){let o=-1,i;for(;++o<=n.length;)i===void 0?n[o]&&n[o][1].type==="data"&&(i=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==i+2&&(n[i][1].end=n[o-1][1].end,n.splice(i+2,o-i-2),o=i+2),i=void 0);return e?e(n,r):n}}function out(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],o=t.sliceStream(r);let i=o.length,s=-1,a=0,l;for(;i--;){const c=o[i];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(c===-2)l=!0,a++;else if(c!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const c={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?s:r.start._bufferIndex+s,_index:r.start._index+i,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const iut={42:Ni,43:Ni,45:Ni,48:Ni,49:Ni,50:Ni,51:Ni,52:Ni,53:Ni,54:Ni,55:Ni,56:Ni,57:Ni,62:ece},sut={91:uct},aut={[-2]:OM,[-1]:OM,32:OM},lut={35:gct,42:Mx,45:[bU,Mx],60:wct,61:bU,95:Mx,96:gU,126:gU},cut={38:nce,92:tce},uut={[-5]:PM,[-4]:PM,[-3]:PM,33:jct,38:nce,42:dO,60:[Blt,_ct],91:Bct,92:[pct,tce],93:f$,95:dO,96:Qlt},dut={null:[dO,tut]},fut={null:[42,95]},hut={null:[]},put=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:fut,contentInitial:sut,disable:hut,document:iut,flow:lut,flowInitial:aut,insideSpan:dut,string:cut,text:uut},Symbol.toStringTag,{value:"Module"}));function mut(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},i=[];let s=[],a=[];const l={attempt:O(M),check:O(R),consume:E,enter:T,exit:A,interrupt:O(R,{interrupt:!0})},c={code:null,containerState:{},defineSkip:b,events:[],now:y,parser:e,previous:null,sliceSerialize:p,sliceStream:m,write:f};let u=t.tokenize.call(c,l);return t.resolveAll&&i.push(t),c;function f(B){return s=na(s,B),x(),s[s.length-1]!==null?[]:(I(t,0),c.events=XE(i,c.events,c),c.events)}function p(B,H){return yut(m(B),H)}function m(B){return gut(s,B)}function y(){const{_bufferIndex:B,_index:H,line:V,column:W,offset:K}=r;return{_bufferIndex:B,_index:H,line:V,column:W,offset:K}}function b(B){o[B.line]=B.column,$()}function x(){let B;for(;r._index<s.length;){const H=s[r._index];if(typeof H=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<H.length;)S(H.charCodeAt(r._bufferIndex));else S(H)}}function S(B){u=u(B)}function E(B){ot(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,$()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=B}function T(B,H){const V=H||{};return V.type=B,V.start=y(),c.events.push(["enter",V,c]),a.push(V),V}function A(B){const H=a.pop();return H.end=y(),c.events.push(["exit",H,c]),H}function M(B,H){I(B,H.from)}function R(B,H){H.restore()}function O(B,H){return V;function V(W,K,z){let G,F,Z,N;return Array.isArray(W)?ee(W):"tokenize"in W?ee([W]):U(W);function U(he){return le;function le(ge){const Oe=ge!==null&&he[ge],je=ge!==null&&he.null,ye=[...Array.isArray(Oe)?Oe:Oe?[Oe]:[],...Array.isArray(je)?je:je?[je]:[]];return ee(ye)(ge)}}function ee(he){return G=he,F=0,he.length===0?z:D(he[F])}function D(he){return le;function le(ge){return N=L(),Z=he,he.partial||(c.currentConstruct=he),he.name&&c.parser.constructs.disable.null.includes(he.name)?oe():he.tokenize.call(H?Object.assign(Object.create(c),H):c,l,ae,oe)(ge)}}function ae(he){return B(Z,N),K}function oe(he){return N.restore(),++F<G.length?D(G[F]):z}}}function I(B,H){B.resolveAll&&!i.includes(B)&&i.push(B),B.resolve&&ks(c.events,H,c.events.length-H,B.resolve(c.events.slice(H),c)),B.resolveTo&&(c.events=B.resolveTo(c.events,c))}function L(){const B=y(),H=c.previous,V=c.currentConstruct,W=c.events.length,K=Array.from(a);return{from:W,restore:z};function z(){r=B,c.previous=H,c.currentConstruct=V,c.events.length=W,a=K,$()}}function $(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function gut(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,i=t.end._bufferIndex;let s;if(n===o)s=[e[n].slice(r,i)];else{if(s=e.slice(n,o),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}i>0&&s.push(e[o].slice(0,i))}return s}function yut(e,t){let n=-1;const r=[];let o;for(;++n<e.length;){const i=e[n];let s;if(typeof i=="string")s=i;else switch(i){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&o)continue;s=" ";break}default:s=String.fromCharCode(i)}o=i===-2,r.push(s)}return r.join("")}function but(e){const r={constructs:Xle([put,...(e||{}).extensions||[]]),content:o(Olt),defined:[],document:o(Dlt),flow:o(Qct),lazy:{},string:o(nut),text:o(rut)};return r;function o(i){return s;function s(a){return mut(r,i,a)}}}function vut(e){for(;!rce(e););return e}const vU=/[\0\t\n\r]/g;function wut(){let e=1,t="",n=!0,r;return o;function o(i,s,a){const l=[];let c,u,f,p,m;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(s||void 0).decode(i)),f=0,t="",n&&(i.charCodeAt(0)===65279&&f++,n=void 0);f<i.length;){if(vU.lastIndex=f,c=vU.exec(i),p=c&&c.index!==void 0?c.index:i.length,m=i.charCodeAt(p),!c){t=i.slice(f);break}if(m===10&&f===p&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<p&&(l.push(i.slice(f,p)),e+=p-f),m){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}f=p+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const xut=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Sut(e){return e.replace(xut,kut)}function kut(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),i=o===120||o===88;return Qle(n.slice(i?2:1),i?16:10)}return d$(n)||e}const cce={}.hasOwnProperty;function Cut(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Eut(n)(vut(but(n).document().write(wut()(e,t,!0))))}function Eut(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Ze),autolinkProtocol:L,autolinkEmail:L,atxHeading:i(me),blockQuote:i(je),characterEscape:L,characterReference:L,codeFenced:i(ye),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:i(ye,s),codeText:i(Ie,s),codeTextData:L,data:L,codeFlowValue:L,definition:i(Le),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:i($e),hardBreakEscape:i(Re),hardBreakTrailing:i(Re),htmlFlow:i(we,s),htmlFlowData:L,htmlText:i(we,s),htmlTextData:L,image:i(Pe),label:s,link:i(Ze),listItem:i(Bn),listItemValue:p,listOrdered:i(rt,f),listUnordered:i(rt),paragraph:i(So),reference:D,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:i(me),strong:i(Sr),thematicBreak:i(Ft)},exit:{atxHeading:l(),atxHeadingSequence:M,autolink:l(),autolinkEmail:Oe,autolinkProtocol:ge,blockQuote:l(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:he,characterReference:le,codeFenced:l(x),codeFencedFence:b,codeFencedFenceInfo:m,codeFencedFenceMeta:y,codeFlowValue:$,codeIndented:l(S),codeText:l(K),codeTextData:$,data:$,definition:l(),definitionDestinationString:A,definitionLabelString:E,definitionTitleString:T,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(V),htmlFlowData:$,htmlText:l(W),htmlTextData:$,image:l(G),label:Z,labelText:F,lineEnding:B,link:l(z),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ae,resourceDestinationString:N,resourceTitleString:U,resource:ee,setextHeading:l(I),setextHeadingLineSequence:O,setextHeadingText:R,strong:l(),thematicBreak:l()}};uce(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(fe){let Se={type:"root",children:[]};const Be={stack:[Se],tokenStack:[],config:t,enter:a,exit:c,buffer:s,resume:u,data:n},De=[];let et=-1;for(;++et<fe.length;)if(fe[et][1].type==="listOrdered"||fe[et][1].type==="listUnordered")if(fe[et][0]==="enter")De.push(et);else{const an=De.pop();et=o(fe,an,et)}for(et=-1;++et<fe.length;){const an=t[fe[et][0]];cce.call(an,fe[et][1].type)&&an[fe[et][1].type].call(Object.assign({sliceSerialize:fe[et][2].sliceSerialize},Be),fe[et][1])}if(Be.tokenStack.length>0){const an=Be.tokenStack[Be.tokenStack.length-1];(an[1]||wU).call(Be,void 0,an[0])}for(Se.position={start:Hu(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:Hu(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},et=-1;++et<t.transforms.length;)Se=t.transforms[et](Se)||Se;return Se}function o(fe,Se,Be){let De=Se-1,et=-1,an=!1,Or,hn,kr,xn;for(;++De<=Be;){const pn=fe[De];switch(pn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{pn[0]==="enter"?et++:et--,xn=void 0;break}case"lineEndingBlank":{pn[0]==="enter"&&(Or&&!xn&&!et&&!kr&&(kr=De),xn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:xn=void 0}if(!et&&pn[0]==="enter"&&pn[1].type==="listItemPrefix"||et===-1&&pn[0]==="exit"&&(pn[1].type==="listUnordered"||pn[1].type==="listOrdered")){if(Or){let qn=De;for(hn=void 0;qn--;){const Zn=fe[qn];if(Zn[1].type==="lineEnding"||Zn[1].type==="lineEndingBlank"){if(Zn[0]==="exit")continue;hn&&(fe[hn][1].type="lineEndingBlank",an=!0),Zn[1].type="lineEnding",hn=qn}else if(!(Zn[1].type==="linePrefix"||Zn[1].type==="blockQuotePrefix"||Zn[1].type==="blockQuotePrefixWhitespace"||Zn[1].type==="blockQuoteMarker"||Zn[1].type==="listItemIndent"))break}kr&&(!hn||kr<hn)&&(Or._spread=!0),Or.end=Object.assign({},hn?fe[hn][1].start:pn[1].end),fe.splice(hn||De,0,["exit",Or,pn[2]]),De++,Be++}if(pn[1].type==="listItemPrefix"){const qn={type:"listItem",_spread:!1,start:Object.assign({},pn[1].start),end:void 0};Or=qn,fe.splice(De,0,["enter",qn,pn[2]]),De++,Be++,kr=void 0,xn=!0}}}return fe[Se][1]._spread=an,Be}function i(fe,Se){return Be;function Be(De){a.call(this,fe(De),De),Se&&Se.call(this,De)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(fe,Se,Be){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([Se,Be||void 0]),fe.position={start:Hu(Se.start),end:void 0}}function l(fe){return Se;function Se(Be){fe&&fe.call(this,Be),c.call(this,Be)}}function c(fe,Se){const Be=this.stack.pop(),De=this.tokenStack.pop();if(De)De[0].type!==fe.type&&(Se?Se.call(this,fe,De[0]):(De[1]||wU).call(this,fe,De[0]));else throw new Error("Cannot close `"+fe.type+"` ("+v0({start:fe.start,end:fe.end})+"): its not open");Be.position.end=Hu(fe.end)}function u(){return u$(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function p(fe){if(this.data.expectingFirstListItemValue){const Se=this.stack[this.stack.length-2];Se.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function m(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.lang=fe}function y(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.meta=fe}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.value=fe.replace(/(\r?\n|\r)$/g,"")}function E(fe){const Se=this.resume(),Be=this.stack[this.stack.length-1];Be.label=Se,Be.identifier=Ka(this.sliceSerialize(fe)).toLowerCase()}function T(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.title=fe}function A(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.url=fe}function M(fe){const Se=this.stack[this.stack.length-1];if(!Se.depth){const Be=this.sliceSerialize(fe).length;Se.depth=Be}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function O(fe){const Se=this.stack[this.stack.length-1];Se.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function L(fe){const Be=this.stack[this.stack.length-1].children;let De=Be[Be.length-1];(!De||De.type!=="text")&&(De=Ir(),De.position={start:Hu(fe.start),end:void 0},Be.push(De)),this.stack.push(De)}function $(fe){const Se=this.stack.pop();Se.value+=this.sliceSerialize(fe),Se.position.end=Hu(fe.end)}function B(fe){const Se=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Be=Se.children[Se.children.length-1];Be.position.end=Hu(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Se.type)&&(L.call(this,fe),$.call(this,fe))}function H(){this.data.atHardBreak=!0}function V(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.value=fe}function W(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.value=fe}function K(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.value=fe}function z(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const Se=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=Se,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function G(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const Se=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=Se,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function F(fe){const Se=this.sliceSerialize(fe),Be=this.stack[this.stack.length-2];Be.label=Sut(Se),Be.identifier=Ka(Se).toLowerCase()}function Z(){const fe=this.stack[this.stack.length-1],Se=this.resume(),Be=this.stack[this.stack.length-1];if(this.data.inReference=!0,Be.type==="link"){const De=fe.children;Be.children=De}else Be.alt=Se}function N(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.url=fe}function U(){const fe=this.resume(),Se=this.stack[this.stack.length-1];Se.title=fe}function ee(){this.data.inReference=void 0}function D(){this.data.referenceType="collapsed"}function ae(fe){const Se=this.resume(),Be=this.stack[this.stack.length-1];Be.label=Se,Be.identifier=Ka(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function oe(fe){this.data.characterReferenceType=fe.type}function he(fe){const Se=this.sliceSerialize(fe),Be=this.data.characterReferenceType;let De;Be?(De=Qle(Se,Be==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):De=d$(Se);const et=this.stack[this.stack.length-1];et.value+=De}function le(fe){const Se=this.stack.pop();Se.position.end=Hu(fe.end)}function ge(fe){$.call(this,fe);const Se=this.stack[this.stack.length-1];Se.url=this.sliceSerialize(fe)}function Oe(fe){$.call(this,fe);const Se=this.stack[this.stack.length-1];Se.url="mailto:"+this.sliceSerialize(fe)}function je(){return{type:"blockquote",children:[]}}function ye(){return{type:"code",lang:null,meta:null,value:""}}function Ie(){return{type:"inlineCode",value:""}}function Le(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $e(){return{type:"emphasis",children:[]}}function me(){return{type:"heading",depth:0,children:[]}}function Re(){return{type:"break"}}function we(){return{type:"html",value:""}}function Pe(){return{type:"image",title:null,url:"",alt:null}}function Ze(){return{type:"link",title:null,url:"",children:[]}}function rt(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function Bn(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function So(){return{type:"paragraph",children:[]}}function Sr(){return{type:"strong",children:[]}}function Ir(){return{type:"text",value:""}}function Ft(){return{type:"thematicBreak"}}}function Hu(e){return{line:e.line,column:e.column,offset:e.offset}}function uce(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?uce(e,r):Tut(e,r)}}function Tut(e,t){let n;for(n in t)if(cce.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function wU(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+v0({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+v0({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+v0({start:t.start,end:t.end})+") is still open")}function dce(e){const t=this;t.parser=n;function n(r){return Cut(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const _ut=Object.freeze(Object.defineProperty({__proto__:null,default:dce},Symbol.toStringTag,{value:"Module"}));function Aut(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Mut(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Rut(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function Nut(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Iut(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Out(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),o=kg(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=i+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function Put(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Dut(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function fce(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const o=e.all(t),i=o[0];i&&i.type==="text"?i.value="["+i.value:o.unshift({type:"text",value:"["});const s=o[o.length-1];return s&&s.type==="text"?s.value+=r:o.push({type:"text",value:r}),o}function $ut(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return fce(e,t);const o={src:kg(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(o.title=r.title);const i={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,i),e.applyData(t,i)}function Lut(e,t){const n={src:kg(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function jut(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function zut(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return fce(e,t);const o={href:kg(r.url||"")};r.title!==null&&r.title!==void 0&&(o.title=r.title);const i={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function But(e,t){const n={href:kg(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Vut(e,t,n){const r=e.all(t),o=n?Fut(n):hce(t),i={},s=[];if(typeof t.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(o||a!==0||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!o?s.push(...u.children):s.push(u)}const l=r[r.length-1];l&&(o||l.type!=="element"||l.tagName!=="p")&&s.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:s};return e.patch(t,c),e.applyData(t,c)}function Fut(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=hce(n[r])}return t}function hce(e){const t=e.spread;return t??e.children.length>1}function Hut(e,t){const n={},r=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<r.length;){const s=r[o];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function Uut(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Gut(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function qut(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Zut(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],s),o.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=s$(t.children[1]),l=Gle(t.children[t.children.length-1]);a&&l&&(s.position={start:a,end:l}),o.push(s)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,i),e.applyData(t,i)}function Wut(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let l=-1;const c=[];for(;++l<a;){const f=t.children[l],p={},m=s?s[l]:void 0;m&&(p.align=m);let y={type:"element",tagName:i,properties:p,children:[]};f&&(y.children=e.all(f),e.patch(f,y),y=e.applyData(f,y)),c.push(y)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,u),e.applyData(t,u)}function Kut(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const xU=9,SU=32;function Yut(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const i=[];for(;r;)i.push(kU(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return i.push(kU(t.slice(o),o>0,!1)),i.join("")}function kU(e,t,n){let r=0,o=e.length;if(t){let i=e.codePointAt(r);for(;i===xU||i===SU;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(o-1);for(;i===xU||i===SU;)o--,i=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}function Jut(e,t){const n={type:"text",value:Yut(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Xut(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const pce={blockquote:Aut,break:Mut,code:Rut,delete:Nut,emphasis:Iut,footnoteReference:Out,heading:Put,html:Dut,imageReference:$ut,image:Lut,inlineCode:jut,linkReference:zut,link:But,listItem:Vut,list:Hut,paragraph:Uut,root:Gut,strong:qut,table:Zut,tableCell:Kut,tableRow:Wut,text:Jut,thematicBreak:Xut,toml:Kw,yaml:Kw,definition:Kw,footnoteDefinition:Kw};function Kw(){}const mce=-1,QE=0,x0=1,eC=2,h$=3,p$=4,m$=5,g$=6,gce=7,yce=8,CU=typeof self=="object"?self:globalThis,Qut=(e,t)=>{const n=(o,i)=>(e.set(i,o),o),r=o=>{if(e.has(o))return e.get(o);const[i,s]=t[o];switch(i){case QE:case mce:return n(s,o);case x0:{const a=n([],o);for(const l of s)a.push(r(l));return a}case eC:{const a=n({},o);for(const[l,c]of s)a[r(l)]=r(c);return a}case h$:return n(new Date(s),o);case p$:{const{source:a,flags:l}=s;return n(new RegExp(a,l),o)}case m$:{const a=n(new Map,o);for(const[l,c]of s)a.set(r(l),r(c));return a}case g$:{const a=n(new Set,o);for(const l of s)a.add(r(l));return a}case gce:{const{name:a,message:l}=s;return n(new CU[a](l),o)}case yce:return n(BigInt(s),o);case"BigInt":return n(Object(BigInt(s)),o);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return n(new DataView(a),s)}}return n(new CU[i](s),o)};return r},EU=e=>Qut(new Map,e)(0),Rp="",{toString:edt}={},{keys:tdt}=Object,Ay=e=>{const t=typeof e;if(t!=="object"||!e)return[QE,t];const n=edt.call(e).slice(8,-1);switch(n){case"Array":return[x0,Rp];case"Object":return[eC,Rp];case"Date":return[h$,Rp];case"RegExp":return[p$,Rp];case"Map":return[m$,Rp];case"Set":return[g$,Rp];case"DataView":return[x0,n]}return n.includes("Array")?[x0,n]:n.includes("Error")?[gce,n]:[eC,n]},Yw=([e,t])=>e===QE&&(t==="function"||t==="symbol"),ndt=(e,t,n,r)=>{const o=(s,a)=>{const l=r.push(s)-1;return n.set(a,l),l},i=s=>{if(n.has(s))return n.get(s);let[a,l]=Ay(s);switch(a){case QE:{let u=s;switch(l){case"bigint":a=yce,u=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return o([mce],s)}return o([a,u],s)}case x0:{if(l){let p=s;return l==="DataView"?p=new Uint8Array(s.buffer):l==="ArrayBuffer"&&(p=new Uint8Array(s)),o([l,[...p]],s)}const u=[],f=o([a,u],s);for(const p of s)u.push(i(p));return f}case eC:{if(l)switch(l){case"BigInt":return o([l,s.toString()],s);case"Boolean":case"Number":case"String":return o([l,s.valueOf()],s)}if(t&&"toJSON"in s)return i(s.toJSON());const u=[],f=o([a,u],s);for(const p of tdt(s))(e||!Yw(Ay(s[p])))&&u.push([i(p),i(s[p])]);return f}case h$:return o([a,s.toISOString()],s);case p$:{const{source:u,flags:f}=s;return o([a,{source:u,flags:f}],s)}case m$:{const u=[],f=o([a,u],s);for(const[p,m]of s)(e||!(Yw(Ay(p))||Yw(Ay(m))))&&u.push([i(p),i(m)]);return f}case g$:{const u=[],f=o([a,u],s);for(const p of s)(e||!Yw(Ay(p)))&&u.push(i(p));return f}}const{message:c}=s;return o([a,{name:l,message:c}],s)};return i},TU=(e,{json:t,lossy:n}={})=>{const r=[];return ndt(!(t||n),!!t,new Map,r)(e),r},tC=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?EU(TU(e,t)):structuredClone(e):(e,t)=>EU(TU(e,t));function bce(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function vce(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function rdt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||bce,r=e.options.footnoteBackLabel||vce,o=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;const u=e.all(c),f=String(c.identifier).toUpperCase(),p=kg(f.toLowerCase());let m=0;const y=[],b=e.footnoteCounts.get(f);for(;b!==void 0&&++m<=b;){y.length>0&&y.push({type:"text",value:" "});let E=typeof n=="string"?n:n(l,m);typeof E=="string"&&(E={type:"text",value:E}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,m),className:["data-footnote-backref"]},children:Array.isArray(E)?E:[E]})}const x=u[u.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const E=x.children[x.children.length-1];E&&E.type==="text"?E.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...y)}else u.push(...y);const S={type:"element",tagName:"li",properties:{id:t+"fn-"+p},children:e.wrap(u,!0)};e.patch(c,S),a.push(S)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...tC(s),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const e2=(function(e){if(e==null)return adt;if(typeof e=="function")return t2(e);if(typeof e=="object")return Array.isArray(e)?odt(e):idt(e);if(typeof e=="string")return sdt(e);throw new Error("Expected function, string, or object as test")});function odt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=e2(e[n]);return t2(r);function r(...o){let i=-1;for(;++i<t.length;)if(t[i].apply(this,o))return!0;return!1}}function idt(e){const t=e;return t2(n);function n(r){const o=r;let i;for(i in e)if(o[i]!==t[i])return!1;return!0}}function sdt(e){return t2(t);function t(n){return n&&n.type===e}}function t2(e){return t;function t(n,r,o){return!!(ldt(n)&&e.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function adt(){return!0}function ldt(e){return e!==null&&typeof e=="object"&&"type"in e}const wce=[],cdt=!0,fO=!1,udt="skip";function xce(e,t,n,r){let o;typeof t=="function"&&typeof n!="function"?(r=n,n=t):o=t;const i=e2(o),s=r?-1:1;a(e,void 0,[])();function a(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const m=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=wce,y,b,x;if((!t||i(l,c,u[u.length-1]||void 0))&&(m=ddt(n(l,u)),m[0]===fO))return m;if("children"in l&&l.children){const S=l;if(S.children&&m[0]!==udt)for(b=(r?S.children.length:-1)+s,x=u.concat(S);b>-1&&b<S.children.length;){const E=S.children[b];if(y=a(E,b,x)(),y[0]===fO)return y;b=typeof y[1]=="number"?y[1]:b+s}}return m}}}function ddt(e){return Array.isArray(e)?e:typeof e=="number"?[cdt,e]:e==null?wce:[e]}function y$(e,t,n,r){let o,i,s;typeof t=="function"&&typeof n!="function"?(i=void 0,s=t,o=n):(i=t,s=n,o=r),xce(e,i,a,o);function a(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return s(l,f,u)}}const hO={}.hasOwnProperty,fdt={};function hdt(e,t){const n=t||fdt,r=new Map,o=new Map,i=new Map,s={...pce,...n.handlers},a={all:c,applyData:mdt,definitionById:r,footnoteById:o,footnoteCounts:i,footnoteOrder:[],handlers:s,one:l,options:n,patch:pdt,wrap:ydt};return y$(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:o,p=String(u.identifier).toUpperCase();f.has(p)||f.set(p,u)}}),a;function l(u,f){const p=u.type,m=a.handlers[p];if(hO.call(a.handlers,p)&&m)return m(a,u,f);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in u){const{children:b,...x}=u,S=tC(x);return S.children=a.all(u),S}return tC(u)}return(a.options.unknownHandler||gdt)(a,u,f)}function c(u){const f=[];if("children"in u){const p=u.children;let m=-1;for(;++m<p.length;){const y=a.one(p[m],u);if(y){if(m&&p[m-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=_U(y.value)),!Array.isArray(y)&&y.type==="element")){const b=y.children[0];b&&b.type==="text"&&(b.value=_U(b.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function pdt(e,t){e.position&&(t.position=ilt(e))}function mdt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,o=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&i&&Object.assign(n.properties,tC(i)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function gdt(e,t){const n=t.data||{},r="value"in t&&!(hO.call(n,"hProperties")||hO.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ydt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function _U(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function AU(e,t){const n=hdt(e,t),r=n.one(e,void 0),o=rdt(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&i.children.push({type:"text",value:`
`},o),i}function Sce(e,t){return e&&"run"in e?async function(n,r){const o=AU(n,{file:r,...t});await e.run(o,r)}:function(n,r){return AU(n,{file:r,...e||t})}}const bdt=Object.freeze(Object.defineProperty({__proto__:null,default:Sce,defaultFootnoteBackContent:bce,defaultFootnoteBackLabel:vce,defaultHandlers:pce},Symbol.toStringTag,{value:"Module"}));function MU(e){if(e)throw e}var DM,RU;function vdt(){if(RU)return DM;RU=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},i=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var u=e.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var p;for(p in c);return typeof p>"u"||e.call(c,p)},s=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(e.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return DM=function l(){var c,u,f,p,m,y,b=arguments[0],x=1,S=arguments.length,E=!1;for(typeof b=="boolean"&&(E=b,b=arguments[1]||{},x=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});x<S;++x)if(c=arguments[x],c!=null)for(u in c)f=a(b,u),p=a(c,u),b!==p&&(E&&p&&(i(p)||(m=o(p)))?(m?(m=!1,y=f&&o(f)?f:[]):y=f&&i(f)?f:{},s(b,{name:u,newValue:l(E,y,p)})):typeof p<"u"&&s(b,{name:u,newValue:p}));return b},DM}var wdt=vdt();const $M=Rd(wdt);function pO(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function xdt(){const e=[],t={run:n,use:r};return t;function n(...o){let i=-1;const s=o.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...o);function a(l,...c){const u=e[++i];let f=-1;if(l){s(l);return}for(;++f<o.length;)(c[f]===null||c[f]===void 0)&&(c[f]=o[f]);o=c,u?Sdt(u,a)(...c):s(null,...c)}}function r(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function Sdt(e,t){let n;return r;function r(...s){const a=e.length>s.length;let l;a&&s.push(o);try{l=e.apply(this,s)}catch(c){const u=c;if(a&&n)throw u;return o(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(i,o):l instanceof Error?o(l):i(l))}function o(s,...a){n||(n=!0,t(s,...a))}function i(s){o(null,s)}}const Nl={basename:kdt,dirname:Cdt,extname:Edt,join:Tdt,sep:"/"};function kdt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Pv(e);let n=0,r=-1,o=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(i){n=o+1;break}}else r<0&&(i=!0,r=o+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,a=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(i){n=o+1;break}}else s<0&&(i=!0,s=o+1),a>-1&&(e.codePointAt(o)===t.codePointAt(a--)?a<0&&(r=o):(a=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function Cdt(e){if(Pv(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Edt(e){Pv(e);let t=e.length,n=-1,r=0,o=-1,i=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?o<0?o=t:i!==1&&(i=1):o>-1&&(i=-1)}return o<0||n<0||i===0||i===1&&o===n-1&&o===r+1?"":e.slice(o,n)}function Tdt(...e){let t=-1,n;for(;++t<e.length;)Pv(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":_dt(n)}function _dt(e){Pv(e);const t=e.codePointAt(0)===47;let n=Adt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Adt(e,t){let n="",r=0,o=-1,i=0,s=-1,a,l;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(o===s-1||i===1))if(o!==s-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),o=s,i=0;continue}}else if(n.length>0){n="",r=0,o=s,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),r=s-o-1;o=s,i=0}else a===46&&i>-1?i++:i=-1}return n}function Pv(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Mdt={cwd:Rdt};function Rdt(){return"/"}function mO(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Ndt(e){if(typeof e=="string")e=new URL(e);else if(!mO(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Idt(e)}function Idt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const LM=["history","path","basename","stem","extname","dirname"];class kce{constructor(t){let n;t?mO(t)?n={path:t}:typeof t=="string"||Odt(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Mdt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<LM.length;){const i=LM[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let o;for(o in n)LM.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?Nl.basename(this.path):void 0}set basename(t){zM(t,"basename"),jM(t,"basename"),this.path=Nl.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Nl.dirname(this.path):void 0}set dirname(t){NU(this.basename,"dirname"),this.path=Nl.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Nl.extname(this.path):void 0}set extname(t){if(jM(t,"extname"),NU(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Nl.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){mO(t)&&(t=Ndt(t)),zM(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Nl.basename(this.path,this.extname):void 0}set stem(t){zM(t,"stem"),jM(t,"stem"),this.path=Nl.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const o=this.message(t,n,r);throw o.fatal=!0,o}info(t,n,r){const o=this.message(t,n,r);return o.fatal=void 0,o}message(t,n,r){const o=new oi(t,n,r);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function jM(e,t){if(e&&e.includes(Nl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Nl.sep+"`")}function zM(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function NU(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Odt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Pdt=(function(e){const r=this.constructor.prototype,o=r[e],i=function(){return o.apply(i,arguments)};return Object.setPrototypeOf(i,r),i}),Ddt={}.hasOwnProperty;class b$ extends Pdt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=xdt()}copy(){const t=new b$;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data($M(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(FM("data",this.frozen),this.namespace[t]=n,this):Ddt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(FM("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const o=n.call(t,...r);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Jw(t),r=this.parser||this.Parser;return BM("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),BM("process",this.parser||this.Parser),VM("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(i,s){const a=Jw(t),l=r.parse(a);r.run(l,a,function(u,f,p){if(u||!f||!p)return c(u);const m=f,y=r.stringify(m,p);Ldt(y)?p.value=y:p.result=y,c(u,p)});function c(u,f){u||!f?s(u):i?i(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),BM("processSync",this.parser||this.Parser),VM("processSync",this.compiler||this.Compiler),this.process(t,o),OU("processSync","process",n),r;function o(i,s){n=!0,MU(i),r=s}}run(t,n,r){IU(t),this.freeze();const o=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(s,a){const l=Jw(n);o.run(t,l,c);function c(u,f,p){const m=f||t;u?a(u):s?s(m):r(void 0,m,p)}}}runSync(t,n){let r=!1,o;return this.run(t,n,i),OU("runSync","run",r),o;function i(s,a){MU(s),o=a,r=!0}}stringify(t,n){this.freeze();const r=Jw(n),o=this.compiler||this.Compiler;return VM("stringify",o),IU(t),o(t,r)}use(t,...n){const r=this.attachers,o=this.namespace;if(FM("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(o.settings=$M(!0,o.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];i(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,p=-1;for(;++f<r.length;)if(r[f][0]===c){p=f;break}if(p===-1)r.push([c,...u]);else if(u.length>0){let[m,...y]=u;const b=r[p][1];pO(b)&&pO(m)&&(m=$M(!0,b,m)),r[p]=[c,m,...y]}}}}const Cce=new b$().freeze();function BM(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function VM(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function FM(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function IU(e){if(!pO(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function OU(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Jw(e){return $dt(e)?e:new kce(e)}function $dt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Ldt(e){return typeof e=="string"||jdt(e)}function jdt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zdt=Object.freeze(Object.defineProperty({__proto__:null,unified:Cce},Symbol.toStringTag,{value:"Module"})),Bdt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",PU=[],DU={allowDangerousHtml:!0},Vdt=/^(https?|ircs?|mailto|xmpp)$/i,Fdt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function $U(e){const t=Hdt(e),n=Udt(e);return Gdt(t.runSync(t.parse(n),n),e)}function Hdt(e){const t=e.rehypePlugins||PU,n=e.remarkPlugins||PU,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...DU}:DU;return Cce().use(dce).use(n).use(Sce,r).use(t)}function Udt(e){const t=e.children||"",n=new kce;return typeof t=="string"&&(n.value=t),n}function Gdt(e,t){const n=t.allowedElements,r=t.allowElement,o=t.components,i=t.disallowedElements,s=t.skipHtml,a=t.unwrapDisallowed,l=t.urlTransform||qdt;for(const u of Fdt)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+Bdt+u.id,void 0);return y$(e,c),ult(e,{Fragment:w.Fragment,components:o,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function c(u,f,p){if(u.type==="raw"&&p&&typeof f=="number")return s?p.children.splice(f,1):p.children[f]={type:"text",value:u.value},f;if(u.type==="element"){let m;for(m in IM)if(Object.hasOwn(IM,m)&&Object.hasOwn(u.properties,m)){const y=u.properties[m],b=IM[m];(b===null||b.includes(u.tagName))&&(u.properties[m]=l(String(y||""),m,u))}}if(u.type==="element"){let m=n?!n.includes(u.tagName):i?i.includes(u.tagName):!1;if(!m&&r&&typeof f=="number"&&(m=!r(u,f,p)),m&&p&&typeof f=="number")return a&&u.children?p.children.splice(f,1,...u.children):p.children.splice(f,1),f}}}function qdt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||n!==-1&&t>n||r!==-1&&t>r||Vdt.test(e.slice(0,t))?e:""}function Zdt(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Wdt(e,t,n){const o=e2((n||{}).ignore||[]),i=Kdt(t);let s=-1;for(;++s<i.length;)xce(e,"text",a);function a(c,u){let f=-1,p;for(;++f<u.length;){const m=u[f],y=p?p.children:void 0;if(o(m,y?y.indexOf(m):void 0,p))return;p=m}if(p)return l(c,u)}function l(c,u){const f=u[u.length-1],p=i[s][0],m=i[s][1];let y=0;const x=f.children.indexOf(c);let S=!1,E=[];p.lastIndex=0;let T=p.exec(c.value);for(;T;){const A=T.index,M={index:T.index,input:T.input,stack:[...u,c]};let R=m(...T,M);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?p.lastIndex=A+1:(y!==A&&E.push({type:"text",value:c.value.slice(y,A)}),Array.isArray(R)?E.push(...R):R&&E.push(R),y=A+T[0].length,S=!0),!p.global)break;T=p.exec(c.value)}return S?(y<c.value.length&&E.push({type:"text",value:c.value.slice(y)}),f.children.splice(x,1,...E)):E=[c],x+E.length}}function Kdt(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const o=n[r];t.push([Ydt(o[0]),Jdt(o[1])])}return t}function Ydt(e){return typeof e=="string"?new RegExp(Zdt(e),"g"):e}function Jdt(e){return typeof e=="function"?e:function(){return e}}const HM="phrasing",UM=["autolink","link","image","label"];function Xdt(){return{transforms:[ift],enter:{literalAutolink:eft,literalAutolinkEmail:GM,literalAutolinkHttp:GM,literalAutolinkWww:GM},exit:{literalAutolink:oft,literalAutolinkEmail:rft,literalAutolinkHttp:tft,literalAutolinkWww:nft}}}function Qdt(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:HM,notInConstruct:UM},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:HM,notInConstruct:UM},{character:":",before:"[ps]",after:"\\/",inConstruct:HM,notInConstruct:UM}]}}function eft(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function GM(e){this.config.enter.autolinkProtocol.call(this,e)}function tft(e){this.config.exit.autolinkProtocol.call(this,e)}function nft(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function rft(e){this.config.exit.autolinkEmail.call(this,e)}function oft(e){this.exit(e)}function ift(e){Wdt(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,sft],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),aft]],{ignore:["link","linkReference"]})}function sft(e,t,n,r,o){let i="";if(!Ece(o)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!lft(n)))return!1;const s=cft(n+r);if(!s[0])return!1;const a={type:"link",title:null,url:i+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[a,{type:"text",value:s[1]}]:a}function aft(e,t,n,r){return!Ece(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function lft(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function cft(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const o=JS(e,"(");let i=JS(e,")");for(;r!==-1&&o>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function Ece(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||bh(n)||JE(n))&&(!t||n!==47)}Tce.peek=bft;function uft(){this.buffer()}function dft(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function fft(){this.buffer()}function hft(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function pft(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ka(this.sliceSerialize(e)).toLowerCase(),n.label=t}function mft(e){this.exit(e)}function gft(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ka(this.sliceSerialize(e)).toLowerCase(),n.label=t}function yft(e){this.exit(e)}function bft(){return"["}function Tce(e,t,n,r){const o=n.createTracker(r);let i=o.move("[^");const s=n.enter("footnoteReference"),a=n.enter("reference");return i+=o.move(n.safe(n.associationId(e),{after:"]",before:i})),a(),s(),i+=o.move("]"),i}function vft(){return{enter:{gfmFootnoteCallString:uft,gfmFootnoteCall:dft,gfmFootnoteDefinitionLabelString:fft,gfmFootnoteDefinition:hft},exit:{gfmFootnoteCallString:pft,gfmFootnoteCall:mft,gfmFootnoteDefinitionLabelString:gft,gfmFootnoteDefinition:yft}}}function wft(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Tce},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,o,i,s){const a=i.createTracker(s);let l=a.move("[^");const c=i.enter("footnoteDefinition"),u=i.enter("label");return l+=a.move(i.safe(i.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,a.current()),t?_ce:xft))),c(),l}}function xft(e,t,n){return t===0?e:_ce(e,t,n)}function _ce(e,t,n){return(n?"":"    ")+e}const Sft=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Ace.peek=_ft;function kft(){return{canContainEols:["delete"],enter:{strikethrough:Eft},exit:{strikethrough:Tft}}}function Cft(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Sft}],handlers:{delete:Ace}}}function Eft(e){this.enter({type:"delete",children:[]},e)}function Tft(e){this.exit(e)}function Ace(e,t,n,r){const o=n.createTracker(r),i=n.enter("strikethrough");let s=o.move("~~");return s+=n.containerPhrasing(e,{...o.current(),before:s,after:"~"}),s+=o.move("~~"),i(),s}function _ft(){return"~"}function Aft(e){return e.length}function Mft(e,t){const n=t||{},r=(n.align||[]).concat(),o=n.stringLength||Aft,i=[],s=[],a=[],l=[];let c=0,u=-1;for(;++u<e.length;){const b=[],x=[];let S=-1;for(e[u].length>c&&(c=e[u].length);++S<e[u].length;){const E=Rft(e[u][S]);if(n.alignDelimiters!==!1){const T=o(E);x[S]=T,(l[S]===void 0||T>l[S])&&(l[S]=T)}b.push(E)}s[u]=b,a[u]=x}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)i[f]=LU(r[f]);else{const b=LU(r);for(;++f<c;)i[f]=b}f=-1;const p=[],m=[];for(;++f<c;){const b=i[f];let x="",S="";b===99?(x=":",S=":"):b===108?x=":":b===114&&(S=":");let E=n.alignDelimiters===!1?1:Math.max(1,l[f]-x.length-S.length);const T=x+"-".repeat(E)+S;n.alignDelimiters!==!1&&(E=x.length+E+S.length,E>l[f]&&(l[f]=E),m[f]=E),p[f]=T}s.splice(1,0,p),a.splice(1,0,m),u=-1;const y=[];for(;++u<s.length;){const b=s[u],x=a[u];f=-1;const S=[];for(;++f<c;){const E=b[f]||"";let T="",A="";if(n.alignDelimiters!==!1){const M=l[f]-(x[f]||0),R=i[f];R===114?T=" ".repeat(M):R===99?M%2?(T=" ".repeat(M/2+.5),A=" ".repeat(M/2-.5)):(T=" ".repeat(M/2),A=T):A=" ".repeat(M)}n.delimiterStart!==!1&&!f&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&E==="")&&(n.delimiterStart!==!1||f)&&S.push(" "),n.alignDelimiters!==!1&&S.push(T),S.push(E),n.alignDelimiters!==!1&&S.push(A),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&S.push("|")}y.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return y.join(`
`)}function Rft(e){return e==null?"":String(e)}function LU(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Nft(e,t,n,r){const o=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const s=n.indentLines(n.containerFlow(e,i.current()),Ift);return o(),s}function Ift(e,t,n){return">"+(n?"":" ")+e}function Oft(e,t){return jU(e,t.inConstruct,!0)&&!jU(e,t.notInConstruct,!1)}function jU(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function zU(e,t,n,r){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&Oft(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Pft(e,t){const n=String(e);let r=n.indexOf(t),o=r,i=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===o?++i>s&&(s=i):i=1,o=r+t.length,r=n.indexOf(t,o);return s}function Dft(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function $ft(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Lft(e,t,n,r){const o=$ft(n),i=e.value||"",s=o==="`"?"GraveAccent":"Tilde";if(Dft(e,n)){const f=n.enter("codeIndented"),p=n.indentLines(i,jft);return f(),p}const a=n.createTracker(r),l=o.repeat(Math.max(Pft(i,o)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(e.lang){const f=n.enter(`codeFencedLang${s}`);u+=a.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${s}`);u+=a.move(" "),u+=a.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...a.current()})),f()}return u+=a.move(`
`),i&&(u+=a.move(i+`
`)),u+=a.move(l),c(),u}function jft(e,t,n){return(n?"":"    ")+e}function v$(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function zft(e,t,n,r){const o=v$(n),i=o==='"'?"Quote":"Apostrophe",s=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=n.enter(`title${i}`),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),a()),s(),c}function Bft(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Db(e){return"&#x"+e.toString(16).toUpperCase()+";"}function nC(e,t,n){const r=Vm(e),o=Vm(t);return r===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Mce.peek=Vft;function Mce(e,t,n,r){const o=Bft(n),i=n.enter("emphasis"),s=n.createTracker(r),a=s.move(o);let l=s.move(n.containerPhrasing(e,{after:o,before:a,...s.current()}));const c=l.charCodeAt(0),u=nC(r.before.charCodeAt(r.before.length-1),c,o);u.inside&&(l=Db(c)+l.slice(1));const f=l.charCodeAt(l.length-1),p=nC(r.after.charCodeAt(0),f,o);p.inside&&(l=l.slice(0,-1)+Db(f));const m=s.move(o);return i(),n.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+m}function Vft(e,t,n){return n.options.emphasis||"*"}function Fft(e,t){let n=!1;return y$(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,fO}),!!((!e.depth||e.depth<3)&&u$(e)&&(t.options.setext||n))}function Hft(e,t,n,r){const o=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(Fft(e,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),p=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return f(),u(),p+`
`+(o===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const s="#".repeat(o),a=n.enter("headingAtx"),l=n.enter("phrasing");i.move(s+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=Db(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,n.options.closeAtx&&(c+=" "+s),l(),a(),c}Rce.peek=Uft;function Rce(e){return e.value||""}function Uft(){return"<"}Nce.peek=Gft;function Nce(e,t,n,r){const o=v$(n),i=o==='"'?"Quote":"Apostrophe",s=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${i}`),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),a()),c+=l.move(")"),s(),c}function Gft(){return"!"}Ice.peek=qft;function Ice(e,t,n,r){const o=e.referenceType,i=n.enter("imageReference");let s=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return s(),n.stack=u,i(),o==="full"||!c||c!==f?l+=a.move(f+"]"):o==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function qft(){return"!"}Oce.peek=Zft;function Oce(e,t,n){let r=e.value||"",o="`",i=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const s=n.unsafe[i],a=n.compilePattern(s);let l;if(s.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return o+r+o}function Zft(){return"`"}function Pce(e,t){const n=u$(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Dce.peek=Wft;function Dce(e,t,n,r){const o=v$(n),i=o==='"'?"Quote":"Apostrophe",s=n.createTracker(r);let a,l;if(Pce(e,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let f=s.move("<");return f+=s.move(n.containerPhrasing(e,{before:f,after:">",...s.current()})),f+=s.move(">"),a(),n.stack=u,f}a=n.enter("link"),l=n.enter("label");let c=s.move("[");return c+=s.move(n.containerPhrasing(e,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(e.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=n.enter("destinationRaw"),c+=s.move(n.safe(e.url,{before:c,after:e.title?" ":")",...s.current()}))),l(),e.title&&(l=n.enter(`title${i}`),c+=s.move(" "+o),c+=s.move(n.safe(e.title,{before:c,after:o,...s.current()})),c+=s.move(o),l()),c+=s.move(")"),a(),c}function Wft(e,t,n){return Pce(e,n)?"<":"["}$ce.peek=Kft;function $ce(e,t,n,r){const o=e.referenceType,i=n.enter("linkReference");let s=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return s(),n.stack=u,i(),o==="full"||!c||c!==f?l+=a.move(f+"]"):o==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Kft(){return"["}function w$(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Yft(e){const t=w$(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Jft(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Lce(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Xft(e,t,n,r){const o=n.enter("list"),i=n.bulletCurrent;let s=e.ordered?Jft(n):w$(n);const a=e.ordered?s==="."?")":".":Yft(n);let l=t&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Lce(n)===s&&u){let f=-1;for(;++f<e.children.length;){const p=e.children[f];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(s=a),n.bulletCurrent=s;const c=n.containerFlow(e,r);return n.bulletLastUsed=s,n.bulletCurrent=i,o(),c}function Qft(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function eht(e,t,n,r){const o=Qft(n);let i=n.bulletCurrent||w$(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let s=i.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const a=n.createTracker(r);a.move(i+" ".repeat(s-i.length)),a.shift(s);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),u);return l(),c;function u(f,p,m){return p?(m?"":" ".repeat(s))+f:(m?i:i+" ".repeat(s-i.length))+f}}function tht(e,t,n,r){const o=n.enter("paragraph"),i=n.enter("phrasing"),s=n.containerPhrasing(e,r);return i(),o(),s}const nht=e2(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function rht(e,t,n,r){return(e.children.some(function(s){return nht(s)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function oht(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}jce.peek=iht;function jce(e,t,n,r){const o=oht(n),i=n.enter("strong"),s=n.createTracker(r),a=s.move(o+o);let l=s.move(n.containerPhrasing(e,{after:o,before:a,...s.current()}));const c=l.charCodeAt(0),u=nC(r.before.charCodeAt(r.before.length-1),c,o);u.inside&&(l=Db(c)+l.slice(1));const f=l.charCodeAt(l.length-1),p=nC(r.after.charCodeAt(0),f,o);p.inside&&(l=l.slice(0,-1)+Db(f));const m=s.move(o+o);return i(),n.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+m}function iht(e,t,n){return n.options.strong||"*"}function sht(e,t,n,r){return n.safe(e.value,r)}function aht(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function lht(e,t,n){const r=(Lce(n)+(n.options.ruleSpaces?" ":"")).repeat(aht(n));return n.options.ruleSpaces?r.slice(0,-1):r}const zce={blockquote:Nft,break:zU,code:Lft,definition:zft,emphasis:Mce,hardBreak:zU,heading:Hft,html:Rce,image:Nce,imageReference:Ice,inlineCode:Oce,link:Dce,linkReference:$ce,list:Xft,listItem:eht,paragraph:tht,root:rht,strong:jce,text:sht,thematicBreak:lht};function cht(){return{enter:{table:uht,tableData:BU,tableHeader:BU,tableRow:fht},exit:{codeText:hht,table:dht,tableData:qM,tableHeader:qM,tableRow:qM}}}function uht(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function dht(e){this.exit(e),this.data.inTable=void 0}function fht(e){this.enter({type:"tableRow",children:[]},e)}function qM(e){this.exit(e)}function BU(e){this.enter({type:"tableCell",children:[]},e)}function hht(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,pht));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function pht(e,t){return t==="|"?t:e}function mht(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,o=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:s,tableCell:l,tableRow:a}};function s(m,y,b,x){return c(u(m,b,x),m.align)}function a(m,y,b,x){const S=f(m,b,x),E=c([S]);return E.slice(0,E.indexOf(`
`))}function l(m,y,b,x){const S=b.enter("tableCell"),E=b.enter("phrasing"),T=b.containerPhrasing(m,{...x,before:i,after:i});return E(),S(),T}function c(m,y){return Mft(m,{align:y,alignDelimiters:r,padding:n,stringLength:o})}function u(m,y,b){const x=m.children;let S=-1;const E=[],T=y.enter("table");for(;++S<x.length;)E[S]=f(x[S],y,b);return T(),E}function f(m,y,b){const x=m.children;let S=-1;const E=[],T=y.enter("tableRow");for(;++S<x.length;)E[S]=l(x[S],m,y,b);return T(),E}function p(m,y,b){let x=zce.inlineCode(m,y,b);return b.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function ght(){return{exit:{taskListCheckValueChecked:VU,taskListCheckValueUnchecked:VU,paragraph:bht}}}function yht(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:vht}}}function VU(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function bht(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const o=t.children;let i=-1,s;for(;++i<o.length;){const a=o[i];if(a.type==="paragraph"){s=a;break}}s===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function vht(e,t,n,r){const o=e.children[0],i=typeof e.checked=="boolean"&&o&&o.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);i&&a.move(s);let l=zce.listItem(e,t,n,{...r,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+s}}function wht(){return[Xdt(),vft(),kft(),cht(),ght()]}function xht(e){return{extensions:[Qdt(),wft(e),Cft(),mht(e),yht()]}}const Sht={tokenize:Aht,partial:!0},Bce={tokenize:Mht,partial:!0},Vce={tokenize:Rht,partial:!0},Fce={tokenize:Nht,partial:!0},kht={tokenize:Iht,partial:!0},Hce={name:"wwwAutolink",tokenize:Tht,previous:Gce},Uce={name:"protocolAutolink",tokenize:_ht,previous:qce},pu={name:"emailAutolink",tokenize:Eht,previous:Zce},ic={};function Cht(){return{text:ic}}let gf=48;for(;gf<123;)ic[gf]=pu,gf++,gf===58?gf=65:gf===91&&(gf=97);ic[43]=pu;ic[45]=pu;ic[46]=pu;ic[95]=pu;ic[72]=[pu,Uce];ic[104]=[pu,Uce];ic[87]=[pu,Hce];ic[119]=[pu,Hce];function Eht(e,t,n){const r=this;let o,i;return s;function s(f){return!gO(f)||!Zce.call(r,r.previous)||x$(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(f))}function a(f){return gO(f)?(e.consume(f),a):f===64?(e.consume(f),l):n(f)}function l(f){return f===46?e.check(kht,u,c)(f):f===45||f===95||Xo(f)?(i=!0,e.consume(f),l):u(f)}function c(f){return e.consume(f),o=!0,l}function u(f){return i&&o&&di(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function Tht(e,t,n){const r=this;return o;function o(s){return s!==87&&s!==119||!Gce.call(r,r.previous)||x$(r.events)?n(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Sht,e.attempt(Bce,e.attempt(Vce,i),n),n)(s))}function i(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function _ht(e,t,n){const r=this;let o="",i=!1;return s;function s(f){return(f===72||f===104)&&qce.call(r,r.previous)&&!x$(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(f),e.consume(f),a):n(f)}function a(f){if(di(f)&&o.length<5)return o+=String.fromCodePoint(f),e.consume(f),a;if(f===58){const p=o.toLowerCase();if(p==="http"||p==="https")return e.consume(f),l}return n(f)}function l(f){return f===47?(e.consume(f),i?c:(i=!0,l)):n(f)}function c(f){return f===null||Qk(f)||An(f)||bh(f)||JE(f)?n(f):e.attempt(Bce,e.attempt(Vce,u),n)(f)}function u(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function Aht(e,t,n){let r=0;return o;function o(s){return(s===87||s===119)&&r<3?(r++,e.consume(s),o):s===46&&r===3?(e.consume(s),i):n(s)}function i(s){return s===null?n(s):t(s)}}function Mht(e,t,n){let r,o,i;return s;function s(c){return c===46||c===95?e.check(Fce,l,a)(c):c===null||An(c)||bh(c)||c!==45&&JE(c)?l(c):(i=!0,e.consume(c),s)}function a(c){return c===95?r=!0:(o=r,r=void 0),e.consume(c),s}function l(c){return o||r||!i?n(c):t(c)}}function Rht(e,t){let n=0,r=0;return o;function o(s){return s===40?(n++,e.consume(s),o):s===41&&r<n?i(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check(Fce,t,i)(s):s===null||An(s)||bh(s)?t(s):(e.consume(s),o)}function i(s){return s===41&&r++,e.consume(s),o}}function Nht(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),i):a===93?(e.consume(a),o):a===60||a===null||An(a)||bh(a)?t(a):n(a)}function o(a){return a===null||a===40||a===91||An(a)||bh(a)?t(a):r(a)}function i(a){return di(a)?s(a):n(a)}function s(a){return a===59?(e.consume(a),r):di(a)?(e.consume(a),s):n(a)}}function Iht(e,t,n){return r;function r(i){return e.consume(i),o}function o(i){return Xo(i)?n(i):t(i)}}function Gce(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||An(e)}function qce(e){return!di(e)}function Zce(e){return!(e===47||gO(e))}function gO(e){return e===43||e===45||e===46||e===95||Xo(e)}function x$(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Oht={tokenize:Vht,partial:!0};function Pht(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:jht,continuation:{tokenize:zht},exit:Bht}},text:{91:{name:"gfmFootnoteCall",tokenize:Lht},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Dht,resolveTo:$ht}}}}function Dht(e,t,n){const r=this;let o=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;o--;){const l=r.events[o][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!s||!s._balanced)return n(l);const c=Ka(r.sliceSerialize({start:s.end,end:r.now()}));return c.codePointAt(0)!==94||!i.includes(c.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function $ht(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function Lht(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,s;return a;function a(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(f){if(i>999||f===93&&!s||f===null||f===91||An(f))return n(f);if(f===93){e.exit("chunkString");const p=e.exit("gfmFootnoteCallString");return o.includes(Ka(r.sliceSerialize(p)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return An(f)||(s=!0),i++,e.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(e.consume(f),i++,c):c(f)}}function jht(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,s=0,a;return l;function l(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(y)}function u(y){if(s>999||y===93&&!a||y===null||y===91||An(y))return n(y);if(y===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return i=Ka(r.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return An(y)||(a=!0),s++,e.consume(y),y===92?f:u}function f(y){return y===91||y===92||y===93?(e.consume(y),s++,u):u(y)}function p(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),o.includes(i)||o.push(i),Ut(e,m,"gfmFootnoteDefinitionWhitespace")):n(y)}function m(y){return t(y)}}function zht(e,t,n){return e.check(Ov,t,e.attempt(Oht,t,n))}function Bht(e){e.exit("gfmFootnoteDefinition")}function Vht(e,t,n){const r=this;return Ut(e,o,"gfmFootnoteDefinitionIndent",5);function o(i){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(i):n(i)}}function Fht(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:o};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function o(s,a){let l=-1;for(;++l<s.length;)if(s[l][0]==="enter"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._close){let c=l;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[l][1].end.offset-s[l][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[l][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[l][1].end)},f={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[l][1].start)},p=[["enter",u,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",f,a]],m=a.parser.constructs.insideSpan.null;m&&ks(p,p.length,0,XE(m,s.slice(c+1,l),a)),ks(p,p.length,0,[["exit",f,a],["enter",s[l][1],a],["exit",s[l][1],a],["exit",u,a]]),ks(s,c-1,l-c+3,p),l=c+p.length-2;break}}for(l=-1;++l<s.length;)s[l][1].type==="strikethroughSequenceTemporary"&&(s[l][1].type="data");return s}function i(s,a,l){const c=this.previous,u=this.events;let f=0;return p;function p(y){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(y):(s.enter("strikethroughSequenceTemporary"),m(y))}function m(y){const b=Vm(c);if(y===126)return f>1?l(y):(s.consume(y),f++,m);if(f<2&&!n)return l(y);const x=s.exit("strikethroughSequenceTemporary"),S=Vm(y);return x._open=!S||S===2&&!!b,x._close=!b||b===2&&!!S,a(y)}}}class Hht{constructor(){this.map=[]}add(t,n,r){Uht(this,t,n,r)}consume(t){if(this.map.sort(function(i,s){return i[0]-s[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let o=r.pop();for(;o;){for(const i of o)t.push(i);o=r.pop()}this.map.length=0}}function Uht(e,t,n,r){let o=0;if(!(n===0&&r.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...r);return}o+=1}e.map.push([t,n,r])}}function Ght(e,t){let n=!1;const r=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function qht(){return{flow:{null:{name:"table",tokenize:Zht,resolveAll:Wht}}}}function Zht(e,t,n){const r=this;let o=0,i=0,s;return a;function a($){let B=r.events.length-1;for(;B>-1;){const W=r.events[B][1].type;if(W==="lineEnding"||W==="linePrefix")B--;else break}const H=B>-1?r.events[B][1].type:null,V=H==="tableHead"||H==="tableRow"?R:l;return V===R&&r.parser.lazy[r.now().line]?n($):V($)}function l($){return e.enter("tableHead"),e.enter("tableRow"),c($)}function c($){return $===124||(s=!0,i+=1),u($)}function u($){return $===null?n($):ot($)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),m):n($):jt($)?Ut(e,u,"whitespace")($):(i+=1,s&&(s=!1,o+=1),$===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),s=!0,u):(e.enter("data"),f($)))}function f($){return $===null||$===124||An($)?(e.exit("data"),u($)):(e.consume($),$===92?p:f)}function p($){return $===92||$===124?(e.consume($),f):f($)}function m($){return r.interrupt=!1,r.parser.lazy[r.now().line]?n($):(e.enter("tableDelimiterRow"),s=!1,jt($)?Ut(e,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):y($))}function y($){return $===45||$===58?x($):$===124?(s=!0,e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),b):M($)}function b($){return jt($)?Ut(e,x,"whitespace")($):x($)}function x($){return $===58?(i+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),S):$===45?(i+=1,S($)):$===null||ot($)?A($):M($)}function S($){return $===45?(e.enter("tableDelimiterFiller"),E($)):M($)}function E($){return $===45?(e.consume($),E):$===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),T):(e.exit("tableDelimiterFiller"),T($))}function T($){return jt($)?Ut(e,A,"whitespace")($):A($)}function A($){return $===124?y($):$===null||ot($)?!s||o!==i?M($):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t($)):M($)}function M($){return n($)}function R($){return e.enter("tableRow"),O($)}function O($){return $===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),O):$===null||ot($)?(e.exit("tableRow"),t($)):jt($)?Ut(e,O,"whitespace")($):(e.enter("data"),I($))}function I($){return $===null||$===124||An($)?(e.exit("data"),O($)):(e.consume($),$===92?L:I)}function L($){return $===92||$===124?(e.consume($),I):I($)}}function Wht(e,t){let n=-1,r=!0,o=0,i=[0,0,0,0],s=[0,0,0,0],a=!1,l=0,c,u,f;const p=new Hht;for(;++n<e.length;){const m=e[n],y=m[1];m[0]==="enter"?y.type==="tableHead"?(a=!1,l!==0&&(FU(p,t,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},p.add(n,0,[["enter",c,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,f=void 0,i=[0,0,0,0],s=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},p.add(n,0,[["enter",u,t]])),o=y.type==="tableDelimiterRow"?2:u?3:1):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(i[1]!==0&&(s[0]=s[1],f=Xw(p,t,i,o,void 0,f),i=[0,0,0,0]),s[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(s[0]=s[1],f=Xw(p,t,i,o,void 0,f)),i=s,s=[i[1],n,0,0])):y.type==="tableHead"?(a=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,i[1]!==0?(s[0]=s[1],f=Xw(p,t,i,o,n,f)):s[1]!==0&&(f=Xw(p,t,s,o,n,f)),o=0):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(s[3]=n)}for(l!==0&&FU(p,t,l,c,u),p.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=Ght(t.events,n))}return e}function Xw(e,t,n,r,o,i){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(i.end=Object.assign({},zp(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const l=zp(t.events,n[1]);if(i={type:s,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const c=zp(t.events,n[2]),u=zp(t.events,n[3]),f={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const p=t.events[n[2]],m=t.events[n[3]];if(p[1].end=Object.assign({},m[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,b=n[3]-n[2]-1;e.add(y,b,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return o!==void 0&&(i.end=Object.assign({},zp(t.events,o)),e.add(o,0,[["exit",i,t]]),i=void 0),i}function FU(e,t,n,r,o){const i=[],s=zp(t.events,n);o&&(o.end=Object.assign({},s),i.push(["exit",o,t])),r.end=Object.assign({},s),i.push(["exit",r,t]),e.add(n+1,0,i)}function zp(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const Kht={name:"tasklistCheck",tokenize:Jht};function Yht(){return{text:{91:Kht}}}function Jht(e,t,n){const r=this;return o;function o(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),i)}function i(l){return An(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),s):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),s):n(l)}function s(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(l)}function a(l){return ot(l)?t(l):jt(l)?e.check({tokenize:Xht},t,n)(l):n(l)}}function Xht(e,t,n){return Ut(e,r,"whitespace");function r(o){return o===null?n(o):t(o)}}function Qht(e){return Xle([Cht(),Pht(),Fht(e),qht(),Yht()])}const ept={};function yO(e){const t=this,n=e||ept,r=t.data(),o=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);o.push(Qht(n)),i.push(wht()),s.push(xht(n))}const tpt=Object.freeze(Object.defineProperty({__proto__:null,default:yO},Symbol.toStringTag,{value:"Module"})),npt=({isOpen:e,onClose:t})=>{const{currentNote:n}=ws(),{googleApiKey:r}=pr(),[o,i]=k.useState("chat"),[s,a]=k.useState({}),[l,c]=k.useState(!1),[u,f]=k.useState(""),p=k.useRef(null),[m,y]=k.useState(null),[b,x]=k.useState(new Date),S=n?s[n.id]||[]:[],E=(I,L)=>{n&&a($=>{const B=[...$[n.id]||[]];return B[I]&&(B[I]={...B[I],actionStatus:L}),{...$,[n.id]:B}})};k.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[S,u,o]),k.useEffect(()=>{if(!r){y(null);return}try{const I=SE({apiKey:r});y(()=>I)}catch(I){console.error("Failed to create Google AI client",I),y(null)}},[r]);const T=async I=>{if(!I.trim())return;if(!r||!m){Po.error("Google API key not configured.",{style:{background:"#333",color:"#fff"}});return}if(!n)return;const L={role:"user",content:I};a($=>({...$,[n.id]:[...$[n.id]||[],L]})),c(!0),f("");try{const $=`You are DaddyAI, a helpful AI assistant in a note-taking app called Logia.

CAPABILITIES:
1. Chat: Answer questions normally.
2. Edit: You can ADD, UPDATE, DELETE, or REPLACE content in the note.

=== INSERT ACTIONS ===

FOR CODE BLOCKS:
{ "type": "editor_action", "action": "insertCode", "description": "Adding code example", "data": { "code": "your code here", "language": "rust" } }

FOR HEADINGS:
{ "type": "editor_action", "action": "insertHeading", "description": "Adding section", "data": { "text": "Heading Text", "level": 2 } }

FOR PLAIN TEXT:
{ "type": "editor_action", "action": "insertText", "description": "Adding paragraph", "data": { "text": "Your text here" } }

=== EDIT ACTIONS ===

TO UPDATE EXISTING CONTENT (find by text, then change):
{ "type": "editor_action", "action": "update", "description": "Fixing typo in X", "data": { "searchText": "text to find", "newContent": "corrected text" } }

TO DELETE CONTENT:
{ "type": "editor_action", "action": "delete", "description": "Removing section", "data": { "searchText": "text in block to delete" } }

TO REPLACE CONTENT:
{ "type": "editor_action", "action": "replace", "description": "Replacing X with Y", "data": { "searchText": "old text", "newContent": "new replacement text" } }

=== RULES ===
- Only output JSON when user asks to edit/add/delete/change the note
- Use "searchText" to find existing content (a unique phrase from that block)
- For regular chat, just respond normally without JSON
- Keep descriptions short and clear
`,B=n?`

Context:
---
${n.content}
---`:"",H=await Dst({model:m("gemini-2.5-flash"),system:$+B,messages:[...S,L]});let V="";for await(const K of H.textStream)V+=K,f(V);const W={role:"assistant",content:V};a(K=>({...K,[n.id]:[...K[n.id]||[],W]})),f("")}catch($){console.error("AI error:",$);let B=" An error occurred while processing your request.";const H=$?.message||$?.toString()||"";H.includes("401")||H.includes("API key")||H.includes("authentication")?B=` **API Key Error**

Your API key may be invalid or expired. Please check your API key in Settings.`:H.includes("429")||H.includes("rate")||H.includes("quota")||H.includes("limit")?B=` **Rate Limited**

You've exceeded the API rate limit. Please wait a moment and try again, or check your quota at [Google AI Studio](https://aistudio.google.com/).`:H.includes("403")||H.includes("forbidden")?B=` **Access Denied**

Your API key doesn't have permission for this model. Check your API key settings.`:(H.includes("network")||H.includes("fetch")||H.includes("connect"))&&(B=` **Network Error**

Couldn't connect to the AI service. Please check your internet connection.`),a(V=>({...V,[n.id]:[...V[n.id]||[],{role:"assistant",content:B}]})),f("")}finally{c(!1)}},M=(I=>{const L=I.getFullYear(),$=I.getMonth(),B=new Date(L,$+1,0).getDate(),H=new Date(L,$,1).getDay(),V=[];for(let W=0;W<H;W++)V.push(null);for(let W=1;W<=B;W++)V.push(new Date(L,$,W));return V})(b),R=()=>x(new Date(b.getFullYear(),b.getMonth()-1,1)),O=()=>x(new Date(b.getFullYear(),b.getMonth()+1,1));return w.jsx(Wa,{children:e&&w.jsx(or.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:1},transition:{duration:.2,ease:"easeInOut"},style:{height:"100%"},children:w.jsx(Boe,{defaultSize:{width:320,height:"100%"},enable:{left:!0},minWidth:300,maxWidth:600,handleClasses:{left:"w-1 bg-zinc-800 hover:bg-zinc-600 transition-colors"},children:w.jsxs("div",{className:"h-full bg-zinc-950 border-l border-zinc-800 flex flex-col shadow-2xl",children:[w.jsx("div",{className:"flex items-center justify-between px-2 py-2 border-b border-zinc-900 bg-zinc-950 sticky top-0 z-10",children:w.jsxs("div",{className:"flex items-center gap-1 bg-zinc-900/50 p-1 rounded-lg",children:[w.jsx("button",{onClick:()=>i("chat"),className:`p-1.5 rounded-md transition-all ${o==="chat"?"bg-zinc-800 text-zinc-100 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"AI Chat",children:w.jsx(jp,{size:16})}),w.jsx("button",{onClick:()=>i("calendar"),className:`p-1.5 rounded-md transition-all ${o==="calendar"?"bg-zinc-800 text-zinc-100 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Calendar",children:w.jsx(_w,{size:16})}),w.jsx("button",{onClick:()=>i("tags"),className:`p-1.5 rounded-md transition-all ${o==="tags"?"bg-zinc-800 text-zinc-100 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Tags & Properties",children:w.jsx(tV,{size:16})})]})}),w.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col bg-zinc-950",children:[o==="chat"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{ref:p,className:"flex-1 overflow-y-auto p-4 space-y-6 scrollbar-thin scrollbar-thumb-zinc-800 scrollbar-track-transparent",children:[S.length===0?w.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6 mt-10",children:[w.jsxs("div",{className:"mb-6 relative",children:[w.jsx("div",{className:"absolute inset-0 bg-blue-500/20 blur-xl rounded-full"}),w.jsx("div",{className:"relative bg-zinc-900 p-4 rounded-xl border border-zinc-800 shadow-lg",children:w.jsx(jp,{size:32,className:"text-blue-400"})})]}),w.jsx("h3",{className:"text-zinc-100 text-lg font-semibold mb-2",children:"What can I help you with?"}),w.jsxs("div",{className:"flex flex-col gap-2 mt-6 w-full max-w-xs",children:[w.jsxs("button",{className:"flex items-center gap-3 w-full p-3 rounded-lg bg-zinc-900/40 hover:bg-zinc-900 border border-zinc-800/50 hover:border-zinc-700 transition-all group text-left",children:[w.jsx("span",{className:"text-zinc-500 group-hover:text-blue-400 transition-colors",children:w.jsx(iV,{size:16})}),w.jsx("span",{className:"text-zinc-400 text-sm group-hover:text-zinc-200",children:"Summarize this note"})]}),w.jsxs("button",{className:"flex items-center gap-3 w-full p-3 rounded-lg bg-zinc-900/40 hover:bg-zinc-900 border border-zinc-800/50 hover:border-zinc-700 transition-all group text-left",children:[w.jsx("span",{className:"text-zinc-500 group-hover:text-blue-400 transition-colors",children:w.jsx(jp,{size:16})}),w.jsx("span",{className:"text-zinc-400 text-sm group-hover:text-zinc-200",children:"Brainstorm ideas"})]})]})]}):S.map((I,L)=>{let $=[],B=I.content;if(I.role==="assistant"){const H=I.content;let V=0;for(;V<H.length;){let W="",K=-1;const z=H.indexOf("{",V),G=H.indexOf("[",V);if(z!==-1&&(G===-1||z<G)?(K=z,W="{"):G!==-1&&(K=G,W="["),K===-1)break;const F=W==="{"?"}":"]";let Z=0,N=-1;for(let U=K;U<H.length;U++)if(H[U]===W)Z++;else if(H[U]===F&&(Z--,Z===0)){N=U;break}if(N!==-1){const U=H.substring(K,N+1);try{const ee=JSON.parse(U);Array.isArray(ee)?(ee.forEach(D=>{D.type==="editor_action"&&$.push(D)}),B=B.replace(U,"").trim()):ee.type==="editor_action"&&($.push(ee),B=B.replace(U,"").trim())}catch{}V=N+1}else break}B=B.replace(/^\s*[\[\],\s]+\s*$/,"").trim()}return w.jsxs("div",{className:`flex gap-3 ${I.role==="user"?"flex-row-reverse":""}`,children:[w.jsx("div",{className:`flex-shrink-0 mt-1 size-7 rounded-sm flex items-center justify-center ${I.role==="user"?"bg-zinc-800":"bg-transparent"}`,children:I.role==="user"?w.jsx(aV,{size:14,className:"text-zinc-400"}):w.jsx(jp,{size:16,className:"text-blue-400"})}),w.jsxs("div",{className:`flex-1 text-sm leading-relaxed ${I.role==="user"?"bg-zinc-800 text-zinc-100 px-3 py-2 rounded-lg":"text-zinc-300"}`,children:[B&&w.jsx("div",{className:$.length>0?"mb-3":"",children:w.jsx($U,{remarkPlugins:[yO],children:B})}),$.length>0&&w.jsx(Zat,{actionDataList:$,status:I.actionStatus||"pending",onStatusChange:H=>E(L,H)})]})]},L)}),l&&w.jsxs("div",{className:"flex gap-3",children:[w.jsx("div",{className:"mt-1",children:w.jsx(jp,{size:16,className:"text-blue-400 animate-pulse"})}),w.jsx("div",{className:"flex-1 text-sm text-zinc-300",children:u?u.includes('"type": "editor_action"')||u.includes('"type":"editor_action"')?w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"size-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),w.jsx("span",{className:"text-zinc-400 italic",children:"Evaluating action..."})]}):w.jsx($U,{remarkPlugins:[yO],children:u}):w.jsx("span",{className:"text-zinc-500 italic animate-pulse",children:"Thinking..."})})]})]}),w.jsx("div",{className:"p-4 bg-zinc-950 border-t border-zinc-900/50",children:w.jsx(Hle,{onSend:T,isLoading:l})})]}),o==="calendar"&&w.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 p-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsxs("h2",{className:"text-zinc-100 font-semibold text-lg",children:[b.toLocaleString("default",{month:"short"})," ",w.jsx("span",{className:"text-zinc-500",children:b.getFullYear()})]}),w.jsxs("div",{className:"flex gap-1",children:[w.jsx("button",{onClick:R,className:"p-1 text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900 rounded",children:w.jsx(rUe,{size:16})}),w.jsx("button",{onClick:()=>x(new Date),className:"text-xs font-medium text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900 px-2 rounded",children:"TODAY"}),w.jsx("button",{onClick:O,className:"p-1 text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900 rounded",children:w.jsx(Rk,{size:16})})]})]}),w.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(I=>w.jsx("div",{className:"text-xs font-medium text-zinc-600 py-1",children:I},I))}),w.jsx("div",{className:"grid grid-cols-7 gap-1 flex-1 content-start",children:M.map((I,L)=>w.jsx("div",{className:`aspect-square flex items-center justify-center text-sm rounded-md transition-colors
                                    ${I?"":"invisible"}
                                    ${I&&I.toDateString()===new Date().toDateString()?"bg-blue-600 text-white font-medium shadow-lg shadow-blue-500/20":"text-zinc-400 hover:bg-zinc-900 hover:text-zinc-100"}
                                `,children:I?.getDate()},L))})]}),o==="tags"&&w.jsx("div",{className:"flex flex-col h-full bg-zinc-950 overflow-y-auto",children:w.jsxs("div",{className:"p-4",children:[w.jsx("div",{className:"flex items-center justify-between mb-4",children:w.jsx("h3",{className:"text-zinc-400 font-medium text-sm",children:"Properties"})}),w.jsx("div",{className:"space-y-1",children:[{icon:w.jsx(tV,{size:14}),label:"Tags",value:"Always show",action:!0},{icon:w.jsx(iV,{size:14}),label:"Doc mode",value:"Always hide",action:!0},{icon:w.jsx(_w,{size:14}),label:"Journal",value:"Always hide",action:!0},{icon:w.jsx(IUe,{size:14}),label:"Template",value:"Always hide",action:!0},{icon:w.jsx(_w,{size:14}),label:"Created",value:"Always show",action:!0},{icon:w.jsx(_w,{size:14}),label:"Updated",value:"Always show",action:!0},{icon:w.jsx(aV,{size:14}),label:"Created by",value:"Always hide",action:!0}].map((I,L)=>w.jsxs("div",{className:"group flex items-center justify-between py-1.5 px-2 hover:bg-zinc-900/60 rounded-md cursor-pointer transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-3 text-zinc-400 group-hover:text-zinc-300",children:[w.jsx("span",{className:"opacity-70",children:I.icon}),w.jsx("span",{className:"text-sm",children:I.label})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-xs text-zinc-600 group-hover:text-zinc-500",children:I.value}),I.action&&w.jsx(u0,{size:14,className:"text-zinc-700 group-hover:text-zinc-500"})]})]},L))}),w.jsxs("div",{className:"mt-8",children:[w.jsxs("button",{className:"flex items-center gap-2 text-zinc-500 hover:text-zinc-300 text-sm font-medium transition-colors px-2",children:[w.jsx("span",{children:"Add more properties"}),w.jsx(Rk,{size:14})]}),w.jsx("div",{className:"mt-4 pl-2 border-l-2 border-zinc-900 ml-3 space-y-3",children:["Text","Number","Checkbox","Date","Person"].map((I,L)=>w.jsxs("div",{className:"flex items-center justify-between group cursor-pointer",children:[w.jsxs("div",{className:"flex items-center gap-3 text-zinc-500 group-hover:text-zinc-300",children:[w.jsx("span",{className:"text-xs opacity-50",children:"T"}),w.jsx("span",{className:"text-sm",children:I})]}),w.jsx(wb,{size:14,className:"text-zinc-700 opacity-0 group-hover:opacity-100 transition-opacity"})]},L))})]})]})})]})]})})})})},rpt=()=>{const{isSettingsOpen:e,setIsSettingsOpen:t,setGoogleApiKey:n}=pr(),[r,o]=k.useState(""),[i,s]=k.useState(!1),[a,l]=k.useState("idle"),[c,u]=k.useState(!1),[f,p]=k.useState("idle"),[m,y]=k.useState("");k.useEffect(()=>{e&&b()},[e]);const b=async()=>{try{const T=await mr("get_google_api_key");o(T),n(T)}catch(T){console.error("Failed to load API key:",T)}},x=async()=>{if(!r.trim()){l("error"),Po.error("API Key cannot be empty");return}s(!0),l("saving");try{await mr("save_google_api_key",{key:r}),n(r),l("saved"),Po.success("API Key saved successfully"),setTimeout(()=>l("idle"),2e3)}catch(T){console.error("Failed to save API key:",T),l("error"),Po.error("Failed to save API key")}finally{s(!1)}},S=async()=>{u(!0),p("installing");try{await mr("install_transcription_dependencies"),p("installed"),setTimeout(()=>p("idle"),2e3)}catch(T){console.error("Failed to install transcription dependencies:",T),p("error")}finally{u(!1)}},E=async()=>{s(!0);try{await mr("remove_google_api_key"),o(""),n(""),l("saved"),Po.success("API key removed successfully!"),setTimeout(()=>l("idle"),2e3)}catch(T){console.error("Failed to remove API key:",T),l("error"),Po.error("Failed to remove API key.")}finally{s(!1)}};return k.useEffect(()=>{let T;async function A(){try{const M=await mr("read_install_log");y(M)}catch{}}return c?(A(),T=window.setInterval(A,1e3)):A(),()=>{T&&clearInterval(T)}},[c]),w.jsxs(Vk,{open:e,onClose:()=>t(!1),className:"relative z-[1000]",children:[w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm","aria-hidden":"true"}),w.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:w.jsxs(Ab,{className:"w-full max-w-md rounded-xl bg-zinc-900 border border-zinc-800 p-6 shadow-xl",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsx(Bk,{className:"text-lg font-medium text-white",children:"Settings"}),w.jsx("button",{onClick:()=>t(!1),className:"text-zinc-400 hover:text-white transition-colors",children:w.jsx(Om,{size:20})})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-2",children:"General"}),w.jsx("div",{className:"space-y-4",children:w.jsxs("div",{children:[w.jsx("label",{htmlFor:"apiKey",className:"block text-xs text-zinc-400 mb-1.5",children:"Gemini API Key"}),w.jsx(_b,{className:"text-xs text-zinc-500 mb-2",children:"Required for AI features. The key is stored locally on your device."}),w.jsx("input",{id:"apiKey",type:"password",value:r,onChange:T=>o(T.target.value),placeholder:"Enter your API key",className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-2 text-sm text-zinc-200 placeholder-zinc-600 focus:outline-none focus:border-zinc-600 focus:ring-1 focus:ring-zinc-600 transition-colors"})]})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-2",children:"Transcription"}),w.jsx("div",{className:"space-y-4",children:w.jsxs("div",{children:[w.jsx(_b,{className:"text-xs text-zinc-500 mb-2",children:"Install Python dependencies required for audio transcription. This will download faster-whisper and other required packages."}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"flex-1",children:w.jsx("button",{onClick:S,disabled:c,className:`
                         px-4 py-2 rounded-lg text-sm font-medium transition-all
                         ${f==="installed"?"bg-green-600 text-white hover:bg-green-700":f==="error"?"bg-red-600 text-white hover:bg-red-700":"bg-zinc-100 text-zinc-900 hover:bg-zinc-200 disabled:opacity-50 disabled:cursor-not-allowed"}
                       `,children:c?"Installing...":f==="installed"?"Installed ":f==="error"?"Error":"Install Dependencies"})}),w.jsx("div",{className:"w-48 text-xs text-zinc-400",children:c?"Downloading / installing...":""})]}),w.jsx("div",{className:"mt-3",children:w.jsx("pre",{className:"max-h-40 overflow-auto text-xs bg-zinc-900 border border-zinc-800 p-2 rounded text-zinc-300",children:m})})]})})]}),w.jsxs("div",{className:"flex justify-end pt-4 border-t border-zinc-800",children:[r&&w.jsx("button",{onClick:E,disabled:i,className:`
                    mr-2 px-4 py-2 rounded-lg text-sm font-medium transition-all
                    bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed
                  `,children:"Remove API Key"}),w.jsx("button",{onClick:x,disabled:i||!r,className:`
                  px-4 py-2 rounded-lg text-sm font-medium transition-all
                  ${a==="saved"?"bg-green-600 text-white hover:bg-green-700":a==="error"?"bg-red-600 text-white hover:bg-red-700":"bg-zinc-100 text-zinc-900 hover:bg-zinc-200 disabled:opacity-50 disabled:cursor-not-allowed"}
                `,children:a==="saving"?"Saving...":a==="saved"?"Saved!":a==="error"?"Error":"Save Changes"})]})]})]})})]})};function opt(){const[e,t]=k.useState(null),[n,r]=k.useState(!0),[o,i]=k.useState(!1),[s,a]=k.useState(!1),[l,c]=k.useState(null),[u,f]=k.useState(!1),p=S=>S?!S.python_found||!S.ffmpeg_available||typeof S.vcruntime_found<"u"&&!S.vcruntime_found||typeof S.network_ok<"u"&&!S.network_ok||typeof S.windows_helper_present<"u"&&!S.windows_helper_present:!1,m=async()=>{r(!0);try{const S=await mr("prereflight_check");t(S);const E=localStorage.getItem("kortex_preflight_dismissed")==="true";p(S)&&!E&&a(!0)}catch(S){console.error("prereflight_check failed",S)}finally{r(!1)}};k.useEffect(()=>{m()},[]);const y=()=>p(e),b=async()=>{i(!0),c(null);try{await mr("install_transcription_dependencies"),await m()}catch(S){c(String(S))}finally{i(!1)}};if(!s)return null;const x=({icon:S,label:E,status:T,detail:A})=>w.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900/50 rounded-lg border border-zinc-800/50",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:Ss("p-2 rounded-md bg-zinc-800",{"text-green-400":T==="ok","text-red-400":T==="error","text-yellow-400":T==="warning"}),children:w.jsx(S,{size:18})}),w.jsxs("div",{children:[w.jsx("div",{className:"font-medium text-zinc-200 text-sm",children:E}),A&&w.jsx("div",{className:"text-xs text-zinc-500",children:A})]})]}),w.jsxs("div",{children:[T==="ok"&&w.jsx(JB,{className:"text-green-500",size:20}),T==="error"&&w.jsx(dUe,{className:"text-red-500",size:20}),T==="warning"&&w.jsx(sV,{className:"text-yellow-500",size:20})]})]});return w.jsx(Wa,{children:w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx(or.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>!y()&&a(!1)}),w.jsxs(or.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},className:"relative bg-zinc-950 border border-zinc-800 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[w.jsxs("div",{className:"p-6 border-b border-zinc-800 bg-zinc-900/50",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[w.jsx(oV,{className:"text-indigo-400",size:24}),w.jsx("h2",{className:"text-xl font-bold text-white",children:"System Check"})]}),w.jsx("p",{className:"text-zinc-400 text-sm",children:"Verifying environment dependencies"})]}),w.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n?w.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-4",children:[w.jsx(nV,{className:"animate-spin text-indigo-500",size:32}),w.jsx("p",{className:"text-zinc-500 text-sm",children:"Scanning system..."})]}):e?w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center justify-between text-xs text-zinc-500 px-1 mb-2",children:[w.jsxs("span",{children:["OS: ",e.platform]}),w.jsxs("span",{className:Ss(e.network_ok?"text-green-500":"text-red-500"),children:["Network: ",e.network_ok?"Online":"Offline"]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(x,{icon:cGe,label:"Python Environment",status:e.python_found?"ok":"error",detail:e.python_found?`Version ${e.python_version||"Detected"}`:"Required for AI"}),w.jsx(x,{icon:QB,label:"FFmpeg Framework",status:e.ffmpeg_available?"ok":"error",detail:e.ffmpeg_available?"Installed":"Required for Audio Processing"}),typeof e.vcruntime_found<"u"&&w.jsx(x,{icon:oV,label:"Visual C++ Runtime",status:e.vcruntime_found?"ok":"error",detail:e.vcruntime_found?"Installed":"Required for Native Modules"}),typeof e.windows_helper_present<"u"&&w.jsx(x,{icon:QB,label:"Audio Helper Binary",status:e.windows_helper_present?"ok":"error",detail:e.windows_helper_present?"Ready":"Missing application resource"})]}),w.jsx("div",{className:Ss("mt-6 p-4 rounded-lg border",{"bg-green-500/10 border-green-500/20":!y(),"bg-amber-500/10 border-amber-500/20":y()}),children:y()?w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx(sV,{className:"text-amber-500 shrink-0 mt-0.5",size:24}),w.jsxs("div",{children:[w.jsx("h4",{className:"font-medium text-amber-400",children:"Missing Dependencies"}),w.jsxs("p",{className:"text-sm text-amber-500/80 mt-1",children:["Some components are missing.",typeof e.vcruntime_found<"u"&&!e.vcruntime_found?" Windows requires Visual C++ Runtime.":" Please install them to continue."]})]})]}):w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(JB,{className:"text-green-500 shrink-0",size:24}),w.jsxs("div",{children:[w.jsx("h4",{className:"font-medium text-green-400",children:"All Systems Go"}),w.jsx("p",{className:"text-sm text-green-500/80",children:"Your environment is ready for transcription."})]})]})}),y()&&w.jsx("button",{onClick:()=>f(!u),className:"text-xs text-zinc-500 hover:text-zinc-300 w-full text-center mt-2 underline",children:u?"Hide Manual Instructions":"Show Manual Instructions"}),u&&y()&&w.jsx(or.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"bg-zinc-900 rounded-lg p-4 text-sm text-zinc-400 border border-zinc-800",children:w.jsxs("ul",{className:"list-disc ml-4 space-y-1",children:[!e.python_found&&w.jsxs("li",{children:["Install ",w.jsx("b",{children:"Python 3.12+"})," from python.org (Ensure 'Add to PATH' is checked)"]}),!e.ffmpeg_available&&w.jsxs("li",{children:["Install ",w.jsx("b",{children:"FFmpeg"})," and add to system PATH"]}),typeof e.vcruntime_found<"u"&&!e.vcruntime_found&&w.jsxs("li",{children:["Install ",w.jsxs("a",{href:"https://learn.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist",target:"_blank",className:"text-indigo-400 hover:underline inline-flex items-center gap-1",children:["Visual C++ Redistributable ",w.jsx(Gne,{size:10})]})]})]})}),l&&w.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-md text-red-400 text-sm",children:[w.jsx("strong",{children:"Error:"})," ",l]})]}):w.jsxs("div",{className:"text-center py-8 text-red-400",children:["Failed to load system checks.",w.jsx("button",{onClick:m,className:"block mx-auto mt-4 text-indigo-400 hover:underline",children:"Retry"})]})}),w.jsx("div",{className:"p-6 border-t border-zinc-800 bg-zinc-900/30 flex justify-end gap-3",children:y()?w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 rounded-lg text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800 transition-colors text-sm font-medium",disabled:o,children:"Ignore"}),w.jsx("button",{onClick:()=>{localStorage.setItem("kortex_preflight_dismissed","true"),a(!1)},className:"px-4 py-2 rounded-lg text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800 transition-colors text-sm font-medium",children:"Don't Show Again"}),w.jsx("button",{onClick:b,disabled:o,className:"px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-500/20 transition-all flex items-center gap-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:o?w.jsxs(w.Fragment,{children:[w.jsx(nV,{className:"animate-spin",size:16}),"Installing..."]}):w.jsxs(w.Fragment,{children:[w.jsx(mUe,{size:16}),"Attempt Auto-Install"]})})]}):w.jsx("button",{onClick:()=>a(!1),className:"px-6 py-2 rounded-lg bg-zinc-100 hover:bg-white text-zinc-900 font-medium transition-colors shadow-lg shadow-white/5",children:"Close"})})]})]})})}function ipt(){const e=st.c(36),{openCommandPalette:t,isAiSidebarOpen:n,setIsAiSidebarOpen:r,isSidebarFloating:o,loadApiKey:i}=pr(),{currentNote:s,saveTimeout:a}=ws();let l;e[0]!==s?(l=s?s.content.split(/\s+/).filter(spt).length:0,e[0]=s,e[1]=l):l=e[1];const c=l,u=!a,[f,p]=k.useState(!1);let m,y;e[2]!==i||e[3]!==t?(m=()=>{i();const W=K=>{console.log("Key pressed:",K.key,"metaKey:",K.metaKey,"altKey:",K.altKey,"ctrlKey:",K.ctrlKey),(K.metaKey||K.altKey)&&K.key==="p"&&(K.preventDefault(),t())};return window.addEventListener("keydown",W),()=>{window.removeEventListener("keydown",W)}},y=[t,i],e[2]=i,e[3]=t,e[4]=m,e[5]=y):(m=e[4],y=e[5]),k.useEffect(m,y);let b,x,S,E;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=w.jsx(opt,{}),x=w.jsx(rpt,{}),S=w.jsx(dat,{}),E=w.jsx(KYe,{}),e[6]=b,e[7]=x,e[8]=S,e[9]=E):(b=e[6],x=e[7],S=e[8],E=e[9]);let T;e[10]!==o?(T=!o&&w.jsx("div",{className:"h-full flex-shrink-0",children:w.jsx(eU,{})}),e[10]=o,e[11]=T):T=e[11];let A;e[12]!==o||e[13]!==f?(A=o&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-10 z-40 hover:bg-transparent",onMouseEnter:()=>p(!0)}),w.jsx(Wa,{children:f&&w.jsx(or.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"absolute left-0 top-0 bottom-0 z-[9999] h-full border-r border-zinc-800 shadow-2xl",onMouseLeave:()=>p(!1),children:w.jsx(eU,{})})})]}),e[12]=o,e[13]=f,e[14]=A):A=e[14];let M;e[15]===Symbol.for("react.memo_cache_sentinel")?(M=w.jsx("div",{className:"flex-1 overflow-y-auto",children:w.jsx(WYe,{})}),e[15]=M):M=e[15];let R;e[16]!==s||e[17]!==u||e[18]!==c?(R=s&&s.note_type!=="canvas"&&w.jsx(mat,{wordCount:c,isSaved:u}),e[16]=s,e[17]=u,e[18]=c,e[19]=R):R=e[19];let O;e[20]!==R?(O=w.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[M,R]}),e[20]=R,e[21]=O):O=e[21];let I;e[22]!==r?(I=()=>r(!1),e[22]=r,e[23]=I):I=e[23];let L;e[24]!==n||e[25]!==I?(L=w.jsx(npt,{isOpen:n,onClose:I}),e[24]=n,e[25]=I,e[26]=L):L=e[26];let $;e[27]!==O||e[28]!==L||e[29]!==T||e[30]!==A?($=w.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[T,A,O,L]}),e[27]=O,e[28]=L,e[29]=T,e[30]=A,e[31]=$):$=e[31];let B;e[32]===Symbol.for("react.memo_cache_sentinel")?(B={zIndex:99999},e[32]=B):B=e[32];let H;e[33]===Symbol.for("react.memo_cache_sentinel")?(H=w.jsx(sot,{containerStyle:B,position:"bottom-center",reverseOrder:!1,toastOptions:{style:{background:"#333",color:"#fff",borderRadius:"10px"}}}),e[33]=H):H=e[33];let V;return e[34]!==$?(V=w.jsxs("div",{className:"bg-zinc-950 flex flex-col h-screen overflow-hidden",children:[b,x,S,E,$,H]}),e[34]=$,e[35]=V):V=e[35],V}function spt(e){return e.length>0}Wde.createRoot(document.getElementById("root")).render(w.jsx(ie.StrictMode,{children:w.jsx(ipt,{})}));export{pnt as $,xg as A,Xet as B,w as C,pm as D,a$e as E,Wo as F,vi as G,ptt as H,Av as I,Lm as J,yv as K,jse as L,Cnt as M,Sg as N,yse as O,io as P,Ztt as Q,knt as R,udt as S,Htt as T,zY as U,kce as V,mse as W,zE as X,Ent as Y,Vet as Z,Tnt as _,xpt as a,Zpt as a0,Yie as a1,Ur as a2,qpt as a3,iu as a4,ie as a5,z1 as a6,Rd as a7,x7e as a8,UU as a9,Gnt as aA,qnt as aB,tae as aC,Xpt as aD,dnt as aE,fnt as aF,Ose as aG,Pse as aH,Lpe as aI,_6 as aJ,t4 as aK,dZ as aL,B0e as aM,Cwe as aN,c0e as aO,k0e as aP,ZO as aQ,qO as aR,ws as aS,Mo as aa,pq as ab,IO as ac,Hpe as ad,Bpe as ae,Vpe as af,aq as ag,dq as ah,jpe as ai,zpe as aj,Fpe as ak,mq as al,eme as am,hq as an,cq as ao,fq as ap,qpe as aq,Kpe as ar,Wpe as as,Q9 as at,rme as au,Ype as av,Jpe as aw,Dse as ax,Rse as ay,Unt as az,Dft as b,e2 as c,Fft as d,Sut as e,yX as f,Db as g,bX as h,Oft as i,zce as j,oi as k,nht as l,tC as m,TN as n,Qpt as o,Spt as p,y$ as q,u$ as r,pv as s,F3e as t,fO as u,xce as v,cE as w,ilt as x,k as y,V4e as z};
