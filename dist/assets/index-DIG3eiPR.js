const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DQI-OdxX.js","assets/index-DAoBRwYp.js","assets/index-CpbpeXAm.js","assets/index-D4tK1cuZ.js","assets/index-C0y_TPRc.js","assets/index-DbV_qOM2.js","assets/cpp-BozaW9Cj.js","assets/regexp-YoNQ8D_6.js","assets/glsl-C2Ge4J-w.js","assets/c-DV1nog2v.js","assets/sql-_w3nyLGT.js","assets/graphql-DS66ObS9.js","assets/javascript-CfR557FP.js","assets/typescript-DjQnnWhn.js","assets/jsx-CgO7R6mw.js","assets/tsx-BTiF23f_.js","assets/haml-CYFD70FR.js","assets/css--YvLAxwc.js","assets/html-PAUDa6-L.js","assets/julia-OQ0LJAOH.js","assets/python-n6TwxhBN.js","assets/r-CNly2XdH.js","assets/php-l4A4Uz7C.js","assets/xml-B6llhzsJ.js","assets/java-DHtigSrd.js","assets/json-CAhrKACI.js","assets/pug-Co6nYc4R.js","assets/scss-WW3fv8JG.js","assets/svelte-C-8Z18kp.js","assets/postcss-B6Y8ymK-.js","assets/vue-CmUyGiKH.js","assets/vue-html-CxMnKWH6.js","assets/latex-BdIqOxd_.js","assets/lua-DmCzxb9n.js","assets/ruby-DAbYPlly.js","assets/shellscript-ByttNyBa.js","assets/yaml-C2EE9Uek.js","assets/Canvas-DNMIPTxK.js","assets/Canvas-uRrMj70X.css"])))=>i.map(i=>d[i]);
function jde(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var B1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Md(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var KT={exports:{}},gy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UL;function Lde(){if(UL)return gy;UL=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,i){var s=null;if(i!==void 0&&(s=""+i),o.key!==void 0&&(s=""+o.key),"key"in o){i={};for(var a in o)a!=="key"&&(i[a]=o[a])}else i=o;return o=i.ref,{$$typeof:e,type:r,key:s,ref:o!==void 0?o:null,props:i}}return gy.Fragment=t,gy.jsx=n,gy.jsxs=n,gy}var GL;function zde(){return GL||(GL=1,KT.exports=Lde()),KT.exports}var v=zde(),YT={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qL;function Bde(){if(qL)return Et;qL=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function p(N){return N===null||typeof N!="object"?null:(N=f&&N[f]||N["@@iterator"],typeof N=="function"?N:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function w(N,U,te){this.props=N,this.context=U,this.refs=b,this.updater=te||m}w.prototype.isReactComponent={},w.prototype.setState=function(N,U){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,U,"setState")},w.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function S(){}S.prototype=w.prototype;function E(N,U,te){this.props=N,this.context=U,this.refs=b,this.updater=te||m}var T=E.prototype=new S;T.constructor=E,y(T,w.prototype),T.isPureReactComponent=!0;var A=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function O(N,U,te,D,ce,ae){return te=ae.ref,{$$typeof:e,type:N,key:U,ref:te!==void 0?te:null,props:ae}}function I(N,U){return O(N.type,U,void 0,void 0,void 0,N.props)}function L(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function $(N){var U={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(te){return U[te]})}var B=/\/+/g;function G(N,U){return typeof N=="object"&&N!==null&&N.key!=null?$(""+N.key):U.toString(36)}function V(){}function W(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(V,V):(N.status="pending",N.then(function(U){N.status==="pending"&&(N.status="fulfilled",N.value=U)},function(U){N.status==="pending"&&(N.status="rejected",N.reason=U)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function K(N,U,te,D,ce){var ae=typeof N;(ae==="undefined"||ae==="boolean")&&(N=null);var pe=!1;if(N===null)pe=!0;else switch(ae){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(N.$$typeof){case e:case t:pe=!0;break;case u:return pe=N._init,K(pe(N._payload),U,te,D,ce)}}if(pe)return ce=ce(N),pe=D===""?"."+G(N,0):D,A(ce)?(te="",pe!=null&&(te=pe.replace(B,"$&/")+"/"),K(ce,U,te,"",function(Re){return Re})):ce!=null&&(L(ce)&&(ce=I(ce,te+(ce.key==null||N&&N.key===ce.key?"":(""+ce.key).replace(B,"$&/")+"/")+pe)),U.push(ce)),1;pe=0;var ie=D===""?".":D+":";if(A(N))for(var ye=0;ye<N.length;ye++)D=N[ye],ae=ie+G(D,ye),pe+=K(D,U,te,ae,ce);else if(ye=p(N),typeof ye=="function")for(N=ye.call(N),ye=0;!(D=N.next()).done;)D=D.value,ae=ie+G(D,ye++),pe+=K(D,U,te,ae,ce);else if(ae==="object"){if(typeof N.then=="function")return K(W(N),U,te,D,ce);throw U=String(N),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return pe}function F(N,U,te){if(N==null)return N;var D=[],ce=0;return K(N,D,"","",function(ae){return U.call(te,ae,ce++)}),D}function q(N){if(N._status===-1){var U=N._result;U=U(),U.then(function(te){(N._status===0||N._status===-1)&&(N._status=1,N._result=te)},function(te){(N._status===0||N._status===-1)&&(N._status=2,N._result=te)}),N._status===-1&&(N._status=0,N._result=U)}if(N._status===1)return N._result.default;throw N._result}var H=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function z(){}return Et.Children={map:F,forEach:function(N,U,te){F(N,function(){U.apply(this,arguments)},te)},count:function(N){var U=0;return F(N,function(){U++}),U},toArray:function(N){return F(N,function(U){return U})||[]},only:function(N){if(!L(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Et.Component=w,Et.Fragment=n,Et.Profiler=o,Et.PureComponent=E,Et.StrictMode=r,Et.Suspense=l,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Et.__COMPILER_RUNTIME={__proto__:null,c:function(N){return M.H.useMemoCache(N)}},Et.cache=function(N){return function(){return N.apply(null,arguments)}},Et.cloneElement=function(N,U,te){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var D=y({},N.props),ce=N.key,ae=void 0;if(U!=null)for(pe in U.ref!==void 0&&(ae=void 0),U.key!==void 0&&(ce=""+U.key),U)!R.call(U,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&U.ref===void 0||(D[pe]=U[pe]);var pe=arguments.length-2;if(pe===1)D.children=te;else if(1<pe){for(var ie=Array(pe),ye=0;ye<pe;ye++)ie[ye]=arguments[ye+2];D.children=ie}return O(N.type,ce,void 0,void 0,ae,D)},Et.createContext=function(N){return N={$$typeof:s,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:i,_context:N},N},Et.createElement=function(N,U,te){var D,ce={},ae=null;if(U!=null)for(D in U.key!==void 0&&(ae=""+U.key),U)R.call(U,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(ce[D]=U[D]);var pe=arguments.length-2;if(pe===1)ce.children=te;else if(1<pe){for(var ie=Array(pe),ye=0;ye<pe;ye++)ie[ye]=arguments[ye+2];ce.children=ie}if(N&&N.defaultProps)for(D in pe=N.defaultProps,pe)ce[D]===void 0&&(ce[D]=pe[D]);return O(N,ae,void 0,void 0,null,ce)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(N){return{$$typeof:a,render:N}},Et.isValidElement=L,Et.lazy=function(N){return{$$typeof:u,_payload:{_status:-1,_result:N},_init:q}},Et.memo=function(N,U){return{$$typeof:c,type:N,compare:U===void 0?null:U}},Et.startTransition=function(N){var U=M.T,te={};M.T=te;try{var D=N(),ce=M.S;ce!==null&&ce(te,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(z,H)}catch(ae){H(ae)}finally{M.T=U}},Et.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Et.use=function(N){return M.H.use(N)},Et.useActionState=function(N,U,te){return M.H.useActionState(N,U,te)},Et.useCallback=function(N,U){return M.H.useCallback(N,U)},Et.useContext=function(N){return M.H.useContext(N)},Et.useDebugValue=function(){},Et.useDeferredValue=function(N,U){return M.H.useDeferredValue(N,U)},Et.useEffect=function(N,U,te){var D=M.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(N,U)},Et.useId=function(){return M.H.useId()},Et.useImperativeHandle=function(N,U,te){return M.H.useImperativeHandle(N,U,te)},Et.useInsertionEffect=function(N,U){return M.H.useInsertionEffect(N,U)},Et.useLayoutEffect=function(N,U){return M.H.useLayoutEffect(N,U)},Et.useMemo=function(N,U){return M.H.useMemo(N,U)},Et.useOptimistic=function(N,U){return M.H.useOptimistic(N,U)},Et.useReducer=function(N,U,te){return M.H.useReducer(N,U,te)},Et.useRef=function(N){return M.H.useRef(N)},Et.useState=function(N){return M.H.useState(N)},Et.useSyncExternalStore=function(N,U,te){return M.H.useSyncExternalStore(N,U,te)},Et.useTransition=function(){return M.H.useTransition()},Et.version="19.1.1",Et}var ZL;function zb(){return ZL||(ZL=1,YT.exports=Bde()),YT.exports}var k=zb();const se=Md(k),Bb=jde({__proto__:null,default:se},[k]);var JT={exports:{}},yy={},XT={exports:{}},QT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WL;function Fde(){return WL||(WL=1,(function(e){function t(F,q){var H=F.length;F.push(q);e:for(;0<H;){var z=H-1>>>1,N=F[z];if(0<o(N,q))F[z]=q,F[H]=N,H=z;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],H=F.pop();if(H!==q){F[0]=H;e:for(var z=0,N=F.length,U=N>>>1;z<U;){var te=2*(z+1)-1,D=F[te],ce=te+1,ae=F[ce];if(0>o(D,H))ce<N&&0>o(ae,D)?(F[z]=ae,F[ce]=H,z=ce):(F[z]=D,F[te]=H,z=te);else if(ce<N&&0>o(ae,H))F[z]=ae,F[ce]=H,z=ce;else break e}}return q}function o(F,q){var H=F.sortIndex-q.sortIndex;return H!==0?H:F.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,b=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(F){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=F)r(c),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(c)}}function M(F){if(b=!1,A(F),!y)if(n(l)!==null)y=!0,R||(R=!0,G());else{var q=n(c);q!==null&&K(M,q.startTime-F)}}var R=!1,O=-1,I=5,L=-1;function $(){return w?!0:!(e.unstable_now()-L<I)}function B(){if(w=!1,R){var F=e.unstable_now();L=F;var q=!0;try{e:{y=!1,b&&(b=!1,E(O),O=-1),m=!0;var H=p;try{t:{for(A(F),f=n(l);f!==null&&!(f.expirationTime>F&&$());){var z=f.callback;if(typeof z=="function"){f.callback=null,p=f.priorityLevel;var N=z(f.expirationTime<=F);if(F=e.unstable_now(),typeof N=="function"){f.callback=N,A(F),q=!0;break t}f===n(l)&&r(l),A(F)}else r(l);f=n(l)}if(f!==null)q=!0;else{var U=n(c);U!==null&&K(M,U.startTime-F),q=!1}}break e}finally{f=null,p=H,m=!1}q=void 0}}finally{q?G():R=!1}}}var G;if(typeof T=="function")G=function(){T(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=B,G=function(){W.postMessage(null)}}else G=function(){S(B,0)};function K(F,q){O=S(function(){F(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(F){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var H=p;p=q;try{return F()}finally{p=H}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=p;p=F;try{return q()}finally{p=H}},e.unstable_scheduleCallback=function(F,q,H){var z=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,F){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=H+N,F={id:u++,callback:q,priorityLevel:F,startTime:H,expirationTime:N,sortIndex:-1},H>z?(F.sortIndex=H,t(c,F),n(l)===null&&F===n(c)&&(b?(E(O),O=-1):b=!0,K(M,H-z))):(F.sortIndex=N,t(l,F),y||m||(y=!0,R||(R=!0,G()))),F},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(F){var q=p;return function(){var H=p;p=q;try{return F.apply(this,arguments)}finally{p=H}}}})(QT)),QT}var KL;function Vde(){return KL||(KL=1,XT.exports=Fde()),XT.exports}var e_={exports:{}},Uo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YL;function Hde(){if(YL)return Uo;YL=1;var e=zb();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function i(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Uo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Uo.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(l,c,null,u)},Uo.flushSync=function(l){var c=s.T,u=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=c,r.p=u,r.d.f()}},Uo.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Uo.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Uo.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:m}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:p,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Uo.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Uo.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Uo.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Uo.requestFormReset=function(l){r.d.r(l)},Uo.unstable_batchedUpdates=function(l,c){return l(c)},Uo.useFormState=function(l,c,u){return s.H.useFormState(l,c,u)},Uo.useFormStatus=function(){return s.H.useHostTransitionStatus()},Uo.version="19.1.1",Uo}var JL;function qU(){if(JL)return e_.exports;JL=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),e_.exports=Hde(),e_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XL;function Ude(){if(XL)return yy;XL=1;var e=Vde(),t=zb(),n=qU();function r(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function i(d){var h=d,g=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(g=h.return),d=h.return;while(d)}return h.tag===3?g:null}function s(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function a(d){if(i(d)!==d)throw Error(r(188))}function l(d){var h=d.alternate;if(!h){if(h=i(d),h===null)throw Error(r(188));return h!==d?null:d}for(var g=d,x=h;;){var C=g.return;if(C===null)break;var _=C.alternate;if(_===null){if(x=C.return,x!==null){g=x;continue}break}if(C.child===_.child){for(_=C.child;_;){if(_===g)return a(C),d;if(_===x)return a(C),h;_=_.sibling}throw Error(r(188))}if(g.return!==x.return)g=C,x=_;else{for(var P=!1,j=C.child;j;){if(j===g){P=!0,g=C,x=_;break}if(j===x){P=!0,x=C,g=_;break}j=j.sibling}if(!P){for(j=_.child;j;){if(j===g){P=!0,g=_,x=C;break}if(j===x){P=!0,x=_,g=C;break}j=j.sibling}if(!P)throw Error(r(189))}}if(g.alternate!==x)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?d:h}function c(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d;for(d=d.child;d!==null;){if(h=c(d),h!==null)return h;d=d.sibling}return null}var u=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function G(d){return d===null||typeof d!="object"?null:(d=B&&d[B]||d["@@iterator"],typeof d=="function"?d:null)}var V=Symbol.for("react.client.reference");function W(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===V?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case y:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList";case L:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case m:return"Portal";case T:return(d.displayName||"Context")+".Provider";case E:return(d._context.displayName||"Context")+".Consumer";case A:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case O:return h=d.displayName||null,h!==null?h:W(d.type)||"Memo";case I:h=d._payload,d=d._init;try{return W(d(h))}catch{}}return null}var K=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},z=[],N=-1;function U(d){return{current:d}}function te(d){0>N||(d.current=z[N],z[N]=null,N--)}function D(d,h){N++,z[N]=d.current,d.current=h}var ce=U(null),ae=U(null),pe=U(null),ie=U(null);function ye(d,h){switch(D(pe,h),D(ae,d),D(ce,null),h.nodeType){case 9:case 11:d=(d=h.documentElement)&&(d=d.namespaceURI)?bL(d):0;break;default:if(d=h.tagName,h=h.namespaceURI)h=bL(h),d=vL(h,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}te(ce),D(ce,d)}function Re(){te(ce),te(ae),te(pe)}function $e(d){d.memoizedState!==null&&D(ie,d);var h=ce.current,g=vL(h,d.type);h!==g&&(D(ae,d),D(ce,g))}function Be(d){ae.current===d&&(te(ce),te(ae)),ie.current===d&&(te(ie),dy._currentValue=H)}var je=Object.prototype.hasOwnProperty,Le=e.unstable_scheduleCallback,Pe=e.unstable_cancelCallback,me=e.unstable_shouldYield,_e=e.unstable_requestPaint,xe=e.unstable_now,Ie=e.unstable_getCurrentPriorityLevel,Ve=e.unstable_ImmediatePriority,nt=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,Dr=e.unstable_LowPriority,or=e.unstable_IdlePriority,hr=e.log,Ft=e.unstable_setDisableYieldValue,Y=null,he=null;function De(d){if(typeof hr=="function"&&Ft(d),he&&typeof he.setStrictMode=="function")try{he.setStrictMode(Y,d)}catch{}}var Oe=Math.clz32?Math.clz32:Dn,et=Math.log,rn=Math.LN2;function Dn(d){return d>>>=0,d===0?32:31-(et(d)/rn|0)|0}var mn=256,Tr=4194304;function Cn(d){var h=d&42;if(h!==0)return h;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function gn(d,h,g){var x=d.pendingLanes;if(x===0)return 0;var C=0,_=d.suspendedLanes,P=d.pingedLanes;d=d.warmLanes;var j=x&134217727;return j!==0?(x=j&~_,x!==0?C=Cn(x):(P&=j,P!==0?C=Cn(P):g||(g=j&~d,g!==0&&(C=Cn(g))))):(j=x&~_,j!==0?C=Cn(j):P!==0?C=Cn(P):g||(g=x&~d,g!==0&&(C=Cn(g)))),C===0?0:h!==0&&h!==C&&(h&_)===0&&(_=C&-C,g=h&-h,_>=g||_===32&&(g&4194048)!==0)?h:C}function Yn(d,h){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&h)===0}function Jn(d,h){switch(d){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function co(){var d=mn;return mn<<=1,(mn&4194048)===0&&(mn=256),d}function Ji(){var d=Tr;return Tr<<=1,(Tr&62914560)===0&&(Tr=4194304),d}function Kr(d){for(var h=[],g=0;31>g;g++)h.push(d);return h}function ir(d,h){d.pendingLanes|=h,h!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function ki(d,h,g,x,C,_){var P=d.pendingLanes;d.pendingLanes=g,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=g,d.entangledLanes&=g,d.errorRecoveryDisabledLanes&=g,d.shellSuspendCounter=0;var j=d.entanglements,J=d.expirationTimes,le=d.hiddenUpdates;for(g=P&~g;0<g;){var ve=31-Oe(g),ke=1<<ve;j[ve]=0,J[ve]=-1;var ue=le[ve];if(ue!==null)for(le[ve]=null,ve=0;ve<ue.length;ve++){var de=ue[ve];de!==null&&(de.lane&=-536870913)}g&=~ke}x!==0&&uo(d,x,0),_!==0&&C===0&&d.tag!==0&&(d.suspendedLanes|=_&~(P&~h))}function uo(d,h,g){d.pendingLanes|=h,d.suspendedLanes&=~h;var x=31-Oe(h);d.entangledLanes|=h,d.entanglements[x]=d.entanglements[x]|1073741824|g&4194090}function pr(d,h){var g=d.entangledLanes|=h;for(d=d.entanglements;g;){var x=31-Oe(g),C=1<<x;C&h|d[x]&h&&(d[x]|=h),g&=~C}}function Ci(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function He(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Kt(){var d=q.p;return d!==0?d:(d=window.event,d===void 0?32:LL(d.type))}function jo(d,h){var g=q.p;try{return q.p=d,h()}finally{q.p=g}}var sr=Math.random().toString(36).slice(2),ln="__reactFiber$"+sr,Yt="__reactProps$"+sr,Lo="__reactContainer$"+sr,En="__reactEvents$"+sr,Xi="__reactListeners$"+sr,zo="__reactHandles$"+sr,hu="__reactResources$"+sr,wa="__reactMarker$"+sr;function Ds(d){delete d[ln],delete d[Yt],delete d[En],delete d[Xi],delete d[zo]}function $s(d){var h=d[ln];if(h)return h;for(var g=d.parentNode;g;){if(h=g[Lo]||g[ln]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(d=kL(d);d!==null;){if(g=d[ln])return g;d=kL(d)}return h}d=g,g=d.parentNode}return null}function Qi(d){if(d=d[ln]||d[Lo]){var h=d.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return d}return null}function mr(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d.stateNode;throw Error(r(33))}function es(d){var h=d[hu];return h||(h=d[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Xn(d){d[wa]=!0}var Sa=new Set,ka={};function Bo(d,h){_r(d,h),_r(d+"Capture",h)}function _r(d,h){for(ka[d]=h,d=0;d<h.length;d++)Sa.add(h[d])}var dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ca={},sc={};function Hd(d){return je.call(sc,d)?!0:je.call(Ca,d)?!1:dl.test(d)?sc[d]=!0:(Ca[d]=!0,!1)}function ts(d,h,g){if(Hd(h))if(g===null)d.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":d.removeAttribute(h);return;case"boolean":var x=h.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){d.removeAttribute(h);return}}d.setAttribute(h,""+g)}}function ns(d,h,g){if(g===null)d.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(h);return}d.setAttribute(h,""+g)}}function si(d,h,g,x){if(x===null)d.removeAttribute(g);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(g);return}d.setAttributeNS(h,g,""+x)}}var js,ai;function rs(d){if(js===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);js=h&&h[1]||"",ai=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+d+ai}var Ls=!1;function fl(d,h){if(!d||Ls)return"";Ls=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(de){var ue=de}Reflect.construct(d,[],ke)}else{try{ke.call()}catch(de){ue=de}d.call(ke.prototype)}}else{try{throw Error()}catch(de){ue=de}(ke=d())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(de){if(de&&ue&&typeof de.stack=="string")return[de.stack,ue.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=x.DetermineComponentFrameRoot(),P=_[0],j=_[1];if(P&&j){var J=P.split(`
`),le=j.split(`
`);for(C=x=0;x<J.length&&!J[x].includes("DetermineComponentFrameRoot");)x++;for(;C<le.length&&!le[C].includes("DetermineComponentFrameRoot");)C++;if(x===J.length||C===le.length)for(x=J.length-1,C=le.length-1;1<=x&&0<=C&&J[x]!==le[C];)C--;for(;1<=x&&0<=C;x--,C--)if(J[x]!==le[C]){if(x!==1||C!==1)do if(x--,C--,0>C||J[x]!==le[C]){var ve=`
`+J[x].replace(" at new "," at ");return d.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",d.displayName)),ve}while(1<=x&&0<=C);break}}}finally{Ls=!1,Error.prepareStackTrace=g}return(g=d?d.displayName||d.name:"")?rs(g):""}function Ud(d){switch(d.tag){case 26:case 27:case 5:return rs(d.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return fl(d.type,!1);case 11:return fl(d.type.render,!1);case 1:return fl(d.type,!0);case 31:return rs("Activity");default:return""}}function Ea(d){try{var h="";do h+=Ud(d),d=d.return;while(d);return h}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Ar(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ei(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function hl(d){var h=Ei(d)?"checked":"value",g=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),x=""+d[h];if(!d.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,_=g.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return C.call(this)},set:function(P){x=""+P,_.call(this,P)}}),Object.defineProperty(d,h,{enumerable:g.enumerable}),{getValue:function(){return x},setValue:function(P){x=""+P},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function Co(d){d._valueTracker||(d._valueTracker=hl(d))}function zs(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var g=h.getValue(),x="";return d&&(x=Ei(d)?d.checked?"true":"false":d.value),d=x,d!==g?(h.setValue(d),!0):!1}function Ti(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var pl=/[\n"\\]/g;function fo(d){return d.replace(pl,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function ac(d,h,g,x,C,_,P,j){d.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?d.type=P:d.removeAttribute("type"),h!=null?P==="number"?(h===0&&d.value===""||d.value!=h)&&(d.value=""+Ar(h)):d.value!==""+Ar(h)&&(d.value=""+Ar(h)):P!=="submit"&&P!=="reset"||d.removeAttribute("value"),h!=null?is(d,P,Ar(h)):g!=null?is(d,P,Ar(g)):x!=null&&d.removeAttribute("value"),C==null&&_!=null&&(d.defaultChecked=!!_),C!=null&&(d.checked=C&&typeof C!="function"&&typeof C!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?d.name=""+Ar(j):d.removeAttribute("name")}function Ta(d,h,g,x,C,_,P,j){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(d.type=_),h!=null||g!=null){if(!(_!=="submit"&&_!=="reset"||h!=null))return;g=g!=null?""+Ar(g):"",h=h!=null?""+Ar(h):g,j||h===d.value||(d.value=h),d.defaultValue=h}x=x??C,x=typeof x!="function"&&typeof x!="symbol"&&!!x,d.checked=j?d.checked:!!x,d.defaultChecked=!!x,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(d.name=P)}function is(d,h,g){h==="number"&&Ti(d.ownerDocument)===d||d.defaultValue===""+g||(d.defaultValue=""+g)}function Bs(d,h,g,x){if(d=d.options,h){h={};for(var C=0;C<g.length;C++)h["$"+g[C]]=!0;for(g=0;g<d.length;g++)C=h.hasOwnProperty("$"+d[g].value),d[g].selected!==C&&(d[g].selected=C),C&&x&&(d[g].defaultSelected=!0)}else{for(g=""+Ar(g),h=null,C=0;C<d.length;C++){if(d[C].value===g){d[C].selected=!0,x&&(d[C].defaultSelected=!0);return}h!==null||d[C].disabled||(h=d[C])}h!==null&&(h.selected=!0)}}function _a(d,h,g){if(h!=null&&(h=""+Ar(h),h!==d.value&&(d.value=h),g==null)){d.defaultValue!==h&&(d.defaultValue=h);return}d.defaultValue=g!=null?""+Ar(g):""}function Fs(d,h,g,x){if(h==null){if(x!=null){if(g!=null)throw Error(r(92));if(K(x)){if(1<x.length)throw Error(r(93));x=x[0]}g=x}g==null&&(g=""),h=g}g=Ar(h),d.defaultValue=g,x=d.textContent,x===g&&x!==""&&x!==null&&(d.value=x)}function ho(d,h){if(h){var g=d.firstChild;if(g&&g===d.lastChild&&g.nodeType===3){g.nodeValue=h;return}}d.textContent=h}var li=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Aa(d,h,g){var x=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?x?d.setProperty(h,""):h==="float"?d.cssFloat="":d[h]="":x?d.setProperty(h,g):typeof g!="number"||g===0||li.has(h)?h==="float"?d.cssFloat=g:d[h]=(""+g).trim():d[h]=g+"px"}function lc(d,h,g){if(h!=null&&typeof h!="object")throw Error(r(62));if(d=d.style,g!=null){for(var x in g)!g.hasOwnProperty(x)||h!=null&&h.hasOwnProperty(x)||(x.indexOf("--")===0?d.setProperty(x,""):x==="float"?d.cssFloat="":d[x]="");for(var C in h)x=h[C],h.hasOwnProperty(C)&&g[C]!==x&&Aa(d,C,x)}else for(var _ in h)h.hasOwnProperty(_)&&Aa(d,_,h[_])}function Yr(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ar(d){return mt.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Eo=null;function ml(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var _i=null,cc=null;function $v(d){var h=Qi(d);if(h&&(d=h.stateNode)){var g=d[Yt]||null;e:switch(d=h.stateNode,h.type){case"input":if(ac(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=d;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+fo(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var x=g[h];if(x!==d&&x.form===d.form){var C=x[Yt]||null;if(!C)throw Error(r(90));ac(x,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(h=0;h<g.length;h++)x=g[h],x.form===d.form&&zs(x)}break e;case"textarea":_a(d,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&Bs(d,!!g.multiple,h,!1)}}}var mu=!1;function jv(d,h,g){if(mu)return d(h,g);mu=!0;try{var x=d(h);return x}finally{if(mu=!1,(_i!==null||cc!==null)&&(v1(),_i&&(h=_i,d=cc,cc=_i=null,$v(h),d)))for(h=0;h<d.length;h++)$v(d[h])}}function uc(d,h){var g=d.stateNode;if(g===null)return null;var x=g[Yt]||null;if(x===null)return null;g=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(d=d.type,x=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!x;break e;default:d=!1}if(d)return null;if(g&&typeof g!="function")throw Error(r(231,h,typeof g));return g}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ph=!1;if(Ma)try{var gu={};Object.defineProperty(gu,"passive",{get:function(){Ph=!0}}),window.addEventListener("test",gu,gu),window.removeEventListener("test",gu,gu)}catch{Ph=!1}var Na=null,dc=null,Gd=null;function Lv(){if(Gd)return Gd;var d,h=dc,g=h.length,x,C="value"in Na?Na.value:Na.textContent,_=C.length;for(d=0;d<g&&h[d]===C[d];d++);var P=g-d;for(x=1;x<=P&&h[g-x]===C[_-x];x++);return Gd=C.slice(d,1<x?1-x:void 0)}function Dh(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function $h(){return!0}function Z(){return!1}function ee(d){function h(g,x,C,_,P){this._reactName=g,this._targetInst=C,this.type=x,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var j in d)d.hasOwnProperty(j)&&(g=d[j],this[j]=g?g(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$h:Z,this.isPropagationStopped=Z,this}return u(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=$h)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=$h)},persist:function(){},isPersistent:$h}),h}var Se={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ze=ee(Se),on=u({},Se,{view:0,detail:0}),yt=ee(on),$n,gr,lr,yn=u({},on,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:r2,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==lr&&(lr&&d.type==="mousemove"?($n=d.screenX-lr.screenX,gr=d.screenY-lr.screenY):gr=$n=0,lr=d),$n)},movementY:function(d){return"movementY"in d?d.movementY:gr}}),Fo=ee(yn),ss=u({},yn,{dataTransfer:0}),po=ee(ss),Ai=u({},on,{relatedTarget:0}),Vo=ee(Ai),gl=u({},Se,{animationName:0,elapsedTime:0,pseudoElement:0}),Ra=ee(gl),fc=u({},Se,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),zv=ee(fc),jh=u({},Se,{data:0}),qd=ee(jh),qce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kce(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=Wce[d])?!!h[d]:!1}function r2(){return Kce}var Yce=u({},on,{key:function(d){if(d.key){var h=qce[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=Dh(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Zce[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:r2,charCode:function(d){return d.type==="keypress"?Dh(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Dh(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Jce=ee(Yce),Xce=u({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T5=ee(Xce),Qce=u({},on,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:r2}),eue=ee(Qce),tue=u({},Se,{propertyName:0,elapsedTime:0,pseudoElement:0}),nue=ee(tue),rue=u({},yn,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),oue=ee(rue),iue=u({},Se,{newState:0,oldState:0}),sue=ee(iue),aue=[9,13,27,32],o2=Ma&&"CompositionEvent"in window,Ag=null;Ma&&"documentMode"in document&&(Ag=document.documentMode);var lue=Ma&&"TextEvent"in window&&!Ag,_5=Ma&&(!o2||Ag&&8<Ag&&11>=Ag),A5=" ",M5=!1;function N5(d,h){switch(d){case"keyup":return aue.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R5(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Lh=!1;function cue(d,h){switch(d){case"compositionend":return R5(h);case"keypress":return h.which!==32?null:(M5=!0,A5);case"textInput":return d=h.data,d===A5&&M5?null:d;default:return null}}function uue(d,h){if(Lh)return d==="compositionend"||!o2&&N5(d,h)?(d=Lv(),Gd=dc=Na=null,Lh=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return _5&&h.locale!=="ko"?null:h.data;default:return null}}var due={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I5(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!due[d.type]:h==="textarea"}function O5(d,h,g,x){_i?cc?cc.push(x):cc=[x]:_i=x,h=E1(h,"onChange"),0<h.length&&(g=new ze("onChange","change",null,g,x),d.push({event:g,listeners:h}))}var Mg=null,Ng=null;function fue(d){hL(d,0)}function Bv(d){var h=mr(d);if(zs(h))return d}function P5(d,h){if(d==="change")return h}var D5=!1;if(Ma){var i2;if(Ma){var s2="oninput"in document;if(!s2){var $5=document.createElement("div");$5.setAttribute("oninput","return;"),s2=typeof $5.oninput=="function"}i2=s2}else i2=!1;D5=i2&&(!document.documentMode||9<document.documentMode)}function j5(){Mg&&(Mg.detachEvent("onpropertychange",L5),Ng=Mg=null)}function L5(d){if(d.propertyName==="value"&&Bv(Ng)){var h=[];O5(h,Ng,d,ml(d)),jv(fue,h)}}function hue(d,h,g){d==="focusin"?(j5(),Mg=h,Ng=g,Mg.attachEvent("onpropertychange",L5)):d==="focusout"&&j5()}function pue(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Bv(Ng)}function mue(d,h){if(d==="click")return Bv(h)}function gue(d,h){if(d==="input"||d==="change")return Bv(h)}function yue(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var as=typeof Object.is=="function"?Object.is:yue;function Rg(d,h){if(as(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var g=Object.keys(d),x=Object.keys(h);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var C=g[x];if(!je.call(h,C)||!as(d[C],h[C]))return!1}return!0}function z5(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function B5(d,h){var g=z5(d);d=0;for(var x;g;){if(g.nodeType===3){if(x=d+g.textContent.length,d<=h&&x>=h)return{node:g,offset:h-d};d=x}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=z5(g)}}function F5(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?F5(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function V5(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var h=Ti(d.document);h instanceof d.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)d=h.contentWindow;else break;h=Ti(d.document)}return h}function a2(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var bue=Ma&&"documentMode"in document&&11>=document.documentMode,zh=null,l2=null,Ig=null,c2=!1;function H5(d,h,g){var x=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;c2||zh==null||zh!==Ti(x)||(x=zh,"selectionStart"in x&&a2(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Ig&&Rg(Ig,x)||(Ig=x,x=E1(l2,"onSelect"),0<x.length&&(h=new ze("onSelect","select",null,h,g),d.push({event:h,listeners:x}),h.target=zh)))}function Zd(d,h){var g={};return g[d.toLowerCase()]=h.toLowerCase(),g["Webkit"+d]="webkit"+h,g["Moz"+d]="moz"+h,g}var Bh={animationend:Zd("Animation","AnimationEnd"),animationiteration:Zd("Animation","AnimationIteration"),animationstart:Zd("Animation","AnimationStart"),transitionrun:Zd("Transition","TransitionRun"),transitionstart:Zd("Transition","TransitionStart"),transitioncancel:Zd("Transition","TransitionCancel"),transitionend:Zd("Transition","TransitionEnd")},u2={},U5={};Ma&&(U5=document.createElement("div").style,"AnimationEvent"in window||(delete Bh.animationend.animation,delete Bh.animationiteration.animation,delete Bh.animationstart.animation),"TransitionEvent"in window||delete Bh.transitionend.transition);function Wd(d){if(u2[d])return u2[d];if(!Bh[d])return d;var h=Bh[d],g;for(g in h)if(h.hasOwnProperty(g)&&g in U5)return u2[d]=h[g];return d}var G5=Wd("animationend"),q5=Wd("animationiteration"),Z5=Wd("animationstart"),vue=Wd("transitionrun"),xue=Wd("transitionstart"),wue=Wd("transitioncancel"),W5=Wd("transitionend"),K5=new Map,d2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");d2.push("scrollEnd");function Ia(d,h){K5.set(d,h),Bo(h,[d])}var Y5=new WeakMap;function Vs(d,h){if(typeof d=="object"&&d!==null){var g=Y5.get(d);return g!==void 0?g:(h={value:d,source:h,stack:Ea(h)},Y5.set(d,h),h)}return{value:d,source:h,stack:Ea(h)}}var Hs=[],Fh=0,f2=0;function Fv(){for(var d=Fh,h=f2=Fh=0;h<d;){var g=Hs[h];Hs[h++]=null;var x=Hs[h];Hs[h++]=null;var C=Hs[h];Hs[h++]=null;var _=Hs[h];if(Hs[h++]=null,x!==null&&C!==null){var P=x.pending;P===null?C.next=C:(C.next=P.next,P.next=C),x.pending=C}_!==0&&J5(g,C,_)}}function Vv(d,h,g,x){Hs[Fh++]=d,Hs[Fh++]=h,Hs[Fh++]=g,Hs[Fh++]=x,f2|=x,d.lanes|=x,d=d.alternate,d!==null&&(d.lanes|=x)}function h2(d,h,g,x){return Vv(d,h,g,x),Hv(d)}function Vh(d,h){return Vv(d,null,null,h),Hv(d)}function J5(d,h,g){d.lanes|=g;var x=d.alternate;x!==null&&(x.lanes|=g);for(var C=!1,_=d.return;_!==null;)_.childLanes|=g,x=_.alternate,x!==null&&(x.childLanes|=g),_.tag===22&&(d=_.stateNode,d===null||d._visibility&1||(C=!0)),d=_,_=_.return;return d.tag===3?(_=d.stateNode,C&&h!==null&&(C=31-Oe(g),d=_.hiddenUpdates,x=d[C],x===null?d[C]=[h]:x.push(h),h.lane=g|536870912),_):null}function Hv(d){if(50<ry)throw ry=0,vT=null,Error(r(185));for(var h=d.return;h!==null;)d=h,h=d.return;return d.tag===3?d.stateNode:null}var Hh={};function Sue(d,h,g,x){this.tag=d,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(d,h,g,x){return new Sue(d,h,g,x)}function p2(d){return d=d.prototype,!(!d||!d.isReactComponent)}function hc(d,h){var g=d.alternate;return g===null?(g=ls(d.tag,h,d.key,d.mode),g.elementType=d.elementType,g.type=d.type,g.stateNode=d.stateNode,g.alternate=d,d.alternate=g):(g.pendingProps=h,g.type=d.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=d.flags&65011712,g.childLanes=d.childLanes,g.lanes=d.lanes,g.child=d.child,g.memoizedProps=d.memoizedProps,g.memoizedState=d.memoizedState,g.updateQueue=d.updateQueue,h=d.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=d.sibling,g.index=d.index,g.ref=d.ref,g.refCleanup=d.refCleanup,g}function X5(d,h){d.flags&=65011714;var g=d.alternate;return g===null?(d.childLanes=0,d.lanes=h,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,h=g.dependencies,d.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),d}function Uv(d,h,g,x,C,_){var P=0;if(x=d,typeof d=="function")p2(d)&&(P=1);else if(typeof d=="string")P=Cde(d,g,ce.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case L:return d=ls(31,g,h,C),d.elementType=L,d.lanes=_,d;case y:return Kd(g.children,C,_,h);case b:P=8,C|=24;break;case w:return d=ls(12,g,h,C|2),d.elementType=w,d.lanes=_,d;case M:return d=ls(13,g,h,C),d.elementType=M,d.lanes=_,d;case R:return d=ls(19,g,h,C),d.elementType=R,d.lanes=_,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case S:case T:P=10;break e;case E:P=9;break e;case A:P=11;break e;case O:P=14;break e;case I:P=16,x=null;break e}P=29,g=Error(r(130,d===null?"null":typeof d,"")),x=null}return h=ls(P,g,h,C),h.elementType=d,h.type=x,h.lanes=_,h}function Kd(d,h,g,x){return d=ls(7,d,x,h),d.lanes=g,d}function m2(d,h,g){return d=ls(6,d,null,h),d.lanes=g,d}function g2(d,h,g){return h=ls(4,d.children!==null?d.children:[],d.key,h),h.lanes=g,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}var Uh=[],Gh=0,Gv=null,qv=0,Us=[],Gs=0,Yd=null,pc=1,mc="";function Jd(d,h){Uh[Gh++]=qv,Uh[Gh++]=Gv,Gv=d,qv=h}function Q5(d,h,g){Us[Gs++]=pc,Us[Gs++]=mc,Us[Gs++]=Yd,Yd=d;var x=pc;d=mc;var C=32-Oe(x)-1;x&=~(1<<C),g+=1;var _=32-Oe(h)+C;if(30<_){var P=C-C%5;_=(x&(1<<P)-1).toString(32),x>>=P,C-=P,pc=1<<32-Oe(h)+C|g<<C|x,mc=_+d}else pc=1<<_|g<<C|x,mc=d}function y2(d){d.return!==null&&(Jd(d,1),Q5(d,1,0))}function b2(d){for(;d===Gv;)Gv=Uh[--Gh],Uh[Gh]=null,qv=Uh[--Gh],Uh[Gh]=null;for(;d===Yd;)Yd=Us[--Gs],Us[Gs]=null,mc=Us[--Gs],Us[Gs]=null,pc=Us[--Gs],Us[Gs]=null}var ci=null,yr=null,sn=!1,Xd=null,yl=!1,v2=Error(r(519));function Qd(d){var h=Error(r(418,""));throw Dg(Vs(h,d)),v2}function e$(d){var h=d.stateNode,g=d.type,x=d.memoizedProps;switch(h[ln]=d,h[Yt]=x,g){case"dialog":jt("cancel",h),jt("close",h);break;case"iframe":case"object":case"embed":jt("load",h);break;case"video":case"audio":for(g=0;g<iy.length;g++)jt(iy[g],h);break;case"source":jt("error",h);break;case"img":case"image":case"link":jt("error",h),jt("load",h);break;case"details":jt("toggle",h);break;case"input":jt("invalid",h),Ta(h,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),Co(h);break;case"select":jt("invalid",h);break;case"textarea":jt("invalid",h),Fs(h,x.value,x.defaultValue,x.children),Co(h)}g=x.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||x.suppressHydrationWarning===!0||yL(h.textContent,g)?(x.popover!=null&&(jt("beforetoggle",h),jt("toggle",h)),x.onScroll!=null&&jt("scroll",h),x.onScrollEnd!=null&&jt("scrollend",h),x.onClick!=null&&(h.onclick=T1),h=!0):h=!1,h||Qd(d)}function t$(d){for(ci=d.return;ci;)switch(ci.tag){case 5:case 13:yl=!1;return;case 27:case 3:yl=!0;return;default:ci=ci.return}}function Og(d){if(d!==ci)return!1;if(!sn)return t$(d),sn=!0,!1;var h=d.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=d.type,g=!(g!=="form"&&g!=="button")||DT(d.type,d.memoizedProps)),g=!g),g&&yr&&Qd(d),t$(d),h===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8)if(g=d.data,g==="/$"){if(h===0){yr=Pa(d.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++;d=d.nextSibling}yr=null}}else h===27?(h=yr,Iu(d.type)?(d=zT,zT=null,yr=d):yr=h):yr=ci?Pa(d.stateNode.nextSibling):null;return!0}function Pg(){yr=ci=null,sn=!1}function n$(){var d=Xd;return d!==null&&(Ri===null?Ri=d:Ri.push.apply(Ri,d),Xd=null),d}function Dg(d){Xd===null?Xd=[d]:Xd.push(d)}var x2=U(null),ef=null,gc=null;function yu(d,h,g){D(x2,h._currentValue),h._currentValue=g}function yc(d){d._currentValue=x2.current,te(x2)}function w2(d,h,g){for(;d!==null;){var x=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),d===g)break;d=d.return}}function S2(d,h,g,x){var C=d.child;for(C!==null&&(C.return=d);C!==null;){var _=C.dependencies;if(_!==null){var P=C.child;_=_.firstContext;e:for(;_!==null;){var j=_;_=C;for(var J=0;J<h.length;J++)if(j.context===h[J]){_.lanes|=g,j=_.alternate,j!==null&&(j.lanes|=g),w2(_.return,g,d),x||(P=null);break e}_=j.next}}else if(C.tag===18){if(P=C.return,P===null)throw Error(r(341));P.lanes|=g,_=P.alternate,_!==null&&(_.lanes|=g),w2(P,g,d),P=null}else P=C.child;if(P!==null)P.return=C;else for(P=C;P!==null;){if(P===d){P=null;break}if(C=P.sibling,C!==null){C.return=P.return,P=C;break}P=P.return}C=P}}function $g(d,h,g,x){d=null;for(var C=h,_=!1;C!==null;){if(!_){if((C.flags&524288)!==0)_=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var P=C.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var j=C.type;as(C.pendingProps.value,P.value)||(d!==null?d.push(j):d=[j])}}else if(C===ie.current){if(P=C.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(d!==null?d.push(dy):d=[dy])}C=C.return}d!==null&&S2(h,d,g,x),h.flags|=262144}function Zv(d){for(d=d.firstContext;d!==null;){if(!as(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function tf(d){ef=d,gc=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Ho(d){return r$(ef,d)}function Wv(d,h){return ef===null&&tf(d),r$(d,h)}function r$(d,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},gc===null){if(d===null)throw Error(r(308));gc=h,d.dependencies={lanes:0,firstContext:h},d.flags|=524288}else gc=gc.next=h;return g}var kue=typeof AbortController<"u"?AbortController:function(){var d=[],h=this.signal={aborted:!1,addEventListener:function(g,x){d.push(x)}};this.abort=function(){h.aborted=!0,d.forEach(function(g){return g()})}},Cue=e.unstable_scheduleCallback,Eue=e.unstable_NormalPriority,Jr={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function k2(){return{controller:new kue,data:new Map,refCount:0}}function jg(d){d.refCount--,d.refCount===0&&Cue(Eue,function(){d.controller.abort()})}var Lg=null,C2=0,qh=0,Zh=null;function Tue(d,h){if(Lg===null){var g=Lg=[];C2=0,qh=TT(),Zh={status:"pending",value:void 0,then:function(x){g.push(x)}}}return C2++,h.then(o$,o$),h}function o$(){if(--C2===0&&Lg!==null){Zh!==null&&(Zh.status="fulfilled");var d=Lg;Lg=null,qh=0,Zh=null;for(var h=0;h<d.length;h++)(0,d[h])()}}function _ue(d,h){var g=[],x={status:"pending",value:null,reason:null,then:function(C){g.push(C)}};return d.then(function(){x.status="fulfilled",x.value=h;for(var C=0;C<g.length;C++)(0,g[C])(h)},function(C){for(x.status="rejected",x.reason=C,C=0;C<g.length;C++)(0,g[C])(void 0)}),x}var i$=F.S;F.S=function(d,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Tue(d,h),i$!==null&&i$(d,h)};var nf=U(null);function E2(){var d=nf.current;return d!==null?d:jn.pooledCache}function Kv(d,h){h===null?D(nf,nf.current):D(nf,h.pool)}function s$(){var d=E2();return d===null?null:{parent:Jr._currentValue,pool:d}}var zg=Error(r(460)),a$=Error(r(474)),Yv=Error(r(542)),T2={then:function(){}};function l$(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Jv(){}function c$(d,h,g){switch(g=d[g],g===void 0?d.push(h):g!==h&&(h.then(Jv,Jv),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,d$(d),d;default:if(typeof h.status=="string")h.then(Jv,Jv);else{if(d=jn,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=h,d.status="pending",d.then(function(x){if(h.status==="pending"){var C=h;C.status="fulfilled",C.value=x}},function(x){if(h.status==="pending"){var C=h;C.status="rejected",C.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,d$(d),d}throw Bg=h,zg}}var Bg=null;function u$(){if(Bg===null)throw Error(r(459));var d=Bg;return Bg=null,d}function d$(d){if(d===zg||d===Yv)throw Error(r(483))}var bu=!1;function _2(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function A2(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function vu(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function xu(d,h,g){var x=d.updateQueue;if(x===null)return null;if(x=x.shared,(un&2)!==0){var C=x.pending;return C===null?h.next=h:(h.next=C.next,C.next=h),x.pending=h,h=Hv(d),J5(d,null,g),h}return Vv(d,x,h,g),Hv(d)}function Fg(d,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var x=h.lanes;x&=d.pendingLanes,g|=x,h.lanes=g,pr(d,g)}}function M2(d,h){var g=d.updateQueue,x=d.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var C=null,_=null;if(g=g.firstBaseUpdate,g!==null){do{var P={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};_===null?C=_=P:_=_.next=P,g=g.next}while(g!==null);_===null?C=_=h:_=_.next=h}else C=_=h;g={baseState:x.baseState,firstBaseUpdate:C,lastBaseUpdate:_,shared:x.shared,callbacks:x.callbacks},d.updateQueue=g;return}d=g.lastBaseUpdate,d===null?g.firstBaseUpdate=h:d.next=h,g.lastBaseUpdate=h}var N2=!1;function Vg(){if(N2){var d=Zh;if(d!==null)throw d}}function Hg(d,h,g,x){N2=!1;var C=d.updateQueue;bu=!1;var _=C.firstBaseUpdate,P=C.lastBaseUpdate,j=C.shared.pending;if(j!==null){C.shared.pending=null;var J=j,le=J.next;J.next=null,P===null?_=le:P.next=le,P=J;var ve=d.alternate;ve!==null&&(ve=ve.updateQueue,j=ve.lastBaseUpdate,j!==P&&(j===null?ve.firstBaseUpdate=le:j.next=le,ve.lastBaseUpdate=J))}if(_!==null){var ke=C.baseState;P=0,ve=le=J=null,j=_;do{var ue=j.lane&-536870913,de=ue!==j.lane;if(de?(Gt&ue)===ue:(x&ue)===ue){ue!==0&&ue===qh&&(N2=!0),ve!==null&&(ve=ve.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var ct=d,st=j;ue=h;var xn=g;switch(st.tag){case 1:if(ct=st.payload,typeof ct=="function"){ke=ct.call(xn,ke,ue);break e}ke=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=st.payload,ue=typeof ct=="function"?ct.call(xn,ke,ue):ct,ue==null)break e;ke=u({},ke,ue);break e;case 2:bu=!0}}ue=j.callback,ue!==null&&(d.flags|=64,de&&(d.flags|=8192),de=C.callbacks,de===null?C.callbacks=[ue]:de.push(ue))}else de={lane:ue,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ve===null?(le=ve=de,J=ke):ve=ve.next=de,P|=ue;if(j=j.next,j===null){if(j=C.shared.pending,j===null)break;de=j,j=de.next,de.next=null,C.lastBaseUpdate=de,C.shared.pending=null}}while(!0);ve===null&&(J=ke),C.baseState=J,C.firstBaseUpdate=le,C.lastBaseUpdate=ve,_===null&&(C.shared.lanes=0),Au|=P,d.lanes=P,d.memoizedState=ke}}function f$(d,h){if(typeof d!="function")throw Error(r(191,d));d.call(h)}function h$(d,h){var g=d.callbacks;if(g!==null)for(d.callbacks=null,d=0;d<g.length;d++)f$(g[d],h)}var Wh=U(null),Xv=U(0);function p$(d,h){d=Cc,D(Xv,d),D(Wh,h),Cc=d|h.baseLanes}function R2(){D(Xv,Cc),D(Wh,Wh.current)}function I2(){Cc=Xv.current,te(Wh),te(Xv)}var wu=0,Mt=null,bn=null,$r=null,Qv=!1,Kh=!1,rf=!1,e1=0,Ug=0,Yh=null,Aue=0;function Mr(){throw Error(r(321))}function O2(d,h){if(h===null)return!1;for(var g=0;g<h.length&&g<d.length;g++)if(!as(d[g],h[g]))return!1;return!0}function P2(d,h,g,x,C,_){return wu=_,Mt=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,F.H=d===null||d.memoizedState===null?J$:X$,rf=!1,_=g(x,C),rf=!1,Kh&&(_=g$(h,g,x,C)),m$(d),_}function m$(d){F.H=s1;var h=bn!==null&&bn.next!==null;if(wu=0,$r=bn=Mt=null,Qv=!1,Ug=0,Yh=null,h)throw Error(r(300));d===null||mo||(d=d.dependencies,d!==null&&Zv(d)&&(mo=!0))}function g$(d,h,g,x){Mt=d;var C=0;do{if(Kh&&(Yh=null),Ug=0,Kh=!1,25<=C)throw Error(r(301));if(C+=1,$r=bn=null,d.updateQueue!=null){var _=d.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}F.H=Due,_=h(g,x)}while(Kh);return _}function Mue(){var d=F.H,h=d.useState()[0];return h=typeof h.then=="function"?Gg(h):h,d=d.useState()[0],(bn!==null?bn.memoizedState:null)!==d&&(Mt.flags|=1024),h}function D2(){var d=e1!==0;return e1=0,d}function $2(d,h,g){h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~g}function j2(d){if(Qv){for(d=d.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}Qv=!1}wu=0,$r=bn=Mt=null,Kh=!1,Ug=e1=0,Yh=null}function Mi(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?Mt.memoizedState=$r=d:$r=$r.next=d,$r}function jr(){if(bn===null){var d=Mt.alternate;d=d!==null?d.memoizedState:null}else d=bn.next;var h=$r===null?Mt.memoizedState:$r.next;if(h!==null)$r=h,bn=d;else{if(d===null)throw Mt.alternate===null?Error(r(467)):Error(r(310));bn=d,d={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},$r===null?Mt.memoizedState=$r=d:$r=$r.next=d}return $r}function L2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gg(d){var h=Ug;return Ug+=1,Yh===null&&(Yh=[]),d=c$(Yh,d,h),h=Mt,($r===null?h.memoizedState:$r.next)===null&&(h=h.alternate,F.H=h===null||h.memoizedState===null?J$:X$),d}function t1(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Gg(d);if(d.$$typeof===T)return Ho(d)}throw Error(r(438,String(d)))}function z2(d){var h=null,g=Mt.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var x=Mt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(C){return C.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=L2(),Mt.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(d),x=0;x<d;x++)g[x]=$;return h.index++,g}function bc(d,h){return typeof h=="function"?h(d):h}function n1(d){var h=jr();return B2(h,bn,d)}function B2(d,h,g){var x=d.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=g;var C=d.baseQueue,_=x.pending;if(_!==null){if(C!==null){var P=C.next;C.next=_.next,_.next=P}h.baseQueue=C=_,x.pending=null}if(_=d.baseState,C===null)d.memoizedState=_;else{h=C.next;var j=P=null,J=null,le=h,ve=!1;do{var ke=le.lane&-536870913;if(ke!==le.lane?(Gt&ke)===ke:(wu&ke)===ke){var ue=le.revertLane;if(ue===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ke===qh&&(ve=!0);else if((wu&ue)===ue){le=le.next,ue===qh&&(ve=!0);continue}else ke={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},J===null?(j=J=ke,P=_):J=J.next=ke,Mt.lanes|=ue,Au|=ue;ke=le.action,rf&&g(_,ke),_=le.hasEagerState?le.eagerState:g(_,ke)}else ue={lane:ke,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},J===null?(j=J=ue,P=_):J=J.next=ue,Mt.lanes|=ke,Au|=ke;le=le.next}while(le!==null&&le!==h);if(J===null?P=_:J.next=j,!as(_,d.memoizedState)&&(mo=!0,ve&&(g=Zh,g!==null)))throw g;d.memoizedState=_,d.baseState=P,d.baseQueue=J,x.lastRenderedState=_}return C===null&&(x.lanes=0),[d.memoizedState,x.dispatch]}function F2(d){var h=jr(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var x=g.dispatch,C=g.pending,_=h.memoizedState;if(C!==null){g.pending=null;var P=C=C.next;do _=d(_,P.action),P=P.next;while(P!==C);as(_,h.memoizedState)||(mo=!0),h.memoizedState=_,h.baseQueue===null&&(h.baseState=_),g.lastRenderedState=_}return[_,x]}function y$(d,h,g){var x=Mt,C=jr(),_=sn;if(_){if(g===void 0)throw Error(r(407));g=g()}else g=h();var P=!as((bn||C).memoizedState,g);P&&(C.memoizedState=g,mo=!0),C=C.queue;var j=x$.bind(null,x,C,d);if(qg(2048,8,j,[d]),C.getSnapshot!==h||P||$r!==null&&$r.memoizedState.tag&1){if(x.flags|=2048,Jh(9,r1(),v$.bind(null,x,C,g,h),null),jn===null)throw Error(r(349));_||(wu&124)!==0||b$(x,h,g)}return g}function b$(d,h,g){d.flags|=16384,d={getSnapshot:h,value:g},h=Mt.updateQueue,h===null?(h=L2(),Mt.updateQueue=h,h.stores=[d]):(g=h.stores,g===null?h.stores=[d]:g.push(d))}function v$(d,h,g,x){h.value=g,h.getSnapshot=x,w$(h)&&S$(d)}function x$(d,h,g){return g(function(){w$(h)&&S$(d)})}function w$(d){var h=d.getSnapshot;d=d.value;try{var g=h();return!as(d,g)}catch{return!0}}function S$(d){var h=Vh(d,2);h!==null&&hs(h,d,2)}function V2(d){var h=Mi();if(typeof d=="function"){var g=d;if(d=g(),rf){De(!0);try{g()}finally{De(!1)}}}return h.memoizedState=h.baseState=d,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:d},h}function k$(d,h,g,x){return d.baseState=g,B2(d,bn,typeof x=="function"?x:bc)}function Nue(d,h,g,x,C){if(i1(d))throw Error(r(485));if(d=h.action,d!==null){var _={payload:C,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){_.listeners.push(P)}};F.T!==null?g(!0):_.isTransition=!1,x(_),g=h.pending,g===null?(_.next=h.pending=_,C$(h,_)):(_.next=g.next,h.pending=g.next=_)}}function C$(d,h){var g=h.action,x=h.payload,C=d.state;if(h.isTransition){var _=F.T,P={};F.T=P;try{var j=g(C,x),J=F.S;J!==null&&J(P,j),E$(d,h,j)}catch(le){H2(d,h,le)}finally{F.T=_}}else try{_=g(C,x),E$(d,h,_)}catch(le){H2(d,h,le)}}function E$(d,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(x){T$(d,h,x)},function(x){return H2(d,h,x)}):T$(d,h,g)}function T$(d,h,g){h.status="fulfilled",h.value=g,_$(h),d.state=g,h=d.pending,h!==null&&(g=h.next,g===h?d.pending=null:(g=g.next,h.next=g,C$(d,g)))}function H2(d,h,g){var x=d.pending;if(d.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=g,_$(h),h=h.next;while(h!==x)}d.action=null}function _$(d){d=d.listeners;for(var h=0;h<d.length;h++)(0,d[h])()}function A$(d,h){return h}function M$(d,h){if(sn){var g=jn.formState;if(g!==null){e:{var x=Mt;if(sn){if(yr){t:{for(var C=yr,_=yl;C.nodeType!==8;){if(!_){C=null;break t}if(C=Pa(C.nextSibling),C===null){C=null;break t}}_=C.data,C=_==="F!"||_==="F"?C:null}if(C){yr=Pa(C.nextSibling),x=C.data==="F!";break e}}Qd(x)}x=!1}x&&(h=g[0])}}return g=Mi(),g.memoizedState=g.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A$,lastRenderedState:h},g.queue=x,g=W$.bind(null,Mt,x),x.dispatch=g,x=V2(!1),_=W2.bind(null,Mt,!1,x.queue),x=Mi(),C={state:h,dispatch:null,action:d,pending:null},x.queue=C,g=Nue.bind(null,Mt,C,_,g),C.dispatch=g,x.memoizedState=d,[h,g,!1]}function N$(d){var h=jr();return R$(h,bn,d)}function R$(d,h,g){if(h=B2(d,h,A$)[0],d=n1(bc)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var x=Gg(h)}catch(P){throw P===zg?Yv:P}else x=h;h=jr();var C=h.queue,_=C.dispatch;return g!==h.memoizedState&&(Mt.flags|=2048,Jh(9,r1(),Rue.bind(null,C,g),null)),[x,_,d]}function Rue(d,h){d.action=h}function I$(d){var h=jr(),g=bn;if(g!==null)return R$(h,g,d);jr(),h=h.memoizedState,g=jr();var x=g.queue.dispatch;return g.memoizedState=d,[h,x,!1]}function Jh(d,h,g,x){return d={tag:d,create:g,deps:x,inst:h,next:null},h=Mt.updateQueue,h===null&&(h=L2(),Mt.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=d.next=d:(x=g.next,g.next=d,d.next=x,h.lastEffect=d),d}function r1(){return{destroy:void 0,resource:void 0}}function O$(){return jr().memoizedState}function o1(d,h,g,x){var C=Mi();x=x===void 0?null:x,Mt.flags|=d,C.memoizedState=Jh(1|h,r1(),g,x)}function qg(d,h,g,x){var C=jr();x=x===void 0?null:x;var _=C.memoizedState.inst;bn!==null&&x!==null&&O2(x,bn.memoizedState.deps)?C.memoizedState=Jh(h,_,g,x):(Mt.flags|=d,C.memoizedState=Jh(1|h,_,g,x))}function P$(d,h){o1(8390656,8,d,h)}function D$(d,h){qg(2048,8,d,h)}function $$(d,h){return qg(4,2,d,h)}function j$(d,h){return qg(4,4,d,h)}function L$(d,h){if(typeof h=="function"){d=d();var g=h(d);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function z$(d,h,g){g=g!=null?g.concat([d]):null,qg(4,4,L$.bind(null,h,d),g)}function U2(){}function B$(d,h){var g=jr();h=h===void 0?null:h;var x=g.memoizedState;return h!==null&&O2(h,x[1])?x[0]:(g.memoizedState=[d,h],d)}function F$(d,h){var g=jr();h=h===void 0?null:h;var x=g.memoizedState;if(h!==null&&O2(h,x[1]))return x[0];if(x=d(),rf){De(!0);try{d()}finally{De(!1)}}return g.memoizedState=[x,h],x}function G2(d,h,g){return g===void 0||(wu&1073741824)!==0?d.memoizedState=h:(d.memoizedState=g,d=Uj(),Mt.lanes|=d,Au|=d,g)}function V$(d,h,g,x){return as(g,h)?g:Wh.current!==null?(d=G2(d,g,x),as(d,h)||(mo=!0),d):(wu&42)===0?(mo=!0,d.memoizedState=g):(d=Uj(),Mt.lanes|=d,Au|=d,h)}function H$(d,h,g,x,C){var _=q.p;q.p=_!==0&&8>_?_:8;var P=F.T,j={};F.T=j,W2(d,!1,h,g);try{var J=C(),le=F.S;if(le!==null&&le(j,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var ve=_ue(J,x);Zg(d,h,ve,fs(d))}else Zg(d,h,x,fs(d))}catch(ke){Zg(d,h,{then:function(){},status:"rejected",reason:ke},fs())}finally{q.p=_,F.T=P}}function Iue(){}function q2(d,h,g,x){if(d.tag!==5)throw Error(r(476));var C=U$(d).queue;H$(d,C,h,H,g===null?Iue:function(){return G$(d),g(x)})}function U$(d){var h=d.memoizedState;if(h!==null)return h;h={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:H},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:g},next:null},d.memoizedState=h,d=d.alternate,d!==null&&(d.memoizedState=h),h}function G$(d){var h=U$(d).next.queue;Zg(d,h,{},fs())}function Z2(){return Ho(dy)}function q$(){return jr().memoizedState}function Z$(){return jr().memoizedState}function Oue(d){for(var h=d.return;h!==null;){switch(h.tag){case 24:case 3:var g=fs();d=vu(g);var x=xu(h,d,g);x!==null&&(hs(x,h,g),Fg(x,h,g)),h={cache:k2()},d.payload=h;return}h=h.return}}function Pue(d,h,g){var x=fs();g={lane:x,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},i1(d)?K$(h,g):(g=h2(d,h,g,x),g!==null&&(hs(g,d,x),Y$(g,h,x)))}function W$(d,h,g){var x=fs();Zg(d,h,g,x)}function Zg(d,h,g,x){var C={lane:x,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(i1(d))K$(h,C);else{var _=d.alternate;if(d.lanes===0&&(_===null||_.lanes===0)&&(_=h.lastRenderedReducer,_!==null))try{var P=h.lastRenderedState,j=_(P,g);if(C.hasEagerState=!0,C.eagerState=j,as(j,P))return Vv(d,h,C,0),jn===null&&Fv(),!1}catch{}finally{}if(g=h2(d,h,C,x),g!==null)return hs(g,d,x),Y$(g,h,x),!0}return!1}function W2(d,h,g,x){if(x={lane:2,revertLane:TT(),action:x,hasEagerState:!1,eagerState:null,next:null},i1(d)){if(h)throw Error(r(479))}else h=h2(d,g,x,2),h!==null&&hs(h,d,2)}function i1(d){var h=d.alternate;return d===Mt||h!==null&&h===Mt}function K$(d,h){Kh=Qv=!0;var g=d.pending;g===null?h.next=h:(h.next=g.next,g.next=h),d.pending=h}function Y$(d,h,g){if((g&4194048)!==0){var x=h.lanes;x&=d.pendingLanes,g|=x,h.lanes=g,pr(d,g)}}var s1={readContext:Ho,use:t1,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useLayoutEffect:Mr,useInsertionEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useSyncExternalStore:Mr,useId:Mr,useHostTransitionStatus:Mr,useFormState:Mr,useActionState:Mr,useOptimistic:Mr,useMemoCache:Mr,useCacheRefresh:Mr},J$={readContext:Ho,use:t1,useCallback:function(d,h){return Mi().memoizedState=[d,h===void 0?null:h],d},useContext:Ho,useEffect:P$,useImperativeHandle:function(d,h,g){g=g!=null?g.concat([d]):null,o1(4194308,4,L$.bind(null,h,d),g)},useLayoutEffect:function(d,h){return o1(4194308,4,d,h)},useInsertionEffect:function(d,h){o1(4,2,d,h)},useMemo:function(d,h){var g=Mi();h=h===void 0?null:h;var x=d();if(rf){De(!0);try{d()}finally{De(!1)}}return g.memoizedState=[x,h],x},useReducer:function(d,h,g){var x=Mi();if(g!==void 0){var C=g(h);if(rf){De(!0);try{g(h)}finally{De(!1)}}}else C=h;return x.memoizedState=x.baseState=C,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:C},x.queue=d,d=d.dispatch=Pue.bind(null,Mt,d),[x.memoizedState,d]},useRef:function(d){var h=Mi();return d={current:d},h.memoizedState=d},useState:function(d){d=V2(d);var h=d.queue,g=W$.bind(null,Mt,h);return h.dispatch=g,[d.memoizedState,g]},useDebugValue:U2,useDeferredValue:function(d,h){var g=Mi();return G2(g,d,h)},useTransition:function(){var d=V2(!1);return d=H$.bind(null,Mt,d.queue,!0,!1),Mi().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,h,g){var x=Mt,C=Mi();if(sn){if(g===void 0)throw Error(r(407));g=g()}else{if(g=h(),jn===null)throw Error(r(349));(Gt&124)!==0||b$(x,h,g)}C.memoizedState=g;var _={value:g,getSnapshot:h};return C.queue=_,P$(x$.bind(null,x,_,d),[d]),x.flags|=2048,Jh(9,r1(),v$.bind(null,x,_,g,h),null),g},useId:function(){var d=Mi(),h=jn.identifierPrefix;if(sn){var g=mc,x=pc;g=(x&~(1<<32-Oe(x)-1)).toString(32)+g,h=""+h+"R"+g,g=e1++,0<g&&(h+="H"+g.toString(32)),h+=""}else g=Aue++,h=""+h+"r"+g.toString(32)+"";return d.memoizedState=h},useHostTransitionStatus:Z2,useFormState:M$,useActionState:M$,useOptimistic:function(d){var h=Mi();h.memoizedState=h.baseState=d;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=W2.bind(null,Mt,!0,g),g.dispatch=h,[d,h]},useMemoCache:z2,useCacheRefresh:function(){return Mi().memoizedState=Oue.bind(null,Mt)}},X$={readContext:Ho,use:t1,useCallback:B$,useContext:Ho,useEffect:D$,useImperativeHandle:z$,useInsertionEffect:$$,useLayoutEffect:j$,useMemo:F$,useReducer:n1,useRef:O$,useState:function(){return n1(bc)},useDebugValue:U2,useDeferredValue:function(d,h){var g=jr();return V$(g,bn.memoizedState,d,h)},useTransition:function(){var d=n1(bc)[0],h=jr().memoizedState;return[typeof d=="boolean"?d:Gg(d),h]},useSyncExternalStore:y$,useId:q$,useHostTransitionStatus:Z2,useFormState:N$,useActionState:N$,useOptimistic:function(d,h){var g=jr();return k$(g,bn,d,h)},useMemoCache:z2,useCacheRefresh:Z$},Due={readContext:Ho,use:t1,useCallback:B$,useContext:Ho,useEffect:D$,useImperativeHandle:z$,useInsertionEffect:$$,useLayoutEffect:j$,useMemo:F$,useReducer:F2,useRef:O$,useState:function(){return F2(bc)},useDebugValue:U2,useDeferredValue:function(d,h){var g=jr();return bn===null?G2(g,d,h):V$(g,bn.memoizedState,d,h)},useTransition:function(){var d=F2(bc)[0],h=jr().memoizedState;return[typeof d=="boolean"?d:Gg(d),h]},useSyncExternalStore:y$,useId:q$,useHostTransitionStatus:Z2,useFormState:I$,useActionState:I$,useOptimistic:function(d,h){var g=jr();return bn!==null?k$(g,bn,d,h):(g.baseState=d,[d,g.queue.dispatch])},useMemoCache:z2,useCacheRefresh:Z$},Xh=null,Wg=0;function a1(d){var h=Wg;return Wg+=1,Xh===null&&(Xh=[]),c$(Xh,d,h)}function Kg(d,h){h=h.props.ref,d.ref=h!==void 0?h:null}function l1(d,h){throw h.$$typeof===f?Error(r(525)):(d=Object.prototype.toString.call(h),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)))}function Q$(d){var h=d._init;return h(d._payload)}function ej(d){function h(ne,X){if(d){var oe=ne.deletions;oe===null?(ne.deletions=[X],ne.flags|=16):oe.push(X)}}function g(ne,X){if(!d)return null;for(;X!==null;)h(ne,X),X=X.sibling;return null}function x(ne){for(var X=new Map;ne!==null;)ne.key!==null?X.set(ne.key,ne):X.set(ne.index,ne),ne=ne.sibling;return X}function C(ne,X){return ne=hc(ne,X),ne.index=0,ne.sibling=null,ne}function _(ne,X,oe){return ne.index=oe,d?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<X?(ne.flags|=67108866,X):oe):(ne.flags|=67108866,X)):(ne.flags|=1048576,X)}function P(ne){return d&&ne.alternate===null&&(ne.flags|=67108866),ne}function j(ne,X,oe,we){return X===null||X.tag!==6?(X=m2(oe,ne.mode,we),X.return=ne,X):(X=C(X,oe),X.return=ne,X)}function J(ne,X,oe,we){var Ue=oe.type;return Ue===y?ve(ne,X,oe.props.children,we,oe.key):X!==null&&(X.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===I&&Q$(Ue)===X.type)?(X=C(X,oe.props),Kg(X,oe),X.return=ne,X):(X=Uv(oe.type,oe.key,oe.props,null,ne.mode,we),Kg(X,oe),X.return=ne,X)}function le(ne,X,oe,we){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=g2(oe,ne.mode,we),X.return=ne,X):(X=C(X,oe.children||[]),X.return=ne,X)}function ve(ne,X,oe,we,Ue){return X===null||X.tag!==7?(X=Kd(oe,ne.mode,we,Ue),X.return=ne,X):(X=C(X,oe),X.return=ne,X)}function ke(ne,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=m2(""+X,ne.mode,oe),X.return=ne,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case p:return oe=Uv(X.type,X.key,X.props,null,ne.mode,oe),Kg(oe,X),oe.return=ne,oe;case m:return X=g2(X,ne.mode,oe),X.return=ne,X;case I:var we=X._init;return X=we(X._payload),ke(ne,X,oe)}if(K(X)||G(X))return X=Kd(X,ne.mode,oe,null),X.return=ne,X;if(typeof X.then=="function")return ke(ne,a1(X),oe);if(X.$$typeof===T)return ke(ne,Wv(ne,X),oe);l1(ne,X)}return null}function ue(ne,X,oe,we){var Ue=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ue!==null?null:j(ne,X,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case p:return oe.key===Ue?J(ne,X,oe,we):null;case m:return oe.key===Ue?le(ne,X,oe,we):null;case I:return Ue=oe._init,oe=Ue(oe._payload),ue(ne,X,oe,we)}if(K(oe)||G(oe))return Ue!==null?null:ve(ne,X,oe,we,null);if(typeof oe.then=="function")return ue(ne,X,a1(oe),we);if(oe.$$typeof===T)return ue(ne,X,Wv(ne,oe),we);l1(ne,oe)}return null}function de(ne,X,oe,we,Ue){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ne=ne.get(oe)||null,j(X,ne,""+we,Ue);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case p:return ne=ne.get(we.key===null?oe:we.key)||null,J(X,ne,we,Ue);case m:return ne=ne.get(we.key===null?oe:we.key)||null,le(X,ne,we,Ue);case I:var Ot=we._init;return we=Ot(we._payload),de(ne,X,oe,we,Ue)}if(K(we)||G(we))return ne=ne.get(oe)||null,ve(X,ne,we,Ue,null);if(typeof we.then=="function")return de(ne,X,oe,a1(we),Ue);if(we.$$typeof===T)return de(ne,X,oe,Wv(X,we),Ue);l1(X,we)}return null}function ct(ne,X,oe,we){for(var Ue=null,Ot=null,Xe=X,at=X=0,yo=null;Xe!==null&&at<oe.length;at++){Xe.index>at?(yo=Xe,Xe=null):yo=Xe.sibling;var en=ue(ne,Xe,oe[at],we);if(en===null){Xe===null&&(Xe=yo);break}d&&Xe&&en.alternate===null&&h(ne,Xe),X=_(en,X,at),Ot===null?Ue=en:Ot.sibling=en,Ot=en,Xe=yo}if(at===oe.length)return g(ne,Xe),sn&&Jd(ne,at),Ue;if(Xe===null){for(;at<oe.length;at++)Xe=ke(ne,oe[at],we),Xe!==null&&(X=_(Xe,X,at),Ot===null?Ue=Xe:Ot.sibling=Xe,Ot=Xe);return sn&&Jd(ne,at),Ue}for(Xe=x(Xe);at<oe.length;at++)yo=de(Xe,ne,at,oe[at],we),yo!==null&&(d&&yo.alternate!==null&&Xe.delete(yo.key===null?at:yo.key),X=_(yo,X,at),Ot===null?Ue=yo:Ot.sibling=yo,Ot=yo);return d&&Xe.forEach(function(ju){return h(ne,ju)}),sn&&Jd(ne,at),Ue}function st(ne,X,oe,we){if(oe==null)throw Error(r(151));for(var Ue=null,Ot=null,Xe=X,at=X=0,yo=null,en=oe.next();Xe!==null&&!en.done;at++,en=oe.next()){Xe.index>at?(yo=Xe,Xe=null):yo=Xe.sibling;var ju=ue(ne,Xe,en.value,we);if(ju===null){Xe===null&&(Xe=yo);break}d&&Xe&&ju.alternate===null&&h(ne,Xe),X=_(ju,X,at),Ot===null?Ue=ju:Ot.sibling=ju,Ot=ju,Xe=yo}if(en.done)return g(ne,Xe),sn&&Jd(ne,at),Ue;if(Xe===null){for(;!en.done;at++,en=oe.next())en=ke(ne,en.value,we),en!==null&&(X=_(en,X,at),Ot===null?Ue=en:Ot.sibling=en,Ot=en);return sn&&Jd(ne,at),Ue}for(Xe=x(Xe);!en.done;at++,en=oe.next())en=de(Xe,ne,at,en.value,we),en!==null&&(d&&en.alternate!==null&&Xe.delete(en.key===null?at:en.key),X=_(en,X,at),Ot===null?Ue=en:Ot.sibling=en,Ot=en);return d&&Xe.forEach(function($de){return h(ne,$de)}),sn&&Jd(ne,at),Ue}function xn(ne,X,oe,we){if(typeof oe=="object"&&oe!==null&&oe.type===y&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case p:e:{for(var Ue=oe.key;X!==null;){if(X.key===Ue){if(Ue=oe.type,Ue===y){if(X.tag===7){g(ne,X.sibling),we=C(X,oe.props.children),we.return=ne,ne=we;break e}}else if(X.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===I&&Q$(Ue)===X.type){g(ne,X.sibling),we=C(X,oe.props),Kg(we,oe),we.return=ne,ne=we;break e}g(ne,X);break}else h(ne,X);X=X.sibling}oe.type===y?(we=Kd(oe.props.children,ne.mode,we,oe.key),we.return=ne,ne=we):(we=Uv(oe.type,oe.key,oe.props,null,ne.mode,we),Kg(we,oe),we.return=ne,ne=we)}return P(ne);case m:e:{for(Ue=oe.key;X!==null;){if(X.key===Ue)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){g(ne,X.sibling),we=C(X,oe.children||[]),we.return=ne,ne=we;break e}else{g(ne,X);break}else h(ne,X);X=X.sibling}we=g2(oe,ne.mode,we),we.return=ne,ne=we}return P(ne);case I:return Ue=oe._init,oe=Ue(oe._payload),xn(ne,X,oe,we)}if(K(oe))return ct(ne,X,oe,we);if(G(oe)){if(Ue=G(oe),typeof Ue!="function")throw Error(r(150));return oe=Ue.call(oe),st(ne,X,oe,we)}if(typeof oe.then=="function")return xn(ne,X,a1(oe),we);if(oe.$$typeof===T)return xn(ne,X,Wv(ne,oe),we);l1(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,X!==null&&X.tag===6?(g(ne,X.sibling),we=C(X,oe),we.return=ne,ne=we):(g(ne,X),we=m2(oe,ne.mode,we),we.return=ne,ne=we),P(ne)):g(ne,X)}return function(ne,X,oe,we){try{Wg=0;var Ue=xn(ne,X,oe,we);return Xh=null,Ue}catch(Xe){if(Xe===zg||Xe===Yv)throw Xe;var Ot=ls(29,Xe,null,ne.mode);return Ot.lanes=we,Ot.return=ne,Ot}finally{}}}var Qh=ej(!0),tj=ej(!1),qs=U(null),bl=null;function Su(d){var h=d.alternate;D(Xr,Xr.current&1),D(qs,d),bl===null&&(h===null||Wh.current!==null||h.memoizedState!==null)&&(bl=d)}function nj(d){if(d.tag===22){if(D(Xr,Xr.current),D(qs,d),bl===null){var h=d.alternate;h!==null&&h.memoizedState!==null&&(bl=d)}}else ku()}function ku(){D(Xr,Xr.current),D(qs,qs.current)}function vc(d){te(qs),bl===d&&(bl=null),te(Xr)}var Xr=U(0);function c1(d){for(var h=d;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||LT(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function K2(d,h,g,x){h=d.memoizedState,g=g(x,h),g=g==null?h:u({},h,g),d.memoizedState=g,d.lanes===0&&(d.updateQueue.baseState=g)}var Y2={enqueueSetState:function(d,h,g){d=d._reactInternals;var x=fs(),C=vu(x);C.payload=h,g!=null&&(C.callback=g),h=xu(d,C,x),h!==null&&(hs(h,d,x),Fg(h,d,x))},enqueueReplaceState:function(d,h,g){d=d._reactInternals;var x=fs(),C=vu(x);C.tag=1,C.payload=h,g!=null&&(C.callback=g),h=xu(d,C,x),h!==null&&(hs(h,d,x),Fg(h,d,x))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var g=fs(),x=vu(g);x.tag=2,h!=null&&(x.callback=h),h=xu(d,x,g),h!==null&&(hs(h,d,g),Fg(h,d,g))}};function rj(d,h,g,x,C,_,P){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(x,_,P):h.prototype&&h.prototype.isPureReactComponent?!Rg(g,x)||!Rg(C,_):!0}function oj(d,h,g,x){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,x),h.state!==d&&Y2.enqueueReplaceState(h,h.state,null)}function of(d,h){var g=h;if("ref"in h){g={};for(var x in h)x!=="ref"&&(g[x]=h[x])}if(d=d.defaultProps){g===h&&(g=u({},g));for(var C in d)g[C]===void 0&&(g[C]=d[C])}return g}var u1=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function ij(d){u1(d)}function sj(d){console.error(d)}function aj(d){u1(d)}function d1(d,h){try{var g=d.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function lj(d,h,g){try{var x=d.onCaughtError;x(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function J2(d,h,g){return g=vu(g),g.tag=3,g.payload={element:null},g.callback=function(){d1(d,h)},g}function cj(d){return d=vu(d),d.tag=3,d}function uj(d,h,g,x){var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var _=x.value;d.payload=function(){return C(_)},d.callback=function(){lj(h,g,x)}}var P=g.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(d.callback=function(){lj(h,g,x),typeof C!="function"&&(Mu===null?Mu=new Set([this]):Mu.add(this));var j=x.stack;this.componentDidCatch(x.value,{componentStack:j!==null?j:""})})}function $ue(d,h,g,x,C){if(g.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=g.alternate,h!==null&&$g(h,g,C,!0),g=qs.current,g!==null){switch(g.tag){case 13:return bl===null?wT():g.alternate===null&&br===0&&(br=3),g.flags&=-257,g.flags|=65536,g.lanes=C,x===T2?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([x]):h.add(x),kT(d,x,C)),!1;case 22:return g.flags|=65536,x===T2?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([x]):g.add(x)),kT(d,x,C)),!1}throw Error(r(435,g.tag))}return kT(d,x,C),wT(),!1}if(sn)return h=qs.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=C,x!==v2&&(d=Error(r(422),{cause:x}),Dg(Vs(d,g)))):(x!==v2&&(h=Error(r(423),{cause:x}),Dg(Vs(h,g))),d=d.current.alternate,d.flags|=65536,C&=-C,d.lanes|=C,x=Vs(x,g),C=J2(d.stateNode,x,C),M2(d,C),br!==4&&(br=2)),!1;var _=Error(r(520),{cause:x});if(_=Vs(_,g),ny===null?ny=[_]:ny.push(_),br!==4&&(br=2),h===null)return!0;x=Vs(x,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,d=C&-C,g.lanes|=d,d=J2(g.stateNode,x,d),M2(g,d),!1;case 1:if(h=g.type,_=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Mu===null||!Mu.has(_))))return g.flags|=65536,C&=-C,g.lanes|=C,C=cj(C),uj(C,d,g,x),M2(g,C),!1}g=g.return}while(g!==null);return!1}var dj=Error(r(461)),mo=!1;function To(d,h,g,x){h.child=d===null?tj(h,null,g,x):Qh(h,d.child,g,x)}function fj(d,h,g,x,C){g=g.render;var _=h.ref;if("ref"in x){var P={};for(var j in x)j!=="ref"&&(P[j]=x[j])}else P=x;return tf(h),x=P2(d,h,g,P,_,C),j=D2(),d!==null&&!mo?($2(d,h,C),xc(d,h,C)):(sn&&j&&y2(h),h.flags|=1,To(d,h,x,C),h.child)}function hj(d,h,g,x,C){if(d===null){var _=g.type;return typeof _=="function"&&!p2(_)&&_.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=_,pj(d,h,_,x,C)):(d=Uv(g.type,null,x,h,h.mode,C),d.ref=h.ref,d.return=h,h.child=d)}if(_=d.child,!iT(d,C)){var P=_.memoizedProps;if(g=g.compare,g=g!==null?g:Rg,g(P,x)&&d.ref===h.ref)return xc(d,h,C)}return h.flags|=1,d=hc(_,x),d.ref=h.ref,d.return=h,h.child=d}function pj(d,h,g,x,C){if(d!==null){var _=d.memoizedProps;if(Rg(_,x)&&d.ref===h.ref)if(mo=!1,h.pendingProps=x=_,iT(d,C))(d.flags&131072)!==0&&(mo=!0);else return h.lanes=d.lanes,xc(d,h,C)}return X2(d,h,g,x,C)}function mj(d,h,g){var x=h.pendingProps,C=x.children,_=d!==null?d.memoizedState:null;if(x.mode==="hidden"){if((h.flags&128)!==0){if(x=_!==null?_.baseLanes|g:g,d!==null){for(C=h.child=d.child,_=0;C!==null;)_=_|C.lanes|C.childLanes,C=C.sibling;h.childLanes=_&~x}else h.childLanes=0,h.child=null;return gj(d,h,x,g)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},d!==null&&Kv(h,_!==null?_.cachePool:null),_!==null?p$(h,_):R2(),nj(h);else return h.lanes=h.childLanes=536870912,gj(d,h,_!==null?_.baseLanes|g:g,g)}else _!==null?(Kv(h,_.cachePool),p$(h,_),ku(),h.memoizedState=null):(d!==null&&Kv(h,null),R2(),ku());return To(d,h,C,g),h.child}function gj(d,h,g,x){var C=E2();return C=C===null?null:{parent:Jr._currentValue,pool:C},h.memoizedState={baseLanes:g,cachePool:C},d!==null&&Kv(h,null),R2(),nj(h),d!==null&&$g(d,h,x,!0),null}function f1(d,h){var g=h.ref;if(g===null)d!==null&&d.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(d===null||d.ref!==g)&&(h.flags|=4194816)}}function X2(d,h,g,x,C){return tf(h),g=P2(d,h,g,x,void 0,C),x=D2(),d!==null&&!mo?($2(d,h,C),xc(d,h,C)):(sn&&x&&y2(h),h.flags|=1,To(d,h,g,C),h.child)}function yj(d,h,g,x,C,_){return tf(h),h.updateQueue=null,g=g$(h,x,g,C),m$(d),x=D2(),d!==null&&!mo?($2(d,h,_),xc(d,h,_)):(sn&&x&&y2(h),h.flags|=1,To(d,h,g,_),h.child)}function bj(d,h,g,x,C){if(tf(h),h.stateNode===null){var _=Hh,P=g.contextType;typeof P=="object"&&P!==null&&(_=Ho(P)),_=new g(x,_),h.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Y2,h.stateNode=_,_._reactInternals=h,_=h.stateNode,_.props=x,_.state=h.memoizedState,_.refs={},_2(h),P=g.contextType,_.context=typeof P=="object"&&P!==null?Ho(P):Hh,_.state=h.memoizedState,P=g.getDerivedStateFromProps,typeof P=="function"&&(K2(h,g,P,x),_.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(P=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),P!==_.state&&Y2.enqueueReplaceState(_,_.state,null),Hg(h,x,_,C),Vg(),_.state=h.memoizedState),typeof _.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(d===null){_=h.stateNode;var j=h.memoizedProps,J=of(g,j);_.props=J;var le=_.context,ve=g.contextType;P=Hh,typeof ve=="object"&&ve!==null&&(P=Ho(ve));var ke=g.getDerivedStateFromProps;ve=typeof ke=="function"||typeof _.getSnapshotBeforeUpdate=="function",j=h.pendingProps!==j,ve||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j||le!==P)&&oj(h,_,x,P),bu=!1;var ue=h.memoizedState;_.state=ue,Hg(h,x,_,C),Vg(),le=h.memoizedState,j||ue!==le||bu?(typeof ke=="function"&&(K2(h,g,ke,x),le=h.memoizedState),(J=bu||rj(h,g,J,x,ue,le,P))?(ve||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(h.flags|=4194308)):(typeof _.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=le),_.props=x,_.state=le,_.context=P,x=J):(typeof _.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{_=h.stateNode,A2(d,h),P=h.memoizedProps,ve=of(g,P),_.props=ve,ke=h.pendingProps,ue=_.context,le=g.contextType,J=Hh,typeof le=="object"&&le!==null&&(J=Ho(le)),j=g.getDerivedStateFromProps,(le=typeof j=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==ke||ue!==J)&&oj(h,_,x,J),bu=!1,ue=h.memoizedState,_.state=ue,Hg(h,x,_,C),Vg();var de=h.memoizedState;P!==ke||ue!==de||bu||d!==null&&d.dependencies!==null&&Zv(d.dependencies)?(typeof j=="function"&&(K2(h,g,j,x),de=h.memoizedState),(ve=bu||rj(h,g,ve,x,ue,de,J)||d!==null&&d.dependencies!==null&&Zv(d.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(x,de,J),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(x,de,J)),typeof _.componentDidUpdate=="function"&&(h.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===d.memoizedProps&&ue===d.memoizedState||(h.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===d.memoizedProps&&ue===d.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=de),_.props=x,_.state=de,_.context=J,x=ve):(typeof _.componentDidUpdate!="function"||P===d.memoizedProps&&ue===d.memoizedState||(h.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===d.memoizedProps&&ue===d.memoizedState||(h.flags|=1024),x=!1)}return _=x,f1(d,h),x=(h.flags&128)!==0,_||x?(_=h.stateNode,g=x&&typeof g.getDerivedStateFromError!="function"?null:_.render(),h.flags|=1,d!==null&&x?(h.child=Qh(h,d.child,null,C),h.child=Qh(h,null,g,C)):To(d,h,g,C),h.memoizedState=_.state,d=h.child):d=xc(d,h,C),d}function vj(d,h,g,x){return Pg(),h.flags|=256,To(d,h,g,x),h.child}var Q2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eT(d){return{baseLanes:d,cachePool:s$()}}function tT(d,h,g){return d=d!==null?d.childLanes&~g:0,h&&(d|=Zs),d}function xj(d,h,g){var x=h.pendingProps,C=!1,_=(h.flags&128)!==0,P;if((P=_)||(P=d!==null&&d.memoizedState===null?!1:(Xr.current&2)!==0),P&&(C=!0,h.flags&=-129),P=(h.flags&32)!==0,h.flags&=-33,d===null){if(sn){if(C?Su(h):ku(),sn){var j=yr,J;if(J=j){e:{for(J=j,j=yl;J.nodeType!==8;){if(!j){j=null;break e}if(J=Pa(J.nextSibling),J===null){j=null;break e}}j=J}j!==null?(h.memoizedState={dehydrated:j,treeContext:Yd!==null?{id:pc,overflow:mc}:null,retryLane:536870912,hydrationErrors:null},J=ls(18,null,null,0),J.stateNode=j,J.return=h,h.child=J,ci=h,yr=null,J=!0):J=!1}J||Qd(h)}if(j=h.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return LT(j)?h.lanes=32:h.lanes=536870912,null;vc(h)}return j=x.children,x=x.fallback,C?(ku(),C=h.mode,j=h1({mode:"hidden",children:j},C),x=Kd(x,C,g,null),j.return=h,x.return=h,j.sibling=x,h.child=j,C=h.child,C.memoizedState=eT(g),C.childLanes=tT(d,P,g),h.memoizedState=Q2,x):(Su(h),nT(h,j))}if(J=d.memoizedState,J!==null&&(j=J.dehydrated,j!==null)){if(_)h.flags&256?(Su(h),h.flags&=-257,h=rT(d,h,g)):h.memoizedState!==null?(ku(),h.child=d.child,h.flags|=128,h=null):(ku(),C=x.fallback,j=h.mode,x=h1({mode:"visible",children:x.children},j),C=Kd(C,j,g,null),C.flags|=2,x.return=h,C.return=h,x.sibling=C,h.child=x,Qh(h,d.child,null,g),x=h.child,x.memoizedState=eT(g),x.childLanes=tT(d,P,g),h.memoizedState=Q2,h=C);else if(Su(h),LT(j)){if(P=j.nextSibling&&j.nextSibling.dataset,P)var le=P.dgst;P=le,x=Error(r(419)),x.stack="",x.digest=P,Dg({value:x,source:null,stack:null}),h=rT(d,h,g)}else if(mo||$g(d,h,g,!1),P=(g&d.childLanes)!==0,mo||P){if(P=jn,P!==null&&(x=g&-g,x=(x&42)!==0?1:Ci(x),x=(x&(P.suspendedLanes|g))!==0?0:x,x!==0&&x!==J.retryLane))throw J.retryLane=x,Vh(d,x),hs(P,d,x),dj;j.data==="$?"||wT(),h=rT(d,h,g)}else j.data==="$?"?(h.flags|=192,h.child=d.child,h=null):(d=J.treeContext,yr=Pa(j.nextSibling),ci=h,sn=!0,Xd=null,yl=!1,d!==null&&(Us[Gs++]=pc,Us[Gs++]=mc,Us[Gs++]=Yd,pc=d.id,mc=d.overflow,Yd=h),h=nT(h,x.children),h.flags|=4096);return h}return C?(ku(),C=x.fallback,j=h.mode,J=d.child,le=J.sibling,x=hc(J,{mode:"hidden",children:x.children}),x.subtreeFlags=J.subtreeFlags&65011712,le!==null?C=hc(le,C):(C=Kd(C,j,g,null),C.flags|=2),C.return=h,x.return=h,x.sibling=C,h.child=x,x=C,C=h.child,j=d.child.memoizedState,j===null?j=eT(g):(J=j.cachePool,J!==null?(le=Jr._currentValue,J=J.parent!==le?{parent:le,pool:le}:J):J=s$(),j={baseLanes:j.baseLanes|g,cachePool:J}),C.memoizedState=j,C.childLanes=tT(d,P,g),h.memoizedState=Q2,x):(Su(h),g=d.child,d=g.sibling,g=hc(g,{mode:"visible",children:x.children}),g.return=h,g.sibling=null,d!==null&&(P=h.deletions,P===null?(h.deletions=[d],h.flags|=16):P.push(d)),h.child=g,h.memoizedState=null,g)}function nT(d,h){return h=h1({mode:"visible",children:h},d.mode),h.return=d,d.child=h}function h1(d,h){return d=ls(22,d,null,h),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function rT(d,h,g){return Qh(h,d.child,null,g),d=nT(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function wj(d,h,g){d.lanes|=h;var x=d.alternate;x!==null&&(x.lanes|=h),w2(d.return,h,g)}function oT(d,h,g,x,C){var _=d.memoizedState;_===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:C}:(_.isBackwards=h,_.rendering=null,_.renderingStartTime=0,_.last=x,_.tail=g,_.tailMode=C)}function Sj(d,h,g){var x=h.pendingProps,C=x.revealOrder,_=x.tail;if(To(d,h,x.children,g),x=Xr.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&wj(d,g,h);else if(d.tag===19)wj(d,g,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}x&=1}switch(D(Xr,x),C){case"forwards":for(g=h.child,C=null;g!==null;)d=g.alternate,d!==null&&c1(d)===null&&(C=g),g=g.sibling;g=C,g===null?(C=h.child,h.child=null):(C=g.sibling,g.sibling=null),oT(h,!1,C,g,_);break;case"backwards":for(g=null,C=h.child,h.child=null;C!==null;){if(d=C.alternate,d!==null&&c1(d)===null){h.child=C;break}d=C.sibling,C.sibling=g,g=C,C=d}oT(h,!0,g,null,_);break;case"together":oT(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function xc(d,h,g){if(d!==null&&(h.dependencies=d.dependencies),Au|=h.lanes,(g&h.childLanes)===0)if(d!==null){if($g(d,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(d!==null&&h.child!==d.child)throw Error(r(153));if(h.child!==null){for(d=h.child,g=hc(d,d.pendingProps),h.child=g,g.return=h;d.sibling!==null;)d=d.sibling,g=g.sibling=hc(d,d.pendingProps),g.return=h;g.sibling=null}return h.child}function iT(d,h){return(d.lanes&h)!==0?!0:(d=d.dependencies,!!(d!==null&&Zv(d)))}function jue(d,h,g){switch(h.tag){case 3:ye(h,h.stateNode.containerInfo),yu(h,Jr,d.memoizedState.cache),Pg();break;case 27:case 5:$e(h);break;case 4:ye(h,h.stateNode.containerInfo);break;case 10:yu(h,h.type,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(Su(h),h.flags|=128,null):(g&h.child.childLanes)!==0?xj(d,h,g):(Su(h),d=xc(d,h,g),d!==null?d.sibling:null);Su(h);break;case 19:var C=(d.flags&128)!==0;if(x=(g&h.childLanes)!==0,x||($g(d,h,g,!1),x=(g&h.childLanes)!==0),C){if(x)return Sj(d,h,g);h.flags|=128}if(C=h.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),D(Xr,Xr.current),x)break;return null;case 22:case 23:return h.lanes=0,mj(d,h,g);case 24:yu(h,Jr,d.memoizedState.cache)}return xc(d,h,g)}function kj(d,h,g){if(d!==null)if(d.memoizedProps!==h.pendingProps)mo=!0;else{if(!iT(d,g)&&(h.flags&128)===0)return mo=!1,jue(d,h,g);mo=(d.flags&131072)!==0}else mo=!1,sn&&(h.flags&1048576)!==0&&Q5(h,qv,h.index);switch(h.lanes=0,h.tag){case 16:e:{d=h.pendingProps;var x=h.elementType,C=x._init;if(x=C(x._payload),h.type=x,typeof x=="function")p2(x)?(d=of(x,d),h.tag=1,h=bj(null,h,x,d,g)):(h.tag=0,h=X2(null,h,x,d,g));else{if(x!=null){if(C=x.$$typeof,C===A){h.tag=11,h=fj(null,h,x,d,g);break e}else if(C===O){h.tag=14,h=hj(null,h,x,d,g);break e}}throw h=W(x)||x,Error(r(306,h,""))}}return h;case 0:return X2(d,h,h.type,h.pendingProps,g);case 1:return x=h.type,C=of(x,h.pendingProps),bj(d,h,x,C,g);case 3:e:{if(ye(h,h.stateNode.containerInfo),d===null)throw Error(r(387));x=h.pendingProps;var _=h.memoizedState;C=_.element,A2(d,h),Hg(h,x,null,g);var P=h.memoizedState;if(x=P.cache,yu(h,Jr,x),x!==_.cache&&S2(h,[Jr],g,!0),Vg(),x=P.element,_.isDehydrated)if(_={element:x,isDehydrated:!1,cache:P.cache},h.updateQueue.baseState=_,h.memoizedState=_,h.flags&256){h=vj(d,h,x,g);break e}else if(x!==C){C=Vs(Error(r(424)),h),Dg(C),h=vj(d,h,x,g);break e}else{switch(d=h.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(yr=Pa(d.firstChild),ci=h,sn=!0,Xd=null,yl=!0,g=tj(h,null,x,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Pg(),x===C){h=xc(d,h,g);break e}To(d,h,x,g)}h=h.child}return h;case 26:return f1(d,h),d===null?(g=_L(h.type,null,h.pendingProps,null))?h.memoizedState=g:sn||(g=h.type,d=h.pendingProps,x=_1(pe.current).createElement(g),x[ln]=h,x[Yt]=d,Ao(x,g,d),Xn(x),h.stateNode=x):h.memoizedState=_L(h.type,d.memoizedProps,h.pendingProps,d.memoizedState),null;case 27:return $e(h),d===null&&sn&&(x=h.stateNode=CL(h.type,h.pendingProps,pe.current),ci=h,yl=!0,C=yr,Iu(h.type)?(zT=C,yr=Pa(x.firstChild)):yr=C),To(d,h,h.pendingProps.children,g),f1(d,h),d===null&&(h.flags|=4194304),h.child;case 5:return d===null&&sn&&((C=x=yr)&&(x=dde(x,h.type,h.pendingProps,yl),x!==null?(h.stateNode=x,ci=h,yr=Pa(x.firstChild),yl=!1,C=!0):C=!1),C||Qd(h)),$e(h),C=h.type,_=h.pendingProps,P=d!==null?d.memoizedProps:null,x=_.children,DT(C,_)?x=null:P!==null&&DT(C,P)&&(h.flags|=32),h.memoizedState!==null&&(C=P2(d,h,Mue,null,null,g),dy._currentValue=C),f1(d,h),To(d,h,x,g),h.child;case 6:return d===null&&sn&&((d=g=yr)&&(g=fde(g,h.pendingProps,yl),g!==null?(h.stateNode=g,ci=h,yr=null,d=!0):d=!1),d||Qd(h)),null;case 13:return xj(d,h,g);case 4:return ye(h,h.stateNode.containerInfo),x=h.pendingProps,d===null?h.child=Qh(h,null,x,g):To(d,h,x,g),h.child;case 11:return fj(d,h,h.type,h.pendingProps,g);case 7:return To(d,h,h.pendingProps,g),h.child;case 8:return To(d,h,h.pendingProps.children,g),h.child;case 12:return To(d,h,h.pendingProps.children,g),h.child;case 10:return x=h.pendingProps,yu(h,h.type,x.value),To(d,h,x.children,g),h.child;case 9:return C=h.type._context,x=h.pendingProps.children,tf(h),C=Ho(C),x=x(C),h.flags|=1,To(d,h,x,g),h.child;case 14:return hj(d,h,h.type,h.pendingProps,g);case 15:return pj(d,h,h.type,h.pendingProps,g);case 19:return Sj(d,h,g);case 31:return x=h.pendingProps,g=h.mode,x={mode:x.mode,children:x.children},d===null?(g=h1(x,g),g.ref=h.ref,h.child=g,g.return=h,h=g):(g=hc(d.child,x),g.ref=h.ref,h.child=g,g.return=h,h=g),h;case 22:return mj(d,h,g);case 24:return tf(h),x=Ho(Jr),d===null?(C=E2(),C===null&&(C=jn,_=k2(),C.pooledCache=_,_.refCount++,_!==null&&(C.pooledCacheLanes|=g),C=_),h.memoizedState={parent:x,cache:C},_2(h),yu(h,Jr,C)):((d.lanes&g)!==0&&(A2(d,h),Hg(h,null,null,g),Vg()),C=d.memoizedState,_=h.memoizedState,C.parent!==x?(C={parent:x,cache:x},h.memoizedState=C,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=C),yu(h,Jr,x)):(x=_.cache,yu(h,Jr,x),x!==C.cache&&S2(h,[Jr],g,!0))),To(d,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function wc(d){d.flags|=4}function Cj(d,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!IL(h)){if(h=qs.current,h!==null&&((Gt&4194048)===Gt?bl!==null:(Gt&62914560)!==Gt&&(Gt&536870912)===0||h!==bl))throw Bg=T2,a$;d.flags|=8192}}function p1(d,h){h!==null&&(d.flags|=4),d.flags&16384&&(h=d.tag!==22?Ji():536870912,d.lanes|=h,rp|=h)}function Yg(d,h){if(!sn)switch(d.tailMode){case"hidden":h=d.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?d.tail=null:g.sibling=null;break;case"collapsed":g=d.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:x.sibling=null}}function cr(d){var h=d.alternate!==null&&d.alternate.child===d.child,g=0,x=0;if(h)for(var C=d.child;C!==null;)g|=C.lanes|C.childLanes,x|=C.subtreeFlags&65011712,x|=C.flags&65011712,C.return=d,C=C.sibling;else for(C=d.child;C!==null;)g|=C.lanes|C.childLanes,x|=C.subtreeFlags,x|=C.flags,C.return=d,C=C.sibling;return d.subtreeFlags|=x,d.childLanes=g,h}function Lue(d,h,g){var x=h.pendingProps;switch(b2(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(h),null;case 1:return cr(h),null;case 3:return g=h.stateNode,x=null,d!==null&&(x=d.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),yc(Jr),Re(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(d===null||d.child===null)&&(Og(h)?wc(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,n$())),cr(h),null;case 26:return g=h.memoizedState,d===null?(wc(h),g!==null?(cr(h),Cj(h,g)):(cr(h),h.flags&=-16777217)):g?g!==d.memoizedState?(wc(h),cr(h),Cj(h,g)):(cr(h),h.flags&=-16777217):(d.memoizedProps!==x&&wc(h),cr(h),h.flags&=-16777217),null;case 27:Be(h),g=pe.current;var C=h.type;if(d!==null&&h.stateNode!=null)d.memoizedProps!==x&&wc(h);else{if(!x){if(h.stateNode===null)throw Error(r(166));return cr(h),null}d=ce.current,Og(h)?e$(h):(d=CL(C,x,g),h.stateNode=d,wc(h))}return cr(h),null;case 5:if(Be(h),g=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==x&&wc(h);else{if(!x){if(h.stateNode===null)throw Error(r(166));return cr(h),null}if(d=ce.current,Og(h))e$(h);else{switch(C=_1(pe.current),d){case 1:d=C.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:d=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":d=C.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":d=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":d=C.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof x.is=="string"?C.createElement("select",{is:x.is}):C.createElement("select"),x.multiple?d.multiple=!0:x.size&&(d.size=x.size);break;default:d=typeof x.is=="string"?C.createElement(g,{is:x.is}):C.createElement(g)}}d[ln]=h,d[Yt]=x;e:for(C=h.child;C!==null;){if(C.tag===5||C.tag===6)d.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===h)break e;for(;C.sibling===null;){if(C.return===null||C.return===h)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}h.stateNode=d;e:switch(Ao(d,g,x),g){case"button":case"input":case"select":case"textarea":d=!!x.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&wc(h)}}return cr(h),h.flags&=-16777217,null;case 6:if(d&&h.stateNode!=null)d.memoizedProps!==x&&wc(h);else{if(typeof x!="string"&&h.stateNode===null)throw Error(r(166));if(d=pe.current,Og(h)){if(d=h.stateNode,g=h.memoizedProps,x=null,C=ci,C!==null)switch(C.tag){case 27:case 5:x=C.memoizedProps}d[ln]=h,d=!!(d.nodeValue===g||x!==null&&x.suppressHydrationWarning===!0||yL(d.nodeValue,g)),d||Qd(h)}else d=_1(d).createTextNode(x),d[ln]=h,h.stateNode=d}return cr(h),null;case 13:if(x=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(C=Og(h),x!==null&&x.dehydrated!==null){if(d===null){if(!C)throw Error(r(318));if(C=h.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[ln]=h}else Pg(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;cr(h),C=!1}else C=n$(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=C),C=!0;if(!C)return h.flags&256?(vc(h),h):(vc(h),null)}if(vc(h),(h.flags&128)!==0)return h.lanes=g,h;if(g=x!==null,d=d!==null&&d.memoizedState!==null,g){x=h.child,C=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(C=x.alternate.memoizedState.cachePool.pool);var _=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(_=x.memoizedState.cachePool.pool),_!==C&&(x.flags|=2048)}return g!==d&&g&&(h.child.flags|=8192),p1(h,h.updateQueue),cr(h),null;case 4:return Re(),d===null&&NT(h.stateNode.containerInfo),cr(h),null;case 10:return yc(h.type),cr(h),null;case 19:if(te(Xr),C=h.memoizedState,C===null)return cr(h),null;if(x=(h.flags&128)!==0,_=C.rendering,_===null)if(x)Yg(C,!1);else{if(br!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(_=c1(d),_!==null){for(h.flags|=128,Yg(C,!1),d=_.updateQueue,h.updateQueue=d,p1(h,d),h.subtreeFlags=0,d=g,g=h.child;g!==null;)X5(g,d),g=g.sibling;return D(Xr,Xr.current&1|2),h.child}d=d.sibling}C.tail!==null&&xe()>y1&&(h.flags|=128,x=!0,Yg(C,!1),h.lanes=4194304)}else{if(!x)if(d=c1(_),d!==null){if(h.flags|=128,x=!0,d=d.updateQueue,h.updateQueue=d,p1(h,d),Yg(C,!0),C.tail===null&&C.tailMode==="hidden"&&!_.alternate&&!sn)return cr(h),null}else 2*xe()-C.renderingStartTime>y1&&g!==536870912&&(h.flags|=128,x=!0,Yg(C,!1),h.lanes=4194304);C.isBackwards?(_.sibling=h.child,h.child=_):(d=C.last,d!==null?d.sibling=_:h.child=_,C.last=_)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=xe(),h.sibling=null,d=Xr.current,D(Xr,x?d&1|2:d&1),h):(cr(h),null);case 22:case 23:return vc(h),I2(),x=h.memoizedState!==null,d!==null?d.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(g&536870912)!==0&&(h.flags&128)===0&&(cr(h),h.subtreeFlags&6&&(h.flags|=8192)):cr(h),g=h.updateQueue,g!==null&&p1(h,g.retryQueue),g=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==g&&(h.flags|=2048),d!==null&&te(nf),null;case 24:return g=null,d!==null&&(g=d.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),yc(Jr),cr(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function zue(d,h){switch(b2(h),h.tag){case 1:return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return yc(Jr),Re(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 26:case 27:case 5:return Be(h),null;case 13:if(vc(h),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Pg()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return te(Xr),null;case 4:return Re(),null;case 10:return yc(h.type),null;case 22:case 23:return vc(h),I2(),d!==null&&te(nf),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 24:return yc(Jr),null;case 25:return null;default:return null}}function Ej(d,h){switch(b2(h),h.tag){case 3:yc(Jr),Re();break;case 26:case 27:case 5:Be(h);break;case 4:Re();break;case 13:vc(h);break;case 19:te(Xr);break;case 10:yc(h.type);break;case 22:case 23:vc(h),I2(),d!==null&&te(nf);break;case 24:yc(Jr)}}function Jg(d,h){try{var g=h.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var C=x.next;g=C;do{if((g.tag&d)===d){x=void 0;var _=g.create,P=g.inst;x=_(),P.destroy=x}g=g.next}while(g!==C)}}catch(j){Tn(h,h.return,j)}}function Cu(d,h,g){try{var x=h.updateQueue,C=x!==null?x.lastEffect:null;if(C!==null){var _=C.next;x=_;do{if((x.tag&d)===d){var P=x.inst,j=P.destroy;if(j!==void 0){P.destroy=void 0,C=h;var J=g,le=j;try{le()}catch(ve){Tn(C,J,ve)}}}x=x.next}while(x!==_)}}catch(ve){Tn(h,h.return,ve)}}function Tj(d){var h=d.updateQueue;if(h!==null){var g=d.stateNode;try{h$(h,g)}catch(x){Tn(d,d.return,x)}}}function _j(d,h,g){g.props=of(d.type,d.memoizedProps),g.state=d.memoizedState;try{g.componentWillUnmount()}catch(x){Tn(d,h,x)}}function Xg(d,h){try{var g=d.ref;if(g!==null){switch(d.tag){case 26:case 27:case 5:var x=d.stateNode;break;case 30:x=d.stateNode;break;default:x=d.stateNode}typeof g=="function"?d.refCleanup=g(x):g.current=x}}catch(C){Tn(d,h,C)}}function vl(d,h){var g=d.ref,x=d.refCleanup;if(g!==null)if(typeof x=="function")try{x()}catch(C){Tn(d,h,C)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(C){Tn(d,h,C)}else g.current=null}function Aj(d){var h=d.type,g=d.memoizedProps,x=d.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&x.focus();break e;case"img":g.src?x.src=g.src:g.srcSet&&(x.srcset=g.srcSet)}}catch(C){Tn(d,d.return,C)}}function sT(d,h,g){try{var x=d.stateNode;sde(x,d.type,g,h),x[Yt]=h}catch(C){Tn(d,d.return,C)}}function Mj(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&Iu(d.type)||d.tag===4}function aT(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Mj(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&Iu(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function lT(d,h,g){var x=d.tag;if(x===5||x===6)d=d.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(d,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(d),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=T1));else if(x!==4&&(x===27&&Iu(d.type)&&(g=d.stateNode,h=null),d=d.child,d!==null))for(lT(d,h,g),d=d.sibling;d!==null;)lT(d,h,g),d=d.sibling}function m1(d,h,g){var x=d.tag;if(x===5||x===6)d=d.stateNode,h?g.insertBefore(d,h):g.appendChild(d);else if(x!==4&&(x===27&&Iu(d.type)&&(g=d.stateNode),d=d.child,d!==null))for(m1(d,h,g),d=d.sibling;d!==null;)m1(d,h,g),d=d.sibling}function Nj(d){var h=d.stateNode,g=d.memoizedProps;try{for(var x=d.type,C=h.attributes;C.length;)h.removeAttributeNode(C[0]);Ao(h,x,g),h[ln]=d,h[Yt]=g}catch(_){Tn(d,d.return,_)}}var Sc=!1,Nr=!1,cT=!1,Rj=typeof WeakSet=="function"?WeakSet:Set,go=null;function Bue(d,h){if(d=d.containerInfo,OT=O1,d=V5(d),a2(d)){if("selectionStart"in d)var g={start:d.selectionStart,end:d.selectionEnd};else e:{g=(g=d.ownerDocument)&&g.defaultView||window;var x=g.getSelection&&g.getSelection();if(x&&x.rangeCount!==0){g=x.anchorNode;var C=x.anchorOffset,_=x.focusNode;x=x.focusOffset;try{g.nodeType,_.nodeType}catch{g=null;break e}var P=0,j=-1,J=-1,le=0,ve=0,ke=d,ue=null;t:for(;;){for(var de;ke!==g||C!==0&&ke.nodeType!==3||(j=P+C),ke!==_||x!==0&&ke.nodeType!==3||(J=P+x),ke.nodeType===3&&(P+=ke.nodeValue.length),(de=ke.firstChild)!==null;)ue=ke,ke=de;for(;;){if(ke===d)break t;if(ue===g&&++le===C&&(j=P),ue===_&&++ve===x&&(J=P),(de=ke.nextSibling)!==null)break;ke=ue,ue=ke.parentNode}ke=de}g=j===-1||J===-1?null:{start:j,end:J}}else g=null}g=g||{start:0,end:0}}else g=null;for(PT={focusedElem:d,selectionRange:g},O1=!1,go=h;go!==null;)if(h=go,d=h.child,(h.subtreeFlags&1024)!==0&&d!==null)d.return=h,go=d;else for(;go!==null;){switch(h=go,_=h.alternate,d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&_!==null){d=void 0,g=h,C=_.memoizedProps,_=_.memoizedState,x=g.stateNode;try{var ct=of(g.type,C,g.elementType===g.type);d=x.getSnapshotBeforeUpdate(ct,_),x.__reactInternalSnapshotBeforeUpdate=d}catch(st){Tn(g,g.return,st)}}break;case 3:if((d&1024)!==0){if(d=h.stateNode.containerInfo,g=d.nodeType,g===9)jT(d);else if(g===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":jT(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,go=d;break}go=h.return}}function Ij(d,h,g){var x=g.flags;switch(g.tag){case 0:case 11:case 15:Eu(d,g),x&4&&Jg(5,g);break;case 1:if(Eu(d,g),x&4)if(d=g.stateNode,h===null)try{d.componentDidMount()}catch(P){Tn(g,g.return,P)}else{var C=of(g.type,h.memoizedProps);h=h.memoizedState;try{d.componentDidUpdate(C,h,d.__reactInternalSnapshotBeforeUpdate)}catch(P){Tn(g,g.return,P)}}x&64&&Tj(g),x&512&&Xg(g,g.return);break;case 3:if(Eu(d,g),x&64&&(d=g.updateQueue,d!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{h$(d,h)}catch(P){Tn(g,g.return,P)}}break;case 27:h===null&&x&4&&Nj(g);case 26:case 5:Eu(d,g),h===null&&x&4&&Aj(g),x&512&&Xg(g,g.return);break;case 12:Eu(d,g);break;case 13:Eu(d,g),x&4&&Dj(d,g),x&64&&(d=g.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(g=Kue.bind(null,g),hde(d,g))));break;case 22:if(x=g.memoizedState!==null||Sc,!x){h=h!==null&&h.memoizedState!==null||Nr,C=Sc;var _=Nr;Sc=x,(Nr=h)&&!_?Tu(d,g,(g.subtreeFlags&8772)!==0):Eu(d,g),Sc=C,Nr=_}break;case 30:break;default:Eu(d,g)}}function Oj(d){var h=d.alternate;h!==null&&(d.alternate=null,Oj(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&Ds(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Qn=null,Ni=!1;function kc(d,h,g){for(g=g.child;g!==null;)Pj(d,h,g),g=g.sibling}function Pj(d,h,g){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(Y,g)}catch{}switch(g.tag){case 26:Nr||vl(g,h),kc(d,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Nr||vl(g,h);var x=Qn,C=Ni;Iu(g.type)&&(Qn=g.stateNode,Ni=!1),kc(d,h,g),ay(g.stateNode),Qn=x,Ni=C;break;case 5:Nr||vl(g,h);case 6:if(x=Qn,C=Ni,Qn=null,kc(d,h,g),Qn=x,Ni=C,Qn!==null)if(Ni)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(g.stateNode)}catch(_){Tn(g,h,_)}else try{Qn.removeChild(g.stateNode)}catch(_){Tn(g,h,_)}break;case 18:Qn!==null&&(Ni?(d=Qn,SL(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,g.stateNode),my(d)):SL(Qn,g.stateNode));break;case 4:x=Qn,C=Ni,Qn=g.stateNode.containerInfo,Ni=!0,kc(d,h,g),Qn=x,Ni=C;break;case 0:case 11:case 14:case 15:Nr||Cu(2,g,h),Nr||Cu(4,g,h),kc(d,h,g);break;case 1:Nr||(vl(g,h),x=g.stateNode,typeof x.componentWillUnmount=="function"&&_j(g,h,x)),kc(d,h,g);break;case 21:kc(d,h,g);break;case 22:Nr=(x=Nr)||g.memoizedState!==null,kc(d,h,g),Nr=x;break;default:kc(d,h,g)}}function Dj(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{my(d)}catch(g){Tn(h,h.return,g)}}function Fue(d){switch(d.tag){case 13:case 19:var h=d.stateNode;return h===null&&(h=d.stateNode=new Rj),h;case 22:return d=d.stateNode,h=d._retryCache,h===null&&(h=d._retryCache=new Rj),h;default:throw Error(r(435,d.tag))}}function uT(d,h){var g=Fue(d);h.forEach(function(x){var C=Yue.bind(null,d,x);g.has(x)||(g.add(x),x.then(C,C))})}function cs(d,h){var g=h.deletions;if(g!==null)for(var x=0;x<g.length;x++){var C=g[x],_=d,P=h,j=P;e:for(;j!==null;){switch(j.tag){case 27:if(Iu(j.type)){Qn=j.stateNode,Ni=!1;break e}break;case 5:Qn=j.stateNode,Ni=!1;break e;case 3:case 4:Qn=j.stateNode.containerInfo,Ni=!0;break e}j=j.return}if(Qn===null)throw Error(r(160));Pj(_,P,C),Qn=null,Ni=!1,_=C.alternate,_!==null&&(_.return=null),C.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)$j(h,d),h=h.sibling}var Oa=null;function $j(d,h){var g=d.alternate,x=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:cs(h,d),us(d),x&4&&(Cu(3,d,d.return),Jg(3,d),Cu(5,d,d.return));break;case 1:cs(h,d),us(d),x&512&&(Nr||g===null||vl(g,g.return)),x&64&&Sc&&(d=d.updateQueue,d!==null&&(x=d.callbacks,x!==null&&(g=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=g===null?x:g.concat(x))));break;case 26:var C=Oa;if(cs(h,d),us(d),x&512&&(Nr||g===null||vl(g,g.return)),x&4){var _=g!==null?g.memoizedState:null;if(x=d.memoizedState,g===null)if(x===null)if(d.stateNode===null){e:{x=d.type,g=d.memoizedProps,C=C.ownerDocument||C;t:switch(x){case"title":_=C.getElementsByTagName("title")[0],(!_||_[wa]||_[ln]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=C.createElement(x),C.head.insertBefore(_,C.querySelector("head > title"))),Ao(_,x,g),_[ln]=d,Xn(_),x=_;break e;case"link":var P=NL("link","href",C).get(x+(g.href||""));if(P){for(var j=0;j<P.length;j++)if(_=P[j],_.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&_.getAttribute("rel")===(g.rel==null?null:g.rel)&&_.getAttribute("title")===(g.title==null?null:g.title)&&_.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){P.splice(j,1);break t}}_=C.createElement(x),Ao(_,x,g),C.head.appendChild(_);break;case"meta":if(P=NL("meta","content",C).get(x+(g.content||""))){for(j=0;j<P.length;j++)if(_=P[j],_.getAttribute("content")===(g.content==null?null:""+g.content)&&_.getAttribute("name")===(g.name==null?null:g.name)&&_.getAttribute("property")===(g.property==null?null:g.property)&&_.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&_.getAttribute("charset")===(g.charSet==null?null:g.charSet)){P.splice(j,1);break t}}_=C.createElement(x),Ao(_,x,g),C.head.appendChild(_);break;default:throw Error(r(468,x))}_[ln]=d,Xn(_),x=_}d.stateNode=x}else RL(C,d.type,d.stateNode);else d.stateNode=ML(C,x,d.memoizedProps);else _!==x?(_===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):_.count--,x===null?RL(C,d.type,d.stateNode):ML(C,x,d.memoizedProps)):x===null&&d.stateNode!==null&&sT(d,d.memoizedProps,g.memoizedProps)}break;case 27:cs(h,d),us(d),x&512&&(Nr||g===null||vl(g,g.return)),g!==null&&x&4&&sT(d,d.memoizedProps,g.memoizedProps);break;case 5:if(cs(h,d),us(d),x&512&&(Nr||g===null||vl(g,g.return)),d.flags&32){C=d.stateNode;try{ho(C,"")}catch(de){Tn(d,d.return,de)}}x&4&&d.stateNode!=null&&(C=d.memoizedProps,sT(d,C,g!==null?g.memoizedProps:C)),x&1024&&(cT=!0);break;case 6:if(cs(h,d),us(d),x&4){if(d.stateNode===null)throw Error(r(162));x=d.memoizedProps,g=d.stateNode;try{g.nodeValue=x}catch(de){Tn(d,d.return,de)}}break;case 3:if(N1=null,C=Oa,Oa=A1(h.containerInfo),cs(h,d),Oa=C,us(d),x&4&&g!==null&&g.memoizedState.isDehydrated)try{my(h.containerInfo)}catch(de){Tn(d,d.return,de)}cT&&(cT=!1,jj(d));break;case 4:x=Oa,Oa=A1(d.stateNode.containerInfo),cs(h,d),us(d),Oa=x;break;case 12:cs(h,d),us(d);break;case 13:cs(h,d),us(d),d.child.flags&8192&&d.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(gT=xe()),x&4&&(x=d.updateQueue,x!==null&&(d.updateQueue=null,uT(d,x)));break;case 22:C=d.memoizedState!==null;var J=g!==null&&g.memoizedState!==null,le=Sc,ve=Nr;if(Sc=le||C,Nr=ve||J,cs(h,d),Nr=ve,Sc=le,us(d),x&8192)e:for(h=d.stateNode,h._visibility=C?h._visibility&-2:h._visibility|1,C&&(g===null||J||Sc||Nr||sf(d)),g=null,h=d;;){if(h.tag===5||h.tag===26){if(g===null){J=g=h;try{if(_=J.stateNode,C)P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{j=J.stateNode;var ke=J.memoizedProps.style,ue=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;j.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(de){Tn(J,J.return,de)}}}else if(h.tag===6){if(g===null){J=h;try{J.stateNode.nodeValue=C?"":J.memoizedProps}catch(de){Tn(J,J.return,de)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===d)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}x&4&&(x=d.updateQueue,x!==null&&(g=x.retryQueue,g!==null&&(x.retryQueue=null,uT(d,g))));break;case 19:cs(h,d),us(d),x&4&&(x=d.updateQueue,x!==null&&(d.updateQueue=null,uT(d,x)));break;case 30:break;case 21:break;default:cs(h,d),us(d)}}function us(d){var h=d.flags;if(h&2){try{for(var g,x=d.return;x!==null;){if(Mj(x)){g=x;break}x=x.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var C=g.stateNode,_=aT(d);m1(d,_,C);break;case 5:var P=g.stateNode;g.flags&32&&(ho(P,""),g.flags&=-33);var j=aT(d);m1(d,j,P);break;case 3:case 4:var J=g.stateNode.containerInfo,le=aT(d);lT(d,le,J);break;default:throw Error(r(161))}}catch(ve){Tn(d,d.return,ve)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function jj(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var h=d;jj(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),d=d.sibling}}function Eu(d,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Ij(d,h.alternate,h),h=h.sibling}function sf(d){for(d=d.child;d!==null;){var h=d;switch(h.tag){case 0:case 11:case 14:case 15:Cu(4,h,h.return),sf(h);break;case 1:vl(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&_j(h,h.return,g),sf(h);break;case 27:ay(h.stateNode);case 26:case 5:vl(h,h.return),sf(h);break;case 22:h.memoizedState===null&&sf(h);break;case 30:sf(h);break;default:sf(h)}d=d.sibling}}function Tu(d,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,C=d,_=h,P=_.flags;switch(_.tag){case 0:case 11:case 15:Tu(C,_,g),Jg(4,_);break;case 1:if(Tu(C,_,g),x=_,C=x.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(le){Tn(x,x.return,le)}if(x=_,C=x.updateQueue,C!==null){var j=x.stateNode;try{var J=C.shared.hiddenCallbacks;if(J!==null)for(C.shared.hiddenCallbacks=null,C=0;C<J.length;C++)f$(J[C],j)}catch(le){Tn(x,x.return,le)}}g&&P&64&&Tj(_),Xg(_,_.return);break;case 27:Nj(_);case 26:case 5:Tu(C,_,g),g&&x===null&&P&4&&Aj(_),Xg(_,_.return);break;case 12:Tu(C,_,g);break;case 13:Tu(C,_,g),g&&P&4&&Dj(C,_);break;case 22:_.memoizedState===null&&Tu(C,_,g),Xg(_,_.return);break;case 30:break;default:Tu(C,_,g)}h=h.sibling}}function dT(d,h){var g=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),d=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(d=h.memoizedState.cachePool.pool),d!==g&&(d!=null&&d.refCount++,g!=null&&jg(g))}function fT(d,h){d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&jg(d))}function xl(d,h,g,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Lj(d,h,g,x),h=h.sibling}function Lj(d,h,g,x){var C=h.flags;switch(h.tag){case 0:case 11:case 15:xl(d,h,g,x),C&2048&&Jg(9,h);break;case 1:xl(d,h,g,x);break;case 3:xl(d,h,g,x),C&2048&&(d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&jg(d)));break;case 12:if(C&2048){xl(d,h,g,x),d=h.stateNode;try{var _=h.memoizedProps,P=_.id,j=_.onPostCommit;typeof j=="function"&&j(P,h.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(J){Tn(h,h.return,J)}}else xl(d,h,g,x);break;case 13:xl(d,h,g,x);break;case 23:break;case 22:_=h.stateNode,P=h.alternate,h.memoizedState!==null?_._visibility&2?xl(d,h,g,x):Qg(d,h):_._visibility&2?xl(d,h,g,x):(_._visibility|=2,ep(d,h,g,x,(h.subtreeFlags&10256)!==0)),C&2048&&dT(P,h);break;case 24:xl(d,h,g,x),C&2048&&fT(h.alternate,h);break;default:xl(d,h,g,x)}}function ep(d,h,g,x,C){for(C=C&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var _=d,P=h,j=g,J=x,le=P.flags;switch(P.tag){case 0:case 11:case 15:ep(_,P,j,J,C),Jg(8,P);break;case 23:break;case 22:var ve=P.stateNode;P.memoizedState!==null?ve._visibility&2?ep(_,P,j,J,C):Qg(_,P):(ve._visibility|=2,ep(_,P,j,J,C)),C&&le&2048&&dT(P.alternate,P);break;case 24:ep(_,P,j,J,C),C&&le&2048&&fT(P.alternate,P);break;default:ep(_,P,j,J,C)}h=h.sibling}}function Qg(d,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=d,x=h,C=x.flags;switch(x.tag){case 22:Qg(g,x),C&2048&&dT(x.alternate,x);break;case 24:Qg(g,x),C&2048&&fT(x.alternate,x);break;default:Qg(g,x)}h=h.sibling}}var ey=8192;function tp(d){if(d.subtreeFlags&ey)for(d=d.child;d!==null;)zj(d),d=d.sibling}function zj(d){switch(d.tag){case 26:tp(d),d.flags&ey&&d.memoizedState!==null&&Tde(Oa,d.memoizedState,d.memoizedProps);break;case 5:tp(d);break;case 3:case 4:var h=Oa;Oa=A1(d.stateNode.containerInfo),tp(d),Oa=h;break;case 22:d.memoizedState===null&&(h=d.alternate,h!==null&&h.memoizedState!==null?(h=ey,ey=16777216,tp(d),ey=h):tp(d));break;default:tp(d)}}function Bj(d){var h=d.alternate;if(h!==null&&(d=h.child,d!==null)){h.child=null;do h=d.sibling,d.sibling=null,d=h;while(d!==null)}}function ty(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var x=h[g];go=x,Vj(x,d)}Bj(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Fj(d),d=d.sibling}function Fj(d){switch(d.tag){case 0:case 11:case 15:ty(d),d.flags&2048&&Cu(9,d,d.return);break;case 3:ty(d);break;case 12:ty(d);break;case 22:var h=d.stateNode;d.memoizedState!==null&&h._visibility&2&&(d.return===null||d.return.tag!==13)?(h._visibility&=-3,g1(d)):ty(d);break;default:ty(d)}}function g1(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var x=h[g];go=x,Vj(x,d)}Bj(d)}for(d=d.child;d!==null;){switch(h=d,h.tag){case 0:case 11:case 15:Cu(8,h,h.return),g1(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,g1(h));break;default:g1(h)}d=d.sibling}}function Vj(d,h){for(;go!==null;){var g=go;switch(g.tag){case 0:case 11:case 15:Cu(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var x=g.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:jg(g.memoizedState.cache)}if(x=g.child,x!==null)x.return=g,go=x;else e:for(g=d;go!==null;){x=go;var C=x.sibling,_=x.return;if(Oj(x),x===g){go=null;break e}if(C!==null){C.return=_,go=C;break e}go=_}}}var Vue={getCacheForType:function(d){var h=Ho(Jr),g=h.data.get(d);return g===void 0&&(g=d(),h.data.set(d,g)),g}},Hue=typeof WeakMap=="function"?WeakMap:Map,un=0,jn=null,$t=null,Gt=0,dn=0,ds=null,_u=!1,np=!1,hT=!1,Cc=0,br=0,Au=0,af=0,pT=0,Zs=0,rp=0,ny=null,Ri=null,mT=!1,gT=0,y1=1/0,b1=null,Mu=null,_o=0,Nu=null,op=null,ip=0,yT=0,bT=null,Hj=null,ry=0,vT=null;function fs(){if((un&2)!==0&&Gt!==0)return Gt&-Gt;if(F.T!==null){var d=qh;return d!==0?d:TT()}return Kt()}function Uj(){Zs===0&&(Zs=(Gt&536870912)===0||sn?co():536870912);var d=qs.current;return d!==null&&(d.flags|=32),Zs}function hs(d,h,g){(d===jn&&(dn===2||dn===9)||d.cancelPendingCommit!==null)&&(sp(d,0),Ru(d,Gt,Zs,!1)),ir(d,g),((un&2)===0||d!==jn)&&(d===jn&&((un&2)===0&&(af|=g),br===4&&Ru(d,Gt,Zs,!1)),wl(d))}function Gj(d,h,g){if((un&6)!==0)throw Error(r(327));var x=!g&&(h&124)===0&&(h&d.expiredLanes)===0||Yn(d,h),C=x?que(d,h):ST(d,h,!0),_=x;do{if(C===0){np&&!x&&Ru(d,h,0,!1);break}else{if(g=d.current.alternate,_&&!Uue(g)){C=ST(d,h,!1),_=!1;continue}if(C===2){if(_=h,d.errorRecoveryDisabledLanes&_)var P=0;else P=d.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){h=P;e:{var j=d;C=ny;var J=j.current.memoizedState.isDehydrated;if(J&&(sp(j,P).flags|=256),P=ST(j,P,!1),P!==2){if(hT&&!J){j.errorRecoveryDisabledLanes|=_,af|=_,C=4;break e}_=Ri,Ri=C,_!==null&&(Ri===null?Ri=_:Ri.push.apply(Ri,_))}C=P}if(_=!1,C!==2)continue}}if(C===1){sp(d,0),Ru(d,h,0,!0);break}e:{switch(x=d,_=C,_){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:Ru(x,h,Zs,!_u);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(C=gT+300-xe(),10<C)){if(Ru(x,h,Zs,!_u),gn(x,0,!0)!==0)break e;x.timeoutHandle=xL(qj.bind(null,x,g,Ri,b1,mT,h,Zs,af,rp,_u,_,2,-0,0),C);break e}qj(x,g,Ri,b1,mT,h,Zs,af,rp,_u,_,0,-0,0)}}break}while(!0);wl(d)}function qj(d,h,g,x,C,_,P,j,J,le,ve,ke,ue,de){if(d.timeoutHandle=-1,ke=h.subtreeFlags,(ke&8192||(ke&16785408)===16785408)&&(uy={stylesheets:null,count:0,unsuspend:Ede},zj(h),ke=_de(),ke!==null)){d.cancelPendingCommit=ke(Qj.bind(null,d,h,_,g,x,C,P,j,J,ve,1,ue,de)),Ru(d,_,P,!le);return}Qj(d,h,_,g,x,C,P,j,J)}function Uue(d){for(var h=d;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var x=0;x<g.length;x++){var C=g[x],_=C.getSnapshot;C=C.value;try{if(!as(_(),C))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ru(d,h,g,x){h&=~pT,h&=~af,d.suspendedLanes|=h,d.pingedLanes&=~h,x&&(d.warmLanes|=h),x=d.expirationTimes;for(var C=h;0<C;){var _=31-Oe(C),P=1<<_;x[_]=-1,C&=~P}g!==0&&uo(d,g,h)}function v1(){return(un&6)===0?(oy(0),!1):!0}function xT(){if($t!==null){if(dn===0)var d=$t.return;else d=$t,gc=ef=null,j2(d),Xh=null,Wg=0,d=$t;for(;d!==null;)Ej(d.alternate,d),d=d.return;$t=null}}function sp(d,h){var g=d.timeoutHandle;g!==-1&&(d.timeoutHandle=-1,lde(g)),g=d.cancelPendingCommit,g!==null&&(d.cancelPendingCommit=null,g()),xT(),jn=d,$t=g=hc(d.current,null),Gt=h,dn=0,ds=null,_u=!1,np=Yn(d,h),hT=!1,rp=Zs=pT=af=Au=br=0,Ri=ny=null,mT=!1,(h&8)!==0&&(h|=h&32);var x=d.entangledLanes;if(x!==0)for(d=d.entanglements,x&=h;0<x;){var C=31-Oe(x),_=1<<C;h|=d[C],x&=~_}return Cc=h,Fv(),g}function Zj(d,h){Mt=null,F.H=s1,h===zg||h===Yv?(h=u$(),dn=3):h===a$?(h=u$(),dn=4):dn=h===dj?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ds=h,$t===null&&(br=1,d1(d,Vs(h,d.current)))}function Wj(){var d=F.H;return F.H=s1,d===null?s1:d}function Kj(){var d=F.A;return F.A=Vue,d}function wT(){br=4,_u||(Gt&4194048)!==Gt&&qs.current!==null||(np=!0),(Au&134217727)===0&&(af&134217727)===0||jn===null||Ru(jn,Gt,Zs,!1)}function ST(d,h,g){var x=un;un|=2;var C=Wj(),_=Kj();(jn!==d||Gt!==h)&&(b1=null,sp(d,h)),h=!1;var P=br;e:do try{if(dn!==0&&$t!==null){var j=$t,J=ds;switch(dn){case 8:xT(),P=6;break e;case 3:case 2:case 9:case 6:qs.current===null&&(h=!0);var le=dn;if(dn=0,ds=null,ap(d,j,J,le),g&&np){P=0;break e}break;default:le=dn,dn=0,ds=null,ap(d,j,J,le)}}Gue(),P=br;break}catch(ve){Zj(d,ve)}while(!0);return h&&d.shellSuspendCounter++,gc=ef=null,un=x,F.H=C,F.A=_,$t===null&&(jn=null,Gt=0,Fv()),P}function Gue(){for(;$t!==null;)Yj($t)}function que(d,h){var g=un;un|=2;var x=Wj(),C=Kj();jn!==d||Gt!==h?(b1=null,y1=xe()+500,sp(d,h)):np=Yn(d,h);e:do try{if(dn!==0&&$t!==null){h=$t;var _=ds;t:switch(dn){case 1:dn=0,ds=null,ap(d,h,_,1);break;case 2:case 9:if(l$(_)){dn=0,ds=null,Jj(h);break}h=function(){dn!==2&&dn!==9||jn!==d||(dn=7),wl(d)},_.then(h,h);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:l$(_)?(dn=0,ds=null,Jj(h)):(dn=0,ds=null,ap(d,h,_,7));break;case 5:var P=null;switch($t.tag){case 26:P=$t.memoizedState;case 5:case 27:var j=$t;if(!P||IL(P)){dn=0,ds=null;var J=j.sibling;if(J!==null)$t=J;else{var le=j.return;le!==null?($t=le,x1(le)):$t=null}break t}}dn=0,ds=null,ap(d,h,_,5);break;case 6:dn=0,ds=null,ap(d,h,_,6);break;case 8:xT(),br=6;break e;default:throw Error(r(462))}}Zue();break}catch(ve){Zj(d,ve)}while(!0);return gc=ef=null,F.H=x,F.A=C,un=g,$t!==null?0:(jn=null,Gt=0,Fv(),br)}function Zue(){for(;$t!==null&&!me();)Yj($t)}function Yj(d){var h=kj(d.alternate,d,Cc);d.memoizedProps=d.pendingProps,h===null?x1(d):$t=h}function Jj(d){var h=d,g=h.alternate;switch(h.tag){case 15:case 0:h=yj(g,h,h.pendingProps,h.type,void 0,Gt);break;case 11:h=yj(g,h,h.pendingProps,h.type.render,h.ref,Gt);break;case 5:j2(h);default:Ej(g,h),h=$t=X5(h,Cc),h=kj(g,h,Cc)}d.memoizedProps=d.pendingProps,h===null?x1(d):$t=h}function ap(d,h,g,x){gc=ef=null,j2(h),Xh=null,Wg=0;var C=h.return;try{if($ue(d,C,h,g,Gt)){br=1,d1(d,Vs(g,d.current)),$t=null;return}}catch(_){if(C!==null)throw $t=C,_;br=1,d1(d,Vs(g,d.current)),$t=null;return}h.flags&32768?(sn||x===1?d=!0:np||(Gt&536870912)!==0?d=!1:(_u=d=!0,(x===2||x===9||x===3||x===6)&&(x=qs.current,x!==null&&x.tag===13&&(x.flags|=16384))),Xj(h,d)):x1(h)}function x1(d){var h=d;do{if((h.flags&32768)!==0){Xj(h,_u);return}d=h.return;var g=Lue(h.alternate,h,Cc);if(g!==null){$t=g;return}if(h=h.sibling,h!==null){$t=h;return}$t=h=d}while(h!==null);br===0&&(br=5)}function Xj(d,h){do{var g=zue(d.alternate,d);if(g!==null){g.flags&=32767,$t=g;return}if(g=d.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(d=d.sibling,d!==null)){$t=d;return}$t=d=g}while(d!==null);br=6,$t=null}function Qj(d,h,g,x,C,_,P,j,J){d.cancelPendingCommit=null;do w1();while(_o!==0);if((un&6)!==0)throw Error(r(327));if(h!==null){if(h===d.current)throw Error(r(177));if(_=h.lanes|h.childLanes,_|=f2,ki(d,g,_,P,j,J),d===jn&&($t=jn=null,Gt=0),op=h,Nu=d,ip=g,yT=_,bT=C,Hj=x,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Jue(kn,function(){return oL(),null})):(d.callbackNode=null,d.callbackPriority=0),x=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||x){x=F.T,F.T=null,C=q.p,q.p=2,P=un,un|=4;try{Bue(d,h,g)}finally{un=P,q.p=C,F.T=x}}_o=1,eL(),tL(),nL()}}function eL(){if(_o===1){_o=0;var d=Nu,h=op,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=F.T,F.T=null;var x=q.p;q.p=2;var C=un;un|=4;try{$j(h,d);var _=PT,P=V5(d.containerInfo),j=_.focusedElem,J=_.selectionRange;if(P!==j&&j&&j.ownerDocument&&F5(j.ownerDocument.documentElement,j)){if(J!==null&&a2(j)){var le=J.start,ve=J.end;if(ve===void 0&&(ve=le),"selectionStart"in j)j.selectionStart=le,j.selectionEnd=Math.min(ve,j.value.length);else{var ke=j.ownerDocument||document,ue=ke&&ke.defaultView||window;if(ue.getSelection){var de=ue.getSelection(),ct=j.textContent.length,st=Math.min(J.start,ct),xn=J.end===void 0?st:Math.min(J.end,ct);!de.extend&&st>xn&&(P=xn,xn=st,st=P);var ne=B5(j,st),X=B5(j,xn);if(ne&&X&&(de.rangeCount!==1||de.anchorNode!==ne.node||de.anchorOffset!==ne.offset||de.focusNode!==X.node||de.focusOffset!==X.offset)){var oe=ke.createRange();oe.setStart(ne.node,ne.offset),de.removeAllRanges(),st>xn?(de.addRange(oe),de.extend(X.node,X.offset)):(oe.setEnd(X.node,X.offset),de.addRange(oe))}}}}for(ke=[],de=j;de=de.parentNode;)de.nodeType===1&&ke.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ke.length;j++){var we=ke[j];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}O1=!!OT,PT=OT=null}finally{un=C,q.p=x,F.T=g}}d.current=h,_o=2}}function tL(){if(_o===2){_o=0;var d=Nu,h=op,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=F.T,F.T=null;var x=q.p;q.p=2;var C=un;un|=4;try{Ij(d,h.alternate,h)}finally{un=C,q.p=x,F.T=g}}_o=3}}function nL(){if(_o===4||_o===3){_o=0,_e();var d=Nu,h=op,g=ip,x=Hj;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?_o=5:(_o=0,op=Nu=null,rL(d,d.pendingLanes));var C=d.pendingLanes;if(C===0&&(Mu=null),He(g),h=h.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(Y,h,void 0,(h.current.flags&128)===128)}catch{}if(x!==null){h=F.T,C=q.p,q.p=2,F.T=null;try{for(var _=d.onRecoverableError,P=0;P<x.length;P++){var j=x[P];_(j.value,{componentStack:j.stack})}}finally{F.T=h,q.p=C}}(ip&3)!==0&&w1(),wl(d),C=d.pendingLanes,(g&4194090)!==0&&(C&42)!==0?d===vT?ry++:(ry=0,vT=d):ry=0,oy(0)}}function rL(d,h){(d.pooledCacheLanes&=h)===0&&(h=d.pooledCache,h!=null&&(d.pooledCache=null,jg(h)))}function w1(d){return eL(),tL(),nL(),oL()}function oL(){if(_o!==5)return!1;var d=Nu,h=yT;yT=0;var g=He(ip),x=F.T,C=q.p;try{q.p=32>g?32:g,F.T=null,g=bT,bT=null;var _=Nu,P=ip;if(_o=0,op=Nu=null,ip=0,(un&6)!==0)throw Error(r(331));var j=un;if(un|=4,Fj(_.current),Lj(_,_.current,P,g),un=j,oy(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(Y,_)}catch{}return!0}finally{q.p=C,F.T=x,rL(d,h)}}function iL(d,h,g){h=Vs(g,h),h=J2(d.stateNode,h,2),d=xu(d,h,2),d!==null&&(ir(d,2),wl(d))}function Tn(d,h,g){if(d.tag===3)iL(d,d,g);else for(;h!==null;){if(h.tag===3){iL(h,d,g);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Mu===null||!Mu.has(x))){d=Vs(g,d),g=cj(2),x=xu(h,g,2),x!==null&&(uj(g,x,h,d),ir(x,2),wl(x));break}}h=h.return}}function kT(d,h,g){var x=d.pingCache;if(x===null){x=d.pingCache=new Hue;var C=new Set;x.set(h,C)}else C=x.get(h),C===void 0&&(C=new Set,x.set(h,C));C.has(g)||(hT=!0,C.add(g),d=Wue.bind(null,d,h,g),h.then(d,d))}function Wue(d,h,g){var x=d.pingCache;x!==null&&x.delete(h),d.pingedLanes|=d.suspendedLanes&g,d.warmLanes&=~g,jn===d&&(Gt&g)===g&&(br===4||br===3&&(Gt&62914560)===Gt&&300>xe()-gT?(un&2)===0&&sp(d,0):pT|=g,rp===Gt&&(rp=0)),wl(d)}function sL(d,h){h===0&&(h=Ji()),d=Vh(d,h),d!==null&&(ir(d,h),wl(d))}function Kue(d){var h=d.memoizedState,g=0;h!==null&&(g=h.retryLane),sL(d,g)}function Yue(d,h){var g=0;switch(d.tag){case 13:var x=d.stateNode,C=d.memoizedState;C!==null&&(g=C.retryLane);break;case 19:x=d.stateNode;break;case 22:x=d.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(h),sL(d,g)}function Jue(d,h){return Le(d,h)}var S1=null,lp=null,CT=!1,k1=!1,ET=!1,lf=0;function wl(d){d!==lp&&d.next===null&&(lp===null?S1=lp=d:lp=lp.next=d),k1=!0,CT||(CT=!0,Que())}function oy(d,h){if(!ET&&k1){ET=!0;do for(var g=!1,x=S1;x!==null;){if(d!==0){var C=x.pendingLanes;if(C===0)var _=0;else{var P=x.suspendedLanes,j=x.pingedLanes;_=(1<<31-Oe(42|d)+1)-1,_&=C&~(P&~j),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(g=!0,uL(x,_))}else _=Gt,_=gn(x,x===jn?_:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(_&3)===0||Yn(x,_)||(g=!0,uL(x,_));x=x.next}while(g);ET=!1}}function Xue(){aL()}function aL(){k1=CT=!1;var d=0;lf!==0&&(ade()&&(d=lf),lf=0);for(var h=xe(),g=null,x=S1;x!==null;){var C=x.next,_=lL(x,h);_===0?(x.next=null,g===null?S1=C:g.next=C,C===null&&(lp=g)):(g=x,(d!==0||(_&3)!==0)&&(k1=!0)),x=C}oy(d)}function lL(d,h){for(var g=d.suspendedLanes,x=d.pingedLanes,C=d.expirationTimes,_=d.pendingLanes&-62914561;0<_;){var P=31-Oe(_),j=1<<P,J=C[P];J===-1?((j&g)===0||(j&x)!==0)&&(C[P]=Jn(j,h)):J<=h&&(d.expiredLanes|=j),_&=~j}if(h=jn,g=Gt,g=gn(d,d===h?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),x=d.callbackNode,g===0||d===h&&(dn===2||dn===9)||d.cancelPendingCommit!==null)return x!==null&&x!==null&&Pe(x),d.callbackNode=null,d.callbackPriority=0;if((g&3)===0||Yn(d,g)){if(h=g&-g,h===d.callbackPriority)return h;switch(x!==null&&Pe(x),He(g)){case 2:case 8:g=nt;break;case 32:g=kn;break;case 268435456:g=or;break;default:g=kn}return x=cL.bind(null,d),g=Le(g,x),d.callbackPriority=h,d.callbackNode=g,h}return x!==null&&x!==null&&Pe(x),d.callbackPriority=2,d.callbackNode=null,2}function cL(d,h){if(_o!==0&&_o!==5)return d.callbackNode=null,d.callbackPriority=0,null;var g=d.callbackNode;if(w1()&&d.callbackNode!==g)return null;var x=Gt;return x=gn(d,d===jn?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),x===0?null:(Gj(d,x,h),lL(d,xe()),d.callbackNode!=null&&d.callbackNode===g?cL.bind(null,d):null)}function uL(d,h){if(w1())return null;Gj(d,h,!0)}function Que(){cde(function(){(un&6)!==0?Le(Ve,Xue):aL()})}function TT(){return lf===0&&(lf=co()),lf}function dL(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:ar(""+d)}function fL(d,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,d.id&&g.setAttribute("form",d.id),h.parentNode.insertBefore(g,h),d=new FormData(d),g.parentNode.removeChild(g),d}function ede(d,h,g,x,C){if(h==="submit"&&g&&g.stateNode===C){var _=dL((C[Yt]||null).action),P=x.submitter;P&&(h=(h=P[Yt]||null)?dL(h.formAction):P.getAttribute("formAction"),h!==null&&(_=h,P=null));var j=new ze("action","action",null,x,C);d.push({event:j,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(lf!==0){var J=P?fL(C,P):new FormData(C);q2(g,{pending:!0,data:J,method:C.method,action:_},null,J)}}else typeof _=="function"&&(j.preventDefault(),J=P?fL(C,P):new FormData(C),q2(g,{pending:!0,data:J,method:C.method,action:_},_,J))},currentTarget:C}]})}}for(var _T=0;_T<d2.length;_T++){var AT=d2[_T],tde=AT.toLowerCase(),nde=AT[0].toUpperCase()+AT.slice(1);Ia(tde,"on"+nde)}Ia(G5,"onAnimationEnd"),Ia(q5,"onAnimationIteration"),Ia(Z5,"onAnimationStart"),Ia("dblclick","onDoubleClick"),Ia("focusin","onFocus"),Ia("focusout","onBlur"),Ia(vue,"onTransitionRun"),Ia(xue,"onTransitionStart"),Ia(wue,"onTransitionCancel"),Ia(W5,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),Bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rde=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(iy));function hL(d,h){h=(h&4)!==0;for(var g=0;g<d.length;g++){var x=d[g],C=x.event;x=x.listeners;e:{var _=void 0;if(h)for(var P=x.length-1;0<=P;P--){var j=x[P],J=j.instance,le=j.currentTarget;if(j=j.listener,J!==_&&C.isPropagationStopped())break e;_=j,C.currentTarget=le;try{_(C)}catch(ve){u1(ve)}C.currentTarget=null,_=J}else for(P=0;P<x.length;P++){if(j=x[P],J=j.instance,le=j.currentTarget,j=j.listener,J!==_&&C.isPropagationStopped())break e;_=j,C.currentTarget=le;try{_(C)}catch(ve){u1(ve)}C.currentTarget=null,_=J}}}}function jt(d,h){var g=h[En];g===void 0&&(g=h[En]=new Set);var x=d+"__bubble";g.has(x)||(pL(h,d,2,!1),g.add(x))}function MT(d,h,g){var x=0;h&&(x|=4),pL(g,d,x,h)}var C1="_reactListening"+Math.random().toString(36).slice(2);function NT(d){if(!d[C1]){d[C1]=!0,Sa.forEach(function(g){g!=="selectionchange"&&(rde.has(g)||MT(g,!1,d),MT(g,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[C1]||(h[C1]=!0,MT("selectionchange",!1,h))}}function pL(d,h,g,x){switch(LL(h)){case 2:var C=Nde;break;case 8:C=Rde;break;default:C=UT}g=C.bind(null,h,g,d),C=void 0,!Ph||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(C=!0),x?C!==void 0?d.addEventListener(h,g,{capture:!0,passive:C}):d.addEventListener(h,g,!0):C!==void 0?d.addEventListener(h,g,{passive:C}):d.addEventListener(h,g,!1)}function RT(d,h,g,x,C){var _=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var P=x.tag;if(P===3||P===4){var j=x.stateNode.containerInfo;if(j===C)break;if(P===4)for(P=x.return;P!==null;){var J=P.tag;if((J===3||J===4)&&P.stateNode.containerInfo===C)return;P=P.return}for(;j!==null;){if(P=$s(j),P===null)return;if(J=P.tag,J===5||J===6||J===26||J===27){x=_=P;continue e}j=j.parentNode}}x=x.return}jv(function(){var le=_,ve=ml(g),ke=[];e:{var ue=K5.get(d);if(ue!==void 0){var de=ze,ct=d;switch(d){case"keypress":if(Dh(g)===0)break e;case"keydown":case"keyup":de=Jce;break;case"focusin":ct="focus",de=Vo;break;case"focusout":ct="blur",de=Vo;break;case"beforeblur":case"afterblur":de=Vo;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=po;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=eue;break;case G5:case q5:case Z5:de=Ra;break;case W5:de=nue;break;case"scroll":case"scrollend":de=yt;break;case"wheel":de=oue;break;case"copy":case"cut":case"paste":de=zv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=T5;break;case"toggle":case"beforetoggle":de=sue}var st=(h&4)!==0,xn=!st&&(d==="scroll"||d==="scrollend"),ne=st?ue!==null?ue+"Capture":null:ue;st=[];for(var X=le,oe;X!==null;){var we=X;if(oe=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||oe===null||ne===null||(we=uc(X,ne),we!=null&&st.push(sy(X,we,oe))),xn)break;X=X.return}0<st.length&&(ue=new de(ue,ct,null,g,ve),ke.push({event:ue,listeners:st}))}}if((h&7)===0){e:{if(ue=d==="mouseover"||d==="pointerover",de=d==="mouseout"||d==="pointerout",ue&&g!==Eo&&(ct=g.relatedTarget||g.fromElement)&&($s(ct)||ct[Lo]))break e;if((de||ue)&&(ue=ve.window===ve?ve:(ue=ve.ownerDocument)?ue.defaultView||ue.parentWindow:window,de?(ct=g.relatedTarget||g.toElement,de=le,ct=ct?$s(ct):null,ct!==null&&(xn=i(ct),st=ct.tag,ct!==xn||st!==5&&st!==27&&st!==6)&&(ct=null)):(de=null,ct=le),de!==ct)){if(st=Fo,we="onMouseLeave",ne="onMouseEnter",X="mouse",(d==="pointerout"||d==="pointerover")&&(st=T5,we="onPointerLeave",ne="onPointerEnter",X="pointer"),xn=de==null?ue:mr(de),oe=ct==null?ue:mr(ct),ue=new st(we,X+"leave",de,g,ve),ue.target=xn,ue.relatedTarget=oe,we=null,$s(ve)===le&&(st=new st(ne,X+"enter",ct,g,ve),st.target=oe,st.relatedTarget=xn,we=st),xn=we,de&&ct)t:{for(st=de,ne=ct,X=0,oe=st;oe;oe=cp(oe))X++;for(oe=0,we=ne;we;we=cp(we))oe++;for(;0<X-oe;)st=cp(st),X--;for(;0<oe-X;)ne=cp(ne),oe--;for(;X--;){if(st===ne||ne!==null&&st===ne.alternate)break t;st=cp(st),ne=cp(ne)}st=null}else st=null;de!==null&&mL(ke,ue,de,st,!1),ct!==null&&xn!==null&&mL(ke,xn,ct,st,!0)}}e:{if(ue=le?mr(le):window,de=ue.nodeName&&ue.nodeName.toLowerCase(),de==="select"||de==="input"&&ue.type==="file")var Ue=P5;else if(I5(ue))if(D5)Ue=gue;else{Ue=pue;var Ot=hue}else de=ue.nodeName,!de||de.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?le&&Yr(le.elementType)&&(Ue=P5):Ue=mue;if(Ue&&(Ue=Ue(d,le))){O5(ke,Ue,g,ve);break e}Ot&&Ot(d,ue,le),d==="focusout"&&le&&ue.type==="number"&&le.memoizedProps.value!=null&&is(ue,"number",ue.value)}switch(Ot=le?mr(le):window,d){case"focusin":(I5(Ot)||Ot.contentEditable==="true")&&(zh=Ot,l2=le,Ig=null);break;case"focusout":Ig=l2=zh=null;break;case"mousedown":c2=!0;break;case"contextmenu":case"mouseup":case"dragend":c2=!1,H5(ke,g,ve);break;case"selectionchange":if(bue)break;case"keydown":case"keyup":H5(ke,g,ve)}var Xe;if(o2)e:{switch(d){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Lh?N5(d,g)&&(at="onCompositionEnd"):d==="keydown"&&g.keyCode===229&&(at="onCompositionStart");at&&(_5&&g.locale!=="ko"&&(Lh||at!=="onCompositionStart"?at==="onCompositionEnd"&&Lh&&(Xe=Lv()):(Na=ve,dc="value"in Na?Na.value:Na.textContent,Lh=!0)),Ot=E1(le,at),0<Ot.length&&(at=new qd(at,d,null,g,ve),ke.push({event:at,listeners:Ot}),Xe?at.data=Xe:(Xe=R5(g),Xe!==null&&(at.data=Xe)))),(Xe=lue?cue(d,g):uue(d,g))&&(at=E1(le,"onBeforeInput"),0<at.length&&(Ot=new qd("onBeforeInput","beforeinput",null,g,ve),ke.push({event:Ot,listeners:at}),Ot.data=Xe)),ede(ke,d,le,g,ve)}hL(ke,h)})}function sy(d,h,g){return{instance:d,listener:h,currentTarget:g}}function E1(d,h){for(var g=h+"Capture",x=[];d!==null;){var C=d,_=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||_===null||(C=uc(d,g),C!=null&&x.unshift(sy(d,C,_)),C=uc(d,h),C!=null&&x.push(sy(d,C,_))),d.tag===3)return x;d=d.return}return[]}function cp(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function mL(d,h,g,x,C){for(var _=h._reactName,P=[];g!==null&&g!==x;){var j=g,J=j.alternate,le=j.stateNode;if(j=j.tag,J!==null&&J===x)break;j!==5&&j!==26&&j!==27||le===null||(J=le,C?(le=uc(g,_),le!=null&&P.unshift(sy(g,le,J))):C||(le=uc(g,_),le!=null&&P.push(sy(g,le,J)))),g=g.return}P.length!==0&&d.push({event:h,listeners:P})}var ode=/\r\n?/g,ide=/\u0000|\uFFFD/g;function gL(d){return(typeof d=="string"?d:""+d).replace(ode,`
`).replace(ide,"")}function yL(d,h){return h=gL(h),gL(d)===h}function T1(){}function vn(d,h,g,x,C,_){switch(g){case"children":typeof x=="string"?h==="body"||h==="textarea"&&x===""||ho(d,x):(typeof x=="number"||typeof x=="bigint")&&h!=="body"&&ho(d,""+x);break;case"className":ns(d,"class",x);break;case"tabIndex":ns(d,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(d,g,x);break;case"style":lc(d,x,_);break;case"data":if(h!=="object"){ns(d,"data",x);break}case"src":case"href":if(x===""&&(h!=="a"||g!=="href")){d.removeAttribute(g);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){d.removeAttribute(g);break}x=ar(""+x),d.setAttribute(g,x);break;case"action":case"formAction":if(typeof x=="function"){d.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(g==="formAction"?(h!=="input"&&vn(d,h,"name",C.name,C,null),vn(d,h,"formEncType",C.formEncType,C,null),vn(d,h,"formMethod",C.formMethod,C,null),vn(d,h,"formTarget",C.formTarget,C,null)):(vn(d,h,"encType",C.encType,C,null),vn(d,h,"method",C.method,C,null),vn(d,h,"target",C.target,C,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){d.removeAttribute(g);break}x=ar(""+x),d.setAttribute(g,x);break;case"onClick":x!=null&&(d.onclick=T1);break;case"onScroll":x!=null&&jt("scroll",d);break;case"onScrollEnd":x!=null&&jt("scrollend",d);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(g=x.__html,g!=null){if(C.children!=null)throw Error(r(60));d.innerHTML=g}}break;case"multiple":d.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":d.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){d.removeAttribute("xlink:href");break}g=ar(""+x),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?d.setAttribute(g,""+x):d.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?d.setAttribute(g,""):d.removeAttribute(g);break;case"capture":case"download":x===!0?d.setAttribute(g,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?d.setAttribute(g,x):d.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?d.setAttribute(g,x):d.removeAttribute(g);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?d.removeAttribute(g):d.setAttribute(g,x);break;case"popover":jt("beforetoggle",d),jt("toggle",d),ts(d,"popover",x);break;case"xlinkActuate":si(d,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":si(d,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":si(d,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":si(d,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":si(d,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":si(d,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":si(d,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":si(d,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":si(d,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":ts(d,"is",x);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=pu.get(g)||g,ts(d,g,x))}}function IT(d,h,g,x,C,_){switch(g){case"style":lc(d,x,_);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(g=x.__html,g!=null){if(C.children!=null)throw Error(r(60));d.innerHTML=g}}break;case"children":typeof x=="string"?ho(d,x):(typeof x=="number"||typeof x=="bigint")&&ho(d,""+x);break;case"onScroll":x!=null&&jt("scroll",d);break;case"onScrollEnd":x!=null&&jt("scrollend",d);break;case"onClick":x!=null&&(d.onclick=T1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ka.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(C=g.endsWith("Capture"),h=g.slice(2,C?g.length-7:void 0),_=d[Yt]||null,_=_!=null?_[g]:null,typeof _=="function"&&d.removeEventListener(h,_,C),typeof x=="function")){typeof _!="function"&&_!==null&&(g in d?d[g]=null:d.hasAttribute(g)&&d.removeAttribute(g)),d.addEventListener(h,x,C);break e}g in d?d[g]=x:x===!0?d.setAttribute(g,""):ts(d,g,x)}}}function Ao(d,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",d),jt("load",d);var x=!1,C=!1,_;for(_ in g)if(g.hasOwnProperty(_)){var P=g[_];if(P!=null)switch(_){case"src":x=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:vn(d,h,_,P,g,null)}}C&&vn(d,h,"srcSet",g.srcSet,g,null),x&&vn(d,h,"src",g.src,g,null);return;case"input":jt("invalid",d);var j=_=P=C=null,J=null,le=null;for(x in g)if(g.hasOwnProperty(x)){var ve=g[x];if(ve!=null)switch(x){case"name":C=ve;break;case"type":P=ve;break;case"checked":J=ve;break;case"defaultChecked":le=ve;break;case"value":_=ve;break;case"defaultValue":j=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,h));break;default:vn(d,h,x,ve,g,null)}}Ta(d,_,j,J,le,P,C,!1),Co(d);return;case"select":jt("invalid",d),x=P=_=null;for(C in g)if(g.hasOwnProperty(C)&&(j=g[C],j!=null))switch(C){case"value":_=j;break;case"defaultValue":P=j;break;case"multiple":x=j;default:vn(d,h,C,j,g,null)}h=_,g=P,d.multiple=!!x,h!=null?Bs(d,!!x,h,!1):g!=null&&Bs(d,!!x,g,!0);return;case"textarea":jt("invalid",d),_=C=x=null;for(P in g)if(g.hasOwnProperty(P)&&(j=g[P],j!=null))switch(P){case"value":x=j;break;case"defaultValue":C=j;break;case"children":_=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:vn(d,h,P,j,g,null)}Fs(d,x,C,_),Co(d);return;case"option":for(J in g)if(g.hasOwnProperty(J)&&(x=g[J],x!=null))switch(J){case"selected":d.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:vn(d,h,J,x,g,null)}return;case"dialog":jt("beforetoggle",d),jt("toggle",d),jt("cancel",d),jt("close",d);break;case"iframe":case"object":jt("load",d);break;case"video":case"audio":for(x=0;x<iy.length;x++)jt(iy[x],d);break;case"image":jt("error",d),jt("load",d);break;case"details":jt("toggle",d);break;case"embed":case"source":case"link":jt("error",d),jt("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in g)if(g.hasOwnProperty(le)&&(x=g[le],x!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:vn(d,h,le,x,g,null)}return;default:if(Yr(h)){for(ve in g)g.hasOwnProperty(ve)&&(x=g[ve],x!==void 0&&IT(d,h,ve,x,g,void 0));return}}for(j in g)g.hasOwnProperty(j)&&(x=g[j],x!=null&&vn(d,h,j,x,g,null))}function sde(d,h,g,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,_=null,P=null,j=null,J=null,le=null,ve=null;for(de in g){var ke=g[de];if(g.hasOwnProperty(de)&&ke!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":J=ke;default:x.hasOwnProperty(de)||vn(d,h,de,null,x,ke)}}for(var ue in x){var de=x[ue];if(ke=g[ue],x.hasOwnProperty(ue)&&(de!=null||ke!=null))switch(ue){case"type":_=de;break;case"name":C=de;break;case"checked":le=de;break;case"defaultChecked":ve=de;break;case"value":P=de;break;case"defaultValue":j=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,h));break;default:de!==ke&&vn(d,h,ue,de,x,ke)}}ac(d,P,j,J,le,ve,_,C);return;case"select":de=P=j=ue=null;for(_ in g)if(J=g[_],g.hasOwnProperty(_)&&J!=null)switch(_){case"value":break;case"multiple":de=J;default:x.hasOwnProperty(_)||vn(d,h,_,null,x,J)}for(C in x)if(_=x[C],J=g[C],x.hasOwnProperty(C)&&(_!=null||J!=null))switch(C){case"value":ue=_;break;case"defaultValue":j=_;break;case"multiple":P=_;default:_!==J&&vn(d,h,C,_,x,J)}h=j,g=P,x=de,ue!=null?Bs(d,!!g,ue,!1):!!x!=!!g&&(h!=null?Bs(d,!!g,h,!0):Bs(d,!!g,g?[]:"",!1));return;case"textarea":de=ue=null;for(j in g)if(C=g[j],g.hasOwnProperty(j)&&C!=null&&!x.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:vn(d,h,j,null,x,C)}for(P in x)if(C=x[P],_=g[P],x.hasOwnProperty(P)&&(C!=null||_!=null))switch(P){case"value":ue=C;break;case"defaultValue":de=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==_&&vn(d,h,P,C,x,_)}_a(d,ue,de);return;case"option":for(var ct in g)if(ue=g[ct],g.hasOwnProperty(ct)&&ue!=null&&!x.hasOwnProperty(ct))switch(ct){case"selected":d.selected=!1;break;default:vn(d,h,ct,null,x,ue)}for(J in x)if(ue=x[J],de=g[J],x.hasOwnProperty(J)&&ue!==de&&(ue!=null||de!=null))switch(J){case"selected":d.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:vn(d,h,J,ue,x,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in g)ue=g[st],g.hasOwnProperty(st)&&ue!=null&&!x.hasOwnProperty(st)&&vn(d,h,st,null,x,ue);for(le in x)if(ue=x[le],de=g[le],x.hasOwnProperty(le)&&ue!==de&&(ue!=null||de!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,h));break;default:vn(d,h,le,ue,x,de)}return;default:if(Yr(h)){for(var xn in g)ue=g[xn],g.hasOwnProperty(xn)&&ue!==void 0&&!x.hasOwnProperty(xn)&&IT(d,h,xn,void 0,x,ue);for(ve in x)ue=x[ve],de=g[ve],!x.hasOwnProperty(ve)||ue===de||ue===void 0&&de===void 0||IT(d,h,ve,ue,x,de);return}}for(var ne in g)ue=g[ne],g.hasOwnProperty(ne)&&ue!=null&&!x.hasOwnProperty(ne)&&vn(d,h,ne,null,x,ue);for(ke in x)ue=x[ke],de=g[ke],!x.hasOwnProperty(ke)||ue===de||ue==null&&de==null||vn(d,h,ke,ue,x,de)}var OT=null,PT=null;function _1(d){return d.nodeType===9?d:d.ownerDocument}function bL(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vL(d,h){if(d===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&h==="foreignObject"?0:d}function DT(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var $T=null;function ade(){var d=window.event;return d&&d.type==="popstate"?d===$T?!1:($T=d,!0):($T=null,!1)}var xL=typeof setTimeout=="function"?setTimeout:void 0,lde=typeof clearTimeout=="function"?clearTimeout:void 0,wL=typeof Promise=="function"?Promise:void 0,cde=typeof queueMicrotask=="function"?queueMicrotask:typeof wL<"u"?function(d){return wL.resolve(null).then(d).catch(ude)}:xL;function ude(d){setTimeout(function(){throw d})}function Iu(d){return d==="head"}function SL(d,h){var g=h,x=0,C=0;do{var _=g.nextSibling;if(d.removeChild(g),_&&_.nodeType===8)if(g=_.data,g==="/$"){if(0<x&&8>x){g=x;var P=d.ownerDocument;if(g&1&&ay(P.documentElement),g&2&&ay(P.body),g&4)for(g=P.head,ay(g),P=g.firstChild;P;){var j=P.nextSibling,J=P.nodeName;P[wa]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&P.rel.toLowerCase()==="stylesheet"||g.removeChild(P),P=j}}if(C===0){d.removeChild(_),my(h);return}C--}else g==="$"||g==="$?"||g==="$!"?C++:x=g.charCodeAt(0)-48;else x=0;g=_}while(g);my(h)}function jT(d){var h=d.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":jT(g),Ds(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}d.removeChild(g)}}function dde(d,h,g,x){for(;d.nodeType===1;){var C=g;if(d.nodeName.toLowerCase()!==h.toLowerCase()){if(!x&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(x){if(!d[wa])switch(h){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(_=d.getAttribute("rel"),_==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(_!==C.rel||d.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||d.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||d.getAttribute("title")!==(C.title==null?null:C.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(_=d.getAttribute("src"),(_!==(C.src==null?null:C.src)||d.getAttribute("type")!==(C.type==null?null:C.type)||d.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&_&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(h==="input"&&d.type==="hidden"){var _=C.name==null?null:""+C.name;if(C.type==="hidden"&&d.getAttribute("name")===_)return d}else return d;if(d=Pa(d.nextSibling),d===null)break}return null}function fde(d,h,g){if(h==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!g||(d=Pa(d.nextSibling),d===null))return null;return d}function LT(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function hde(d,h){var g=d.ownerDocument;if(d.data!=="$?"||g.readyState==="complete")h();else{var x=function(){h(),g.removeEventListener("DOMContentLoaded",x)};g.addEventListener("DOMContentLoaded",x),d._reactRetry=x}}function Pa(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return d}var zT=null;function kL(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var g=d.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return d;h--}else g==="/$"&&h++}d=d.previousSibling}return null}function CL(d,h,g){switch(h=_1(g),d){case"html":if(d=h.documentElement,!d)throw Error(r(452));return d;case"head":if(d=h.head,!d)throw Error(r(453));return d;case"body":if(d=h.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function ay(d){for(var h=d.attributes;h.length;)d.removeAttributeNode(h[0]);Ds(d)}var Ws=new Map,EL=new Set;function A1(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var Ec=q.d;q.d={f:pde,r:mde,D:gde,C:yde,L:bde,m:vde,X:wde,S:xde,M:Sde};function pde(){var d=Ec.f(),h=v1();return d||h}function mde(d){var h=Qi(d);h!==null&&h.tag===5&&h.type==="form"?G$(h):Ec.r(d)}var up=typeof document>"u"?null:document;function TL(d,h,g){var x=up;if(x&&typeof h=="string"&&h){var C=fo(h);C='link[rel="'+d+'"][href="'+C+'"]',typeof g=="string"&&(C+='[crossorigin="'+g+'"]'),EL.has(C)||(EL.add(C),d={rel:d,crossOrigin:g,href:h},x.querySelector(C)===null&&(h=x.createElement("link"),Ao(h,"link",d),Xn(h),x.head.appendChild(h)))}}function gde(d){Ec.D(d),TL("dns-prefetch",d,null)}function yde(d,h){Ec.C(d,h),TL("preconnect",d,h)}function bde(d,h,g){Ec.L(d,h,g);var x=up;if(x&&d&&h){var C='link[rel="preload"][as="'+fo(h)+'"]';h==="image"&&g&&g.imageSrcSet?(C+='[imagesrcset="'+fo(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(C+='[imagesizes="'+fo(g.imageSizes)+'"]')):C+='[href="'+fo(d)+'"]';var _=C;switch(h){case"style":_=dp(d);break;case"script":_=fp(d)}Ws.has(_)||(d=u({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:d,as:h},g),Ws.set(_,d),x.querySelector(C)!==null||h==="style"&&x.querySelector(ly(_))||h==="script"&&x.querySelector(cy(_))||(h=x.createElement("link"),Ao(h,"link",d),Xn(h),x.head.appendChild(h)))}}function vde(d,h){Ec.m(d,h);var g=up;if(g&&d){var x=h&&typeof h.as=="string"?h.as:"script",C='link[rel="modulepreload"][as="'+fo(x)+'"][href="'+fo(d)+'"]',_=C;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=fp(d)}if(!Ws.has(_)&&(d=u({rel:"modulepreload",href:d},h),Ws.set(_,d),g.querySelector(C)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(cy(_)))return}x=g.createElement("link"),Ao(x,"link",d),Xn(x),g.head.appendChild(x)}}}function xde(d,h,g){Ec.S(d,h,g);var x=up;if(x&&d){var C=es(x).hoistableStyles,_=dp(d);h=h||"default";var P=C.get(_);if(!P){var j={loading:0,preload:null};if(P=x.querySelector(ly(_)))j.loading=5;else{d=u({rel:"stylesheet",href:d,"data-precedence":h},g),(g=Ws.get(_))&&BT(d,g);var J=P=x.createElement("link");Xn(J),Ao(J,"link",d),J._p=new Promise(function(le,ve){J.onload=le,J.onerror=ve}),J.addEventListener("load",function(){j.loading|=1}),J.addEventListener("error",function(){j.loading|=2}),j.loading|=4,M1(P,h,x)}P={type:"stylesheet",instance:P,count:1,state:j},C.set(_,P)}}}function wde(d,h){Ec.X(d,h);var g=up;if(g&&d){var x=es(g).hoistableScripts,C=fp(d),_=x.get(C);_||(_=g.querySelector(cy(C)),_||(d=u({src:d,async:!0},h),(h=Ws.get(C))&&FT(d,h),_=g.createElement("script"),Xn(_),Ao(_,"link",d),g.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},x.set(C,_))}}function Sde(d,h){Ec.M(d,h);var g=up;if(g&&d){var x=es(g).hoistableScripts,C=fp(d),_=x.get(C);_||(_=g.querySelector(cy(C)),_||(d=u({src:d,async:!0,type:"module"},h),(h=Ws.get(C))&&FT(d,h),_=g.createElement("script"),Xn(_),Ao(_,"link",d),g.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},x.set(C,_))}}function _L(d,h,g,x){var C=(C=pe.current)?A1(C):null;if(!C)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=dp(g.href),g=es(C).hoistableStyles,x=g.get(h),x||(x={type:"style",instance:null,count:0,state:null},g.set(h,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){d=dp(g.href);var _=es(C).hoistableStyles,P=_.get(d);if(P||(C=C.ownerDocument||C,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(d,P),(_=C.querySelector(ly(d)))&&!_._p&&(P.instance=_,P.state.loading=5),Ws.has(d)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ws.set(d,g),_||kde(C,d,g,P.state))),h&&x===null)throw Error(r(528,""));return P}if(h&&x!==null)throw Error(r(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=fp(g),g=es(C).hoistableScripts,x=g.get(h),x||(x={type:"script",instance:null,count:0,state:null},g.set(h,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function dp(d){return'href="'+fo(d)+'"'}function ly(d){return'link[rel="stylesheet"]['+d+"]"}function AL(d){return u({},d,{"data-precedence":d.precedence,precedence:null})}function kde(d,h,g,x){d.querySelector('link[rel="preload"][as="style"]['+h+"]")?x.loading=1:(h=d.createElement("link"),x.preload=h,h.addEventListener("load",function(){return x.loading|=1}),h.addEventListener("error",function(){return x.loading|=2}),Ao(h,"link",g),Xn(h),d.head.appendChild(h))}function fp(d){return'[src="'+fo(d)+'"]'}function cy(d){return"script[async]"+d}function ML(d,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var x=d.querySelector('style[data-href~="'+fo(g.href)+'"]');if(x)return h.instance=x,Xn(x),x;var C=u({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return x=(d.ownerDocument||d).createElement("style"),Xn(x),Ao(x,"style",C),M1(x,g.precedence,d),h.instance=x;case"stylesheet":C=dp(g.href);var _=d.querySelector(ly(C));if(_)return h.state.loading|=4,h.instance=_,Xn(_),_;x=AL(g),(C=Ws.get(C))&&BT(x,C),_=(d.ownerDocument||d).createElement("link"),Xn(_);var P=_;return P._p=new Promise(function(j,J){P.onload=j,P.onerror=J}),Ao(_,"link",x),h.state.loading|=4,M1(_,g.precedence,d),h.instance=_;case"script":return _=fp(g.src),(C=d.querySelector(cy(_)))?(h.instance=C,Xn(C),C):(x=g,(C=Ws.get(_))&&(x=u({},g),FT(x,C)),d=d.ownerDocument||d,C=d.createElement("script"),Xn(C),Ao(C,"link",x),d.head.appendChild(C),h.instance=C);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(x=h.instance,h.state.loading|=4,M1(x,g.precedence,d));return h.instance}function M1(d,h,g){for(var x=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=x.length?x[x.length-1]:null,_=C,P=0;P<x.length;P++){var j=x[P];if(j.dataset.precedence===h)_=j;else if(_!==C)break}_?_.parentNode.insertBefore(d,_.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(d,h.firstChild))}function BT(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.title==null&&(d.title=h.title)}function FT(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.integrity==null&&(d.integrity=h.integrity)}var N1=null;function NL(d,h,g){if(N1===null){var x=new Map,C=N1=new Map;C.set(g,x)}else C=N1,x=C.get(g),x||(x=new Map,C.set(g,x));if(x.has(d))return x;for(x.set(d,null),g=g.getElementsByTagName(d),C=0;C<g.length;C++){var _=g[C];if(!(_[wa]||_[ln]||d==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var P=_.getAttribute(h)||"";P=d+P;var j=x.get(P);j?j.push(_):x.set(P,[_])}}return x}function RL(d,h,g){d=d.ownerDocument||d,d.head.insertBefore(g,h==="title"?d.querySelector("head > title"):null)}function Cde(d,h,g){if(g===1||h.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return d=h.disabled,typeof h.precedence=="string"&&d==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function IL(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var uy=null;function Ede(){}function Tde(d,h,g){if(uy===null)throw Error(r(475));var x=uy;if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var C=dp(g.href),_=d.querySelector(ly(C));if(_){d=_._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(x.count++,x=R1.bind(x),d.then(x,x)),h.state.loading|=4,h.instance=_,Xn(_);return}_=d.ownerDocument||d,g=AL(g),(C=Ws.get(C))&&BT(g,C),_=_.createElement("link"),Xn(_);var P=_;P._p=new Promise(function(j,J){P.onload=j,P.onerror=J}),Ao(_,"link",g),h.instance=_}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(h,d),(d=h.state.preload)&&(h.state.loading&3)===0&&(x.count++,h=R1.bind(x),d.addEventListener("load",h),d.addEventListener("error",h))}}function _de(){if(uy===null)throw Error(r(475));var d=uy;return d.stylesheets&&d.count===0&&VT(d,d.stylesheets),0<d.count?function(h){var g=setTimeout(function(){if(d.stylesheets&&VT(d,d.stylesheets),d.unsuspend){var x=d.unsuspend;d.unsuspend=null,x()}},6e4);return d.unsuspend=h,function(){d.unsuspend=null,clearTimeout(g)}}:null}function R1(){if(this.count--,this.count===0){if(this.stylesheets)VT(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var I1=null;function VT(d,h){d.stylesheets=null,d.unsuspend!==null&&(d.count++,I1=new Map,h.forEach(Ade,d),I1=null,R1.call(d))}function Ade(d,h){if(!(h.state.loading&4)){var g=I1.get(d);if(g)var x=g.get(null);else{g=new Map,I1.set(d,g);for(var C=d.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<C.length;_++){var P=C[_];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(g.set(P.dataset.precedence,P),x=P)}x&&g.set(null,x)}C=h.instance,P=C.getAttribute("data-precedence"),_=g.get(P)||x,_===x&&g.set(null,C),g.set(P,C),this.count++,x=R1.bind(this),C.addEventListener("load",x),C.addEventListener("error",x),_?_.parentNode.insertBefore(C,_.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(C,d.firstChild)),h.state.loading|=4}}var dy={$$typeof:T,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Mde(d,h,g,x,C,_,P,j){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.hiddenUpdates=Kr(null),this.identifierPrefix=x,this.onUncaughtError=C,this.onCaughtError=_,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function OL(d,h,g,x,C,_,P,j,J,le,ve,ke){return d=new Mde(d,h,g,P,j,J,le,ke),h=1,_===!0&&(h|=24),_=ls(3,null,null,h),d.current=_,_.stateNode=d,h=k2(),h.refCount++,d.pooledCache=h,h.refCount++,_.memoizedState={element:x,isDehydrated:g,cache:h},_2(_),d}function PL(d){return d?(d=Hh,d):Hh}function DL(d,h,g,x,C,_){C=PL(C),x.context===null?x.context=C:x.pendingContext=C,x=vu(h),x.payload={element:g},_=_===void 0?null:_,_!==null&&(x.callback=_),g=xu(d,x,h),g!==null&&(hs(g,d,h),Fg(g,d,h))}function $L(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var g=d.retryLane;d.retryLane=g!==0&&g<h?g:h}}function HT(d,h){$L(d,h),(d=d.alternate)&&$L(d,h)}function jL(d){if(d.tag===13){var h=Vh(d,67108864);h!==null&&hs(h,d,67108864),HT(d,67108864)}}var O1=!0;function Nde(d,h,g,x){var C=F.T;F.T=null;var _=q.p;try{q.p=2,UT(d,h,g,x)}finally{q.p=_,F.T=C}}function Rde(d,h,g,x){var C=F.T;F.T=null;var _=q.p;try{q.p=8,UT(d,h,g,x)}finally{q.p=_,F.T=C}}function UT(d,h,g,x){if(O1){var C=GT(x);if(C===null)RT(d,h,x,P1,g),zL(d,x);else if(Ode(C,d,h,g,x))x.stopPropagation();else if(zL(d,x),h&4&&-1<Ide.indexOf(d)){for(;C!==null;){var _=Qi(C);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var P=Cn(_.pendingLanes);if(P!==0){var j=_;for(j.pendingLanes|=2,j.entangledLanes|=2;P;){var J=1<<31-Oe(P);j.entanglements[1]|=J,P&=~J}wl(_),(un&6)===0&&(y1=xe()+500,oy(0))}}break;case 13:j=Vh(_,2),j!==null&&hs(j,_,2),v1(),HT(_,2)}if(_=GT(x),_===null&&RT(d,h,x,P1,g),_===C)break;C=_}C!==null&&x.stopPropagation()}else RT(d,h,x,null,g)}}function GT(d){return d=ml(d),qT(d)}var P1=null;function qT(d){if(P1=null,d=$s(d),d!==null){var h=i(d);if(h===null)d=null;else{var g=h.tag;if(g===13){if(d=s(h),d!==null)return d;d=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null)}}return P1=d,null}function LL(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case Ve:return 2;case nt:return 8;case kn:case Dr:return 32;case or:return 268435456;default:return 32}default:return 32}}var ZT=!1,Ou=null,Pu=null,Du=null,fy=new Map,hy=new Map,$u=[],Ide="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zL(d,h){switch(d){case"focusin":case"focusout":Ou=null;break;case"dragenter":case"dragleave":Pu=null;break;case"mouseover":case"mouseout":Du=null;break;case"pointerover":case"pointerout":fy.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":hy.delete(h.pointerId)}}function py(d,h,g,x,C,_){return d===null||d.nativeEvent!==_?(d={blockedOn:h,domEventName:g,eventSystemFlags:x,nativeEvent:_,targetContainers:[C]},h!==null&&(h=Qi(h),h!==null&&jL(h)),d):(d.eventSystemFlags|=x,h=d.targetContainers,C!==null&&h.indexOf(C)===-1&&h.push(C),d)}function Ode(d,h,g,x,C){switch(h){case"focusin":return Ou=py(Ou,d,h,g,x,C),!0;case"dragenter":return Pu=py(Pu,d,h,g,x,C),!0;case"mouseover":return Du=py(Du,d,h,g,x,C),!0;case"pointerover":var _=C.pointerId;return fy.set(_,py(fy.get(_)||null,d,h,g,x,C)),!0;case"gotpointercapture":return _=C.pointerId,hy.set(_,py(hy.get(_)||null,d,h,g,x,C)),!0}return!1}function BL(d){var h=$s(d.target);if(h!==null){var g=i(h);if(g!==null){if(h=g.tag,h===13){if(h=s(g),h!==null){d.blockedOn=h,jo(d.priority,function(){if(g.tag===13){var x=fs();x=Ci(x);var C=Vh(g,x);C!==null&&hs(C,g,x),HT(g,x)}});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){d.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}d.blockedOn=null}function D1(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var g=GT(d.nativeEvent);if(g===null){g=d.nativeEvent;var x=new g.constructor(g.type,g);Eo=x,g.target.dispatchEvent(x),Eo=null}else return h=Qi(g),h!==null&&jL(h),d.blockedOn=g,!1;h.shift()}return!0}function FL(d,h,g){D1(d)&&g.delete(h)}function Pde(){ZT=!1,Ou!==null&&D1(Ou)&&(Ou=null),Pu!==null&&D1(Pu)&&(Pu=null),Du!==null&&D1(Du)&&(Du=null),fy.forEach(FL),hy.forEach(FL)}function $1(d,h){d.blockedOn===h&&(d.blockedOn=null,ZT||(ZT=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pde)))}var j1=null;function VL(d){j1!==d&&(j1=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){j1===d&&(j1=null);for(var h=0;h<d.length;h+=3){var g=d[h],x=d[h+1],C=d[h+2];if(typeof x!="function"){if(qT(x||g)===null)continue;break}var _=Qi(g);_!==null&&(d.splice(h,3),h-=3,q2(_,{pending:!0,data:C,method:g.method,action:x},x,C))}}))}function my(d){function h(J){return $1(J,d)}Ou!==null&&$1(Ou,d),Pu!==null&&$1(Pu,d),Du!==null&&$1(Du,d),fy.forEach(h),hy.forEach(h);for(var g=0;g<$u.length;g++){var x=$u[g];x.blockedOn===d&&(x.blockedOn=null)}for(;0<$u.length&&(g=$u[0],g.blockedOn===null);)BL(g),g.blockedOn===null&&$u.shift();if(g=(d.ownerDocument||d).$$reactFormReplay,g!=null)for(x=0;x<g.length;x+=3){var C=g[x],_=g[x+1],P=C[Yt]||null;if(typeof _=="function")P||VL(g);else if(P){var j=null;if(_&&_.hasAttribute("formAction")){if(C=_,P=_[Yt]||null)j=P.formAction;else if(qT(C)!==null)continue}else j=P.action;typeof j=="function"?g[x+1]=j:(g.splice(x,3),x-=3),VL(g)}}}function WT(d){this._internalRoot=d}L1.prototype.render=WT.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(r(409));var g=h.current,x=fs();DL(g,x,d,h,null,null)},L1.prototype.unmount=WT.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;DL(d.current,2,null,d,null,null),v1(),h[Lo]=null}};function L1(d){this._internalRoot=d}L1.prototype.unstable_scheduleHydration=function(d){if(d){var h=Kt();d={blockedOn:null,target:d,priority:h};for(var g=0;g<$u.length&&h!==0&&h<$u[g].priority;g++);$u.splice(g,0,d),g===0&&BL(d)}};var HL=t.version;if(HL!=="19.1.1")throw Error(r(527,HL,"19.1.1"));q.findDOMNode=function(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=l(h),d=d!==null?c(d):null,d=d===null?null:d.stateNode,d};var Dde={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var z1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!z1.isDisabled&&z1.supportsFiber)try{Y=z1.inject(Dde),he=z1}catch{}}return yy.createRoot=function(d,h){if(!o(d))throw Error(r(299));var g=!1,x="",C=ij,_=sj,P=aj,j=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(_=h.onCaughtError),h.onRecoverableError!==void 0&&(P=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(j=h.unstable_transitionCallbacks)),h=OL(d,1,!1,null,null,g,x,C,_,P,j,null),d[Lo]=h.current,NT(d),new WT(h)},yy.hydrateRoot=function(d,h,g){if(!o(d))throw Error(r(299));var x=!1,C="",_=ij,P=sj,j=aj,J=null,le=null;return g!=null&&(g.unstable_strictMode===!0&&(x=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(_=g.onUncaughtError),g.onCaughtError!==void 0&&(P=g.onCaughtError),g.onRecoverableError!==void 0&&(j=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(J=g.unstable_transitionCallbacks),g.formState!==void 0&&(le=g.formState)),h=OL(d,1,!0,h,g??null,x,C,_,P,j,J,le),h.context=PL(null),g=h.current,x=fs(),x=Ci(x),C=vu(x),C.callback=null,xu(g,C,x),g=x,h.current.lanes=g,ir(h,g),wl(h),d[Lo]=h.current,NT(d),new L1(h)},yy.version="19.1.1",yy}var QL;function Gde(){if(QL)return JT.exports;QL=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),JT.exports=Ude(),JT.exports}var ZU=Gde();const qde=Md(ZU);var t_={exports:{}},n_={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e6;function Zde(){if(e6)return n_;e6=1;var e=zb().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return n_.c=function(t){return e.H.useMemoCache(t)},n_}var t6;function Wde(){return t6||(t6=1,t_.exports=Zde()),t_.exports}var ht=Wde();const Kde="modulepreload",Yde=function(e){return"/"+e},n6={},Ne=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");o=l(n.map(c=>{if(c=Yde(c),c in n6)return;n6[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Kde,u||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,y)=>{p.addEventListener("load",m),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},r6=e=>{let t;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const p=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,p))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,o,a);return a},Jde=(e=>e?r6(e):r6),Xde=e=>e;function Qde(e,t=Xde){const n=se.useSyncExternalStore(e.subscribe,se.useCallback(()=>t(e.getState()),[e,t]),se.useCallback(()=>t(e.getInitialState()),[e,t]));return se.useDebugValue(n),n}const o6=e=>{const t=Jde(e),n=r=>Qde(t,r);return Object.assign(n,t),n},WU=(e=>e?o6(e):o6);async function zt(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}typeof window<"u"&&window.addEventListener("blur",()=>{const e=Ur.getState().saveTimeout;e&&(clearTimeout(e),Ur.getState().saveCurrentNote())});const Ur=WU()((e,t)=>({notes:[],folders:[],currentNote:null,isLoading:!1,saveTimeout:null,loadNotes:async()=>{e({isLoading:!0});try{const n=await zt("get_all_notes");e({notes:n,isLoading:!1})}catch(n){console.error("Failed to load notes:",n),e({isLoading:!1})}},loadFolders:async()=>{try{const n=await zt("get_all_folders");e({folders:n})}catch(n){console.error("Failed to load folders:",n)}},selectNote:async n=>{const r=t();r.saveTimeout&&(clearTimeout(r.saveTimeout),await t().saveCurrentNote()),e({currentNote:n})},createNote:async(n="text",r)=>{try{const o=JSON.stringify([{id:crypto.randomUUID(),type:"heading",props:{level:1},content:"Untitled",children:[]}]),s={...await zt("create_note",{title:"Untitled",noteType:n,folderId:r}),content:o};return await zt("save_note",{note:s}),e(a=>({notes:[s,...a.notes]})),s}catch(o){throw console.error("Failed to create note:",o),o}},createFolder:async(n,r)=>{try{const o=await zt("create_folder",{name:n,parentId:r});return e(i=>({folders:[...i.folders,o]})),o}catch(o){throw console.error("Failed to create folder:",o),o}},updateNote:async(n,r)=>{try{const i=t().notes.find(a=>a.id===n);if(!i)throw new Error("Note not found");const s={...i,...r,updated_at:new Date().toISOString()};await zt("save_note",{note:s}),e(a=>({notes:a.notes.map(l=>l.id===n?s:l),currentNote:a.currentNote?.id===n?s:a.currentNote}))}catch(o){throw console.error("Failed to update note:",o),o}},updateFolder:async(n,r)=>{try{const i=t().folders.find(a=>a.id===n);if(!i)throw new Error("Folder not found");const s={...i,...r,updated_at:new Date().toISOString()};await zt("update_folder",{folder:s}),e(a=>({folders:a.folders.map(l=>l.id===n?s:l)}))}catch(o){throw console.error("Failed to update folder:",o),o}},deleteNote:async n=>{try{await zt("delete_note",{noteId:n}),e(r=>({notes:r.notes.filter(o=>o.id!==n),currentNote:r.currentNote?.id===n?null:r.currentNote}))}catch(r){throw console.error("Failed to delete note:",r),r}},deleteFolder:async n=>{try{await zt("delete_folder",{folderId:n}),e(r=>({folders:r.folders.filter(o=>o.id!==n),notes:r.notes.filter(o=>o.folder_id!==n),currentNote:r.currentNote?.folder_id===n?null:r.currentNote}))}catch(r){throw console.error("Failed to delete folder:",r),r}},toggleStar:async n=>{try{const r=await zt("toggle_star_note",{noteId:n});e(o=>({notes:o.notes.map(i=>i.id===n?{...i,starred:r}:i),currentNote:o.currentNote?.id===n?{...o.currentNote,starred:r}:o.currentNote}))}catch(r){throw console.error("Failed to toggle star:",r),r}},updateCurrentNoteContent:n=>{console.log("updateCurrentNoteContent called with length:",n.length);const r=t();if(r.currentNote){console.log("Updating note content locally"),r.saveTimeout&&clearTimeout(r.saveTimeout);const o={...r.currentNote,content:n},i=setTimeout(()=>{console.log("Executing autosave timeout"),t().saveCurrentNote()},200);e(s=>({currentNote:o,notes:s.notes.map(a=>a.id===o.id?o:a),saveTimeout:i}))}else console.log("No current note to update")},updateCurrentNoteTitle:n=>{const r=t();if(!r.currentNote)return;const o={...r.currentNote,title:n};e(i=>({currentNote:o,notes:i.notes.map(s=>s.id===o.id?o:s)}))},saveCurrentNote:async()=>{console.log("saveCurrentNote called");const n=t();if(n.currentNote)try{console.log("Invoking save_note"),await zt("save_note",{note:n.currentNote}),e({saveTimeout:null}),console.log("Note saved successfully:",n.currentNote.id)}catch(r){console.error("Failed to save note:",r)}else console.log("No current note to save")}}));function No(e){this.content=e}No.prototype={constructor:No,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return o==-1?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new No(i)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new No(n)},addToStart:function(e,t){return new No([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new No(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(i==-1?o.length:i,0,t,n),new No(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=No.from(e),e.size?new No(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=No.from(e),e.size?new No(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=No.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};No.from=function(e){if(e instanceof No)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new No(t)};function KU(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(r),i=t.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=KU(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function YU(e,t,n,r){for(let o=e.childCount,i=t.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=e.child(--o),a=t.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=YU(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class ge{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>t&&r(l,o+a,i||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,o){let i="",s=!0;return this.nodesBetween(t,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new ge(o,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],o=0;if(n>t)for(let i=0,s=0;s<n;i++){let a=this.content[i],l=s+a.nodeSize;l>t&&((s<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,t-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new ge(r,o)}cutByIndex(t,n){return t==n?ge.empty:t==0&&n==this.content.length?this:new ge(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new ge(o,i)}addToStart(t){return new ge([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new ge(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];t(o,r,n),r+=o.nodeSize}}findDiffStart(t,n=0){return KU(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return YU(this,t,n,r)}findIndex(t){if(t==0)return F1(0,t);if(t==this.size)return F1(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t?F1(n+1,i):F1(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return ge.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ge(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return ge.empty;let n,r=0;for(let o=0;o<t.length;o++){let i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new ge(n||t,r)}static from(t){if(!t)return ge.empty;if(t instanceof ge)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ge([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ge.empty=new ge([],0);const r_={index:0,offset:0};function F1(e,t){return r_.index=e,r_.offset=t,r_}function Iw(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Iw(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Iw(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Nn=class WM{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let o=0;o<t.length;o++){let i=t[o];if(this.eq(i))return t;if(this.type.excludes(i.type))n||(n=t.slice(0,o));else{if(i.type.excludes(this.type))return t;!r&&i.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Iw(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return WM.none;if(t instanceof WM)return[t];let n=t.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Nn.none=[];class Ow extends Error{}class Ee{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=XU(this.content,t+this.openStart,n);return r&&new Ee(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Ee(JU(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Ee.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ee(ge.fromJSON(t,n.content),r,o)}static maxOpen(t,n=!0){let r=0,o=0;for(let i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=t.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new Ee(t,r,o)}}Ee.empty=new Ee(ge.empty,0,0);function JU(e,t,n){let{index:r,offset:o}=e.findIndex(t),i=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(o==t||i.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(JU(i.content,t-o-1,n-o-1)))}function XU(e,t,n,r){let{index:o,offset:i}=e.findIndex(t),s=e.maybeChild(o);if(i==t||s.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=XU(s.content,t-i-1,n,s);return a&&e.replaceChild(o,s.copy(a))}function efe(e,t,n){if(n.openStart>e.depth)throw new Ow("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Ow("Inconsistent open depths");return QU(e,t,n,0)}function QU(e,t,n,r){let o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){let s=QU(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let s=e.parent,a=s.content;return Vf(s,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:s,end:a}=tfe(n,e);return Vf(i,tG(e,s,a,t,r))}else return Vf(i,Pw(e,t,r))}function eG(e,t){if(!t.type.compatibleContent(e.type))throw new Ow("Cannot join "+t.type.name+" onto "+e.type.name)}function KM(e,t,n){let r=e.node(n);return eG(r,t.node(n)),r}function Ff(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Wy(e,t,n,r){let o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Ff(e.nodeAfter,r),i++));for(let a=i;a<s;a++)Ff(o.child(a),r);t&&t.depth==n&&t.textOffset&&Ff(t.nodeBefore,r)}function Vf(e,t){return e.type.checkContent(t),e.copy(t)}function tG(e,t,n,r,o){let i=e.depth>o&&KM(e,t,o+1),s=r.depth>o&&KM(n,r,o+1),a=[];return Wy(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(eG(i,s),Ff(Vf(i,tG(e,t,n,r,o+1)),a)):(i&&Ff(Vf(i,Pw(e,t,o+1)),a),Wy(t,n,o,a),s&&Ff(Vf(s,Pw(n,r,o+1)),a)),Wy(r,null,o,a),new ge(a)}function Pw(e,t,n){let r=[];if(Wy(null,e,n,r),e.depth>n){let o=KM(e,t,n+1);Ff(Vf(o,Pw(e,t,n+1)),r)}return Wy(t,null,n,r),new ge(r)}function tfe(e,t){let n=t.depth-e.openStart,o=t.node(n).copy(e.content);for(let i=n-1;i>=0;i--)o=t.node(i).copy(ge.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}class E0{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=t.child(n);return r?t.child(n).cut(r):o}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<t;i++)o+=r.child(i).nodeSize;return o}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Nn.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),o=t.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=t.parent.maybeChild(t.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Dw(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=t;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new E0(n,r,i)}static resolveCached(t,n){let r=i6.get(t);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else i6.set(t,r=new nfe);let o=r.elts[r.i]=E0.resolve(t,n);return r.i=(r.i+1)%rfe,o}}class nfe{constructor(){this.elts=[],this.i=0}}const rfe=12,i6=new WeakMap;class Dw{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ofe=Object.create(null);let Vc=class YM{constructor(t,n,r,o=Nn.none){this.type=t,this.attrs=n,this.marks=o,this.content=r||ge.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,o=0){this.content.nodesBetween(t,n,r,o,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,o){return this.content.textBetween(t,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Iw(this.attrs,n||t.defaultAttrs||ofe)&&Nn.sameSet(this.marks,r||Nn.none)}copy(t=null){return t==this.content?this:new YM(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new YM(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Ee.empty;let o=this.resolve(t),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new Ee(c,o.depth-s,i.depth-s)}replace(t,n,r){return efe(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(o==t||n.isText)return n;t-=o+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(t){return E0.resolveCached(this,t)}resolveNoCache(t){return E0.resolve(this,t)}rangeHasMark(t,n,r){let o=!1;return n>t&&this.nodesBetween(t,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),nG(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=ge.empty,o=0,i=r.childCount){let s=this.contentMatchAt(t).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(t).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Nn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Nn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let o=ge.fromJSON(t,n.content),i=t.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};Vc.prototype.text=void 0;class $w extends Vc{constructor(t,n,r,o){if(super(t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):nG(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new $w(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new $w(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function nG(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Xf{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new ife(t,n);if(r.next==null)return Xf.empty;let o=rG(r);r.next&&r.err("Unexpected trailing text");let i=ffe(dfe(o));return hfe(i,r),i}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(t.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(t,r);if(l&&(!n||l.validEnd))return ge.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:f}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);let p=i(f,a.concat(u));if(p)return p}}return null}return i(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(t)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let o=0;o<r.next.length;o++)t.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),t.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+t.indexOf(r.next[s].next);return i}).join(`
`)}}Xf.empty=new Xf(!0);class ife{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function rG(e){let t=[];do t.push(sfe(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function sfe(e){let t=[];do t.push(afe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function afe(e){let t=ufe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=lfe(e,t);else break;return t}function s6(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function lfe(e,t){let n=s6(e),r=n;return e.eat(",")&&(e.next!="}"?r=s6(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function cfe(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(t)&&o.push(s)}return o.length==0&&e.err("No node type or group '"+t+"' found"),o}function ufe(e){if(e.eat("(")){let t=rG(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=cfe(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function dfe(e){let t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(s,a,l){let c={term:l,to:a};return t[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();o(i(s.expr,l),u),l=u}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),o(i(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function oG(e,t){return t-e}function a6(e,t){let n=[];return r(t),n.sort(oG);function r(o){let i=e[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&n.indexOf(l)==-1&&r(l)}}}function ffe(e){let t=Object.create(null);return n(a6(e,0));function n(r){let o=[];r.forEach(s=>{e[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);a6(e,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=t[r.join(",")]=new Xf(r.indexOf(e.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(oG);i.next.push({type:o[s][0],next:t[a.join(",")]||n(a)})}return i}}function hfe(e,t){for(let n=0,r=[e];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function iG(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function sG(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(o===void 0){let i=e[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function aG(e,t,n,r){for(let o in t)if(!(o in e))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in e){let i=e[o];i.validate&&i.validate(t[o])}}function lG(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new mfe(e,r,t[r]);return n}let l6=class cG{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=lG(t,r.attrs),this.defaultAttrs=iG(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Xf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:sG(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Vc(this,this.computeAttrs(t),ge.from(n),Nn.setFrom(r))}createChecked(t=null,n,r){return n=ge.from(n),this.checkContent(n),new Vc(this,this.computeAttrs(t),n,Nn.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=ge.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(ge.empty,!0);return i?new Vc(this,t,n.append(i),Nn.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){aG(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Nn.none:t}static compile(t,n){let r=Object.create(null);t.forEach((i,s)=>r[i]=new cG(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function pfe(e,t,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}class mfe{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?pfe(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class oC{constructor(t,n,r,o){this.name=t,this.rank=n,this.schema=r,this.spec=o,this.attrs=lG(t,o.attrs),this.excluded=null;let i=iG(this.attrs);this.instance=i?new Nn(this,i):null}create(t=null){return!t&&this.instance?this.instance:new Nn(this,sG(this.attrs,t))}static compile(t,n){let r=Object.create(null),o=0;return t.forEach((i,s)=>r[i]=new oC(i,o++,n,s)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){aG(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let uG=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in t)n[o]=t[o];n.nodes=No.from(t.nodes),n.marks=No.from(t.marks||{}),this.nodes=l6.compile(this.spec.nodes,this),this.marks=oC.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=Xf.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?c6(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:c6(this,s.split(" "))}this.nodeFromJSON=o=>Vc.fromJSON(this,o),this.markFromJSON=o=>Nn.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,o){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof l6){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,o)}text(t,n){let r=this.nodes.text;return new $w(r,r.defaultAttrs,t,Nn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function c6(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(let a in e.marks){let l=e.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function gfe(e){return e.tag!=null}function yfe(e){return e.style!=null}let Bl=class JM{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(gfe(o))this.tags.push(o);else if(yfe(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=t.nodes[o.node];return i.contentMatch.matchType(i)})}parse(t,n={}){let r=new d6(this,n,!1);return r.addAll(t,Nn.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new d6(this,n,!0);return r.addAll(t,Nn.none,n.from,n.to),Ee.maxOpen(r.finish())}matchTag(t,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(xfe(t,i.tag)&&(i.namespace===void 0||t.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(t);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(t,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(t)!=0||s.context&&!r.matchesContext(s.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in t.marks){let i=t.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=f6(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in t.nodes){let i=t.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=f6(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new JM(t,JM.schemaRules(t)))}};const dG={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},bfe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},fG={ol:!0,ul:!0},T0=1,XM=2,Ky=4;function u6(e,t,n){return t!=null?(t?T0:0)|(t==="full"?XM:0):e&&e.whitespace=="pre"?T0|XM:n&~Ky}class V1{constructor(t,n,r,o,i,s){this.type=t,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=Nn.none,this.match=i||(s&Ky?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ge.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(t.type))?(this.match=r,o):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&T0)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=ge.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(ge.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!dG.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class d6{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=u6(null,n.preserveWhitespace,0)|(r?Ky:0);o?i=new V1(o.type,o.attrs,Nn.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new V1(null,null,Nn.none,!0,null,s):i=new V1(t.schema.topNodeType,null,Nn.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,o=this.top,i=o.options&XM?"full":this.localPreserveWS||(o.options&T0)>0;if(i==="full"||o.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],a=t.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let o=this.localPreserveWS,i=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let s=t.nodeName.toLowerCase(),a;fG.hasOwnProperty(s)&&this.parser.normalizeLists&&vfe(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:bfe.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(dG.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=l&&l.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(t,n);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(t);else if(o)this.addElement(t,r,o);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}i&&this.sync(a)&&this.open--}addAll(t,n,r,o){let i=r||0;for(let s=r?t.childNodes[r]:t.firstChild,a=o==null?null:t.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(s,n);this.findAtPoint(t,i)}findPlace(t,n,r){let o,i;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(t);if(c&&(!o||o.length>c.length+a)&&(o=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)n=this.enterInner(o[s],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let o=this.findPlace(t,n,r);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(t.type));let s=Nn.none;for(let a of o.concat(t.marks))(i.type?i.type.allowsMarkType(a.type):h6(a.type,t.type))&&(s=a.addToSet(s));return i.content.push(t.mark(s)),!0}return!1}enter(t,n,r,o){let i=this.findPlace(t.create(n),r,!1);return i&&(i=this.enterInner(t,n,r,!0,o)),i}enterInner(t,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(t);let a=u6(t,i,s.options);s.options&Ky&&s.content.length==0&&(a|=Ky);let l=Nn.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):h6(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new V1(t,n,l,o,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=T0)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)t+=r[o].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&t.nodeType==1&&t.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function vfe(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&fG.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function xfe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function f6(e){let t={};for(let n in e)t[n]=e[n];return t}function h6(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}class iu{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=o_(n).createDocumentFragment());let o=r,i=[];return t.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:o}=ew(o_(n),this.nodes[t.type.name](t),null,t.attrs);if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,o)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let o=t.marks.length-1;o>=0;o--){let i=this.serializeMark(t.marks[o],t.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(t,n,r={}){let o=this.marks[t.type.name];return o&&ew(o_(r),o(t,n),null,t.attrs)}static renderSpec(t,n,r=null,o){return ew(t,n,r,o)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new iu(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=p6(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return p6(t.marks)}}function p6(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function o_(e){return e.document||window.document}const m6=new WeakMap;function wfe(e){let t=m6.get(e);return t===void 0&&m6.set(e,t=Sfe(e)),t}function Sfe(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(e),t}function ew(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let o=t[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=wfe(r))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let a,l=n?e.createElementNS(n,o):e.createElement(o),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=u;f<t.length;f++){let p=t[f];if(p===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:y}=ew(e,p,n,r);if(l.appendChild(m),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const hG=65535,pG=Math.pow(2,16);function kfe(e,t){return e+t*pG}function g6(e){return e&hG}function Cfe(e){return(e-(e&hG))/pG}const mG=1,gG=2,tw=4,yG=8;class QM{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&yG)>0}get deletedBefore(){return(this.delInfo&(mG|tw))>0}get deletedAfter(){return(this.delInfo&(gG|tw))>0}get deletedAcross(){return(this.delInfo&tw)>0}}class xs{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&xs.empty)return xs.empty}recover(t){let n=0,r=g6(t);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+Cfe(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>t)break;let c=this.ranges[a+i],u=this.ranges[a+s],f=l+c;if(t<=f){let p=c?t==l?-1:t==f?1:n:n,m=l+o+(p<0?0:u);if(r)return m;let y=t==(n<0?l:f)?null:kfe(a/3,t-l),b=t==l?gG:t==f?mG:tw;return(n<0?t!=l:t!=f)&&(b|=yG),new QM(m,b,y)}o+=u-c}return r?t+o:new QM(t+o,0,null)}touches(t,n){let r=0,o=g6(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+i],u=l+c;if(t<=u&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+n],u=this.ranges[o+r];t(a,a+c,l,l+u),i+=u-c}}invert(){return new xs(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?xs.empty:new xs(t<0?[0,-t,0]:[0,0,t])}}xs.empty=new xs([]);class Qf{constructor(t,n,r=0,o=t?t.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Qf(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let o=t.getMirror(n);this.appendMap(t._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let o=t.getMirror(n);this.appendMap(t._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let t=new Qf;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],a=s.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,t=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,t=a.pos}return r?t:new QM(t,o,null)}}const i_=Object.create(null);class ri{getMap(){return xs.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=i_[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in i_)throw new RangeError("Duplicate use of step JSON ID "+t);return i_[t]=n,n.prototype.jsonID=t,n}}class Gr{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Gr(t,null)}static fail(t){return new Gr(null,t)}static fromReplace(t,n,r,o){try{return Gr.ok(t.replace(n,r,o))}catch(i){if(i instanceof Ow)return Gr.fail(i.message);throw i}}}function xO(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(xO(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return ge.fromArray(r)}class rd extends ri{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Ee(xO(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return Gr.fromReplace(t,this.from,this.to,i)}invert(){return new Dl(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new rd(n.pos,r.pos,this.mark)}merge(t){return t instanceof rd&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new rd(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new rd(n.from,n.to,t.markFromJSON(n.mark))}}ri.jsonID("addMark",rd);class Dl extends ri{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Ee(xO(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),t),n.openStart,n.openEnd);return Gr.fromReplace(t,this.from,this.to,r)}invert(){return new rd(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Dl(n.pos,r.pos,this.mark)}merge(t){return t instanceof Dl&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Dl(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Dl(n.from,n.to,t.markFromJSON(n.mark))}}ri.jsonID("removeMark",Dl);class od extends ri{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Gr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Gr.fromReplace(t,this.pos,this.pos+1,new Ee(ge.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new od(this.pos,n.marks[o]);return new od(this.pos,this.mark)}}return new eh(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new od(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new od(n.pos,t.markFromJSON(n.mark))}}ri.jsonID("addNodeMark",od);class eh extends ri{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Gr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Gr.fromReplace(t,this.pos,this.pos+1,new Ee(ge.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new od(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new eh(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new eh(n.pos,t.markFromJSON(n.mark))}}ri.jsonID("removeNodeMark",eh);class zn extends ri{constructor(t,n,r,o=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=o}apply(t){return this.structure&&eN(t,this.from,this.to)?Gr.fail("Structure replace would overwrite content"):Gr.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new xs([this.from,this.to-this.from,this.slice.size])}invert(t){return new zn(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new zn(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof zn)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Ee.empty:new Ee(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new zn(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Ee.empty:new Ee(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new zn(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new zn(n.from,n.to,Ee.fromJSON(t,n.slice),!!n.structure)}}ri.jsonID("replace",zn);class kr extends ri{constructor(t,n,r,o,i,s,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(t){if(this.structure&&(eN(t,this.from,this.gapFrom)||eN(t,this.gapTo,this.to)))return Gr.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Gr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Gr.fromReplace(t,this.from,this.to,r):Gr.fail("Content does not fit in gap")}getMap(){return new xs([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new kr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new kr(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new kr(n.from,n.to,n.gapFrom,n.gapTo,Ee.fromJSON(t,n.slice),n.insert,!!n.structure)}}ri.jsonID("replaceAround",kr);function eN(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Efe(e,t,n,r){let o=[],i=[],s,a;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let p=Math.max(c,t),m=Math.min(c+l.nodeSize,n),y=r.addToSet(f);for(let b=0;b<f.length;b++)f[b].isInSet(y)||(s&&s.to==p&&s.mark.eq(f[b])?s.to=m:o.push(s=new Dl(p,m,f[b])));a&&a.to==p?a.to=m:i.push(a=new rd(p,m,r))}}),o.forEach(l=>e.step(l)),i.forEach(l=>e.step(l))}function Tfe(e,t,n,r){let o=[],i=0;e.doc.nodesBetween(t,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof oC){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],p;for(let m=0;m<o.length;m++){let y=o[m];y.step==i-1&&f.eq(o[m].style)&&(p=y)}p?(p.to=c,p.step=i):o.push({style:f,from:Math.max(a,t),to:c,step:i})}}}),o.forEach(s=>e.step(new Dl(s.from,s.to,s.style)))}function wO(e,t,n,r=n.contentMatch,o=!0){let i=e.doc.nodeAt(t),s=[],a=t+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new zn(a,u,Ee.empty));else{r=f;for(let p=0;p<c.marks.length;p++)n.allowsMarkType(c.marks[p].type)||e.step(new Dl(a,u,c.marks[p]));if(o&&c.isText&&n.whitespace!="pre"){let p,m=/\r?\n|\r/g,y;for(;p=m.exec(c.text);)y||(y=new Ee(ge.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new zn(a+p.index,a+p.index+p[0].length,y))}}a=u}if(!r.validEnd){let l=r.fillBefore(ge.empty,!0);e.replace(a,a,new Ee(l,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function _fe(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Gm(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let o=e.$from.node(r),i=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!_fe(o,i,s))break}return null}function Afe(e,t,n){let{$from:r,$to:o,depth:i}=t,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=ge.empty,f=0;for(let y=i,b=!1;y>n;y--)b||r.index(y)>0?(b=!0,u=ge.from(r.node(y).copy(u)),f++):l--;let p=ge.empty,m=0;for(let y=i,b=!1;y>n;y--)b||o.after(y+1)<o.end(y)?(b=!0,p=ge.from(o.node(y).copy(p)),m++):c++;e.step(new kr(l,c,s,a,new Ee(u.append(p),f,m),u.size-f,!0))}function bG(e,t,n=null,r=e){let o=Mfe(e,t),i=o&&Nfe(r,t);return i?o.map(y6).concat({type:t,attrs:n}).concat(i.map(y6)):null}function y6(e){return{type:e,attrs:null}}function Mfe(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}function Nfe(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function Rfe(e,t,n){let r=ge.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ge.from(n[s].type.create(n[s].attrs,r))}let o=t.start,i=t.end;e.step(new kr(o,i,o,i,new Ee(r,0,0),n.length,!0))}function Ife(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&Ofe(e.doc,e.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!y?c=!1:!m&&y&&(c=!0)}c===!1&&xG(e,s,a,i),wO(e,e.mapping.slice(i).map(a,1),r,void 0,c===null);let u=e.mapping.slice(i),f=u.map(a,1),p=u.map(a+s.nodeSize,1);return e.step(new kr(f,p,f+1,p-1,new Ee(ge.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&vG(e,s,a,i),!1}})}function vG(e,t,n,r){t.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=e.mapping.slice(r).map(n+1+i+s.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function xG(e,t,n,r){t.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=e.mapping.slice(r).map(n+1+i);e.replaceWith(s,s+1,t.type.schema.text(`
`))}})}function Ofe(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function Pfe(e,t,n,r,o){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new kr(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new Ee(ge.from(s),0,0),1,!0))}function Hc(e,t,n=1,r){let o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let f=o.node(c),p=o.index(c);if(f.type.spec.isolating)return!1;let m=f.content.cutByIndex(p,f.childCount),y=r&&r[u+1];y&&(m=m.replaceChild(0,y.type.create(y.attrs)));let b=r&&r[u]||f;if(!f.canReplace(p+1,f.childCount)||!b.type.validContent(m))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function Dfe(e,t,n=1,r){let o=e.doc.resolve(t),i=ge.empty,s=ge.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=ge.from(o.node(a).copy(i));let u=r&&r[c];s=ge.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}e.step(new zn(t,t,new Ee(i.append(s),n,n),!0))}function vh(e,t){let n=e.resolve(t),r=n.index();return wG(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function $fe(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let o=0;o<t.childCount;o++){let i=t.child(o),s=i.type==r?e.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!e.type.allowsMarks(i.marks))return!1}return n.validEnd}function wG(e,t){return!!(e&&t&&!e.isLeaf&&$fe(e,t))}function iC(e,t,n=-1){let r=e.resolve(t);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&wG(i,s)&&r.node(o).canReplace(a,a+1))return t;if(o==0)break;t=n<0?r.before(o):r.after(o)}}function jfe(e,t,n){let r=null,{linebreakReplacement:o}=e.doc.type.schema,i=e.doc.resolve(t-n),s=i.node().type;if(o&&s.inlineContent){let u=s.whitespace=="pre",f=!!s.contentMatch.matchType(o);u&&!f?r=!1:!u&&f&&(r=!0)}let a=e.steps.length;if(r===!1){let u=e.doc.resolve(t+n);xG(e,u.node(),u.before(),a)}s.inlineContent&&wO(e,t+n-1,s,i.node().contentMatchAt(i.index()),r==null);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new zn(c,l.map(t+n,-1),Ee.empty,!0)),r===!0){let u=e.doc.resolve(c);vG(e,u.node(),u.before(),e.steps.length)}return e}function Lfe(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function SG(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(l,l,o);else{let f=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function sC(e,t,n=t,r=Ee.empty){if(t==n&&!r.size)return null;let o=e.resolve(t),i=e.resolve(n);return kG(o,i,r)?new zn(t,n,r):new zfe(o,i,r).fit()}function kG(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class zfe{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ge.empty;for(let o=0;o<=t.depth;o++){let i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}for(let o=t.depth;o>0;o--)this.placed=ge.from(t.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new Ee(i,s,a);return t>-1?new kr(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new zn(r.pos,o.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<t;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){t=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=s_(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(ge.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:f};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,o=s_(t,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Ee(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,o=s_(t,n);if(o.childCount<=1&&n>0){let i=t.size-n<=n+o.size;this.unplaced=new Ee(Oy(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Ee(Oy(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let b=0;b<i.length;b++)this.openFrontierNode(i[b]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,c=0,u=[],{match:f,type:p}=this.frontier[n];if(o){for(let b=0;b<o.childCount;b++)u.push(o.child(b));f=f.matchFragment(o)}let m=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let b=a.child(c),w=f.matchType(b.type);if(!w)break;c++,(c>1||l==0||b.content.size)&&(f=w,u.push(CG(b.mark(p.allowedMarks(b.marks)),c==1?l:0,c==a.childCount?m:-1)))}let y=c==a.childCount;y||(m=-1),this.placed=Py(this.placed,n,ge.from(u)),this.frontier[n].match=f,y&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,w=a;b<m;b++){let S=w.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),w=S.content}this.unplaced=y?t==0?Ee.empty:new Ee(Oy(s.content,t-1,1),t-1,m<0?s.openEnd:t-1):new Ee(Oy(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!a_(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),s=a_(t,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=a_(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Py(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let o=t.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,t.index(r));this.openFrontierNode(o.type,o.attrs,i)}return t}openFrontierNode(t,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=Py(this.placed,this.depth,ge.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ge.empty,!0);n.childCount&&(this.placed=Py(this.placed,this.frontier.length,n))}}function Oy(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Oy(e.firstChild.content,t-1,n)))}function Py(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Py(e.lastChild.content,t-1,n)))}function s_(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function CG(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,CG(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(ge.empty,!0)))),e.copy(r)}function a_(e,t,n,r,o){let i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!Bfe(n,i.content,s)?a:null}function Bfe(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function Ffe(e){return e.spec.defining||e.spec.definingForContent}function Vfe(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),i=e.doc.resolve(n);if(kG(o,i,r))return e.step(new zn(t,n,r));let s=TG(o,e.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let p=o.depth,m=o.pos-1;p>0;p--,m--){let y=o.node(p).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;s.indexOf(p)>-1?a=p:o.before(p)==m&&s.splice(1,0,-p)}let l=s.indexOf(a),c=[],u=r.openStart;for(let p=r.content,m=0;;m++){let y=p.firstChild;if(c.push(y),m==r.openStart)break;p=y.content}for(let p=u-1;p>=0;p--){let m=c[p],y=Ffe(m.type);if(y&&!m.sameMarkup(o.node(Math.abs(a)-1)))u=p;else if(y||!m.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let m=(p+u+1)%(r.openStart+1),y=c[m];if(y)for(let b=0;b<s.length;b++){let w=s[(b+l)%s.length],S=!0;w<0&&(S=!1,w=-w);let E=o.node(w-1),T=o.index(w-1);if(E.canReplaceWith(T,T,y.type,y.marks))return e.replace(o.before(w),S?i.after(w):n,new Ee(EG(r.content,0,r.openStart,m),m,r.openEnd))}}let f=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>f));p--){let m=s[p];m<0||(t=o.before(m),n=i.after(m))}}function EG(e,t,n,r,o){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(EG(i.content,t+1,n,r,i)))}if(t>r){let i=o.contentMatchAt(0),s=i.fillBefore(e).append(e);e=s.append(i.matchFragment(s).fillBefore(ge.empty,!0))}return e}function Hfe(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=Lfe(e.doc,t,r.type);o!=null&&(t=n=o)}e.replaceRange(t,n,new Ee(ge.from(r),0,0))}function Ufe(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=TG(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return e.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return e.delete(r.before(s),n);e.delete(t,n)}function TG(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let o=r;o>=0;o--){let i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(i==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==i-1)&&n.push(o)}return n}class Qp extends ri{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Gr.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return Gr.fromReplace(t,this.pos,this.pos+1,new Ee(ge.from(o),0,n.isLeaf?0:1))}getMap(){return xs.empty}invert(t){return new Qp(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Qp(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Qp(n.pos,n.attr,n.value)}}ri.jsonID("attr",Qp);class _0 extends ri{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Gr.ok(r)}getMap(){return xs.empty}invert(t){return new _0(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new _0(n.attr,n.value)}}ri.jsonID("docAttr",_0);let bm=class extends Error{};bm=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};bm.prototype=Object.create(Error.prototype);bm.prototype.constructor=bm;bm.prototype.name="TransformError";class Nd{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Qf}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new bm(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Ee.empty){let o=sC(this.doc,t,n,r);return o&&this.step(o),this}replaceWith(t,n,r){return this.replace(t,n,new Ee(ge.from(r),0,0))}delete(t,n){return this.replace(t,n,Ee.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return Vfe(this,t,n,r),this}replaceRangeWith(t,n,r){return Hfe(this,t,n,r),this}deleteRange(t,n){return Ufe(this,t,n),this}lift(t,n){return Afe(this,t,n),this}join(t,n=1){return jfe(this,t,n),this}wrap(t,n){return Rfe(this,t,n),this}setBlockType(t,n=t,r,o=null){return Ife(this,t,n,r,o),this}setNodeMarkup(t,n,r=null,o){return Pfe(this,t,n,r,o),this}setNodeAttribute(t,n,r){return this.step(new Qp(t,n,r)),this}setDocAttribute(t,n){return this.step(new _0(t,n)),this}addNodeMark(t,n){return this.step(new od(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Nn)n.isInSet(r.marks)&&this.step(new eh(t,n));else{let o=r.marks,i,s=[];for(;i=n.isInSet(o);)s.push(new eh(t,i)),o=i.removeFromSet(o);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(t,n=1,r){return Dfe(this,t,n,r),this}addMark(t,n,r){return Efe(this,t,n,r),this}removeMark(t,n,r){return Tfe(this,t,n,r),this}clearIncompatible(t,n,r){return wO(this,t,n,r),this}}const l_=Object.create(null);class rt{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new _G(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Ee.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=t.mapping.slice(i);t.replaceRange(u.map(l.pos),u.map(c.pos),a?Ee.empty:n),a==0&&x6(t,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=t.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);i?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),x6(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let o=t.parent.inlineContent?new Fe(t):Rp(t.node(0),t.parent,t.pos,t.index(),n,r);if(o)return o;for(let i=t.depth-1;i>=0;i--){let s=n<0?Rp(t.node(0),t.node(i),t.before(i+1),t.index(i),n,r):Rp(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,n,r);if(s)return s}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Bi(t.node(0))}static atStart(t){return Rp(t,t,0,0,1)||new Bi(t)}static atEnd(t){return Rp(t,t,t.content.size,t.childCount,-1)||new Bi(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=l_[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in l_)throw new RangeError("Duplicate use of selection JSON ID "+t);return l_[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Fe.between(this.$anchor,this.$head).getBookmark()}}rt.prototype.visible=!0;class _G{constructor(t,n){this.$from=t,this.$to=n}}let b6=!1;function v6(e){!b6&&!e.parent.inlineContent&&(b6=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Fe extends rt{constructor(t,n=t){v6(t),v6(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return rt.near(r);let o=t.resolve(n.map(this.anchor));return new Fe(o.parent.inlineContent?o:r,r)}replace(t,n=Ee.empty){if(super.replace(t,n),n==Ee.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Fe&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new aC(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Fe(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let o=t.resolve(n);return new this(o,r==n?o:t.resolve(r))}static between(t,n,r){let o=t.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=rt.findFrom(n,r,!0)||rt.findFrom(n,-r,!0);if(i)n=i.$head;else return rt.near(n,r)}return t.parent.inlineContent||(o==0?t=n:(t=(rt.findFrom(t,-r,!0)||rt.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=o<0&&(t=n))),new Fe(t,n)}}rt.jsonID("text",Fe);class aC{constructor(t,n){this.anchor=t,this.head=n}map(t){return new aC(t.map(this.anchor),t.map(this.head))}resolve(t){return Fe.between(t.resolve(this.anchor),t.resolve(this.head))}}class Ke extends rt{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=t.resolve(o);return r?rt.near(i):new Ke(i)}content(){return new Ee(ge.from(this.node),0,0)}eq(t){return t instanceof Ke&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new SO(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ke(t.resolve(n.anchor))}static create(t,n){return new Ke(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Ke.prototype.visible=!1;rt.jsonID("node",Ke);class SO{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new aC(r,r):new SO(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Ke.isSelectable(r)?new Ke(n):rt.near(n)}}class Bi extends rt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Ee.empty){if(n==Ee.empty){t.delete(0,t.doc.content.size);let r=rt.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Bi(t)}map(t){return new Bi(t)}eq(t){return t instanceof Bi}getBookmark(){return Gfe}}rt.jsonID("all",Bi);const Gfe={map(){return this},resolve(e){return new Bi(e)}};function Rp(e,t,n,r,o,i=!1){if(t.inlineContent)return Fe.create(e,n);for(let s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let a=t.child(s);if(a.isAtom){if(!i&&Ke.isSelectable(a))return Ke.create(e,n-(o<0?a.nodeSize:0))}else{let l=Rp(e,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function x6(e,t,n){let r=e.steps.length-1;if(r<t)return;let o=e.steps[r];if(!(o instanceof zn||o instanceof kr))return;let i=e.mapping.maps[r],s;i.forEach((a,l,c,u)=>{s==null&&(s=u)}),e.setSelection(rt.near(e.doc.resolve(s),n))}const w6=1,H1=2,S6=4;let qfe=class extends Nd{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|w6)&~H1,this.storedMarks=null,this}get selectionSet(){return(this.updated&w6)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=H1,this}ensureMarks(t){return Nn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&H1)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~H1,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Nn.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let o=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(o.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(t,i)),this.selection.empty||this.setSelection(rt.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=S6,this}get scrolledIntoView(){return(this.updated&S6)>0}};function k6(e,t){return!t||!e?e:e.bind(t)}class Dy{constructor(t,n,r){this.name=t,this.init=k6(n.init,r),this.apply=k6(n.apply,r)}}const Zfe=[new Dy("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Dy("selection",{init(e,t){return e.selection||rt.atStart(t.doc)},apply(e){return e.selection}}),new Dy("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Dy("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class c_{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Zfe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Dy(r.key,r.spec.state,r))})}}class _f{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",t),!o){o=[];for(let f=0;f<this.config.plugins.length;f++)o.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new _f(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}return n}get tr(){return new qfe(this)}static create(t){let n=new c_(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new _f(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r}reconfigure(t){let n=new c_(this.schema,t.plugins),r=n.fields,o=new _f(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(t,o)}return o}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=t[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let o=new c_(t.schema,t.plugins),i=new _f(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=Vc.fromJSON(t.schema,n.doc);else if(s.name=="selection")i.selection=rt.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=c.fromJSON.call(l,t,n[a],i);return}}i[s.name]=s.init(t,i)}}),i}}function AG(e,t,n){for(let r in e){let o=e[r];o instanceof Function?o=o.bind(t):r=="handleDOMEvents"&&(o=AG(o,t,{})),n[r]=o}return n}class kt{constructor(t){this.spec=t,this.props={},t.props&&AG(t.props,this,this.props),this.key=t.key?t.key.key:MG("plugin")}getState(t){return t[this.key]}}const u_=Object.create(null);function MG(e){return e in u_?e+"$"+ ++u_[e]:(u_[e]=0,e+"$")}class Ht{constructor(t="key"){this.key=MG(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Oo=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},vm=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let tN=null;const $c=function(e,t,n){let r=tN||(tN=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Wfe=function(){tN=null},th=function(e,t,n,r){return n&&(C6(e,t,n,r,-1)||C6(e,t,n,r,1))},Kfe=/^(img|br|input|textarea|hr)$/i;function C6(e,t,n,r,o){for(var i;;){if(e==n&&t==r)return!0;if(t==(o<0?0:ra(e))){let s=e.parentNode;if(!s||s.nodeType!=1||Fb(e)||Kfe.test(e.nodeName)||e.contentEditable=="false")return!1;t=Oo(e)+(o<0?0:1),e=s}else if(e.nodeType==1){let s=e.childNodes[t+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((i=s.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)t+=o;else return!1;else e=s,t=o<0?ra(e):0}else return!1}}function ra(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Yfe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=ra(e)}else if(e.parentNode&&!Fb(e))t=Oo(e),e=e.parentNode;else return null}}function Jfe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Fb(e))t=Oo(e)+1,e=e.parentNode;else return null}}function Xfe(e,t,n){for(let r=t==0,o=t==ra(e);r||o;){if(e==n)return!0;let i=Oo(e);if(e=e.parentNode,!e)return!1;r=r&&i==0,o=o&&i==ra(e)}}function Fb(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const lC=function(e){return e.focusNode&&th(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function xf(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Qfe(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function ehe(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(ra(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(ra(r.startContainer),r.startOffset)}}}const Wl=typeof navigator<"u"?navigator:null,E6=typeof document<"u"?document:null,Rd=Wl&&Wl.userAgent||"",nN=/Edge\/(\d+)/.exec(Rd),NG=/MSIE \d/.exec(Rd),rN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rd),Fi=!!(NG||rN||nN),cd=NG?document.documentMode:rN?+rN[1]:nN?+nN[1]:0,Ya=!Fi&&/gecko\/(\d+)/i.test(Rd);Ya&&+(/Firefox\/(\d+)/.exec(Rd)||[0,0])[1];const oN=!Fi&&/Chrome\/(\d+)/.exec(Rd),Yo=!!oN,RG=oN?+oN[1]:0,yi=!Fi&&!!Wl&&/Apple Computer/.test(Wl.vendor),xm=yi&&(/Mobile\/\w+/.test(Rd)||!!Wl&&Wl.maxTouchPoints>2),ta=xm||(Wl?/Mac/.test(Wl.platform):!1),the=Wl?/Win/.test(Wl.platform):!1,Lc=/Android \d/.test(Rd),Vb=!!E6&&"webkitFontSmoothing"in E6.documentElement.style,nhe=Vb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function rhe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Tc(e,t){return typeof e=="number"?e:e[t]}function ohe(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function T6(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(s.nodeType!=1){s=vm(s);continue}let a=s,l=a==i.body,c=l?rhe(i):ohe(a),u=0,f=0;if(t.top<c.top+Tc(r,"top")?f=-(c.top-t.top+Tc(o,"top")):t.bottom>c.bottom-Tc(r,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+Tc(o,"top")-c.top:t.bottom-c.bottom+Tc(o,"bottom")),t.left<c.left+Tc(r,"left")?u=-(c.left-t.left+Tc(o,"left")):t.right>c.right-Tc(r,"right")&&(u=t.right-c.right+Tc(o,"right")),u||f)if(l)i.defaultView.scrollBy(u,f);else{let m=a.scrollLeft,y=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let b=a.scrollLeft-m,w=a.scrollTop-y;t={left:t.left-b,top:t.top-w,right:t.right-b,bottom:t.bottom-w}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:vm(s)}}function ihe(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,o;for(let i=(t.left+t.right)/2,s=n+1;s<Math.min(innerHeight,t.bottom);s+=5){let a=e.root.elementFromPoint(i,s);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:IG(e.dom)}}function IG(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=vm(r));return t}function she({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;OG(n,r==0?0:r-t)}function OG(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:i}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let hp=null;function ahe(e){if(e.setActive)return e.setActive();if(hp)return e.focus(hp);let t=IG(e);e.focus(hp==null?{get preventScroll(){return hp={preventScroll:!0},!0}}:void 0),hp||(hp=!1,OG(t,0))}function PG(e,t){let n,r=2e8,o,i=0,s=t.top,a=t.top,l,c;for(let u=e.firstChild,f=0;u;u=u.nextSibling,f++){let p;if(u.nodeType==1)p=u.getClientRects();else if(u.nodeType==3)p=$c(u).getClientRects();else continue;for(let m=0;m<p.length;m++){let y=p[m];if(y.top<=s&&y.bottom>=a){s=Math.max(y.bottom,s),a=Math.min(y.top,a);let b=y.left>t.left?y.left-t.left:y.right<t.left?t.left-y.right:0;if(b<r){n=u,r=b,o=b&&n.nodeType==3?{left:y.right<t.left?y.right:y.left,top:t.top}:t,u.nodeType==1&&b&&(i=f+(t.left>=(y.left+y.right)/2?1:0));continue}}else y.top>t.top&&!l&&y.left<=t.left&&y.right>=t.left&&(l=u,c={left:Math.max(y.left,Math.min(y.right,t.left)),top:y.top});!n&&(t.left>=y.right&&t.top>=y.top||t.left>=y.left&&t.top>=y.bottom)&&(i=f+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?lhe(n,o):!n||r&&n.nodeType==1?{node:e,offset:i}:PG(n,o)}function lhe(e,t){let n=e.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let i=Vu(r,1);if(i.top!=i.bottom&&kO(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function kO(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function che(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function uhe(e,t,n){let{node:r,offset:o}=PG(t,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(r,o,i)}function dhe(e,t,n,r){let o=-1;for(let i=t,s=!1;i!=e.dom;){let a=e.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}function DG(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=e.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(kO(t,c))return DG(s,t,c)}}if((i=(i+1)%r)==o)break}return e}function fhe(e,t){let n=e.dom.ownerDocument,r,o=0,i=ehe(n,t.left,t.top);i&&({node:r,offset:o}=i);let s=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!s||!e.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=e.dom.getBoundingClientRect();if(!kO(t,c)||(s=DG(e.dom,t,c),!s))return null}if(yi)for(let c=s;r&&c;c=vm(c))c.draggable&&(r=void 0);if(s=che(s,t),r){if(Ya&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&o++}let c;Vb&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&o--,r==e.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=dhe(e,r,o,t))}a==null&&(a=uhe(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function _6(e){return e.top<e.bottom||e.left<e.right}function Vu(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(_6(r))return r}return Array.prototype.find.call(n,_6)||e.getBoundingClientRect()}const hhe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function $G(e,t,n){let{node:r,offset:o,atom:i}=e.docView.domFromPos(t,n<0?-1:1),s=Vb||Ya;if(r.nodeType==3)if(s&&(hhe.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Vu($c(r,o,o),n);if(Ya&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Vu($c(r,o-1,o-1),-1);if(c.top==l.top){let u=Vu($c(r,o,o+1),-1);if(u.top!=l.top)return by(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,by(Vu($c(r,l,c),u),u<0)}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==ra(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return d_(l.getBoundingClientRect(),!1)}if(i==null&&o<ra(r)){let l=r.childNodes[o];if(l.nodeType==1)return d_(l.getBoundingClientRect(),!0)}return d_(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==ra(r))){let l=r.childNodes[o-1],c=l.nodeType==3?$c(l,ra(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return by(Vu(c,1),!1)}if(i==null&&o<ra(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?$c(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return by(Vu(c,-1),!0)}return by(Vu(r.nodeType==3?$c(r):r,-n),n>=0)}function by(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function d_(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function jG(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function phe(e,t,n){let r=t.selection,o=n=="up"?r.$from:r.$to;return jG(e,t,()=>{let{node:i}=e.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=$G(e,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=$c(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const mhe=/[\u0590-\u08ac]/;function ghe(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=e.domSelection();return a?!mhe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:jG(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=e.domSelectionRange(),p=a.caretBidiLevel;a.modify("move",n,"character");let m=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:y,focusOffset:b}=e.domSelectionRange(),w=y&&!m.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==b;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return p!=null&&(a.caretBidiLevel=p),w}):r.pos==r.start()||r.pos==r.end()}let A6=null,M6=null,N6=!1;function yhe(e,t,n){return A6==t&&M6==n?N6:(A6=t,M6=n,N6=n=="up"||n=="down"?phe(e,t,n):ghe(e,t,n))}const da=0,R6=1,Af=2,Kl=3;class Hb{constructor(t,n,r,o){this.parent=t,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=da,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==t)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let i,s;if(t==this.contentDOM)i=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(t==this.contentDOM)i=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(t==this.dom&&this.contentDOM)o=n>Oo(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=t;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==t.childNodes.length)for(let i=t;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,o=t;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))r=!1;else return i}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let o=t;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==t&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let a=o.children[s];if(a.size){o=a;break}}return o}if(t<i)return o.descAt(t-r-o.border);r=i}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>t||s instanceof zG){o=t-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof LG&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Oo(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Oo(i.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&t<=c){let u=s+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=s;for(let f=a;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=Oo(p.dom)+1;break}t-=p.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=Oo(f.dom);break}n+=f.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:t,to:n,fromOffset:o,toOffset:i}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,o=!1){let i=Math.min(t,n),s=Math.max(t,n);for(let m=0,y=0;m<this.children.length;m++){let b=this.children[m],w=y+b.size;if(i>y&&s<w)return b.setSelection(t-y-b.border,n-y-b.border,r,o);y=w}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((Ya||yi)&&t==n){let{node:m,offset:y}=a;if(m.nodeType==3){if(f=!!(y&&m.nodeValue[y-1]==`
`),f&&y==m.nodeValue.length)for(let b=m,w;b;b=b.parentNode){if(w=b.nextSibling){w.nodeName=="BR"&&(a=l={node:w.parentNode,offset:Oo(w)+1});break}let S=b.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let b=m.childNodes[y-1];f=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(Ya&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(o=!0)}if(!(o||f&&yi)&&th(a.node,a.offset,u.anchorNode,u.anchorOffset)&&th(l.node,l.offset,u.focusNode,u.focusOffset))return;let p=!1;if((c.extend||t==n)&&!f){c.collapse(a.node,a.offset);try{t!=n&&c.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(t>n){let y=a;a=l,l=y}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?t<=s&&n>=r:t<s&&n>r){let a=r+i.border,l=s-i.border;if(t>=a&&n<=l){this.dirty=t==r||n==s?Af:R6,t==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Kl:i.markDirty(t-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Af:Kl}r=s}this.dirty=Af}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Af:R6;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class LG extends Hb{constructor(t,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(t){return this.dirty==da&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class bhe extends Hb{constructor(t,n,r,o){super(t,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class nh extends Hb{constructor(t,n,r,o,i){super(t,[],r,o),this.mark=n,this.spec=i}static create(t,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=iu.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new nh(t,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Kl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Kl&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=da){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=da}}slice(t,n,r){let o=nh.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=sN(i,n,s,r)),t>0&&(i=sN(i,0,t,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ud extends Hb{constructor(t,n,r,o,i,s,a,l,c){super(t,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(t,n,r,o,i,s){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=iu.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let p=u;return u=VG(u,r,n),c?l=new vhe(t,n,r,o,u,f||null,p,c,i,s+1):n.isText?new cC(t,n,r,o,u,p,i):new ud(t,n,r,o,u,f||null,p,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>ge.empty)}return t}matchesNode(t,n,r){return this.dirty==da&&t.eq(this.node)&&jw(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,o=n,i=t.composing?this.localCompositionInfo(t,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new whe(this,s&&s.node,t);Che(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?Nn.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,o)},(c,u,f,p)=>{l.syncToMarks(c.marks,r,t);let m;l.findNodeMatch(c,u,f,p)||a&&t.state.selection.from>o&&t.state.selection.to<o+c.nodeSize&&(m=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,f,m,t)||l.updateNextNode(c,u,f,t,p,o)||l.addNode(c,u,f,t,o),o+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Af)&&(s&&this.protectLocalComposition(t,s),BG(this.contentDOM,this.children,t),xm&&Ehe(this.dom))}localCompositionInfo(t,n){let{from:r,to:o}=t.state.selection;if(!(t.state.selection instanceof Fe)||r<n||o>n+this.node.content.size)return null;let i=t.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=The(this.node.content,s,r-n,o-n);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new bhe(this,i,n,o);t.input.compositionNodes.push(s),this.children=sN(this.children,r,r+o.length,t,s)}update(t,n,r,o){return this.dirty==Kl||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,o),!0)}updateInner(t,n,r,o){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=da}updateOuterDeco(t){if(jw(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=FG(this.dom,this.nodeDOM,iN(this.outerDeco,this.node,n),iN(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function I6(e,t,n,r,o){VG(r,t,e);let i=new ud(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class cC extends ud{constructor(t,n,r,o,i,s,a){super(t,n,r,o,i,null,s,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,o){return this.dirty==Kl||this.dirty!=da&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=da||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=t,this.dirty=da,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let o=this.node.cut(t,n),i=document.createTextNode(o.text);return new cC(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Kl)}get domAtom(){return!1}isText(t){return this.node.text==t}}class zG extends Hb{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==da&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class vhe extends ud{constructor(t,n,r,o,i,s,a,l,c,u){super(t,n,r,o,i,s,a,c,u),this.spec=l}update(t,n,r,o){if(this.dirty==Kl)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function BG(e,t,n){let r=e.firstChild,o=!1;for(let i=0;i<t.length;i++){let s=t[i],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=O6(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(s instanceof nh){let l=r?r.previousSibling:e.lastChild;BG(s.contentDOM,s.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=O6(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const Yy=function(e){e&&(this.nodeName=e)};Yy.prototype=Object.create(null);const Mf=[new Yy];function iN(e,t,n){if(e.length==0)return Mf;let r=n?Mf[0]:new Yy,o=[r];for(let i=0;i<e.length;i++){let s=e[i].type.attrs;if(s){s.nodeName&&o.push(r=new Yy(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new Yy(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function FG(e,t,n,r){if(n==Mf&&r==Mf)return t;let o=t;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=e&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Mf[0]),o=l}xhe(o,a||Mf[0],s)}return o}function xhe(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&e.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&e.classList.add(o[i]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(t.style);)e.style.removeProperty(o[1])}n.style&&(e.style.cssText+=n.style)}}function VG(e,t,n){return FG(e,e,Mf,iN(t,n,e.nodeType!=1))}function jw(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function O6(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class whe{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=She(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,t.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&t[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=da,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=nh.create(this.top,t[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(t,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(t,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(t,n,r,o,i){let s=this.top.children[o];return s.dirty==Kl&&s.dom==s.contentDOM&&(s.dirty=Af),s.update(t,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}t=n}}updateNextNode(t,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ud){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,f,p=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=Kl&&jw(n,l.outerDeco));if(!p&&l.update(t,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,t,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Af,f.updateChildren(o,s+1),f.dirty=da),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,o,i,s){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!jw(r,t.outerDeco)||!o.eq(t.innerDeco))return null;let a=ud.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,o,i){let s=ud.create(this.top,t,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(t)&&(t==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new LG(this.top,t,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof nh;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof cC)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((yi||Yo)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new zG(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function She(e,t){let n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof nh)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function khe(e,t){return e.type.side-t.type.side}function Che(e,t,n,r){let o=t.locals(e),i=0;if(o.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);r(u,o,t.forChild(i,u),c),i+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,f;for(;s<o.length&&o[s].to==i;){let w=o[s++];w.widget&&(u?(f||(f=[u])).push(w):u=w)}if(u)if(f){f.sort(khe);for(let w=0;w<f.length;w++)n(f[w],c,!!l)}else n(u,c,!!l);let p,m;if(l)m=-1,p=l,l=null;else if(c<e.childCount)m=c,p=e.child(c++);else break;for(let w=0;w<a.length;w++)a[w].to<=i&&a.splice(w--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let y=i+p.nodeSize;if(p.isText){let w=y;s<o.length&&o[s].from<w&&(w=o[s].from);for(let S=0;S<a.length;S++)a[S].to<w&&(w=a[S].to);w<y&&(l=p.cut(w-i),p=p.cut(0,w-i),y=w,m=-1)}else for(;s<o.length&&o[s].to<y;)s++;let b=p.isInline&&!p.isLeaf?a.filter(w=>!w.inline):a.slice();r(p,b,t.forChild(i,p),m),i=y}}function Ehe(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function The(e,t,n,r){for(let o=0,i=0;o<e.childCount&&i<=r;){let s=e.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<e.childCount;){let c=e.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let c=a<r?l.lastIndexOf(t,r-a-1):-1;if(c>=0&&c+t.length+a>=n)return a+c;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function sN(e,t,n,r,o){let i=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function CO(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(lC(n)){for(l=s;o&&!o.node;)o=o.parent;let f=o.node;if(o&&f.isAtom&&Ke.isSelectable(f)&&o.parent&&!(f.isInline&&Xfe(n.focusNode,n.focusOffset,o.dom))){let p=o.posBefore;c=new Ke(s==p?a:r.resolve(p))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,p=s;for(let m=0;m<n.rangeCount;m++){let y=n.getRangeAt(m);f=Math.min(f,e.docView.posFromDOM(y.startContainer,y.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(f<0)return null;[l,s]=p==e.state.selection.anchor?[p,f]:[f,p],a=r.resolve(s)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<a.pos&&!i?1:-1;c=EO(e,u,a,f)}return c}function HG(e){return e.editable?e.hasFocus():GG(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Uc(e,t=!1){let n=e.state.selection;if(UG(e,n),!!HG(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Yo){let r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&th(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Ahe(e);else{let{anchor:r,head:o}=n,i,s;P6&&!(n instanceof Fe)&&(n.$from.parent.inlineContent||(i=D6(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=D6(e,n.to))),e.docView.setSelection(r,o,e,t),P6&&(i&&$6(i),s&&$6(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_he(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const P6=yi||Yo&&RG<63;function D6(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(yi&&o&&o.contentEditable=="false")return f_(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return f_(o);if(i)return f_(i)}}function f_(e){return e.contentEditable="true",yi&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function $6(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function _he(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!HG(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Ahe(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Oo(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&Fi&&cd<=11&&(r.disabled=!0,r.disabled=!1)}function UG(e,t){if(t instanceof Ke){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(j6(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else j6(e)}function j6(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function EO(e,t,n,r){return e.someProp("createSelectionBetween",o=>o(e,t,n))||Fe.between(t,n,r)}function L6(e){return e.editable&&!e.hasFocus()?!1:GG(e)}function GG(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Mhe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return th(t.node,t.offset,n.anchorNode,n.anchorOffset)}function aN(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&rt.findFrom(i,t)}function Zu(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function z6(e,t,n){let r=e.state.selection;if(r instanceof Fe)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=e.state.doc.resolve(o.pos+i.nodeSize*(t<0?-1:1));return Zu(e,new Fe(r.$anchor,s))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let o=aN(e.state,t);return o&&o instanceof Ke?Zu(e,o):!1}else if(!(ta&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=t<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=e.docView.descAt(a))&&!s.contentDOM?Ke.isSelectable(i)?Zu(e,new Ke(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):Vb?Zu(e,new Fe(e.state.doc.resolve(t<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ke&&r.node.isInline)return Zu(e,new Fe(t>0?r.$to:r.$from));{let o=aN(e.state,t);return o?Zu(e,o):!1}}}function Lw(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Jy(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function pp(e,t){return t<0?Nhe(e):Rhe(e)}function Nhe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=!1;for(Ya&&n.nodeType==1&&r<Lw(n)&&Jy(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Jy(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(qG(n))break;{let a=n.previousSibling;for(;a&&Jy(a,-1);)o=n.parentNode,i=Oo(a),a=a.previousSibling;if(a)n=a,r=Lw(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?lN(e,n,r):o&&lN(e,o,i)}function Rhe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o=Lw(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Jy(a,1))i=n,s=++r;else break}else{if(qG(n))break;{let a=n.nextSibling;for(;a&&Jy(a,1);)i=a.parentNode,s=Oo(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Lw(n);else{if(n=n.parentNode,n==e.dom)break;r=o=0}}}i&&lN(e,i,s)}function qG(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Ihe(e,t){for(;e&&t==e.childNodes.length&&!Fb(e);)t=Oo(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function Ohe(e,t){for(;e&&!t&&!Fb(e);)t=Oo(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function lN(e,t,n){if(t.nodeType!=3){let i,s;(s=Ihe(t,n))?(t=s,n=0):(i=Ohe(t,n))&&(t=i,n=i.nodeValue.length)}let r=e.domSelection();if(!r)return;if(lC(r)){let i=document.createRange();i.setEnd(t,n),i.setStart(t,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout(()=>{e.state==o&&Uc(e)},50)}function B6(e,t){let n=e.state.doc.resolve(t);if(!(Yo||the)&&n.parent.inlineContent){let o=e.coordsAtPos(t);if(t>n.start()){let i=e.coordsAtPos(t-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(t<n.end()){let i=e.coordsAtPos(t+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function F6(e,t,n){let r=e.state.selection;if(r instanceof Fe&&!r.empty||n.indexOf("s")>-1||ta&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=aN(e.state,t);if(s&&s instanceof Ke)return Zu(e,s)}if(!o.parent.inlineContent){let s=t<0?o:i,a=r instanceof Bi?rt.near(s,t):rt.findFrom(s,t);return a?Zu(e,a):!1}return!1}function V6(e,t){if(!(e.state.selection instanceof Fe))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=e.state.tr;return t<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),e.dispatch(s),!0}return!1}function H6(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Phe(e){if(!yi||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;H6(e,r,"true"),setTimeout(()=>H6(e,r,"false"),20)}return!1}function Dhe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function $he(e,t){let n=t.keyCode,r=Dhe(t);if(n==8||ta&&n==72&&r=="c")return V6(e,-1)||pp(e,-1);if(n==46&&!t.shiftKey||ta&&n==68&&r=="c")return V6(e,1)||pp(e,1);if(n==13||n==27)return!0;if(n==37||ta&&n==66&&r=="c"){let o=n==37?B6(e,e.state.selection.from)=="ltr"?-1:1:-1;return z6(e,o,r)||pp(e,o)}else if(n==39||ta&&n==70&&r=="c"){let o=n==39?B6(e,e.state.selection.from)=="ltr"?1:-1:1;return z6(e,o,r)||pp(e,o)}else{if(n==38||ta&&n==80&&r=="c")return F6(e,-1,r)||pp(e,-1);if(n==40||ta&&n==78&&r=="c")return Phe(e)||F6(e,1,r)||pp(e,1);if(r==(ta?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function TO(e,t){e.someProp("transformCopied",m=>{t=m(t,e)});let n=[],{content:r,openStart:o,openEnd:i}=t;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let s=e.someProp("clipboardSerializer")||iu.fromSchema(e.state.schema),a=XG(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=JG[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let y=a.createElement(u[m]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=e.someProp("clipboardTextSerializer",m=>m(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:p,slice:t}}function ZG(e,t,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!t)return null;let l=t&&(r||i||!n);if(l){if(e.someProp("transformPastedText",p=>{t=p(t,i||r,e)}),i)return t?new Ee(ge.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Ee.empty;let f=e.someProp("clipboardTextParser",p=>p(t,o,r,e));if(f)a=f;else{let p=o.marks(),{schema:m}=e.state,y=iu.fromSchema(m);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(b=>{let w=s.appendChild(document.createElement("p"));b&&w.appendChild(y.serializeNode(m.text(b,p)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),s=Bhe(n),Vb&&Fhe(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Bl.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!jhe.test(p.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Vhe(U6(a,+u[1],+u[2]),u[4]);else if(a=Ee.maxOpen(Lhe(a.content,o),!0),a.openStart||a.openEnd){let f=0,p=0;for(let m=a.content.firstChild;f<a.openStart&&!m.type.spec.isolating;f++,m=m.firstChild);for(let m=a.content.lastChild;p<a.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);a=U6(a,f,p)}return e.someProp("transformPasted",f=>{a=f(a,e)}),a}const jhe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Lhe(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let o=t.node(n).contentMatchAt(t.index(n)),i,s=[];if(e.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&i.length&&KG(l,i,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=YG(s[s.length-1],i.length));let u=WG(a,l);s.push(u),o=o.matchType(u.type),i=l}}),s)return ge.from(s)}return e}function WG(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,ge.from(e));return e}function KG(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=KG(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(ge.from(WG(n,e,o+1))))}}function YG(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,YG(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(ge.empty,!0);return e.copy(n.append(r))}function cN(e,t,n,r,o,i){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(i=0),o<r-1&&(a=cN(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(ge.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function U6(e,t,n){return t<e.openStart&&(e=new Ee(cN(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Ee(cN(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const JG={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let G6=null;function XG(){return G6||(G6=document.implementation.createHTMLDocument("title"))}let h_=null;function zhe(e){let t=window.trustedTypes;return t?(h_||(h_=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),h_.createHTML(e)):e}function Bhe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=XG().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),o;if((o=r&&JG[r[1].toLowerCase()])&&(e=o.map(i=>"<"+i+">").join("")+e+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=zhe(e),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function Fhe(e){let t=e.querySelectorAll(Yo?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Vhe(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:o,openStart:i,openEnd:s}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=ge.from(l.create(r[a+1],o)),i++,s++}return new Ee(o,i,s)}const bi={},vi={},Hhe={touchstart:!0,touchmove:!0};class Uhe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ghe(e){for(let t in bi){let n=bi[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{Zhe(e,r)&&!_O(e,r)&&(e.editable||!(r.type in vi))&&n(e,r)},Hhe[t]?{passive:!0}:void 0)}yi&&e.dom.addEventListener("input",()=>null),uN(e)}function id(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function qhe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function uN(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>_O(e,r))})}function _O(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function Zhe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Whe(e,t){!_O(e,t)&&bi[t.type]&&(e.editable||!(t.type in vi))&&bi[t.type](e,t)}vi.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!eq(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Lc&&Yo&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),xm&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",o=>o(e,xf(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||$he(e,n)?n.preventDefault():id(e,"key")};vi.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};vi.keypress=(e,t)=>{let n=t;if(eq(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||ta&&n.metaKey)return;if(e.someProp("handleKeyPress",o=>o(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Fe)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),i=()=>e.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!e.someProp("handleTextInput",s=>s(e,r.$from.pos,r.$to.pos,o,i))&&e.dispatch(i()),n.preventDefault()}};function uC(e){return{left:e.clientX,top:e.clientY}}function Khe(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function AO(e,t,n,r,o){if(r==-1)return!1;let i=e.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,a=>s>i.depth?a(e,n,i.nodeAfter,i.before(s),o,!0):a(e,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function em(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function Yhe(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Ke.isSelectable(r)?(em(e,new Ke(n)),!0):!1}function Jhe(e,t){if(t==-1)return!1;let n=e.state.selection,r,o;n instanceof Ke&&(r=n.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(Ke.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(em(e,Ke.create(e.state.doc,o)),!0):!1}function Xhe(e,t,n,r,o){return AO(e,"handleClickOn",t,n,r)||e.someProp("handleClick",i=>i(e,t,r))||(o?Jhe(e,n):Yhe(e,n))}function Qhe(e,t,n,r){return AO(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",o=>o(e,t,r))}function epe(e,t,n,r){return AO(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",o=>o(e,t,r))||tpe(e,n,r)}function tpe(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(em(e,Fe.create(r,0,r.content.size)),!0):!1;let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)em(e,Fe.create(r,a+1,a+1+s.content.size));else if(Ke.isSelectable(s))em(e,Ke.create(r,a));else continue;return!0}}function MO(e){return zw(e)}const QG=ta?"metaKey":"ctrlKey";bi.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=MO(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&Khe(n,e.input.lastClick)&&!n[QG]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?i="doubleClick":e.input.lastClick.type=="doubleClick"&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=e.posAtCoords(uC(n));s&&(i=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new npe(e,s,n,!!r)):(i=="doubleClick"?Qhe:epe)(e,s.pos,s.inside,n)?n.preventDefault():id(e,"pointer"))};class npe{constructor(t,n,r,o){this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[QG],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=t.state.doc.nodeAt(n.inside),s=n.inside;else{let u=t.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const a=o?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=t.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof Ke&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ya&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),id(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Uc(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(uC(t))),this.updateAllowDefault(t),this.allowDefault||!n?id(this.view,"pointer"):Xhe(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||yi&&this.mightDrag&&!this.mightDrag.node.isAtom||Yo&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(em(this.view,rt.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):id(this.view,"pointer")}move(t){this.updateAllowDefault(t),id(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}bi.touchstart=e=>{e.input.lastTouch=Date.now(),MO(e),id(e,"pointer")};bi.touchmove=e=>{e.input.lastTouch=Date.now(),id(e,"pointer")};bi.contextmenu=e=>MO(e);function eq(e,t){return e.composing?!0:yi&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const rpe=Lc?5e3:-1;vi.compositionstart=vi.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Fe&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),zw(e,!0),e.markCursor=null;else if(zw(e,!t.selection.empty),Ya&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=e.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}e.input.composing=!0}tq(e,rpe)};vi.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,tq(e,20))};function tq(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>zw(e),t))}function nq(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=ipe());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ope(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Yfe(t.focusNode,t.focusOffset),r=Jfe(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function ipe(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function zw(e,t=!1){if(!(Lc&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),nq(e),t||e.docView&&e.docView.dirty){let n=CO(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function spe(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const A0=Fi&&cd<15||xm&&nhe<604;bi.copy=vi.cut=(e,t)=>{let n=t,r=e.state.selection,o=n.type=="cut";if(r.empty)return;let i=A0?null:n.clipboardData,s=r.content(),{dom:a,text:l}=TO(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):spe(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ape(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function lpe(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?M0(e,r.value,null,o,t):M0(e,r.textContent,r.innerHTML,o,t)},50)}function M0(e,t,n,r,o){let i=ZG(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,o,i||Ee.empty)))return!0;if(!i)return!1;let s=ape(i),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function rq(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}vi.paste=(e,t)=>{let n=t;if(e.composing&&!Lc)return;let r=A0?null:n.clipboardData,o=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&M0(e,rq(r),r.getData("text/html"),o,n)?n.preventDefault():lpe(e,n)};class oq{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const cpe=ta?"altKey":"ctrlKey";function iq(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[cpe]}bi.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=e.state.selection,i=o.empty?null:e.posAtCoords(uC(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof Ke?o.to-1:o.to))){if(r&&r.mightDrag)s=Ke.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(s=Ke.create(e.state.doc,f.posBefore))}}let a=(s||e.state.selection).content(),{dom:l,text:c,slice:u}=TO(e,a);(!n.dataTransfer.files.length||!Yo||RG>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(A0?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",A0||n.dataTransfer.setData("text/plain",c),e.dragging=new oq(u,iq(e,n),s)};bi.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};vi.dragover=vi.dragenter=(e,t)=>t.preventDefault();vi.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(uC(n));if(!o)return;let i=e.state.doc.resolve(o.pos),s=r&&r.slice;s?e.someProp("transformPasted",y=>{s=y(s,e)}):s=ZG(e,rq(n.dataTransfer),A0?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&iq(e,n));if(e.someProp("handleDrop",y=>y(e,n,s||Ee.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?SG(e.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=e.state.tr;if(a){let{node:y}=r;y?y.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=c.doc;if(f?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(p))return;let m=c.doc.resolve(u);if(f&&Ke.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Ke(m));else{let y=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((b,w,S,E)=>y=E),c.setSelection(EO(e,m,c.doc.resolve(y)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))};bi.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Uc(e)},20))};bi.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};bi.beforeinput=(e,t)=>{if(Yo&&Lc&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",i=>i(e,xf(8,"Backspace")))))return;let{$cursor:o}=e.state.selection;o&&o.pos>0&&e.dispatch(e.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let e in vi)bi[e]=vi[e];function N0(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Bw{constructor(t,n){this.toDOM=t,this.spec=n||Hf,this.side=this.spec.side||0}map(t,n,r,o){let{pos:i,deleted:s}=t.mapResult(n.from+o,this.side<0?-1:1);return s?null:new Zt(i-r,i-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Bw&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&N0(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class dd{constructor(t,n){this.attrs=t,this.spec=n||Hf}map(t,n,r,o){let i=t.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=t.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Zt(i,s,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof dd&&N0(this.attrs,t.attrs)&&N0(this.spec,t.spec)}static is(t){return t.type instanceof dd}destroy(){}}class NO{constructor(t,n){this.attrs=t,this.spec=n||Hf}map(t,n,r,o){let i=t.mapResult(n.from+o,1);if(i.deleted)return null;let s=t.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Zt(i.pos-r,s.pos-r,this)}valid(t,n){let{index:r,offset:o}=t.content.findIndex(n.from),i;return o==n.from&&!(i=t.child(r)).isText&&o+i.nodeSize==n.to}eq(t){return this==t||t instanceof NO&&N0(this.attrs,t.attrs)&&N0(this.spec,t.spec)}destroy(){}}class Zt{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Zt(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Zt(t,t,new Bw(n,r))}static inline(t,n,r,o){return new Zt(t,n,new dd(r,o))}static node(t,n,r,o){return new Zt(t,n,new NO(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof dd}get widget(){return this.type instanceof Bw}}const Ip=[],Hf={};class Rt{constructor(t,n){this.local=t.length?t:Ip,this.children=n.length?n:Ip}static create(t,n){return n.length?Fw(n,t,0,Hf):Zo}find(t,n,r){let o=[];return this.findInner(t??0,n??1e9,o,0,r),o}findInner(t,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=t&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>t){let a=this.children[s]+1;this.children[s+2].findInner(t-a,n-a,r,o+a,i)}}map(t,n,r){return this==Zo||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Hf)}mapInner(t,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?upe(this.children,s||[],t,n,r,o,i):s?new Rt(s.sort(Uf),Ip):Zo}add(t,n){return n.length?this==Zo?Rt.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let o,i=0;t.forEach((a,l)=>{let c=l+r,u;if(u=aq(n,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,u,c+1):o.splice(i,0,l,l+a.nodeSize,Fw(u,a,c+1,Hf)),i+=3}});let s=sq(i?lq(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new Rt(s.length?this.local.concat(s).sort(Uf):this.local,o||this.children)}remove(t){return t.length==0||this==Zo?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let u=0,f;u<t.length;u++)(f=t[u])&&f.from>a&&f.to<l&&(t[u]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=Zo?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<t.length;i++)if(s=t[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Rt(o,r):Zo}forChild(t,n){if(this==Zo)return this;if(n.isLeaf)return Rt.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let i=t+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof dd){let c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new Rt(o.sort(Uf),Ip);return r?new Ju([a,r]):a}return r||Zo}eq(t){if(this==t)return!0;if(!(t instanceof Rt)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return RO(this.localsInner(t))}localsInner(t){if(this==Zo)return Ip;if(t.inlineContent||!this.local.some(dd.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof dd||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Rt.empty=new Rt([],[]);Rt.removeOverlap=RO;const Zo=Rt.empty;class Ju{constructor(t){this.members=t}map(t,n){const r=this.members.map(o=>o.map(t,n,Hf));return Ju.from(r)}forChild(t,n){if(n.isLeaf)return Rt.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(t,n);i!=Zo&&(i instanceof Ju?r=r.concat(i.members):r.push(i))}return Ju.from(r)}eq(t){if(!(t instanceof Ju)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(t);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?RO(r?n:n.sort(Uf)):Ip}static from(t){switch(t.length){case 0:return Zo;case 1:return t[0];default:return new Ju(t.every(n=>n instanceof Rt)?t:t.reduce((n,r)=>n.concat(r instanceof Rt?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function upe(e,t,n,r,o,i,s){let a=e.slice();for(let c=0,u=i;c<n.maps.length;c++){let f=0;n.maps[c].forEach((p,m,y,b)=>{let w=b-y-(m-p);for(let S=0;S<a.length;S+=3){let E=a[S+1];if(E<0||p>E+u-f)continue;let T=a[S]+u-f;m>=T?a[S+1]=p<=T?-2:-1:p>=u&&w&&(a[S]+=w,a[S+1]+=w)}f+=w}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(e[c]+i),f=u-o;if(f<0||f>=r.content.size){l=!0;continue}let p=n.map(e[c+1]+i,-1),m=p-o,{index:y,offset:b}=r.content.findIndex(f),w=r.maybeChild(y);if(w&&b==f&&b+w.nodeSize==m){let S=a[c+2].mapInner(n,w,u+1,e[c]+i+1,s);S!=Zo?(a[c]=f,a[c+1]=m,a[c+2]=S):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=dpe(a,e,t,n,o,i,s),u=Fw(c,r,0,s);t=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,p=0;f<u.children.length;f+=3){let m=u.children[f];for(;p<a.length&&a[p]<m;)p+=3;a.splice(p,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Rt(t.sort(Uf),a)}function sq(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new Zt(o.from+t,o.to+t,o.type))}return n}function dpe(e,t,n,r,o,i,s){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,o,c);f?n.push(f):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+i+1);return n}function aq(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i=0,s;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function lq(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Fw(e,t,n,r){let o=[],i=!1;t.forEach((a,l)=>{let c=aq(e,a,l+n);if(c){i=!0;let u=Fw(c,a,n+l+1,r);u!=Zo&&o.push(l,l+a.nodeSize,u)}});let s=sq(i?lq(e):e,-n).sort(Uf);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Rt(s,o):Zo}function Uf(e,t){return e.from-t.from||e.to-t.to}function RO(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from==r.from){i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),q6(t,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),q6(t,o,r.copy(i.from,r.to)));break}}}return t}function q6(e,t,n){for(;t<e.length&&Uf(n,e[t])>0;)t++;e.splice(t,0,n)}function p_(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Zo&&t.push(r)}),e.cursorWrapper&&t.push(Rt.create(e.state.doc,[e.cursorWrapper.deco])),Ju.from(t)}const fpe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},hpe=Fi&&cd<=11;class ppe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class mpe{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ppe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Fi&&cd<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),hpe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fpe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(L6(this.view)){if(this.suppressingSelectionUpdates)return Uc(this.view);if(Fi&&cd<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&th(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let i=t.focusNode;i;i=vm(i))n.add(i);for(let i=t.anchorNode;i;i=vm(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&L6(t)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(i=i<0?f.from:Math.min(f.from,i),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if(Ya&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,p]=u;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of u){let m=p.parentNode;m&&m.nodeName=="LI"&&(!f||bpe(t,f)!=m)&&p.remove()}}}let c=null;i<0&&o&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&lC(r)&&(c=CO(t))&&c.eq(rt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Uc(t),this.currentSelection.set(r),t.scrollToSelection()):(i>-1||o)&&(i>-1&&(t.docView.markDirty(i,s),gpe(t)),this.handleDOMChange(i,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Uc(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let f=t.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let o=t.previousSibling,i=t.nextSibling;if(Fi&&cd<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:f,nextSibling:p}=t.addedNodes[u];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(o=f),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p)}let s=o&&o.parentNode==t.target?Oo(o)+1:0,a=r.localPosFromDOM(t.target,s,-1),l=i&&i.parentNode==t.target?Oo(i):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let Z6=new WeakMap,W6=!1;function gpe(e){if(!Z6.has(e)&&(Z6.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Ya,W6)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),W6=!0}}function K6(e,t){let n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return th(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function ype(e,t){if(t.getComposedRanges){let o=t.getComposedRanges(e.root)[0];if(o)return K6(e,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?K6(e,n):null}function bpe(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function vpe(e,t,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],lC(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Yo&&e.input.lastKeyCode===8)for(let w=i;w>o;w--){let S=r.childNodes[w-1],E=S.pmViewDesc;if(S.nodeName=="BR"&&!E){i=w;break}if(!E||E.size)break}let f=e.state.doc,p=e.someProp("domParser")||Bl.fromSchema(e.state.schema),m=f.resolve(s),y=null,b=p.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:i,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:xpe,context:m});if(c&&c[0].pos!=null){let w=c[0].pos,S=c[1]&&c[1].pos;S==null&&(S=w),y={anchor:w+s,head:S+s}}return{doc:b,sel:y,from:s,to:a}}function xpe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(yi&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||yi&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const wpe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Spe(e,t,n,r,o){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let I=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,L=CO(e,I);if(L&&!e.state.selection.eq(L)){if(Yo&&Lc&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",B=>B(e,xf(13,"Enter"))))return;let $=e.state.tr.setSelection(L);I=="pointer"?$.setMeta("pointer",!0):I=="key"&&$.scrollIntoView(),i&&$.setMeta("composition",i),e.dispatch($)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,c=vpe(e,t,n),u=e.state.doc,f=u.slice(c.from,c.to),p,m;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(p=e.state.selection.to,m="end"):(p=e.state.selection.from,m="start"),e.input.lastKeyCode=null;let y=Epe(f.content,c.doc.content,c.from,p,m);if(y&&e.input.domChangeCount++,(xm&&e.input.lastIOSEnter>Date.now()-225||Lc)&&o.some(I=>I.nodeType==1&&!wpe.test(I.nodeName))&&(!y||y.endA>=y.endB)&&e.someProp("handleKeyDown",I=>I(e,xf(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof Fe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let I=Y6(e,e.state.doc,c.sel);if(I&&!I.eq(e.state.selection)){let L=e.state.tr.setSelection(I);i&&L.setMeta("composition",i),e.dispatch(L)}}return}e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof Fe&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),Fi&&cd<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)==" "&&(y.start--,y.endA--,y.endB--);let b=c.doc.resolveNoCache(y.start-c.from),w=c.doc.resolveNoCache(y.endB-c.from),S=u.resolve(y.start),E=b.sameParent(w)&&b.parent.inlineContent&&S.end()>=y.endA,T;if((xm&&e.input.lastIOSEnter>Date.now()-225&&(!E||o.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!E&&b.pos<c.doc.content.size&&(!b.sameParent(w)||!b.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(b.pos,w.pos,"",""))&&(T=rt.findFrom(c.doc.resolve(b.pos+1),1,!0))&&T.head>b.pos)&&e.someProp("handleKeyDown",I=>I(e,xf(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&Cpe(u,y.start,y.endA,b,w)&&e.someProp("handleKeyDown",I=>I(e,xf(8,"Backspace")))){Lc&&Yo&&e.domObserver.suppressSelectionUpdates();return}Yo&&y.endB==y.start&&(e.input.lastChromeDelete=Date.now()),Lc&&!E&&b.start()!=w.start()&&w.parentOffset==0&&b.depth==w.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,w=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(I){return I(e,xf(13,"Enter"))})},20));let A=y.start,M=y.endA,R=I=>{let L=I||e.state.tr.replace(A,M,c.doc.slice(y.start-c.from,y.endB-c.from));if(c.sel){let $=Y6(e,L.doc,c.sel);$&&!(Yo&&e.composing&&$.empty&&(y.start!=y.endB||e.input.lastChromeDelete<Date.now()-100)&&($.head==A||$.head==L.mapping.map(M)-1)||Fi&&$.empty&&$.head==A)&&L.setSelection($)}return i&&L.setMeta("composition",i),L.scrollIntoView()},O;if(E){if(b.pos==w.pos){Fi&&cd<=11&&b.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Uc(e),20));let I=R(e.state.tr.delete(A,M)),L=u.resolve(y.start).marksAcross(u.resolve(y.endA));L&&I.ensureMarks(L),e.dispatch(I)}else if(y.endA==y.endB&&(O=kpe(b.parent.content.cut(b.parentOffset,w.parentOffset),S.parent.content.cut(S.parentOffset,y.endA-S.start())))){let I=R(e.state.tr);O.type=="add"?I.addMark(A,M,O.mark):I.removeMark(A,M,O.mark),e.dispatch(I)}else if(b.parent.child(b.index()).isText&&b.index()==w.index()-(w.textOffset?0:1)){let I=b.parent.textBetween(b.parentOffset,w.parentOffset),L=()=>R(e.state.tr.insertText(I,A,M));e.someProp("handleTextInput",$=>$(e,A,M,I,L))||e.dispatch(L())}}else e.dispatch(R())}function Y6(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:EO(e,t.resolve(n.anchor),t.resolve(n.head))}function kpe(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,o=n,i=r,s,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(ge.from(c).eq(e))return{mark:a,type:s}}function Cpe(e,t,n,r,o){if(n-t<=o.pos-r.pos||m_(r,!0,!1)<o.pos)return!1;let i=e.resolve(t);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==t+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(m_(i,!0,!0));return!s.parent.isTextblock||s.pos>n||m_(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function m_(e,t,n){let r=e.depth,o=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n){let i=e.node(r).maybeChild(e.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function Epe(e,t,n,r,o){let i=e.findDiffStart(t,n);if(i==null)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&e.size<t.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<t.size&&J6(t.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<e.size&&J6(e.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function J6(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class IO{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Uhe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(n9),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=e9(this),Q6(this),this.nodeViews=t9(this),this.docView=I6(this.state.doc,X6(this),p_(this),this.dom,this),this.domObserver=new mpe(this,(r,o,i,s)=>Spe(this,r,o,i,s)),this.domObserver.start(),Ghe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&uN(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(n9),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let o=this.state,i=!1,s=!1;t.storedMarks&&this.composing&&(nq(this),s=!0),this.state=t;let a=o.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=t9(this);_pe(m,this.nodeViews)&&(this.nodeViews=m,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&uN(this),this.editable=e9(this),Q6(this);let l=p_(this),c=X6(this),u=o.plugins!=t.plugins&&!o.doc.eq(t.doc)?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(o.selection))&&(s=!0);let p=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&ihe(this);if(s){this.domObserver.stop();let m=f&&(Fi||Yo)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&Tpe(o.selection,t.selection);if(f){let y=Yo?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ope(this)),(i||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=I6(t.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Mhe(this))?Uc(this,m):(UG(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():p&&she(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ke){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&T6(this,n.getBoundingClientRect(),t)}else T6(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new oq(t.slice,t.move,o<0?void 0:Ke.create(this.state.doc,o))}someProp(t,n){let r=this._props&&this._props[t],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[t];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[t];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(Fi){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&ahe(this.dom),Uc(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return fhe(this,t)}coordsAtPos(t,n=1){return $G(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let o=this.docView.posFromDOM(t,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(t,n){return yhe(this,n||this.state,t)}pasteHTML(t,n){return M0(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return M0(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return TO(this,t)}destroy(){this.docView&&(qhe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],p_(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Wfe())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Whe(this,t)}domSelectionRange(){let t=this.domSelection();return t?yi&&this.root.nodeType===11&&Qfe(this.dom.ownerDocument)==this.dom&&ype(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}IO.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function X6(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Zt.node(0,e.state.doc.content.size,t)]}function Q6(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Zt.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function e9(e){return!e.someProp("editable",t=>t(e.state)===!1)}function Tpe(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function t9(e){let t=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=r[o])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function _pe(e,t){let n=0,r=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let o in t)r++;return n!=r}function n9(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var hd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vw={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ape=typeof navigator<"u"&&/Mac/.test(navigator.platform),Mpe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Po=0;Po<10;Po++)hd[48+Po]=hd[96+Po]=String(Po);for(var Po=1;Po<=24;Po++)hd[Po+111]="F"+Po;for(var Po=65;Po<=90;Po++)hd[Po]=String.fromCharCode(Po+32),Vw[Po]=String.fromCharCode(Po);for(var g_ in hd)Vw.hasOwnProperty(g_)||(Vw[g_]=hd[g_]);function Npe(e){var t=Ape&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Mpe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Vw:hd)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Rpe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Ipe=typeof navigator<"u"&&/Win/.test(navigator.platform);function Ope(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Rpe?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function Ppe(e){let t=Object.create(null);for(let n in e)t[Ope(n)]=e[n];return t}function y_(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Dpe(e){return new kt({props:{handleKeyDown:OO(e)}})}function OO(e){let t=Ppe(e);return function(n,r){let o=Npe(r),i,s=t[y_(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=t[y_(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Ipe&&r.ctrlKey&&r.altKey)&&(i=hd[r.keyCode])&&i!=o){let a=t[y_(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const PO=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function cq(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const uq=(e,t,n)=>{let r=cq(e,n);if(!r)return!1;let o=DO(r);if(!o){let s=r.blockRange(),a=s&&Gm(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(vq(e,o,t,-1))return!0;if(r.parent.content.size==0&&(wm(i,"end")||Ke.isSelectable(i)))for(let s=r.depth;;s--){let a=sC(e.doc,r.before(s),r.after(s),Ee.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(wm(i,"end")?rt.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):Ke.create(l.doc,o.pos-i.nodeSize)),t(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(t&&t(e.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},$pe=(e,t,n)=>{let r=cq(e,n);if(!r)return!1;let o=DO(r);return o?dq(e,o,t):!1},jpe=(e,t,n)=>{let r=hq(e,n);if(!r)return!1;let o=$O(r);return o?dq(e,o,t):!1};function dq(e,t,n){let r=t.nodeBefore,o=r,i=t.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let s=t.nodeAfter,a=s,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=sC(e.doc,i,l,Ee.empty);if(!c||c.from!=i||c instanceof zn&&c.slice.size>=l-i)return!1;if(n){let u=e.tr.step(c);u.setSelection(Fe.create(u.doc,i)),n(u.scrollIntoView())}return!0}function wm(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const fq=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=DO(r)}let s=i&&i.nodeBefore;return!s||!Ke.isSelectable(s)?!1:(t&&t(e.tr.setSelection(Ke.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function DO(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function hq(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const pq=(e,t,n)=>{let r=hq(e,n);if(!r)return!1;let o=$O(r);if(!o)return!1;let i=o.nodeAfter;if(vq(e,o,t,1))return!0;if(r.parent.content.size==0&&(wm(i,"start")||Ke.isSelectable(i))){let s=sC(e.doc,r.before(),r.after(),Ee.empty);if(s&&s.slice.size<s.to-s.from){if(t){let a=e.tr.step(s);a.setSelection(wm(i,"start")?rt.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):Ke.create(a.doc,a.mapping.map(o.pos))),t(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},mq=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=$O(r)}let s=i&&i.nodeAfter;return!s||!Ke.isSelectable(s)?!1:(t&&t(e.tr.setSelection(Ke.create(e.doc,i.pos)).scrollIntoView()),!0)};function $O(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Lpe=(e,t)=>{let n=e.selection,r=n instanceof Ke,o;if(r){if(n.node.isTextblock||!vh(e.doc,n.from))return!1;o=n.from}else if(o=iC(e.doc,n.from,-1),o==null)return!1;if(t){let i=e.tr.join(o);r&&i.setSelection(Ke.create(i.doc,o-e.doc.resolve(o).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0},zpe=(e,t)=>{let n=e.selection,r;if(n instanceof Ke){if(n.node.isTextblock||!vh(e.doc,n.to))return!1;r=n.to}else if(r=iC(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},Bpe=(e,t)=>{let{$from:n,$to:r}=e.selection,o=n.blockRange(r),i=o&&Gm(o);return i==null?!1:(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)},gq=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function jO(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Fpe=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=jO(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,s.createAndFill());l.setSelection(rt.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},yq=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof Bi||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=jO(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.insert(s,i.createAndFill());a.setSelection(Fe.create(a.doc,s+1)),t(a.scrollIntoView())}return!0},bq=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Hc(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Gm(r);return o==null?!1:(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)};function Vpe(e){return(t,n)=>{let{$from:r,$to:o}=t.selection;if(t.selection instanceof Ke&&t.selection.node.isBlock)return!r.parentOffset||!Hc(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,l=!1,c=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){l=r.end(m)==r.pos+(r.depth-m),c=r.start(m)==r.pos-(r.depth-m),a=jO(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),i.unshift(l&&a?{type:a}:null),s=m;break}else{if(m==1)return!1;i.unshift(null)}let u=t.tr;(t.selection instanceof Fe||t.selection instanceof Bi)&&u.deleteSelection();let f=u.mapping.map(r.pos),p=Hc(u.doc,f,i.length,i);if(p||(i[0]=a?{type:a}:null,p=Hc(u.doc,f,i.length,i)),!p)return!1;if(u.split(f,i.length,i),!l&&c&&r.node(s).type!=a){let m=u.mapping.map(r.before(s)),y=u.doc.resolve(m);a&&r.node(s-1).canReplaceWith(y.index(),y.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(s)),a)}return n&&n(u.scrollIntoView()),!0}}const Hpe=Vpe(),Upe=(e,t)=>{let{$from:n,to:r}=e.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),t&&t(e.tr.setSelection(Ke.create(e.doc,o))),!0)};function Gpe(e,t,n){let r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(i,i+1)||!(o.isTextblock||vh(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function vq(e,t,n,r){let o=t.nodeBefore,i=t.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&Gpe(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(n){let m=t.pos+i.nodeSize,y=ge.empty;for(let S=s.length-1;S>=0;S--)y=ge.from(s[S].create(null,y));y=ge.from(o.copy(y));let b=e.tr.step(new kr(t.pos-1,m,t.pos,m,new Ee(y,1,0),s.length,!0)),w=b.doc.resolve(m+2*s.length);w.nodeAfter&&w.nodeAfter.type==o.type&&vh(b.doc,w.pos)&&b.join(w.pos),n(b.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:rt.findFrom(t,1),f=u&&u.$from.blockRange(u.$to),p=f&&Gm(f);if(p!=null&&p>=t.depth)return n&&n(e.tr.lift(f,p).scrollIntoView()),!0;if(c&&wm(i,"start",!0)&&wm(o,"end")){let m=o,y=[];for(;y.push(m),!m.isTextblock;)m=m.lastChild;let b=i,w=1;for(;!b.isTextblock;b=b.firstChild)w++;if(m.canReplace(m.childCount,m.childCount,b.content)){if(n){let S=ge.empty;for(let T=y.length-1;T>=0;T--)S=ge.from(y[T].copy(S));let E=e.tr.step(new kr(t.pos-y.length,t.pos+i.nodeSize,t.pos+w,t.pos+i.nodeSize-w,new Ee(S,y.length,0),0,!0));n(E.scrollIntoView())}return!0}}return!1}function xq(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(t.tr.setSelection(Fe.create(t.doc,e<0?o.start(i):o.end(i)))),!0):!1}}const qpe=xq(-1),Zpe=xq(1);function Wpe(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&bG(s,e,t);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function r9(e,t=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)o=!0;else{let u=n.doc.resolve(c),f=u.index();o=u.parent.canReplaceWith(f,f+1,e)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];i.setBlockType(a,l,e,t)}r(i.scrollIntoView())}return!0}}function LO(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}LO(PO,uq,fq);LO(PO,pq,mq);LO(gq,yq,bq,Hpe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Kpe(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return Ype(a,s,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function Ype(e,t,n,r=null){let o=!1,i=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=s.resolve(t.start-2);i=new Dw(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new Dw(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),o=!0}let a=bG(i,n,r,t);return a?(e&&Jpe(e,t,a,o,n),!0):!1}function Jpe(e,t,n,r,o){let i=ge.empty;for(let u=n.length-1;u>=0;u--)i=ge.from(n[u].type.create(n[u].attrs,i));e.step(new kr(t.start-(r?2:0),t.end,t.start,t.end,new Ee(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let a=n.length-s,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,f=t.endIndex,p=!0;u<f;u++,p=!1)!p&&Hc(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}function Xpe(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==e);return i?n?r.node(i.depth-1).type==e?Qpe(t,n,e,i):eme(t,n,i):!0:!1}}function Qpe(e,t,n,r){let o=e.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new kr(i-1,s,i,s,new Ee(ge.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Dw(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=Gm(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(i,-1)-1);return vh(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),t(o.scrollIntoView()),!0}function eme(e,t,n){let r=e.tr,o=n.parent;for(let m=n.end,y=n.endIndex-1,b=n.startIndex;y>b;y--)m-=o.child(y).nodeSize,r.delete(m-1,m+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?ge.empty:ge.from(o))))return!1;let f=i.pos,p=f+s.nodeSize;return r.step(new kr(f-(a?1:0),p+(l?1:0),f+1,p-1,new Ee((a?ge.empty:ge.from(o.copy(ge.empty))).append(l?ge.empty:ge.from(o.copy(ge.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function tme(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==e);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=ge.from(c?e.create():null),f=new Ee(ge.from(e.create(null,ge.from(a.type.create(null,u)))),c?3:1,0),p=i.start,m=i.end;n(t.tr.step(new kr(p-(c?3:1),m,p,m,f,1,!0)).scrollIntoView())}return!0}}function dC(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class fC{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>{const f=l(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!t,c=t||i.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(r).map(([p,m])=>[p,(...b)=>{const w=this.buildProps(c,n),S=m(...b)(w);return a.push(S),f}])),run:u};return f}createCan(t){const{rawCommands:n,state:r}=this,o=!1,i=t||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(t,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:t,editor:o,view:s,state:dC({state:i,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t,n),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class nme{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const r=this.callbacks[t];return r&&r.forEach(o=>o.apply(this,n)),this}off(t,n){const r=this.callbacks[t];return r&&(n?this.callbacks[t]=r.filter(o=>o!==n):delete this.callbacks[t]),this}once(t,n){const r=(...o)=>{this.off(t,r),n.apply(this,o)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}}function Ze(e,t,n){return e.config[t]===void 0&&e.parent?Ze(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?Ze(e.parent,t,n):null}):e.config[t]}function hC(e){const t=e.filter(o=>o.type==="extension"),n=e.filter(o=>o.type==="node"),r=e.filter(o=>o.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function wq(e){const t=[],{nodeExtensions:n,markExtensions:r}=hC(e),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=Ze(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([p,m])=>{t.push({type:f,name:p,attribute:{...i,...m}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=Ze(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const p={...i,...f};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,t.push({type:s.name,name:u,attribute:p})})}),t}function ko(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Cs(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?String(i).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,p]=u.split(":").map(m=>m.trim());c.set(f,p)}),a.forEach(u=>{const[f,p]=u.split(":").map(m=>m.trim());c.set(f,p)}),r[o]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[o]=i}),r},{})}function Hw(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Cs(n,r),{})}function Sq(e){return typeof e=="function"}function Lt(e,t=void 0,...n){return Sq(e)?t?e.bind(t)(...n):e(...n):e}function rme(e={}){return Object.keys(e).length===0&&e.constructor===Object}function ome(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function o9(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const o=t.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):ome(n.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function i9(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&rme(n)?!1:n!=null))}function kq(e,t){var n;const r=wq(e),{nodeExtensions:o,markExtensions:i}=hC(e),s=(n=o.find(c=>Ze(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(S=>S.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((S,E)=>{const T=Ze(E,"extendNodeSchema",f);return{...S,...T?T(c):{}}},{}),m=i9({...p,content:Lt(Ze(c,"content",f)),marks:Lt(Ze(c,"marks",f)),group:Lt(Ze(c,"group",f)),inline:Lt(Ze(c,"inline",f)),atom:Lt(Ze(c,"atom",f)),selectable:Lt(Ze(c,"selectable",f)),draggable:Lt(Ze(c,"draggable",f)),code:Lt(Ze(c,"code",f)),whitespace:Lt(Ze(c,"whitespace",f)),linebreakReplacement:Lt(Ze(c,"linebreakReplacement",f)),defining:Lt(Ze(c,"defining",f)),isolating:Lt(Ze(c,"isolating",f)),attrs:Object.fromEntries(u.map(S=>{var E;return[S.name,{default:(E=S?.attribute)===null||E===void 0?void 0:E.default}]}))}),y=Lt(Ze(c,"parseHTML",f));y&&(m.parseDOM=y.map(S=>o9(S,u)));const b=Ze(c,"renderHTML",f);b&&(m.toDOM=S=>b({node:S,HTMLAttributes:Hw(S,u)}));const w=Ze(c,"renderText",f);return w&&(m.toText=w),[c.name,m]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(w=>w.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((w,S)=>{const E=Ze(S,"extendMarkSchema",f);return{...w,...E?E(c):{}}},{}),m=i9({...p,inclusive:Lt(Ze(c,"inclusive",f)),excludes:Lt(Ze(c,"excludes",f)),group:Lt(Ze(c,"group",f)),spanning:Lt(Ze(c,"spanning",f)),code:Lt(Ze(c,"code",f)),attrs:Object.fromEntries(u.map(w=>{var S;return[w.name,{default:(S=w?.attribute)===null||S===void 0?void 0:S.default}]}))}),y=Lt(Ze(c,"parseHTML",f));y&&(m.parseDOM=y.map(w=>o9(w,u)));const b=Ze(c,"renderHTML",f);return b&&(m.toDOM=w=>b({mark:w,HTMLAttributes:Hw(w,u)})),[c.name,m]}));return new uG({topNode:s,nodes:a,marks:l})}function b_(e,t){return t.nodes[e]||t.marks[e]||null}function s9(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function zO(e,t){const n=iu.fromSchema(t).serializeFragment(e),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const ime=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(o,i,s,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-i))}),n};function BO(e){return Object.prototype.toString.call(e)==="[object RegExp]"}class pd{constructor(t){this.find=t.find,this.handler=t.handler}}const sme=(e,t)=>{if(BO(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function U1(e){var t;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((t=c.nodeBefore||c.nodeAfter)===null||t===void 0)&&t.marks.find(p=>p.type.spec.code))return!1;let u=!1;const f=ime(c)+i;return s.forEach(p=>{if(u)return;const m=sme(f,p.find);if(!m)return;const y=l.state.tr,b=dC({state:l.state,transaction:y}),w={from:r-(m[0].length-i.length),to:o},{commands:S,chain:E,can:T}=new fC({editor:n,state:b});p.handler({state:b,range:w,match:m,commands:S,chain:E,can:T})===null||!y.steps.length||(y.setMeta(a,{transform:y,from:r,to:o,text:i}),l.dispatch(y),u=!0)}),u}function ame(e){const{editor:t,rules:n}=e,r=new kt({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=zO(ge.from(u),s.schema);const{from:f}=l,p=f+u.length;U1({editor:t,from:f,to:p,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return U1({editor:t,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&U1({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?U1({editor:t,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function lme(e){return Object.prototype.toString.call(e).slice(8,-1)}function G1(e){return lme(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function pC(e,t){const n={...e};return G1(e)&&G1(t)&&Object.keys(t).forEach(r=>{G1(t[r])&&G1(e[r])?n[r]=pC(e[r],t[r]):n[r]=t[r]}),n}class $o{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Lt(Ze(this,"addOptions",{name:this.name}))),this.storage=Lt(Ze(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new $o(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>pC(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new $o(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Lt(Ze(n,"addOptions",{name:n.name})),n.storage=Lt(Ze(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,o=t.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>c?.type.name===n.name))return!1;const l=s.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}}function cme(e){return typeof e=="number"}class ume{constructor(t){this.find=t.find,this.handler=t.handler}}const dme=(e,t,n)=>{if(BO(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=e,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function fme(e){const{editor:t,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:c,can:u}=new fC({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,o,(m,y)=>{if(!m.isTextblock||m.type.spec.code)return;const b=Math.max(r,y),w=Math.min(o,y+m.content.size),S=m.textBetween(b-y,w-y,void 0,"");dme(S,i.find,s).forEach(T=>{if(T.index===void 0)return;const A=b+T.index+1,M=A+T[0].length,R={from:n.tr.mapping.map(A),to:n.tr.mapping.map(M)},O=i.handler({state:n,range:R,match:T,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});f.push(O)})}),f.every(m=>m!==null)}let q1=null;const hme=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)===null||t===void 0||t.setData("text/html",e),n};function pme(e){const{editor:t,rules:n}=e;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:p,rule:m,pasteEvt:y})=>{const b=u.tr,w=dC({state:u,transaction:b});if(!(!fme({editor:t,state:w,from:Math.max(f-1,0),to:p.b-1,rule:m,pasteEvent:y,dropEvent:a})||!b.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return n.map(u=>new kt({view(f){const p=y=>{var b;r=!((b=f.dom.parentElement)===null||b===void 0)&&b.contains(y.target)?f.dom.parentElement:null,r&&(q1=t)},m=()=>{q1&&(q1=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(i=r===f.dom.parentElement,a=p,!i){const m=q1;m?.isEditable&&setTimeout(()=>{const y=m.state.selection;y&&m.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(f,p)=>{var m;const y=(m=p.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return s=p,o=!!y?.includes("data-pm-slice"),!1}}},appendTransaction:(f,p,m)=>{const y=f[0],b=y.getMeta("uiEvent")==="paste"&&!o,w=y.getMeta("uiEvent")==="drop"&&!i,S=y.getMeta("applyPasteRules"),E=!!S;if(!b&&!w&&!E)return;if(E){let{text:M}=S;typeof M=="string"?M=M:M=zO(ge.from(M),m.schema);const{from:R}=S,O=R+M.length,I=hme(M);return l({rule:u,state:m,from:R,to:{b:O},pasteEvt:I})}const T=p.doc.content.findDiffStart(m.doc.content),A=p.doc.content.findDiffEnd(m.doc.content);if(!(!cme(T)||!A||T===A.b))return l({rule:u,state:m,from:T,to:A,pasteEvt:s})}}))}function mme(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}class Nf{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=Nf.resolve(t),this.schema=kq(this.extensions,n),this.setupExtensions()}static resolve(t){const n=Nf.sort(Nf.flatten(t)),r=mme(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=Ze(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(t){return t.sort((r,o)=>{const i=Ze(r,"priority")||100,s=Ze(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:b_(n.name,this.schema)},o=Ze(n,"addCommands",r);return o?{...t,...o()}:t},{})}get plugins(){const{editor:t}=this,n=Nf.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:t,type:b_(s.name,this.schema)},l=[],c=Ze(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&Ze(s,"exitable",a)&&(u.ArrowRight=()=>$o.handleExit({editor:t,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([w,S])=>[w,()=>S({editor:t})]));u={...u,...b}}const f=Dpe(u);l.push(f);const p=Ze(s,"addInputRules",a);s9(s,t.options.enableInputRules)&&p&&r.push(...p());const m=Ze(s,"addPasteRules",a);s9(s,t.options.enablePasteRules)&&m&&o.push(...m());const y=Ze(s,"addProseMirrorPlugins",a);if(y){const b=y();l.push(...b)}return l}).flat();return[ame({editor:t,rules:r}),...pme({editor:t,rules:o}),...i]}get attributes(){return wq(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=hC(this.extensions);return Object.fromEntries(n.filter(r=>!!Ze(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:t,type:ko(r.name,this.schema)},s=Ze(r,"addNodeView",i);if(!s)return[];const a=(l,c,u,f,p)=>{const m=Hw(l,o);return s()({node:l,view:c,getPos:u,decorations:f,innerDecorations:p,editor:t,extension:r,HTMLAttributes:m})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(t=>{var n;this.editor.extensionStorage[t.name]=t.storage;const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:b_(t.name,this.schema)};t.type==="mark"&&(!((n=Lt(Ze(t,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(t.name);const o=Ze(t,"onBeforeCreate",r),i=Ze(t,"onCreate",r),s=Ze(t,"onUpdate",r),a=Ze(t,"onSelectionUpdate",r),l=Ze(t,"onTransaction",r),c=Ze(t,"onFocus",r),u=Ze(t,"onBlur",r),f=Ze(t,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class On{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Lt(Ze(this,"addOptions",{name:this.name}))),this.storage=Lt(Ze(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new On(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>pC(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new On({...this.config,...t});return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Lt(Ze(n,"addOptions",{name:n.name})),n.storage=Lt(Ze(n,"addStorage",{name:n.name,options:n.options})),n}}function Cq(e,t,n){const{from:r,to:o}=t,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="";return e.nodesBetween(r,o,(l,c,u,f)=>{var p;l.isBlock&&c>r&&(a+=i);const m=s?.[l.type.name];if(m)return u&&(a+=m({node:l,pos:c,parent:u,index:f,range:t})),!1;l.isText&&(a+=(p=l?.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,o-c))}),a}function Eq(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const Tq=On.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new kt({key:new Ht("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:i}=o,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=Eq(n);return Cq(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),gme=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),yme=(e=!1)=>({commands:t})=>t.setContent("",e),bme=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{e.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,f=c.resolve(u.map(l)),p=c.resolve(u.map(l+a.nodeSize)),m=f.blockRange(p);if(!m)return;const y=Gm(m);if(a.type.isTextblock){const{defaultType:b}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(m.start,b)}(y||y===0)&&t.lift(m,y)})}),!0},vme=e=>t=>e(t),xme=()=>({state:e,dispatch:t})=>yq(e,t),wme=(e,t)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const s=r.mapping.map(t);return r.insert(s,i.content),r.setSelection(new Fe(r.doc.resolve(Math.max(s-1,0)))),!0},Sme=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const o=e.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(t){const a=o.before(i),l=o.after(i);e.delete(a,l).scrollIntoView()}return!0}return!1},kme=e=>({tr:t,state:n,dispatch:r})=>{const o=ko(e,n.schema),i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),c=i.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1},Cme=e=>({tr:t,dispatch:n})=>{const{from:r,to:o}=e;return n&&t.delete(r,o),!0},Eme=()=>({state:e,dispatch:t})=>PO(e,t),Tme=()=>({commands:e})=>e.keyboardShortcut("Enter"),_me=()=>({state:e,dispatch:t})=>Fpe(e,t);function Uw(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(o=>n.strict?t[o]===e[o]:BO(t[o])?t[o].test(e[o]):t[o]===e[o]):!0}function _q(e,t,n={}){return e.find(r=>r.type===t&&Uw(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function a9(e,t,n={}){return!!_q(e,t,n)}function R0(e,t,n){var r;if(!e||!t)return;let o=e.parent.childAfter(e.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===t))&&(o=e.parent.childBefore(e.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===t)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!_q([...o.node.marks],t,n)))return;let s=o.index,a=e.start()+o.offset,l=s+1,c=a+o.node.nodeSize;for(;s>0&&a9([...e.parent.child(s-1).marks],t,n);)s-=1,a-=e.parent.child(s).nodeSize;for(;l<e.parent.childCount&&a9([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Id(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}const Ame=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const i=Id(e,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const f=R0(l,i,t);if(f&&f.from<=c&&f.to>=u){const p=Fe.create(s,f.from,f.to);n.setSelection(p)}}return!0},Mme=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function mC(e){return e instanceof Fe}function zc(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Aq(e,t=null){if(!t)return null;const n=rt.atStart(e),r=rt.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const o=n.from,i=r.to;return t==="all"?Fe.create(e,zc(0,o,i),zc(e.content.size,o,i)):Fe.create(e,zc(t,o,i),zc(t,o,i))}function Mq(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function gC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Nme=(e=null,t={})=>({editor:n,view:r,tr:o,dispatch:i})=>{t={scrollIntoView:!0,...t};const s=()=>{(gC()||Mq())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(i&&e===null&&!mC(n.state.selection))return s(),!0;const a=Aq(o.doc,e)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},Rme=(e,t)=>n=>e.every((r,o)=>t(r,{...n,index:o})),Ime=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),Nq=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&Nq(r)}return e};function Z1(e){const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return Nq(n)}function I0(e,t,n){if(e instanceof Vc||e instanceof ge)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,o=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return ge.fromArray(e.map(a=>t.nodeFromJSON(a)));const s=t.nodeFromJSON(e);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),I0("",t,n)}if(o){if(n.errorOnInvalidContent){let s=!1,a="";const l=new uG({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Bl.fromSchema(l).parseSlice(Z1(e),n.parseOptions):Bl.fromSchema(l).parse(Z1(e),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Bl.fromSchema(t);return n.slice?i.parseSlice(Z1(e),n.parseOptions).content:i.parse(Z1(e),n.parseOptions)}return I0("",t,n)}function Rq(e,t,n){const r=e.steps.length-1;if(r<t)return;const o=e.steps[r];if(!(o instanceof zn||o instanceof kr))return;const i=e.mapping.maps[r];let s=0;i.forEach((a,l,c,u)=>{s===0&&(s=u)}),e.setSelection(rt.near(e.doc.resolve(s),n))}const Ome=e=>!("type"in e),Pme=(e,t,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=w=>{i.emit("contentError",{editor:i,error:w,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{I0(t,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(w){l(w)}try{a=I0(t,i.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(w){return l(w),!1}let{from:u,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},p=!0,m=!0;if((Ome(a)?a:[a]).forEach(w=>{w.check(),p=p?w.isText&&w.marks.length===0:!1,m=m?w.isBlock:!1}),u===f&&m){const{parent:w}=r.doc.resolve(u);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(u-=1,f+=1)}let b;if(p){if(Array.isArray(t))b=t.map(w=>w.text||"").join("");else if(t instanceof ge){let w="";t.forEach(S=>{S.text&&(w+=S.text)}),b=w}else typeof t=="object"&&t&&t.text?b=t.text:b=t;r.insertText(b,u,f)}else b=a,r.replaceWith(u,f,b);n.updateSelection&&Rq(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:b}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:b})}return!0},Dme=()=>({state:e,dispatch:t})=>Lpe(e,t),$me=()=>({state:e,dispatch:t})=>zpe(e,t),jme=()=>({state:e,dispatch:t})=>uq(e,t),Lme=()=>({state:e,dispatch:t})=>pq(e,t),zme=()=>({state:e,dispatch:t,tr:n})=>{try{const r=iC(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Bme=()=>({state:e,dispatch:t,tr:n})=>{try{const r=iC(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Fme=()=>({state:e,dispatch:t})=>$pe(e,t),Vme=()=>({state:e,dispatch:t})=>jpe(e,t);function Iq(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Hme(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))gC()||Iq()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const Ume=e=>({editor:t,view:n,tr:r,dispatch:o})=>{const i=Hme(e).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function O0(e,t,n={}){const{from:r,to:o,empty:i}=e.selection,s=t?ko(t,e.schema):null,a=[];e.doc.nodesBetween(r,o,(f,p)=>{if(f.isText)return;const m=Math.max(r,p),y=Math.min(o,p+f.nodeSize);a.push({node:f,from:m,to:y})});const l=o-r,c=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>Uw(f.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((f,p)=>f+p.to-p.from,0)>=l}const Gme=(e,t={})=>({state:n,dispatch:r})=>{const o=ko(e,n.schema);return O0(n,o,t)?Bpe(n,r):!1},qme=()=>({state:e,dispatch:t})=>bq(e,t),Zme=e=>({state:t,dispatch:n})=>{const r=ko(e,t.schema);return Xpe(r)(t,n)},Wme=()=>({state:e,dispatch:t})=>gq(e,t);function yC(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function l9(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,o)=>(n.includes(o)||(r[o]=e[o]),r),{})}const Kme=(e,t)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=yC(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(i=ko(e,r.schema)),a==="mark"&&(s=Id(e,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{i&&i===c.type&&n.setNodeMarkup(u,void 0,l9(c.attrs,t)),s&&c.marks.length&&c.marks.forEach(f=>{s===f.type&&n.addMark(u,u+c.nodeSize,s.create(l9(f.attrs,t)))})})}),!0):!1},Yme=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),Jme=()=>({tr:e,dispatch:t})=>{if(t){const n=new Bi(e.doc);e.setSelection(n)}return!0},Xme=()=>({state:e,dispatch:t})=>fq(e,t),Qme=()=>({state:e,dispatch:t})=>mq(e,t),ege=()=>({state:e,dispatch:t})=>Upe(e,t),tge=()=>({state:e,dispatch:t})=>Zpe(e,t),nge=()=>({state:e,dispatch:t})=>qpe(e,t);function Gw(e,t,n={},r={}){return I0(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const rge=(e,t=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,c;const{doc:u}=i;if(n.preserveWhitespace!=="full"){const f=Gw(e,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return s&&i.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!t),!0}return s&&i.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:u.content.size},e,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function Oq(e,t){const n=Id(t,e.schema),{from:r,to:o,empty:i}=e.selection,s=[];i?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function FO(e,t){const n=new Nd(e);return t.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function oge(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function c9(e,t){const n=[];return e.descendants((r,o)=>{t(r)&&n.push({node:r,pos:o})}),n}function Pq(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(o,i)=>{n(o)&&r.push({node:o,pos:i})}),r}function ige(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function bC(e){return t=>ige(t.$from,e)}function sge(e,t){const n=Nf.resolve(e);return kq(n,t)}function age(e,t){const n={from:0,to:e.content.size};return Cq(e,n,t)}function lge(e,t){const n=ko(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function Dq(e,t){const n=yC(typeof t=="string"?t:t.name,e.schema);return n==="node"?lge(e,t):n==="mark"?Oq(e,t):{}}function cge(e,t=JSON.stringify){const n={};return e.filter(r=>{const o=t(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function uge(e){const t=cge(e);return t.length===1?t:t.filter((n,r)=>!t.filter((i,s)=>s!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function $q(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((o,i)=>{const s=[];if(o.ranges.length)o.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const c=t.slice(i).map(a,-1),u=t.slice(i).map(l),f=t.invert().map(c,-1),p=t.invert().map(u);r.push({oldRange:{from:f,to:p},newRange:{from:c,to:u}})})}),uge(r)}function VO(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(o=>{const i=n.resolve(e),s=R0(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(e,t,(o,i)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function nw(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=e.find(i=>i.type===t&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function dN(e,t,n={}){const{empty:r,ranges:o}=e.selection,i=t?Id(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>Uw(f.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:f,$to:p})=>{const m=f.pos,y=p.pos;e.doc.nodesBetween(m,y,(b,w)=>{if(!b.isText&&!b.marks.length)return;const S=Math.max(m,w),E=Math.min(y,w+b.nodeSize),T=E-S;s+=T,a.push(...b.marks.map(A=>({mark:A,from:S,to:E})))})}),s===0)return!1;const l=a.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>Uw(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),c=a.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+c:l)>=s}function dge(e,t,n={}){if(!t)return O0(e,null,n)||dN(e,null,n);const r=yC(t,e.schema);return r==="node"?O0(e,t,n):r==="mark"?dN(e,t,n):!1}function u9(e,t){const{nodeExtensions:n}=hC(t),r=n.find(s=>s.name===e);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=Lt(Ze(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function HO(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!==null&&r!==void 0?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let o=!0;return e.content.forEach(i=>{o!==!1&&(HO(i,{ignoreWhitespace:n,checkChildren:t})||(o=!1))}),o}return!1}function fN(e){return e instanceof Ke}function qw(e,t,n){const o=e.state.doc.content.size,i=zc(t,0,o),s=zc(n,0,o),a=e.coordsAtPos(i),l=e.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),p=Math.max(a.right,l.right),m=p-f,y=u-c,S={top:c,bottom:u,left:f,right:p,width:m,height:y,x:f,y:c};return{...S,toJSON:()=>S}}function fge(e,t,n){var r;const{selection:o}=t;let i=null;if(mC(o)&&(i=o.$cursor),i){const a=(r=e.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(u,f,p)=>{if(c)return!1;if(u.isInline){const m=!p||p.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(b=>b.type.excludes(n));c=m&&y}return!c}),c})}const hge=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=Id(e,r.schema);if(o)if(s){const c=Oq(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(p,m)=>{const y=Math.max(m,u),b=Math.min(m+p.nodeSize,f);p.marks.find(S=>S.type===l)?p.marks.forEach(S=>{l===S.type&&n.addMark(y,b,l.create({...S.attrs,...t}))}):n.addMark(y,b,l.create(t))})});return fge(r,n,l)},pge=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),mge=(e,t={})=>({state:n,dispatch:r,chain:o})=>{const i=ko(e,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>r9(i,{...s,...t})(n)?!0:a.clearNodes()).command(({state:a})=>r9(i,{...s,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},gge=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,o=zc(e,0,r.content.size),i=Ke.create(r,o);t.setSelection(i)}return!0},yge=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:o,to:i}=typeof e=="number"?{from:e,to:e}:e,s=Fe.atStart(r).from,a=Fe.atEnd(r).to,l=zc(o,s,a),c=zc(i,s,a),u=Fe.create(r,l,c);t.setSelection(u)}return!0},bge=e=>({state:t,dispatch:n})=>{const r=ko(e,t.schema);return tme(r)(t,n)};function d9(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(o=>t?.includes(o.type.name));e.tr.ensureMarks(r)}}const vge=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=t,{$from:a,$to:l}=i,c=o.extensionManager.attributes,u=nw(c,a.node().type.name,a.node().attrs);if(i instanceof Ke&&i.node.isBlock)return!a.parentOffset||!Hc(s,a.pos)?!1:(r&&(e&&d9(n,o.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=a.depth===0?void 0:oge(a.node(-1).contentMatchAt(a.indexAfter(-1)));let m=f&&p?[{type:p,attrs:u}]:void 0,y=Hc(t.doc,t.mapping.map(a.pos),1,m);if(!m&&!y&&Hc(t.doc,t.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(y=!0,m=p?[{type:p,attrs:u}]:void 0),r){if(y&&(i instanceof Fe&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,m),p&&!f&&!a.parentOffset&&a.parent.type!==p)){const b=t.mapping.map(a.before()),w=t.doc.resolve(b);a.node(-1).canReplaceWith(w.index(),w.index()+1,p)&&t.setNodeMarkup(t.mapping.map(a.before()),p)}e&&d9(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return y},xge=(e,t={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=ko(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const p=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let S=ge.empty;const E=l.index(-1)?1:l.index(-2)?2:3;for(let I=l.depth-E;I>=l.depth-3;I-=1)S=ge.from(l.node(I).copy(S));const T=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,A={...nw(p,l.node().type.name,l.node().attrs),...t},M=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(A))||void 0;S=S.append(ge.from(a.createAndFill(null,M)||void 0));const R=l.before(l.depth-(E-1));n.replace(R,l.after(-T),new Ee(S,4-E,0));let O=-1;n.doc.nodesBetween(R,n.doc.content.size,(I,L)=>{if(O>-1)return!1;I.isTextblock&&I.content.size===0&&(O=L+1)}),O>-1&&n.setSelection(Fe.near(n.doc.resolve(O))),n.scrollIntoView()}return!0}const m=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,y={...nw(p,f.type.name,f.attrs),...t},b={...nw(p,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const w=m?[{type:a,attrs:y},{type:m,attrs:b}]:[{type:a,attrs:y}];if(!Hc(n.doc,l.pos,2))return!1;if(o){const{selection:S,storedMarks:E}=r,{splittableMarks:T}=i.extensionManager,A=E||S.$to.parentOffset&&S.$from.marks();if(n.split(l.pos,2,w).scrollIntoView(),!A||!o)return!0;const M=A.filter(R=>T.includes(R.type.name));n.ensureMarks(M)}return!0},v_=(e,t)=>{const n=bC(s=>s.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=e.doc.nodeAt(r);return n.node.type===o?.type&&vh(e.doc,n.pos)&&e.join(n.pos),!0},x_=(e,t)=>{const n=bC(s=>s.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=e.doc.nodeAt(r);return n.node.type===o?.type&&vh(e.doc,r)&&e.join(r),!0},wge=(e,t,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:p}=o.extensionManager,m=ko(e,s.schema),y=ko(t,s.schema),{selection:b,storedMarks:w}=s,{$from:S,$to:E}=b,T=S.blockRange(E),A=w||b.$to.parentOffset&&b.$from.marks();if(!T)return!1;const M=bC(R=>u9(R.type.name,f))(b);if(T.depth>=1&&M&&T.depth-M.depth<=1){if(M.node.type===m)return c.liftListItem(y);if(u9(M.node.type.name,f)&&m.validContent(M.node.content)&&a)return l().command(()=>(i.setNodeMarkup(M.pos,m),!0)).command(()=>v_(i,m)).command(()=>x_(i,m)).run()}return!n||!A||!a?l().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>v_(i,m)).command(()=>x_(i,m)).run():l().command(()=>{const R=u().wrapInList(m,r),O=A.filter(I=>p.includes(I.type.name));return i.ensureMarks(O),R?!0:c.clearNodes()}).wrapInList(m,r).command(()=>v_(i,m)).command(()=>x_(i,m)).run()},Sge=(e,t={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Id(e,r.schema);return dN(r,s,t)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,t)},kge=(e,t,n={})=>({state:r,commands:o})=>{const i=ko(e,r.schema),s=ko(t,r.schema),a=O0(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...n})},Cge=(e,t={})=>({state:n,commands:r})=>{const o=ko(e,n.schema);return O0(n,o,t)?r.lift(o):r.wrapIn(o,t)},Ege=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){const s=e.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,e.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},Tge=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:o}=n;return r||t&&o.forEach(i=>{e.removeMark(i.$from.pos,i.$to.pos)}),!0},_ge=(e,t={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=Id(e,r.schema),{$from:c,empty:u,ranges:f}=a;if(!o)return!0;if(u&&s){let{from:p,to:m}=a;const y=(i=c.marks().find(w=>w.type===l))===null||i===void 0?void 0:i.attrs,b=R0(c,l,y);b&&(p=b.from,m=b.to),n.removeMark(p,m,l)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},Age=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=yC(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(i=ko(e,r.schema)),a==="mark"&&(s=Id(e,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let f,p,m,y;n.selection.empty?r.doc.nodesBetween(c,u,(b,w)=>{i&&i===b.type&&(m=Math.max(w,c),y=Math.min(w+b.nodeSize,u),f=w,p=b)}):r.doc.nodesBetween(c,u,(b,w)=>{w<c&&i&&i===b.type&&(m=Math.max(w,c),y=Math.min(w+b.nodeSize,u),f=w,p=b),w>=c&&w<=u&&(i&&i===b.type&&n.setNodeMarkup(w,void 0,{...b.attrs,...t}),s&&b.marks.length&&b.marks.forEach(S=>{if(s===S.type){const E=Math.max(w,c),T=Math.min(w+b.nodeSize,u);n.addMark(E,T,s.create({...S.attrs,...t}))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...p.attrs,...t}),s&&p.marks.length&&p.marks.forEach(b=>{s===b.type&&n.addMark(m,y,s.create({...b.attrs,...t}))}))}),!0):!1},Mge=(e,t={})=>({state:n,dispatch:r})=>{const o=ko(e,n.schema);return Wpe(o,t)(n,r)},Nge=(e,t={})=>({state:n,dispatch:r})=>{const o=ko(e,n.schema);return Kpe(o,t)(n,r)};var Rge=Object.freeze({__proto__:null,blur:gme,clearContent:yme,clearNodes:bme,command:vme,createParagraphNear:xme,cut:wme,deleteCurrentNode:Sme,deleteNode:kme,deleteRange:Cme,deleteSelection:Eme,enter:Tme,exitCode:_me,extendMarkRange:Ame,first:Mme,focus:Nme,forEach:Rme,insertContent:Ime,insertContentAt:Pme,joinBackward:jme,joinDown:$me,joinForward:Lme,joinItemBackward:zme,joinItemForward:Bme,joinTextblockBackward:Fme,joinTextblockForward:Vme,joinUp:Dme,keyboardShortcut:Ume,lift:Gme,liftEmptyBlock:qme,liftListItem:Zme,newlineInCode:Wme,resetAttributes:Kme,scrollIntoView:Yme,selectAll:Jme,selectNodeBackward:Xme,selectNodeForward:Qme,selectParentNode:ege,selectTextblockEnd:tge,selectTextblockStart:nge,setContent:rge,setMark:hge,setMeta:pge,setNode:mge,setNodeSelection:gge,setTextSelection:yge,sinkListItem:bge,splitBlock:vge,splitListItem:xge,toggleList:wge,toggleMark:Sge,toggleNode:kge,toggleWrap:Cge,undoInputRule:Ege,unsetAllMarks:Tge,unsetMark:_ge,updateAttributes:Age,wrapIn:Mge,wrapInList:Nge});const jq=On.create({name:"commands",addCommands(){return{...Rge}}}),Lq=On.create({name:"drop",addProseMirrorPlugins(){return[new kt({key:new Ht("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),zq=On.create({name:"editable",addProseMirrorPlugins(){return[new kt({key:new Ht("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Bq=new Ht("focusEvents"),Fq=On.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new kt({key:Bq,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Vq=On.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:p,parent:m}=f,y=f.parent.isTextblock&&p>0?a.doc.resolve(p-1):f,b=y.parent.type.spec.isolating,w=f.pos-f.parentOffset,S=b&&y.parent.childCount===1?w===f.pos:rt.atStart(c).from===p;return!u||!m.type.isTextblock||m.textContent.length||!S||S&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return gC()||Iq()?i:o},addProseMirrorPlugins(){return[new kt({key:new Ht("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(b=>b.getMeta("composition")))return;const r=e.some(b=>b.docChanged)&&!t.doc.eq(n.doc),o=e.some(b=>b.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=t.selection,l=rt.atStart(t.doc).from,c=rt.atEnd(t.doc).to;if(i||!(s===l&&a===c)||!HO(n.doc))return;const p=n.tr,m=dC({state:n,transaction:p}),{commands:y}=new fC({editor:this.editor,state:m});if(y.clearNodes(),!!p.steps.length)return p}})]}}),Hq=On.create({name:"paste",addProseMirrorPlugins(){return[new kt({key:new Ht("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),Uq=On.create({name:"tabindex",addProseMirrorPlugins(){return[new kt({key:new Ht("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var vy=Object.freeze({__proto__:null,ClipboardTextSerializer:Tq,Commands:jq,Drop:Lq,Editable:zq,FocusEvents:Fq,Keymap:Vq,Paste:Hq,Tabindex:Uq,focusEventsPluginKey:Bq});class wf{get name(){return this.node.type.name}constructor(t,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new wf(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new wf(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new wf(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const l=new wf(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),t.push(new wf(a,this.editor,o,o?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===t)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===t&&i.every(l=>n[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(t,n,r))))}),o}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}}const Ige=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Oge(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style",""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}let Pge=class extends nme{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Oge(Ige,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const r=Sq(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(t){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(s))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var t,n;const o=[...this.options.enableCoreExtensions?[zq,Tq.configure({blockSeparator:(n=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),jq,Fq,Vq,Uq,Lq,Hq].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Nf(o,this)}createCommandManager(){this.commandManager=new fC({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let n;try{n=Gw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=Gw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Aq(n,this.options.autofocus);this.view=new IO(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)===null||t===void 0?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:_f.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=t.getMeta("focus"),i=t.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:t}),i&&this.emit("blur",{editor:this,event:i.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Dq(this.state,t)}isActive(t,n){const r=typeof t=="string"?t:null,o=typeof t=="string"?n:t;return dge(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return zO(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n=`

`,textSerializers:r={}}=t||{};return age(this.state.doc,{blockSeparator:n,textSerializers:{...Eq(this.schema),...r}})}get isEmpty(){return HO(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(t,n))||null}$nodes(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(t,n))||null}$pos(t){const n=this.state.doc.resolve(t);return new wf(n,this)}get $doc(){return this.$pos(0)}};function Sm(e){return new pd({find:e.find,handler:({state:t,range:n,match:r})=>{const o=Lt(e.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=t,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(VO(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(b=>b===e.type&&b!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const p=n.from+l+s.length;i.addMark(n.from+l,p,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}let Ql=class hN{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Lt(Ze(this,"addOptions",{name:this.name}))),this.storage=Lt(Ze(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new hN(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>pC(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new hN(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Lt(Ze(n,"addOptions",{name:n.name})),n.storage=Lt(Ze(n,"addStorage",{name:n.name,options:n.options})),n}};class Dge{constructor(t,n,r){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,r,o,i,s,a,l;const{view:c}=this.editor,u=t.target,f=u.nodeType===3?(n=u.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(u)||!f)return;let p=0,m=0;if(this.dom!==f){const E=this.dom.getBoundingClientRect(),T=f.getBoundingClientRect(),A=(o=t.offsetX)!==null&&o!==void 0?o:(i=t.nativeEvent)===null||i===void 0?void 0:i.offsetX,M=(s=t.offsetY)!==null&&s!==void 0?s:(a=t.nativeEvent)===null||a===void 0?void 0:a.offsetY;p=T.x-E.x+A,m=T.y-E.y+M}const y=this.dom.cloneNode(!0);(l=t.dataTransfer)===null||l===void 0||l.setDragImage(y,p,m);const b=this.getPos();if(typeof b!="number")return;const w=Ke.create(c.state.doc,b),S=c.state.tr.setSelection(w);c.dispatch(S)}stopEvent(t){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const r=t.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const i=t.type.startsWith("drag"),s=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!i)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,u=!!this.node.type.spec.draggable,f=Ke.isSelectable(this.node),p=t.type==="copy",m=t.type==="paste",y=t.type==="cut",b=t.type==="mousedown";if(!u&&f&&i&&t.target===this.dom&&t.preventDefault(),u&&i&&!c&&t.target===this.dom)return t.preventDefault(),!1;if(u&&l&&!c&&b){const w=r.closest("[data-drag-handle]");w&&(this.dom===w||this.dom.contains(w))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||s||p||m||y||b&&f)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(gC()||Mq())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const n=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:n})}}function rh(e){return new ume({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:o})=>{const i=Lt(e.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),f=n.from+l.indexOf(a),p=f+a.length;if(VO(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(w=>w===e.type&&w!==y.mark.type)).filter(y=>y.to>f).length)return null;p<n.to&&s.delete(p,n.to),f>n.from&&s.delete(n.from+u,f),c=n.from+u+a.length,s.addMark(n.from+u,c,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}var W1,$ge=new Uint8Array(16);function jge(){if(!W1&&(W1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!W1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W1($ge)}const Lge=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function zge(e){return typeof e=="string"&&Lge.test(e)}var Mo=[];for(var w_=0;w_<256;++w_)Mo.push((w_+256).toString(16).substr(1));function Bge(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Mo[e[t+0]]+Mo[e[t+1]]+Mo[e[t+2]]+Mo[e[t+3]]+"-"+Mo[e[t+4]]+Mo[e[t+5]]+"-"+Mo[e[t+6]]+Mo[e[t+7]]+"-"+Mo[e[t+8]]+Mo[e[t+9]]+"-"+Mo[e[t+10]]+Mo[e[t+11]]+Mo[e[t+12]]+Mo[e[t+13]]+Mo[e[t+14]]+Mo[e[t+15]]).toLowerCase();if(!zge(n))throw TypeError("Stringified UUID is invalid");return n}function Gq(e,t,n){e=e||{};var r=e.random||(e.rng||jge)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Bge(r)}var Fge=class qq{constructor(t){this.cache=new Map(t)}get(t){return this.cache.get(t)}set(t,n,r){t<0||this.cache.set(t,[n,r])}replace(t,n,r,o){this.remove(t),this.set(n,r,o)}remove(t){this.cache.delete(t)}invalidate(t){const n=new qq(this.cache),r=t.mapping;return this.cache.forEach(([o,i],s)=>{if(s<0)return;const a=r.mapResult(s),l=t.doc.nodeAt(a.pos);if(a.deleted||!l?.eq(o))n.remove(s);else if(s!==a.pos){const c=i.map(u=>u.map(r,0,0)).filter(u=>u!=null);n.replace(s,a.pos,l,c)}}),n}};function Vge({parser:e,nodeTypes:t=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new Ht("prosemirror-highlight");return new kt({key:r,state:{init(o,i){const s=new Fge,[a,l]=f9(i.doc,e,t,n,s);return{cache:s,decorations:a,promises:l}},apply:(o,i)=>{const s=i.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const u=i.decorations.map(o.mapping,o.doc),f=i.promises;return{cache:s,decorations:u,promises:f}}const[l,c]=f9(o.doc,e,t,n,s);return{cache:s,decorations:l,promises:c}}},view:o=>{const i=new Set,s=()=>{if(i.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const c=r.getState(o.state);for(const u of(l=c?.promises)!=null?l:[])i.add(u),u.then(()=>{i.delete(u),s()}).catch(()=>{i.delete(u)})};return a(),{update:()=>{a()}}},props:{decorations(o){var i;return(i=this.getState(o))==null?void 0:i.decorations}}})}function f9(e,t,n,r,o){const i=[],s=[];return e.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),u=o.get(l);if(u){const[f,p]=u;i.push(...p)}else{const f=t({content:a.textContent,language:c||void 0,pos:l,size:a.nodeSize});f&&Array.isArray(f)?(o.set(l,a,f),i.push(...f)):f instanceof Promise&&(o.remove(l),s.push(f))}}return!1}),[Rt.create(e,i),s]}function Hge(e,t){return function({content:r,language:o,pos:i,size:s}){var a;const l=[],{tokens:c,fg:u,bg:f,rootStyle:p}=e.codeToTokens(r,{lang:o,theme:e.getLoadedThemes()[0]}),m=p||(u&&f?`--prosemirror-highlight:${u};--prosemirror-highlight-bg:${f}`:"");if(m){const b=Zt.node(i,i+s,{style:m});l.push(b)}let y=i+1;for(const b of c){for(const w of b){const S=y+w.content.length,E=Zt.inline(y,S,{style:Uge((a=w.htmlStyle)!=null?a:`color: ${w.color}`),class:"shiki"});l.push(E),y=S}y+=1}return l}}function Uge(e){return typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t}:${n}`).join(";")}const Gge=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,qge=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Zge=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Wge=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Kge=$o.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Sm({find:Gge,type:this.type}),Sm({find:Zge,type:this.type})]},addPasteRules(){return[rh({find:qge,type:this.type}),rh({find:Wge,type:this.type})]}}),Yge=/(^|[^`])`([^`]+)`(?!`)/,Jge=/(^|[^`])`([^`]+)`(?!`)/g,Xge=$o.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Sm({find:Yge,type:this.type})]},addPasteRules(){return[rh({find:Jge,type:this.type})]}}),Qge=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,eye=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,tye=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,nye=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,rye=$o.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Sm({find:Qge,type:this.type}),Sm({find:tye,type:this.type})]},addPasteRules(){return[rh({find:eye,type:this.type}),rh({find:nye,type:this.type})]}}),oye=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,iye=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,sye=$o.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Sm({find:oye,type:this.type})]},addPasteRules(){return[rh({find:iye,type:this.type})]}}),aye=$o.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Cs(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),lye=Ql.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",Cs(this.options.HTMLAttributes,e),0]}}),cye=Ql.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",Cs(this.options.HTMLAttributes,e),0]}});var pN,mN;if(typeof WeakMap<"u"){let e=new WeakMap;pN=t=>e.get(t),mN=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;pN=r=>{for(let o=0;o<e.length;o+=2)if(e[o]==r)return e[o+1]},mN=(r,o)=>(n==10&&(n=0),e[n++]=r,e[n++]=o)}var er=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let i=r+1,s=o+1;for(let a=1;i<this.width&&this.map[t+a]==n;a++)i++;for(let a=1;s<this.height&&this.map[t+this.width*a]==n;a++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(e);return t=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:s,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,!(o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s)&&t.push(s))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==e){let s=t+e*this.width;const a=(e+1)*this.width;for(;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}static get(e){return pN(e)||mN(e,uye(e))}};function uye(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=dye(e),n=e.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const f=e.child(c);u++;for(let y=0;;y++){for(;o<r.length&&r[o]!=0;)o++;if(y==f.childCount)break;const b=f.child(y),{colspan:w,rowspan:S,colwidth:E}=b.attrs;for(let T=0;T<S;T++){if(T+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:S-T});break}const A=o+T*t;for(let M=0;M<w;M++){r[A+M]==0?r[A+M]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:w-M});const R=E&&E[M];if(R){const O=(A+M)%t*2,I=s[O];I==null||I!=R&&s[O+1]==1?(s[O]=R,s[O+1]=1):I==R&&s[O+1]++}}}o+=w,u+=b.nodeSize}const p=(c+1)*t;let m=0;for(;o<p;)r[o++]==0&&m++;m&&(i||(i=[])).push({type:"missing",row:c,n:m}),u++}(t===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const a=new er(t,n,r,i);let l=!1;for(let c=0;!l&&c<s.length;c+=2)s[c]!=null&&s[c+1]<n&&(l=!0);return l&&fye(a,s,e),a}function dye(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let i=0;if(n)for(let s=0;s<r;s++){const a=e.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let s=0;s<o.childCount;s++){const a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=i:t!=i&&(t=Math.max(t,i))}return t}function fye(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%e.width,f=t[u*2];f!=null&&(!l.colwidth||l.colwidth[c]!=f)&&((a||(a=hye(l)))[c]=f)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function hye(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function ni(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var Xu=new Ht("selectingCells");function qm(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function pye(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function ec(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function UO(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=qm(t.$head)||mye(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function mye(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function gN(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function gye(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function GO(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Zq(e,t,n){const r=e.node(-1),o=er.get(r),i=e.start(-1),s=o.nextCell(e.pos-i,t,n);return s==null?null:e.node(0).resolve(i+s)}function oh(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function Wq(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function yye(e,t,n){const r=ni(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var wn=class Pc extends rt{constructor(t,n=t){const r=t.node(-1),o=er.get(r),i=t.start(-1),s=o.rectBetween(t.pos-i,n.pos-i),a=t.node(0),l=o.cellsInRect(s).filter(u=>u!=n.pos-i);l.unshift(n.pos-i);const c=l.map(u=>{const f=r.nodeAt(u);if(!f)throw RangeError(`No cell with offset ${u} found`);const p=i+u+1;return new _G(a.resolve(p),a.resolve(p+f.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(gN(r)&&gN(o)&&GO(r,o)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?Pc.rowSelection(r,o):i&&this.isColSelection()?Pc.colSelection(r,o):new Pc(r,o)}return Fe.between(r,o)}content(){const t=this.$anchorCell.node(-1),n=er.get(t),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},s=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let u=l*n.width+o.left,f=o.left;f<o.right;f++,u++){const p=n.map[u];if(i[p])continue;i[p]=!0;const m=n.findCell(p);let y=t.nodeAt(p);if(!y)throw RangeError(`No cell with offset ${p} found`);const b=o.left-m.left,w=m.right-o.right;if(b>0||w>0){let S=y.attrs;if(b>0&&(S=oh(S,0,b)),w>0&&(S=oh(S,S.colspan-w,w)),m.left<o.left){if(y=y.type.createAndFill(S),!y)throw RangeError(`Could not create cell with attrs ${JSON.stringify(S)}`)}else y=y.type.create(S,y.content)}if(m.top<o.top||m.bottom>o.bottom){const S={...y.attrs,rowspan:Math.min(m.bottom,o.bottom)-Math.max(m.top,o.top)};m.top<o.top?y=y.type.createAndFill(S):y=y.type.create(S,y.content)}c.push(y)}s.push(t.child(l).copy(ge.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:s;return new Ee(ge.from(a),1,1)}replace(t,n=Ee.empty){const r=t.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){const{$from:a,$to:l}=o[s],c=t.mapping.slice(r);t.replace(c.map(a.pos),c.map(l.pos),s?Ee.empty:n)}const i=rt.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);i&&t.setSelection(i)}replaceWith(t,n){this.replace(t,new Ee(ge.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=er.get(n),o=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let s=0;s<i.length;s++)t(n.nodeAt(i[s]),o+i[s])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),o=er.get(r),i=t.start(-1),s=o.findCell(t.pos-i),a=o.findCell(n.pos-i),l=t.node(0);return s.top<=a.top?(s.top>0&&(t=l.resolve(i+o.map[s.left])),a.bottom<o.height&&(n=l.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(i+o.map[a.left])),s.bottom<o.height&&(t=l.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))),new Pc(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=er.get(t),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(o,i)>0)return!1;const s=o+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==n.width}eq(t){return t instanceof Pc&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),o=er.get(r),i=t.start(-1),s=o.findCell(t.pos-i),a=o.findCell(n.pos-i),l=t.node(0);return s.left<=a.left?(s.left>0&&(t=l.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(n=l.resolve(i+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(t=l.resolve(i+o.map[o.width*(s.top+1)-1]))),new Pc(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new Pc(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new Pc(t.resolve(n),t.resolve(r))}getBookmark(){return new bye(this.$anchorCell.pos,this.$headCell.pos)}};wn.prototype.visible=!1;rt.jsonID("cell",wn);var bye=class Kq{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Kq(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&GO(n,r)?new wn(n,r):rt.near(r,1)}};function vye(e){if(!(e.selection instanceof wn))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(Zt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Rt.create(e.doc,t)}function xye({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(let i=t.depth;i>=0&&!(t.before(i+1)>t.start(i));i--,r--);return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}function wye({$from:e,$to:t}){let n,r;for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&t.parentOffset===0}function Sye(e,t,n){const r=(t||e).selection,o=(t||e).doc;let i,s;if(r instanceof Ke&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=wn.create(o,r.from);else if(s=="row"){const a=o.resolve(r.from+1);i=wn.rowSelection(a,a)}else if(!n){const a=er.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];i=wn.create(o,l+1,c)}}else r instanceof Fe&&xye(r)?i=Fe.create(o,r.from):r instanceof Fe&&wye(r)&&(i=Fe.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}var Yq=new Ht("fix-tables");function Jq(e,t,n,r){const o=e.childCount,i=t.childCount;e:for(let s=0,a=0;s<i;s++){const l=t.child(s);for(let c=a,u=Math.min(o,s+3);c<u;c++)if(e.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&e.child(a).sameMarkup(l)?Jq(e.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function kye(e,t){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=Cye(e,o,i,n))};return t?t.doc!=e.doc&&Jq(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Cye(e,t,n,r){const o=er.get(t);if(!o.problems)return r;r||(r=e.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=t.nodeAt(c.pos);if(!u)continue;const f=u.attrs;for(let p=0;p<f.rowspan;p++)i[c.row+p]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,oh(f,f.colspan-c.n,c.n))}else if(c.type=="missing")i[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=t.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=t.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+t.nodeSize)}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(s==null&&(s=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=t.child(l),f=c+u.nodeSize,p=i[l];if(p>0){let m="cell";u.firstChild&&(m=u.firstChild.type.spec.tableRole);const y=[];for(let w=0;w<p;w++){const S=ni(e.schema)[m].createAndFill();S&&y.push(S)}const b=(l==0||s==l-1)&&a==l?c+1:f-1;r.insert(r.mapping.map(b),y)}c=f}return r.setMeta(Yq,{fixTables:!0})}function tc(e){const t=e.selection,n=UO(e),r=n.node(-1),o=n.start(-1),i=er.get(r);return{...t instanceof wn?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function Xq(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;yye(t,r,o+i)&&(i=o==0||o==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+o;if(o>0&&o<t.width&&t.map[a-1]==t.map[a]){const l=t.map[a],c=r.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,Wq(c.attrs,o-t.colCount(l))),s+=c.attrs.rowspan-1}else{const l=i==null?ni(r.type.schema).cell:r.nodeAt(t.map[a+i]).type,c=t.positionAt(s,o,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function Eye(e,t){if(!ec(e))return!1;if(t){const n=tc(e);t(Xq(e.tr,n,n.left))}return!0}function Tye(e,t){if(!ec(e))return!1;if(t){const n=tc(e);t(Xq(e.tr,n,n.right))}return!0}function _ye(e,{map:t,table:n,tableStart:r},o){const i=e.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+o,l=t.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&t.map[a-1]==l||o<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(i).map(r+l),null,oh(u,o-t.colCount(l)));else{const f=e.mapping.slice(i).map(r+l);e.delete(f,f+c.nodeSize)}s+=u.rowspan}}function Aye(e,t){if(!ec(e))return!1;if(t){const n=tc(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;_ye(r,n,o),o!=n.left;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=er.get(i)}t(r)}return!0}function Mye(e,t,n){var r;const o=ni(t.type.schema).header_cell;for(let i=0;i<e.width;i++)if(((r=t.nodeAt(e.map[i+n*e.width]))==null?void 0:r.type)!=o)return!1;return!0}function Qq(e,{map:t,tableStart:n,table:r},o){var i;let s=n;for(let c=0;c<o;c++)s+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;Mye(t,r,o+l)&&(l=o==0||o==t.height?null:0);for(let c=0,u=t.width*o;c<t.width;c++,u++)if(o>0&&o<t.height&&t.map[u]==t.map[u-t.width]){const f=t.map[u],p=r.nodeAt(f).attrs;e.setNodeMarkup(n+f,null,{...p,rowspan:p.rowspan+1}),c+=p.colspan-1}else{const f=l==null?ni(r.type.schema).cell:(i=r.nodeAt(t.map[u+l*t.width]))==null?void 0:i.type,p=f?.createAndFill();p&&a.push(p)}return e.insert(s,ni(r.type.schema).row.create(null,a)),e}function Nye(e,t){if(!ec(e))return!1;if(t){const n=tc(e);t(Qq(e.tr,n,n.top))}return!0}function Rye(e,t){if(!ec(e))return!1;if(t){const n=tc(e);t(Qq(e.tr,n,n.bottom))}return!0}function Iye(e,{map:t,table:n,tableStart:r},o){let i=0;for(let c=0;c<o;c++)i+=n.child(c).nodeSize;const s=i+n.child(o).nodeSize,a=e.mapping.maps.length;e.delete(i+r,s+r);const l=new Set;for(let c=0,u=o*t.width;c<t.width;c++,u++){const f=t.map[u];if(!l.has(f)){if(l.add(f),o>0&&f==t.map[u-t.width]){const p=n.nodeAt(f).attrs;e.setNodeMarkup(e.mapping.slice(a).map(f+r),null,{...p,rowspan:p.rowspan-1}),c+=p.colspan-1}else if(o<t.height&&f==t.map[u+t.width]){const p=n.nodeAt(f),m=p.attrs,y=p.type.create({...m,rowspan:p.attrs.rowspan-1},p.content),b=t.positionAt(o+1,c,n);e.insert(e.mapping.slice(a).map(r+b),y),c+=m.colspan-1}}}}function Oye(e,t){if(!ec(e))return!1;if(t){const n=tc(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;Iye(r,n,o),o!=n.top;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=er.get(n.table)}t(r)}return!0}function h9(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function Pye({width:e,height:t,map:n},r){let o=r.top*e+r.left,i=o,s=(r.bottom-1)*e+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<e&&n[a]==n[a+1])return!0;i+=e,a+=e}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-e]||r.bottom<t&&n[s]==n[s+e])return!0;o++,s++}return!1}function Dye(e,t){const n=e.selection;if(!(n instanceof wn)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=tc(e),{map:o}=r;if(Pye(o,r))return!1;if(t){const i=e.tr,s={};let a=ge.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let f=r.left;f<r.right;f++){const p=o.map[u*o.width+f],m=r.table.nodeAt(p);if(!(s[p]||!m))if(s[p]=!0,l==null)l=p,c=m;else{h9(m)||(a=a.append(m.content));const y=i.mapping.map(p+r.tableStart);i.delete(y,y+m.nodeSize)}}if(l==null||c==null)return!0;if(i.setNodeMarkup(l+r.tableStart,null,{...Wq(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,f=h9(c)?l+1:u;i.replaceWith(f+r.tableStart,u+r.tableStart,a)}i.setSelection(new wn(i.doc.resolve(l+r.tableStart))),t(i)}return!0}function $ye(e,t){const n=ni(e.schema);return jye(({node:r})=>n[r.type.spec.tableRole])(e,t)}function jye(e){return(t,n)=>{var r;const o=t.selection;let i,s;if(o instanceof wn){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=pye(o.$from),!i)return!1;s=(r=qm(o.$from))==null?void 0:r.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=tc(t),f=t.tr;for(let m=0;m<u.right-u.left;m++)l.push(c?{...a,colwidth:c&&c[m]?[c[m]]:null}:a);let p;for(let m=u.top;m<u.bottom;m++){let y=u.map.positionAt(m,u.left,u.table);m==u.top&&(y+=i.nodeSize);for(let b=u.left,w=0;b<u.right;b++,w++)b==u.left&&m==u.top||f.insert(p=f.mapping.map(y+u.tableStart,1),e({node:i,row:m,col:b}).createAndFill(l[w]))}f.setNodeMarkup(s,e({node:i,row:u.top,col:u.left}),l[0]),o instanceof wn&&f.setSelection(new wn(f.doc.resolve(o.$anchorCell.pos),p?f.doc.resolve(p):void 0)),n(f)}return!0}}function Lye(e){return function(t,n){if(!ec(t))return!1;if(n){const r=ni(t.schema),o=tc(t),i=t.tr,s=o.map.cellsInRect(e=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:e=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(l=>o.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length==0)for(let l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function p9(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let o=0;o<r.length;o++){const i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function qO(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?Lye(e):function(n,r){if(!ec(n))return!1;if(r){const o=ni(n.schema),i=tc(n),s=n.tr,a=p9("row",i,o),l=p9("column",i,o),u=(e==="column"?a:e==="row"?l:!1)?1:0,f=e=="column"?{left:0,top:u,right:1,bottom:i.map.height}:e=="row"?{left:u,top:0,right:i.map.width,bottom:1}:i,p=e=="column"?l?o.cell:o.header_cell:e=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(f).forEach(m=>{const y=m+i.tableStart,b=s.doc.nodeAt(y);b&&s.setNodeMarkup(y,p,b.attrs)}),r(s)}return!0}}qO("row",{useDeprecatedLogic:!0});qO("column",{useDeprecatedLogic:!0});qO("cell",{useDeprecatedLogic:!0});function zye(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,o=e.before();r>=0;r--){const i=e.node(-1).child(r),s=i.lastChild;if(s)return o-1-s.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),o=e.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function m9(e){return function(t,n){if(!ec(t))return!1;const r=zye(UO(t),e);if(r==null)return!1;if(n){const o=t.doc.resolve(r);n(t.tr.setSelection(Fe.between(o,gye(o))).scrollIntoView())}return!0}}function K1(e,t){const n=e.selection;if(!(n instanceof wn))return!1;if(t){const r=e.tr,o=ni(e.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new Ee(o,0,0))}),r.docChanged&&t(r)}return!0}function Bye(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.child(0).type.spec.tableRole=="table");)n--,r--,t=t.child(0).content;const o=t.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let l=0;l<t.childCount;l++){let c=t.child(l).content;const u=l?0:Math.max(0,n-1),f=l<t.childCount-1?0:Math.max(0,r-1);(u||f)&&(c=yN(ni(s).row,new Ee(c,u,f)).content),a.push(c)}else if(i=="cell"||i=="header_cell")a.push(n||r?yN(ni(s).row,new Ee(t,n,r)).content:t);else return null;return Fye(s,a)}function Fye(e,t){const n=[];for(let o=0;o<t.length;o++){const i=t[o];for(let s=i.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=i.child(s).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(ge.empty),n[o]<r){const i=ni(e).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);t[o]=t[o].append(ge.from(s))}return{height:t.length,width:r,rows:t}}function yN(e,t){const n=e.createAndFill();return new Nd(n).replace(0,n.content.size,t).doc}function Vye({width:e,height:t,rows:n},r,o){if(e!=r){const i=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=i[a]||0,f=0;u<r;f++){let p=l.child(f%l.childCount);u+p.attrs.colspan>r&&(p=p.type.createChecked(oh(p.attrs,p.attrs.colspan,u+p.attrs.colspan-r),p.content)),c.push(p),u+=p.attrs.colspan;for(let m=1;m<p.attrs.rowspan;m++)i[a+m]=(i[a+m]||0)+p.attrs.colspan}s.push(ge.from(c))}n=s,e=r}if(t!=o){const i=[];for(let s=0,a=0;s<o;s++,a++){const l=[],c=n[a%t];for(let u=0;u<c.childCount;u++){let f=c.child(u);s+f.attrs.rowspan>o&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,o-f.attrs.rowspan)},f.content)),l.push(f)}i.push(ge.from(l))}n=i,t=o}return{width:e,height:t,rows:n}}function Hye(e,t,n,r,o,i,s){const a=e.doc.type.schema,l=ni(a);let c,u;if(o>t.width)for(let f=0,p=0;f<t.height;f++){const m=n.child(f);p+=m.nodeSize;const y=[];let b;m.lastChild==null||m.lastChild.type==l.cell?b=c||(c=l.cell.createAndFill()):b=u||(u=l.header_cell.createAndFill());for(let w=t.width;w<o;w++)y.push(b);e.insert(e.mapping.slice(s).map(p-1+r),y)}if(i>t.height){const f=[];for(let y=0,b=(t.height-1)*t.width;y<Math.max(t.width,o);y++){const w=y>=t.width?!1:n.nodeAt(t.map[b+y]).type==l.header_cell;f.push(w?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const p=l.row.create(null,ge.from(f)),m=[];for(let y=t.height;y<i;y++)m.push(p);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),m)}return!!(c||u)}function g9(e,t,n,r,o,i,s,a){if(s==0||s==t.height)return!1;let l=!1;for(let c=o;c<i;c++){const u=s*t.width+c,f=t.map[u];if(t.map[u-t.width]==f){l=!0;const p=n.nodeAt(f),{top:m,left:y}=t.findCell(f);e.setNodeMarkup(e.mapping.slice(a).map(f+r),null,{...p.attrs,rowspan:s-m}),e.insert(e.mapping.slice(a).map(t.positionAt(s,y,n)),p.type.createAndFill({...p.attrs,rowspan:m+p.attrs.rowspan-s})),c+=p.attrs.colspan-1}}return l}function y9(e,t,n,r,o,i,s,a){if(s==0||s==t.width)return!1;let l=!1;for(let c=o;c<i;c++){const u=c*t.width+s,f=t.map[u];if(t.map[u-1]==f){l=!0;const p=n.nodeAt(f),m=t.colCount(f),y=e.mapping.slice(a).map(f+r);e.setNodeMarkup(y,null,oh(p.attrs,s-m,p.attrs.colspan-(s-m))),e.insert(y+p.nodeSize,p.type.createAndFill(oh(p.attrs,0,s-m))),c+=p.attrs.rowspan-1}}return l}function b9(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let s=er.get(i);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,f=e.tr;let p=0;function m(){if(i=n?f.doc.nodeAt(n-1):f.doc,!i)throw new Error("No table found");s=er.get(i),p=f.mapping.maps.length}Hye(f,s,i,n,c,u,p)&&m(),g9(f,s,i,n,l,c,a,p)&&m(),g9(f,s,i,n,l,c,u,p)&&m(),y9(f,s,i,n,a,u,l,p)&&m(),y9(f,s,i,n,a,u,c,p)&&m();for(let y=a;y<u;y++){const b=s.positionAt(y,l,i),w=s.positionAt(y,c,i);f.replace(f.mapping.slice(p).map(b+n),f.mapping.slice(p).map(w+n),new Ee(o.rows[y-a],0,0))}m(),f.setSelection(new wn(f.doc.resolve(n+s.positionAt(a,l,i)),f.doc.resolve(n+s.positionAt(u-1,c-1,i)))),t(f)}var Uye=OO({ArrowLeft:Y1("horiz",-1),ArrowRight:Y1("horiz",1),ArrowUp:Y1("vert",-1),ArrowDown:Y1("vert",1),"Shift-ArrowLeft":J1("horiz",-1),"Shift-ArrowRight":J1("horiz",1),"Shift-ArrowUp":J1("vert",-1),"Shift-ArrowDown":J1("vert",1),Backspace:K1,"Mod-Backspace":K1,Delete:K1,"Mod-Delete":K1});function rw(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Y1(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof wn)return rw(n,r,rt.near(i.$headCell,t));if(e!="horiz"&&!i.empty)return!1;const s=eZ(o,e,t);if(s==null)return!1;if(e=="horiz")return rw(n,r,rt.near(n.doc.resolve(i.head+t),t));{const a=n.doc.resolve(s),l=Zq(a,e,t);let c;return l?c=rt.near(l,1):t<0?c=rt.near(n.doc.resolve(a.before(-1)),-1):c=rt.near(n.doc.resolve(a.after(-1)),1),rw(n,r,c)}}}function J1(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof wn)s=i;else{const l=eZ(o,e,t);if(l==null)return!1;s=new wn(n.doc.resolve(l))}const a=Zq(s.$headCell,e,t);return a?rw(n,r,new wn(s.$anchorCell,a)):!1}}function Gye(e,t){const n=e.state.doc,r=qm(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new wn(r))),!0):!1}function qye(e,t,n){if(!ec(e.state))return!1;let r=Bye(n);const o=e.state.selection;if(o instanceof wn){r||(r={width:1,height:1,rows:[ge.from(yN(ni(e.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=er.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=Vye(r,a.right-a.left,a.bottom-a.top),b9(e.state,e.dispatch,s,a,r),!0}else if(r){const i=UO(e.state),s=i.start(-1);return b9(e.state,e.dispatch,s,er.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function Zye(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=v9(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof wn)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(o=qm(e.state.selection.$anchor))!=null&&((n=S_(e,t))==null?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(l,c){let u=S_(e,c);const f=Xu.getState(e.state)==null;if(!u||!GO(l,u))if(f)u=l;else return;const p=new wn(l,u);if(f||!e.state.selection.eq(p)){const m=e.state.tr.setSelection(p);f&&m.setMeta(Xu,l.pos),e.dispatch(m)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),Xu.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Xu,-1))}function a(l){const c=l,u=Xu.getState(e.state);let f;if(u!=null)f=e.state.doc.resolve(u);else if(v9(e,c.target)!=r&&(f=S_(e,t),!f))return s();f&&i(f,c)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function eZ(e,t,n){if(!(e.state.selection instanceof Fe))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const a=r.before(o),l=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function v9(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function S_(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?qm(e.state.doc.resolve(n.pos)):null}var tZ=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),bN(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,bN(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function bN(e,t,n,r,o,i){var s;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let f=0,p=0;f<u.childCount;f++){const{colspan:m,colwidth:y}=u.child(f).attrs;for(let b=0;b<m;b++,p++){const w=o==p?i:y&&y[b],S=w?w+"px":"";if(a+=w||r,w||(l=!1),c)c.style.width!=S&&(c.style.width=S),c=c.nextSibling;else{const E=document.createElement("col");E.style.width=S,t.appendChild(E)}}}for(;c;){const f=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=f}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var ws=new Ht("tableColumnResizing");function Wye({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=tZ,lastColumnResizable:o=!0}={}){const i=new kt({key:ws,state:{init(s,a){var l,c;const u=(c=(l=i.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,f=ni(a.schema).table.name;return r&&u&&(u[f]=(p,m)=>new r(p,n,m)),new Kye(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=ws.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{Yye(s,a,e,o)},mouseleave:s=>{Jye(s)},mousedown:(s,a)=>{Xye(s,a,t,n)}},decorations:s=>{const a=ws.getState(s);if(a&&a.activeHandle>-1)return r0e(s,a.activeHandle)},nodeViews:{}}});return i}var Kye=class ow{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){const n=this,r=t.getMeta(ws);if(r&&r.setHandle!=null)return new ow(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new ow(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let o=t.mapping.map(n.activeHandle,-1);return gN(t.doc.resolve(o))||(o=-1),new ow(o,n.dragging)}return n}};function Yye(e,t,n,r){if(!e.editable)return;const o=ws.getState(e.state);if(o&&!o.dragging){const i=e0e(t.target);let s=-1;if(i){const{left:a,right:l}=i.getBoundingClientRect();t.clientX-a<=n?s=x9(e,t,"left",n):l-t.clientX<=n&&(s=x9(e,t,"right",n))}if(s!=o.activeHandle){if(!r&&s!==-1){const a=e.state.doc.resolve(s),l=a.node(-1),c=er.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}nZ(e,s)}}}function Jye(e){if(!e.editable)return;const t=ws.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&nZ(e,-1)}function Xye(e,t,n,r){var o;if(!e.editable)return!1;const i=(o=e.dom.ownerDocument.defaultView)!=null?o:window,s=ws.getState(e.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=e.state.doc.nodeAt(s.activeHandle),l=Qye(e,s.activeHandle,a.attrs);e.dispatch(e.state.tr.setMeta(ws,{setDragging:{startX:t.clientX,startWidth:l}}));function c(f){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",u);const p=ws.getState(e.state);p?.dragging&&(t0e(e,p.activeHandle,w9(p.dragging,f,n)),e.dispatch(e.state.tr.setMeta(ws,{setDragging:null})))}function u(f){if(!f.which)return c(f);const p=ws.getState(e.state);if(p&&p.dragging){const m=w9(p.dragging,f,n);S9(e,p.activeHandle,m,r)}}return S9(e,s.activeHandle,l,r),i.addEventListener("mouseup",c),i.addEventListener("mousemove",u),t.preventDefault(),!0}function Qye(e,t,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=e.domAtPos(t);let a=i.node.childNodes[i.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function e0e(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function x9(e,t,n,r){const o=n=="right"?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;const{pos:s}=i,a=qm(e.state.doc.resolve(s));if(!a)return-1;if(n=="right")return a.pos;const l=er.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function w9(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function nZ(e,t){e.dispatch(e.state.tr.setMeta(ws,{setHandle:t}))}function t0e(e,t,n){const r=e.state.doc.resolve(t),o=r.node(-1),i=er.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<i.height;c++){const u=c*i.width+a;if(c&&i.map[u]==i.map[u-i.width])continue;const f=i.map[u],p=o.nodeAt(f).attrs,m=p.colspan==1?0:a-i.colCount(f);if(p.colwidth&&p.colwidth[m]==n)continue;const y=p.colwidth?p.colwidth.slice():n0e(p.colspan);y[m]=n,l.setNodeMarkup(s+f,null,{...p,colwidth:y})}l.docChanged&&e.dispatch(l)}function S9(e,t,n,r){const o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=er.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let l=e.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&bN(i,l.firstChild,l,r,a,n)}function n0e(e){return Array(e).fill(0)}function r0e(e,t){var n;const r=[],o=e.doc.resolve(t),i=o.node(-1);if(!i)return Rt.empty;const s=er.get(i),a=o.start(-1),l=s.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const u=l+c*s.width;if((l==s.width-1||s.map[u]!=s.map[u+1])&&(c==0||s.map[u]!=s.map[u-s.width])){const f=s.map[u],p=a+f+i.nodeAt(f).nodeSize-1,m=document.createElement("div");m.className="column-resize-handle",(n=ws.getState(e))!=null&&n.dragging&&r.push(Zt.node(a+f,a+f+i.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(Zt.widget(p,m))}}return Rt.create(e.doc,r)}function o0e({allowTableNodeSelection:e=!1}={}){return new kt({key:Xu,state:{init(){return null},apply(t,n){const r=t.getMeta(Xu);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:o,pos:i}=t.mapping.mapResult(n);return o?null:i}},props:{decorations:vye,handleDOMEvents:{mousedown:Zye},createSelectionBetween(t){return Xu.getState(t.state)!=null?t.state.selection:null},handleTripleClick:Gye,handleKeyDown:Uye,handlePaste:qye},appendTransaction(t,n,r){return Sye(r,kye(r,n),e)}})}class wr extends rt{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return wr.valid(r)?new wr(r):rt.near(r)}content(){return Ee.empty}eq(t){return t instanceof wr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new wr(t.resolve(n.pos))}getBookmark(){return new ZO(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!i0e(t)||!s0e(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(t.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&wr.valid(t))return t;let o=t.pos,i=null;for(let s=t.depth;;s--){let a=t.node(s);if(n>0?t.indexAfter(s)<a.childCount:t.index(s)>0){i=a.child(n>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;o+=n;let l=t.doc.resolve(o);if(wr.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!Ke.isSelectable(i)){t=t.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=t.doc.resolve(o);if(wr.valid(a))return a}return null}}}wr.prototype.visible=!1;wr.findFrom=wr.findGapCursorFrom;rt.jsonID("gapcursor",wr);class ZO{constructor(t){this.pos=t}map(t){return new ZO(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return wr.valid(n)?new wr(n):rt.near(n)}}function i0e(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function s0e(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function a0e(){return new kt({props:{decorations:d0e,createSelectionBetween(e,t,n){return t.pos==n.pos&&wr.valid(n)?new wr(n):null},handleClick:c0e,handleKeyDown:l0e,handleDOMEvents:{beforeinput:u0e}}})}const l0e=OO({ArrowLeft:X1("horiz",-1),ArrowRight:X1("horiz",1),ArrowUp:X1("vert",-1),ArrowDown:X1("vert",1)});function X1(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,o,i){let s=r.selection,a=t>0?s.$to:s.$from,l=s.empty;if(s instanceof Fe){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=wr.findGapCursorFrom(a,t,l);return c?(o&&o(r.tr.setSelection(new wr(c))),!0):!1}}function c0e(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!wr.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Ke.isSelectable(e.state.doc.nodeAt(o.inside))?!1:(e.dispatch(e.state.tr.setSelection(new wr(r))),!0)}function u0e(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof wr))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=ge.empty;for(let s=r.length-1;s>=0;s--)o=ge.from(r[s].createAndFill(null,o));let i=e.state.tr.replace(n.pos,n.pos,new Ee(o,0,0));return i.setSelection(Fe.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function d0e(e){if(!(e.selection instanceof wr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Rt.create(e.doc,[Zt.widget(e.selection.head,t,{key:"gapcursor"})])}const f0e=On.create({name:"gapCursor",addProseMirrorPlugins(){return[a0e()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Lt(Ze(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}});var Zw=200,wo=function(){};wo.prototype.append=function(t){return t.length?(t=wo.from(t),!this.length&&t||t.length<Zw&&this.leafAppend(t)||this.length<Zw&&t.leafPrepend(this)||this.appendInner(t)):this};wo.prototype.prepend=function(t){return t.length?wo.from(t).append(this):this};wo.prototype.appendInner=function(t){return new h0e(this,t)};wo.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?wo.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};wo.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};wo.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};wo.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(t(i,s))},n,r),o};wo.from=function(t){return t instanceof wo?t:t&&t.length?new rZ(t):wo.empty};var rZ=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new t(this.values.slice(o,i))},t.prototype.getInner=function(o){return this.values[o]},t.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(o){if(this.length+o.length<=Zw)return new t(this.values.concat(o.flatten()))},t.prototype.leafPrepend=function(o){if(this.length+o.length<=Zw)return new t(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(wo);wo.empty=new rZ([]);var h0e=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},t.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},t.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new t(this.left,o)},t.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new t(o,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(wo);const p0e=500;let P0=class Op{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=t.tr,a,l,c=[],u=[];return this.items.forEach((f,p)=>{if(!f.step){o||(o=this.remapping(r,p+1),i=o.maps.length),i--,u.push(f);return}if(o){u.push(new Lu(f.map));let m=f.step.map(o.slice(i)),y;m&&s.maybeStep(m).doc&&(y=s.mapping.maps[s.mapping.maps.length-1],c.push(new Lu(y,void 0,void 0,c.length+u.length))),i--,y&&o.appendMap(y,i)}else s.maybeStep(f.step);if(f.selection)return a=o?f.selection.map(o.slice(i)):f.selection,l=new Op(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(t,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let f=t.steps[u].invert(t.docs[u]),p=new Lu(t.mapping.maps[u],f,n),m;(m=l&&l.merge(p))&&(p=m,u?i.pop():a=a.slice(0,a.length-1)),i.push(p),n&&(s++,n=void 0),o||(l=p)}let c=s-r.depth;return c>g0e&&(a=m0e(a,c),s-=c),new Op(a.append(i),s)}remapping(t,n){let r=new Qf;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=t?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},t,n),r}addMaps(t){return this.eventCount==0?this:new Op(this.items.append(t.map(n=>new Lu(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},o);let l=n;this.items.forEach(p=>{let m=i.getMirror(--l);if(m==null)return;s=Math.min(s,m);let y=i.maps[m];if(p.step){let b=t.steps[m].invert(t.docs[m]),w=p.selection&&p.selection.map(i.slice(l+1,m));w&&a++,r.push(new Lu(y,b,w))}else r.push(new Lu(y))},o);let c=[];for(let p=n;p<s;p++)c.push(new Lu(i.maps[p]));let u=this.items.slice(0,o).append(c).append(r),f=new Op(u,a);return f.emptyItemCount()>p0e&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=t)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let f=new Lu(c.invert(),l,u),p,m=o.length-1;(p=o.length&&o[m].merge(f))?o[m]=p:o.push(f)}}else s.map&&r--},this.items.length,0),new Op(wo.from(o.reverse()),i)}};P0.empty=new P0(wo.empty,0);function m0e(e,t){let n;return e.forEach((r,o)=>{if(r.selection&&t--==0)return n=o,!1}),e.slice(n)}let Lu=class oZ{constructor(t,n,r,o){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=o}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new oZ(n.getMap().invert(),n,this.selection)}}};class Wu{constructor(t,n,r,o,i){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const g0e=20;function y0e(e,t,n,r){let o=n.getMeta(Gf),i;if(o)return o.historyState;n.getMeta(x0e)&&(e=new Wu(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(s&&s.getMeta(Gf))return s.getMeta(Gf).redo?new Wu(e.done.addTransform(n,void 0,r,iw(t)),e.undone,k9(n.mapping.maps),e.prevTime,e.prevComposition):new Wu(e.done,e.undone.addTransform(n,void 0,r,iw(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!s&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!b0e(n,e.prevRanges)),c=s?k_(e.prevRanges,n.mapping):k9(n.mapping.maps);return new Wu(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,iw(t)),P0.empty,c,n.time,a??e.prevComposition)}else return(i=n.getMeta("rebased"))?new Wu(e.done.rebased(n,i),e.undone.rebased(n,i),k_(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Wu(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),k_(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function b0e(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<t.length;i+=2)r<=t[i+1]&&o>=t[i]&&(n=!0)}),n}function k9(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,o,i,s)=>t.push(i,s));return t}function k_(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function v0e(e,t,n){let r=iw(t),o=Gf.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),l=new Wu(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(Gf,{redo:n,historyState:l})}let C_=!1,C9=null;function iw(e){let t=e.plugins;if(C9!=t){C_=!1,C9=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){C_=!0;break}}return C_}const Gf=new Ht("history"),x0e=new Ht("closeHistory");function w0e(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new kt({key:Gf,state:{init(){return new Wu(P0.empty,P0.empty,null,0,-1)},apply(t,n,r){return y0e(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,o=r=="historyUndo"?WO:r=="historyRedo"?KO:null;return o?(n.preventDefault(),o(t.state,t.dispatch)):!1}}}})}function iZ(e,t){return(n,r)=>{let o=Gf.getState(n);if(!o||(e?o.undone:o.done).eventCount==0)return!1;if(r){let i=v0e(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}const WO=iZ(!1,!0),KO=iZ(!0,!0),S0e=On.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>WO(e,t),redo:()=>({state:e,dispatch:t})=>KO(e,t)}},addProseMirrorPlugins(){return[w0e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),k0e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",C0e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",vN="numeric",xN="ascii",wN="alpha",Xy="asciinumeric",$y="alphanumeric",SN="domain",sZ="emoji",E0e="scheme",T0e="slashscheme",E_="whitespace";function _0e(e,t){return e in t||(t[e]=[]),t[e]}function Rf(e,t,n){t[vN]&&(t[Xy]=!0,t[$y]=!0),t[xN]&&(t[Xy]=!0,t[wN]=!0),t[Xy]&&(t[$y]=!0),t[wN]&&(t[$y]=!0),t[$y]&&(t[SN]=!0),t[sZ]&&(t[SN]=!0);for(const r in t){const o=_0e(r,n);o.indexOf(e)<0&&o.push(e)}}function A0e(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Pi(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Pi.groups={};Pi.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const o=t.jr[r][0],i=t.jr[r][1];if(i&&o.test(e))return i}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr(e,t,n,r){r=r||Pi.groups;let o;return t&&t.j?o=t:(o=new Pi(t),n&&r&&Rf(t,n,r)),this.jr.push([e,o]),o},ts(e,t,n,r){let o=this;const i=e.length;if(!i)return o;for(let s=0;s<i-1;s++)o=o.tt(e[s]);return o.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||Pi.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const i=t;let s,a=o.go(e);if(a?(s=new Pi,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Pi,i){if(r)if(s.t&&typeof s.t=="string"){const l=Object.assign(A0e(s.t,r),n);Rf(i,l,r)}else n&&Rf(i,n,r);s.t=i}return o.j[e]=s,s}};const At=(e,t,n,r,o)=>e.ta(t,n,r,o),vr=(e,t,n,r,o)=>e.tr(t,n,r,o),E9=(e,t,n,r,o)=>e.ts(t,n,r,o),Te=(e,t,n,r,o)=>e.tt(t,n,r,o),Dc="WORD",kN="UWORD",aZ="ASCIINUMERICAL",lZ="ALPHANUMERICAL",D0="LOCALHOST",CN="TLD",EN="UTLD",sw="SCHEME",Pp="SLASH_SCHEME",YO="NUM",TN="WS",JO="NL",Qy="OPENBRACE",e0="CLOSEBRACE",Ww="OPENBRACKET",Kw="CLOSEBRACKET",Yw="OPENPAREN",Jw="CLOSEPAREN",Xw="OPENANGLEBRACKET",Qw="CLOSEANGLEBRACKET",eS="FULLWIDTHLEFTPAREN",tS="FULLWIDTHRIGHTPAREN",nS="LEFTCORNERBRACKET",rS="RIGHTCORNERBRACKET",oS="LEFTWHITECORNERBRACKET",iS="RIGHTWHITECORNERBRACKET",sS="FULLWIDTHLESSTHAN",aS="FULLWIDTHGREATERTHAN",lS="AMPERSAND",cS="APOSTROPHE",uS="ASTERISK",Ku="AT",dS="BACKSLASH",fS="BACKTICK",hS="CARET",Qu="COLON",XO="COMMA",pS="DOLLAR",El="DOT",mS="EQUALS",QO="EXCLAMATION",Qs="HYPHEN",t0="PERCENT",gS="PIPE",yS="PLUS",bS="POUND",n0="QUERY",e4="QUOTE",cZ="FULLWIDTHMIDDLEDOT",t4="SEMI",Tl="SLASH",r0="TILDE",vS="UNDERSCORE",uZ="EMOJI",xS="SYM";var dZ=Object.freeze({__proto__:null,ALPHANUMERICAL:lZ,AMPERSAND:lS,APOSTROPHE:cS,ASCIINUMERICAL:aZ,ASTERISK:uS,AT:Ku,BACKSLASH:dS,BACKTICK:fS,CARET:hS,CLOSEANGLEBRACKET:Qw,CLOSEBRACE:e0,CLOSEBRACKET:Kw,CLOSEPAREN:Jw,COLON:Qu,COMMA:XO,DOLLAR:pS,DOT:El,EMOJI:uZ,EQUALS:mS,EXCLAMATION:QO,FULLWIDTHGREATERTHAN:aS,FULLWIDTHLEFTPAREN:eS,FULLWIDTHLESSTHAN:sS,FULLWIDTHMIDDLEDOT:cZ,FULLWIDTHRIGHTPAREN:tS,HYPHEN:Qs,LEFTCORNERBRACKET:nS,LEFTWHITECORNERBRACKET:oS,LOCALHOST:D0,NL:JO,NUM:YO,OPENANGLEBRACKET:Xw,OPENBRACE:Qy,OPENBRACKET:Ww,OPENPAREN:Yw,PERCENT:t0,PIPE:gS,PLUS:yS,POUND:bS,QUERY:n0,QUOTE:e4,RIGHTCORNERBRACKET:rS,RIGHTWHITECORNERBRACKET:iS,SCHEME:sw,SEMI:t4,SLASH:Tl,SLASH_SCHEME:Pp,SYM:xS,TILDE:r0,TLD:CN,UNDERSCORE:vS,UTLD:EN,UWORD:kN,WORD:Dc,WS:TN});const _c=/[a-z]/,xy=new RegExp("\\p{L}","u"),T_=new RegExp("\\p{Emoji}","u"),Ac=/\d/,__=/\s/,T9="\r",A_=`
`,M0e="",N0e="",M_="";let Q1=null,ex=null;function R0e(e=[]){const t={};Pi.groups=t;const n=new Pi;Q1==null&&(Q1=_9(k0e)),ex==null&&(ex=_9(C0e)),Te(n,"'",cS),Te(n,"{",Qy),Te(n,"}",e0),Te(n,"[",Ww),Te(n,"]",Kw),Te(n,"(",Yw),Te(n,")",Jw),Te(n,"<",Xw),Te(n,">",Qw),Te(n,"",eS),Te(n,"",tS),Te(n,"",nS),Te(n,"",rS),Te(n,"",oS),Te(n,"",iS),Te(n,"",sS),Te(n,"",aS),Te(n,"&",lS),Te(n,"*",uS),Te(n,"@",Ku),Te(n,"`",fS),Te(n,"^",hS),Te(n,":",Qu),Te(n,",",XO),Te(n,"$",pS),Te(n,".",El),Te(n,"=",mS),Te(n,"!",QO),Te(n,"-",Qs),Te(n,"%",t0),Te(n,"|",gS),Te(n,"+",yS),Te(n,"#",bS),Te(n,"?",n0),Te(n,'"',e4),Te(n,"/",Tl),Te(n,";",t4),Te(n,"~",r0),Te(n,"_",vS),Te(n,"\\",dS),Te(n,"",cZ);const r=vr(n,Ac,YO,{[vN]:!0});vr(r,Ac,r);const o=vr(r,_c,aZ,{[Xy]:!0}),i=vr(r,xy,lZ,{[$y]:!0}),s=vr(n,_c,Dc,{[xN]:!0});vr(s,Ac,o),vr(s,_c,s),vr(o,Ac,o),vr(o,_c,o);const a=vr(n,xy,kN,{[wN]:!0});vr(a,_c),vr(a,Ac,i),vr(a,xy,a),vr(i,Ac,i),vr(i,_c),vr(i,xy,i);const l=Te(n,A_,JO,{[E_]:!0}),c=Te(n,T9,TN,{[E_]:!0}),u=vr(n,__,TN,{[E_]:!0});Te(n,M_,u),Te(c,A_,l),Te(c,M_,u),vr(c,__,u),Te(u,T9),Te(u,A_),vr(u,__,u),Te(u,M_,u);const f=vr(n,T_,uZ,{[sZ]:!0});Te(f,"#"),vr(f,T_,f),Te(f,M0e,f);const p=Te(f,N0e);Te(p,"#"),vr(p,T_,f);const m=[[_c,s],[Ac,o]],y=[[_c,null],[xy,a],[Ac,i]];for(let b=0;b<Q1.length;b++)zu(n,Q1[b],CN,Dc,m);for(let b=0;b<ex.length;b++)zu(n,ex[b],EN,kN,y);Rf(CN,{tld:!0,ascii:!0},t),Rf(EN,{utld:!0,alpha:!0},t),zu(n,"file",sw,Dc,m),zu(n,"mailto",sw,Dc,m),zu(n,"http",Pp,Dc,m),zu(n,"https",Pp,Dc,m),zu(n,"ftp",Pp,Dc,m),zu(n,"ftps",Pp,Dc,m),Rf(sw,{scheme:!0,ascii:!0},t),Rf(Pp,{slashscheme:!0,ascii:!0},t),e=e.sort((b,w)=>b[0]>w[0]?1:-1);for(let b=0;b<e.length;b++){const w=e[b][0],E=e[b][1]?{[E0e]:!0}:{[T0e]:!0};w.indexOf("-")>=0?E[SN]=!0:_c.test(w)?Ac.test(w)?E[Xy]=!0:E[xN]=!0:E[vN]=!0,E9(n,w,w,E)}return E9(n,"localhost",D0,{ascii:!0}),n.jd=new Pi(xS),{start:n,tokens:Object.assign({groups:t},dZ)}}function fZ(e,t){const n=I0e(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=e,l=null,c=0,u=null,f=-1,p=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(f=0,p=0,u=a):f>=0&&(f+=n[s].length,p++),c+=n[s].length,i+=n[s].length,s++;i-=f,s-=p,c-=f,o.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return o}function I0e(e){const t=[],n=e.length;let r=0;for(;r<n;){let o=e.charCodeAt(r),i,s=o<55296||o>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(s),r+=s.length}return t}function zu(e,t,n,r,o){let i;const s=t.length;for(let a=0;a<s-1;a++){const l=t[a];e.j[l]?i=e.j[l]:(i=new Pi(r),i.jr=o.slice(),e.j[l]=i),e=i}return i=new Pi(n),i.jr=o.slice(),e.j[t[s-1]]=i,i}function _9(e){const t=[],n=[];let r=0,o="0123456789";for(;r<e.length;){let i=0;for(;o.indexOf(e[r+i])>=0;)i++;if(i>0){t.push(n.join(""));for(let s=parseInt(e.substring(r,r+i),10);s>0;s--)n.pop();r+=i}else n.push(e[r]),r++}return t}const $0={defaultProtocol:"http",events:null,format:A9,formatHref:A9,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function n4(e,t=null){let n=Object.assign({},$0);e&&(n=Object.assign(n,e instanceof n4?e.o:e));const r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}n4.prototype={o:$0,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let o=this.o[e];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:$0[e],typeof o=="function"&&r&&(o=o(t,n))):typeof o=="function"&&r&&(o=o(t,n.t,n)),o)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function A9(e){return e}function hZ(e,t){this.t="token",this.v=e,this.tk=t}hZ.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=$0.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),o=e.get("tagName",n,t),i=this.toFormattedString(e),s={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),u&&Object.assign(s,u),{tagName:o,attributes:s,content:i,eventListeners:f}}};function vC(e,t){class n extends hZ{constructor(o,i){super(o,i),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const M9=vC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),N9=vC("text"),O0e=vC("nl"),tx=vC("url",{isLink:!0,toHref(e=$0.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==D0&&e[1].t===Qu}}),Ks=e=>new Pi(e);function P0e({groups:e}){const t=e.domain.concat([lS,uS,Ku,dS,fS,hS,pS,mS,Qs,YO,t0,gS,yS,bS,Tl,xS,r0,vS]),n=[cS,Qu,XO,El,QO,t0,n0,e4,t4,Xw,Qw,Qy,e0,Kw,Ww,Yw,Jw,eS,tS,nS,rS,oS,iS,sS,aS],r=[lS,cS,uS,dS,fS,hS,pS,mS,Qs,Qy,e0,t0,gS,yS,bS,n0,Tl,xS,r0,vS],o=Ks(),i=Te(o,r0);At(i,r,i),At(i,e.domain,i);const s=Ks(),a=Ks(),l=Ks();At(o,e.domain,s),At(o,e.scheme,a),At(o,e.slashscheme,l),At(s,r,i),At(s,e.domain,s);const c=Te(s,Ku);Te(i,Ku,c),Te(a,Ku,c),Te(l,Ku,c);const u=Te(i,El);At(u,r,i),At(u,e.domain,i);const f=Ks();At(c,e.domain,f),At(f,e.domain,f);const p=Te(f,El);At(p,e.domain,f);const m=Ks(M9);At(p,e.tld,m),At(p,e.utld,m),Te(c,D0,m);const y=Te(f,Qs);Te(y,Qs,y),At(y,e.domain,f),At(m,e.domain,f),Te(m,El,p),Te(m,Qs,y);const b=Te(m,Qu);At(b,e.numeric,M9);const w=Te(s,Qs),S=Te(s,El);Te(w,Qs,w),At(w,e.domain,s),At(S,r,i),At(S,e.domain,s);const E=Ks(tx);At(S,e.tld,E),At(S,e.utld,E),At(E,e.domain,s),At(E,r,i),Te(E,El,S),Te(E,Qs,w),Te(E,Ku,c);const T=Te(E,Qu),A=Ks(tx);At(T,e.numeric,A);const M=Ks(tx),R=Ks();At(M,t,M),At(M,n,R),At(R,t,M),At(R,n,R),Te(E,Tl,M),Te(A,Tl,M);const O=Te(a,Qu),I=Te(l,Qu),L=Te(I,Tl),$=Te(L,Tl);At(a,e.domain,s),Te(a,El,S),Te(a,Qs,w),At(l,e.domain,s),Te(l,El,S),Te(l,Qs,w),At(O,e.domain,M),Te(O,Tl,M),Te(O,n0,M),At($,e.domain,M),At($,t,M),Te($,Tl,M);const B=[[Qy,e0],[Ww,Kw],[Yw,Jw],[Xw,Qw],[eS,tS],[nS,rS],[oS,iS],[sS,aS]];for(let G=0;G<B.length;G++){const[V,W]=B[G],K=Te(M,V);Te(R,V,K),Te(K,W,M);const F=Ks(tx);At(K,t,F);const q=Ks();At(K,n),At(F,t,F),At(F,n,q),At(q,t,F),At(q,n,q),Te(F,W,M),Te(q,W,M)}return Te(o,D0,E),Te(o,JO,O0e),{start:o,tokens:dZ}}function D0e(e,t,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=e,l=null,c=null,u=0,f=null,p=-1;for(;o<r&&!(l=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(p=0,f=a):p>=0&&p++,o++,u++;if(p<0)o-=u,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(N_(N9,t,s)),s=[]),o-=p,u-=p;const m=f.t,y=n.slice(o-u,o);i.push(N_(m,t,y))}}return s.length>0&&i.push(N_(N9,t,s)),i}function N_(e,t,n){const r=n[0].s,o=n[n.length-1].e,i=t.slice(r,o);return new e(i,n)}const $0e=typeof console<"u"&&console&&console.warn||(()=>{}),j0e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",qn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function L0e(){return Pi.groups={},qn.scanner=null,qn.parser=null,qn.tokenQueue=[],qn.pluginQueue=[],qn.customSchemes=[],qn.initialized=!1,qn}function R9(e,t=!1){if(qn.initialized&&$0e(`linkifyjs: already initialized - will not register custom scheme "${e}" ${j0e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);qn.customSchemes.push([e,t])}function z0e(){qn.scanner=R0e(qn.customSchemes);for(let e=0;e<qn.tokenQueue.length;e++)qn.tokenQueue[e][1]({scanner:qn.scanner});qn.parser=P0e(qn.scanner.tokens);for(let e=0;e<qn.pluginQueue.length;e++)qn.pluginQueue[e][1]({scanner:qn.scanner,parser:qn.parser});return qn.initialized=!0,qn}function r4(e){return qn.initialized||z0e(),D0e(qn.parser.start,e,fZ(qn.scanner.start,e))}r4.scan=fZ;function pZ(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new n4(n),o=r4(e),i=[];for(let s=0;s<o.length;s++){const a=o[s];a.isLink&&(!t||a.t===t)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}const o4="[\0- -\u2029]",B0e=new RegExp(o4),F0e=new RegExp(`${o4}$`),V0e=new RegExp(o4,"g");function H0e(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function U0e(e){return new kt({key:new Ht("autolink"),appendTransaction:(t,n,r)=>{const o=t.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=t.some(c=>c.getMeta("preventAutolink"));if(!o||i)return;const{tr:s}=r,a=FO(n.doc,[...t]);if($q(a).forEach(({newRange:c})=>{const u=Pq(r.doc,c,m=>m.isTextblock);let f,p;if(u.length>1)f=u[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(u.length){const m=r.doc.textBetween(c.from,c.to," "," ");if(!F0e.test(m))return;f=u[0],p=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&p){const m=p.split(B0e).filter(Boolean);if(m.length<=0)return!1;const y=m[m.length-1],b=f.pos+p.lastIndexOf(y);if(!y)return!1;const w=r4(y).map(S=>S.toObject(e.defaultProtocol));if(!H0e(w))return!1;w.filter(S=>S.isLink).map(S=>({...S,from:b+S.start+1,to:b+S.end+1})).filter(S=>r.schema.marks.code?!r.doc.rangeHasMark(S.from,S.to,r.schema.marks.code):!0).filter(S=>e.validate(S.value)).filter(S=>e.shouldAutoLink(S.value)).forEach(S=>{VO(S.from,S.to,r.doc).some(E=>E.mark.type===e.type)||s.addMark(S.from,S.to,e.type.create({href:S.href}))})}}),!!s.steps.length)return s}})}function G0e(e){return new kt({key:new Ht("handleClickLink"),props:{handleClick:(t,n,r)=>{var o,i;if(r.button!==0||!t.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(p=>p.nodeName==="A"))return!1;const l=Dq(t.state,e.type.name),c=r.target,u=(o=c?.href)!==null&&o!==void 0?o:l.href,f=(i=c?.target)!==null&&i!==void 0?i:l.target;return c&&u?(window.open(u,f),!0):!1}}})}function q0e(e){return new kt({key:new Ht("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:o}=t,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=pZ(a,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:e.editor.commands.setMark(e.type,{href:l.href})}}})}function cf(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!e||e.replace(V0e,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Z0e=$o.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){R9(e);return}R9(e.scheme,e.optionalSlashes)})},onDestroy(){L0e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!cf(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!cf(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!cf(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Cs(this.options.HTMLAttributes,e),0]:["a",Cs(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!cf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!cf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[rh({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,o=pZ(e).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:s=>!!cf(s,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(i=>t.push({text:i.value,data:{href:i.href},index:i.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(U0e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!cf(o,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(G0e({type:this.type})),this.options.linkOnPaste&&e.push(q0e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),W0e=Ql.create({name:"text",group:"inline"}),fa=()=>new Map,_N=e=>{const t=fa();return e.forEach((n,r)=>{t.set(r,n)}),t},nc=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},K0e=(e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n},Y0e=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},ih=()=>new Set,R_=e=>e[e.length-1],J0e=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},md=Array.from,X0e=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},AN=Array.isArray;class mZ{constructor(){this._observers=fa()}on(t,n){return nc(this._observers,t,ih).add(n),n}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return md((this._observers.get(t)||fa()).values()).forEach(r=>r(...n))}destroy(){this._observers=fa()}}const Yc=Math.floor,aw=Math.abs,Gc=(e,t)=>e<t?e:t,Ja=(e,t)=>e>t?e:t,gZ=e=>e!==0?e<0:1/e<0,I9=1,O9=2,I_=4,O_=8,j0=32,qc=64,gi=128,Q0e=1<<29,xC=31,MN=63,qf=127,ebe=2147483647,yZ=Number.MAX_SAFE_INTEGER,tbe=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&Yc(e)===e),nbe=String.fromCharCode,rbe=e=>e.toLowerCase(),obe=/^\s*/g,ibe=e=>e.replace(obe,""),sbe=/([A-Z])/g,P9=(e,t)=>ibe(e.replace(sbe,n=>`${t}${rbe(n)}`)),abe=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r},L0=typeof TextEncoder<"u"?new TextEncoder:null,lbe=e=>L0.encode(e),cbe=L0?lbe:abe;let o0=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});o0&&o0.decode(new Uint8Array).length===1&&(o0=null);class Ub{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Gb=()=>new Ub,ube=e=>{const t=Gb();return e(t),Ha(t)},dbe=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},Ha=e=>{const t=new Uint8Array(dbe(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},fbe=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(Ja(n,t)*2),e.cpos=0)},bo=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},NN=bo,Vt=(e,t)=>{for(;t>qf;)bo(e,gi|qf&t),t=Yc(t/128);bo(e,qf&t)},i4=(e,t)=>{const n=gZ(t);for(n&&(t=-t),bo(e,(t>MN?gi:0)|(n?qc:0)|MN&t),t=Yc(t/64);t>0;)bo(e,(t>qf?gi:0)|qf&t),t=Yc(t/128)},RN=new Uint8Array(3e4),hbe=RN.length/3,pbe=(e,t)=>{if(t.length<hbe){const n=L0.encodeInto(t,RN).written||0;Vt(e,n);for(let r=0;r<n;r++)bo(e,RN[r])}else ms(e,cbe(t))},mbe=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;Vt(e,r);for(let o=0;o<r;o++)bo(e,n.codePointAt(o))},tm=L0&&L0.encodeInto?pbe:mbe,wC=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=Gc(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Ja(n*2,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},ms=(e,t)=>{Vt(e,t.byteLength),wC(e,t)},s4=(e,t)=>{fbe(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},gbe=(e,t)=>s4(e,4).setFloat32(0,t,!1),ybe=(e,t)=>s4(e,8).setFloat64(0,t,!1),bbe=(e,t)=>s4(e,8).setBigInt64(0,t,!1),D9=new DataView(new ArrayBuffer(4)),vbe=e=>(D9.setFloat32(0,e),D9.getFloat32(0)===e),km=(e,t)=>{switch(typeof t){case"string":bo(e,119),tm(e,t);break;case"number":tbe(t)&&aw(t)<=ebe?(bo(e,125),i4(e,t)):vbe(t)?(bo(e,124),gbe(e,t)):(bo(e,123),ybe(e,t));break;case"bigint":bo(e,122),bbe(e,t);break;case"object":if(t===null)bo(e,126);else if(AN(t)){bo(e,117),Vt(e,t.length);for(let n=0;n<t.length;n++)km(e,t[n])}else if(t instanceof Uint8Array)bo(e,116),ms(e,t);else{bo(e,118);const n=Object.keys(t);Vt(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];tm(e,o),km(e,t[o])}}break;case"boolean":bo(e,t?120:121);break;default:bo(e,127)}};class $9 extends Ub{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&Vt(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const j9=e=>{e.count>0&&(i4(e.encoder,e.count===1?e.s:-e.s),e.count>1&&Vt(e.encoder,e.count-2))};class lw{constructor(){this.encoder=new Ub,this.s=0,this.count=0}write(t){this.s===t?this.count++:(j9(this),this.count=1,this.s=t)}toUint8Array(){return j9(this),Ha(this.encoder)}}const L9=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);i4(e.encoder,t),e.count>1&&Vt(e.encoder,e.count-2)}};class P_{constructor(){this.encoder=new Ub,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(L9(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return L9(this),Ha(this.encoder)}}class xbe{constructor(){this.sarr=[],this.s="",this.lensE=new lw}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Ub;return this.sarr.push(this.s),this.s="",tm(t,this.sarr.join("")),wC(t,this.lensE.toUint8Array()),Ha(t)}}const gd=e=>new Error(e),Wa=()=>{throw gd("Method unimplemented")},Es=()=>{throw gd("Unexpected case")},bZ=gd("Unexpected end of array"),vZ=gd("Integer out of Range");class SC{constructor(t){this.arr=t,this.pos=0}}const Zm=e=>new SC(e),wbe=e=>e.pos!==e.arr.length,Sbe=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},gs=e=>Sbe(e,Dt(e)),Cm=e=>e.arr[e.pos++],Dt=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const o=e.arr[e.pos++];if(t=t+(o&qf)*n,n*=128,o<gi)return t;if(t>yZ)throw vZ}throw bZ},a4=e=>{let t=e.arr[e.pos++],n=t&MN,r=64;const o=(t&qc)>0?-1:1;if((t&gi)===0)return o*n;const i=e.arr.length;for(;e.pos<i;){if(t=e.arr[e.pos++],n=n+(t&qf)*r,r*=128,t<gi)return o*n;if(n>yZ)throw vZ}throw bZ},kbe=e=>{let t=Dt(e);if(t===0)return"";{let n=String.fromCodePoint(Cm(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Cm(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},Cbe=e=>o0.decode(gs(e)),nm=o0?Cbe:kbe,l4=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},Ebe=e=>l4(e,4).getFloat32(0,!1),Tbe=e=>l4(e,8).getFloat64(0,!1),_be=e=>l4(e,8).getBigInt64(0,!1),Abe=[e=>{},e=>null,a4,Ebe,Tbe,_be,e=>!1,e=>!0,nm,e=>{const t=Dt(e),n={};for(let r=0;r<t;r++){const o=nm(e);n[o]=z0(e)}return n},e=>{const t=Dt(e),n=[];for(let r=0;r<t;r++)n.push(z0(e));return n},gs],z0=e=>Abe[127-Cm(e)](e);class z9 extends SC{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),wbe(this)?this.count=Dt(this)+1:this.count=-1),this.count--,this.s}}class cw extends SC{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=a4(this);const t=gZ(this.s);this.count=1,t&&(this.s=-this.s,this.count=Dt(this)+2)}return this.count--,this.s}}class D_ extends SC{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=a4(this),n=t&1;this.diff=Yc(t/2),this.count=1,n&&(this.count=Dt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Mbe{constructor(t){this.decoder=new cw(t),this.str=nm(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const Nbe=crypto.getRandomValues.bind(crypto),Rbe=Math.random,xZ=()=>Nbe(new Uint32Array(1))[0],Ibe=e=>e[Yc(Rbe()*e.length)],Obe="10000000-1000-4000-8000"+-1e11,Pbe=()=>Obe.replace(/[018]/g,e=>(e^xZ()&15>>e/4).toString(16)),Dbe=Date.now,B9=e=>new Promise(e);Promise.all.bind(Promise);const F9=e=>e===void 0?null:e;class $be{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let wZ=new $be,jbe=!0;try{typeof localStorage<"u"&&localStorage&&(wZ=localStorage,jbe=!1)}catch{}const Lbe=wZ,zbe=Object.assign,SZ=Object.keys,Bbe=(e,t)=>{for(const n in e)t(e[n],n)},V9=e=>SZ(e).length,Fbe=e=>{for(const t in e)return!1;return!0},kZ=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},Vbe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Hbe=(e,t)=>e===t||V9(e)===V9(t)&&kZ(e,(n,r)=>(n!==void 0||Vbe(t,r))&&t[r]===n),Ube=Object.freeze,CZ=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&CZ(e[t])}return Ube(e)},c4=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&c4(e,t,n+1)}},Gbe=e=>e,qbe=(e,t)=>t.includes(e);var EZ={};const Em=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",TZ=typeof window<"u"&&typeof document<"u"&&!Em;let Sl;const Zbe=()=>{if(Sl===void 0)if(Em){Sl=fa();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Sl.set(t,""),t=r):t!==null&&(Sl.set(t,r),t=null)}t!==null&&Sl.set(t,"")}else typeof location=="object"?(Sl=fa(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Sl.set(`--${P9(t,"-")}`,n),Sl.set(`-${P9(t,"-")}`,n)}})):Sl=fa();return Sl},IN=e=>Zbe().has(e),wS=e=>F9(Em?EZ[e.toUpperCase().replaceAll("-","_")]:Lbe.getItem(e)),_Z=e=>IN("--"+e)||wS(e)!==null;_Z("production");const Wbe=Em&&qbe(EZ.FORCE_COLOR,["true","1","2"]),Kbe=Wbe||!IN("--no-colors")&&!_Z("no-color")&&(!Em||process.stdout.isTTY)&&(!Em||IN("--color")||wS("COLORTERM")!==null||(wS("TERM")||"").includes("color")),Ybe=e=>new Uint8Array(e),Jbe=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=nbe(e[n]);return btoa(t)},Xbe=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),Qbe=TZ?Jbe:Xbe,eve=e=>{const t=Ybe(e.byteLength);return t.set(e),t},tve=e=>ube(t=>km(t,e));class nve{constructor(t,n){this.left=t,this.right=n}}const Mc=(e,t)=>new nve(e,t),rve=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const ove=e=>K0e(e,(t,n)=>`${n}:${t};`).join(""),ive=e=>class{constructor(n){this._=n}destroy(){e(this._)}},sve=ive(clearTimeout),u4=(e,t)=>new sve(setTimeout(t,e)),su=Symbol,AZ=su(),MZ=su(),ave=su(),lve=su(),cve=su(),NZ=su(),uve=su(),d4=su(),dve=su(),fve=e=>{e.length===1&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const o=e[r];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const o=e[r];o instanceof Symbol||n.push(o)}return n},hve={[AZ]:Mc("font-weight","bold"),[MZ]:Mc("font-weight","normal"),[ave]:Mc("color","blue"),[cve]:Mc("color","green"),[lve]:Mc("color","grey"),[NZ]:Mc("color","red"),[uve]:Mc("color","purple"),[d4]:Mc("color","orange"),[dve]:Mc("color","black")},pve=e=>{e.length===1&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[],r=fa();let o=[],i=0;for(;i<e.length;i++){const s=e[i],a=hve[s];if(a!==void 0)r.set(a.left,a.right);else{if(s===void 0)break;if(s.constructor===String||s.constructor===Number){const l=ove(r);i>0||l.length>0?(t.push("%c"+s),n.push(l)):t.push(s)}else break}}for(i>0&&(o=n,o.unshift(t.join("")));i<e.length;i++){const s=e[i];s instanceof Symbol||o.push(s)}return o},RZ=Kbe?pve:fve,mve=(...e)=>{console.log(...RZ(e)),OZ.forEach(t=>t.print(e))},IZ=(...e)=>{console.warn(...RZ(e)),e.unshift(d4),OZ.forEach(t=>t.print(e))},OZ=ih(),PZ=e=>({[Symbol.iterator](){return this},next:e}),gve=(e,t)=>PZ(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),$_=(e,t)=>PZ(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class f4{constructor(t,n){this.clock=t,this.len=n}}class Wm{constructor(){this.clients=new Map}}const yd=(e,t,n)=>t.clients.forEach((r,o)=>{const i=e.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],a=s.id.clock+s.length;for(let l=0,c=r[l];l<r.length&&c.clock<a;c=r[++l])KZ(e,i,c.clock,c.len,n)}}),yve=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=Yc((n+r)/2),i=e[o],s=i.clock;if(s<=t){if(t<s+i.len)return o;n=o+1}else r=o-1}return null},Km=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&yve(n,t.clock)!==null},h4=e=>{e.clients.forEach(t=>{t.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const o=t[r-1],i=t[n];o.clock+o.len>=i.clock?o.len=Ja(o.len,i.clock+i.len-o.clock):(r<n&&(t[r]=i),r++)}t.length=r})},ON=e=>{const t=new Wm;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let s=n+1;s<e.length;s++)J0e(i,e[s].clients.get(o)||[]);t.clients.set(o,i)}});return h4(t),t},B0=(e,t,n,r)=>{nc(e.clients,t,()=>[]).push(new f4(n,r))},DZ=()=>new Wm,$Z=e=>{const t=DZ();return e.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const a=s.id.clock;let l=s.length;if(i+1<n.length)for(let c=n[i+1];i+1<n.length&&c.deleted;c=n[++i+1])l+=c.length;o.push(new f4(a,l))}}o.length>0&&t.clients.set(r,o)}),t},Ym=(e,t)=>{Vt(e.restEncoder,t.clients.size),md(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),Vt(e.restEncoder,n);const o=r.length;Vt(e.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},p4=e=>{const t=new Wm,n=Dt(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const o=Dt(e.restDecoder),i=Dt(e.restDecoder);if(i>0){const s=nc(t.clients,o,()=>[]);for(let a=0;a<i;a++)s.push(new f4(e.readDsClock(),e.readDsLen()))}}return t},H9=(e,t,n)=>{const r=new Wm,o=Dt(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const s=Dt(e.restDecoder),a=Dt(e.restDecoder),l=n.clients.get(s)||[],c=Or(n,s);for(let u=0;u<a;u++){const f=e.readDsClock(),p=f+e.readDsLen();if(f<c){c<p&&B0(r,s,c,p-c);let m=ma(l,f),y=l[m];for(!y.deleted&&y.id.clock<f&&(l.splice(m+1,0,AS(t,y,f-y.id.clock)),m++);m<l.length&&(y=l[m++],y.id.clock<p);)y.deleted||(p<y.id.clock+y.length&&l.splice(m,0,AS(t,y,p-y.id.clock)),y.delete(t))}else B0(r,s,f,p-f)}}if(r.clients.size>0){const i=new sh;return Vt(i.restEncoder,0),Ym(i,r),i.toUint8Array()}return null},jZ=xZ;let Jm=class LZ extends mZ{constructor({guid:t=Pbe(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=jZ(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new ZZ,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=B9(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>B9(c=>{const u=f=>{(f===void 0||f===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Mn(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(md(this.subdocs).map(t=>t.guid))}transact(t,n=null){return Mn(this,t,n)}get(t,n=So){const r=nc(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==So&&o!==n)if(o===So){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,im)}getText(t=""){return this.get(t,bd)}getMap(t=""){return this.get(t,_m)}getXmlElement(t=""){return this.get(t,hi)}getXmlFragment(t=""){return this.get(t,ah)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,md(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new LZ({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,Mn(t.parent.doc,r=>{const o=n.doc;t.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}};class zZ{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return Dt(this.restDecoder)}readDsLen(){return Dt(this.restDecoder)}}class BZ extends zZ{readLeftID(){return wt(Dt(this.restDecoder),Dt(this.restDecoder))}readRightID(){return wt(Dt(this.restDecoder),Dt(this.restDecoder))}readClient(){return Dt(this.restDecoder)}readInfo(){return Cm(this.restDecoder)}readString(){return nm(this.restDecoder)}readParentInfo(){return Dt(this.restDecoder)===1}readTypeRef(){return Dt(this.restDecoder)}readLen(){return Dt(this.restDecoder)}readAny(){return z0(this.restDecoder)}readBuf(){return eve(gs(this.restDecoder))}readJSON(){return JSON.parse(nm(this.restDecoder))}readKey(){return nm(this.restDecoder)}}class bve{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Dt(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Dt(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Tm extends bve{constructor(t){super(t),this.keys=[],Dt(t),this.keyClockDecoder=new D_(gs(t)),this.clientDecoder=new cw(gs(t)),this.leftClockDecoder=new D_(gs(t)),this.rightClockDecoder=new D_(gs(t)),this.infoDecoder=new z9(gs(t),Cm),this.stringDecoder=new Mbe(gs(t)),this.parentInfoDecoder=new z9(gs(t),Cm),this.typeRefDecoder=new cw(gs(t)),this.lenDecoder=new cw(gs(t))}readLeftID(){return new rm(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new rm(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return z0(this.restDecoder)}readBuf(){return gs(this.restDecoder)}readJSON(){return z0(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class FZ{constructor(){this.restEncoder=Gb()}toUint8Array(){return Ha(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){Vt(this.restEncoder,t)}writeDsLen(t){Vt(this.restEncoder,t)}}class qb extends FZ{writeLeftID(t){Vt(this.restEncoder,t.client),Vt(this.restEncoder,t.clock)}writeRightID(t){Vt(this.restEncoder,t.client),Vt(this.restEncoder,t.clock)}writeClient(t){Vt(this.restEncoder,t)}writeInfo(t){NN(this.restEncoder,t)}writeString(t){tm(this.restEncoder,t)}writeParentInfo(t){Vt(this.restEncoder,t?1:0)}writeTypeRef(t){Vt(this.restEncoder,t)}writeLen(t){Vt(this.restEncoder,t)}writeAny(t){km(this.restEncoder,t)}writeBuf(t){ms(this.restEncoder,t)}writeJSON(t){tm(this.restEncoder,JSON.stringify(t))}writeKey(t){tm(this.restEncoder,t)}}class VZ{constructor(){this.restEncoder=Gb(),this.dsCurrVal=0}toUint8Array(){return Ha(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,Vt(this.restEncoder,n)}writeDsLen(t){t===0&&Es(),Vt(this.restEncoder,t-1),this.dsCurrVal+=t}}class sh extends VZ{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new P_,this.clientEncoder=new lw,this.leftClockEncoder=new P_,this.rightClockEncoder=new P_,this.infoEncoder=new $9(NN),this.stringEncoder=new xbe,this.parentInfoEncoder=new $9(NN),this.typeRefEncoder=new lw,this.lenEncoder=new lw}toUint8Array(){const t=Gb();return Vt(t,0),ms(t,this.keyClockEncoder.toUint8Array()),ms(t,this.clientEncoder.toUint8Array()),ms(t,this.leftClockEncoder.toUint8Array()),ms(t,this.rightClockEncoder.toUint8Array()),ms(t,Ha(this.infoEncoder)),ms(t,this.stringEncoder.toUint8Array()),ms(t,Ha(this.parentInfoEncoder)),ms(t,this.typeRefEncoder.toUint8Array()),ms(t,this.lenEncoder.toUint8Array()),wC(t,Ha(this.restEncoder)),Ha(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){km(this.restEncoder,t)}writeBuf(t){ms(this.restEncoder,t)}writeJSON(t){km(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const vve=(e,t,n,r)=>{r=Ja(r,t[0].id.clock);const o=ma(t,r);Vt(e.restEncoder,t.length-o),e.writeClient(n),Vt(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let s=o+1;s<t.length;s++)t[s].write(e,0)},m4=(e,t,n)=>{const r=new Map;n.forEach((o,i)=>{Or(t,i)>o&&r.set(i,o)}),Zb(t).forEach((o,i)=>{n.has(i)||r.set(i,0)}),Vt(e.restEncoder,r.size),md(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{vve(e,t.clients.get(o),o,i)})},xve=(e,t)=>{const n=fa(),r=Dt(e.restDecoder);for(let o=0;o<r;o++){const i=Dt(e.restDecoder),s=new Array(i),a=e.readClient();let l=Dt(e.restDecoder);n.set(a,{i:0,refs:s});for(let c=0;c<i;c++){const u=e.readInfo();switch(xC&u){case 0:{const f=e.readLen();s[c]=new oa(wt(a,l),f),l+=f;break}case 10:{const f=Dt(e.restDecoder);s[c]=new ia(wt(a,l),f),l+=f;break}default:{const f=(u&(qc|gi))===0,p=new Vn(wt(a,l),null,(u&gi)===gi?e.readLeftID():null,null,(u&qc)===qc?e.readRightID():null,f?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,f&&(u&j0)===j0?e.readString():null,yW(e,u));s[c]=p,l+=p.length}}}}return n},wve=(e,t,n)=>{const r=[];let o=md(n.keys()).sort((m,y)=>m-y);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let m=n.get(o[o.length-1]);for(;m.refs.length===m.i;)if(o.pop(),o.length>0)m=n.get(o[o.length-1]);else return null;return m};let s=i();if(s===null)return null;const a=new ZZ,l=new Map,c=(m,y)=>{const b=l.get(m);(b==null||b>y)&&l.set(m,y)};let u=s.refs[s.i++];const f=new Map,p=()=>{for(const m of r){const y=m.id.client,b=n.get(y);b?(b.i--,a.clients.set(y,b.refs.slice(b.i)),n.delete(y),b.i=0,b.refs=[]):a.clients.set(y,[m]),o=o.filter(w=>w!==y)}r.length=0};for(;;){if(u.constructor!==ia){const y=nc(f,u.id.client,()=>Or(t,u.id.client))-u.id.clock;if(y<0)r.push(u),c(u.id.client,u.id.clock-1),p();else{const b=u.getMissing(e,t);if(b!==null){r.push(u);const w=n.get(b)||{refs:[],i:0};if(w.refs.length===w.i)c(b,Or(t,b)),p();else{u=w.refs[w.i++];continue}}else(y===0||y<u.length)&&(u.integrate(e,y),f.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(s!==null&&s.i<s.refs.length)u=s.refs[s.i++];else{if(s=i(),s===null)break;u=s.refs[s.i++]}}if(a.clients.size>0){const m=new sh;return m4(m,a,new Map),Vt(m.restEncoder,0),{missing:l,update:m.toUint8Array()}}return null},Sve=(e,t)=>m4(e,t.doc.store,t.beforeState),kve=(e,t,n,r=new Tm(e))=>Mn(t,o=>{o.local=!1;let i=!1;const s=o.doc,a=s.store,l=xve(r,s),c=wve(o,a,l),u=a.pendingStructs;if(u){for(const[p,m]of u.missing)if(m<Or(a,p)){i=!0;break}if(c){for(const[p,m]of c.missing){const y=u.missing.get(p);(y==null||y>m)&&u.missing.set(p,m)}u.update=kS([u.update,c.update])}}else a.pendingStructs=c;const f=H9(r,o,a);if(a.pendingDs){const p=new Tm(Zm(a.pendingDs));Dt(p.restDecoder);const m=H9(p,o,a);f&&m?a.pendingDs=kS([f,m]):a.pendingDs=f||m}else a.pendingDs=f;if(i){const p=a.pendingStructs.update;a.pendingStructs=null,SS(o.doc,p)}},n,!1),SS=(e,t,n,r=Tm)=>{const o=Zm(t);kve(o,e,n,new r(o))},U9=(e,t,n)=>SS(e,t,n,BZ),Cve=(e,t,n=new Map)=>{m4(e,t.store,n),Ym(e,$Z(t.store))},Eve=(e,t=new Uint8Array([0]),n=new sh)=>{const r=HZ(t);Cve(n,e,r);const o=[n.toUint8Array()];if(e.store.pendingDs&&o.push(e.store.pendingDs),e.store.pendingStructs&&o.push(Uve(e.store.pendingStructs.update,t)),o.length>1){if(n.constructor===qb)return Vve(o.map((i,s)=>s===0?i:qve(i)));if(n.constructor===sh)return kS(o)}return o[0]},G9=(e,t)=>Eve(e,t,new qb),Tve=e=>{const t=new Map,n=Dt(e.restDecoder);for(let r=0;r<n;r++){const o=Dt(e.restDecoder),i=Dt(e.restDecoder);t.set(o,i)}return t},HZ=e=>Tve(new zZ(Zm(e))),UZ=(e,t)=>(Vt(e.restEncoder,t.size),md(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{Vt(e.restEncoder,n),Vt(e.restEncoder,r)}),e),_ve=(e,t)=>UZ(e,Zb(t.store)),Ave=(e,t=new VZ)=>(e instanceof Map?UZ(t,e):_ve(t,e),t.toUint8Array()),Mve=e=>Ave(e,new FZ);class Nve{constructor(){this.l=[]}}const q9=()=>new Nve,Z9=(e,t)=>e.l.push(t),W9=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(o=>t!==o),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},GZ=(e,t,n)=>c4(e.l,[t,n]);class rm{constructor(t,n){this.client=t,this.clock=n}}const Bp=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,wt=(e,t)=>new rm(e,t),F0=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Es()},V0=(e,t)=>{for(;t!==null;){if(t.parent===e)return!0;t=t.parent._item}return!1};class H0{constructor(t,n,r,o=0){this.type=t,this.tname=n,this.item=r,this.assoc=o}}const i0=e=>new H0(e.type==null?null:wt(e.type.client,e.type.clock),e.tname??null,e.item==null?null:wt(e.item.client,e.item.clock),e.assoc==null?0:e.assoc);class Rve{constructor(t,n,r=0){this.type=t,this.index=n,this.assoc=r}}const Ive=(e,t,n=0)=>new Rve(e,t,n),nx=(e,t,n)=>{let r=null,o=null;return e._item===null?o=F0(e):r=wt(e._item.id.client,e._item.id.clock),new H0(r,o,t,n)},j_=(e,t,n=0)=>{let r=e._start;if(n<0){if(t===0)return nx(e,null,n);t--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>t)return nx(e,wt(r.id.client,r.id.clock+t),n);t-=r.length}if(r.right===null&&n<0)return nx(e,r.lastId,n);r=r.right}return nx(e,null,n)},Ove=(e,t)=>{const n=om(e,t),r=t.clock-n.id.clock;return{item:n,diff:r}},Pve=(e,t,n=!0)=>{const r=t.store,o=e.item,i=e.type,s=e.tname,a=e.assoc;let l=null,c=0;if(o!==null){if(Or(r,o.client)<=o.clock)return null;const u=n?jN(r,o):Ove(r,o),f=u.item;if(!(f instanceof Vn))return null;if(l=f.parent,l._item===null||!l._item.deleted){c=f.deleted||!f.countable?0:u.diff+(a>=0?0:1);let p=f.left;for(;p!==null;)!p.deleted&&p.countable&&(c+=p.length),p=p.left}}else{if(s!==null)l=t.get(s);else if(i!==null){if(Or(r,i.client)<=i.clock)return null;const{item:u}=n?jN(r,i):{item:om(r,i)};if(u instanceof Vn&&u.content instanceof rl)l=u.content.type;else return null}else throw Es();a>=0?c=l._length:c=0}return Ive(l,c,e.assoc)},K9=(e,t)=>e===t||e!==null&&t!==null&&e.tname===t.tname&&Bp(e.item,t.item)&&Bp(e.type,t.type)&&e.assoc===t.assoc;class g4{constructor(t,n){this.ds=t,this.sv=n}}const qZ=(e,t)=>new g4(e,t),L_=e=>qZ($Z(e.store),Zb(e.store)),Sf=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Km(t.ds,e.id),PN=(e,t)=>{const n=nc(e.meta,PN,ih),r=e.doc.store;n.has(t)||(t.sv.forEach((o,i)=>{o<Or(r,i)&&ji(e,wt(i,o))}),yd(e,t.ds,o=>{}),n.add(t))};class ZZ{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Zb=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const o=n[n.length-1];t.set(r,o.id.clock+o.length)}),t},Or=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},WZ=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw Es()}n.push(t)},ma=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let s=Yc(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[s],i=o.id.clock,i<=t){if(t<i+o.length)return s;n=s+1}else r=s-1;s=Yc((n+r)/2)}throw Es()},Dve=(e,t)=>{const n=e.clients.get(t.client);return n[ma(n,t.clock)]},om=Dve,DN=(e,t,n)=>{const r=ma(t,n),o=t[r];return o.id.clock<n&&o instanceof Vn?(t.splice(r+1,0,AS(e,o,n-o.id.clock)),r+1):r},ji=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[DN(e,n,t.clock)]},Y9=(e,t,n)=>{const r=t.clients.get(n.client),o=ma(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==oa&&r.splice(o+1,0,AS(e,i,n.clock-i.id.clock+1)),i},$ve=(e,t,n)=>{const r=e.clients.get(t.id.client);r[ma(r,t.id.clock)]=n},KZ=(e,t,n,r,o)=>{if(r===0)return;const i=n+r;let s=DN(e,t,n),a;do a=t[s++],i<a.id.clock+a.length&&DN(e,t,i),o(a);while(s<t.length&&t[s].id.clock<i)};class jve{constructor(t,n,r){this.doc=t,this.deleteSet=new Wm,this.beforeState=Zb(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const J9=(e,t)=>t.deleteSet.clients.size===0&&!Y0e(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(h4(t.deleteSet),Sve(e,t),Ym(e,t.deleteSet),!0),X9=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&nc(e.changed,t,ih).add(n)},uw=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0;n=r,r=e[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Vn&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=t-o;return i&&e.splice(t+1-i,i),i},Lve=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const i=t.clients.get(r);for(let s=o.length-1;s>=0;s--){const a=o[s],l=a.clock+a.len;for(let c=ma(i,a.clock),u=i[c];c<i.length&&u.id.clock<l;u=i[++c]){const f=i[c];if(a.clock+a.len<=f.id.clock)break;f instanceof Vn&&f.deleted&&!f.keep&&n(f)&&f.gc(t,!1)}}}},zve=(e,t)=>{e.clients.forEach((n,r)=>{const o=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],a=Gc(o.length-1,1+ma(o,s.clock+s.len-1));for(let l=a,c=o[l];l>0&&c.id.clock>=s.clock;c=o[l])l-=1+uw(o,l)}})},YZ=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{h4(i),n.afterState=Zb(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(u=>u.target._item===null||!u.target._item.deleted),l.forEach(u=>{u.currentTarget=c,u._path=null}),l.sort((u,f)=>u.path.length-f.path.length),GZ(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),c4(a,[]),n._needFormattingCleanup&&s1e(n)}finally{r.gc&&Lve(i,o,r.gcFilter),zve(i,o),n.afterState.forEach((u,f)=>{const p=n.beforeState.get(f)||0;if(p!==u){const m=o.clients.get(f),y=Ja(ma(m,p),1);for(let b=m.length-1;b>=y;)b-=1+uw(m,b)}});for(let u=s.length-1;u>=0;u--){const{client:f,clock:p}=s[u].id,m=o.clients.get(f),y=ma(m,p);y+1<m.length&&uw(m,y+1)>1||y>0&&uw(m,y)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(mve(d4,AZ,"[yjs] ",MZ,NZ,"Changed the client-id because another client seems to be using it."),r.clientID=jZ()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new qb;J9(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new sh;J9(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(u=>u.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):YZ(e,t+1)}}},Mn=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,s=null;e._transaction===null&&(i=!0,e._transaction=new jve(e,n,r),o.push(e._transaction),o.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(i){const a=e._transaction===o[0];e._transaction=null,a&&YZ(o,0)}}return s};class Bve{constructor(t,n){this.insertions=n,this.deletions=t,this.meta=new Map}}const Q9=(e,t,n)=>{yd(e,n.deletions,r=>{r instanceof Vn&&t.scope.some(o=>o===e.doc||V0(o,r))&&C4(r,!1)})},ez=(e,t,n)=>{let r=null;const o=e.doc,i=e.scope;Mn(o,a=>{for(;t.length>0&&e.currStackItem===null;){const l=o.store,c=t.pop(),u=new Set,f=[];let p=!1;yd(a,c.insertions,m=>{if(m instanceof Vn){if(m.redone!==null){let{item:y,diff:b}=jN(l,m.id);b>0&&(y=ji(a,wt(y.id.client,y.id.clock+b))),m=y}!m.deleted&&i.some(y=>y===a.doc||V0(y,m))&&f.push(m)}}),yd(a,c.deletions,m=>{m instanceof Vn&&i.some(y=>y===a.doc||V0(y,m))&&!Km(c.insertions,m.id)&&u.add(m)}),u.forEach(m=>{p=gW(a,m,u,c.insertions,e.ignoreRemoteMapChanges,e)!==null||p});for(let m=f.length-1;m>=0;m--){const y=f[m];e.deleteFilter(y)&&(y.delete(a),p=!0)}e.currStackItem=p?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},e);const s=e.currStackItem;if(s!=null){const a=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:s,type:n,changedParentTypes:a,origin:e},e]),e.currStackItem=null}return s};class JZ extends mZ{constructor(t,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=AN(t)?t[0].doc:t instanceof Jm?t:t.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(t),this.deleteFilter=o,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(w=>l.changedParentTypes.has(w)||w===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,u=this.redoing,f=c?this.redoStack:this.undoStack;c?this.stopCapturing():u||this.clear(!1,!0);const p=new Wm;l.afterState.forEach((w,S)=>{const E=l.beforeState.get(S)||0,T=w-E;T>0&&B0(p,S,E,T)});const m=Dbe();let y=!1;if(this.lastChange>0&&m-this.lastChange<this.captureTimeout&&f.length>0&&!c&&!u){const w=f[f.length-1];w.deletions=ON([w.deletions,l.deleteSet]),w.insertions=ON([w.insertions,p])}else f.push(new Bve(l.deleteSet,p)),y=!0;!c&&!u&&(this.lastChange=m),yd(l,l.deleteSet,w=>{w instanceof Vn&&this.scope.some(S=>S===l.doc||V0(S,w))&&C4(w,!0)});const b=[{stackItem:f[f.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];y?this.emit("stack-item-added",b):this.emit("stack-item-updated",b)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){const n=new Set(this.scope);t=AN(t)?t:[t],t.forEach(r=>{n.has(r)||(n.add(r),(r instanceof So?r.doc!==this.doc:r!==this.doc)&&IZ("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,n=!0){(t&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{t&&(this.undoStack.forEach(o=>Q9(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>Q9(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let t;try{t=ez(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){this.redoing=!0;let t;try{t=ez(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*Fve(e){const t=Dt(e.restDecoder);for(let n=0;n<t;n++){const r=Dt(e.restDecoder),o=e.readClient();let i=Dt(e.restDecoder);for(let s=0;s<r;s++){const a=e.readInfo();if(a===10){const l=Dt(e.restDecoder);yield new ia(wt(o,i),l),i+=l}else if((xC&a)!==0){const l=(a&(qc|gi))===0,c=new Vn(wt(o,i),null,(a&gi)===gi?e.readLeftID():null,null,(a&qc)===qc?e.readRightID():null,l?e.readParentInfo()?e.readString():e.readLeftID():null,l&&(a&j0)===j0?e.readString():null,yW(e,a));yield c,i+=c.length}else{const l=e.readLen();yield new oa(wt(o,i),l),i+=l}}}}class y4{constructor(t,n){this.gen=Fve(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ia);return this.curr}}class b4{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Vve=e=>kS(e,BZ,qb),Hve=(e,t)=>{if(e.constructor===oa){const{client:n,clock:r}=e.id;return new oa(wt(n,r+t),e.length-t)}else if(e.constructor===ia){const{client:n,clock:r}=e.id;return new ia(wt(n,r+t),e.length-t)}else{const n=e,{client:r,clock:o}=n.id;return new Vn(wt(r,o+t),null,wt(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},kS=(e,t=Tm,n=sh)=>{if(e.length===1)return e[0];const r=e.map(u=>new t(Zm(u)));let o=r.map(u=>new y4(u,!0)),i=null;const s=new n,a=new b4(s);for(;o=o.filter(p=>p.curr!==null),o.sort((p,m)=>{if(p.curr.id.client===m.curr.id.client){const y=p.curr.id.clock-m.curr.id.clock;return y===0?p.curr.constructor===m.curr.constructor?0:p.curr.constructor===ia?1:-1:y}else return m.curr.id.client-p.curr.id.client}),o.length!==0;){const u=o[0],f=u.curr.id.client;if(i!==null){let p=u.curr,m=!1;for(;p!==null&&p.id.clock+p.length<=i.struct.id.clock+i.struct.length&&p.id.client>=i.struct.id.client;)p=u.next(),m=!0;if(p===null||p.id.client!==f||m&&p.id.clock>i.struct.id.clock+i.struct.length)continue;if(f!==i.struct.id.client)ed(a,i.struct,i.offset),i={struct:p,offset:0},u.next();else if(i.struct.id.clock+i.struct.length<p.id.clock)if(i.struct.constructor===ia)i.struct.length=p.id.clock+p.length-i.struct.id.clock;else{ed(a,i.struct,i.offset);const y=p.id.clock-i.struct.id.clock-i.struct.length;i={struct:new ia(wt(f,i.struct.id.clock+i.struct.length),y),offset:0}}else{const y=i.struct.id.clock+i.struct.length-p.id.clock;y>0&&(i.struct.constructor===ia?i.struct.length-=y:p=Hve(p,y)),i.struct.mergeWith(p)||(ed(a,i.struct,i.offset),i={struct:p,offset:0},u.next())}}else i={struct:u.curr,offset:0},u.next();for(let p=u.curr;p!==null&&p.id.client===f&&p.id.clock===i.struct.id.clock+i.struct.length&&p.constructor!==ia;p=u.next())ed(a,i.struct,i.offset),i={struct:p,offset:0}}i!==null&&(ed(a,i.struct,i.offset),i=null),v4(a);const l=r.map(u=>p4(u)),c=ON(l);return Ym(s,c),s.toUint8Array()},Uve=(e,t,n=Tm,r=sh)=>{const o=HZ(t),i=new r,s=new b4(i),a=new n(Zm(e)),l=new y4(a,!1);for(;l.curr;){const u=l.curr,f=u.id.client,p=o.get(f)||0;if(l.curr.constructor===ia){l.next();continue}if(u.id.clock+u.length>p)for(ed(s,u,Ja(p-u.id.clock,0)),l.next();l.curr&&l.curr.id.client===f;)ed(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===f&&l.curr.id.clock+l.curr.length<=p;)l.next()}v4(s);const c=p4(a);return Ym(i,c),i.toUint8Array()},XZ=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:Ha(e.encoder.restEncoder)}),e.encoder.restEncoder=Gb(),e.written=0)},ed=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&XZ(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),Vt(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},v4=e=>{XZ(e);const t=e.encoder.restEncoder;Vt(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];Vt(t,r.written),wC(t,r.restEncoder)}},Gve=(e,t,n,r)=>{const o=new n(Zm(e)),i=new y4(o,!1),s=new r,a=new b4(s);for(let c=i.curr;c!==null;c=i.next())ed(a,t(c),0);v4(a);const l=p4(o);return Ym(s,l),s.toUint8Array()},qve=e=>Gve(e,Gbe,Tm,qb),tz="You must not compute changes after the event-handler fired.";class kC{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Zve(this.currentTarget,this.target))}deletes(t){return Km(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw gd(tz);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,a;if(this.adds(i)){let l=i.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(i))if(l!==null&&this.deletes(l))s="delete",a=R_(l.content.getContent());else return;else l!==null&&this.deletes(l)?(s="update",a=R_(l.content.getContent())):(s="add",a=void 0)}else if(this.deletes(i))s="delete",a=R_(i.content.getContent());else return;t.set(o,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw gd(tz);const n=this.target,r=ih(),o=ih(),i=[];if(t={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&i.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,o.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=t}return t}}const Zve=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,o=t._item.parent._start;for(;o!==t._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}t=t._item.parent}return n},ei=()=>{IZ("Invalid access: Add Yjs type to a document before reading data.")},QZ=80;let x4=0;class Wve{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=x4++}}const Kve=e=>{e.timestamp=x4++},eW=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=x4++},Yve=(e,t,n)=>{if(e.length>=QZ){const r=e.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return eW(r,t,n),r}else{const r=new Wve(t,n);return e.push(r),r}},CC=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,s)=>aw(t-i.index)<aw(t-s.index)?i:s);let r=e._start,o=0;for(n!==null&&(r=n.p,o=n.index,Kve(n));r.right!==null&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&aw(n.index-o)<r.parent.length/QZ?(eW(n,r,o),n):Yve(e._searchMarker,r,o)},U0=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}o.p=i,i.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Ja(t,o.index+n))}},EC=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;nc(o,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;GZ(r._eH,n,t)};class So{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=q9(),this._dEH=q9(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw Wa()}clone(){throw Wa()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Z9(this._eH,t)}observeDeep(t){Z9(this._dEH,t)}unobserve(t){W9(this._eH,t)}unobserveDeep(t){W9(this._dEH,t)}toJSON(){}}const tW=(e,t,n)=>{e.doc??ei(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)o.push(s[a]),r--;t=0}}i=i.right}return o},nW=e=>{e.doc??ei();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)t.push(r[o])}n=n.right}return t},rW=(e,t)=>{const n=[];let r=e._start;for(;r!==null;){if(r.countable&&Sf(r,t)){const o=r.content.getContent();for(let i=0;i<o.length;i++)n.push(o[i])}r=r.right}return n},G0=(e,t)=>{let n=0,r=e._start;for(e.doc??ei();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)t(o[i],n++,e)}r=r.right}},oW=(e,t)=>{const n=[];return G0(e,(r,o)=>{n.push(t(r,o,e))}),n},Jve=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},iW=(e,t)=>{e.doc??ei();const n=CC(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},CS=(e,t,n,r)=>{let o=n;const i=e.doc,s=i.clientID,a=i.store,l=n===null?t._start:n.right;let c=[];const u=()=>{c.length>0&&(o=new Vn(wt(s,Or(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new lh(c)),o.integrate(e,0),c=[])};r.forEach(f=>{if(f===null)c.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(f);break;default:switch(u(),f.constructor){case Uint8Array:case ArrayBuffer:o=new Vn(wt(s,Or(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new Wb(new Uint8Array(f))),o.integrate(e,0);break;case Jm:o=new Vn(wt(s,Or(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new Kb(f)),o.integrate(e,0);break;default:if(f instanceof So)o=new Vn(wt(s,Or(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new rl(f)),o.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},sW=()=>gd("Length exceeded!"),aW=(e,t,n,r)=>{if(n>t._length)throw sW();if(n===0)return t._searchMarker&&U0(t._searchMarker,n,r.length),CS(e,t,null,r);const o=n,i=CC(t,n);let s=t._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&ji(e,wt(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&U0(t._searchMarker,o,r.length),CS(e,t,s,r)},Xve=(e,t,n)=>{let o=(t._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:t._start}).p;if(o)for(;o.right;)o=o.right;return CS(e,t,o,n)},lW=(e,t,n,r)=>{if(r===0)return;const o=n,i=r,s=CC(t,n);let a=t._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&ji(e,wt(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&ji(e,wt(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw sW();t._searchMarker&&U0(t._searchMarker,o,-i+r)},ES=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},w4=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,s=i.clientID;let a;if(r==null)a=new lh([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new lh([r]);break;case Uint8Array:a=new Wb(r);break;case Jm:a=new Kb(r);break;default:if(r instanceof So)a=new rl(r);else throw new Error("Unexpected content type")}new Vn(wt(s,Or(i.store,s)),o,o&&o.lastId,null,null,t,n,a).integrate(e,0)},S4=(e,t)=>{e.doc??ei();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},cW=e=>{const t={};return e.doc??ei(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},uW=(e,t)=>{e.doc??ei();const n=e._map.get(t);return n!==void 0&&!n.deleted},Qve=(e,t)=>{const n={};return e._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;i!==null&&Sf(i,t)&&(n[o]=i.content.getContent()[i.length-1])}),n},rx=e=>(e.doc??ei(),gve(e._map.entries(),t=>!t[1].deleted));class e1e extends kC{}class im extends So{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new im;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new im}clone(){const t=new im;return t.insert(0,this.toArray().map(n=>n instanceof So?n.clone():n)),t}get length(){return this.doc??ei(),this._length}_callObserver(t,n){super._callObserver(t,n),EC(this,t,new e1e(this,t))}insert(t,n){this.doc!==null?Mn(this.doc,r=>{aW(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Mn(this.doc,n=>{Xve(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Mn(this.doc,r=>{lW(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return iW(this,t)}toArray(){return nW(this)}slice(t=0,n=this.length){return tW(this,t,n)}toJSON(){return this.map(t=>t instanceof So?t.toJSON():t)}map(t){return oW(this,t)}forEach(t){G0(this,t)}[Symbol.iterator](){return Jve(this)}_write(t){t.writeTypeRef(E1e)}}const t1e=e=>new im;class n1e extends kC{constructor(t,n,r){super(t,n),this.keysChanged=r}}class _m extends So{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new _m}clone(){const t=new _m;return this.forEach((n,r)=>{t.set(r,n instanceof So?n.clone():n)}),t}_callObserver(t,n){EC(this,t,new n1e(this,t,n))}toJSON(){this.doc??ei();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];t[r]=o instanceof So?o.toJSON():o}}),t}get size(){return[...rx(this)].length}keys(){return $_(rx(this),t=>t[0])}values(){return $_(rx(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return $_(rx(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??ei(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Mn(this.doc,n=>{ES(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Mn(this.doc,r=>{w4(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return S4(this,t)}has(t){return uW(this,t)}clear(){this.doc!==null?Mn(this.doc,t=>{this.forEach(function(n,r,o){ES(t,o,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(T1e)}}const r1e=e=>new _m,sd=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&Hbe(e,t);class $N{constructor(t,n,r,o){this.left=t,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&Es(),this.right.content.constructor){case qr:this.right.deleted||Xm(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const nz=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case qr:t.right.deleted||Xm(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&ji(e,wt(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},ox=(e,t,n,r)=>{const o=new Map,i=r?CC(t,n):null;if(i){const s=new $N(i.p.left,i.p,i.index,o);return nz(e,s,n-i.index)}else{const s=new $N(null,t._start,0,o);return nz(e,s,n)}},dW=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===qr&&sd(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach((s,a)=>{const l=n.left,c=n.right,u=new Vn(wt(i,Or(o.store,i)),l,l&&l.lastId,c,c&&c.id,t,null,new qr(a,s));u.integrate(e,0),n.right=u,n.forward()})},Xm=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},fW=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===qr&&sd(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},hW=(e,t,n,r)=>{const o=e.doc,i=o.clientID,s=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!sd(c,l)){s.set(a,c);const{left:u,right:f}=n;n.right=new Vn(wt(i,Or(o.store,i)),u,u&&u.lastId,f,f&&f.id,t,null,new qr(a,l)),n.right.integrate(e,0),n.forward()}}return s},z_=(e,t,n,r,o)=>{n.currentAttributes.forEach((p,m)=>{o[m]===void 0&&(o[m]=null)});const i=e.doc,s=i.clientID;fW(n,o);const a=hW(e,t,n,o),l=r.constructor===String?new Xa(r):r instanceof So?new rl(r):new xh(r);let{left:c,right:u,index:f}=n;t._searchMarker&&U0(t._searchMarker,n.index,l.getLength()),u=new Vn(wt(s,Or(i.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=f,n.forward(),dW(e,t,n,a)},rz=(e,t,n,r,o)=>{const i=e.doc,s=i.clientID;fW(n,o);const a=hW(e,t,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===qr));){if(!n.right.deleted)switch(n.right.content.constructor){case qr:{const{key:l,value:c}=n.right.content,u=o[l];if(u!==void 0){if(sd(u,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(e)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&ji(e,wt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Vn(wt(s,Or(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Xa(l)),n.right.integrate(e,0),n.forward()}dW(e,t,n,a)},pW=(e,t,n,r,o)=>{let i=t;const s=fa();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===qr){const c=i.content;s.set(c.key,c)}i=i.right}let a=0,l=!1;for(;t!==i;){if(n===t&&(l=!0),!t.deleted){const c=t.content;switch(c.constructor){case qr:{const{key:u,value:f}=c,p=r.get(u)??null;(s.get(u)!==c||p===f)&&(t.delete(e),a++,!l&&(o.get(u)??null)===f&&p!==f&&(p===null?o.delete(u):o.set(u,p))),!l&&!t.deleted&&Xm(o,c);break}}}t=t.right}return a},o1e=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===qr){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},i1e=e=>{let t=0;return Mn(e.doc,n=>{let r=e._start,o=e._start,i=fa();const s=_N(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case qr:Xm(s,o.content);break;default:t+=pW(n,r,o,i,s),i=_N(s),r=o;break}o=o.right}}),t},s1e=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&KZ(e,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===qr&&s.constructor!==oa&&t.add(s.parent)})}Mn(n,r=>{yd(e,e.deleteSet,o=>{if(o instanceof oa||!o.parent._hasFormatting||t.has(o.parent))return;const i=o.parent;o.content.constructor===qr?t.add(i):o1e(r,o)});for(const o of t)i1e(o)})},oz=(e,t,n)=>{const r=n,o=_N(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case rl:case xh:case Xa:n<t.right.length&&ji(e,wt(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&pW(e,i,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&U0(s._searchMarker,t.index,-r+n),t};class a1e extends kC{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Mn(t,r=>{const o=new Map,i=new Map;let s=this.target._start,a=null;const l={};let c="",u=0,f=0;const p=()=>{if(a!==null){let m=null;switch(a){case"delete":f>0&&(m={delete:f}),f=0;break;case"insert":(typeof c=="object"||c.length>0)&&(m={insert:c},o.size>0&&(m.attributes={},o.forEach((y,b)=>{y!==null&&(m.attributes[b]=y)}))),c="";break;case"retain":u>0&&(m={retain:u},Fbe(l)||(m.attributes=zbe({},l))),u=0;break}m&&n.push(m),a=null}};for(;s!==null;){switch(s.content.constructor){case rl:case xh:this.adds(s)?this.deletes(s)||(p(),a="insert",c=s.content.getContent()[0],p()):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),f+=1):s.deleted||(a!=="retain"&&(p(),a="retain"),u+=1);break;case Xa:this.adds(s)?this.deletes(s)||(a!=="insert"&&(p(),a="insert"),c+=s.content.str):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),f+=s.length):s.deleted||(a!=="retain"&&(p(),a="retain"),u+=s.length);break;case qr:{const{key:m,value:y}=s.content;if(this.adds(s)){if(!this.deletes(s)){const b=o.get(m)??null;sd(b,y)?y!==null&&s.delete(r):(a==="retain"&&p(),sd(y,i.get(m)??null)?delete l[m]:l[m]=y)}}else if(this.deletes(s)){i.set(m,y);const b=o.get(m)??null;sd(b,y)||(a==="retain"&&p(),l[m]=b)}else if(!s.deleted){i.set(m,y);const b=l[m];b!==void 0&&(sd(b,y)?b!==null&&s.delete(r):(a==="retain"&&p(),y===null?delete l[m]:l[m]=y))}s.deleted||(a==="insert"&&p(),Xm(o,s.content));break}}s=s.right}for(p();n.length>0;){const m=n[n.length-1];if(m.retain!==void 0&&m.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class bd extends So{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??ei(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new bd}clone(){const t=new bd;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new a1e(this,t,n);EC(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??ei();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Xa&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Mn(this.doc,r=>{const o=new $N(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const s=t[i];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&i===t.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&z_(r,this,o,a,s.attributes||{})}else s.retain!==void 0?rz(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&oz(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??ei();const o=[],i=new Map,s=this.doc;let a="",l=this._start;function c(){if(a.length>0){const f={};let p=!1;i.forEach((y,b)=>{p=!0,f[b]=y});const m={insert:a};p&&(m.attributes=f),o.push(m),a=""}}const u=()=>{for(;l!==null;){if(Sf(l,t)||n!==void 0&&Sf(l,n))switch(l.content.constructor){case Xa:{const f=i.get("ychange");t!==void 0&&!Sf(l,t)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(c(),i.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!Sf(l,n)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(c(),i.set("ychange",r?r("added",l.id):{type:"added"})):f!==void 0&&(c(),i.delete("ychange")),a+=l.content.str;break}case rl:case xh:{c();const f={insert:l.content.getContent()[0]};if(i.size>0){const p={};f.attributes=p,i.forEach((m,y)=>{p[y]=m})}o.push(f);break}case qr:Sf(l,t)&&(c(),Xm(i,l.content));break}l=l.right}c()};return t||n?Mn(s,f=>{t&&PN(f,t),n&&PN(f,n),u()},"cleanup"):u(),o}insert(t,n,r){if(n.length<=0)return;const o=this.doc;o!==null?Mn(o,i=>{const s=ox(i,this,t,!r);r||(r={},s.currentAttributes.forEach((a,l)=>{r[l]=a})),z_(i,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const o=this.doc;o!==null?Mn(o,i=>{const s=ox(i,this,t,!r);z_(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Mn(r,o=>{oz(o,ox(o,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const o=this.doc;o!==null?Mn(o,i=>{const s=ox(i,this,t,!1);s.right!==null&&rz(i,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Mn(this.doc,n=>{ES(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Mn(this.doc,r=>{w4(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return S4(this,t)}getAttributes(){return cW(this)}_write(t){t.writeTypeRef(_1e)}}const l1e=e=>new bd;class B_{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??ei()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===hi||n.constructor===ah)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class ah extends So{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ah}clone(){const t=new ah;return t.insert(0,this.toArray().map(n=>n instanceof So?n.clone():n)),t}get length(){return this.doc??ei(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new B_(this,t)}querySelector(t){t=t.toUpperCase();const r=new B_(this,o=>o.nodeName&&o.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),md(new B_(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){EC(this,t,new d1e(this,n,t))}toString(){return oW(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const o=t.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),G0(this,i=>{o.insertBefore(i.toDOM(t,n,r),null)}),o}insert(t,n){this.doc!==null?Mn(this.doc,r=>{aW(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Mn(this.doc,r=>{const o=t&&t instanceof So?t._item:t;CS(r,this,o,n)});else{const r=this._prelimContent,o=t===null?0:r.findIndex(i=>i===t)+1;if(o===0&&t!==null)throw gd("Reference item not found");r.splice(o,0,...n)}}delete(t,n=1){this.doc!==null?Mn(this.doc,r=>{lW(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return nW(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return iW(this,t)}slice(t=0,n=this.length){return tW(this,t,n)}forEach(t){G0(this,t)}_write(t){t.writeTypeRef(M1e)}}const c1e=e=>new ah;class hi extends ah{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new hi(this.nodeName)}clone(){const t=new hi(this.nodeName),n=this.getAttributes();return Bbe(n,(r,o)=>{typeof r=="string"&&t.setAttribute(o,r)}),t.insert(0,this.toArray().map(r=>r instanceof So?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const a in t)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+t[l]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?Mn(this.doc,n=>{ES(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Mn(this.doc,r=>{w4(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return S4(this,t)}hasAttribute(t){return uW(this,t)}getAttributes(t){return t?Qve(this,t):cW(this)}toDOM(t=document,n={},r){const o=t.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const a=i[s];typeof a=="string"&&o.setAttribute(s,a)}return G0(this,s=>{o.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(A1e),t.writeKey(this.nodeName)}}const u1e=e=>new hi(e.readKey());class d1e extends kC{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class TS extends _m{constructor(t){super(),this.hookName=t}_copy(){return new TS(this.hookName)}clone(){const t=new TS(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(N1e),t.writeKey(this.hookName)}}const f1e=e=>new TS(e.readKey());class Ss extends bd{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Ss}clone(){const t=new Ss;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const o=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(t=>{const n=[];for(const o in t.attributes){const i=[];for(const s in t.attributes[o])i.push({key:s,value:t.attributes[o][s]});i.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const a=i.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(R1e)}}const h1e=e=>new Ss;class k4{constructor(t,n){this.id=t,this.length=n}get deleted(){throw Wa()}mergeWith(t){return!1}write(t,n,r){throw Wa()}integrate(t,n){throw Wa()}}const p1e=0;class oa extends k4{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),WZ(t.doc.store,this)}write(t,n){t.writeInfo(p1e),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Wb{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Wb(this.content)}splice(t){throw Wa()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const m1e=e=>new Wb(e.readBuf());class q0{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new q0(this.len)}splice(t){const n=new q0(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){B0(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const g1e=e=>new q0(e.readLen()),mW=(e,t)=>new Jm({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Kb{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Kb(mW(this.doc.guid,this.opts))}splice(t){throw Wa()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const y1e=e=>new Kb(mW(e.readString(),e.readAny()));class xh{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new xh(this.embed)}splice(t){throw Wa()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const b1e=e=>new xh(e.readJSON());class qr{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new qr(this.key,this.value)}splice(t){throw Wa()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const v1e=e=>new qr(e.readKey(),e.readJSON());class _S{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new _S(this.arr)}splice(t){const n=new _S(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const x1e=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const o=e.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new _S(n)},w1e=wS("node_env")==="development";class lh{constructor(t){this.arr=t,w1e&&CZ(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new lh(this.arr)}splice(t){const n=new lh(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeAny(i)}}getRef(){return 8}}const S1e=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new lh(n)};class Xa{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Xa(this.str)}splice(t){const n=new Xa(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const k1e=e=>new Xa(e.readString()),C1e=[t1e,r1e,l1e,u1e,c1e,f1e,h1e],E1e=0,T1e=1,_1e=2,A1e=3,M1e=4,N1e=5,R1e=6;class rl{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new rl(this.type._copy())}splice(t){throw Wa()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const I1e=e=>new rl(C1e[e.readTypeRef()](e)),jN=(e,t)=>{let n=t,r=0,o;do r>0&&(n=wt(n.client,n.clock+r)),o=om(e,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof Vn);return{item:o,diff:r}},C4=(e,t)=>{for(;e!==null&&e.keep!==t;)e.keep=t,e=e.parent._item},AS=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Vn(wt(r,o+n),t,wt(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=wt(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i},iz=(e,t)=>X0e(e,n=>Km(n.deletions,t)),gW=(e,t,n,r,o,i)=>{const s=e.doc,a=s.store,l=s.clientID,c=t.redone;if(c!==null)return ji(e,c);let u=t.parent._item,f=null,p;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!n.has(u)||gW(e,u,n,r,o,i)===null))return null;for(;u.redone!==null;)u=ji(e,u.redone)}const m=u===null?t.parent:u.content.type;if(t.parentSub===null){for(f=t.left,p=t;f!==null;){let S=f;for(;S!==null&&S.parent._item!==u;)S=S.redone===null?null:ji(e,S.redone);if(S!==null&&S.parent._item===u){f=S;break}f=f.left}for(;p!==null;){let S=p;for(;S!==null&&S.parent._item!==u;)S=S.redone===null?null:ji(e,S.redone);if(S!==null&&S.parent._item===u){p=S;break}p=p.right}}else if(p=null,t.right&&!o){for(f=t;f!==null&&f.right!==null&&(f.right.redone||Km(r,f.right.id)||iz(i.undoStack,f.right.id)||iz(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=ji(e,f.redone);if(f&&f.right!==null)return null}else f=m._map.get(t.parentSub)||null;const y=Or(a,l),b=wt(l,y),w=new Vn(b,f,f&&f.lastId,p,p&&p.id,m,t.parentSub,t.content.copy());return t.redone=b,C4(w,!0),w.integrate(e,0),w};let Vn=class LN extends k4{constructor(t,n,r,o,i,s,a,l){super(t,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?O9:0}set marker(t){(this.info&O_)>0!==t&&(this.info^=O_)}get marker(){return(this.info&O_)>0}get keep(){return(this.info&I9)>0}set keep(t){this.keep!==t&&(this.info^=I9)}get countable(){return(this.info&O9)>0}get deleted(){return(this.info&I_)>0}set deleted(t){this.deleted!==t&&(this.info^=I_)}markDeleted(){this.info|=I_}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Or(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Or(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===rm&&this.id.client!==this.parent.client&&this.parent.clock>=Or(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Y9(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ji(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===oa||this.right&&this.right.constructor===oa)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===LN?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===LN&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===rm){const r=om(n,this.parent);r.constructor===oa?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=Y9(t,t.doc.store,wt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),Bp(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(Bp(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(om(t.doc.store,o.origin)))i.has(om(t.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),WZ(t.doc.store,this),this.content.integrate(t,this),X9(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new oa(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:wt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Bp(t.origin,this.lastId)&&this.right===t&&Bp(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),B0(t.deleteSet,this.id.client,this.id.clock,this.length),X9(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw Es();this.content.gc(t),n?$ve(t,this,new oa(this.id,this.length)):this.content=new q0(this.length)}write(t,n){const r=n>0?wt(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&xC|(r===null?0:gi)|(o===null?0:qc)|(i===null?0:j0);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),o!==null&&t.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=F0(a);t.writeParentInfo(!0),t.writeString(c)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===rm?(t.writeParentInfo(!1),t.writeLeftID(a)):Es();i!==null&&t.writeString(i)}this.content.write(t,n)}};const yW=(e,t)=>O1e[t&xC](e),O1e=[()=>{Es()},g1e,x1e,m1e,k1e,b1e,v1e,I1e,S1e,y1e,()=>{Es()}],P1e=10;class ia extends k4{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){Es()}write(t,n){t.writeInfo(P1e),Vt(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const bW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},vW="__ $YJS$ __";bW[vW]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");bW[vW]=!0;const D1e=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}},$1e=/[\uD800-\uDBFF]/,j1e=/[\uDC00-\uDFFF]/,L1e=(e,t)=>{let n=0,r=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&$1e.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&j1e.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}},z1e=L1e,cn=new Ht("y-sync"),aa=new Ht("y-undo"),jy=new Ht("yjs-cursor"),Fl=(e,t)=>e>>>t|e<<32-t,B1e=e=>Fl(e,2)^Fl(e,13)^Fl(e,22),F1e=e=>Fl(e,6)^Fl(e,11)^Fl(e,25),V1e=e=>Fl(e,7)^Fl(e,18)^e>>>3,H1e=e=>Fl(e,17)^Fl(e,19)^e>>>10,U1e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),G1e=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class q1e{constructor(){const t=new ArrayBuffer(320);this._H=new Uint32Array(t,0,8),this._H.set(G1e),this._W=new Uint32Array(t,64,64)}_updateHash(){const t=this._H,n=this._W;for(let f=16;f<64;f++)n[f]=H1e(n[f-2])+n[f-7]+V1e(n[f-15])+n[f-16];let r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7];for(let f=0,p,m;f<64;f++)p=u+F1e(a)+(a&l^~a&c)+U1e[f]+n[f]>>>0,m=B1e(r)+(r&o^r&i^o&i)>>>0,u=c,c=l,l=a,a=s+p>>>0,s=i,i=o,o=r,r=p+m>>>0;t[0]+=r,t[1]+=o,t[2]+=i,t[3]+=s,t[4]+=a,t[5]+=l,t[6]+=c,t[7]+=u}digest(t){let n=0;for(;n+56<=t.length;){let s=0;for(;s<16&&n+3<t.length;s++)this._W[s]=t[n++]<<24|t[n++]<<16|t[n++]<<8|t[n++];if(n%64!==0){for(this._W.fill(0,s,16);n<t.length;)this._W[s]|=t[n]<<(3-n%4)*8,n++;this._W[s]|=gi<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<t.length;o++)for(let s=3;s>=0&&n<t.length;s--)this._W[o]|=t[n++]<<s*8;r||(this._W[o-(n%4===0?0:1)]|=gi<<(3-n%4)*8),this._W[14]=t.byteLength/Q0e,this._W[15]=t.byteLength*8,this._updateHash();const i=new Uint8Array(32);for(let s=0;s<this._H.length;s++)for(let a=0;a<4;a++)i[s*4+a]=this._H[s]>>>(3-a)*8;return i}}const Z1e=e=>new q1e().digest(e),W1e=e=>{for(let n=6;n<e.length;n++)e[n%6]=e[n%6]^e[n];return e.slice(0,6)},K1e=e=>Qbe(W1e(Z1e(tve(e)))),MS=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!Km(t.ds,e.id),Y1e=[{light:"#ecd44433",dark:"#ecd444"}],J1e=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const r=ih();e.forEach(o=>r.add(o)),t=t.filter(o=>!r.has(o))}e.set(n,Ibe(t))}return e.get(n)},X1e=(e,{colors:t=Y1e,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:i}={})=>{let s=!1;const a=new exe(e,i),l=new kt({props:{editable:c=>{const u=cn.getState(c);return u.snapshot==null&&u.prevSnapshot==null}},key:cn,state:{init:(c,u)=>({type:e,doc:e.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:n,permanentUserData:r}),apply:(c,u)=>{const f=c.getMeta(cn);if(f!==void 0){u=Object.assign({},u);for(const p in f)u[p]=f[p]}return u.addToHistory=c.getMeta("addToHistory")!==!1,u.isChangeOrigin=f!==void 0&&!!f.isChangeOrigin,u.isUndoRedoOperation=f!==void 0&&!!f.isChangeOrigin&&!!f.isUndoRedoOperation,a.prosemirrorView!==null&&f!==void 0&&(f.snapshot!=null||f.prevSnapshot!=null)&&u4(0,()=>{a.prosemirrorView!=null&&(f.restore==null?a._renderSnapshot(f.snapshot,f.prevSnapshot,u):(a._renderSnapshot(f.snapshot,f.snapshot,u),delete u.restore,delete u.snapshot,delete u.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),u}},view:c=>(a.initView(c),i==null&&a._forceRerender(),o(),{update:()=>{const u=l.getState(c.state);if(u.snapshot==null&&u.prevSnapshot==null&&(s||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(s=!0,u.addToHistory===!1&&!u.isChangeOrigin){const f=aa.getState(c.state),p=f&&f.undoManager;p&&p.stopCapturing()}a.mux(()=>{u.doc.transact(f=>{f.meta.set("addToHistory",u.addToHistory),a._prosemirrorChanged(c.state.doc)},cn)})}},destroy:()=>{a.destroy()}})});return l},Q1e=(e,t,n)=>{if(t!==null&&t.anchor!==null&&t.head!==null)if(t.type==="all")e.setSelection(new Bi(e.doc));else if(t.type==="node"){const r=Zf(n.doc,n.type,t.anchor,n.mapping);e.setSelection(Ke.create(e.doc,r))}else{const r=Zf(n.doc,n.type,t.anchor,n.mapping),o=Zf(n.doc,n.type,t.head,n.mapping);if(r!==null&&o!==null){const i=Fe.between(e.doc.resolve(r),e.doc.resolve(o));e.setSelection(i)}}},NS=(e,t)=>({type:t.selection.jsonID,anchor:W0(t.selection.anchor,e.type,e.mapping),head:W0(t.selection.head,e.type,e.mapping)});class exe{constructor(t,n=new Map){this.type=t,this.prosemirrorView=null,this.mux=D1e(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=NS(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(TZ&&this._domSelectionInView===null&&(u4(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection();if(t==null||t.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),i=rve.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||i.clientWidth||0)&&o.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(t,n){n||(n=qZ(DZ(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(cn,{snapshot:t,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const t=this.type.toArray().map(r=>dw(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ee(ge.from(t),0,0));n.setMeta(cn,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const t=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>dw(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ee(ge.from(n),0,0));if(t){const o=Gc(Ja(t.anchor,0),r.doc.content.size),i=Gc(Ja(t.head,0),r.doc.content.size);r.setSelection(Fe.create(r.doc,o,i))}this.prosemirrorView.dispatch(r.setMeta(cn,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(t,n,r){let o=this.doc,i=this.type;if(t||(t=L_(this.doc)),t instanceof Uint8Array||n instanceof Uint8Array)if((!(t instanceof Uint8Array)||!(n instanceof Uint8Array))&&Es(),o=new Jm({gc:!1}),SS(o,n),n=L_(o),SS(o,t),t=L_(o),i._item===null){const s=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);i=o.getXmlFragment(s)}else{const s=o.store.clients.get(i._item.id.client)??[],a=ma(s,i._item.id.clock);i=s[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(s=>{const a=r.permanentUserData;a&&a.dss.forEach(f=>{yd(s,f,p=>{})});const l=(f,p)=>{const m=f==="added"?a.getUserByClientId(p.client):a.getUserByDeletedId(p);return{user:m,type:f,color:J1e(r.colorMapping,r.colors,m)}},c=rW(i,new g4(n.ds,t.sv)).map(f=>!f._item.deleted||MS(f._item,t)||MS(f._item,n)?dw(f,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},t,n,l):null).filter(f=>f!==null),u=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ee(ge.from(c),0,0));this.prosemirrorView.dispatch(u.setMeta(cn,{isChangeOrigin:!0}))},cn)})}_typeChanged(t,n){if(this.prosemirrorView==null)return;const r=cn.getState(this.prosemirrorView.state);if(t.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);yd(n,n.deleteSet,a=>{if(a.constructor===Vn){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const i=this.type.toArray().map(a=>xW(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ee(ge.from(i),0,0));Q1e(s,this.beforeTransactionSelection,this),s=s.setMeta(cn,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof JZ}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&s.scrollIntoView(),this.prosemirrorView.dispatch(s)})}_prosemirrorChanged(t){this.doc.transact(()=>{BN(this.doc,this.type,t,this),this.beforeTransactionSelection=NS(this,this.prosemirrorView.state)},cn)}initView(t){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=t,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const xW=(e,t,n,r,o,i)=>{const s=n.mapping.get(e);if(s===void 0){if(e instanceof hi)return dw(e,t,n,r,o,i);throw Wa()}return s},dw=(e,t,n,r,o,i)=>{const s=[],a=l=>{if(l instanceof hi){const c=xW(l,t,n,r,o,i);c!==null&&s.push(c)}else{const c=l._item.right?.content?.type;c instanceof bd&&!c._item.deleted&&c._item.id.client===c.doc.clientID&&(l.applyDelta([{retain:l.length},...c.toDelta()]),c.doc.transact(f=>{c._item.delete(f)}));const u=txe(l,t,n,r,o,i);u!==null&&u.forEach(f=>{f!==null&&s.push(f)})}};r===void 0||o===void 0?e.toArray().forEach(a):rW(e,new g4(o.ds,r.sv)).forEach(a);try{const l=e.getAttributes(r);r!==void 0&&(MS(e._item,r)?MS(e._item,o)||(l.ychange=i?i("added",e._item.id):{type:"added"}):l.ychange=i?i("removed",e._item.id):{type:"removed"});const c=t.node(e.nodeName,l,s);return n.mapping.set(e,c),c}catch{return e.doc.transact(c=>{e._item.delete(c)},cn),n.mapping.delete(e),null}},txe=(e,t,n,r,o,i)=>{const s=[],a=e.toDelta(r,o,i);try{for(let l=0;l<a.length;l++){const c=a[l];s.push(t.text(c.insert,axe(c.attributes,t)))}}catch{return e.doc.transact(c=>{e._item.delete(c)},cn),null}return s},nxe=(e,t)=>{const n=new Ss,r=e.map(o=>({insert:o.text,attributes:kW(o.marks,t)}));return n.applyDelta(r),t.mapping.set(n,e),n},rxe=(e,t)=>{const n=new hi(e.type.name);for(const r in e.attrs){const o=e.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,TC(e).map(r=>zN(r,t))),t.mapping.set(n,e),n},zN=(e,t)=>e instanceof Array?nxe(e,t):rxe(e,t),sz=e=>typeof e=="object"&&e!==null,E4=(e,t)=>{const n=Object.keys(e).filter(o=>e[o]!==null);let r=n.length===(t==null?0:Object.keys(t).filter(o=>t[o]!==null).length);for(let o=0;o<n.length&&r;o++){const i=n[o],s=e[i],a=t[i];r=i==="ychange"||s===a||sz(s)&&sz(a)&&E4(s,a)}return r},TC=e=>{const t=e.content.content,n=[];for(let r=0;r<t.length;r++){const o=t[r];if(o.isText){const i=[];for(let s=t[r];r<t.length&&s.isText;s=t[++r])i.push(s);r--,n.push(i)}else n.push(o)}return n},wW=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((r,o)=>r.insert===t[o].text&&SZ(r.attributes||{}).length===t[o].marks.length&&kZ(r.attributes,(i,s)=>{const a=SW(s),l=t[o].marks;return E4(i,l.find(c=>c.type.name===a)?.attrs)}))},Z0=(e,t)=>{if(e instanceof hi&&!(t instanceof Array)&&FN(e,t)){const n=TC(t);return e._length===n.length&&E4(e.getAttributes(),t.attrs)&&e.toArray().every((r,o)=>Z0(r,n[o]))}return e instanceof Ss&&t instanceof Array&&wW(e,t)},RS=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((n,r)=>t[r]===n),az=(e,t,n)=>{const r=e.toArray(),o=TC(t),i=o.length,s=r.length,a=Gc(s,i);let l=0,c=0,u=!1;for(;l<a;l++){const f=r[l],p=o[l];if(RS(n.mapping.get(f),p))u=!0;else if(!Z0(f,p))break}for(;l+c<a;c++){const f=r[s-c-1],p=o[i-c-1];if(RS(n.mapping.get(f),p))u=!0;else if(!Z0(f,p))break}return{equalityFactor:l+c,foundMappedChild:u}},oxe=e=>{let t="",n=e._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Xa?t+=n.content.str:n.content instanceof qr&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}},ixe=(e,t,n)=>{n.mapping.set(e,t);const{nAttrs:r,str:o}=oxe(e),i=t.map(c=>({insert:c.text,attributes:Object.assign({},r,kW(c.marks,n))})),{insert:s,remove:a,index:l}=z1e(o,i.map(c=>c.insert).join(""));e.delete(l,a),e.insert(l,s),e.applyDelta(i.map(c=>({retain:c.insert.length,attributes:c.attributes})))},sxe=/(.*)(--[a-zA-Z0-9+/=]{8})$/,SW=e=>sxe.exec(e)?.[1]??e,axe=(e,t)=>{const n=[];for(const r in e)n.push(t.mark(SW(r),e[r]));return n},kW=(e,t)=>{const n={};return e.forEach(r=>{if(r.type.name!=="ychange"){const o=nc(t.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${K1e(r.toJSON())}`:r.type.name]=r.attrs}}),n},BN=(e,t,n,r)=>{if(t instanceof hi&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(t,n),t instanceof hi){const f=t.getAttributes(),p=n.attrs;for(const m in p)p[m]!==null?f[m]!==p[m]&&m!=="ychange"&&t.setAttribute(m,p[m]):t.removeAttribute(m);for(const m in f)p[m]===void 0&&t.removeAttribute(m)}const o=TC(n),i=o.length,s=t.toArray(),a=s.length,l=Gc(i,a);let c=0,u=0;for(;c<l;c++){const f=s[c],p=o[c];if(!RS(r.mapping.get(f),p))if(Z0(f,p))r.mapping.set(f,p);else break}for(;u+c<l;u++){const f=s[a-u-1],p=o[i-u-1];if(!RS(r.mapping.get(f),p))if(Z0(f,p))r.mapping.set(f,p);else break}e.transact(()=>{for(;a-c-u>0&&i-c-u>0;){const p=s[c],m=o[c],y=s[a-u-1],b=o[i-u-1];if(p instanceof Ss&&m instanceof Array)wW(p,m)||ixe(p,m,r),c+=1;else{let w=p instanceof hi&&FN(p,m),S=y instanceof hi&&FN(y,b);if(w&&S){const E=az(p,m,r),T=az(y,b,r);E.foundMappedChild&&!T.foundMappedChild?S=!1:!E.foundMappedChild&&T.foundMappedChild||E.equalityFactor<T.equalityFactor?w=!1:S=!1}w?(BN(e,p,m,r),c+=1):S?(BN(e,y,b,r),u+=1):(r.mapping.delete(t.get(c)),t.delete(c,1),t.insert(c,[zN(m,r)]),c+=1)}}const f=a-c-u;if(a===1&&i===0&&s[0]instanceof Ss?(r.mapping.delete(s[0]),s[0].delete(0,s[0].length)):f>0&&(t.slice(c,c+f).forEach(p=>r.mapping.delete(p)),t.delete(c,f)),c+u<i){const p=[];for(let m=c;m<i-u;m++)p.push(zN(o[m],r));t.insert(c,p)}},cn)},FN=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name;let s0=null;const lxe=()=>{const e=s0;s0=null,e.forEach((t,n)=>{const r=n.state.tr,o=cn.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(t.forEach((i,s)=>{r.setMeta(s,i)}),n.dispatch(r))})},cxe=(e,t,n)=>{s0||(s0=new Map,u4(0,lxe)),nc(s0,e,fa).set(t,n)},W0=(e,t,n)=>{if(e===0)return j_(t,0,t.length===0?-1:0);let r=t._first===null?null:t._first.content.type;for(;r!==null&&t!==r;){if(r instanceof Ss){if(r._length>=e)return j_(r,e,t.length===0?-1:0);if(e-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,e--;while(r!==t&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==t&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&e<o)r=r._first.content.type,e--;else{if(e===1&&r._length===0&&o>1)return new H0(r._item===null?null:r._item.id,r._item===null?F0(r):null,null);if(e-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(e===0)return r=r._item===null?r:r._item.parent,new H0(r._item===null?null:r._item.id,r._item===null?F0(r):null,null);do r=r._item.parent,e--;while(r!==t&&r._item.next===null);r!==t&&(r=r._item.next.content.type)}}}if(r===null)throw Es();if(e===0&&r.constructor!==Ss&&r!==t)return uxe(r._item.parent,r._item)}return j_(t,t._length,t.length===0?-1:0)},uxe=(e,t)=>{let n=null,r=null;return e._item===null?r=F0(e):n=wt(e._item.id.client,e._item.id.clock),new H0(n,r,t.id)},Zf=(e,t,n,r)=>{const o=Pve(n,e);if(o===null||o.type!==t&&!V0(t,o.type._item))return null;let i=o.type,s=0;if(i.constructor===Ss)s=o.index;else if(i._item===null||!i._item.deleted){let a=i._first,l=0;for(;l<i._length&&l<o.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof Ss?s+=c._length:s+=r.get(c).nodeSize}a=a.right}s+=1}for(;i!==t&&i._item!==null;){const a=i._item.parent;if(a._item===null||!a._item.deleted){s+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===i)break;l.deleted||(c instanceof Ss?s+=c._length:s+=r.get(c).nodeSize),l=l.right}}i=a}return s-1},dxe=(e,t,n)=>e!==t,fxe=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);const r=document.createTextNode(""),o=document.createTextNode("");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(o,null),t},T4=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),hxe=/^#[0-9a-fA-F]{6}$/,lz=(e,t,n,r,o)=>{const i=cn.getState(e),s=i.doc,a=[];return i.snapshot!=null||i.prevSnapshot!=null||i.binding.mapping.size===0?Rt.create(e.doc,[]):(t.getStates().forEach((l,c)=>{if(n(s.clientID,c,l)&&l.cursor!=null){const u=l.user||{};u.color==null?u.color="#ffa500":hxe.test(u.color)||console.warn("A user uses an unsupported color format",u),u.name==null&&(u.name=`User: ${c}`);let f=Zf(s,i.type,i0(l.cursor.anchor),i.binding.mapping),p=Zf(s,i.type,i0(l.cursor.head),i.binding.mapping);if(f!==null&&p!==null){const m=Ja(e.doc.content.size-1,0);f=Gc(f,m),p=Gc(p,m),a.push(Zt.widget(p,()=>r(u,c),{key:c+"",side:10}));const y=Gc(f,p),b=Ja(f,p);a.push(Zt.inline(y,b,o(u,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Rt.create(e.doc,a))},pxe=(e,{awarenessStateFilter:t=dxe,cursorBuilder:n=fxe,selectionBuilder:r=T4,getSelection:o=s=>s.selection}={},i="cursor")=>new kt({key:jy,state:{init(s,a){return lz(a,e,t,n,r)},apply(s,a,l,c){const u=cn.getState(c),f=s.getMeta(jy);return u&&u.isChangeOrigin||f&&f.awarenessUpdated?lz(c,e,t,n,r):a.map(s.mapping,s.doc)}},props:{decorations:s=>jy.getState(s)},view:s=>{const a=()=>{s.docView&&cxe(s,jy,{awarenessUpdated:!0})},l=()=>{const c=cn.getState(s.state),u=e.getLocalState()||{};if(s.hasFocus()){const f=o(s.state),p=W0(f.anchor,c.type,c.binding.mapping),m=W0(f.head,c.type,c.binding.mapping);(u.cursor==null||!K9(i0(u.cursor.anchor),p)||!K9(i0(u.cursor.head),m))&&e.setLocalStateField(i,{anchor:p,head:m})}else u.cursor!=null&&Zf(c.doc,c.type,i0(u.cursor.anchor),c.binding.mapping)!==null&&e.setLocalStateField(i,null)};return e.on("change",a),s.dom.addEventListener("focusin",l),s.dom.addEventListener("focusout",l),{update:l,destroy:()=>{s.dom.removeEventListener("focusin",l),s.dom.removeEventListener("focusout",l),e.off("change",a),e.setLocalStateField(i,null)}}}}),mxe=e=>aa.getState(e)?.undoManager?.undo()!=null,gxe=e=>aa.getState(e)?.undoManager?.redo()!=null,yxe=(e,t)=>t==null?aa.getState(e)?.undoManager?.canUndo():mxe(e),bxe=(e,t)=>t==null?aa.getState(e)?.undoManager?.canRedo():gxe(e),vxe=new Set(["paragraph"]),xxe=(e,t)=>!(e instanceof Vn)||!(e.content instanceof rl)||!(e.content.type instanceof bd||e.content.type instanceof hi&&t.has(e.content.type.nodeName))||e.content.type._length===0,wxe=({protectedNodes:e=vxe,trackedOrigins:t=[],undoManager:n=null}={})=>new kt({key:aa,state:{init:(r,o)=>{const i=cn.getState(o),s=n||new JZ(i.type,{trackedOrigins:new Set([cn].concat(t)),deleteFilter:a=>xxe(a,e),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(r,o,i,s)=>{const a=cn.getState(s).binding,l=o.undoManager,c=l.undoStack.length>0,u=l.redoStack.length>0;return a?{undoManager:l,prevSel:NS(a,i),hasUndoOps:c,hasRedoOps:u}:c!==o.hasUndoOps||u!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=cn.getState(r.state),i=aa.getState(r.state).undoManager;return i.on("stack-item-added",({stackItem:s})=>{const a=o.binding;a&&s.meta.set(a,aa.getState(r.state).prevSel)}),i.on("stack-item-popped",({stackItem:s})=>{const a=o.binding;a&&(a.beforeTransactionSelection=s.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{i.destroy()}}}});function Sxe(e={}){return new kt({view(t){return new kxe(t,e)}})}class kxe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return t.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,o=this.editorView.dom,i=o.getBoundingClientRect(),s=i.width/o.offsetWidth,a=i.height/o.offsetHeight;if(n){let f=t.nodeBefore,p=t.nodeAfter;if(f||p){let m=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(m){let y=m.getBoundingClientRect(),b=f?y.bottom:y.top;f&&p&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*a;r={left:y.left,right:y.right,top:b-w,bottom:b+w}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,m=f.height/l.offsetHeight;c=f.left-l.scrollLeft*p,u=f.top-l.scrollTop*m}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,t):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=SG(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const CW={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:e=>`${e} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var Cxe=Object.defineProperty,Exe=(e,t,n)=>t in e?Cxe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,re=(e,t,n)=>Exe(e,typeof t!="symbol"?t+"":t,n);function Txe(e,t=JSON.stringify){const n={};return e.filter(r=>{const o=t(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function _xe(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Txe(t)}const _C=On.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const e=window.__TEST_OPTIONS;return e.mockID===void 0?e.mockID=0:e.mockID++,e.mockID.toString()}return Gq()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:e=>e.getAttribute(`data-${this.options.attributeName}`),renderHTML:e=>{const t={[`data-${this.options.attributeName}`]:e[this.options.attributeName]};return this.options.setIdAttribute?{...t,id:e[this.options.attributeName]}:t}}}}]},addProseMirrorPlugins(){let e=null,t=!1;return[new kt({key:new Ht("uniqueID"),appendTransaction:(n,r,o)=>{const i=n.some(m=>m.docChanged)&&!r.doc.eq(o.doc),s=this.options.filterTransaction&&n.some(m=>{let y,b;return!(!((b=(y=this.options).filterTransaction)===null||b===void 0)&&b.call(y,m))});if(!i||s)return;const{tr:a}=o,{types:l,attributeName:c,generateID:u}=this.options,f=FO(r.doc,n),{mapping:p}=f;if($q(f).forEach(({newRange:m})=>{const y=Pq(o.doc,m,S=>l.includes(S.type.name)),b=y.map(({node:S})=>S.attrs[c]).filter(S=>S!==null),w=_xe(b);y.forEach(({node:S,pos:E})=>{let T;const A=(T=a.doc.nodeAt(E))===null||T===void 0?void 0:T.attrs[c];if(A===null){const R=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(R)===null){const O=JSON.parse(JSON.stringify(o.doc.toJSON()));if(O.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(O.content)===JSON.stringify(R.toJSON())){a.setNodeMarkup(E,void 0,{...S.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(E,void 0,{...S.attrs,[c]:u()});return}const{deleted:M}=p.invert().mapResult(E);M&&w.includes(A)&&a.setNodeMarkup(E,void 0,{...S.attrs,[c]:u()})})}),!!a.steps.length)return a},view(n){const r=o=>{let i;e=!((i=n.dom.parentElement)===null||i===void 0)&&i.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return e!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?t=!0:t=!1,e=null,!1},paste:()=>(t=!0,!1)},transformPasted:n=>{if(!t)return n;const{types:r,attributeName:o}=this.options,i=s=>{const a=[];return s.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(i(l.content)));return}const c=l.type.create({...l.attrs,[o]:null},i(l.content),l.marks);a.push(c)}),ge.from(a)};return t=!1,new Ee(i(n.content),n.openStart,n.openEnd)}}})]}});function cz(e){return e.type==="link"}function EW(e){return typeof e!="string"&&e.type==="link"}function ch(e){return typeof e!="string"&&e.type==="text"}function vd(e){var t,n,r,o,i;return xd(e)?{...e}:K0(e)?{type:"tableCell",content:[].concat(e.content),props:{backgroundColor:((t=e.props)==null?void 0:t.backgroundColor)??"default",textColor:((n=e.props)==null?void 0:n.textColor)??"default",textAlignment:((r=e.props)==null?void 0:r.textAlignment)??"left",colspan:((o=e.props)==null?void 0:o.colspan)??1,rowspan:((i=e.props)==null?void 0:i.rowspan)??1}}:{type:"tableCell",content:[].concat(e),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function K0(e){return e!=null&&typeof e!="string"&&!Array.isArray(e)&&e.type==="tableCell"}function xd(e){return K0(e)&&e.props!==void 0&&e.content!==void 0}function uh(e){return xd(e)?e.props.colspan??1:1}function Y0(e){return xd(e)?e.props.rowspan??1:1}let ga=class extends Error{constructor(t){super(`Unreachable case: ${t}`)}};function _t(e,t=!0){const{"data-test":n,...r}=e;if(Object.keys(r).length>0&&t)throw new Error("Object must be empty "+JSON.stringify(e))}const Axe=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function ys(e,t="Ctrl"){return Axe()?e.replace("Mod",""):e.replace("Mod",t)}function Rn(...e){return[...new Set(e.filter(t=>t).join(" ").split(" "))].join(" ")}const VN=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Ts(e,t,n,r){const o=document.createElement("div");o.className=Rn("bn-block-content",n.class),o.setAttribute("data-content-type",e);for(const[s,a]of Object.entries(n))s!=="class"&&o.setAttribute(s,a);const i=document.createElement(t);i.className=Rn("bn-inline-content",r.class);for(const[s,a]of Object.entries(r))s!=="class"&&i.setAttribute(s,a);return o.appendChild(i),{dom:o,contentDOM:i}}const uz=(e,t)=>{let n=wh(e,t.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=t.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o};function Mxe(e){const t=e.querySelectorAll("p");if(t.length>1){const n=t[0];for(let r=1;r<t.length;r++){const o=t[r];n.innerHTML+="<br>"+o.innerHTML,o.remove()}}}const Pr={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},_4=["backgroundColor","textColor"];function IS(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function dz(e){const t=e.split("/");return!t.length||t[t.length-1]===""?e:t[t.length-1]}function Yb(e){const t={};return Object.entries(e).filter(([n,r])=>!_4.includes(n)).forEach(([n,r])=>{t[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const i=o.getAttribute(IS(n));if(i===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return i==="true"?!0:i==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const s=parseFloat(i);return!Number.isNaN(s)&&Number.isFinite(s)?s:null}return i},renderHTML:o=>o[n]!==r.default?{[IS(n)]:o[n]}:{}}}),t}function AC(e,t,n,r){if(typeof e=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=e(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw new Error("Block doesn't have id");const s=t.getBlock(i);if(s.type!==r)throw new Error("Block type does not match");return s}function Ly(e,t,n,r,o=!1,i){const s=document.createElement("div");if(i!==void 0)for(const[a,l]of Object.entries(i))a!=="class"&&s.setAttribute(a,l);s.className=Rn("bn-block-content",i?.class||""),s.setAttribute("data-content-type",t);for(const[a,l]of Object.entries(n)){const c=r[a].default;!_4.includes(a)&&l!==c&&s.setAttribute(IS(a),l)}return o&&s.setAttribute("data-file-block",""),s.appendChild(e.dom),e.contentDOM!==void 0&&(e.contentDOM.className=Rn("bn-inline-content",e.contentDOM.className)),{...e,dom:s}}function Os(e){return Ql.create(e)}function A4(e,t){return{config:e,implementation:t}}function rc(e,t,n){return A4({type:e.name,content:e.config.content==="inline*"?"inline":e.config.content==="tableRow+"?"table":"none",propSchema:t},{node:e,requiredExtensions:n,toInternalHTML:uz,toExternalHTML:uz})}function TW(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n.config]))}function _W(e,t){e.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{t.view.dom.blur()},10),!0)}function AW(e,t){const n=[{tag:"[data-content-type="+e.type+"]",contentElement:".bn-inline-content"}];return t&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=t?.(r);return o===void 0?!1:o}}),n}function Jb(e,t){const n=Os({name:e.type,content:e.content==="inline"?"inline*":"",group:"blockContent",selectable:e.isSelectable??!0,isolating:!0,addAttributes(){return Yb(e.propSchema)},parseHTML(){return AW(e,t.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Ly({dom:o,contentDOM:e.content==="inline"?o:void 0},e.type,{},e.propSchema,e.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const i=this.options.editor,s=AC(r,i,this.editor,e.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=t.render(s,i),c=Ly(l,s.type,s.props,e.propSchema,e.isFileBlock,a);return e.isSelectable===!1&&_W(c,this.editor),c}}});if(n.name!==e.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return A4(e,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=t.render(r,o);return Ly(a,r.type,r.props,e.propSchema,e.isFileBlock,s)},toExternalHTML:(r,o)=>{var i,s;const a=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{};let l=(s=t.toExternalHTML)==null?void 0:s.call(t,r,o);return l===void 0&&(l=t.render(r,o)),Ly(l,r.type,r.props,e.propSchema,a)}})}function Jc(e,t){const n=e.resolve(t);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const i=[];e.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&i.push(l)}),console.warn(`Position ${t} is not within a blockContainer node.`);const s=e.resolve(i.find(a=>a>=t)||i[i.length-1]);return{posBeforeNode:s.pos,node:s.nodeAfter}}function M4(e,t){if(!e.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${e.type.name}`);const n=e,r=t,o=r+n.nodeSize,i={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let s,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const u=l,f=r+c+1,p=f+l.nodeSize;s={node:u,beforePos:f,afterPos:p}}else if(l.type.name==="blockGroup"){const u=l,f=r+c+1,p=f+l.nodeSize;a={node:u,beforePos:f,afterPos:p}}}),!s)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:i,blockContent:s,childContainer:a,blockNoteType:s.node.type.name}}else{if(!i.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${i.node}`);return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}}function wd(e){return M4(e.node,e.posBeforeNode)}function Xb(e){if(!e.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${e.pos} but a node at this position does not exist`);return M4(e.nodeAfter,e.pos)}function Zn(e){const t=Jc(e.doc,e.selection.anchor);return wd(t)}function MC(e){const t=Jc(e.doc,e.selection.anchor);return wd(t)}function so(e){return"doc"in e?e.doc.type.schema:e.type.schema}function MW(e){return e.cached.blockNoteEditor}function Qb(e){return MW(e).schema}function N4(e){return Qb(e).blockSchema}function R4(e){return Qb(e).inlineContentSchema}function Qm(e){return Qb(e).styleSchema}function I4(e){return MW(e).blockCache}function NW(e,t,n){var r,o;const i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},s=[];e.content.forEach((a,l,c)=>{const u={cells:[]};c===0&&a.content.forEach(f=>{let p=f.attrs.colwidth;p==null&&(p=new Array(f.attrs.colspan??1).fill(void 0)),i.columnWidths.push(...p)}),u.cells=a.content.content.map((f,p)=>(s[c]||(s[c]=[]),s[c][p]=f.type.name==="tableHeader",{type:"tableCell",content:f.content.content.map(m=>NC(m,t,n)).reduce((m,y)=>{if(!m.length)return y;const b=m[m.length-1],w=y[0];return w&&ch(b)&&ch(w)&&JSON.stringify(b.styles)===JSON.stringify(w.styles)?(b.text+=`
`+w.text,m.push(...y.slice(1)),m):(m.push(...y),m)},[]),props:{colspan:f.attrs.colspan,rowspan:f.attrs.rowspan,backgroundColor:f.attrs.backgroundColor,textColor:f.attrs.textColor,textAlignment:f.attrs.textAlignment}})),i.rows.push(u)});for(let a=0;a<s.length;a++)(r=s[a])!=null&&r.every(l=>l)&&(i.headerRows=(i.headerRows??0)+1);for(let a=0;a<((o=s[0])==null?void 0:o.length);a++)s!=null&&s.every(l=>l[a])&&(i.headerCols=(i.headerCols??0)+1);return i}function NC(e,t,n){const r=[];let o;return e.content.forEach(i=>{if(i.type.name==="hardBreak"){if(o)if(ch(o))o.text+=`
`;else if(cz(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(i.type.name!=="link"&&i.type.name!=="text"){if(!t[i.type.name]){console.warn("unrecognized inline content type",i.type.name);return}o&&(r.push(o),o=void 0),r.push(Nxe(i,t,n));return}const s={};let a;for(const l of i.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(c.propSchema==="boolean")s[c.type]=!0;else if(c.propSchema==="string")s[c.type]=l.attrs.stringValue;else throw new ga(c.propSchema)}o?ch(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):JSON.stringify(o.styles)===JSON.stringify(s)?o.text+=i.textContent:(r.push(o),o={type:"text",text:i.textContent,styles:s}):cz(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(s)?o.content[o.content.length-1].text+=i.textContent:o.content.push({type:"text",text:i.textContent,styles:s}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):(r.push(o),o={type:"text",text:i.textContent,styles:s})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}:o={type:"text",text:i.textContent,styles:s}}),o&&r.push(o),r}function Nxe(e,t,n){if(e.type.name==="text"||e.type.name==="link")throw new Error("unexpected");const r={},o=t[e.type.name];for(const[s,a]of Object.entries(e.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+e.type.name);const l=o.propSchema;s in l&&(r[s]=a)}let i;return o.content==="styled"?i=NC(e,t,n):i=void 0,{type:e.type.name,props:r,content:i}}function dr(e,t,n=N4(t),r=R4(t),o=Qm(t),i=I4(t)){var s;if(!e.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+e.type.name);const a=i?.get(e);if(a)return a;const l=M4(e,0);let c=l.bnBlock.node.attrs.id;c===null&&(c=_C.options.generateID());const u=n[l.blockNoteType];if(!u)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const f={};for(const[w,S]of Object.entries({...e.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const E=u.propSchema;w in E&&!(E[w].default===void 0&&S===void 0)&&(f[w]=S)}const p=n[l.blockNoteType],m=[];(s=l.childContainer)==null||s.node.forEach(w=>{m.push(dr(w,t,n,r,o,i))});let y;if(p.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");y=NC(l.blockContent.node,r,o)}else if(p.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");y=NW(l.blockContent.node,r,o)}else if(p.content==="none")y=void 0;else throw new ga(p.content);const b={id:c,type:p.type,props:f,content:y,children:m};return i?.set(e,b),b}function Rxe(e,t,n=N4(t),r=R4(t),o=Qm(t),i=I4(t)){const s=[];return e.firstChild.descendants(a=>(s.push(dr(a,t,n,r,o,i)),!1)),s}function Ixe(e,t,n=N4(t),r=R4(t),o=Qm(t),i=I4(t)){function s(a,l,c){if(a.type.name!=="blockGroup")throw new Error("unexpected");const u=[];let f,p;return a.forEach((m,y,b)=>{if(m.type.name!=="blockContainer")throw new Error("unexpected");if(m.childCount===0)return;if(m.childCount===0||m.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+m.childCount);const w=b===0,S=b===a.childCount-1;if(m.firstChild.type.name==="blockGroup"){if(!w)throw new Error("unexpected");const M=s(m.firstChild,Math.max(0,l-1),S?Math.max(0,c-1):0);f=M.blockCutAtStart,S&&(p=M.blockCutAtEnd),u.push(...M.blocks);return}const E=dr(m,t,n,r,o,i),T=m.childCount>1?m.child(1):void 0;let A=[];if(T){const M=s(T,0,S?Math.max(0,c-1):0);A=M.blocks,S&&(p=M.blockCutAtEnd)}S&&!T&&c>1&&(p=E.id),w&&l>1&&(f=E.id),u.push({...E,children:A})}),{blocks:u,blockCutAtStart:f,blockCutAtEnd:p}}if(e.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(e.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return s(e.content.firstChild,Math.max(e.openStart-1,0),Math.max(e.openEnd-1,0))}function RW(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n.config]))}function Oxe(e,t){return{config:e,implementation:t}}function kf(e,t){return Oxe({type:e.name,propSchema:t},{mark:e})}function IW(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n.config]))}function Od(e){const{height:t,width:n}=O4(e),r=new Array(t).fill(!1).map(()=>new Array(n).fill(null)),o=(i,s)=>{for(let a=i;a<t;a++)for(let l=s;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let i=0;i<e.content.rows.length;i++)for(let s=0;s<e.content.rows[i].cells.length;s++){const a=vd(e.content.rows[i].cells[s]),l=Y0(a),c=uh(a),{row:u,col:f}=o(i,s);for(let p=u;p<u+l;p++)for(let m=f;m<f+c;m++){if(r[p][m])throw new Error(`Unable to create occupancy grid for table, cell at ${p},${m} is already occupied`);r[p][m]={row:i,col:s,rowspan:l,colspan:c,cell:a}}}return r}function J0(e){const t=new Set;return e.map(n=>({cells:n.map(r=>t.has(r.row+":"+r.col)?!1:(t.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function dh(e,t,n=Od(t)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const i=n[r][o];if(i.row===e.row&&i.col===e.col)return{row:r,col:o,cell:i.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${e.row},${e.col} is not occupied`)}function O4(e){const t=e.content.rows.length;let n=0;return e.content.rows.forEach(r=>{let o=0;r.cells.forEach(i=>{o+=uh(i)}),n=Math.max(n,o)}),{height:t,width:n}}function OW(e,t,n=Od(t)){var r;const o=(r=n[e.row])==null?void 0:r[e.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function HN(e,t){var n;const r=Od(e);if(t<0||t>=r.length)return[];let o=0;for(let s=0;s<t;s++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const i=new Array(r[0].length).fill(!1).map((s,a)=>OW({row:o,col:a},e,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(l=>l.row===s.row&&l.col===s.col)===a)}function UN(e,t){var n;const r=Od(e);if(t<0||t>=r[0].length)return[];let o=0;for(let s=0;s<t;s++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const i=new Array(r.length).fill(!1).map((s,a)=>OW({row:a,col:o},e,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(l=>l.row===s.row&&l.col===s.col)===a)}function Pxe(e,t,n,r=Od(e)){const{col:o}=dh({row:0,col:t},e,r),{col:i}=dh({row:0,col:n},e,r);return r.forEach(s=>{const[a]=s.splice(o,1);s.splice(i,0,a)}),J0(r)}function Dxe(e,t,n,r=Od(e)){const{row:o}=dh({row:t,col:0},e,r),{row:i}=dh({row:n,col:0},e,r),[s]=r.splice(o,1);return r.splice(i,0,s),J0(r)}function GN(e){return e?K0(e)?GN(e.content):typeof e=="string"?e.length===0:Array.isArray(e)?e.every(t=>typeof t=="string"?t.length===0:ch(t)?t.text.length===0:EW(t)?typeof t.content=="string"?t.content.length===0:t.content.every(n=>n.text.length===0):!1):!1:!0}function $xe(e,t,n=Od(e)){if(t==="columns"){let i=0;for(let s=n[0].length-1;s>=0&&n.every(a=>GN(a[s].cell)&&a[s].colspan===1);s--)i++;for(let s=n.length-1;s>=0;s--){const a=Math.max(n[s].length-i,1);n[s]=n[s].slice(0,a)}return J0(n)}let r=0;for(let i=n.length-1;i>=0&&n[i].every(s=>GN(s.cell)&&s.rowspan===1);i--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),J0(n)}function jxe(e,t,n,r=Od(e)){const{width:o,height:i}=O4(e);if(t==="columns")r.forEach((s,a)=>{if(n>=0)for(let l=0;l<n;l++)s.push({row:a,col:Math.max(...s.map(c=>c.col))+1,rowspan:1,colspan:1,cell:vd("")});else s.splice(o+n,-1*n)});else if(n>0)for(let s=0;s<n;s++){const a=new Array(o).fill(null).map((l,c)=>({row:i+s,col:c,rowspan:1,colspan:1,cell:vd("")}));r.push(a)}else n<0&&r.splice(i+n,-1*n);return J0(r)}function PW(e,t,n){const r=HN(e,n);if(!r.some(s=>Y0(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=Y0(s.cell);o=Math.max(o,s.row+a-1),i=Math.min(i,s.row)}),t<n?n===o:n===i}function DW(e,t,n){const r=UN(e,n);if(!r.some(s=>uh(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=uh(s.cell);o=Math.max(o,s.col+a-1),i=Math.min(i,s.col)}),t<n?n===o:n===i}function Lxe(e,t,n){const r=dh(e,n),o=dh(t,n);return r.col===o.col}function fz(e,t,n,r){const o=[];for(const[i,s]of Object.entries(e.styles||{})){const a=n[i];if(!a)throw new Error(`style ${i} not found in styleSchema`);if(a.propSchema==="boolean")s&&o.push(t.mark(i));else if(a.propSchema==="string")s&&o.push(t.mark(i,{stringValue:s}));else throw new ga(a.propSchema)}return!r||!t.nodes[r].spec.code?e.text.split(/(\n)/g).filter(i=>i.length>0).map(i=>i===`
`?t.nodes.hardBreak.createChecked():t.text(i,o)):e.text.length>0?[t.text(e.text,o)]:[]}function zxe(e,t,n){const r=t.marks.link.create({href:e.href});return qN(e.content,t,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function qN(e,t,n,r){const o=[];if(typeof e=="string")return o.push(...fz({text:e,styles:{}},t,n,r)),o;for(const i of e)o.push(...fz(i,t,n,r));return o}function Qa(e,t,n,r=Qm(t)){const o=[];for(const i of e)typeof i=="string"?o.push(...qN(i,t,r,n)):EW(i)?o.push(...zxe(i,t,r)):ch(i)?o.push(...qN([i],t,r,n)):o.push($W(i,t,r));return o}function RC(e,t,n=Qm(t)){const r=[],o=new Array(e.headerRows??0).fill(!0),i=new Array(e.headerCols??0).fill(!0),s=e.columnWidths??[];for(let a=0;a<e.rows.length;a++){const l=e.rows[a],c=[],u=o[a];for(let p=0;p<l.cells.length;p++){const m=l.cells[p],y=i[p],b=void 0;let w=null;const S=dh({row:a,col:p},{content:e});let E=s[S.col]?[s[S.col]]:null;if(m)if(typeof m=="string")w=t.text(m);else if(K0(m)){m.content&&(w=Qa(m.content,t,"tableParagraph",n));const A=uh(m);A>1&&(E=new Array(A).fill(!1).map((M,R)=>s[S.col+R]??void 0))}else w=Qa(m,t,"tableParagraph",n);const T=t.nodes[y||u?"tableHeader":"tableCell"].createChecked({...K0(m)?m.props:{},colwidth:E},t.nodes.tableParagraph.createChecked(b,w));c.push(T)}const f=t.nodes.tableRow.createChecked({},c);r.push(f)}return r}function $W(e,t,n){let r,o=e.type;if(o===void 0&&(o="paragraph"),!t.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!e.content)r=t.nodes[o].createChecked(e.props);else if(typeof e.content=="string"){const i=Qa([e.content],t,o,n);r=t.nodes[o].createChecked(e.props,i)}else if(Array.isArray(e.content)){const i=Qa(e.content,t,o,n);r=t.nodes[o].createChecked(e.props,i)}else if(e.content.type==="tableContent"){const i=RC(e.content,t,n);r=t.nodes[o].createChecked(e.props,i)}else throw new ga(e.content.type);return r}function wh(e,t,n=Qm(t)){let r=e.id;r===void 0&&(r=_C.options.generateID());const o=[];if(e.children)for(const i of e.children)o.push(wh(i,t,n));if(!e.type||t.nodes[e.type].isInGroup("blockContent")){const i=$W(e,t,n),s=o.length>0?t.nodes.blockGroup.createChecked({},o):void 0;return t.nodes.blockContainer.createChecked({id:r,...e.props},s?[i,s]:i)}else{if(t.nodes[e.type].isInGroup("bnBlock"))return t.nodes[e.type].createChecked({id:r,...e.props},o);throw new Error(`block type ${e.type} doesn't match blockContent or bnBlock group`)}}function Bxe(e,t){if(t===0)return;const n=e.resolve(t);for(let r=n.depth;r>0;r--){const o=n.node(r);if(P4(o))return o.attrs.id}}function Ui(e,t){let n,r;if(t.firstChild.descendants((o,i)=>n?!1:!P4(o)||o.attrs.id!==e?!0:(n=o,r=i+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function P4(e){return e.type.isInGroup("bnBlock")}function Fxe(e,t){return e.id!==t.id||e.type!==t.type||JSON.stringify(e.props)!==JSON.stringify(t.props)||JSON.stringify(e.content)!==JSON.stringify(t.content)}function Vxe(e){return e.getMeta("paste")?{type:"paste"}:e.getMeta("uiEvent")==="drop"?{type:"drop"}:e.getMeta("history$")?{type:e.getMeta("history$").redo?"redo":"undo"}:e.getMeta("y-sync$")?e.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function hz(e){const t={},n=so(e);return e.descendants((r,o)=>{if(P4(r)){const i=Bxe(e,o);t[r.attrs.id]={block:dr(r,n),parentId:i}}return!0}),t}function jW(e,t=[]){const n=Vxe(e),r=FO(e.before,[e,...t]),o=hz(r.before),i=hz(r.doc),s=[];return Object.keys(i).filter(a=>!(a in o)).forEach(a=>{s.push({type:"insert",block:i[a].block,source:n,prevBlock:void 0})}),Object.keys(o).filter(a=>!(a in i)).forEach(a=>{s.push({type:"delete",block:o[a].block,source:n,prevBlock:void 0})}),Object.keys(i).filter(a=>a in o).forEach(a=>{var l,c;const u=o[a],f=i[a];u.parentId!==f.parentId?s.push({type:"move",block:f.block,prevBlock:u.block,source:n,prevParent:u.parentId?(l=o[u.parentId])==null?void 0:l.block:void 0,currentParent:f.parentId?(c=i[f.parentId])==null?void 0:c.block:void 0}):Fxe(u.block,f.block)&&s.push({type:"update",block:f.block,prevBlock:u.block,source:n})}),s}function LW(e,t,n,r="before"){const o=typeof n=="string"?n:n.id,i=so(e),s=t.map(c=>wh(c,i)),a=Ui(o,e.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),e.step(new zn(l,l,new Ee(ge.from(s),0,0))),s.map(c=>dr(c,i))}function ZN(e,t,n){const r=so(e),o=n.map(c=>wh(c,r)),i=new Set(t.map(c=>typeof c=="string"?c:c.id)),s=[],a=typeof t[0]=="string"?t[0]:t[0].id;let l=0;if(e.doc.descendants((c,u)=>{if(i.size===0)return!1;if(!c.type.isInGroup("bnBlock")||!i.has(c.attrs.id))return!0;if(s.push(dr(c,r)),i.delete(c.attrs.id),n.length>0&&c.attrs.id===a){const y=e.doc.nodeSize;e.insert(u,o);const b=e.doc.nodeSize;l+=y-b}const f=e.doc.nodeSize,p=e.doc.resolve(u-l);p.node().type.name==="blockGroup"&&p.node(p.depth-1).type.name!=="doc"&&p.node().childCount===1?e.delete(p.before(),p.after()):e.delete(u-l,u-l+c.nodeSize);const m=e.doc.nodeSize;return l+=f-m,!1}),i.size>0){const c=[...i].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+c)}return{insertedBlocks:o.map(c=>dr(c,r)),removedBlocks:s}}const Jo=(e,t)=>({tr:n,dispatch:r})=>(r&&D4(n,e,t),!0);function D4(e,t,n,r,o){const i=Xb(e.doc.resolve(t)),s=so(e);if(r!==void 0&&o!==void 0&&r>o)throw new Error("Invalid replaceFromPos or replaceToPos");const a=s.nodes[i.blockNoteType],l=s.nodes[n.type||i.blockNoteType],c=l.isInGroup("bnBlock")?l:s.nodes.blockContainer;if(i.isBlockContainer&&l.isInGroup("blockContent")){const u=r!==void 0&&r>i.blockContent.beforePos&&r<i.blockContent.afterPos?r-i.blockContent.beforePos-1:void 0,f=o!==void 0&&o>i.blockContent.beforePos&&o<i.blockContent.afterPos?o-i.blockContent.beforePos-1:void 0;pz(n,e,i),Hxe(n,e,a,l,i,u,f)}else if(!i.isBlockContainer&&l.isInGroup("bnBlock"))pz(n,e,i);else{const u=dr(i.bnBlock.node,s);e.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,wh({children:u.children,...n},s));return}e.setNodeMarkup(i.bnBlock.beforePos,c,{...i.bnBlock.node.attrs,...n.props})}function Hxe(e,t,n,r,o,i,s){const a=so(t);let l="keep";if(e.content)if(typeof e.content=="string")l=Qa([e.content],a,r.name);else if(Array.isArray(e.content))l=Qa(e.content,a,r.name);else if(e.content.type==="tableContent")l=RC(e.content,a);else throw new ga(e.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);if(l==="keep")t.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...e.props});else if(i!==void 0||s!==void 0){t.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...e.props});const c=o.blockContent.beforePos+1+(i??0),u=o.blockContent.beforePos+1+(s??o.blockContent.node.content.size),f=t.doc.resolve(o.blockContent.beforePos).depth,p=t.doc.resolve(c).depth,m=t.doc.resolve(u).depth;t.replace(c,u,new Ee(ge.from(l),p-f-1,m-f-1))}else t.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...e.props},l))}function pz(e,t,n){const r=so(t);if(e.children!==void 0&&e.children.length>0){const o=e.children.map(i=>wh(i,r));if(n.childContainer)t.step(new zn(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new Ee(ge.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");t.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function Uxe(e,t,n,r,o){const i=typeof t=="string"?t:t.id,s=Ui(i,e.doc);if(!s)throw new Error(`Block with ID ${i} not found`);D4(e,s.posBeforeNode,n,r,o);const a=e.doc.resolve(s.posBeforeNode+1).node(),l=so(e);return dr(a,l)}function zW(e){const t=Array.from(e.classList).filter(n=>!n.startsWith("bn-"))||[];t.length>0?e.className=t.join(" "):e.removeAttribute("class")}function BW(e,t,n,r){let o;if(t)if(typeof t=="string")o=Qa([t],e.pmSchema);else if(Array.isArray(t))o=Qa(t,e.pmSchema);else if(t.type==="tableContent")o=RC(t,e.pmSchema);else throw new ga(t.type);else throw new Error("blockContent is required");const i=n.serializeFragment(ge.from(o),r);return i.nodeType===1&&zW(i),i}function Gxe(e,t,n,r,o,i,s){var a,l,c,u,f,p,m,y;const b=s?.document??document,w=t.pmSchema.nodes.blockContainer;let S=n.props;if(!n.props){S={};for(const[O,I]of Object.entries(t.schema.blockSchema[n.type].propSchema))I.default!==void 0&&(S[O]=I.default)}const E=(l=(a=w.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,w.create({id:n.id,...S})),T=Array.from(E.dom.attributes),A=t.blockImplementations[n.type].implementation.toExternalHTML({...n,props:S},t),M=b.createDocumentFragment();if(A.dom.classList.contains("bn-block-content")){const O=[...T,...Array.from(A.dom.attributes)].filter(I=>I.name.startsWith("data")&&I.name!=="data-content-type"&&I.name!=="data-file-block"&&I.name!=="data-node-view-wrapper"&&I.name!=="data-node-type"&&I.name!=="data-id"&&I.name!=="data-index"&&I.name!=="data-editable");for(const I of O)A.dom.firstChild.setAttribute(I.name,I.value);zW(A.dom.firstChild),M.append(...Array.from(A.dom.childNodes))}else M.append(A.dom);if(A.contentDOM&&n.content){const O=BW(t,n.content,r,s);A.contentDOM.appendChild(O)}let R;if(o.has(n.type)?R="OL":i.has(n.type)&&(R="UL"),R){if(((c=e.lastChild)==null?void 0:c.nodeName)!==R){const I=b.createElement(R);R==="OL"&&S!=null&&S.start&&S?.start!==1&&I.setAttribute("start",S.start+""),e.append(I)}const O=b.createElement("li");O.append(M),e.lastChild.appendChild(O)}else e.append(M);if(n.children&&n.children.length>0){const O=b.createDocumentFragment();if(FW(O,t,n.children,r,o,i,s),((u=e.lastChild)==null?void 0:u.nodeName)==="UL"||((f=e.lastChild)==null?void 0:f.nodeName)==="OL")for(;((p=O.firstChild)==null?void 0:p.nodeName)==="UL"||((m=O.firstChild)==null?void 0:m.nodeName)==="OL";)e.lastChild.lastChild.appendChild(O.firstChild);t.pmSchema.nodes[n.type].isInGroup("blockContent")?e.append(O):(y=A.contentDOM)==null||y.append(O)}}const FW=(e,t,n,r,o,i,s)=>{for(const a of n)Gxe(e,t,a,r,o,i,s)},qxe=(e,t,n,r,o,i)=>{const s=(i?.document??document).createDocumentFragment();return FW(s,e,t,n,r,o,i),s},IC=(e,t)=>{const n=iu.fromSchema(e);return{exportBlocks:(r,o)=>{const i=qxe(t,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),s=document.createElement("div");return s.append(i),s.innerHTML},exportInlineContent:(r,o)=>{const i=BW(t,r,n,o),s=document.createElement("div");return s.append(i.cloneNode(!0)),s.innerHTML}}};function Zxe(e,t,n,r,o){let i;if(t)if(typeof t=="string")i=Qa([t],e.pmSchema,r);else if(Array.isArray(t))i=Qa(t,e.pmSchema,r);else if(t.type==="tableContent")i=RC(t,e.pmSchema);else throw new ga(t.type);else throw new Error("blockContent is required");return n.serializeFragment(ge.from(i),o)}function Wxe(e,t,n,r,o){var i,s,a,l,c;const u=e.pmSchema.nodes.blockContainer;let f=t.props;if(!t.props){f={};for(const[y,b]of Object.entries(e.schema.blockSchema[t.type].propSchema))b.default!==void 0&&(f[y]=b.default)}const p=e.blockImplementations[t.type].implementation.toInternalHTML({...t,props:f},e);if(t.type==="numberedListItem"&&p.dom.setAttribute("data-index",r.toString()),p.contentDOM&&t.content){const y=Zxe(e,t.content,n,t.type,o);p.contentDOM.appendChild(y)}if(e.pmSchema.nodes[t.type].isInGroup("bnBlock")){if(t.children&&t.children.length>0){const y=VW(e,t.children,n,o);(i=p.contentDOM)==null||i.append(y)}return p.dom}const m=(a=(s=u.spec)==null?void 0:s.toDOM)==null?void 0:a.call(s,u.create({id:t.id,...f}));return(l=m.contentDOM)==null||l.appendChild(p.dom),t.children&&t.children.length>0&&((c=m.contentDOM)==null||c.appendChild(HW(e,t.children,n,o))),m.dom}function VW(e,t,n,r){const o=(r?.document??document).createDocumentFragment();let i=0;for(const s of t){s.type==="numberedListItem"?i++:i=0;const a=Wxe(e,s,n,i,r);o.appendChild(a)}return o}const HW=(e,t,n,r)=>{var o;const i=e.pmSchema.nodes.blockGroup,s=i.spec.toDOM(i.create({})),a=VW(e,t,n,r);return(o=s.contentDOM)==null||o.appendChild(a),s.dom},Kxe=(e,t)=>{const n=iu.fromSchema(e);return{serializeBlocks:(r,o)=>HW(t,r,n,o).outerHTML}},OC=(e,t)=>{const n=e.querySelector(t);if(!n)return;const r=e.querySelector("figcaption"),o=r?.textContent??void 0;return{targetElement:n,caption:o}},Yxe=(e,t,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(i);const s=document.createElement("p");s.className="bn-add-file-button-text",s.innerHTML=n||t.dictionary.file_blocks.file.add_button_text,o.appendChild(s);const a=c=>{c.preventDefault()},l=()=>{t.transact(c=>c.setMeta(t.filePanel.plugins[0],{block:e}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},Jxe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',Xxe=e=>{const t=document.createElement("div");t.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=Jxe,t.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=e.props.name,t.appendChild(r),{dom:t}},$4=(e,t,n,r,o)=>{const i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",e.props.url===""){const a=Yxe(e,t,r,o);i.appendChild(a.dom);const l=t.onUploadStart(c=>{if(c===e.id){i.removeChild(a.dom);const u=document.createElement("div");u.className="bn-file-loading-preview",u.textContent="Loading...",i.appendChild(u)}});return{dom:i,destroy:()=>{l(),a.destroy()}}}const s={dom:i};if(e.props.showPreview===!1||!n){const a=Xxe(e);i.appendChild(a.dom),s.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else i.appendChild(n.dom);if(e.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=e.props.caption,i.appendChild(a)}return s},j4=(e,t)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},PC=(e,t)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},mz=e=>({url:e.src||void 0}),Qxe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',ewe={backgroundColor:Pr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},UW={type:"audio",propSchema:ewe,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},twe=(e,t)=>{const n=document.createElement("div");n.innerHTML=Qxe;const r=document.createElement("audio");return r.className="bn-audio",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(o=>{r.src=o}):r.src=e.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,$4(e,t,{dom:r},t.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},GW=e=>{if(e.tagName==="AUDIO")return e.closest("figure")?void 0:mz(e);if(e.tagName==="FIGURE"){const t=OC(e,"audio");if(!t)return;const{targetElement:n,caption:r}=t;return{...mz(n),caption:r}}},nwe=e=>{if(!e.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let t;return e.props.showPreview?(t=document.createElement("audio"),t.src=e.props.url):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?j4(t,e.props.caption):PC(t,e.props.caption):{dom:t}},rwe=Jb(UW,{render:twe,parse:GW,toExternalHTML:nwe}),gz=Symbol.for("blocknote.shikiParser"),F_=Symbol.for("blocknote.shikiHighlighterPromise"),owe={language:{default:"text"}},iwe=Os({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const e=this.options;return{language:{default:e.editor.settings.codeBlock.defaultLanguage,parseHTML:t=>{let n=t,r=null;n?.tagName==="DIV"&&n?.dataset.contentType==="codeBlock"&&(n=n.children[0]),n?.tagName==="PRE"&&(n=n?.children[0]);const o=n?.getAttribute("data-language");if(o)r=o.toLowerCase();else{const i=[...n?.className.split(" ")||[]].filter(s=>s.startsWith("language-")).map(s=>s.replace("language-",""));i.length>0&&(r=i[0].toLowerCase())}return r?V_(e.editor.settings.codeBlock,r)??r:null},renderHTML:t=>t.language?{class:`language-${t.language}`,"data-language":t.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:e}){var t,n;const r=document.createElement("pre"),{dom:o,contentDOM:i}=Ts(this.name,"code",((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...e});return o.removeChild(i),o.appendChild(r),r.appendChild(i),{dom:o,contentDOM:i}},addNodeView(){const e=this.options;return({editor:t,node:n,getPos:r,HTMLAttributes:o})=>{var i,s;const a=document.createElement("pre"),l=document.createElement("select"),c=document.createElement("div"),{dom:u,contentDOM:f}=Ts(this.name,"code",{...((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},...o},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{}),p=m=>{const y=m.target.value;t.commands.command(({tr:b})=>(b.setNodeAttribute(r(),"language",y),!0))};return Object.entries(e.editor.settings.codeBlock.supportedLanguages).forEach(([m,{name:y}])=>{const b=document.createElement("option");b.value=m,b.text=y,l.appendChild(b)}),c.contentEditable="false",l.value=n.attrs.language||e.editor.settings.codeBlock.defaultLanguage,u.removeChild(f),u.appendChild(c),u.appendChild(a),a.appendChild(f),c.appendChild(l),l.addEventListener("change",p),{dom:u,contentDOM:f,update:m=>m.type===this.type,destroy:()=>{l.removeEventListener("change",p)}}}},addProseMirrorPlugins(){const e=this.options,t=globalThis;let n,r;return[Vge({parser:o=>{if(!e.editor.settings.codeBlock.createHighlighter)return[];if(!n)return t[F_]=t[F_]||e.editor.settings.codeBlock.createHighlighter(),t[F_].then(s=>{n=s});const i=V_(e.editor.settings.codeBlock,o.language);return!i||i==="text"||i==="none"||i==="plaintext"||i==="txt"?[]:n.getLoadedLanguages().includes(i)?(r||(r=t[gz]||Hge(n),t[gz]=r),r(o)):n.loadLanguage(i)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const e=this.options;return[new pd({find:/^```(.*?)\s$/,handler:({state:t,range:n,match:r})=>{const o=t.doc.resolve(n.from),i=r[1].trim(),s={language:V_(e.editor.settings.codeBlock,i)??i};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,s).setSelection(Fe.create(t.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:e})=>{const{selection:t}=e.state,{$from:n}=t;if(e.isActive(this.name)&&!n.parent.textContent&&mC(t)){const r=n.pos-n.parentOffset-2;return e.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:e})=>this.options.indentLineWithTab&&e.isActive(this.name)?(e.commands.insertContent("  "),!0):!1,Enter:({editor:e})=>{const{$from:t}=e.state.selection;if(!e.isActive(this.name))return!1;const n=t.parentOffset===t.parent.nodeSize-2,r=t.parent.textContent.endsWith(`

`);return!n||!r?(e.commands.insertContent(`
`),!0):e.chain().command(({tr:o})=>(o.delete(t.pos-2,t.pos),!0)).exitCode().run()},"Shift-Enter":({editor:e})=>{const{$from:t}=e.state.selection;return e.isActive(this.name)?(e.chain().insertContentAt(t.pos-t.parentOffset+t.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),swe=rc(iwe,owe);function V_(e,t){var n;return(n=Object.entries(e.supportedLanguages).find(([r,{aliases:o}])=>o?.includes(t)||r===t))==null?void 0:n[0]}const awe=$o.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:e=>e.getAttribute("data-background-color"),renderHTML:e=>({"data-background-color":e.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:e=>typeof e=="string"?!1:e.hasAttribute("data-background-color")?{stringValue:e.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:e}){return["span",e,0]}}),lwe=kf(awe,"string"),cwe=$o.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:e=>e.getAttribute("data-text-color"),renderHTML:e=>({"data-text-color":e.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:e=>typeof e=="string"?!1:e.hasAttribute("data-text-color")?{stringValue:e.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:e}){return["span",e,0]}}),uwe=kf(cwe,"string"),yz=e=>({url:e.src||void 0}),dwe={backgroundColor:Pr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},qW={type:"file",propSchema:dwe,content:"none",isFileBlock:!0},fwe=(e,t)=>$4(e,t),ZW=e=>{if(e.tagName==="EMBED")return e.closest("figure")?void 0:yz(e);if(e.tagName==="FIGURE"){const t=OC(e,"embed");if(!t)return;const{targetElement:n,caption:r}=t;return{...yz(n),caption:r}}},hwe=e=>{if(!e.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const t=document.createElement("a");return t.href=e.props.url,t.textContent=e.props.name||e.props.url,e.props.caption?PC(t,e.props.caption):{dom:t}},pwe=Jb(qW,{render:fwe,parse:ZW,toExternalHTML:hwe}),mwe={set:(e,t)=>window.localStorage.setItem(`toggle-${e.id}`,t?"true":"false"),get:e=>window.localStorage.getItem(`toggle-${e.id}`)==="true"},WW=(e,t,n,r=mwe)=>{if("isToggleable"in e.props&&!e.props.isToggleable)return{dom:n};const o=document.createElement("div"),i=document.createElement("div");i.className="bn-toggle-wrapper";const s=document.createElement("button");s.className="bn-toggle-button",s.type="button",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const a=y=>y.preventDefault();s.addEventListener("mousedown",a);const l=()=>{var y;i.getAttribute("data-show-children")==="true"?(i.setAttribute("data-show-children","false"),r.set(t.getBlock(e),!1),o.contains(c)&&o.removeChild(c)):(i.setAttribute("data-show-children","true"),r.set(t.getBlock(e),!0),((y=t.getBlock(e))==null?void 0:y.children.length)===0&&!o.contains(c)&&o.appendChild(c))};s.addEventListener("click",l),i.appendChild(s),i.appendChild(n);const c=document.createElement("button");c.className="bn-toggle-add-block-button",c.type="button",c.textContent="Empty toggle. Click to add a block.";const u=y=>y.preventDefault();c.addEventListener("mousedown",u);const f=()=>{t.transact(()=>{const y=t.updateBlock(e,{children:[{}]});t.setTextCursorPosition(y.children[0].id,"end"),t.focus()})};c.addEventListener("click",f),o.appendChild(i);let p=e.children.length;const m=t.onChange(()=>{var y;const b=((y=t.getBlock(e))==null?void 0:y.children.length)??0;b>p?(i.getAttribute("data-show-children")==="false"&&(i.setAttribute("data-show-children","true"),r.set(t.getBlock(e),!0)),o.contains(c)&&o.removeChild(c)):b===0&&b<p&&(i.getAttribute("data-show-children")==="true"&&(i.setAttribute("data-show-children","false"),r.set(t.getBlock(e),!1)),o.contains(c)&&o.removeChild(c)),p=b});return r.get(e)?(i.setAttribute("data-show-children","true"),e.children.length===0&&o.appendChild(c)):i.setAttribute("data-show-children","false"),{dom:o,ignoreMutation:y=>y instanceof MutationRecord&&(y.type==="attributes"&&y.target===i&&y.attributeName==="data-show-children"||y.type==="childList"&&(y.addedNodes[0]===c||y.removedNodes[0]===c)),destroy:()=>{s.removeEventListener("mousedown",a),s.removeEventListener("click",l),c.removeEventListener("mousedown",u),c.removeEventListener("click",f),m?.()}}},gwe=[1,2,3,4,5,6],KW={...Pr,level:{default:1,values:gwe},isToggleable:{default:!1}},ywe=Os({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return Yb(KW)},addInputRules(){return[...this.options.editor.settings.heading.levels.map(e=>new pd({find:new RegExp(`^(#{${e}})\\s$`),handler:({state:t,chain:n,range:r})=>{const o=Zn(t);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(Jo(o.bnBlock.beforePos,{type:"heading",props:{level:e}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){const e=this.options.editor;return Object.fromEntries(e.settings.heading.levels.map(t=>[`Mod-Alt-${t}`,()=>{const n=Zn(this.editor.state);return!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(n.bnBlock.beforePos,{type:"heading",props:{level:t}}))}]))},parseHTML(){const e=this.options.editor;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},...e.settings.heading.levels.map(t=>({tag:`h${t}`,attrs:{level:t},node:"heading"}))]},renderHTML({node:e,HTMLAttributes:t}){var n,r;return Ts(this.name,`h${e.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n})=>{var r,o;const{dom:i,contentDOM:s}=Ts(this.name,`h${e.attrs.level}`,{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...t},((o=this.options.domAttributes)==null?void 0:o.inlineContent)||{});i.removeChild(s);const a=this.options.editor,l=AC(n,a,this.editor,this.name),c=WW(l,a,s);return i.appendChild(c.dom),{dom:i,contentDOM:s,ignoreMutation:c.ignoreMutation,destroy:c.destroy}}}}),bwe=rc(ywe,KW),YW=(e,t,n,r,o,i)=>{const{dom:s,destroy:a}=$4(e,t,n,o,i),l=s;e.props.url&&e.props.showPreview&&(e.props.previewWidth?l.style.width=`${e.props.previewWidth}px`:l.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const u=document.createElement("div");u.className="bn-resize-handle",u.style.right="4px";let f,p=e.props.previewWidth;const m=T=>{var A,M;if(!f){!t.isEditable&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u));return}let R;e.props.textAlignment==="center"?f.handleUsed==="left"?R=f.initialWidth+(f.initialClientX-T.clientX)*2:R=f.initialWidth+(T.clientX-f.initialClientX)*2:f.handleUsed==="left"?R=f.initialWidth+f.initialClientX-T.clientX:R=f.initialWidth+T.clientX-f.initialClientX,p=Math.min(Math.max(R,64),((M=(A=t.domElement)==null?void 0:A.firstElementChild)==null?void 0:M.clientWidth)||Number.MAX_VALUE),l.style.width=`${p}px`},y=T=>{(!T.target||!l.contains(T.target)||!t.isEditable)&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u)),f&&(f=void 0,t.updateBlock(e,{props:{previewWidth:p}}))},b=()=>{t.isEditable&&(r.appendChild(c),r.appendChild(u))},w=T=>{T.relatedTarget===c||T.relatedTarget===u||f||t.isEditable&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u))},S=T=>{T.preventDefault(),f={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:T.clientX}},E=T=>{T.preventDefault(),f={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:T.clientX}};return window.addEventListener("mousemove",m),window.addEventListener("mouseup",y),l.addEventListener("mouseenter",b),l.addEventListener("mouseleave",w),c.addEventListener("mousedown",S),u.addEventListener("mousedown",E),{dom:l,destroy:()=>{a?.(),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y),l.removeEventListener("mouseenter",b),l.removeEventListener("mouseleave",w),c.removeEventListener("mousedown",S),u.removeEventListener("mousedown",E)}}},bz=e=>{const t=e.src||void 0,n=e.width||void 0;return{url:t,previewWidth:n}},vwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',xwe={textAlignment:Pr.textAlignment,backgroundColor:Pr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},JW={type:"image",propSchema:xwe,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},wwe=(e,t)=>{const n=document.createElement("div");n.innerHTML=vwe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(i=>{o.src=i}):o.src=e.props.url,o.alt=e.props.name||e.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),YW(e,t,{dom:r},r,t.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},XW=e=>{if(e.tagName==="IMG")return e.closest("figure")?void 0:bz(e);if(e.tagName==="FIGURE"){const t=OC(e,"img");if(!t)return;const{targetElement:n,caption:r}=t;return{...bz(n),caption:r}}},Swe=e=>{if(!e.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let t;return e.props.showPreview?(t=document.createElement("img"),t.src=e.props.url,t.alt=e.props.name||e.props.caption||"BlockNote image",e.props.previewWidth&&(t.width=e.props.previewWidth)):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?j4(t,e.props.caption):PC(t,e.props.caption):{dom:t}},kwe=Jb(JW,{render:wwe,parse:XW,toExternalHTML:Swe}),QW=(e,t,n)=>({state:r,dispatch:o})=>{const i=Jc(r.doc,e),s=wd(i);if(!s.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${e}`);const a=[{type:s.bnBlock.node.type,attrs:n?{...s.bnBlock.node.attrs,id:void 0}:{}},{type:t?s.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...s.blockContent.node.attrs}:{}}];return o&&r.tr.split(e,2,a),!0},DC=e=>{const{blockInfo:t,selectionEmpty:n}=e.transact(i=>({blockInfo:MC(i),selectionEmpty:i.selection.anchor===i.selection.head}));if(!t.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=t;return!(o.node.type.name==="toggleListItem"||o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:e._tiptapEditor.commands.first(({state:i,chain:s,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(Jo(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(s().deleteSelection().command(QW(i.selection.from,!0)).run(),!0):!1)])},Cwe={...Pr},Ewe=Os({name:"toggleListItem",content:"inline*",group:"blockContent",priority:90,addKeyboardShortcuts(){return{Enter:()=>DC(this.options.editor),"Mod-Shift-6":()=>{const e=Zn(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"toggleListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"p",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({HTMLAttributes:e,getPos:t})=>{var n,r;const{dom:o,contentDOM:i}=Ts(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{}),s=this.options.editor,a=AC(t,s,this.editor,this.name),l=WW(a,s,i);return o.appendChild(l.dom),{dom:o,contentDOM:i,ignoreMutation:l.ignoreMutation,destroy:l.destroy}}}}),Twe=rc(Ewe,Cwe);function L4(e,t,n){var r,o,i;const s=Bl.fromSchema(t),a=e,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const m of Array.from(a.childNodes))l.appendChild(m.cloneNode(!0));let c=s.parse(l,{topNode:t.nodes.blockGroup.create()});((o=(r=c.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const u=(i=c.firstChild)==null?void 0:i.firstChild;if(!(u!=null&&u.isTextblock))return ge.from(c);const f=t.nodes[n].create({},u.content),p=c.content.cut(u.nodeSize+2);if(p.size>0){const m=c.copy(p);return f.content.addToEnd(m)}return f.content}const _we={...Pr},Awe=Os({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new pd({find:new RegExp("^[-+*]\\s$"),handler:({state:e,chain:t,range:n})=>{const r=Zn(e);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||r.blockNoteType==="heading"||t().command(Jo(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>DC(this.options.editor),"Mod-Shift-8":()=>{const e=Zn(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:e=>{var t;if(typeof e=="string")return!1;const n=e.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="UL"?{}:!1},getContent:(e,t)=>L4(e,t,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"p",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Mwe=rc(Awe,_we),eK={...Pr,checked:{default:!1}},Nwe=Os({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return Yb(eK)},addInputRules(){return[new pd({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:e,chain:t,range:n})=>{const r=Zn(e);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||t().command(Jo(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new pd({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:e,chain:t,range:n})=>{const r=Zn(e);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||t().command(Jo(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>DC(this.options.editor),"Mod-Shift-9":()=>{const e=Zn(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:e=>typeof e=="string"||e.closest("[data-content-type]")||e.closest("li")?!1:e.type==="checkbox"?{checked:e.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:e=>{var t;if(typeof e=="string")return!1;const n=e.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="UL"){const r=e.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(e,t)=>L4(e,t,this.name),node:"checkListItem"}]},renderHTML({node:e,HTMLAttributes:t}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=e.attrs.checked,e.attrs.checked&&o.setAttribute("checked","");const{dom:i,contentDOM:s}=Ts(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return i.insertBefore(o,s),{dom:i,contentDOM:s}},addNodeView(){return({node:e,getPos:t,editor:n,HTMLAttributes:r})=>{var o,i;const s=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=e.attrs.checked,e.attrs.checked&&l.setAttribute("checked","");const c=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof t!="boolean"){const p=Jc(n.state.doc,t());if(p.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${p.node.type.name}`);this.editor.commands.command(Jo(p.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",c);const{dom:u,contentDOM:f}=Ts(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{});if(typeof t!="boolean"){const p="label-"+this.editor.state.doc.resolve(t()).node().attrs.id;l.setAttribute("aria-labelledby",p),f.id=p}return u.removeChild(f),u.appendChild(s),s.appendChild(a),s.appendChild(f),a.appendChild(l),{dom:u,contentDOM:f,destroy:()=>{l.removeEventListener("change",c)}}}}}),Rwe=rc(Nwe,eK),Iwe=new Ht("numbered-list-indexing"),Owe=()=>new kt({key:Iwe,appendTransaction:(e,t,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((i,s)=>{var a;if(i.type.name==="blockContainer"&&i.firstChild.type.name==="numberedListItem"){let l=`${i.firstChild.attrs.start||1}`;const c=wd({posBeforeNode:s,node:i});if(!c.isBlockContainer)throw new Error("impossible");const u=r.doc.resolve(c.bnBlock.beforePos).nodeBefore;if(u){const y=wd({posBeforeNode:c.bnBlock.beforePos-u.nodeSize,node:u});if(y.blockNoteType==="numberedListItem"){if(!y.isBlockContainer)throw new Error("impossible");const b=y.blockContent.node.attrs.index;l=(parseInt(b)+1).toString()}}const f=c.blockContent.node,p=f.attrs.index,m=((a=u?.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(p!==l||f.attrs.start&&!m){o=!0;const{start:y,...b}=f.attrs;r.setNodeMarkup(c.blockContent.beforePos,void 0,{...b,index:l,...typeof y=="number"&&m&&{start:y}})}}}),o?r:null}}),tK={...Pr,start:{default:void 0,type:"number"}},Pwe=Os({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...Yb(tK),index:{default:null,parseHTML:e=>e.getAttribute("data-index"),renderHTML:e=>({"data-index":e.index})}}},addInputRules(){return[new pd({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:e,chain:t,range:n,match:r})=>{const o=Zn(e);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem"||o.blockNoteType==="heading")return;const i=parseInt(r[1]);t().command(Jo(o.bnBlock.beforePos,{type:"numberedListItem",props:i===1&&{}||{start:i}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>DC(this.options.editor),"Mod-Shift-7":()=>{const e=Zn(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[Owe()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:e=>{var t;if(typeof e=="string")return!1;const n=e.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((t=n.parentElement)==null?void 0:t.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return e.previousSibling||r===1?{}:{start:r}}return!1},getContent:(e,t)=>L4(e,t,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"p",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Dwe=rc(Pwe,tK),$we={...Pr},jwe=Os({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const e=Zn(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:e=>{var t;return typeof e=="string"||!((t=e.textContent)!=null&&t.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"p",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Lwe=rc(jwe,$we),zwe={...Pr},Bwe=Os({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new pd({find:new RegExp("^>\\s$"),handler:({state:e,chain:t,range:n})=>{const r=Zn(e);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||t().command(Jo(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const e=Zn(this.editor.state);return!e.isBlockContainer||e.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Jo(e.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote",getContent:(e,t)=>{const n=e.cloneNode(!0);return Mxe(n),Bl.fromSchema(t).parse(n,{topNode:t.nodes.paragraph.create()}).content}}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"blockquote",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Fwe=rc(Bwe,zwe),Vwe=35,z4=120,Hwe=31,Uwe=On.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[Wye({cellMinWidth:Vwe,defaultCellMinWidth:z4,View:null}),o0e()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const e=this.editor.state.selection,t=e.empty,n=e.$head.parentOffset===0,r=e.$head.node().type.name==="tableParagraph";return t&&n&&r},Tab:()=>this.editor.commands.command(({state:e,dispatch:t,view:n})=>m9(1)(e,t,n)),"Shift-Tab":()=>this.editor.commands.command(({state:e,dispatch:t,view:n})=>m9(-1)(e,t,n))}},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:Lt(Ze(e,"tableRole",t))}}}),Gwe={textColor:Pr.textColor},qwe=Os({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:e}){var t,n;return Ts(this.name,"table",{...((t=this.options.domAttributes)==null?void 0:t.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:e,HTMLAttributes:t})=>{var n;class r extends tZ{constructor(i,s,a){super(i,s),this.node=i,this.cellMinWidth=s,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=Rn("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[p,m]of Object.entries(a))p!=="class"&&l.setAttribute(p,m);const c=this.dom,u=document.createElement("div");u.className="tableWrapper-inner",u.appendChild(c.firstChild),c.appendChild(u),l.appendChild(c);const f=document.createElement("div");f.className="table-widgets-container",f.style.position="relative",c.appendChild(f),this.dom=l}ignoreMutation(i){return!i.target.closest(".tableWrapper-inner")||super.ignoreMutation(i)}}return new r(e,z4,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t})}}}),Zwe=Os({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:e=>{if(typeof e=="string"||!e.textContent||!e.closest("[data-content-type]"))return!1;const t=e.parentElement;return t===null?!1:t.tagName==="TD"||t.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:e}){return["p",e,0]}}),Wwe=Ql.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",Cs(this.options.HTMLAttributes,e),0]}});function vz(e,t){const n=Bl.fromSchema(t).parse(e,{topNode:t.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),ge.fromArray(r)}const Kwe=rc(qwe,Gwe,[Uwe,Zwe,cye.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(e,t)=>vz(e,t)}]}}),lye.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(e,t)=>vz(e,t)}]}}),Wwe]),xz=e=>{const t=e.src||void 0,n=e.width||void 0;return{url:t,previewWidth:n}},Ywe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',Jwe={textAlignment:Pr.textAlignment,backgroundColor:Pr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},nK={type:"video",propSchema:Jwe,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},Xwe=(e,t)=>{const n=document.createElement("div");n.innerHTML=Ywe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(i=>{o.src=i}):o.src=e.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=e.props.previewWidth,r.appendChild(o),YW(e,t,{dom:r},r,t.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},rK=e=>{if(e.tagName==="VIDEO")return e.closest("figure")?void 0:xz(e);if(e.tagName==="FIGURE"){const t=OC(e,"video");if(!t)return;const{targetElement:n,caption:r}=t;return{...xz(n),caption:r}}},Qwe=e=>{if(!e.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let t;return e.props.showPreview?(t=document.createElement("video"),t.src=e.props.url,e.props.previewWidth&&(t.width=e.props.previewWidth)):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?j4(t,e.props.caption):PC(t,e.props.caption):{dom:t}},eSe=Jb(nK,{render:Xwe,parse:rK,toExternalHTML:Qwe}),B4={paragraph:Lwe,heading:bwe,quote:Fwe,codeBlock:swe,toggleListItem:Twe,bulletListItem:Mwe,numberedListItem:Dwe,checkListItem:Rwe,table:Kwe,file:pwe,image:kwe,video:eSe,audio:rwe},tSe=TW(B4),F4={bold:kf(Kge,"boolean"),italic:kf(rye,"boolean"),underline:kf(aye,"boolean"),strike:kf(sye,"boolean"),code:kf(Xge,"boolean"),textColor:uwe,backgroundColor:lwe};IW(F4);const oK={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},nSe=RW(oK);function qo(e,t){return e in t.schema.blockSchema&&t.schema.blockSchema[e]===tSe[e]}function rSe(e,t){return e in t.schema.inlineContentSchema&&t.schema.inlineContentSchema[e]===nSe[e]}function oSe(e,t,n){return t.type===e&&t.type in n.schema.blockSchema&&qo(t.type,n)}function ev(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock||!1}function iSe(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock&&"showPreview"in t.schema.blockSchema[e.type].propSchema||!1}function tv(e,t){return t.schema.blockSchema[e.type].isFileBlock&&!e.props.url}function Fp(e,t,n){return t in n.schema.blockSchema&&e in n.schema.blockSchema[t].propSchema&&n.schema.blockSchema[t].propSchema[e]===Pr[e]}function WN(e,t,n){return Fp(e,t.type,n)}function KN(e){return e instanceof wn}function sSe(e){let t=e.getTextCursorPosition().block,n=e.schema.blockSchema[t.type].content;for(;n==="none";){if(t=e.getTextCursorPosition().nextBlock,t===void 0)return;n=e.schema.blockSchema[t.type].content,e.setTextCursorPosition(t,"end")}}function Qr(e,t){const n=e.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&ch(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=e.updateBlock(n,t),e.setTextCursorPosition(r)):(r=e.insertBlocks([t],n,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),sSe(e),r}function aSe(e){const t=[];return qo("heading",e)&&t.push({onItemClick:()=>{Qr(e,{type:"heading",props:{level:1}})},badge:ys("Mod-Alt-1"),key:"heading",...e.dictionary.slash_menu.heading},{onItemClick:()=>{Qr(e,{type:"heading",props:{level:2}})},badge:ys("Mod-Alt-2"),key:"heading_2",...e.dictionary.slash_menu.heading_2},{onItemClick:()=>{Qr(e,{type:"heading",props:{level:3}})},badge:ys("Mod-Alt-3"),key:"heading_3",...e.dictionary.slash_menu.heading_3}),qo("quote",e)&&t.push({onItemClick:()=>{Qr(e,{type:"quote"})},key:"quote",...e.dictionary.slash_menu.quote}),qo("toggleListItem",e)&&t.push({onItemClick:()=>{Qr(e,{type:"toggleListItem"})},badge:ys("Mod-Shift-6"),key:"toggle_list",...e.dictionary.slash_menu.toggle_list}),qo("numberedListItem",e)&&t.push({onItemClick:()=>{Qr(e,{type:"numberedListItem"})},badge:ys("Mod-Shift-7"),key:"numbered_list",...e.dictionary.slash_menu.numbered_list}),qo("bulletListItem",e)&&t.push({onItemClick:()=>{Qr(e,{type:"bulletListItem"})},badge:ys("Mod-Shift-8"),key:"bullet_list",...e.dictionary.slash_menu.bullet_list}),qo("checkListItem",e)&&t.push({onItemClick:()=>{Qr(e,{type:"checkListItem"})},badge:ys("Mod-Shift-9"),key:"check_list",...e.dictionary.slash_menu.check_list}),qo("paragraph",e)&&t.push({onItemClick:()=>{Qr(e,{type:"paragraph"})},badge:ys("Mod-Alt-0"),key:"paragraph",...e.dictionary.slash_menu.paragraph}),qo("codeBlock",e)&&t.push({onItemClick:()=>{Qr(e,{type:"codeBlock"})},badge:ys("Mod-Alt-c"),key:"code_block",...e.dictionary.slash_menu.code_block}),qo("table",e)&&t.push({onItemClick:()=>{Qr(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...e.dictionary.slash_menu.table}),qo("image",e)&&t.push({onItemClick:()=>{const n=Qr(e,{type:"image"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"image",...e.dictionary.slash_menu.image}),qo("video",e)&&t.push({onItemClick:()=>{const n=Qr(e,{type:"video"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"video",...e.dictionary.slash_menu.video}),qo("audio",e)&&t.push({onItemClick:()=>{const n=Qr(e,{type:"audio"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"audio",...e.dictionary.slash_menu.audio}),qo("file",e)&&t.push({onItemClick:()=>{const n=Qr(e,{type:"file"});e.transact(r=>r.setMeta(e.filePanel.plugins[0],{block:n}))},key:"file",...e.dictionary.slash_menu.file}),qo("heading",e)&&(t.push({onItemClick:()=>{Qr(e,{type:"heading",props:{level:1,isToggleable:!0}})},key:"toggle_heading",...e.dictionary.slash_menu.toggle_heading},{onItemClick:()=>{Qr(e,{type:"heading",props:{level:2,isToggleable:!0}})},key:"toggle_heading_2",...e.dictionary.slash_menu.toggle_heading_2},{onItemClick:()=>{Qr(e,{type:"heading",props:{level:3,isToggleable:!0}})},key:"toggle_heading_3",...e.dictionary.slash_menu.toggle_heading_3}),e.settings.heading.levels.filter(n=>n>3).forEach(n=>{t.push({onItemClick:()=>{Qr(e,{type:"heading",props:{level:n}})},key:`heading_${n}`,...e.dictionary.slash_menu[`heading_${n}`]})})),t.push({onItemClick:()=>{e.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...e.dictionary.slash_menu.emoji}),t}function V4(e,t){return e.filter(({title:n,aliases:r})=>n.toLowerCase().includes(t.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(t.toLowerCase())).length!==0)}function H_(e){return e&&Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}let H4=class iK{constructor(t){re(this,"blockSpecs"),re(this,"inlineContentSpecs"),re(this,"styleSpecs"),re(this,"blockSchema"),re(this,"inlineContentSchema"),re(this,"styleSchema"),re(this,"BlockNoteEditor","only for types"),re(this,"Block","only for types"),re(this,"PartialBlock","only for types"),this.blockSpecs=H_(t?.blockSpecs)||B4,this.inlineContentSpecs=H_(t?.inlineContentSpecs)||oK,this.styleSpecs=H_(t?.styleSpecs)||F4,this.blockSchema=TW(this.blockSpecs),this.inlineContentSchema=RW(this.inlineContentSpecs),this.styleSchema=IW(this.styleSpecs)}static create(t){return new iK(t)}};const lSe={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},cSe=()=>{const e=document.createElement("div");return e.className="bn-page-break",e.setAttribute("data-page-break",""),{dom:e}},uSe=e=>{if(e.tagName==="DIV"&&e.hasAttribute("data-page-break"))return{type:"pageBreak"}},dSe=()=>{const e=document.createElement("div");return e.setAttribute("data-page-break",""),{dom:e}},fSe=Jb(lSe,{render:cSe,parse:uSe,toExternalHTML:dSe});H4.create({blockSpecs:{pageBreak:fSe}});function hSe(e){return e.transact(t=>{const n=Jc(t.doc,t.selection.anchor);if(t.selection instanceof wn)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:t.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:t.selection.$headCell.pos-n.posBeforeNode};if(t.selection instanceof Ke)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=Jc(t.doc,t.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:t.selection.anchor-n.posBeforeNode,headOffset:t.selection.head-r.posBeforeNode}}})}function pSe(e,t){var n,r;const o=(n=Ui(t.anchorBlockId,e.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${t.anchorBlockId} to update selection`);let i;if(t.type==="cell")i=wn.create(e.doc,o+t.anchorCellOffset,o+t.headCellOffset);else if(t.type==="node")i=Ke.create(e.doc,o+1);else{const s=(r=Ui(t.headBlockId,e.doc))==null?void 0:r.posBeforeNode;if(s===void 0)throw new Error(`Could not find block with ID ${t.headBlockId} to update selection`);i=Fe.create(e.doc,o+t.anchorOffset,s+t.headOffset)}e.setSelection(i)}function YN(e){return e.map(t=>t.type==="columnList"?t.children.map(n=>YN(n.children)).flat():{...t,children:YN(t.children)}).flat()}function sK(e,t,n){e.transact(r=>{var o;const i=((o=e.getSelection())==null?void 0:o.blocks)||[e.getTextCursorPosition().block],s=hSe(e);e.removeBlocks(i),e.insertBlocks(YN(i),t,n),pSe(r,s)})}function aK(e){return!e||e.type!=="columnList"}function lK(e,t,n){let r,o;if(t?t.children.length>0?(r=t.children[t.children.length-1],o="after"):(r=t,o="before"):n&&(r=n,o="before"),!r||!o)return;const i=e.getParentBlock(r);return aK(i)?{referenceBlock:r,placement:o}:lK(e,o==="after"?r:e.getPrevBlock(r),i)}function cK(e,t,n){let r,o;if(t?t.children.length>0?(r=t.children[0],o="before"):(r=t,o="after"):n&&(r=n,o="after"),!r||!o)return;const i=e.getParentBlock(r);return aK(i)?{referenceBlock:r,placement:o}:cK(e,o==="before"?r:e.getNextBlock(r),i)}function mSe(e){e.transact(()=>{const t=e.getSelection(),n=t?.blocks[0]||e.getTextCursorPosition().block,r=lK(e,e.getPrevBlock(n),e.getParentBlock(n));r&&sK(e,r.referenceBlock,r.placement)})}function gSe(e){e.transact(()=>{const t=e.getSelection(),n=t?.blocks[t?.blocks.length-1]||e.getTextCursorPosition().block,r=cK(e,e.getNextBlock(n),e.getParentBlock(n));r&&sK(e,r.referenceBlock,r.placement)})}function ySe(e,t,n){const{$from:r,$to:o}=e.selection,i=r.blockRange(o,m=>m.childCount>0&&(m.type.name==="blockGroup"||m.type.name==="column"));if(!i)return!1;const s=i.startIndex;if(s===0)return!1;const a=i.parent.child(s-1);if(a.type!==t)return!1;const l=a.lastChild&&a.lastChild.type===n,c=ge.from(l?t.create():null),u=new Ee(ge.from(t.create(null,ge.from(n.create(null,c)))),l?3:1,0),f=i.start,p=i.end;return e.step(new kr(f-(l?3:1),p,f,p,u,1,!0)).scrollIntoView(),!0}function uK(e){return e.transact(t=>ySe(t,e.pmSchema.nodes.blockContainer,e.pmSchema.nodes.blockGroup))}function bSe(e){e._tiptapEditor.commands.liftListItem("blockContainer")}function vSe(e){return e.transact(t=>{const{bnBlock:n}=MC(t);return t.doc.resolve(n.beforePos).nodeBefore!==null})}function xSe(e){return e.transact(t=>{const{bnBlock:n}=MC(t);return t.doc.resolve(n.beforePos).depth>1})}function dK(e,t){const n=typeof t=="string"?t:t.id,r=so(e),o=Ui(n,e);if(o)return dr(o.node,r)}function wSe(e,t){const n=typeof t=="string"?t:t.id,r=Ui(n,e),o=so(e);if(!r)return;const i=e.resolve(r.posBeforeNode).nodeBefore;if(i)return dr(i,o)}function SSe(e,t){const n=typeof t=="string"?t:t.id,r=Ui(n,e),o=so(e);if(!r)return;const i=e.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(i)return dr(i,o)}function kSe(e,t){const n=typeof t=="string"?t:t.id,r=so(e),o=Ui(n,e);if(!o)return;const i=e.resolve(o.posBeforeNode),s=i.node(),a=i.node(-1),l=a.type.name!=="doc"?s.type.name==="blockGroup"?a:s:void 0;if(l)return dr(l,r)}function CSe(e,t,n,r={updateSelection:!0}){let{from:o,to:i}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},s=!0,a=!0,l="";if(n.forEach(c=>{c.check(),s&&c.isText&&c.marks.length===0?l+=c.text:s=!1,a=a?c.isBlock:!1}),o===i&&a){const{parent:c}=e.doc.resolve(o);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(o-=1,i+=1)}return s?e.insertText(l,o,i):e.replaceWith(o,i,n),r.updateSelection&&Rq(e,e.steps.length-1,-1),!0}function ESe(e){const t=so(e);if(e.selection.empty||"node"in e.selection)return;const n=e.doc.resolve(Jc(e.doc,e.selection.from).posBeforeNode),r=e.doc.resolve(Jc(e.doc,e.selection.to).posBeforeNode),o=(c,u)=>{const f=n.posAtIndex(c,u),p=e.doc.resolve(f).nodeAfter;if(!p)throw new Error(`Error getting selection - node not found at position ${f}`);return dr(p,t)},i=[],s=n.sharedDepth(r.pos),a=n.index(s),l=r.index(s);if(n.depth>s){i.push(dr(n.nodeAfter,t));for(let c=n.depth;c>s;c--)if(n.node(c).type.isInGroup("childContainer")){const u=n.index(c)+1,f=n.node(c).childCount;for(let p=u;p<f;p++)i.push(o(p,c))}}else i.push(o(a,s));for(let c=a+1;c<=l;c++)i.push(o(c,s));if(i.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${e.selection})`);return{blocks:i}}function TSe(e,t,n){const r=typeof t=="string"?t:t.id,o=typeof n=="string"?n:n.id,i=so(e),s=Qb(i);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=Ui(r,e.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=Ui(o,e.doc);if(!l)throw new Error(`Block with ID ${o} not found`);const c=wd(a),u=wd(l),f=s.blockSchema[c.blockNoteType],p=s.blockSchema[u.blockNoteType];if(!c.isBlockContainer||f.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!u.isBlockContainer||p.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let m,y;if(f.content==="table"){const b=er.get(c.blockContent.node);m=c.blockContent.beforePos+b.positionAt(0,0,c.blockContent.node)+1+2}else m=c.blockContent.beforePos+1;if(p.content==="table"){const b=er.get(u.blockContent.node),w=u.blockContent.beforePos+b.positionAt(b.height-1,b.width-1,u.blockContent.node)+1,S=e.doc.resolve(w).nodeAfter.nodeSize;y=w+S-2}else y=u.blockContent.afterPos-1;e.setSelection(Fe.create(e.doc,m,y))}function _Se(e){const t=so(e);let n=e.selection.$from,r=e.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=e.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=e.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=e.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=e.doc.resolve(n.pos+1);const o=Ixe(e.doc.slice(n.pos,r.pos,!0),t);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function ASe(e){const{bnBlock:t}=MC(e),n=so(e.doc),r=e.doc.resolve(t.beforePos),o=r.nodeBefore,i=e.doc.resolve(t.afterPos).nodeAfter;let s;return r.depth>1&&(s=r.node(),s.type.isInGroup("bnBlock")||(s=r.node(r.depth-1))),{block:dr(t.node,n),prevBlock:o===null?void 0:dr(o,n),nextBlock:i===null?void 0:dr(i,n),parentBlock:s===void 0?void 0:dr(s,n)}}function fK(e,t,n="start"){const r=typeof t=="string"?t:t.id,o=so(e.doc),i=Qb(o),s=Ui(r,e.doc);if(!s)throw new Error(`Block with ID ${r} not found`);const a=wd(s),l=i.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const c=a.blockContent;if(l==="none"){e.setSelection(Ke.create(e.doc,c.beforePos));return}if(l==="inline")n==="start"?e.setSelection(Fe.create(e.doc,c.beforePos+1)):e.setSelection(Fe.create(e.doc,c.afterPos-1));else if(l==="table")n==="start"?e.setSelection(Fe.create(e.doc,c.beforePos+4)):e.setSelection(Fe.create(e.doc,c.afterPos-4));else throw new ga(l)}else{const c=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;fK(e,c.attrs.id,n)}}let Vp;async function U4(){if(Vp)return Vp;const e=await Promise.all([Ne(()=>import("./index-DQI-OdxX.js"),__vite__mapDeps([0,1])),Ne(()=>import("./index-CCYXvd2U.js"),[]),Ne(()=>Promise.resolve().then(()=>Jdt),void 0),Ne(()=>import("./index-CpbpeXAm.js"),__vite__mapDeps([2,1])),Ne(()=>import("./index-D4tK1cuZ.js"),__vite__mapDeps([3,4])),Ne(()=>Promise.resolve().then(()=>hpt),void 0),Ne(()=>import("./index-BHOGyEmd.js"),[]),Ne(()=>Promise.resolve().then(()=>zut),void 0),Ne(()=>Promise.resolve().then(()=>Ndt),void 0),Ne(()=>import("./index-DbV_qOM2.js"),__vite__mapDeps([5,4]))]);return Vp={rehypeParse:e[0],rehypeStringify:e[1],unified:e[2],hastUtilFromDom:e[3],rehypeRemark:e[4],remarkGfm:e[5],remarkStringify:e[6],remarkParse:e[7],remarkRehype:e[8],rehypeFormat:e[9]},Vp}function MSe(){const e=t=>{let n=t.children.length;for(let r=0;r<n;r++){const o=t.children[r];if(o.type==="element"&&(e(o),o.tagName==="u"))if(o.children.length>0){t.children.splice(r,1,...o.children);const i=o.children.length-1;n+=i,r+=i}else t.children.splice(r,1),n--,r--}};return e}function NSe(){const e=Vp;if(!e)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const t=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const i=n.children[o],s=o+1<n.children.length?n.children[o+1]:void 0;i.type==="element"&&i.tagName==="input"&&((r=i.properties)==null?void 0:r.type)==="checkbox"&&s?.type==="element"&&s.tagName==="p"?(s.tagName="span",s.children.splice(0,0,e.hastUtilFromDom.fromDom(document.createTextNode(" ")))):t(i)}};return t}function G4(e){const t=Vp;if(!t)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return t.unified.unified().use(t.rehypeParse.default,{fragment:!0}).use(MSe).use(NSe).use(t.rehypeRemark.default).use(t.remarkGfm.default).use(t.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(e).value}async function RSe(e,t,n,r){await U4();const o=IC(t,n).exportBlocks(e,r);return G4(o)}function ISe(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}function OSe(e){return e.nodeType===3&&!/\S/.test(e.nodeValue||"")}function PSe(e){e.querySelectorAll("li > ul, li > ol").forEach(t=>{const n=ISe(t),r=t.parentElement,o=Array.from(r.childNodes).slice(n+1);t.remove(),o.forEach(i=>{i.remove()}),r.insertAdjacentElement("afterend",t),o.reverse().forEach(i=>{if(OSe(i))return;const s=document.createElement("li");s.append(i),t.insertAdjacentElement("afterend",s)}),r.childNodes.length===0&&r.remove()})}function DSe(e){e.querySelectorAll("li + ul, li + ol").forEach(t=>{var n,r;const o=t.previousElementSibling,i=document.createElement("div");o.insertAdjacentElement("afterend",i),i.append(o);const s=document.createElement("div");for(s.setAttribute("data-node-type","blockGroup"),i.append(s);((n=i.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=i.nextElementSibling)==null?void 0:r.nodeName)==="OL";)s.append(i.nextElementSibling)})}let wz=null;function $Se(){return wz||(wz=document.implementation.createHTMLDocument("title"))}function hK(e){if(typeof e=="string"){const t=$Se().createElement("div");t.innerHTML=e,e=t}return PSe(e),DSe(e),e}async function pK(e,t){const n=hK(e),r=Bl.fromSchema(t).parse(n,{topNode:t.nodes.blockGroup.create()}),o=[];for(let i=0;i<r.childCount;i++)o.push(dr(r.child(i),t));return o}function jSe(e,t){const n=t.value?t.value:"",r={};t.lang&&(r["data-language"]=t.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}async function mK(e){const t=await U4();return t.unified.unified().use(t.remarkParse.default).use(t.remarkGfm.default).use(t.remarkRehype.default,{handlers:{...t.remarkRehype.defaultHandlers,code:jSe}}).use(t.rehypeStringify.default).processSync(e).value}async function LSe(e,t){const n=await mK(e);return pK(n,t)}const q4=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function zSe(e,t){if(!e.startsWith(".")||!t.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return e===t}function BSe(e,t){const n=e.split("/"),r=t.split("/");if(n.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function Sz(e,t,n,r="after"){let o;return Array.isArray(t.content)&&t.content.length===0?o=e.updateBlock(t,n).id:o=e.insertBlocks([n],t,r)[0].id,o}async function gK(e,t){var n;if(!t.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in e?e.dataTransfer:e.clipboardData;if(r===null)return;let o=null;for(const a of q4)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const i=r.items;if(!i)return;e.preventDefault();const s=Object.values(t.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<i.length;a++){let l="file";for(const u of s)for(const f of u.fileBlockAccept||[]){const p=f.startsWith("."),m=i[a].getAsFile();if(m&&(!p&&m.type&&BSe(i[a].type,f)||p&&zSe("."+m.name.split(".").pop(),f))){l=u.type;break}}const c=i[a].getAsFile();if(c){const u={type:l,props:{name:c.name}};let f;if(e.type==="paste"){const y=t.getTextCursorPosition().block;f=Sz(t,y,u)}else if(e.type==="drop"){const y={left:e.clientX,top:e.clientY},b=(n=t.prosemirrorView)==null?void 0:n.posAtCoords(y);if(!b)return;f=t.transact(w=>{var S;const E=Jc(w.doc,b.pos),T=(S=t.prosemirrorView)==null?void 0:S.dom.querySelector(`[data-id="${E.node.attrs.id}"]`),A=T?.getBoundingClientRect();return Sz(t,t.getBlock(E.node.attrs.id),u,A&&(A.top+A.bottom)/2>y.top?"before":"after")})}else return;const p=await t.uploadFile(c,f),m=typeof p=="string"?{props:{url:p}}:{...p};t.updateBlock(f,m)}}}const FSe=e=>On.create({name:"dropFile",addProseMirrorPlugins(){return[new kt({props:{handleDOMEvents:{drop(t,n){if(!e.isEditable)return;let r=null;for(const o of q4)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(gK(n,e),!0):!1}}}})]}}),VSe=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,HSe=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,USe=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,GSe=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,qSe=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,ZSe=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,WSe=/\n{2} {0,3}-{2,48}\n{2}/,KSe=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,YSe=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,JSe=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,XSe=/^\s*\|(.+\|)+\s*$/m,QSe=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,eke=/^\s*\|(.+\|)+\s*$/m,tke=e=>VSe.test(e)||HSe.test(e)||USe.test(e)||GSe.test(e)||qSe.test(e)||ZSe.test(e)||WSe.test(e)||KSe.test(e)||YSe.test(e)||JSe.test(e)||XSe.test(e)||QSe.test(e)||eke.test(e);async function nke(e,t){const{schema:n}=t.state;if(!e.clipboardData)return!1;const r=e.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return t.pasteText(r),!0;const o=e.clipboardData.getData("vscode-editor-data"),i=o?JSON.parse(o):void 0,s=i?.mode;return s?(t.pasteHTML(`<pre><code class="language-${s}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function rke({event:e,editor:t,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(t.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=e.clipboardData)==null?void 0:o.getData("text/plain");if(a)return t.pasteText(a),!0}let i;for(const a of q4)if(e.clipboardData.types.includes(a)){i=a;break}if(!i)return!0;if(i==="vscode-editor-data")return nke(e,t.prosemirrorView),!0;if(i==="Files")return gK(e,t),!0;const s=e.clipboardData.getData(i);if(i==="blocknote/html")return t.pasteHTML(s,!0),!0;if(i==="text/markdown")return t.pasteMarkdown(s),!0;if(n){const a=e.clipboardData.getData("text/plain");if(tke(a))return t.pasteMarkdown(a),!0}return i==="text/html"?(t.pasteHTML(s),!0):r?(t.pasteMarkdown(s),!0):(t.pasteText(s),!0)}const oke=(e,t)=>On.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new kt({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!e.isEditable)return t({event:r,editor:e,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:i=!0}={})=>rke({event:r,editor:e,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:i})})}}}})]}});function yK(e){const t=[];return e.descendants(n=>{var r,o;const i=so(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(s=>{t.push(dr(s,i))}),!1):n.type.isInGroup("bnBlock")?(t.push(dr(n,i)),!1):!0}),t}function ike(e,t,n){var r;let o=!1;const i=e.state.selection instanceof wn;if(!i){const l=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,c=[];for(let u=0;u<l.childCount;u++)c.push(l.child(u));o=c.find(u=>u.type.isInGroup("bnBlock")||u.type.name==="blockGroup"||u.type.spec.group==="blockContent")===void 0,o&&(t=l)}let s;const a=IC(e.state.schema,n);if(i){((r=t.firstChild)==null?void 0:r.type.name)==="table"&&(t=t.firstChild.content);const l=NW(t,n.schema.inlineContentSchema,n.schema.styleSchema);s=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=NC(t,n.schema.inlineContentSchema,n.schema.styleSchema);s=a.exportInlineContent(l,{})}else{const l=yK(t);s=a.exportBlocks(l,{})}return s}function bK(e,t){"node"in e.state.selection&&e.state.selection.node.type.spec.group==="blockContent"&&t.transact(s=>s.setSelection(new Ke(s.doc.resolve(e.state.selection.from-1))));const n=e.serializeForClipboard(e.state.selection.content()).dom.innerHTML,r=e.state.selection.content().content,o=ike(e,r,t),i=G4(o);return{clipboardHTML:n,externalHTML:o,markdown:i}}const kz=()=>{const e=window.getSelection();if(!e||e.isCollapsed)return!0;let t=e.focusNode;for(;t;){if(t instanceof HTMLElement&&t.getAttribute("contenteditable")==="false")return!0;t=t.parentElement}return!1},Cz=(e,t,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=bK(t,e);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",i)},ske=e=>On.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new kt({props:{handleDOMEvents:{copy(t,n){return kz()||Cz(e,t,n),!0},cut(t,n){return kz()||(Cz(e,t,n),t.editable&&t.dispatch(t.state.tr.deleteSelection())),!0},dragstart(t,n){if(!("node"in t.state.selection)||t.state.selection.node.type.spec.group!=="blockContent")return;e.transact(s=>s.setSelection(new Ke(s.doc.resolve(t.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=bK(t,e);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",i),!0}}}})]}}),ake=On.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:Pr.backgroundColor.default,parseHTML:e=>e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):Pr.backgroundColor.default,renderHTML:e=>e.backgroundColor===Pr.backgroundColor.default?{}:{"data-background-color":e.backgroundColor}}}}]}});let Z4=class{constructor(){re(this,"callbacks",{})}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),()=>this.off(t,n)}emit(t,...n){const r=this.callbacks[t];r&&r.forEach(o=>o.apply(this,n))}off(t,n){const r=this.callbacks[t];r&&(n?this.callbacks[t]=r.filter(o=>o!==n):delete this.callbacks[t])}removeAllListeners(){this.callbacks={}}},io=class extends Z4{constructor(...t){super(),re(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(t){this.plugins.push(t)}get priority(){}};class lke extends io{constructor(){super(),re(this,"beforeChangeCallbacks",[]),this.addProsemirrorPlugin(new kt({filterTransaction:t=>{let n;return this.beforeChangeCallbacks.reduce((r,o)=>r===!1?r:o({getChanges(){return n||(n=jW(t),n)},tr:t})!==!1,!0)}}))}static key(){return"blockChange"}subscribe(t){return this.beforeChangeCallbacks.push(t),()=>{this.beforeChangeCallbacks=this.beforeChangeCallbacks.filter(n=>n!==t)}}}const fw=class vK extends io{constructor(t){super(),re(this,"provider"),re(this,"recentlyUpdatedCursors"),re(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const i=(this.collaboration.renderCursor??vK.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(i.addEventListener("mouseenter",()=>{const s=this.recentlyUpdatedCursors.get(r);s.element.setAttribute("data-active",""),s.hideTimeout&&(clearTimeout(s.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:void 0}))}),i.addEventListener("mouseleave",()=>{const s=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:setTimeout(()=>{s.element.removeAttribute("data-active")},2e3)})})),o={element:i,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),re(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=t,this.provider=t.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",t.user),t.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(pxe(this.provider.awareness,{selectionBuilder:T4,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}static isDarkColor(t){const n=t.charAt(0)==="#"?t.substring(1,7):t,r=parseInt(n.substring(0,2),16),o=parseInt(n.substring(2,4),16),i=parseInt(n.substring(4,6),16),s=[r/255,o/255,i/255].map(a=>a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]<=.179}};re(fw,"defaultCursorRender",e=>{const t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${e.color}; color: ${fw.isDarkColor(e.color)?"white":"black"}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${e.color}; color: ${fw.isDarkColor(e.color)?"white":"black"}`),r.insertBefore(document.createTextNode(e.name),null),n.insertBefore(r,null),t.insertBefore(document.createTextNode(""),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode(""),null),t});let xK=fw,JN=class extends io{static key(){return"ySyncPlugin"}constructor(t){super(),this.addProsemirrorPlugin(X1e(t))}get priority(){return 1001}},XN=class extends io{static key(){return"yUndoPlugin"}constructor({editor:t}){super(),this.addProsemirrorPlugin(wxe({trackedOrigins:[t]}))}get priority(){return 1e3}};const wK=$o.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:e=>!!e.getAttribute("data-orphan"),renderHTML:e=>e.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:e=>e.getAttribute("data-bn-thread-id"),renderHTML:e=>({"data-bn-thread-id":e.threadId}),default:""}}},renderHTML({HTMLAttributes:e}){return["span",Cs(e,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(e){return e.name==="comment"?{blocknoteIgnore:!0}:{}}});class cke extends Z4{constructor(t){super(),re(this,"userCache",new Map),re(this,"loadingUsers",new Set),this.resolveUsers=t}async loadUsers(t){const n=t.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(t){return this.userCache.get(t)}subscribe(t){return this.on("update",t)}}const ix=new Ht("blocknote-comments"),uke="SET_SELECTED_THREAD_ID";function dke(e,t){const n=new Map;return e.descendants((r,o)=>{r.marks.forEach(i=>{if(i.type.name===t){const s=i.attrs.threadId;if(!s)return;const a=o,l=a+r.nodeSize,c=n.get(s)??{from:1/0,to:0};n.set(s,{from:Math.min(a,c.from),to:Math.max(l,c.to)})}})}),n}class fke extends io{constructor(t,n,r){if(super(),re(this,"userStore"),re(this,"pendingComment",!1),re(this,"selectedThreadId"),re(this,"threadPositions",new Map),re(this,"updateMarksFromThreads",i=>{this.editor.transact(s=>{s.doc.descendants((a,l)=>{a.marks.forEach(c=>{if(c.type.name===this.markType){const u=c.type,f=c.attrs.threadId,p=i.get(f),m=!!(!p||p.resolved||p.deletedAt);if(m!==c.attrs.orphan){const y=Math.max(l,0),b=Math.min(l+a.nodeSize,s.doc.content.size-1,s.doc.content.size-1);s.removeMark(y,b,c),s.addMark(y,b,u.create({...c.attrs,orphan:m})),m&&this.selectedThreadId===f&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=t,this.threadStore=n,this.markType=r,!t.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new cke(t.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),t.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),t.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new kt({key:ix,state:{init(){return{decorations:Rt.empty}},apply(i,s){const a=i.getMeta(ix);if(!i.docChanged&&!a)return s;const l=i.docChanged?dke(i.doc,o.markType):o.threadPositions;(l.size>0||o.threadPositions.size>0)&&(o.threadPositions=l,o.emitStateUpdate());const c=[];if(o.selectedThreadId){const u=l.get(o.selectedThreadId);u&&c.push(Zt.inline(u.from,u.to,{class:"bn-thread-mark-selected"}))}return{decorations:Rt.create(i.doc,c)}}},props:{decorations(i){var s;return((s=ix.getState(i))==null?void 0:s.decorations)??Rt.empty},handleClick:(i,s,a)=>{if(a.button!==0)return;const l=i.state.doc.nodeAt(s);if(!l){o.selectThread(void 0);return}const c=l.marks.find(f=>f.type.name===r&&f.attrs.orphan!==!0),u=c?.attrs.threadId;o.selectThread(u,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(t){return this.on("update",t)}selectThread(t,n=!0){var r,o;if(this.selectedThreadId!==t&&(this.selectedThreadId=t,this.emitStateUpdate(),this.editor.transact(i=>i.setMeta(ix,{name:uke})),t&&n)){const i=this.threadPositions.get(t);if(!i)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(i.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(t){const n=await this.threadStore.createThread(t);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,i=cn.getState(r.state),s={prosemirror:{head:o.head,anchor:o.anchor},yjs:i?NS(i.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:s})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class hke{constructor(t,n,r,o){re(this,"state"),re(this,"emitUpdate"),re(this,"mouseDownHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),re(this,"dragstartHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),re(this,"scrollHandler",()=>{var i;if((i=this.state)!=null&&i.show){const s=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!s)return;this.state.referencePos=s.getBoundingClientRect(),this.emitUpdate()}}),re(this,"closeMenu",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(t,n){var r,o;const i=this.pluginKey.getState(t.state),s=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&i!=null&&i.block&&this.editor.isEditable){const c=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${i.block.id}"]`);if(!c)return;this.state={show:!0,referencePos:c.getBoundingClientRect(),block:i.block},this.emitUpdate();return}const a=i?.block&&!(s!=null&&s.block),l=!(i!=null&&i.block)&&s?.block;a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const U_=new Ht("FilePanelPlugin");class pke extends io{constructor(t){super(),re(this,"view"),re(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new kt({key:U_,view:n=>(this.view=new hke(t,U_,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(U_)||(!n.getMeta(cn)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}onUpdate(t){return this.on("update",t)}}class mke{constructor(t,n,r){re(this,"state"),re(this,"emitUpdate"),re(this,"preventHide",!1),re(this,"preventShow",!1),re(this,"shouldShow",({view:o,state:i,from:s,to:a})=>{const{doc:l,selection:c}=i,{empty:u}=c,f=!l.textBetween(s,a).length&&mC(i.selection);if(c.$from.parent.type.spec.code||fN(c)&&c.node.type.spec.code||u||f)return!1;const p=document.activeElement;return!(!this.isElementWithinEditorWrapper(p)&&o.editable)}),re(this,"blurHandler",o=>{var i;if(this.preventHide){this.preventHide=!1;return}const s=this.pmView.dom.parentElement;o&&o.relatedTarget&&(s===o.relatedTarget||s.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),re(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const i=this.pmView.dom.parentElement;return i?i.contains(o):!1}),re(this,"viewMousedownHandler",o=>{(!this.isElementWithinEditorWrapper(o.target)||o.button===0)&&(this.preventShow=!0)}),re(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),re(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),re(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),re(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(t,n){var r,o,i;const{state:s,composing:a}=t,{doc:l,selection:c}=s,u=n&&n.doc.eq(l)&&n.selection.eq(c);if(a||u)return;const{ranges:f}=c,p=Math.min(...f.map(w=>w.$from.pos)),m=Math.max(...f.map(w=>w.$to.pos)),y=this.shouldShow({view:t,state:s,from:p,to:m}),b=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(y||this.preventHide)&&!b){const w={show:!0,referencePos:this.getSelectionBoundingBox()};(w.show!==((r=this.state)==null?void 0:r.show)||w.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=w,this.emitUpdate());return}if((i=this.state)!=null&&i.show&&!this.preventHide&&(!y||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:t}=this.pmView,{selection:n}=t,{ranges:r}=n,o=Math.min(...r.map(s=>s.$from.pos)),i=Math.max(...r.map(s=>s.$to.pos));if(fN(n)){const s=this.pmView.nodeDOM(o);if(s)return s.getBoundingClientRect()}return qw(this.pmView,o,i)}}const gke=new Ht("FormattingToolbarPlugin");class yke extends io{constructor(t){super(),re(this,"view"),re(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new kt({key:gke,view:n=>(this.view=new mke(t,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}onUpdate(t){return this.on("update",t)}}const bke=Ql.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Cs(this.options.HTMLAttributes,e)]},renderText(){return`
`}}),Ez=(e,t)=>{const n=e.resolve(t);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return Xb(e.resolve(r))},hw=(e,t)=>{const n=e.resolve(t),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return Xb(e.resolve(o))},SK=(e,t)=>{for(;t.childContainer;){const n=t.childContainer.node,r=e.resolve(t.childContainer.beforePos+1).posAtIndex(n.childCount-1);t=Xb(e.resolve(r))}return t},vke=(e,t)=>e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*"&&e.blockContent.node.childCount>0&&t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*",xke=(e,t,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=e.doc.resolve(r.childContainer.beforePos+1),i=e.doc.resolve(r.childContainer.afterPos-1),s=o.blockRange(i);if(t){const a=e.doc.resolve(r.bnBlock.beforePos);e.tr.lift(s,a.depth)}}if(t){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);t(e.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},Tz=e=>({state:t,dispatch:n})=>{const r=t.doc.resolve(e),o=Xb(r),i=hw(t.doc,o.bnBlock.beforePos);if(!i)return!1;const s=SK(t.doc,i);return vke(s,o)?xke(t,n,s,o):!1},wke=On.create({priority:50,addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:i})=>{const s=Zn(i);if(!s.isBlockContainer)return!1;const a=i.selection.from===s.blockContent.beforePos+1,l=s.blockContent.node.type.name==="paragraph";return a&&!l?o.command(Jo(s.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:i})=>{const s=Zn(i);if(!s.isBlockContainer)return!1;const{blockContent:a}=s;return i.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:i})=>{const s=Zn(i);if(!s.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=s,c=i.selection.from===l.beforePos+1,u=i.selection.empty,f=a.beforePos;return c&&u?r().command(Tz(f)).scrollIntoView().run():!1}),()=>o.command(({state:i,dispatch:s})=>{const a=Zn(i);if(!a.isBlockContainer||i.selection.from!==a.blockContent.beforePos+1||hw(i.doc,a.bnBlock.beforePos))return!1;const l=Ez(i.doc,a.bnBlock.beforePos);if(l?.blockNoteType!=="column")return!1;const c=l,u=Ez(i.doc,c.bnBlock.beforePos);if(u?.blockNoteType!=="columnList")throw new Error("parent of column is not a column list");const f=c.childContainer.node.childCount===1,p=f&&u.childContainer.node.childCount===2,m=u.childContainer.node.firstChild===c.bnBlock.node;if(s){const y=i.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(p)if(m){i.tr.step(new kr(u.bnBlock.beforePos,u.bnBlock.afterPos,c.bnBlock.afterPos+1,u.bnBlock.afterPos-2,y,y.size,!1));const b=i.tr.doc.resolve(c.bnBlock.beforePos);i.tr.setSelection(Fe.between(b,b))}else{i.tr.step(new kr(u.bnBlock.beforePos,u.bnBlock.afterPos,u.bnBlock.beforePos+2,c.bnBlock.beforePos-1,y,0,!1));const b=i.tr.doc.resolve(i.tr.mapping.map(c.bnBlock.beforePos-1));i.tr.setSelection(Fe.between(b,b))}else if(f)if(m){i.tr.delete(c.bnBlock.beforePos,c.bnBlock.afterPos),i.tr.insert(u.bnBlock.beforePos,y.content);const b=i.tr.doc.resolve(u.bnBlock.beforePos);i.tr.setSelection(Fe.between(b,b))}else i.tr.delete(c.bnBlock.beforePos-1,c.bnBlock.beforePos+1);else{i.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),m?i.tr.insert(u.bnBlock.beforePos-1,y.content):i.tr.insert(c.bnBlock.beforePos-1,y.content);const b=i.tr.doc.resolve(c.bnBlock.beforePos-1);i.tr.setSelection(Fe.between(b,b))}}return!0}),()=>o.command(({state:i})=>{const s=Zn(i);if(!s.isBlockContainer)return!1;if(s.blockContent.node.childCount===0&&s.blockContent.node.type.spec.content==="inline*"){const a=hw(i.doc,s.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const c=s.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(c)}else if(a.blockContent.node.type.spec.content===""){const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(c)}else{const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(c)}return l.deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:i})=>{const s=Zn(i);if(!s.isBlockContainer)throw new Error("todo");const a=i.selection.from===s.blockContent.beforePos+1,l=i.selection.empty,c=hw(i.doc,s.bnBlock.beforePos);if(c&&a&&l){const u=SK(i.doc,c);if(!u.isBlockContainer)throw new Error("todo");if(u.blockContent.node.type.spec.content===""||u.blockContent.node.type.spec.content==="inline*"&&u.blockContent.node.childCount===0)return r().cut({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos},u.bnBlock.afterPos).deleteRange({from:u.bnBlock.beforePos,to:u.bnBlock.afterPos}).run()}return!1})]),t=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const i=Zn(o);if(!i.isBlockContainer)return!1;const{bnBlock:s,blockContent:a,childContainer:l}=i,{depth:c}=o.doc.resolve(s.beforePos),u=s.afterPos===o.doc.nodeSize-3,f=o.selection.from===a.afterPos-1,p=o.selection.empty;if(!u&&f&&p&&l===void 0){let m=c,y=s.afterPos+1,b=o.doc.resolve(y).depth;for(;b<m;)m=b,y+=2,b=o.doc.resolve(y).depth;return r.command(Tz(y-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o,tr:i})=>[()=>o.command(({state:s})=>{const a=Zn(s);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=a,{depth:u}=s.doc.resolve(l.beforePos),f=s.selection.$anchor.parentOffset===0,p=s.selection.anchor===s.selection.head,m=c.node.childCount===0,y=u>1;return f&&p&&m&&y?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const a=Zn(s),l=this.options.editor.schema.blockSchema[a.blockNoteType].hardBreakShortcut??"shift+enter";if(l==="none")return!1;if(l==="shift+enter"&&r||l==="enter"){const c=i.storedMarks||i.selection.$head.marks().filter(u=>this.editor.extensionManager.splittableMarks.includes(u.type.name));return i.insert(i.selection.head,i.doc.type.schema.nodes.hardBreak.create()).ensureMarks(c),!0}return!1}),()=>o.command(({state:s,dispatch:a})=>{const l=Zn(s);if(!l.isBlockContainer)return!1;const{bnBlock:c,blockContent:u}=l,f=s.selection.$anchor.parentOffset===0,p=s.selection.anchor===s.selection.head,m=u.node.childCount===0;if(f&&p&&m){const y=c.afterPos,b=y+2;if(a){const w=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(y,w).scrollIntoView(),s.tr.setSelection(new Fe(s.doc.resolve(b)))}return!0}return!1}),()=>o.command(({state:s,chain:a})=>{const l=Zn(s);if(!l.isBlockContainer)return!1;const{blockContent:c}=l,u=s.selection.$anchor.parentOffset===0;return c.node.childCount===0?!1:(a().deleteSelection().command(QW(s.selection.from,u,u)).run(),!0)})]);return{Backspace:e,Delete:t,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:uK(this.options.editor)},"Shift-Tab":()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class Ske{constructor(t,n,r){re(this,"state"),re(this,"emitUpdate"),re(this,"menuUpdateTimer"),re(this,"startMenuUpdateTimer"),re(this,"stopMenuUpdateTimer"),re(this,"mouseHoveredLinkMark"),re(this,"mouseHoveredLinkMarkRange"),re(this,"keyboardHoveredLinkMark"),re(this,"keyboardHoveredLinkMarkRange"),re(this,"linkMark"),re(this,"linkMarkRange"),re(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const i=o.target,s=this.pmView.posAtDOM(i,0)+1,a=this.pmView.state.doc.resolve(s),l=a.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=c,this.mouseHoveredLinkMarkRange=R0(a,c.type,c.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),re(this,"clickHandler",o=>{var i;const s=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(s===o.target||s.contains(o.target))&&(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),re(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=qw(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),re(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(t,n){var r;this.editor.transact(o=>{const i=so(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,i.mark("link",{href:t}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var t;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(t=this.state)!=null&&t.show&&(this.state.show=!1,this.emitUpdate())}update(t,n,r=!1){var o;const{state:i}=t;if(n&&n.selection.from===i.selection.from&&n.selection.to===i.selection.to||!this.pmView.hasFocus())return;const s=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const l of a)if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=R0(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:qw(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&s&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const kke=new Ht("LinkToolbarPlugin");class Cke extends io{constructor(t){super(),re(this,"view"),re(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),re(this,"deleteLink",()=>{this.view.deleteLink()}),re(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),re(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),re(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new kt({key:kke,view:n=>(this.view=new Ske(t,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(t){return this.on("update",t)}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}}const kK=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],CK="https",Eke=new Ht("node-selection-keyboard");class Tke extends io{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new kt({key:Eke,props:{handleKeyDown:(t,n)=>{if("node"in t.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=t.state.tr;return t.dispatch(r.insert(t.state.tr.selection.$to.after(),t.state.schema.nodes.paragraph.createChecked()).setSelection(new Fe(r.doc.resolve(t.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const _ke=new Ht("blocknote-placeholder");class Ake extends io{static key(){return"placeholder"}constructor(t,n){super(),this.addProsemirrorPlugin(new kt({key:_ke,view:r=>{var o,i;const s=`placeholder-selector-${Gq()}`;r.dom.classList.add(s);const a=document.createElement("style"),l=t._tiptapEditor.options.injectNonce;l&&a.setAttribute("nonce",l),((o=t.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?t.prosemirrorView.root.append(a):(i=t.prosemirrorView)==null||i.root.head.appendChild(a);const c=a.sheet,u=(f="")=>`.${s} .bn-block-content${f} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:f,emptyDocument:p,...m}=n;for(const[w,S]of Object.entries(m)){const E=`[data-content-type="${w}"]`;c.insertRule(`${u(E)} { content: ${JSON.stringify(S)}; }`)}c.insertRule(`${u("[data-is-only-empty-block]")} { content: ${JSON.stringify(p)}; }`),c.insertRule(`${u("[data-is-empty-and-focused]")} { content: ${JSON.stringify(f)}; }`)}catch(f){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",f)}return{destroy:()=>{var f,p;((f=t.prosemirrorView)==null?void 0:f.root)instanceof ShadowRoot?t.prosemirrorView.root.removeChild(a):(p=t.prosemirrorView)==null||p.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:i}=r;if(!t.isEditable||!i.empty||i.$from.parent.type.spec.code)return;const s=[];r.doc.content.size===6&&s.push(Zt.node(2,4,{"data-is-only-empty-block":"true"}));const a=i.$anchor,l=a.parent;if(l.content.size===0){const c=a.before();s.push(Zt.node(c,c+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return Rt.create(o,s)}}}))}}const _z=new Ht("previous-blocks"),Mke={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class Nke extends io{static key(){return"previousBlockType"}constructor(){super();let t;this.addProsemirrorPlugin(new kt({key:_z,view(n){return{update:async(r,o)=>{var i;((i=this.key)==null?void 0:i.getState(r.state).updatedBlocks.size)>0&&(t=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(_z,{clearUpdate:!0}))},0))},destroy:()=>{t&&clearTimeout(t)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,i){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(i.doc))return r;const s={},a=c9(o.doc,u=>u.attrs.id),l=new Map(a.map(u=>[u.node.attrs.id,u])),c=c9(i.doc,u=>u.attrs.id);for(const u of c){const f=l.get(u.node.attrs.id),p=f?.node.firstChild,m=u.node.firstChild;if(f&&p&&m){const y={index:m.attrs.index,level:m.attrs.level,type:m.type.name,depth:i.doc.resolve(u.pos).depth};let b={index:p.attrs.index,level:p.attrs.level,type:p.type.name,depth:o.doc.resolve(f.pos).depth};s[u.node.attrs.id]=b,n.getMeta("numberedListIndexing")&&(u.node.attrs.id in r.prevTransactionOldBlockAttrs&&(b=r.prevTransactionOldBlockAttrs[u.node.attrs.id]),y.type==="numberedListItem"&&(b.index=y.index)),r.currentTransactionOldBlockAttrs[u.node.attrs.id]=b,JSON.stringify(b)!==JSON.stringify(y)&&(b["depth-change"]=b.depth-y.depth,r.updatedBlocks.add(u.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=s,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((i,s)=>{if(!i.attrs.id||!r.updatedBlocks.has(i.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[i.attrs.id],l={};for(const[u,f]of Object.entries(a))l["data-prev-"+Mke[u]]=f||"none";const c=Zt.node(s,s+i.nodeSize,{...l});o.push(c)}),Rt.create(n.doc,o)}}}))}}const Az=new Ht("blocknote-show-selection");class Rke extends io{constructor(t){super(),re(this,"enabled",!1),this.editor=t,this.addProsemirrorPlugin(new kt({key:Az,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return Rt.empty;const i=Zt.inline(o.from,o.to,{"data-show-selection":"true"});return Rt.create(r,[i])}}}))}static key(){return"showSelection"}setEnabled(t){this.enabled!==t&&(this.enabled=t,this.editor.transact(n=>n.setMeta(Az,{})))}getEnabled(){return this.enabled}}function EK(e,t){for(var n,r;e&&e.parentElement&&e.parentElement!==t.dom&&((n=e.getAttribute)==null?void 0:n.call(e,"data-node-type"))!=="blockContainer";)e=e.parentElement;if(((r=e.getAttribute)==null?void 0:r.call(e,"data-node-type"))==="blockContainer")return{node:e,id:e.getAttribute("data-id")}}let QN=class pw extends rt{constructor(t,n){super(t,n),re(this,"nodes");const r=t.node();this.nodes=[],t.doc.nodesBetween(t.pos,n.pos,(o,i,s)=>{if(s!==null&&s.eq(r))return this.nodes.push(o),!1})}static create(t,n,r=n){return new pw(t.resolve(n),t.resolve(r))}content(){return new Ee(ge.from(this.nodes),0,0)}eq(t){if(!(t instanceof pw)||this.nodes.length!==t.nodes.length||this.from!==t.from||this.to!==t.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(t.nodes[n]))return!1;return!0}map(t,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?rt.near(t.resolve(r.pos)):r.deleted?rt.near(t.resolve(o.pos)):new pw(t.resolve(r.pos),t.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}};rt.jsonID("multiple-node",QN);let Ba;function Ike(e,t){let n,r;const o=t.resolve(e.from).node().type.spec.group==="blockContent",i=t.resolve(e.to).node().type.spec.group==="blockContent",s=Math.min(e.$anchor.depth,e.$head.depth);if(o&&i){const a=e.$from.start(s-1),l=e.$to.end(s-1);n=t.resolve(a-1).pos,r=t.resolve(l+1).pos}else n=e.from,r=e.to;return{from:n,to:r}}function Mz(e,t,n=t){t===n&&(n+=e.state.doc.resolve(t+1).node().nodeSize);const r=e.domAtPos(t).node.cloneNode(!0),o=e.domAtPos(t).node,i=(u,f)=>Array.prototype.indexOf.call(u.children,f),s=i(o,e.domAtPos(t+1).node.parentElement),a=i(o,e.domAtPos(n-1).node.parentElement);for(let u=o.childElementCount-1;u>=0;u--)(u>a||u<s)&&r.removeChild(r.children[u]);TK(e.root),Ba=r;const l=Ba.getElementsByTagName("iframe");for(let u=0;u<l.length;u++){const f=l[u],p=f.parentElement;p&&p.removeChild(f)}const c=e.dom.className.split(" ").filter(u=>u!=="ProseMirror"&&u!=="bn-root"&&u!=="bn-editor").join(" ");Ba.className=Ba.className+" bn-drag-preview "+c,e.root instanceof ShadowRoot?e.root.appendChild(Ba):e.root.body.appendChild(Ba)}function TK(e){Ba!==void 0&&(e instanceof ShadowRoot?e.removeChild(Ba):e.body.removeChild(Ba),Ba=void 0)}function Oke(e,t,n){if(!e.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=Ui(t.id,r.state.doc);if(!o)throw new Error(`Block with ID ${t.id} not found`);const i=o.posBeforeNode;if(i!=null){const s=r.state.selection,a=r.state.doc,{from:l,to:c}=Ike(s,a),u=l<=i&&i<c,f=s.$anchor.node()!==s.$head.node()||s instanceof QN;u&&f?(r.dispatch(r.state.tr.setSelection(QN.create(a,l,c))),Mz(r,l,c)):(r.dispatch(r.state.tr.setSelection(Ke.create(r.state.doc,i))),Mz(r,i));const p=r.state.selection.content(),m=n.pmSchema,y=r.serializeForClipboard(p).dom.innerHTML,b=IC(m,n),w=yK(p.content),S=b.exportBlocks(w,{}),E=G4(S);e.dataTransfer.clearData(),e.dataTransfer.setData("blocknote/html",y),e.dataTransfer.setData("text/html",S),e.dataTransfer.setData("text/plain",E),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(Ba,0,0)}}const Nz=250;function eR(e,t,n=!0){const r=e.root.elementsFromPoint(t.left,t.top);for(const o of r)if(e.dom.contains(o))return n&&o.closest("[data-node-type=columnList]")?eR(e,{left:t.left+50,top:t.top},!1):EK(o,e)}function Pke(e,t){if(!t.dom.firstChild)return;const n=t.dom.firstChild.getBoundingClientRect(),r={left:Math.min(Math.max(n.left+10,e.x),n.right-10),top:e.y},o=eR(t,r);if(!o)return;const i=o.node.getBoundingClientRect();return eR(t,{left:i.right-10,top:e.y},!1)}class Dke{constructor(t,n,r){re(this,"state"),re(this,"emitUpdate"),re(this,"mousePos"),re(this,"hoveredBlock"),re(this,"menuFrozen",!1),re(this,"isDragOrigin",!1),re(this,"updateState",o=>{this.state=o,this.emitUpdate(this.state)}),re(this,"updateStateFromMousePos",()=>{var o,i,s,a,l;if(this.menuFrozen||!this.mousePos)return;const c=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if(c?.element!==this.pmView.dom||c.distance>Nz){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.updateState(this.state));return}const u=Pke(this.mousePos,this.pmView);if(!u||!this.editor.isEditable){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.updateState(this.state));return}if((s=this.state)!=null&&s.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===u.id)return;this.hoveredBlock=u.node;const f=u.node.firstChild;if(f&&this.editor.isEditable){const p=f.getBoundingClientRect(),m=u.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(m?m.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,p.y,p.width,p.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),re(this,"onDragStart",o=>{var i;const s=(i=o.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!s||this.pmView.dragging)return;const a=document.createElement("div");a.innerHTML=s;const l=Bl.fromSchema(this.pmView.state.schema).parse(a,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new Ee(l.content,0,0),move:!0}}),re(this,"findClosestEditorElement",o=>{const i=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(i.length===0)return null;let s=i[0],a=Number.MAX_VALUE;return i.forEach(l=>{const c=l.querySelector(".bn-block-group").getBoundingClientRect(),u=o.clientX<c.left?c.left-o.clientX:o.clientX>c.right?o.clientX-c.right:0,f=o.clientY<c.top?c.top-o.clientY:o.clientY>c.bottom?o.clientY-c.bottom:0,p=Math.sqrt(Math.pow(u,2)+Math.pow(f,2));p<a&&(a=p,s=l)}),{element:s,distance:a}}),re(this,"onDragOver",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i||!i.isDropPoint){this.closeDropCursor();return}i.isDropPoint&&!i.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(o)}),re(this,"closeDropCursor",()=>{const o=new Event("dragleave",{bubbles:!1});o.synthetic=!0,this.pmView.dom.dispatchEvent(o)}),re(this,"getDragEventContext",o=>{var i;const s=!((i=o.dataTransfer)!=null&&i.types.includes("blocknote/html"))&&!!this.pmView.dragging,a=!!this.isDragOrigin,l=s||a,c=this.findClosestEditorElement(o);if(!c||c.distance>Nz)return;const u=c.element===this.pmView.dom,f=u&&c.distance===0;if(!(!u&&!l))return{isDropPoint:u,isDropWithinEditorBounds:f,isDragOrigin:l}}),re(this,"onDrop",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i){this.closeDropCursor();return}const{isDropPoint:s,isDropWithinEditorBounds:a,isDragOrigin:l}=i;if(!a&&s&&this.dispatchSyntheticEvent(o),s){if(this.pmView.dragging)return;this.pmView.dispatch(this.pmView.state.tr.setSelection(Fe.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(l){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}),re(this,"onDragEnd",o=>{o.synthetic||(this.pmView.dragging=null)}),re(this,"onKeyDown",o=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),re(this,"onMouseMove",o=>{var i;if(this.menuFrozen)return;this.mousePos={x:o.clientX,y:o.clientY};const s=this.pmView.dom.getBoundingClientRect(),a=this.mousePos.x>s.left&&this.mousePos.x<s.right&&this.mousePos.y>s.top&&this.mousePos.y<s.bottom,l=this.pmView.dom.parentElement;if(a&&o&&o.target&&!(l===o.target||l.contains(o.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),re(this,"onScroll",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state)),this.updateStateFromMousePos()}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");r(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),U4(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),n.root.addEventListener("scroll",this.onScroll,!0)}dispatchSyntheticEvent(t){const n=new Event(t.type,t),r=this.pmView.dom.firstChild.getBoundingClientRect();n.clientX=t.clientX,n.clientY=t.clientY,n.clientX=Math.min(Math.max(t.clientX,r.left),r.left+r.width),n.clientY=Math.min(Math.max(t.clientY,r.top),r.top+r.height),n.dataTransfer=t.dataTransfer,n.preventDefault=()=>t.preventDefault(),n.synthetic=!0,this.pmView.dom.dispatchEvent(n)}update(t,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var t;(t=this.state)!=null&&t.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const $ke=new Ht("SideMenuPlugin");class jke extends io{constructor(t){super(),re(this,"view"),re(this,"blockDragStart",(n,r)=>{this.view&&(this.view.isDragOrigin=!0),Oke(n,r,this.editor)}),re(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&TK(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),re(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),re(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=t,this.addProsemirrorPlugin(new kt({key:$ke,view:n=>(this.view=new Dke(t,n,r=>{this.emit("update",r)}),this.view)}))}static key(){return"sideMenu"}onUpdate(t){return this.on("update",t)}}const sx=new Map;function Lke(e){if(sx.has(e))return sx.get(e);const t=new Qf;return e._tiptapEditor.on("transaction",({transaction:n})=>{t.appendMapping(n.mapping)}),e._tiptapEditor.on("destroy",()=>{sx.delete(e)}),sx.set(e,t),t}function tR(e,t,n="left"){const r=cn.getState(e._tiptapEditor.state);if(!r){const i=Lke(e),s=i.maps.length;return()=>i.slice(s).map(t,n==="left"?-1:1)}const o=W0(t+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const i=cn.getState(e._tiptapEditor.state),s=Zf(i.doc,i.binding.type,o,i.binding.mapping);if(s===null)throw new Error("Position not found, cannot track positions");return s+(n==="right"?-1:0)}}const zke=bC(e=>e.type.name==="blockContainer");class Bke{constructor(t,n){re(this,"state"),re(this,"emitUpdate"),re(this,"rootEl"),re(this,"pluginState"),re(this,"handleScroll",()=>{var i,s;if((i=this.state)!=null&&i.show){const a=(s=this.rootEl)==null?void 0:s.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),re(this,"closeMenu",()=>{this.editor.transact(i=>i.setMeta(sm,null))}),re(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(i=>i.selection.from)}).run()});var r,o;this.editor=t,this.pluginState=void 0,this.emitUpdate=i=>{var s;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(i,{...this.state,ignoreQueryLength:(s=this.pluginState)==null?void 0:s.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(t,n){var r;const o=sm.getState(n),i=sm.getState(t.state),s=o===void 0&&i!==void 0,a=o!==void 0&&i===void 0;if(!s&&!(o!==void 0&&i!==void 0)&&!a)return;if(this.pluginState=a?o:i,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var t;(t=this.rootEl)==null||t.removeEventListener("scroll",this.handleScroll,!0)}}const sm=new Ht("SuggestionMenuPlugin");class Fke extends io{constructor(t){super(),re(this,"view"),re(this,"triggerCharacters",[]),re(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),re(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),re(this,"closeMenu",()=>this.view.closeMenu()),re(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new kt({key:sm,view:()=>(this.view=new Bke(t,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,i,s)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(sm);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const c=tR(t,s.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>c()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a?.ignoreQueryLength}}if(o===void 0)return o;if(s.selection.from!==s.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&s.selection.from<o.queryStartPos()||!s.selection.$from.sameParent(s.doc.resolve(o.queryStartPos())))return;const l={...o};return l.query=s.doc.textBetween(o.queryStartPos(),s.selection.from),l}},props:{handleTextInput(r,o,i,s){if(o===i){const a=r.state.doc;for(const l of n){const c=l.length>1?a.textBetween(o-l.length,o)+s:s;if(l===c)return r.dispatch(r.state.tr.insertText(s)),r.dispatch(r.state.tr.setMeta(sm,{triggerCharacter:c}).scrollIntoView()),!0}}return!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const i=zke(r.selection);if(i)return Rt.create(r.doc,[Zt.node(i.pos,i.pos+i.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return Rt.create(r.doc,[Zt.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(t,n){return this.triggerCharacters.includes(t)||this.addTriggerCharacter(t),this.on(`update ${t}`,n)}get shown(){var t,n;return((n=(t=this.view)==null?void 0:t.state)==null?void 0:n.show)||!1}}const Vke=$o.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(e){return e.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return["ins",{"data-id":String(t.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10)}:!1}}]}}}),Hke=$o.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(e){return e.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return["del",{"data-id":String(t.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10)}:!1}}]}}}),Uke=$o.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(e){return e.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(t,n){return[n?"span":"div",{"data-type":"modification","data-id":String(t.attrs.id),"data-mod-type":t.attrs.type,"data-mod-prev-val":JSON.stringify(t.attrs.previousValue),"data-mod-new-val":JSON.stringify(t.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10),type:t.dataset.modType,previousValue:t.dataset.modPrevVal,newValue:t.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(t){return t.dataset.id?{id:parseInt(t.dataset.id,10),type:t.dataset.modType,previousValue:t.dataset.modPrevVal}:!1}}]}}});let Oi;function Rz(e){Oi||(Oi=document.createElement("div"),Oi.innerHTML="_",Oi.style.opacity="0",Oi.style.height="1px",Oi.style.width="1px",e instanceof Document?e.body.appendChild(Oi):e.appendChild(Oi))}function Gke(e){Oi&&(e instanceof Document?e.body.removeChild(Oi):e.removeChild(Oi),Oi=void 0)}function ax(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}function qke(e){let t=e;for(;t&&t.nodeName!=="TD"&&t.nodeName!=="TH"&&!t.classList.contains("tableWrapper");){if(t.classList.contains("ProseMirror"))return;const n=t.parentNode;if(!n||!(n instanceof Element))return;t=n}return t.nodeName==="TD"||t.nodeName==="TH"?{type:"cell",domNode:t,tbodyNode:t.closest("tbody")}:{type:"wrapper",domNode:t,tbodyNode:t.querySelector("tbody")}}function Zke(e,t){const n=t.querySelectorAll(e);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class Wke{constructor(t,n,r){re(this,"state"),re(this,"emitUpdate"),re(this,"tableId"),re(this,"tablePos"),re(this,"tableElement"),re(this,"menuFrozen",!1),re(this,"mouseState","up"),re(this,"prevWasEditable",null),re(this,"viewMousedownHandler",()=>{this.mouseState="down"}),re(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),re(this,"mouseMoveHandler",o=>{var i,s,a,l,c,u,f;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const p=qke(o.target);if(p?.type==="cell"&&this.mouseState==="down"&&!((i=this.state)!=null&&i.draggingState)){this.mouseState="selecting",(s=this.state)!=null&&s.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!p||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!p.tbodyNode)return;const m=p.tbodyNode.getBoundingClientRect(),y=EK(p.domNode,this.pmView);if(!y)return;this.tableElement=y.node;let b;const w=this.editor.transact(T=>Ui(y.id,T.doc));if(!w)throw new Error(`Block with ID ${y.id} not found`);const S=dr(w.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(oSe("table",S,this.editor)&&(this.tablePos=w.posBeforeNode+1,b=S),!b)return;this.tableId=y.id;const E=(l=p.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if(p?.type==="wrapper"){const T=o.clientY>=m.bottom-1&&o.clientY<m.bottom+20,A=o.clientX>=m.right-1&&o.clientX<m.right+20,M=o.clientX>m.right||o.clientY>m.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:T,showAddOrRemoveColumnsButton:A,referencePosTable:m,block:b,widgetContainer:E,colIndex:M||(c=this.state)==null?void 0:c.colIndex,rowIndex:M||(u=this.state)==null?void 0:u.rowIndex,referencePosCell:M||(f=this.state)==null?void 0:f.referencePosCell}}else{const T=ax(p.domNode),A=ax(p.domNode.parentElement),M=p.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===y.id&&this.state.rowIndex===A&&this.state.colIndex===T)return;this.state={show:!0,showAddOrRemoveColumnsButton:T===b.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:A===b.content.rows.length-1,referencePosTable:m,block:b,draggingState:void 0,referencePosCell:M,colIndex:T,rowIndex:A,widgetContainer:E}}return this.emitUpdate(),!1}),re(this,"dragOverHandler",o=>{var i;if(((i=this.state)==null?void 0:i.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",Zke(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const s={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(s.left,s.top).filter(b=>b.tagName==="TD"||b.tagName==="TH");if(a.length===0)return;const l=a[0];let c=!1;const u=ax(l.parentElement),f=ax(l),p=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,m=(this.state.draggingState.draggedCellOrientation==="row"?u:f)!==p;(this.state.rowIndex!==u||this.state.colIndex!==f)&&(this.state.rowIndex=u,this.state.colIndex=f,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const y=this.state.draggingState.draggedCellOrientation==="row"?s.top:s.left;this.state.draggingState.mousePos!==y&&(this.state.draggingState.mousePos=y,c=!0),c&&this.emitUpdate(),m&&this.editor.transact(b=>b.setMeta(zy,!0))}),re(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:i,colIndex:s,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(i.draggedCellOrientation==="row"){if(!PW(this.state.block,i.originalIndex,a))return!1;const c=Dxe(this.state.block,i.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:c}})}else{if(!DW(this.state.block,i.originalIndex,s))return!1;const c=Pxe(this.state.block,i.originalIndex,s),[u]=l.splice(i.originalIndex,1);l.splice(s,0,u),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:c}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var t;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((t=this.tableElement)!=null&&t.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=O4(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const i=o.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const zy=new Ht("TableHandlesPlugin");class Kke extends io{constructor(t){super(),re(this,"view"),re(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(zy,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");Rz(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Oi,0,0),n.dataTransfer.effectAllowed="move"}),re(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(zy,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");Rz(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Oi,0,0),n.dataTransfer.effectAllowed="copyMove"}),re(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(zy,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");Gke(this.editor.prosemirrorView.root)}),re(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),re(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),re(this,"getCellsAtRowHandle",(n,r)=>HN(n,r)),re(this,"getCellsAtColumnHandle",(n,r)=>UN(n,r)),re(this,"setCellSelection",(n,r,o=r)=>{const i=this.view;if(!i)throw new Error("Table handles view not initialized");const s=n.doc.resolve(i.tablePos+1),a=n.doc.resolve(s.posAtIndex(r.row)+1),l=n.doc.resolve(a.posAtIndex(r.col)),c=n.doc.resolve(s.posAtIndex(o.row)+1),u=n.doc.resolve(c.posAtIndex(o.col)),f=n.tr;return f.setSelection(new wn(l,u)),n.apply(f)}),re(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,i)=>{const s=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?Nye(s,i):Rye(s,i):r.side==="left"?Eye(s,i):Tye(s,i)})}),re(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:n,col:0});return Oye(s,i)}):this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:0,col:n});return Aye(s,i)})),re(this,"mergeCells",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return Dye(i,o)})),re(this,"splitCell",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n):r;return $ye(i,o)})),re(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,i=r.$to;if(KN(r)){const{ranges:y}=r;y.forEach(b=>{o=b.$from.min(o??b.$from),i=b.$to.max(i??b.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),i=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||i.pos===0)return;const s=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(i.pos-i.parentOffset-1),l=n.doc.resolve(s.pos-s.parentOffset-1),c=o.index(s.depth),u=s.index(l.depth),f=i.index(a.depth),p=a.index(l.depth),m=[];for(let y=u;y<=p;y++)for(let b=c;b<=f;b++)m.push({row:y,col:b});return{from:{row:u,col:c},to:{row:p,col:f},cells:m}})),re(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=KN(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const i=this.getCellSelection();if(i)return Lxe(i.from,i.to,n)?"vertical":"horizontal"})),re(this,"cropEmptyRowsOrColumns",(n,r)=>$xe(n,r)),re(this,"addRowsOrColumns",(n,r,o)=>jxe(n,r,o)),this.editor=t,this.addProsemirrorPlugin(new kt({key:zy,view:n=>(this.view=new Wke(t,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:i,draggingState:s}=this.view.state,{originalIndex:a,draggedCellOrientation:l}=s;if(r===a||!i||l==="row"&&!PW(i,a,r)||l==="col"&&!DW(i,a,r))return Rt.create(n.doc,o);const c=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?HN(this.view.state.block,r).forEach(({row:u,col:f})=>{const p=n.doc.resolve(c.posAtIndex(u)+1),m=n.doc.resolve(p.posAtIndex(f)+1),y=m.node(),b=m.pos+(r>a?y.nodeSize-2:0);o.push(Zt.widget(b,()=>{const w=document.createElement("div");return w.className="bn-table-drop-cursor",w.style.left="0",w.style.right="0",r>a?w.style.bottom="-2px":w.style.top="-3px",w.style.height="4px",w}))}):UN(this.view.state.block,r).forEach(({row:u,col:f})=>{const p=n.doc.resolve(c.posAtIndex(u)+1),m=n.doc.resolve(p.posAtIndex(f)+1),y=m.node(),b=m.pos+(r>a?y.nodeSize-2:0);o.push(Zt.widget(b,()=>{const w=document.createElement("div");return w.className="bn-table-drop-cursor",w.style.top="0",w.style.bottom="0",r>a?w.style.right="-2px":w.style.left="-3px",w.style.width="4px",w}))}),Rt.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(t){return this.on("update",t)}}const Yke=On.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:e=>e.getAttribute("data-text-alignment"),renderHTML:e=>e.textAlignment==="left"?{}:{"data-text-alignment":e.textAlignment}}}}]}}),Jke=On.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:Pr.textColor.default,parseHTML:e=>e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):Pr.textColor.default,renderHTML:e=>e.textColor===Pr.textColor.default?{}:{"data-text-color":e.textColor}}}}]}}),Xke=On.create({name:"trailingNode",addProseMirrorPlugins(){const e=new Ht(this.name);return[new kt({key:e,appendTransaction:(t,n,r)=>{const{doc:o,tr:i,schema:s}=r,a=e.getState(r),l=o.content.size-2,c=s.nodes.blockContainer,u=s.nodes.paragraph;if(a)return i.insert(l,c.create(void 0,u.create()))},state:{init:(t,n)=>{},apply:(t,n)=>{if(!t.docChanged)return n;let r=t.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),Qke={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},eCe=Ql.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:e=>{if(typeof e=="string")return!1;const t={};for(const[n,r]of Object.entries(Qke))e.getAttribute(r)&&(t[n]=e.getAttribute(r));return t}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:e}){var t;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[i,s]of Object.entries(e))i!=="class"&&n.setAttribute(i,s);const r={...((t=this.options.domAttributes)==null?void 0:t.block)||{},...e},o=document.createElement("div");o.className=Rn("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[i,s]of Object.entries(r))i!=="class"&&o.setAttribute(i,s);return n.appendChild(o),{dom:n,contentDOM:o}}}),tCe=Ql.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:e=>typeof e=="string"?!1:e.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:e}){var t;const n={...((t=this.options.domAttributes)==null?void 0:t.blockGroup)||{},...e},r=document.createElement("div");r.className=Rn("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,i]of Object.entries(n))o!=="class"&&r.setAttribute(o,i);return{dom:r,contentDOM:r}}}),nCe=Ql.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class rCe extends io{constructor({editor:t,collaboration:n}){super(t),re(this,"editor"),re(this,"collaboration"),re(this,"forkedState"),this.editor=t,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(t,n){const r=t.doc;if(t._item===null){const o=Array.from(r.share.keys()).find(i=>r.share.get(i)===t);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,t.constructor)}else{const o=t._item,i=n.store.clients.get(o.id.client)??[],s=ma(i,o.id.clock);return i[s].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){var t;if(this.isForkedFromRemote)return;const n=(t=this.collaboration)==null?void 0:t.fragment;if(!n)throw new Error("No fragment to fork from");const r=new Jm;U9(r,G9(n.doc));const o=this.findTypeInOtherYdoc(n,r);this.forkedState={undoStack:aa.getState(this.editor.prosemirrorState).undoManager.undoStack,originalFragment:n,forkedFragment:o},this.editor._tiptapEditor.unregisterPlugin([jy,aa,cn]),this.editor._tiptapEditor.registerPlugin(new JN(o).plugins[0]),this.editor._tiptapEditor.registerPlugin(new XN({editor:this.editor}).plugins[0]),this.emit("forked",!0)}merge({keepChanges:t}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(cn),this.editor._tiptapEditor.unregisterPlugin(aa);const{originalFragment:n,forkedFragment:r,undoStack:o}=this.forkedState;if(this.editor.extensions.ySyncPlugin=new JN(n),this.editor.extensions.yCursorPlugin=new xK(this.collaboration),this.editor.extensions.yUndoPlugin=new XN({editor:this.editor}),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),aa.getState(this.editor.prosemirrorState).undoManager.undoStack=o,t){const i=G9(r.doc,Mve(n.doc));U9(n.doc,i,this.editor)}this.forkedState=void 0,this.emit("forked",!1)}}const oCe=e=>{var t;const n={},r=iCe(e);for(const i of r)n[i.name]=i;e.collaboration&&(n.ySyncPlugin=new JN(e.collaboration.fragment),n.yUndoPlugin=new XN({editor:e.editor}),(t=e.collaboration.provider)!=null&&t.awareness&&(n.yCursorPlugin=new xK(e.collaboration)),n.forkYDocPlugin=new rCe({editor:e.editor,collaboration:e.collaboration})),n.formattingToolbar=new yke(e.editor),n.linkToolbar=new Cke(e.editor),n.sideMenu=new jke(e.editor),n.suggestionMenus=new Fke(e.editor),n.filePanel=new pke(e.editor),n.placeholder=new Ake(e.editor,e.placeholders),(e.animations??!0)&&(n.animations=new Nke),e.tableHandles&&(n.tableHandles=new Kke(e.editor)),n.nodeSelectionKeyboard=new Tke,n.blockChange=new lke,n.showSelection=new Rke(e.editor),e.comments&&(n.comments=new fke(e.editor,e.comments.threadStore,wK.name));const o=e.disableExtensions||[];for(const i of o)delete n[i];return n};let Iz=!1;const iCe=e=>{const t=[vy.ClipboardTextSerializer,vy.Commands,vy.Editable,vy.FocusEvents,vy.Tabindex,f0e,On.create({name:"dropCursor",addProseMirrorPlugins:()=>[e.dropCursor({width:5,color:"#ddeeff",editor:e.editor})]}),_C.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),bke,W0e,Vke,Hke,Uke,Z0e.extend({inclusive:!1}).configure({defaultProtocol:CK,protocols:Iz?[]:kK}),...Object.values(e.styleSpecs).map(n=>n.implementation.mark.configure({editor:e.editor})),Jke,ake,Yke,On.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>e.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),nCe,eCe.configure({editor:e.editor,domAttributes:e.domAttributes}),wke.configure({editor:e.editor,tabBehavior:e.tabBehavior}),tCe.configure({domAttributes:e.domAttributes}),...Object.values(e.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:e.editor})),...Object.values(e.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:e.editor,domAttributes:e.domAttributes})),n.implementation.node.configure({editor:e.editor,domAttributes:e.domAttributes})]),ske(e.editor),oke(e.editor,e.pasteHandler||(n=>n.defaultPasteHandler())),FSe(e.editor),...e.trailingBlock===void 0||e.trailingBlock?[Xke]:[],...e.comments?[wK]:[]];return Iz=!0,e.collaboration||t.push(S0e),t};function sCe(e,t){const n=[];return e.forEach((r,o,i)=>{i!==t&&n.push(r)}),ge.from(n)}function aCe(e,t){const n=[];for(let r=0;r<e.childCount;r++)if(e.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],i=o.copy(o.content.addToEnd(e.child(r)));n[n.length-1]=i}else{const o=t.nodes.table.createChecked(void 0,e.child(r));n.push(o)}else n.push(e.child(r));return e=ge.from(n),e}function lCe(e,t){let n=ge.from(e.content);if(n=aCe(n,t.state.schema),!cCe(n,t))return new Ee(n,e.openStart,e.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const s=n.child(r+1).child(0).child(0);(s.type.name==="bulletListItem"||s.type.name==="numberedListItem"||s.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=sCe(n,r+1))}const i=t.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,i)}return new Ee(n,e.openStart,e.openEnd)}function cCe(e,t){var n,r;const o=e.childCount===1,i=((n=e.firstChild)==null?void 0:n.type.spec.content)==="inline*",s=((r=e.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(i)return!1;if(s){const a=Zn(t.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const nR=class extends Pge{constructor(t,n){super({...t,content:void 0}),re(this,"_state"),re(this,"mount",(a,l,c)=>{l?(this.options.element=l,this.createViewAlternative(a,c)):(this.destroy(),this.isInitialized=!1)});const r=this.schema;let o;const i=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=i.apply(r.nodes.doc,a),c=JSON.parse(JSON.stringify(l.toJSON()));return c.content[0].content[0].attrs.id="initialBlockId",o=Vc.fromJSON(r,c),o};let s;try{const a=t?.content.map(l=>wh(l,this.schema,n).toJSON());s=Gw({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(t.content))}this._state=_f.create({doc:s,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(t){if(!this.view){this._state=this.state.apply(t),this.emit("transaction",{editor:this,transaction:t});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(t);return}const{state:n,transactions:r}=this.state.applyTransaction(t),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),o&&this.emit("selectionUpdate",{editor:this,transaction:t});const i=t.getMeta("focus"),s=t.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:t}),s&&this.emit("blur",{editor:this,event:s.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:t}),this.emit("v3-update",{editor:this,transaction:t,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(t,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(i=>{i.type==="mark"&&i.config.addMarkView&&(r[i.name]=i.config.addMarkView(t))}),this.view=new IO({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};re(nR,"create",(e,t)=>{var n,r;const o=(n=globalThis?.window)==null?void 0:n.setTimeout;typeof((r=globalThis?.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new nR(e,t)}finally{o&&(globalThis.window.setTimeout=o)}});let _K=nR;_K.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const uCe={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let dCe=class AK extends Z4{constructor(t){var n,r,o,i,s,a,l,c,u,f,p,m,y,b,w,S;super(),re(this,"pmSchema"),re(this,"extensions",{}),re(this,"headless",!1),re(this,"_tiptapEditor"),re(this,"elementRenderer",null),re(this,"blockCache",new WeakMap),re(this,"dictionary"),re(this,"schema"),re(this,"blockImplementations"),re(this,"inlineContentImplementations"),re(this,"styleImplementations"),re(this,"formattingToolbar"),re(this,"linkToolbar"),re(this,"sideMenu"),re(this,"suggestionMenus"),re(this,"filePanel"),re(this,"tableHandles"),re(this,"comments"),re(this,"showSelectionPlugin"),re(this,"forkYDocPlugin"),re(this,"uploadFile"),re(this,"onUploadStartCallbacks",[]),re(this,"onUploadEndCallbacks",[]),re(this,"resolveFileUrl"),re(this,"resolveUsers"),re(this,"settings"),re(this,"activeTransaction",null),re(this,"mount",(I,L)=>{this._tiptapEditor.mount(this,I,L)}),this.options=t;const E=t;if(E.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(E.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(E.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(E.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=t.dictionary||CW,this.settings={tables:{splitCells:((n=t?.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=t?.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=t?.tables)==null?void 0:o.cellTextColor)??!1,headers:((i=t?.tables)==null?void 0:i.headers)??!1},codeBlock:{indentLineWithTab:((s=t?.codeBlock)==null?void 0:s.indentLineWithTab)??!0,defaultLanguage:((a=t?.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((l=t?.codeBlock)==null?void 0:l.supportedLanguages)??{},createHighlighter:((c=t?.codeBlock)==null?void 0:c.createHighlighter)??void 0},heading:{levels:((u=t?.heading)==null?void 0:u.levels)??[1,2,3]}};const T={defaultStyles:!0,schema:t.schema||H4.create(),_headless:!1,...t,placeholders:{...this.dictionary.placeholders,...t.placeholders}};if(T.comments&&!T.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=T.resolveUsers,this.schema=T.schema,this.blockImplementations=T.schema.blockSpecs,this.inlineContentImplementations=T.schema.inlineContentSpecs,this.styleImplementations=T.schema.styleSpecs,this.extensions=oCe({editor:this,domAttributes:T.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:T.collaboration,trailingBlock:T.trailingBlock,disableExtensions:T.disableExtensions,setIdAttribute:T.setIdAttribute,animations:T.animations??!0,tableHandles:qo("table",this),dropCursor:this.options.dropCursor??Sxe,placeholders:T.placeholders,tabBehavior:T.tabBehavior,comments:T.comments,pasteHandler:T.pasteHandler}),(((f=T._tiptapOptions)==null?void 0:f.extensions)||[]).forEach(I=>{this.extensions[I.name]=I});for(let I of T.extensions||[]){typeof I=="function"&&(I=I(this));const L=I.constructor.key();if(!L)throw new Error(`Extension ${I.constructor.name} does not have a key method`);if(this.extensions[L])throw new Error(`Extension ${I.constructor.name} already exists with key ${L}`);this.extensions[L]=I}if(Object.entries(T._extensions||{}).forEach(([I,L])=>{const $=typeof L=="function"?L(this):L;if(!("plugin"in $)){this.extensions[I]=$;return}this.extensions[I]=new class extends io{static key(){return I}constructor(){super(),this.addProsemirrorPlugin($.plugin)}get priority(){return $.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,T.uploadFile){const I=T.uploadFile;this.uploadFile=async(L,$)=>{this.onUploadStartCallbacks.forEach(B=>B.apply(this,[$]));try{return await I(L,$)}finally{this.onUploadEndCallbacks.forEach(B=>B.apply(this,[$]))}}}this.resolveFileUrl=T.resolveFileUrl,this.headless=T._headless;const A="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;A&&T.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const M=T.initialContent||(A?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:_C.options.generateID()}]);if(!Array.isArray(M)||M.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+M);const R=[...Object.entries(this.extensions).map(([I,L])=>{if(L instanceof On||L instanceof Ql||L instanceof $o)return L;if(!(L instanceof io&&!L.plugins.length))return On.create({name:I,priority:L.priority,addProseMirrorPlugins:()=>L.plugins})})].filter(I=>I!==void 0),O={...uCe,...T._tiptapOptions,content:M,extensions:R,editorProps:{...(p=T._tiptapOptions)==null?void 0:p.editorProps,attributes:{tabIndex:"0",...(y=(m=T._tiptapOptions)==null?void 0:m.editorProps)==null?void 0:y.attributes,...(b=T.domAttributes)==null?void 0:b.editor,class:Rn("bn-editor",T.defaultStyles?"bn-default-styles":"",((S=(w=T.domAttributes)==null?void 0:w.editor)==null?void 0:S.class)||"")},transformPasted:lCe}};this.headless?this.pmSchema=sge(O.extensions):(this._tiptapEditor=_K.create(O,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(t={}){return new AK(t)}exec(t){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return t(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(t){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return t(n,void 0,r)}transact(t){if(this.activeTransaction)return t(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=t(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(t,n=t.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var t;return(t=this.prosemirrorView)==null?void 0:t.dom}isFocused(){var t;return((t=this.prosemirrorView)==null?void 0:t.hasFocus())||!1}focus(){var t;(t=this.prosemirrorView)==null||t.focus()}onUploadStart(t){return this.onUploadStartCallbacks.push(t),()=>{const n=this.onUploadStartCallbacks.indexOf(t);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(t){return this.onUploadEndCallbacks.push(t),()=>{const n=this.onUploadEndCallbacks.indexOf(t);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(t=>Rxe(t.doc,this.pmSchema))}getBlock(t){return this.transact(n=>dK(n.doc,t))}getPrevBlock(t){return this.transact(n=>wSe(n.doc,t))}getNextBlock(t){return this.transact(n=>SSe(n.doc,t))}getParentBlock(t){return this.transact(n=>kSe(n.doc,t))}forEachBlock(t,n=!1){const r=this.document.slice();n&&r.reverse();function o(i){for(const s of i){if(t(s)===!1)return!1;const a=n?s.children.slice().reverse():s.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(t){this._tiptapEditor.on("update",t)}onEditorSelectionChange(t){this._tiptapEditor.on("selectionUpdate",t)}getTextCursorPosition(){return this.transact(t=>ASe(t))}setTextCursorPosition(t,n="start"){return this.transact(r=>fK(r,t,n))}getSelection(){return this.transact(t=>ESe(t))}getSelectionCutBlocks(){return this.transact(t=>_Se(t))}setSelection(t,n){return this.transact(r=>TSe(r,t,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(t){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==t&&this._tiptapEditor.setEditable(t)}insertBlocks(t,n,r="before"){return this.transact(o=>LW(o,t,n,r))}updateBlock(t,n){return this.transact(r=>Uxe(r,t,n))}removeBlocks(t){return this.transact(n=>ZN(n,t,[]).removedBlocks)}replaceBlocks(t,n){return this.transact(r=>ZN(r,t,n))}undo(){return this.options.collaboration?this.exec(yxe):this.exec(WO)}redo(){return this.options.collaboration?this.exec(bxe):this.exec(KO)}insertInlineContent(t,{updateSelection:n=!1}={}){const r=Qa(t,this.pmSchema);this.transact(o=>{CSe(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(t=>{const n={},r=t.selection.$to.marks();for(const o of r){const i=this.schema.styleSchema[o.type.name];if(!i){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}i.propSchema==="boolean"?n[i.type]=!0:n[i.type]=o.attrs.stringValue}return n})}addStyles(t){for(const[n,r]of Object.entries(t)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new ga(o.propSchema)}}removeStyles(t){for(const n of Object.keys(t))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(t){for(const[n,r]of Object.entries(t)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new ga(o.propSchema)}}getSelectedText(){return this.transact(t=>t.doc.textBetween(t.selection.from,t.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(t,n){if(t==="")return;const r=this.pmSchema.mark("link",{href:t});this.transact(o=>{const{from:i,to:s}=o.selection;n?o.insertText(n,i,s).addMark(i,i+n.length,r):o.setSelection(Fe.create(o.doc,s)).addMark(i,s,r)})}canNestBlock(){return vSe(this)}nestBlock(){uK(this)}canUnnestBlock(){return xSe(this)}unnestBlock(){bSe(this)}moveBlocksUp(){return mSe(this)}moveBlocksDown(){return gSe(this)}async blocksToHTMLLossy(t=this.document){return IC(this.pmSchema,this).exportBlocks(t,{})}async blocksToFullHTML(t){return Kxe(this.pmSchema,this).serializeBlocks(t,{})}async tryParseHTMLToBlocks(t){return pK(t,this.pmSchema)}async blocksToMarkdownLossy(t=this.document){return RSe(t,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(t){return LSe(t,this.pmSchema)}updateCollaborationUserInfo(t){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(t)}onBeforeChange(t){return this.headless?()=>{}:this.extensions.blockChange.subscribe(n=>t(this,n))}onChange(t){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{t(this,{getChanges:()=>jW(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(t,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(cn)&&!n||t(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(t){return this.on("create",t),()=>{this.off("create",t)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:t}=this.prosemirrorState,{ranges:n}=t,r=Math.min(...n.map(i=>i.$from.pos)),o=Math.max(...n.map(i=>i.$to.pos));if(fN(t)){const i=this.prosemirrorView.nodeDOM(r);if(i)return i.getBoundingClientRect()}return qw(this.prosemirrorView,r,o)}get isEmpty(){const t=this.document;return t.length===0||t.length===1&&t[0].type==="paragraph"&&t[0].content.length===0}openSuggestionMenu(t,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(t),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:t,deleteTriggerCharacter:n?.deleteTriggerCharacter||!1,ignoreQueryLength:n?.ignoreQueryLength||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(t){this.showSelectionPlugin.setEnabled(t)}convertHtmlToBlockNoteHtml(t){return hK(t.trim()).innerHTML}pasteHTML(t,n=!1){var r;let o=t;n||(o=this.convertHtmlToBlockNoteHtml(t)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(t){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(t)}async pasteMarkdown(t){return this.pasteHTML(await mK(t))}},G_;async function fCe(){return G_||(G_=(async()=>{const[e,t]=await Promise.all([Ne(()=>import("./module-RjUF93sV.js"),[]),Ne(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in e?e.default:e,r="default"in t?t.default:t;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),G_)}async function hCe(e,t){if(!rSe("text",e))return[];const{emojiData:n,emojiMart:r}=await fCe();return(t.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(t)).map(o=>({id:o.skins[0].native,onItemClick:()=>e.insertInlineContent(o.skins[0].native+" ")}))}function $C(){return typeof window<"u"}function eg(e){return MK(e)?(e.nodeName||"").toLowerCase():"#document"}function Vi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function oc(e){var t;return(t=(MK(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MK(e){return $C()?e instanceof Node||e instanceof Vi(e).Node:!1}function Bn(e){return $C()?e instanceof Element||e instanceof Vi(e).Element:!1}function _s(e){return $C()?e instanceof HTMLElement||e instanceof Vi(e).HTMLElement:!1}function rR(e){return!$C()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vi(e).ShadowRoot}const pCe=new Set(["inline","contents"]);function nv(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ya(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!pCe.has(o)}const mCe=new Set(["table","td","th"]);function gCe(e){return mCe.has(eg(e))}const yCe=[":popover-open",":modal"];function jC(e){return yCe.some(t=>{try{return e.matches(t)}catch{return!1}})}const bCe=["transform","translate","scale","rotate","perspective"],vCe=["transform","translate","scale","rotate","perspective","filter"],xCe=["paint","layout","strict","content"];function W4(e){const t=LC(),n=Bn(e)?ya(e):e;return bCe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||vCe.some(r=>(n.willChange||"").includes(r))||xCe.some(r=>(n.contain||"").includes(r))}function wCe(e){let t=Xc(e);for(;_s(t)&&!Sd(t);){if(W4(t))return t;if(jC(t))return null;t=Xc(t)}return null}function LC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const SCe=new Set(["html","body","#document"]);function Sd(e){return SCe.has(eg(e))}function ya(e){return Vi(e).getComputedStyle(e)}function zC(e){return Bn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xc(e){if(eg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rR(e)&&e.host||oc(e);return rR(t)?t.host:t}function NK(e){const t=Xc(e);return Sd(t)?e.ownerDocument?e.ownerDocument.body:e.body:_s(t)&&nv(t)?t:NK(t)}function Zc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=NK(e),i=o===((r=e.ownerDocument)==null?void 0:r.body),s=Vi(o);if(i){const a=oR(s);return t.concat(s,s.visualViewport||[],nv(o)?o:[],a&&n?Zc(a):[])}return t.concat(o,Zc(o,[],n))}function oR(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function iR(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Am(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&rR(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function RK(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function K4(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function kCe(e){return ECe()?!1:!Oz()&&e.width===0&&e.height===0||Oz()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function IK(){return/apple/i.test(navigator.vendor)}function Oz(){const e=/android/i;return e.test(RK())||e.test(K4())}function CCe(){return RK().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function ECe(){return K4().includes("jsdom/")}function sR(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function TCe(e){return"nativeEvent"in e}function _Ce(e){return e.matches("html,body")}function ad(e){return e?.ownerDocument||document}function q_(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Dp(e){return"composedPath"in e?e.composedPath()[0]:e.target}const ACe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function MCe(e){return _s(e)&&e.matches(ACe)}const NCe=["top","right","bottom","left"],ba=Math.min,ro=Math.max,X0=Math.round,lx=Math.floor,Vl=e=>({x:e,y:e}),RCe={left:"right",right:"left",bottom:"top",top:"bottom"},ICe={start:"end",end:"start"};function aR(e,t,n){return ro(e,ba(t,n))}function el(e,t){return typeof e=="function"?e(t):e}function tl(e){return e.split("-")[0]}function tg(e){return e.split("-")[1]}function Y4(e){return e==="x"?"y":"x"}function J4(e){return e==="y"?"height":"width"}const OCe=new Set(["top","bottom"]);function Ua(e){return OCe.has(tl(e))?"y":"x"}function X4(e){return Y4(Ua(e))}function PCe(e,t,n){n===void 0&&(n=!1);const r=tg(e),o=X4(e),i=J4(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=OS(s)),[s,OS(s)]}function DCe(e){const t=OS(e);return[lR(e),t,lR(t)]}function lR(e){return e.replace(/start|end/g,t=>ICe[t])}const Pz=["left","right"],Dz=["right","left"],$Ce=["top","bottom"],jCe=["bottom","top"];function LCe(e,t,n){switch(e){case"top":case"bottom":return n?t?Dz:Pz:t?Pz:Dz;case"left":case"right":return t?$Ce:jCe;default:return[]}}function zCe(e,t,n,r){const o=tg(e);let i=LCe(tl(e),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),t&&(i=i.concat(i.map(lR)))),i}function OS(e){return e.replace(/left|right|bottom|top/g,t=>RCe[t])}function BCe(e){return{top:0,right:0,bottom:0,left:0,...e}}function Q4(e){return typeof e!="number"?BCe(e):{top:e,right:e,bottom:e,left:e}}function Mm(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var FCe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],cR=FCe.join(","),OK=typeof Element>"u",Q0=OK?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,PS=!OK&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},DS=function e(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),i=o===""||o==="true",s=i||n&&t&&e(t.parentNode);return s},VCe=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},HCe=function(t,n,r){if(DS(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(cR));return n&&Q0.call(t,cR)&&o.unshift(t),o=o.filter(r),o},UCe=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var s=i.shift();if(!DS(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),l=a.length?a:s.children,c=e(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:s,candidates:c})}else{var u=Q0.call(s,cR);u&&r.filter(s)&&(n||!t.includes(s))&&o.push(s);var f=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),p=!DS(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(f&&p){var m=e(f===!0?s.children:f.children,!0,r);r.flatten?o.push.apply(o,m):o.push({scopeParent:s,candidates:m})}else i.unshift.apply(i,s.children)}}return o},PK=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},DK=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||VCe(t))&&!PK(t)?0:t.tabIndex},GCe=function(t,n){var r=DK(t);return r<0&&n&&!PK(t)?0:r},qCe=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},$K=function(t){return t.tagName==="INPUT"},ZCe=function(t){return $K(t)&&t.type==="hidden"},WCe=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},KCe=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},YCe=function(t){if(!t.name)return!0;var n=t.form||PS(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=KCe(o,t.form);return!i||i===t},JCe=function(t){return $K(t)&&t.type==="radio"},XCe=function(t){return JCe(t)&&!YCe(t)},QCe=function(t){var n,r=t&&PS(t),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==t){var s,a,l;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!i&&o;){var c,u,f;r=PS(o),o=(c=r)===null||c===void 0?void 0:c.host,i=!!((u=o)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(o))}}return i},$z=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},eEe=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=Q0.call(t,"details>summary:first-of-type"),s=i?t.parentElement:t;if(Q0.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=t;t;){var l=t.parentElement,c=PS(t);if(l&&!l.shadowRoot&&o(l)===!0)return $z(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=a}if(QCe(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return $z(t);return!1},tEe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return Q0.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},nEe=function(t,n){return!(n.disabled||DS(n)||ZCe(n)||eEe(n,t)||WCe(n)||tEe(n))},jz=function(t,n){return!(XCe(n)||DK(n)<0||!nEe(t,n))},rEe=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},oEe=function e(t){var n=[],r=[];return t.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,l=GCe(a,s),c=s?e(o.candidates):a;l===0?s?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:o,isScope:s,content:c})}),r.sort(qCe).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},jK=function(t,n){n=n||{};var r;return n.getShadowRoot?r=UCe([t],n.includeContainer,{filter:jz.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:rEe}):r=HCe(t,n.includeContainer,jz.bind(null,n)),oEe(r)},Zr=qU();const e3=Md(Zr);function Lz(e,t,n){let{reference:r,floating:o}=e;const i=Ua(t),s=X4(t),a=J4(s),l=tl(t),c=i==="y",u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,p=r[a]/2-o[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-o.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-o.width,y:f};break;default:m={x:r.x,y:r.y}}switch(tg(t)){case"start":m[s]-=p*(n&&c?-1:1);break;case"end":m[s]+=p*(n&&c?-1:1);break}return m}const iEe=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=Lz(c,r,l),p=r,m={},y=0;for(let b=0;b<a.length;b++){const{name:w,fn:S}=a[b],{x:E,y:T,data:A,reset:M}=await S({x:u,y:f,initialPlacement:r,placement:p,strategy:o,middlewareData:m,rects:c,platform:s,elements:{reference:e,floating:t}});u=E??u,f=T??f,m={...m,[w]:{...m[w],...A}},M&&y<=50&&(y++,typeof M=="object"&&(M.placement&&(p=M.placement),M.rects&&(c=M.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:o}):M.rects),{x:u,y:f}=Lz(c,p,l)),b=-1)}return{x:u,y:f,placement:p,strategy:o,middlewareData:m}};async function Nm(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=el(t,e),y=Q4(m),w=a[p?f==="floating"?"reference":"floating":f],S=Mm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=f==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),A=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},M=Mm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:T,strategy:l}):E);return{top:(S.top-M.top+y.top)/A.y,bottom:(M.bottom-S.bottom+y.bottom)/A.y,left:(S.left-M.left+y.left)/A.x,right:(M.right-S.right+y.right)/A.x}}const sEe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=el(e,t)||{};if(c==null)return{};const f=Q4(u),p={x:n,y:r},m=X4(o),y=J4(m),b=await s.getDimensions(c),w=m==="y",S=w?"top":"left",E=w?"bottom":"right",T=w?"clientHeight":"clientWidth",A=i.reference[y]+i.reference[m]-p[m]-i.floating[y],M=p[m]-i.reference[m],R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let O=R?R[T]:0;(!O||!await(s.isElement==null?void 0:s.isElement(R)))&&(O=a.floating[T]||i.floating[y]);const I=A/2-M/2,L=O/2-b[y]/2-1,$=ba(f[S],L),B=ba(f[E],L),G=$,V=O-b[y]-B,W=O/2-b[y]/2+I,K=aR(G,W,V),F=!l.arrow&&tg(o)!=null&&W!==K&&i.reference[y]/2-(W<G?$:B)-b[y]/2<0,q=F?W<G?W-G:W-V:0;return{[m]:p[m]+q,data:{[m]:K,centerOffset:W-K-q,...F&&{alignmentOffset:q}},reset:F}}}),aEe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...w}=el(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const S=tl(o),E=Ua(a),T=tl(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),M=p||(T||!b?[OS(a)]:DCe(a)),R=y!=="none";!p&&R&&M.push(...zCe(a,b,y,A));const O=[a,...M],I=await Nm(t,w),L=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&L.push(I[S]),f){const W=PCe(o,s,A);L.push(I[W[0]],I[W[1]])}if($=[...$,{placement:o,overflows:L}],!L.every(W=>W<=0)){var B,G;const W=(((B=i.flip)==null?void 0:B.index)||0)+1,K=O[W];if(K&&(!(f==="alignment"?E!==Ua(K):!1)||$.every(H=>Ua(H.placement)===E?H.overflows[0]>0:!0)))return{data:{index:W,overflows:$},reset:{placement:K}};let F=(G=$.filter(q=>q.overflows[0]<=0).sort((q,H)=>q.overflows[1]-H.overflows[1])[0])==null?void 0:G.placement;if(!F)switch(m){case"bestFit":{var V;const q=(V=$.filter(H=>{if(R){const z=Ua(H.placement);return z===E||z==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(z=>z>0).reduce((z,N)=>z+N,0)]).sort((H,z)=>H[1]-z[1])[0])==null?void 0:V[0];q&&(F=q);break}case"initialPlacement":F=a;break}if(o!==F)return{reset:{placement:F}}}return{}}}};function zz(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Bz(e){return NCe.some(t=>e[t]>=0)}const lEe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=el(e,t);switch(r){case"referenceHidden":{const i=await Nm(t,{...o,elementContext:"reference"}),s=zz(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Bz(s)}}}case"escaped":{const i=await Nm(t,{...o,altBoundary:!0}),s=zz(i,n.floating);return{data:{escapedOffsets:s,escaped:Bz(s)}}}default:return{}}}}};function LK(e){const t=ba(...e.map(i=>i.left)),n=ba(...e.map(i=>i.top)),r=ro(...e.map(i=>i.right)),o=ro(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:o-n}}function cEe(e){const t=e.slice().sort((o,i)=>o.y-i.y),n=[];let r=null;for(let o=0;o<t.length;o++){const i=t[o];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(o=>Mm(LK(o)))}const uEe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:o,platform:i,strategy:s}=t,{padding:a=2,x:l,y:c}=el(e,t),u=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),f=cEe(u),p=Mm(LK(u)),m=Q4(a);function y(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(w=>l>w.left-m.left&&l<w.right+m.right&&c>w.top-m.top&&c<w.bottom+m.bottom)||p;if(f.length>=2){if(Ua(n)==="y"){const $=f[0],B=f[f.length-1],G=tl(n)==="top",V=$.top,W=B.bottom,K=G?$.left:B.left,F=G?$.right:B.right,q=F-K,H=W-V;return{top:V,bottom:W,left:K,right:F,width:q,height:H,x:K,y:V}}const w=tl(n)==="left",S=ro(...f.map($=>$.right)),E=ba(...f.map($=>$.left)),T=f.filter($=>w?$.left===E:$.right===S),A=T[0].top,M=T[T.length-1].bottom,R=E,O=S,I=O-R,L=M-A;return{top:A,bottom:M,left:R,right:O,width:I,height:L,x:R,y:A}}return p}const b=await i.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:s});return o.reference.x!==b.reference.x||o.reference.y!==b.reference.y||o.reference.width!==b.reference.width||o.reference.height!==b.reference.height?{reset:{rects:b}}:{}}}},zK=new Set(["left","top"]);async function dEe(e,t){const{placement:n,platform:r,elements:o}=e,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=tl(n),a=tg(n),l=Ua(n)==="y",c=zK.has(s)?-1:1,u=i&&l?-1:1,f=el(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const fEe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=t,l=await dEe(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},hEe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:w=>{let{x:S,y:E}=w;return{x:S,y:E}}},...l}=el(e,t),c={x:n,y:r},u=await Nm(t,l),f=Ua(tl(o)),p=Y4(f);let m=c[p],y=c[f];if(i){const w=p==="y"?"top":"left",S=p==="y"?"bottom":"right",E=m+u[w],T=m-u[S];m=aR(E,m,T)}if(s){const w=f==="y"?"top":"left",S=f==="y"?"bottom":"right",E=y+u[w],T=y-u[S];y=aR(E,y,T)}const b=a.fn({...t,[p]:m,[f]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[f]:s}}}}}},pEe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=el(e,t),u={x:n,y:r},f=Ua(o),p=Y4(f);let m=u[p],y=u[f];const b=el(a,t),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const T=p==="y"?"height":"width",A=i.reference[p]-i.floating[T]+w.mainAxis,M=i.reference[p]+i.reference[T]-w.mainAxis;m<A?m=A:m>M&&(m=M)}if(c){var S,E;const T=p==="y"?"width":"height",A=zK.has(tl(o)),M=i.reference[f]-i.floating[T]+(A&&((S=s.offset)==null?void 0:S[f])||0)+(A?0:w.crossAxis),R=i.reference[f]+i.reference[T]+(A?0:((E=s.offset)==null?void 0:E[f])||0)-(A?w.crossAxis:0);y<M?y=M:y>R&&(y=R)}return{[p]:m,[f]:y}}}},mEe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:s,elements:a}=t,{apply:l=()=>{},...c}=el(e,t),u=await Nm(t,c),f=tl(o),p=tg(o),m=Ua(o)==="y",{width:y,height:b}=i.floating;let w,S;f==="top"||f==="bottom"?(w=f,S=p===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(S=f,w=p==="end"?"top":"bottom");const E=b-u.top-u.bottom,T=y-u.left-u.right,A=ba(b-u[w],E),M=ba(y-u[S],T),R=!t.middlewareData.shift;let O=A,I=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=T),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(O=E),R&&!p){const $=ro(u.left,0),B=ro(u.right,0),G=ro(u.top,0),V=ro(u.bottom,0);m?I=y-2*($!==0||B!==0?$+B:ro(u.left,u.right)):O=b-2*(G!==0||V!==0?G+V:ro(u.top,u.bottom))}await l({...t,availableWidth:I,availableHeight:O});const L=await s.getDimensions(a.floating);return y!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};function BK(e){const t=ya(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=_s(e),i=o?e.offsetWidth:n,s=o?e.offsetHeight:r,a=X0(n)!==i||X0(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function t3(e){return Bn(e)?e:e.contextElement}function am(e){const t=t3(e);if(!_s(t))return Vl(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=BK(t);let s=(i?X0(n.width):n.width)/r,a=(i?X0(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const gEe=Vl(0);function FK(e){const t=Vi(e);return!LC()||!t.visualViewport?gEe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yEe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vi(e)?!1:t}function fh(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=t3(e);let s=Vl(1);t&&(r?Bn(r)&&(s=am(r)):s=am(e));const a=yEe(i,n,r)?FK(i):Vl(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,u=o.width/s.x,f=o.height/s.y;if(i){const p=Vi(i),m=r&&Bn(r)?Vi(r):r;let y=p,b=oR(y);for(;b&&r&&m!==y;){const w=am(b),S=b.getBoundingClientRect(),E=ya(b),T=S.left+(b.clientLeft+parseFloat(E.paddingLeft))*w.x,A=S.top+(b.clientTop+parseFloat(E.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=T,c+=A,y=Vi(b),b=oR(y)}}return Mm({width:u,height:f,x:l,y:c})}function n3(e,t){const n=zC(e).scrollLeft;return t?t.left+n:fh(oc(e)).left+n}function VK(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:n3(e,r)),i=r.top+t.scrollTop;return{x:o,y:i}}function bEe(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i=o==="fixed",s=oc(r),a=t?jC(t.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Vl(1);const u=Vl(0),f=_s(r);if((f||!f&&!i)&&((eg(r)!=="body"||nv(s))&&(l=zC(r)),_s(r))){const m=fh(r);c=am(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=s&&!f&&!i?VK(s,l,!0):Vl(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function vEe(e){return Array.from(e.getClientRects())}function xEe(e){const t=oc(e),n=zC(e),r=e.ownerDocument.body,o=ro(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ro(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+n3(e);const a=-n.scrollTop;return ya(r).direction==="rtl"&&(s+=ro(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}function wEe(e,t){const n=Vi(e),r=oc(e),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const c=LC();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a,y:l}}const SEe=new Set(["absolute","fixed"]);function kEe(e,t){const n=fh(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=_s(e)?am(e):Vl(1),s=e.clientWidth*i.x,a=e.clientHeight*i.y,l=o*i.x,c=r*i.y;return{width:s,height:a,x:l,y:c}}function Fz(e,t,n){let r;if(t==="viewport")r=wEe(e,n);else if(t==="document")r=xEe(oc(e));else if(Bn(t))r=kEe(t,n);else{const o=FK(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Mm(r)}function HK(e,t){const n=Xc(e);return n===t||!Bn(n)||Sd(n)?!1:ya(n).position==="fixed"||HK(n,t)}function CEe(e,t){const n=t.get(e);if(n)return n;let r=Zc(e,[],!1).filter(a=>Bn(a)&&eg(a)!=="body"),o=null;const i=ya(e).position==="fixed";let s=i?Xc(e):e;for(;Bn(s)&&!Sd(s);){const a=ya(s),l=W4(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&!!o&&SEe.has(o.position)||nv(s)&&!l&&HK(e,s))?r=r.filter(u=>u!==s):o=a,s=Xc(s)}return t.set(e,r),r}function EEe(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const s=[...n==="clippingAncestors"?jC(t)?[]:CEe(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const f=Fz(t,u,o);return c.top=ro(f.top,c.top),c.right=ba(f.right,c.right),c.bottom=ba(f.bottom,c.bottom),c.left=ro(f.left,c.left),c},Fz(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function TEe(e){const{width:t,height:n}=BK(e);return{width:t,height:n}}function _Ee(e,t,n){const r=_s(t),o=oc(t),i=n==="fixed",s=fh(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=Vl(0);function c(){l.x=n3(o)}if(r||!r&&!i)if((eg(t)!=="body"||nv(o))&&(a=zC(t)),r){const m=fh(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else o&&c();i&&!r&&o&&c();const u=o&&!r&&!i?VK(o,a):Vl(0),f=s.left+a.scrollLeft-l.x-u.x,p=s.top+a.scrollTop-l.y-u.y;return{x:f,y:p,width:s.width,height:s.height}}function Z_(e){return ya(e).position==="static"}function Vz(e,t){if(!_s(e)||ya(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return oc(e)===n&&(n=n.ownerDocument.body),n}function UK(e,t){const n=Vi(e);if(jC(e))return n;if(!_s(e)){let o=Xc(e);for(;o&&!Sd(o);){if(Bn(o)&&!Z_(o))return o;o=Xc(o)}return n}let r=Vz(e,t);for(;r&&gCe(r)&&Z_(r);)r=Vz(r,t);return r&&Sd(r)&&Z_(r)&&!W4(r)?n:r||wCe(e)||n}const AEe=async function(e){const t=this.getOffsetParent||UK,n=this.getDimensions,r=await n(e.floating);return{reference:_Ee(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function MEe(e){return ya(e).direction==="rtl"}const NEe={convertOffsetParentRelativeRectToViewportRelativeRect:bEe,getDocumentElement:oc,getClippingRect:EEe,getOffsetParent:UK,getElementRects:AEe,getClientRects:vEe,getDimensions:TEe,getScale:am,isElement:Bn,isRTL:MEe};function GK(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function REe(e,t){let n=null,r;const o=oc(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:f,width:p,height:m}=c;if(a||t(),!p||!m)return;const y=lx(f),b=lx(o.clientWidth-(u+p)),w=lx(o.clientHeight-(f+m)),S=lx(u),T={rootMargin:-y+"px "+-b+"px "+-w+"px "+-S+"px",threshold:ro(0,ba(1,l))||1};let A=!0;function M(R){const O=R[0].intersectionRatio;if(O!==l){if(!A)return s();O?s(!1,O):r=setTimeout(()=>{s(!1,1e-7)},1e3)}O===1&&!GK(c,e.getBoundingClientRect())&&s(),A=!1}try{n=new IntersectionObserver(M,{...T,root:o.ownerDocument})}catch{n=new IntersectionObserver(M,T)}n.observe(e)}return s(!0),i}function BC(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=t3(e),u=o||i?[...c?Zc(c):[],...Zc(t)]:[];u.forEach(S=>{o&&S.addEventListener("scroll",n,{passive:!0}),i&&S.addEventListener("resize",n)});const f=c&&a?REe(c,n):null;let p=-1,m=null;s&&(m=new ResizeObserver(S=>{let[E]=S;E&&E.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let y,b=l?fh(e):null;l&&w();function w(){const S=fh(e);b&&!GK(b,S)&&n(),b=S,y=requestAnimationFrame(w)}return n(),()=>{var S;u.forEach(E=>{o&&E.removeEventListener("scroll",n),i&&E.removeEventListener("resize",n)}),f?.(),(S=m)==null||S.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const W_=Nm,IEe=fEe,OEe=hEe,PEe=aEe,DEe=mEe,$Ee=lEe,Hz=sEe,jEe=uEe,LEe=pEe,zEe=(e,t,n)=>{const r=new Map,o={platform:NEe,...n},i={...o.platform,_c:r};return iEe(e,t,{...o,platform:i})};var BEe=typeof document<"u",FEe=function(){},mw=BEe?k.useLayoutEffect:FEe;function $S(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!$S(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!$S(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function qK(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Uz(e,t){const n=qK(e);return Math.round(t*n)/n}function K_(e){const t=k.useRef(e);return mw(()=>{t.current=e}),t}function ZK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,f]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=k.useState(r);$S(p,r)||m(r);const[y,b]=k.useState(null),[w,S]=k.useState(null),E=k.useCallback(H=>{H!==R.current&&(R.current=H,b(H))},[]),T=k.useCallback(H=>{H!==O.current&&(O.current=H,S(H))},[]),A=i||y,M=s||w,R=k.useRef(null),O=k.useRef(null),I=k.useRef(u),L=l!=null,$=K_(l),B=K_(o),G=K_(c),V=k.useCallback(()=>{if(!R.current||!O.current)return;const H={placement:t,strategy:n,middleware:p};B.current&&(H.platform=B.current),zEe(R.current,O.current,H).then(z=>{const N={...z,isPositioned:G.current!==!1};W.current&&!$S(I.current,N)&&(I.current=N,Zr.flushSync(()=>{f(N)}))})},[p,t,n,B,G]);mw(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(H=>({...H,isPositioned:!1})))},[c]);const W=k.useRef(!1);mw(()=>(W.current=!0,()=>{W.current=!1}),[]),mw(()=>{if(A&&(R.current=A),M&&(O.current=M),A&&M){if($.current)return $.current(A,M,V);V()}},[A,M,V,$,L]);const K=k.useMemo(()=>({reference:R,floating:O,setReference:E,setFloating:T}),[E,T]),F=k.useMemo(()=>({reference:A,floating:M}),[A,M]),q=k.useMemo(()=>{const H={position:n,left:0,top:0};if(!F.floating)return H;const z=Uz(F.floating,u.x),N=Uz(F.floating,u.y);return a?{...H,transform:"translate("+z+"px, "+N+"px)",...qK(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:N}},[n,a,F.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:V,refs:K,elements:F,floatingStyles:q}),[u,V,K,F,q])}const VEe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Hz({element:r.current,padding:o}).fn(n):{}:r?Hz({element:r,padding:o}).fn(n):{}}}},Zi=(e,t)=>({...IEe(e),options:[e,t]}),au=(e,t)=>({...OEe(e),options:[e,t]}),uR=(e,t)=>({...LEe(e),options:[e,t]}),As=(e,t)=>({...PEe(e),options:[e,t]}),Sh=(e,t)=>({...DEe(e),options:[e,t]}),HEe=(e,t)=>({...$Ee(e),options:[e,t]}),a0=(e,t)=>({...jEe(e),options:[e,t]}),r3=(e,t)=>({...VEe(e),options:[e,t]}),WK={...Bb},UEe=WK.useInsertionEffect,GEe=UEe||(e=>e());function Ol(e){const t=k.useRef(()=>{});return GEe(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}var ti=typeof document<"u"?k.useLayoutEffect:k.useEffect;function dR(){return dR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dR.apply(this,arguments)}let Gz=!1,qEe=0;const qz=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+qEe++;function ZEe(){const[e,t]=k.useState(()=>Gz?qz():void 0);return ti(()=>{e==null&&t(qz())},[]),k.useEffect(()=>{Gz=!0},[]),e}const WEe=WK.useId,o3=WEe||ZEe;function KEe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(o=>o!==n))||[])}}}const YEe=k.createContext(null),JEe=k.createContext(null),i3=()=>{var e;return((e=k.useContext(YEe))==null?void 0:e.id)||null},s3=()=>k.useContext(JEe);function rv(e){return"data-floating-ui-"+e}function If(e){const t=k.useRef(e);return ti(()=>{t.current=e}),t}const Zz=rv("safe-polygon");function gw(e,t,n){return n&&!sR(n)?0:typeof e=="number"?e:e?.[t]}function XEe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:s}=e,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:f=0,move:p=!0}=t,m=s3(),y=i3(),b=If(c),w=If(l),S=If(n),E=k.useRef(),T=k.useRef(-1),A=k.useRef(),M=k.useRef(-1),R=k.useRef(!0),O=k.useRef(!1),I=k.useRef(()=>{}),L=k.useRef(!1),$=k.useCallback(()=>{var q;const H=(q=o.current.openEvent)==null?void 0:q.type;return H?.includes("mouse")&&H!=="mousedown"},[o]);k.useEffect(()=>{if(!a)return;function q(H){let{open:z}=H;z||(clearTimeout(T.current),clearTimeout(M.current),R.current=!0,L.current=!1)}return i.on("openchange",q),()=>{i.off("openchange",q)}},[a,i]),k.useEffect(()=>{if(!a||!b.current||!n)return;function q(z){$()&&r(!1,z,"hover")}const H=ad(s.floating).documentElement;return H.addEventListener("mouseleave",q),()=>{H.removeEventListener("mouseleave",q)}},[s.floating,n,r,a,b,$]);const B=k.useCallback(function(q,H,z){H===void 0&&(H=!0),z===void 0&&(z="hover");const N=gw(w.current,"close",E.current);N&&!A.current?(clearTimeout(T.current),T.current=window.setTimeout(()=>r(!1,q,z),N)):H&&(clearTimeout(T.current),r(!1,q,z))},[w,r]),G=Ol(()=>{I.current(),A.current=void 0}),V=Ol(()=>{if(O.current){const q=ad(s.floating).body;q.style.pointerEvents="",q.removeAttribute(Zz),O.current=!1}}),W=Ol(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);k.useEffect(()=>{if(!a)return;function q(U){if(clearTimeout(T.current),R.current=!1,u&&!sR(E.current)||f>0&&!gw(w.current,"open"))return;const te=gw(w.current,"open",E.current);te?T.current=window.setTimeout(()=>{S.current||r(!0,U,"hover")},te):n||r(!0,U,"hover")}function H(U){if(W())return;I.current();const te=ad(s.floating);if(clearTimeout(M.current),L.current=!1,b.current&&o.current.floatingContext){n||clearTimeout(T.current),A.current=b.current({...o.current.floatingContext,tree:m,x:U.clientX,y:U.clientY,onClose(){V(),G(),W()||B(U,!0,"safe-polygon")}});const ce=A.current;te.addEventListener("mousemove",ce),I.current=()=>{te.removeEventListener("mousemove",ce)};return}(E.current==="touch"?!Am(s.floating,U.relatedTarget):!0)&&B(U)}function z(U){W()||o.current.floatingContext&&(b.current==null||b.current({...o.current.floatingContext,tree:m,x:U.clientX,y:U.clientY,onClose(){V(),G(),W()||B(U)}})(U))}if(Bn(s.domReference)){var N;const U=s.domReference;return n&&U.addEventListener("mouseleave",z),(N=s.floating)==null||N.addEventListener("mouseleave",z),p&&U.addEventListener("mousemove",q,{once:!0}),U.addEventListener("mouseenter",q),U.addEventListener("mouseleave",H),()=>{var te;n&&U.removeEventListener("mouseleave",z),(te=s.floating)==null||te.removeEventListener("mouseleave",z),p&&U.removeEventListener("mousemove",q),U.removeEventListener("mouseenter",q),U.removeEventListener("mouseleave",H)}}},[s,a,e,u,f,p,B,G,V,r,n,S,m,w,b,o,W]),ti(()=>{var q;if(a&&n&&(q=b.current)!=null&&q.__options.blockPointerEvents&&$()){O.current=!0;const z=s.floating;if(Bn(s.domReference)&&z){var H;const N=ad(s.floating).body;N.setAttribute(Zz,"");const U=s.domReference,te=m==null||(H=m.nodesRef.current.find(D=>D.id===y))==null||(H=H.context)==null?void 0:H.elements.floating;return te&&(te.style.pointerEvents=""),N.style.pointerEvents="none",U.style.pointerEvents="auto",z.style.pointerEvents="auto",()=>{N.style.pointerEvents="",U.style.pointerEvents="",z.style.pointerEvents=""}}}},[a,n,y,s,m,b,$]),ti(()=>{n||(E.current=void 0,L.current=!1,G(),V())},[n,G,V]),k.useEffect(()=>()=>{G(),clearTimeout(T.current),clearTimeout(M.current),V()},[a,s.domReference,G,V]);const K=k.useMemo(()=>{function q(H){E.current=H.pointerType}return{onPointerDown:q,onPointerEnter:q,onMouseMove(H){const{nativeEvent:z}=H;function N(){!R.current&&!S.current&&r(!0,z,"hover")}u&&!sR(E.current)||n||f===0||L.current&&H.movementX**2+H.movementY**2<2||(clearTimeout(M.current),E.current==="touch"?N():(L.current=!0,M.current=window.setTimeout(N,f)))}}},[u,r,n,S,f]),F=k.useMemo(()=>({onMouseEnter(){clearTimeout(T.current)},onMouseLeave(q){W()||B(q.nativeEvent,!1)}}),[B,W]);return k.useMemo(()=>a?{reference:K,floating:F}:{},[a,K,F])}const fR=()=>{},KK=k.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:fR,setState:fR,isInstantPhase:!1}),QEe=()=>k.useContext(KK);function e2e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[o,i]=k.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=k.useRef(null),a=k.useCallback(l=>{i({currentId:l})},[]);return ti(()=>{o.currentId?s.current===null?s.current=o.currentId:o.isInstantPhase||i({isInstantPhase:!0}):(o.isInstantPhase&&i({isInstantPhase:!1}),s.current=null)},[o.currentId,o.isInstantPhase]),k.createElement(KK.Provider,{value:k.useMemo(()=>({...o,setState:i,setCurrentId:a}),[o,a])},t)}function t2e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:o}=e,{id:i,enabled:s=!0}=t,a=i??o,l=QEe(),{currentId:c,setCurrentId:u,initialDelay:f,setState:p,timeoutMs:m}=l;return ti(()=>{s&&c&&(p({delay:{open:1,close:gw(f,"close")}}),c!==a&&r(!1))},[s,a,r,p,c,f]),ti(()=>{function y(){r(!1),p({delay:f,currentId:null})}if(s&&c&&!n&&c===a){if(m){const b=window.setTimeout(y,m);return()=>{clearTimeout(b)}}y()}},[s,n,p,c,a,r,f,m]),ti(()=>{s&&(u===fR||!n||u(a))},[s,n,u,a]),l}function Y_(e,t){let n=e.filter(o=>{var i;return o.parentId===t&&((i=o.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=e.filter(o=>{var i;return(i=r)==null?void 0:i.some(s=>{var a;return o.parentId===s.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const YK=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function JK(e,t){const n=jK(e,YK());t==="prev"&&n.reverse();const r=n.indexOf(iR(ad(e)));return n.slice(r+1)[0]}function n2e(){return JK(document.body,"next")}function r2e(){return JK(document.body,"prev")}function J_(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Am(n,r)}function o2e(e){jK(e,YK()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Wz(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const XK={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let i2e;function Kz(e){e.key==="Tab"&&(e.target,clearTimeout(i2e))}const Yz=k.forwardRef(function(t,n){const[r,o]=k.useState();ti(()=>(IK()&&o("button"),document.addEventListener("keydown",Kz),()=>{document.removeEventListener("keydown",Kz)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[rv("focus-guard")]:"",style:XK};return k.createElement("span",dR({},t,i))}),QK=k.createContext(null),Jz=rv("portal");function s2e(e){e===void 0&&(e={});const{id:t,root:n}=e,r=o3(),o=l2e(),[i,s]=k.useState(null),a=k.useRef(null);return ti(()=>()=>{i?.remove(),queueMicrotask(()=>{a.current=null})},[i]),ti(()=>{if(!r||a.current)return;const l=t?document.getElementById(t):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(Jz,""),l.appendChild(c),a.current=c,s(c)},[t,r]),ti(()=>{if(n===null||!r||a.current)return;let l=n||o?.portalNode;l&&!Bn(l)&&(l=l.current),l=l||document.body;let c=null;t&&(c=document.createElement("div"),c.id=t,l.appendChild(c));const u=document.createElement("div");u.id=r,u.setAttribute(Jz,""),l=c||l,l.appendChild(u),a.current=u,s(u)},[t,n,r,o]),i}function a2e(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,i=s2e({id:n,root:r}),[s,a]=k.useState(null),l=k.useRef(null),c=k.useRef(null),u=k.useRef(null),f=k.useRef(null),p=s?.modal,m=s?.open,y=!!s&&!s.modal&&s.open&&o&&!!(r||i);return k.useEffect(()=>{if(!i||!o||p)return;function b(w){i&&J_(w)&&(w.type==="focusin"?Wz:o2e)(i)}return i.addEventListener("focusin",b,!0),i.addEventListener("focusout",b,!0),()=>{i.removeEventListener("focusin",b,!0),i.removeEventListener("focusout",b,!0)}},[i,o,p]),k.useEffect(()=>{i&&(m||Wz(i))},[m,i]),k.createElement(QK.Provider,{value:k.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:f,portalNode:i,setFocusManagerState:a}),[o,i])},y&&i&&k.createElement(Yz,{"data-type":"outside",ref:l,onFocus:b=>{if(J_(b,i)){var w;(w=u.current)==null||w.focus()}else{const S=r2e()||s?.refs.domReference.current;S?.focus()}}}),y&&i&&k.createElement("span",{"aria-owns":i.id,style:XK}),i&&Zr.createPortal(t,i),y&&i&&k.createElement(Yz,{"data-type":"outside",ref:c,onFocus:b=>{if(J_(b,i)){var w;(w=f.current)==null||w.focus()}else{const S=n2e()||s?.refs.domReference.current;S?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1,b.nativeEvent,"focus-out")}}}))}const l2e=()=>k.useContext(QK),c2e="data-floating-ui-focusable",u2e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},d2e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Xz=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e?.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e?.outsidePress)!=null?n:!0}};function eY(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:y}=t,b=s3(),w=Ol(typeof l=="function"?l:()=>!1),S=typeof l=="function"?w:l,E=k.useRef(!1),T=k.useRef(!1),{escapeKey:A,outsidePress:M}=Xz(m),{escapeKey:R,outsidePress:O}=Xz(y),I=k.useRef(!1),L=Ol(K=>{var F;if(!n||!s||!a||K.key!=="Escape"||I.current)return;const q=(F=i.current.floatingContext)==null?void 0:F.nodeId,H=b?Y_(b.nodesRef.current,q):[];if(!A&&(K.stopPropagation(),H.length>0)){let z=!0;if(H.forEach(N=>{var U;if((U=N.context)!=null&&U.open&&!N.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,TCe(K)?K.nativeEvent:K,"escape-key")}),$=Ol(K=>{var F;const q=()=>{var H;L(K),(H=Dp(K))==null||H.removeEventListener("keydown",q)};(F=Dp(K))==null||F.addEventListener("keydown",q)}),B=Ol(K=>{var F;const q=E.current;E.current=!1;const H=T.current;if(T.current=!1,c==="click"&&H||q||typeof S=="function"&&!S(K))return;const z=Dp(K),N="["+rv("inert")+"]",U=ad(o.floating).querySelectorAll(N);let te=Bn(z)?z:null;for(;te&&!Sd(te);){const pe=Xc(te);if(Sd(pe)||!Bn(pe))break;te=pe}if(U.length&&Bn(z)&&!_Ce(z)&&!Am(z,o.floating)&&Array.from(U).every(pe=>!Am(te,pe)))return;if(_s(z)&&W){const pe=z.clientWidth>0&&z.scrollWidth>z.clientWidth,ie=z.clientHeight>0&&z.scrollHeight>z.clientHeight;let ye=ie&&K.offsetX>z.clientWidth;if(ie&&ya(z).direction==="rtl"&&(ye=K.offsetX<=z.offsetWidth-z.clientWidth),ye||pe&&K.offsetY>z.clientHeight)return}const D=(F=i.current.floatingContext)==null?void 0:F.nodeId,ce=b&&Y_(b.nodesRef.current,D).some(pe=>{var ie;return q_(K,(ie=pe.context)==null?void 0:ie.elements.floating)});if(q_(K,o.floating)||q_(K,o.domReference)||ce)return;const ae=b?Y_(b.nodesRef.current,D):[];if(ae.length>0){let pe=!0;if(ae.forEach(ie=>{var ye;if((ye=ie.context)!=null&&ye.open&&!ie.context.dataRef.current.__outsidePressBubbles){pe=!1;return}}),!pe)return}r(!1,K,"outside-press")}),G=Ol(K=>{var F;const q=()=>{var H;B(K),(H=Dp(K))==null||H.removeEventListener(c,q)};(F=Dp(K))==null||F.addEventListener(c,q)});k.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=A,i.current.__outsidePressBubbles=M;let K=-1;function F(U){r(!1,U,"ancestor-scroll")}function q(){window.clearTimeout(K),I.current=!0}function H(){K=window.setTimeout(()=>{I.current=!1},LC()?5:0)}const z=ad(o.floating);a&&(z.addEventListener("keydown",R?$:L,R),z.addEventListener("compositionstart",q),z.addEventListener("compositionend",H)),S&&z.addEventListener(c,O?G:B,O);let N=[];return p&&(Bn(o.domReference)&&(N=Zc(o.domReference)),Bn(o.floating)&&(N=N.concat(Zc(o.floating))),!Bn(o.reference)&&o.reference&&o.reference.contextElement&&(N=N.concat(Zc(o.reference.contextElement)))),N=N.filter(U=>{var te;return U!==((te=z.defaultView)==null?void 0:te.visualViewport)}),N.forEach(U=>{U.addEventListener("scroll",F,{passive:!0})}),()=>{a&&(z.removeEventListener("keydown",R?$:L,R),z.removeEventListener("compositionstart",q),z.removeEventListener("compositionend",H)),S&&z.removeEventListener(c,O?G:B,O),N.forEach(U=>{U.removeEventListener("scroll",F)}),window.clearTimeout(K)}},[i,o,a,S,c,n,r,p,s,A,M,L,R,$,B,O,G]),k.useEffect(()=>{E.current=!1},[S,c]);const V=k.useMemo(()=>({onKeyDown:L,[u2e[f]]:K=>{u&&r(!1,K.nativeEvent,"reference-press")}}),[L,r,u,f]),W=k.useMemo(()=>({onKeyDown:L,onMouseDown(){T.current=!0},onMouseUp(){T.current=!0},[d2e[c]]:()=>{E.current=!0}}),[L,c]);return k.useMemo(()=>s?{reference:V,floating:W}:{},[s,V,W])}function f2e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=o3(),i=k.useRef({}),[s]=k.useState(()=>KEe()),a=i3()!=null,[l,c]=k.useState(r.reference),u=Ol((m,y,b)=>{i.current.openEvent=m?y:void 0,s.emit("openchange",{open:m,event:y,reason:b,nested:a}),n?.(m,y,b)}),f=k.useMemo(()=>({setPositionReference:c}),[]),p=k.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return k.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:p,events:s,floatingId:o,refs:f}),[t,u,p,s,o,f])}function kh(e){e===void 0&&(e={});const{nodeId:t}=e,n=f2e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,s]=k.useState(null),[a,l]=k.useState(null),u=o?.domReference||i,f=k.useRef(null),p=s3();ti(()=>{u&&(f.current=u)},[u]);const m=ZK({...e,elements:{...o,...a&&{reference:a}}}),y=k.useCallback(T=>{const A=Bn(T)?{getBoundingClientRect:()=>T.getBoundingClientRect(),contextElement:T}:T;l(A),m.refs.setReference(A)},[m.refs]),b=k.useCallback(T=>{(Bn(T)||T===null)&&(f.current=T,s(T)),(Bn(m.refs.reference.current)||m.refs.reference.current===null||T!==null&&!Bn(T))&&m.refs.setReference(T)},[m.refs]),w=k.useMemo(()=>({...m.refs,setReference:b,setPositionReference:y,domReference:f}),[m.refs,b,y]),S=k.useMemo(()=>({...m.elements,domReference:u}),[m.elements,u]),E=k.useMemo(()=>({...m,...r,refs:w,elements:S,nodeId:t}),[m,w,S,t,r]);return ti(()=>{r.dataRef.current.floatingContext=E;const T=p?.nodesRef.current.find(A=>A.id===t);T&&(T.context=E)}),k.useMemo(()=>({...m,context:E,refs:w,elements:S}),[m,w,S,E])}function h2e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:o,dataRef:i,elements:s}=e,{enabled:a=!0,visibleOnly:l=!0}=t,c=k.useRef(!1),u=k.useRef(),f=k.useRef(!0);k.useEffect(()=>{if(!a)return;const m=Vi(s.domReference);function y(){!n&&_s(s.domReference)&&s.domReference===iR(ad(s.domReference))&&(c.current=!0)}function b(){f.current=!0}return m.addEventListener("blur",y),m.addEventListener("keydown",b,!0),()=>{m.removeEventListener("blur",y),m.removeEventListener("keydown",b,!0)}},[s.domReference,n,a]),k.useEffect(()=>{if(!a)return;function m(y){let{reason:b}=y;(b==="reference-press"||b==="escape-key")&&(c.current=!0)}return o.on("openchange",m),()=>{o.off("openchange",m)}},[o,a]),k.useEffect(()=>()=>{clearTimeout(u.current)},[]);const p=k.useMemo(()=>({onPointerDown(m){kCe(m.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(m){if(c.current)return;const y=Dp(m.nativeEvent);if(l&&Bn(y))try{if(IK()&&CCe())throw Error();if(!y.matches(":focus-visible"))return}catch{if(!f.current&&!MCe(y))return}r(!0,m.nativeEvent,"focus")},onBlur(m){c.current=!1;const y=m.relatedTarget,b=m.nativeEvent,w=Bn(y)&&y.hasAttribute(rv("focus-guard"))&&y.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var S;const E=iR(s.domReference?s.domReference.ownerDocument:document);!y&&E===s.domReference||Am((S=i.current.floatingContext)==null?void 0:S.refs.floating.current,E)||Am(s.domReference,E)||w||r(!1,b,"focus")})}}),[i,s.domReference,r,l]);return k.useMemo(()=>a?{reference:p}:{},[a,p])}const Qz="active",e8="selected";function X_(e,t,n){const r=new Map,o=n==="item";let i=e;if(o&&e){const{[Qz]:s,[e8]:a,...l}=e;i=l}return{...n==="floating"&&{tabIndex:-1,[c2e]:""},...i,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(o&&[Qz,e8].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var f;(f=r.get(c))==null||f.push(u),s[c]=function(){for(var p,m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];return(p=r.get(c))==null?void 0:p.map(w=>w(...y)).find(w=>w!==void 0)}}}else s[c]=u}),s),{})}}function a3(e){e===void 0&&(e=[]);const t=e.map(a=>a?.reference),n=e.map(a=>a?.floating),r=e.map(a=>a?.item),o=k.useCallback(a=>X_(a,e,"reference"),t),i=k.useCallback(a=>X_(a,e,"floating"),n),s=k.useCallback(a=>X_(a,e,"item"),r);return k.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const p2e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function m2e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:o}=e,{enabled:i=!0,role:s="dialog"}=t,a=(n=p2e.get(s))!=null?n:s,l=o3(),u=i3()!=null,f=k.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&u&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,o,u,r,l,s]),p=k.useMemo(()=>{const y={id:o,...a&&{role:a}};return a==="tooltip"||s==="label"?y:{...y,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,s]),m=k.useCallback(y=>{let{active:b,selected:w}=y;const S={role:"option",...b&&{id:o+"-option"}};switch(s){case"select":return{...S,"aria-selected":b&&w};case"combobox":return{...S,...b&&{"aria-selected":!0}}}return{}},[o,s]);return k.useMemo(()=>i?{reference:f,floating:p,item:m}:{},[i,f,p,m])}const t8=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,n)=>(n?"-":"")+t.toLowerCase());function mp(e,t){return typeof e=="function"?e(t):e}function g2e(e,t){const[n,r]=k.useState(e);return e&&!n&&r(!0),k.useEffect(()=>{if(!e&&n){const o=setTimeout(()=>r(!1),t);return()=>clearTimeout(o)}},[e,n,t]),n}function y2e(e,t){t===void 0&&(t={});const{open:n,elements:{floating:r}}=e,{duration:o=250}=t,s=(typeof o=="number"?o:o.close)||0,[a,l]=k.useState("unmounted"),c=g2e(n,s);return!c&&a==="close"&&l("unmounted"),ti(()=>{if(r){if(n){l("initial");const u=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(u)}}l("close")}},[n,r]),{isMounted:c,status:a}}function l3(e,t){t===void 0&&(t={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:s=250}=t,a=e.placement,l=a.split("-")[0],c=k.useMemo(()=>({side:l,placement:a}),[l,a]),u=typeof s=="number",f=(u?s:s.open)||0,p=(u?s:s.close)||0,[m,y]=k.useState(()=>({...mp(i,c),...mp(n,c)})),{isMounted:b,status:w}=y2e(e,{duration:s}),S=If(n),E=If(r),T=If(o),A=If(i);return ti(()=>{const M=mp(S.current,c),R=mp(T.current,c),O=mp(A.current,c),I=mp(E.current,c)||Object.keys(M).reduce((L,$)=>(L[$]="",L),{});if(w==="initial"&&y(L=>({transitionProperty:L.transitionProperty,...O,...M})),w==="open"&&y({transitionProperty:Object.keys(I).map(t8).join(","),transitionDuration:f+"ms",...O,...I}),w==="close"){const L=R||M;y({transitionProperty:Object.keys(L).map(t8).join(","),transitionDuration:p+"ms",...O,...L})}},[p,T,S,E,A,f,w,c]),{isMounted:b,styles:m}}function n8(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const b2e=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:o,offset:i=0,index:s=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=el(e,t),{rects:f,elements:{floating:p}}=t,m=n.current[s],y=c?.current||p,b=p.clientTop||y.clientTop,w=p.clientTop!==0,S=y.clientTop!==0,E=p===y;if(!m)return{};const T={...t,...await Zi(-m.offsetTop-p.clientTop-f.reference.height/2-m.offsetHeight/2-i).fn(t)},A=await W_(n8(T,y.scrollHeight+b+p.clientTop),u),M=await W_(T,{...u,elementContext:"reference"}),R=ro(0,A.top),O=T.y+R,$=(y.scrollHeight>y.clientHeight?B=>B:X0)(ro(0,y.scrollHeight+(w&&E||S?b*2:0)-R-ro(0,A.bottom)));if(y.style.maxHeight=$+"px",y.scrollTop=R,o){const B=y.offsetHeight<m.offsetHeight*ba(a,n.current.length)-1||M.top>=-l||M.bottom>=-l;Zr.flushSync(()=>o(B))}return r&&(r.current=await W_(n8({...T,y:O},y.offsetHeight+b+p.clientTop),u)),{y:O}}});function v2e(e,t){const{open:n,elements:r}=e,{enabled:o=!0,overflowRef:i,scrollRef:s,onChange:a}=t,l=Ol(a),c=k.useRef(!1),u=k.useRef(null),f=k.useRef(null);k.useEffect(()=>{if(!o)return;function m(b){if(b.ctrlKey||!y||i.current==null)return;const w=b.deltaY,S=i.current.top>=-.5,E=i.current.bottom>=-.5,T=y.scrollHeight-y.clientHeight,A=w<0?-1:1,M=w<0?"max":"min";y.scrollHeight<=y.clientHeight||(!S&&w>0||!E&&w<0?(b.preventDefault(),Zr.flushSync(()=>{l(R=>R+Math[M](w,T*A))})):/firefox/i.test(K4())&&(y.scrollTop+=w))}const y=s?.current||r.floating;if(n&&y)return y.addEventListener("wheel",m),requestAnimationFrame(()=>{u.current=y.scrollTop,i.current!=null&&(f.current={...i.current})}),()=>{u.current=null,f.current=null,y.removeEventListener("wheel",m)}},[o,n,r.floating,i,s,l]);const p=k.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const m=s?.current||r.floating;if(!(!i.current||!m||!c.current)){if(u.current!==null){const y=m.scrollTop-u.current;(i.current.bottom<-.5&&y<-1||i.current.top<-.5&&y>1)&&Zr.flushSync(()=>l(b=>b+y))}requestAnimationFrame(()=>{u.current=m.scrollTop})}}}),[r.floating,l,i,s]);return k.useMemo(()=>o?{floating:p}:{},[o,p])}var tY={exports:{}},Q_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r8;function x2e(){if(r8)return Q_;r8=1;var e=se;function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function a(f,p){var m=p(),y=r({inst:{value:m,getSnapshot:p}}),b=y[0].inst,w=y[1];return i(function(){b.value=m,b.getSnapshot=p,l(b)&&w({inst:b})},[f,m,p]),o(function(){return l(b)&&w({inst:b}),f(function(){l(b)&&w({inst:b})})},[f]),s(m),m}function l(f){var p=f.getSnapshot;f=f.value;try{var m=p();return!n(f,m)}catch{return!0}}function c(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Q_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,Q_}tY.exports=x2e();var nY=tY.exports;const w2e=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},S2e=({contentComponent:e})=>{const t=nY.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return se.createElement(se.Fragment,null,Object.values(t))};function k2e(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:e3.createPortal(r.reactElement,r.element,n)},e.forEach(o=>o())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(o=>o())}}}class C2e extends se.Component{constructor(t){var n;super(t),this.editorContentRef=se.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=t.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.options.element.childNodes),t.setOptions({element:n}),t.contentComponent=k2e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!t.options.element.firstChild))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const{editor:t,innerRef:n,...r}=this.props;return se.createElement(se.Fragment,null,se.createElement("div",{ref:w2e(n,this.editorContentRef),...r}),t?.contentComponent&&se.createElement(S2e,{contentComponent:t.contentComponent}))}}const E2e=k.forwardRef((e,t)=>{const n=se.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return se.createElement(C2e,{key:n,innerRef:t,...e})});se.memo(E2e);var eA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o8;function T2e(){if(o8)return eA;o8=1;var e=se,t=nY;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,l=e.useDebugValue;return eA.useSyncExternalStoreWithSelector=function(c,u,f,p,m){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=a(function(){function S(R){if(!E){if(E=!0,T=R,R=p(R),m!==void 0&&b.hasValue){var O=b.value;if(m(O,R))return A=O}return A=R}if(O=A,r(T,R))return O;var I=p(R);return m!==void 0&&m(O,I)?O:(T=R,A=I)}var E=!1,T,A,M=f===void 0?null:f;return[function(){return S(u())},M===null?void 0:function(){return S(M())}]},[u,f,p,m]);var w=o(c,y[0],y[1]);return s(function(){b.hasValue=!0,b.value=w},[w]),l(w),w},eA}T2e();const _2e=k.createContext({editor:null});_2e.Consumer;const rY=k.createContext({onDragStart:void 0}),oY=()=>k.useContext(rY),A2e=se.forwardRef((e,t)=>{const{onDragStart:n}=oY(),r=e.as||"div";return se.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function i8(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function s8(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.forward_ref)"||e.$$typeof.description==="react.forward_ref"))}function M2e(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.memo)"||e.$$typeof.description==="react.memo"))}function N2e(e){if(i8(e)||s8(e))return!0;if(M2e(e)){const t=e.type;if(t)return i8(t)||s8(t)}return!1}function R2e(){try{if(k.version)return parseInt(k.version.split(".")[0],10)>=19}catch{}return!1}class I2e{constructor(t,{editor:n,props:r={},as:o="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?Zr.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var t;const n=this.component,r=this.props,o=this.editor,i=R2e(),s=N2e(n),a={...r};a.ref&&!(i||s)&&delete a.ref,!a.ref&&(i||s)&&(a.ref=l=>{this.ref=l}),this.reactElement=se.createElement(n,{...a}),(t=o?.contentComponent)===null||t===void 0||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const n=this.editor;(t=n?.contentComponent)===null||t===void 0||t.removeRenderer(this.id)}updateAttributes(t){Object.keys(t).forEach(n=>{this.element.setAttribute(n,t[n])})}}class O2e extends Dge{constructor(t,n,r){if(super(t,n,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const o=this.dom.querySelector("[data-node-view-content]");if(!o)return;o.appendChild(this.contentDOMElement)}}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode(),ref:k.createRef()};if(!this.component.displayName){const c=u=>u.charAt(0).toUpperCase()+u.substring(1);this.component.displayName=c(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&(c.hasAttribute("data-node-view-wrapper")&&c.removeAttribute("data-node-view-wrapper"),c.appendChild(this.contentDOMElement))}},i=this.component,s=k.memo(c=>se.createElement(rY.Provider,{value:o},k.createElement(i,c)));s.displayName="ReactNodeView";let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new I2e(s,{editor:this.editor,props:t,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!(!((t=this.renderer.element.firstElementChild)===null||t===void 0)&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:t,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(t<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,n,r){const o=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,s=this.decorations,a=this.innerDecorations;return this.node=t,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:s,newNode:t,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:t,decorations:n,innerDecorations:r})})}return t===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=t,this.decorations=n,this.innerDecorations=r,o({node:t,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=Hw(this.node,n);t=this.options.attrs({node:this.node,HTMLAttributes:r})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}}function P2e(e,t){return n=>n.editor.contentComponent?new O2e(e,n,t):{}}const iY=k.createContext(void 0);function ol(e){return k.useContext(iY)}function tt(e){const t=ol();if(!(t!=null&&t.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return t.editor}function c3(e,t,n){const r=ol();t||(t=r?.editor),k.useEffect(()=>{if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onSelectionChange(e,n)},[e,t,n])}function D2e(e,t){const n=tt();t=t||n;const[r,o]=k.useState(()=>{if(e)return t.getSelectionBoundingBox()}),i=k.useCallback(()=>{if(!e)return;const s=t.getSelectionBoundingBox();o(s)},[t,e]);return c3(i,t,!0),k.useEffect(()=>{o(e?t.getSelectionBoundingBox():void 0)},[e,t]),r}function $2e(e){return e.getBoundingClientRect!==void 0}function lu(e,t,n,r){const{refs:o,update:i,context:s,floatingStyles:a,isPositioned:l}=kh({open:e,...r}),{isMounted:c,styles:u}=l3(s),f=typeof r?.canDismiss=="object"?r.canDismiss:{enabled:r?.canDismiss},p=eY(s,f),{getReferenceProps:m,getFloatingProps:y}=a3([p]);return k.useEffect(()=>{i()},[t,i]),k.useEffect(()=>{t!==null&&(t instanceof HTMLElement||$2e(t)?o.setReference(t):o.setReference({getBoundingClientRect:()=>t}))},[t,o]),k.useMemo(()=>({isMounted:c,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...u,...a,zIndex:n},getFloatingProps:y,getReferenceProps:m,isPositioned:l}),[l,a,c,o.setFloating,o.setReference,u,n,y,m])}function cu(e){const[t,n]=k.useState();return k.useEffect(()=>e(r=>{n({...r})}),[e]),t}const sY=k.createContext(void 0);function Qe(){return k.useContext(sY)}const FC=(e={},t=[])=>k.useMemo(()=>{const n=dCe.create(e);return window&&(window.ProseMirror=n._tiptapEditor),n},t);function Ct(){return ol().editor.dictionary}function u3(e,t){const n=ol();t||(t=n?.editor),k.useEffect(()=>{if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onChange(e)},[e,t])}const d3=e=>{const[t,n]=k.useState(!1),[r,o]=k.useState(e.editor.isEmpty),i=Qe();u3(()=>{o(e.editor.isEmpty)},e.editor);const s=k.useCallback(()=>{n(!0)},[]),a=k.useCallback(()=>{n(!1)},[]);return k.useEffect(()=>{e.editable&&e.autoFocus&&e.editor.focus()},[e.autoFocus,e.editable,e.editor]),v.jsxs(v.Fragment,{children:[v.jsx(i.Comments.Editor,{autoFocus:e.autoFocus,className:"bn-comment-editor",editor:e.editor,onFocus:s,onBlur:a,editable:e.editable}),e.actions&&v.jsx("div",{className:"bn-comment-actions-wrapper",children:v.jsx(e.actions,{isFocused:t,isEmpty:r})})]})},j2e=rc(Os(B4.paragraph.implementation.node.config),{}),{textColor:Npt,backgroundColor:Rpt,...L2e}=F4,f3=H4.create({blockSpecs:{paragraph:j2e},styleSpecs:L2e});function z2e(){const e=tt();if(!e.comments)throw new Error("Comments plugin not found");const t=e.comments,n=Qe(),r=Ct(),o=FC({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:f3});return v.jsx(n.Comments.Card,{className:"bn-thread",children:v.jsx(d3,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:i})=>v.jsx(n.Generic.Toolbar.Root,{className:Rn("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:v.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:async()=>{await t.createThread({initialComment:{body:o.document}}),t.stopPendingComment()},children:"Save"})})})})}const B2e=e=>{const t=tt();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=t.comments;k.useEffect(()=>{const u=n.onUpdate(f=>t.setForceSelectionVisible(f.pendingComment));return()=>u()},[n,t]);const r=cu(n.onUpdate.bind(n)),o=D2e(r?.pendingComment),{isMounted:i,ref:s,style:a,getFloatingProps:l}=lu(r?.pendingComment||!1,o||null,5e3,{placement:"bottom",middleware:[Zi(10),au(),As()],onOpenChange:u=>{u||(n.stopPendingComment(),t.focus())},...e.floatingOptions});if(!i||!r)return null;const c=e.floatingComposer||z2e;return v.jsx("div",{ref:s,style:a,...l(),children:v.jsx(c,{})})};var aY={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a8=se.createContext&&se.createContext(aY),F2e=["attr","size","title"];function V2e(e,t){if(e==null)return{};var n=H2e(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function H2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jS.apply(this,arguments)}function l8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function LS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l8(Object(n),!0).forEach(function(r){U2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U2e(e,t,n){return t=G2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G2e(e){var t=q2e(e,"string");return typeof t=="symbol"?t:t+""}function q2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lY(e){return e&&e.map((t,n)=>se.createElement(t.tag,LS({key:n},t.attr),lY(t.child)))}function ot(e){return t=>se.createElement(Z2e,jS({attr:LS({},e.attr)},t),lY(e.child))}function Z2e(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=V2e(e,F2e),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),se.createElement("svg",jS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:LS(LS({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&se.createElement("title",null,i),e.children)};return a8!==void 0?se.createElement(a8.Consumer,null,n=>t(n)):t(aY)}function W2e(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function cY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(e)}function K2e(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(e)}function Y2e(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}function h3(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function J2e(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)}function X2e(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}function Q2e(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)}function eTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)}function tTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)}function nTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}function c8(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function zS(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function BS(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function FS(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function uY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(e)}function dY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function fY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(e)}function rTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function oTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function u8(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function iTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)}function sTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function hY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function pY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function mY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function gY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function aTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(e)}function lTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(e)}function yY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(e)}function cTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)}function uTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)}function p3(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function dTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)}function fTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)}function bY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function hTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function pTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function vY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(e)}function mTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(e)}function xY(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function gTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function yTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function bTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function vTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function xTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function wTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function STe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(e)}function kTe(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)}function d8(e){return ot({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(e)}let tA;async function CTe(){return tA||(tA=(async()=>{const[e,t]=await Promise.all([Ne(()=>import("./module-RjUF93sV.js"),[]),Ne(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in e?e.default:e,r="default"in t?t.default:t;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),tA)}function ETe(e){const t=k.useRef(null),n=k.useRef(null);return n.current&&n.current.update(e),k.useEffect(()=>((async()=>{const{emojiMart:r}=await CTe();n.current=new r.Picker({...e,ref:t})})(),()=>{n.current=null}),[]),se.createElement("div",{ref:t})}const f8=e=>{const[t,n]=k.useState(!1),r=Qe(),o=ol();return v.jsxs(r.Generic.Popover.Root,{opened:t,children:[v.jsx(r.Generic.Popover.Trigger,{children:v.jsx("div",{onClick:i=>{i.preventDefault(),i.stopPropagation(),n(!t)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.children})}),v.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:v.jsx(ETe,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:i=>{e.onEmojiSelect(i),n(!1)},theme:o?.colorSchemePreference})})]})};function TTe(e,t){return m3(e,[t]).get(t)}function m3(e,t){const n=e.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=k.useCallback(()=>{const a=new Map;for(const l of t){const c=r.getUser(l);c&&a.set(l,c)}return a},[r,t]),i=k.useMemo(()=>({current:o()}),[o]),s=k.useCallback(a=>{const l=r.subscribe(c=>{i.current=o(),a()});return r.loadUsers(t),l},[r,o,t,i]);return k.useSyncExternalStore(s,()=>i.current)}const _Te=e=>{const t=Qe(),n=Ct(),r=tt();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=e.comment.reactions.find(l=>l.emoji===e.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[i,s]=k.useState([]),a=m3(r,i);return v.jsx(t.Generic.Badge.Root,{className:Rn("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(e.comment,o.emoji),onClick:()=>e.onReactionSelect(o.emoji),onMouseEnter:()=>s(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},o.emoji)},ATe=({comment:e,thread:t,showResolveButton:n})=>{const r=Ct(),o=FC({initialContent:e.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:f3},[e.body]),i=Qe(),[s,a]=k.useState(!1),l=tt();if(!l.comments)throw new Error("Comments plugin not found");const c=l.comments.threadStore,u=k.useCallback(()=>{a(!0)},[]),f=k.useCallback(()=>{o.replaceBlocks(o.document,e.body),a(!1)},[o,e.body]),p=k.useCallback(async I=>{await c.updateComment({commentId:e.id,comment:{body:o.document},threadId:t.id}),a(!1)},[e,t.id,o,c]),m=k.useCallback(async()=>{await c.deleteComment({commentId:e.id,threadId:t.id})},[e,t.id,c]),y=k.useCallback(async I=>{c.auth.canAddReaction(e,I)?await c.addReaction({threadId:t.id,commentId:e.id,emoji:I}):c.auth.canDeleteReaction(e,I)&&await c.deleteReaction({threadId:t.id,commentId:e.id,emoji:I})},[c,e,t.id]),b=k.useCallback(async()=>{await c.resolveThread({threadId:t.id})},[t.id,c]),w=k.useCallback(async()=>{await c.unresolveThread({threadId:t.id})},[t.id,c]),S=TTe(l,e.userId);if(!e.body)return null;let E;const T=c.auth.canAddReaction(e),A=c.auth.canDeleteComment(e),M=c.auth.canUpdateComment(e),R=n&&(t.resolved?c.auth.canUnresolveThread(t):c.auth.canResolveThread(t));s||(E=v.jsxs(i.Generic.Toolbar.Root,{className:Rn("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[T&&v.jsx(f8,{onEmojiSelect:I=>y(I.native),children:v.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:v.jsx(d8,{size:16})},"add-reaction")}),R&&(t.resolved?v.jsx(i.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:w,children:v.jsx(W2e,{size:16})},"reopen"):v.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:b,children:v.jsx(yTe,{size:16})},"resolve")),(A||M)&&v.jsxs(i.Generic.Menu.Root,{position:"bottom-start",children:[v.jsx(i.Generic.Menu.Trigger,{children:v.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:v.jsx(STe,{size:16})},"more-actions")}),v.jsxs(i.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[M&&v.jsx(i.Generic.Menu.Item,{icon:v.jsx(K2e,{}),onClick:u,children:r.comments.actions.edit_comment},"edit-comment"),A&&v.jsx(i.Generic.Menu.Item,{icon:v.jsx(vTe,{}),onClick:m,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const O=e.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!e.body)throw new Error("soft deletes are not yet supported");return v.jsx(i.Comments.Comment,{authorInfo:S??"loading",timeString:O,edited:e.updatedAt.getTime()!==e.createdAt.getTime(),showActions:"hover",actions:E,className:"bn-thread-comment",children:v.jsx(d3,{autoFocus:s,editor:o,editable:s,actions:e.reactions.length>0||s?({isEmpty:I})=>v.jsxs(v.Fragment,{children:[e.reactions.length>0&&!s&&v.jsxs(i.Generic.Badge.Group,{className:Rn("bn-badge-group","bn-comment-reactions"),children:[e.reactions.map(L=>v.jsx(_Te,{comment:e,emoji:L.emoji,onReactionSelect:y},L.emoji)),v.jsx(f8,{onEmojiSelect:L=>y(L.native),children:v.jsx(i.Generic.Badge.Root,{className:Rn("bn-badge","bn-comment-add-reaction"),text:"+",icon:v.jsx(d8,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),s&&v.jsxs(i.Generic.Toolbar.Root,{variant:"action-toolbar",className:Rn("bn-action-toolbar","bn-comment-actions"),children:[v.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.save_button_text,variant:"compact",onClick:p,isDisabled:I,children:r.comments.save_button_text}),v.jsx(i.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:r.comments.cancel_button_text,variant:"compact",onClick:f,children:r.comments.cancel_button_text})]})]}):void 0})})},MTe=({thread:e,maxCommentsBeforeCollapse:t})=>{const n=Qe(),r=Ct(),o=tt(),i=m3(o,e.resolvedBy?[e.resolvedBy]:[]),s=e.comments.map((a,l)=>v.jsx(ATe,{thread:e,comment:a,showResolveButton:l===0},a.id));if(e.resolved&&e.resolvedUpdatedAt&&e.resolvedBy){if(!i.get(e.resolvedBy))throw new Error(`User ${e.resolvedBy} resolved thread ${e.id}, but their data could not be found.`);const a=e.comments.findLastIndex(l=>e.resolvedUpdatedAt.getTime()>l.createdAt.getTime())+1;s.splice(a,0,v.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:e.resolvedBy&&i.get(e.resolvedBy)||"loading",timeString:e.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:v.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return t&&s.length>t&&s.splice(1,s.length-2,v.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(e.comments.length-2)},"expand-prompt")),s},wY=({thread:e,selected:t,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:i,tabIndex:s})=>{const a=Qe(),l=Ct(),c=tt().comments;if(!c)throw new Error("Comments plugin not found");const u=FC({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:f3}),f=k.useCallback(async()=>{await c.threadStore.addComment({comment:{body:u.document},threadId:e.id}),u.removeBlocks(u.document)},[c,u,e.id]);return v.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:i,selected:t,tabIndex:s,children:[v.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:v.jsx(MTe,{thread:e,maxCommentsBeforeCollapse:t?void 0:r||5})}),t&&v.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:v.jsx(d3,{autoFocus:!1,editable:!0,editor:u,actions:({isEmpty:p})=>p?null:v.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Rn("bn-action-toolbar","bn-comment-actions"),children:v.jsx(a.Generic.Toolbar.Button,{mainTooltip:l.comments.save_button_text,variant:"compact",isDisabled:p,onClick:f,children:l.comments.save_button_text})})})})]})};function NTe(e){const t=e.comments;if(!t)throw new Error("Comments plugin not found");const n=t.threadStore,r=k.useRef(void 0);r.current||(r.current=n.getThreads());const o=k.useCallback(i=>n.subscribe(s=>{r.current=s,i()}),[n]);return k.useSyncExternalStore(o,()=>r.current)}const RTe=e=>{const t=tt();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=cu(t.comments.onUpdate.bind(t.comments)),{isMounted:r,ref:o,style:i,getFloatingProps:s,setReference:a}=lu(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[Zi(10),au(),As()],onOpenChange:f=>{var p;f||((p=t.comments)==null||p.selectThread(void 0),t.focus())},...e.floatingOptions}),l=k.useCallback(()=>{var f;if(!(n!=null&&n.selectedThreadId))return;const p=(f=t.domElement)==null?void 0:f.querySelector(`[data-bn-thread-id="${n?.selectedThreadId}"]`);p&&a(p)},[a,t,n?.selectedThreadId]);k.useEffect(()=>{if(n!=null&&n.selectedThreadId)return t.onChange(()=>{l()})},[t,l,n?.selectedThreadId]),k.useLayoutEffect(l,[l]);const c=NTe(t);if(!r||!n||!n.selectedThreadId)return null;const u=e.floatingThread||wY;return v.jsx("div",{ref:o,style:i,...s(),children:v.jsx(u,{thread:c.get(n.selectedThreadId),selected:!0})})},ITe=e=>{const t=Qe(),n=Ct(),{block:r}=e,o=tt(),[i,s]=k.useState(""),a=k.useCallback(u=>{s(u.currentTarget.value)},[]),l=k.useCallback(u=>{u.key==="Enter"&&(u.preventDefault(),o.updateBlock(r,{props:{name:dz(i),url:i}}))},[o,r,i]),c=k.useCallback(()=>{o.updateBlock(r,{props:{name:dz(i),url:i}})},[o,r,i]);return v.jsxs(t.FilePanel.TabPanel,{className:"bn-tab-panel",children:[v.jsx(t.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:i,onChange:a,onKeyDown:l,"data-test":"embed-input"}),v.jsx(t.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},OTe=e=>{var t;const n=Qe(),r=Ct(),{block:o,setLoading:i}=e,s=tt(),[a,l]=k.useState(!1);k.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const c=k.useCallback(p=>{if(p===null)return;async function m(y){if(i(!0),s.uploadFile!==void 0)try{let b=await s.uploadFile(y,o.id);typeof b=="string"&&(b={props:{name:y.name,url:b}}),s.updateBlock(o,b)}catch{l(!0)}finally{i(!1)}}m(p)},[o,s,i]),u=s.schema.blockSchema[o.type],f=u.isFileBlock&&(t=u.fileBlockAccept)!=null&&t.length?u.fileBlockAccept.join(","):"*/*";return v.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[v.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:f,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),a&&v.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},SY=e=>{const t=Qe(),n=Ct(),r=tt(),[o,i]=k.useState(!1),s=e.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:v.jsx(OTe,{block:e.block,setLoading:i})}]:[],{name:n.file_panel.embed.title,tabPanel:v.jsx(ITe,{block:e.block})}],[a,l]=k.useState(e.defaultOpenTab||s[0].name);return v.jsx(t.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:s,loading:o})},PTe=e=>{const t=tt();if(!t.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=cu(t.filePanel.onUpdate.bind(t.filePanel)),{isMounted:r,ref:o,style:i,getFloatingProps:s}=lu(n?.show||!1,n?.referencePos||null,5e3,{placement:"bottom",middleware:[Zi(10),As()],onOpenChange:f=>{f||(t.filePanel.closeMenu(),t.focus())},...e.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...c}=n,u=e.filePanel||SY;return v.jsx("div",{ref:o,style:i,...s(),children:v.jsx(u,{...c})})};function DTe(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Pd(e,t){u3(e,t),c3(e,t)}function g3(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Wi(e){const t=ol();if(e||(e=t?.editor),!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=e,[r,o]=k.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]}),i=k.useCallback(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},[n]);return Pd(i,n),r}const $Te={bold:tTe,italic:iTe,underline:dTe,strike:cTe,code:Y2e};function jTe(e,t){return e in t.schema.styleSchema&&t.schema.styleSchema[e].type===e&&t.schema.styleSchema[e].propSchema==="boolean"}const cx=e=>{const t=Ct(),n=Qe(),r=tt(),o=jTe(e.basicTextStyle,r),i=Wi(r),[s,a]=k.useState(e.basicTextStyle in r.getActiveStyles());Pd(()=>{o&&a(e.basicTextStyle in r.getActiveStyles())},r);const l=u=>{if(r.focus(),!!o){if(r.schema.styleSchema[u].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[u]:!0})}};if(!k.useMemo(()=>o?!!i.find(u=>u.content!==void 0):!1,[o,i])||!r.isEditable)return null;const c=$Te[e.basicTextStyle];return v.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:()=>l(e.basicTextStyle),isSelected:s,label:t.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:t.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:ys(t.formatting_toolbar[e.basicTextStyle].secondary_tooltip,t.generic.ctrl_shortcut),icon:v.jsx(c,{})})},hR=e=>{const t=e.textColor||"default",n=e.backgroundColor||"default",r=e.size||16,o=k.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return v.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":t,style:o,children:"A"})},h8=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],VC=e=>{const t=Qe(),n=Ct();return v.jsxs(v.Fragment,{children:[v.jsx(()=>e.text?v.jsxs(v.Fragment,{children:[v.jsx(t.Generic.Menu.Label,{children:n.color_picker.text_title}),h8.map(r=>v.jsx(t.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.text.setColor(r)},"data-test":"text-color-"+r,icon:v.jsx(hR,{textColor:r,size:e.iconSize}),checked:e.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),v.jsx(()=>e.background?v.jsxs(v.Fragment,{children:[v.jsx(t.Generic.Menu.Label,{children:n.color_picker.background_title}),h8.map(r=>v.jsx(t.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.background.setColor(r)},"data-test":"background-color-"+r,icon:v.jsx(hR,{backgroundColor:r,size:e.iconSize}),checked:e.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function p8(e,t){return`${e}Color`in t.schema.styleSchema&&t.schema.styleSchema[`${e}Color`].type===`${e}Color`&&t.schema.styleSchema[`${e}Color`].propSchema==="string"}const LTe=()=>{const e=Qe(),t=Ct(),n=tt(),r=p8("text",n),o=p8("background",n),i=Wi(n),[s,a]=k.useState(r&&n.getActiveStyles().textColor||"default"),[l,c]=k.useState(o&&n.getActiveStyles().backgroundColor||"default");Pd(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&c(n.getActiveStyles().backgroundColor||"default")},n);const u=k.useCallback(p=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");p==="default"?n.removeStyles({textColor:p}):n.addStyles({textColor:p}),setTimeout(()=>{n.focus()})},[n,r]),f=k.useCallback(p=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");p==="default"?n.removeStyles({backgroundColor:p}):n.addStyles({backgroundColor:p}),setTimeout(()=>{n.focus()})},[o,n]);return!k.useMemo(()=>{if(!r&&!o)return!1;for(const p of i)if(p.content!==void 0)return!0;return!1},[o,i,r])||!n.isEditable?null:v.jsxs(e.Generic.Menu.Root,{children:[v.jsx(e.Generic.Menu.Trigger,{children:v.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:t.formatting_toolbar.colors.tooltip,mainTooltip:t.formatting_toolbar.colors.tooltip,icon:v.jsx(hR,{textColor:s,backgroundColor:l,size:20})})}),v.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:v.jsx(VC,{text:r?{color:s,setColor:u}:void 0,background:o?{color:l,setColor:f}:void 0})})]})},m8=e=>{for(const t of kK)if(e.startsWith(t))return e;return`${CK}://${e}`},kY=e=>{const t=Qe(),n=Ct(),{url:r,text:o,editLink:i,showTextField:s}=e,[a,l]=k.useState(r),[c,u]=k.useState(o);k.useEffect(()=>{l(r),u(o)},[o,r]);const f=k.useCallback(b=>{b.key==="Enter"&&(b.preventDefault(),i(m8(a),c))},[i,a,c]),p=k.useCallback(b=>l(b.currentTarget.value),[]),m=k.useCallback(b=>u(b.currentTarget.value),[]),y=k.useCallback(()=>i(m8(a),c),[i,a,c]);return v.jsxs(t.Generic.Form.Root,{children:[v.jsx(t.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:v.jsx(hY,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:f,onChange:p,onSubmit:y}),s!==!1&&v.jsx(t.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:v.jsx(p3,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:f,onChange:m,onSubmit:y})]})};function zTe(e){return"link"in e.schema.inlineContentSchema&&e.schema.inlineContentSchema.link==="link"}const BTe=()=>{var e;const t=tt(),n=Qe(),r=Ct(),o=zTe(t),i=Wi(t),[s,a]=k.useState(!1),[l,c]=k.useState(t.getSelectedLinkUrl()||""),[u,f]=k.useState(t.getSelectedText());Pd(()=>{f(t.getSelectedText()||""),c(t.getSelectedLinkUrl()||"")},t),k.useEffect(()=>{var y;const b=w=>{(w.ctrlKey||w.metaKey)&&w.key==="k"&&(a(!0),w.preventDefault())};return(y=t.prosemirrorView)==null||y.dom.addEventListener("keydown",b),()=>{var w;(w=t.prosemirrorView)==null||w.dom.removeEventListener("keydown",b)}},[(e=t.prosemirrorView)==null?void 0:e.dom]);const p=k.useCallback(y=>{t.createLink(y),t.focus()},[t]),m=t.transact(y=>KN(y.selection));return!k.useMemo(()=>{if(!o)return!1;for(const y of i)if(y.content===void 0)return!1;return!m},[o,i,m])||!("link"in t.schema.inlineContentSchema)||!t.isEditable?null:v.jsxs(n.Generic.Popover.Root,{opened:s,children:[v.jsx(n.Generic.Popover.Trigger,{children:v.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:ys(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:v.jsx(hY,{}),onClick:()=>a(!0)})}),v.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:v.jsx(kY,{url:l,text:u,editLink:p,showTextField:!1})})]})},FTe=()=>{const e=Ct(),t=Qe(),n=tt(),[r,o]=k.useState(),i=Wi(n),s=k.useMemo(()=>{if(i.length!==1)return;const c=i[0];if(ev(c,n))return o(c.props.caption),c},[n,i]),a=k.useCallback(c=>{s&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(s,{props:{caption:r}}))},[r,n,s]),l=k.useCallback(c=>o(c.currentTarget.value),[]);return!s||tv(s,n)||!n.isEditable?null:v.jsxs(t.Generic.Popover.Root,{children:[v.jsx(t.Generic.Popover.Trigger,{children:v.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:v.jsx(u8,{}),isSelected:s.props.caption!==""})}),v.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:v.jsx(t.Generic.Form.Root,{children:v.jsx(t.Generic.Form.TextInput,{name:"file-caption",icon:v.jsx(u8,{}),value:r||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},VTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=Wi(n),o=k.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(ev(s,n))return s},[n,r]),i=k.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||tv(o,n)||!n.isEditable?null:v.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[o.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[o.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:v.jsx(bTe,{}),onClick:i})},HTe=()=>{const e=Ct(),t=Qe(),n=tt(),[r,o]=k.useState(),i=Wi(n),s=k.useMemo(()=>{if(i.length!==1)return;const c=i[0];if(ev(c,n))return o(c.props.name),c},[n,i]),a=k.useCallback(c=>{s&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(s,{props:{name:r}}))},[r,n,s]),l=k.useCallback(c=>o(c.currentTarget.value),[]);return!s||tv(s,n)||!n.isEditable?null:v.jsxs(t.Generic.Popover.Root,{children:[v.jsx(t.Generic.Popover.Trigger,{children:v.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:v.jsx(c8,{})})}),v.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:v.jsx(t.Generic.Form.Root,{children:v.jsx(t.Generic.Form.TextInput,{name:"file-name",icon:v.jsx(c8,{}),value:r||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[s.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},UTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=Wi(n),[o,i]=k.useState(!1);k.useEffect(()=>{i(!1)},[r]);const s=r.length===1?r[0]:void 0;return s===void 0||!ev(s,n)||!n.isEditable?null:v.jsxs(t.Generic.Popover.Root,{opened:o,position:"bottom",children:[v.jsx(t.Generic.Popover.Trigger,{children:v.jsx(t.FormattingToolbar.Button,{className:"bn-button",onClick:()=>i(!o),isSelected:o,mainTooltip:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:v.jsx(pTe,{})})}),v.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:v.jsx(SY,{block:s})})]})},GTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=Wi(n),[o,i]=k.useState(()=>n.canNestBlock());Pd(()=>{i(n.canNestBlock())},n);const s=k.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!k.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:v.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!o,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:ys(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:v.jsx(oTe,{})})},qTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=Wi(n),[o,i]=k.useState(()=>n.canUnnestBlock());Pd(()=>{i(n.canUnnestBlock())},n);const s=k.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!k.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:v.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!o,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:ys(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:v.jsx(rTe,{})})},ZTe=e=>[{name:e.slash_menu.paragraph.title,type:"paragraph",icon:p3,isSelected:t=>t.type==="paragraph"},{name:e.slash_menu.heading.title,type:"heading",props:{level:1},icon:zS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===1},{name:e.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:BS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===2},{name:e.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:FS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===3},{name:e.slash_menu.heading_4.title,type:"heading",props:{level:4},icon:uY,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===4},{name:e.slash_menu.heading_5.title,type:"heading",props:{level:5},icon:dY,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===5},{name:e.slash_menu.heading_6.title,type:"heading",props:{level:6},icon:fY,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===6},{name:e.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:zS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===1&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:BS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===2&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:FS,isSelected:t=>t.type==="heading"&&"level"in t.props&&t.props.level===3&&"isToggleable"in t.props&&t.props.isToggleable},{name:e.slash_menu.quote.title,type:"quote",icon:yY,isSelected:t=>t.type==="quote"},{name:e.slash_menu.toggle_list.title,type:"toggleListItem",icon:vY,isSelected:t=>t.type==="toggleListItem"},{name:e.slash_menu.bullet_list.title,type:"bulletListItem",icon:gY,isSelected:t=>t.type==="bulletListItem"},{name:e.slash_menu.numbered_list.title,type:"numberedListItem",icon:mY,isSelected:t=>t.type==="numberedListItem"},{name:e.slash_menu.check_list.title,type:"checkListItem",icon:pY,isSelected:t=>t.type==="checkListItem"}],WTe=e=>{const t=Qe(),n=Ct(),r=tt(),o=Wi(r),[i,s]=k.useState(r.getTextCursorPosition().block),a=k.useMemo(()=>(e.items||ZTe(n)).filter(u=>u.type in r.schema.blockSchema),[r,n,e.items]),l=k.useMemo(()=>a.find(u=>u.type===i.type)!==void 0,[i.type,a]),c=k.useMemo(()=>{const u=f=>{r.focus(),r.transact(()=>{for(const p of o)r.updateBlock(p,{type:f.type,props:f.props})})};return a.map(f=>{const p=f.icon;return{text:f.name,icon:v.jsx(p,{size:16}),onClick:()=>u(f),isSelected:f.isSelected(i)}})},[i,a,r,o]);return Pd(()=>{s(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:v.jsx(t.FormattingToolbar.Select,{className:"bn-select",items:c})},KTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=k.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?v.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:v.jsx(cY,{}),onClick:r}):null},YTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=k.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:v.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:v.jsx(cY,{}),onClick:r})};function pR(e,t){try{const n=new URL(e,t);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const JTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=Wi(n),o=k.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(ev(s,n))return s},[n,r]),i=k.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(s=>window.open(pR(s,window.location.href))):window.open(pR(o.props.url,window.location.href)))},[n,o]);return!o||tv(o,n)?null:v.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[o.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[o.type]||e.formatting_toolbar.file_download.tooltip.file,icon:v.jsx(xTe,{}),onClick:i})},XTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=Wi(n),o=k.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(iSe(s,n))return s},[n,r]),i=k.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||tv(o,n)||!n.isEditable?null:v.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:v.jsx(hTe,{}),isSelected:o.props.showPreview,onClick:i})},QTe=()=>{const e=Ct(),t=Qe(),n=tt(),r=Wi(n),o=k.useMemo(()=>{var s;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(s=n.tableHandles)==null?void 0:s.getMergeDirection(a)},[n,r]),i=k.useCallback(()=>{var s;(s=n.tableHandles)==null||s.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:v.jsx(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:e.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?v.jsx(aTe,{}):v.jsx(lTe,{}),onClick:i})},e_e={left:Q2e,center:J2e,right:eTe,justify:X2e},nA=e=>{const t=Qe(),n=Ct(),r=tt(),o=Wi(r),i=k.useMemo(()=>{var l;const c=o[0];if(WN("textAlignment",c,r))return c.props.textAlignment;if(c.type==="table"){const u=(l=r.tableHandles)==null?void 0:l.getCellSelection();if(!u)return;const f=u.cells.map(({row:m,col:y})=>vd(c.content.rows[m].cells[y]).props.textAlignment),p=f[0];if(f.every(m=>m===p))return p}},[r,o]),s=k.useCallback(l=>{var c;r.focus();for(const u of o)if(Fp("textAlignment",u.type,r))r.updateBlock(u,{props:{textAlignment:l}});else if(u.type==="table"){const f=(c=r.tableHandles)==null?void 0:c.getCellSelection();if(!f)continue;const p=u.content.rows.map(m=>({...m,cells:m.cells.map(y=>vd(y))}));f.cells.forEach(({row:m,col:y})=>{p[m].cells[y].props.textAlignment=l}),r.updateBlock(u,{type:"table",content:{...u.content,type:"tableContent",rows:p}}),r.setTextCursorPosition(u)}},[r,o]);if(!k.useMemo(()=>!!o.find(l=>"textAlignment"in l.props||l.type==="table"&&l.children),[o])||!r.isEditable)return null;const a=e_e[e.textAlignment];return v.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)}`,onClick:()=>s(e.textAlignment),isSelected:i===e.textAlignment,label:n.formatting_toolbar[`align_${e.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${e.textAlignment}`].tooltip,icon:v.jsx(a,{})})},y3=e=>[v.jsx(WTe,{items:e},"blockTypeSelect"),v.jsx(QTe,{},"tableCellMergeButton"),v.jsx(FTe,{},"fileCaptionButton"),v.jsx(UTe,{},"replaceFileButton"),v.jsx(HTe,{},"fileRenameButton"),v.jsx(VTe,{},"fileDeleteButton"),v.jsx(JTe,{},"fileDownloadButton"),v.jsx(XTe,{},"filePreviewButton"),v.jsx(cx,{basicTextStyle:"bold"},"boldStyleButton"),v.jsx(cx,{basicTextStyle:"italic"},"italicStyleButton"),v.jsx(cx,{basicTextStyle:"underline"},"underlineStyleButton"),v.jsx(cx,{basicTextStyle:"strike"},"strikeStyleButton"),v.jsx(nA,{textAlignment:"left"},"textAlignLeftButton"),v.jsx(nA,{textAlignment:"center"},"textAlignCenterButton"),v.jsx(nA,{textAlignment:"right"},"textAlignRightButton"),v.jsx(LTe,{},"colorStyleButton"),v.jsx(GTe,{},"nestBlockButton"),v.jsx(qTe,{},"unnestBlockButton"),v.jsx(BTe,{},"createLinkButton"),v.jsx(KTe,{},"addCommentButton"),v.jsx(YTe,{},"addTiptapCommentButton")],b3=e=>{const t=Qe();return v.jsx(t.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||y3(e.blockTypeSelectItems)})},g8=e=>{switch(e){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},v3=e=>{const t=k.useRef(null),n=tt(),[r,o]=k.useState(()=>{const p=n.getTextCursorPosition().block;return"textAlignment"in p.props?g8(p.props.textAlignment):"top-start"});Pd(()=>{const p=n.getTextCursorPosition().block;"textAlignment"in p.props?o(g8(p.props.textAlignment)):o("top-start")},n);const i=cu(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:s,ref:a,style:l,getFloatingProps:c}=lu(i?.show||!1,i?.referencePos||null,3e3,{placement:r,middleware:[Zi(10),au(),As()],onOpenChange:(p,m)=>{p||(n.formattingToolbar.closeMenu(),n.focus())},canDismiss:{enabled:!0,escapeKey:!0,outsidePress:p=>{var m;const y=(m=n._tiptapEditor)==null?void 0:m.view;return!y||!p.target?!1:!DTe(p,y.dom.parentElement)}},...e.floatingOptions}),u=k.useMemo(()=>g3([t,a]),[t,a]);if(!s||!i)return null;if(!i.show&&t.current)return v.jsx("div",{ref:u,style:l,dangerouslySetInnerHTML:{__html:t.current.innerHTML}});const f=e.formattingToolbar||b3;return v.jsx("div",{ref:u,style:l,...c(),children:v.jsx(f,{})})},t_e=e=>{const t=Qe(),n=Ct();return v.jsx(t.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:e.deleteLink,icon:v.jsx(sTe,{})})},n_e=e=>{const t=Qe(),n=Ct();return v.jsxs(t.Generic.Popover.Root,{children:[v.jsx(t.Generic.Popover.Trigger,{children:v.jsx(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),v.jsx(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:v.jsx(kY,{...e})})]})},r_e=e=>{const t=Qe(),n=Ct();return v.jsx(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(pR(e.url,window.location.href),"_blank")},icon:v.jsx(wTe,{})})},o_e=e=>{const t=Qe();return e.children?v.jsx(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:e.children}):v.jsxs(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[v.jsx(n_e,{url:e.url,text:e.text,editLink:e.editLink}),v.jsx(r_e,{url:e.url}),v.jsx(t_e,{deleteLink:e.deleteLink})]})},i_e=e=>{const t=tt(),n={deleteLink:t.linkToolbar.deleteLink,editLink:t.linkToolbar.editLink,startHideTimer:t.linkToolbar.startHideTimer,stopHideTimer:t.linkToolbar.stopHideTimer},r=cu(t.linkToolbar.onUpdate.bind(t.linkToolbar)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=lu(r?.show||!1,r?.referencePos||null,4e3,{placement:"top-start",middleware:[Zi(10),As()],onOpenChange:p=>{p||(t.linkToolbar.closeMenu(),t.focus())},...e.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...u}=r,f=e.linkToolbar||o_e;return v.jsx("div",{ref:i,style:s,...a(),children:v.jsx(f,{...u,...n})})};function s_e(e){return ot({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}const a_e=e=>{const t=Qe(),n=Ct(),r=tt(),o=k.useCallback(()=>{const i=e.block.content;if(i!==void 0&&Array.isArray(i)&&i.length===0)r.setTextCursorPosition(e.block),r.openSuggestionMenu("/");else{const s=r.insertBlocks([{type:"paragraph"}],e.block,"after")[0];r.setTextCursorPosition(s),r.openSuggestionMenu("/")}},[r,e.block]);return v.jsx(t.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:v.jsx(s_e,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function CY(e){return ot({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function l_e(e){return ot({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(e)}const c_e=e=>{const t=Qe(),n=tt();return!Fp("textColor",e.block.type,n)&&!Fp("backgroundColor",e.block.type,n)?null:v.jsxs(t.Generic.Menu.Root,{position:"right",sub:!0,children:[v.jsx(t.Generic.Menu.Trigger,{sub:!0,children:v.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),v.jsx(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:v.jsx(VC,{iconSize:18,text:Fp("textColor",e.block.type,n)&&WN("textColor",e.block,n)?{color:e.block.props.textColor,setColor:r=>n.updateBlock(e.block,{type:e.block.type,props:{textColor:r}})}:void 0,background:Fp("backgroundColor",e.block.type,n)&&WN("backgroundColor",e.block,n)?{color:e.block.props.backgroundColor,setColor:r=>n.updateBlock(e.block,{props:{backgroundColor:r}})}:void 0})})]})},u_e=e=>{const t=Qe(),n=tt();return v.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([e.block]),children:e.children})},d_e=e=>{const t=Qe(),n=tt();if(e.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!e.block.content.headerRows;return v.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(e.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:e.children})},f_e=e=>{const t=Qe(),n=tt();if(e.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!e.block.content.headerCols;return v.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(e.block,{type:"table",content:{...e.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:e.children})},h_e=e=>{const t=Qe(),n=Ct();return v.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||v.jsxs(v.Fragment,{children:[v.jsx(u_e,{...e,children:n.drag_handle.delete_menuitem}),v.jsx(c_e,{...e,children:n.drag_handle.colors_menuitem}),v.jsx(d_e,{...e,children:n.drag_handle.header_row_menuitem}),v.jsx(f_e,{...e,children:n.drag_handle.header_column_menuitem})]})})},p_e=e=>{const t=Qe(),n=Ct(),r=e.dragHandleMenu||h_e;return v.jsxs(t.Generic.Menu.Root,{onOpenChange:o=>{o?e.freezeMenu():e.unfreezeMenu()},position:"left",children:[v.jsx(t.Generic.Menu.Trigger,{children:v.jsx(t.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>e.blockDragStart(o,e.block),onDragEnd:e.blockDragEnd,className:"bn-button",icon:v.jsx(CY,{size:24,"data-test":"dragHandle"})})}),v.jsx(r,{block:e.block,children:e.children})]})},m_e=e=>{const t=Qe(),n=k.useMemo(()=>{const r={"data-block-type":e.block.type};return e.block.type==="heading"&&(r["data-level"]=e.block.props.level.toString()),e.editor.schema.blockSchema[e.block.type].isFileBlock&&(e.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[e.block,e.editor.schema.blockSchema]);return v.jsx(t.SideMenu.Root,{className:"bn-side-menu",...n,children:e.children||v.jsxs(v.Fragment,{children:[v.jsx(a_e,{...e}),v.jsx(p_e,{...e})]})})},g_e=e=>{const t=tt(),n={blockDragStart:t.sideMenu.blockDragStart,blockDragEnd:t.sideMenu.blockDragEnd,freezeMenu:t.sideMenu.freezeMenu,unfreezeMenu:t.sideMenu.unfreezeMenu},r=cu(t.sideMenu.onUpdate.bind(t.sideMenu)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=lu(r?.show||!1,r?.referencePos||null,1e3,{placement:"left-start",...e.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...u}=r,f=e.sideMenu||m_e;return v.jsx("div",{ref:i,style:s,...a(),children:v.jsx(f,{...u,...n,editor:t})})};async function y_e(e,t){return(await hCe(e,t)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function b_e(e){const t=Qe(),n=Ct(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s,columns:a}=e,l=o==="loading-initial"||o==="loading"?v.jsx(t.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,c=k.useMemo(()=>{const u=[];for(let f=0;f<r.length;f++){const p=r[f];u.push(v.jsx(t.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:p,id:`bn-grid-suggestion-menu-item-${f}`,isSelected:f===i,onClick:()=>s?.(p)},p.id))}return u},[t,r,s,i]);return v.jsxs(t.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&e.loadingState==="loaded"&&v.jsx(t.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function EY(e,t,n,r=3){const o=k.useRef(0);k.useEffect(()=>{t!==void 0&&(e.length>0?o.current=t.length:t.length-o.current>r&&n())},[n,r,e.length,t])}function TY(e,t){const[n,r]=k.useState([]),[o,i]=k.useState(!1),s=k.useRef(void 0),a=k.useRef(void 0);return k.useEffect(()=>{const l=e;s.current=e,i(!0),t(e).then(c=>{s.current===l&&(r(c),i(!1),a.current=l)})},[e,t]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function v_e(e,t,n,r,o){const[i,s]=k.useState(0),a=r!==void 0&&r>1;return k.useEffect(()=>{var l;const c=u=>(u.key==="ArrowLeft"&&(u.preventDefault(),n.length&&s((i-1+n.length)%n.length)),u.key==="ArrowRight"&&(u.preventDefault(),n.length&&s((i+1+n.length)%n.length)),u.key==="ArrowUp"?(u.preventDefault(),n.length&&s((i-r+n.length)%n.length),!0):u.key==="ArrowDown"?(u.preventDefault(),n.length&&s((i+r)%n.length),!0):u.key==="Enter"&&!u.isComposing?(u.stopPropagation(),u.preventDefault(),n.length&&o?.(n[i]),!0):!1);return(l=e.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var u;(u=e.domElement)==null||u.removeEventListener("keydown",c,!0)}},[e.domElement,n,i,o,r,a]),k.useEffect(()=>{s(0)},[t]),{selectedIndex:n.length===0?void 0:i}}function x_e(e){const t=ol().setContentEditableProps,n=tt(),{getItems:r,gridSuggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:l,columns:c}=e,u=k.useCallback(b=>{a(),s(),l?.(b)},[l,a,s]),{items:f,usedQuery:p,loadingState:m}=TY(i,r);EY(f,p,a);const{selectedIndex:y}=v_e(n,i,f,c,u);return k.useEffect(()=>(t(b=>({...b,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(b=>({...b,"aria-expanded":!1,"aria-controls":void 0}))}),[t]),k.useEffect(()=>(t(b=>({...b,"aria-activedescendant":y?"bn-suggestion-menu-item-"+y:void 0})),()=>{t(b=>({...b,"aria-activedescendant":void 0}))}),[t,y]),v.jsx(o,{items:f,onItemClick:u,loadingState:m,selectedIndex:y,columns:c})}function w_e(e){const t=tt(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:i,onItemClick:s,getItems:a,floatingOptions:l}=e,c=k.useMemo(()=>s||(E=>{E.onItemClick(t)}),[t,s]),u=k.useMemo(()=>a||(async E=>await y_e(t,E)),[t,a]),f={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},p=k.useCallback(E=>t.suggestionMenus.onUpdate(n,E),[t.suggestionMenus,n]),m=cu(p),{isMounted:y,ref:b,style:w,getFloatingProps:S}=lu(m?.show||!1,m?.referencePos||null,2e3,{placement:"bottom-start",middleware:[Zi(10),As(),Sh({apply({availableHeight:E,elements:T}){Object.assign(T.floating.style,{maxHeight:`${E-10}px`})}})],onOpenChange(E){E||t.suggestionMenus.closeMenu()},...l});return!y||!m||!(m!=null&&m.ignoreQueryLength)&&i&&(m.query.startsWith(" ")||m.query.length<i)?null:v.jsx("div",{ref:b,style:w,...S(),children:v.jsx(x_e,{query:m.query,closeMenu:f.closeMenu,clearQuery:f.clearQuery,getItems:u,columns:o,gridSuggestionMenuComponent:r||b_e,onItemClick:c})})}function S_e(e){const t=Qe(),n=Ct(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s}=e,a=o==="loading-initial"||o==="loading"?v.jsx(t.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=k.useMemo(()=>{let c;const u=[];for(let f=0;f<r.length;f++){const p=r[f];p.group!==c&&(c=p.group,u.push(v.jsx(t.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),u.push(v.jsx(t.SuggestionMenu.Item,{className:Rn("bn-suggestion-menu-item",p.size==="small"?"bn-suggestion-menu-item-small":""),item:p,id:`bn-suggestion-menu-item-${f}`,isSelected:f===i,onClick:()=>s?.(p)},p.title))}return u},[t,r,s,i]);return v.jsxs(t.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(e.loadingState==="loading"||e.loadingState==="loaded")&&v.jsx(t.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function _Y(e,t){const[n,r]=k.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),e.length&&r((n-1+e.length)%e.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),e.length&&r((n+1)%e.length),!0;const i=k_e(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!i?(o.preventDefault(),o.stopPropagation(),e.length&&t?.(e[n]),!0):!1}}}function k_e(e){return e.nativeEvent!==void 0}function C_e(e,t,n,r,o){const{selectedIndex:i,setSelectedIndex:s,handler:a}=_Y(n,r);return k.useEffect(()=>{var l;return(l=e.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var c;(c=e.domElement)==null||c.removeEventListener("keydown",a,!0)}},[e.domElement,n,i,r,o,a]),k.useEffect(()=>{s(0)},[t,s]),{selectedIndex:n.length===0?void 0:i}}function E_e(e){const t=ol().setContentEditableProps,n=tt(),{getItems:r,suggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:l}=e,c=k.useCallback(y=>{a(),s(),l?.(y)},[l,a,s]),{items:u,usedQuery:f,loadingState:p}=TY(i,r);EY(u,f,a);const{selectedIndex:m}=C_e(n,i,u,c);return k.useEffect(()=>(t(y=>({...y,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(y=>({...y,"aria-expanded":!1,"aria-controls":void 0}))}),[t]),k.useEffect(()=>(t(y=>({...y,"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})),()=>{t(y=>({...y,"aria-activedescendant":void 0}))}),[t,m]),v.jsx(o,{items:u,onItemClick:c,loadingState:p,selectedIndex:m})}const T_e={heading:zS,heading_2:BS,heading_3:FS,heading_4:uY,heading_5:dY,heading_6:fY,toggle_heading:zS,toggle_heading_2:BS,toggle_heading_3:FS,quote:yY,toggle_list:vY,numbered_list:mY,bullet_list:gY,check_list:pY,paragraph:p3,table:uTe,image:bY,video:fTe,audio:xY,file:h3,emoji:kTe,code_block:nTe};function AY(e){return aSe(e).map(t=>{const n=T_e[t.key];return{...t,icon:v.jsx(n,{size:18})}})}function MY(e){const t=tt(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:i,getItems:s,floatingOptions:a}=e,l=k.useMemo(()=>i||(S=>{S.onItemClick(t)}),[t,i]),c=k.useMemo(()=>s||(async S=>V4(AY(t),S)),[t,s]),u={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},f=k.useCallback(S=>t.suggestionMenus.onUpdate(n,S),[t.suggestionMenus,n]),p=cu(f),{isMounted:m,ref:y,style:b,getFloatingProps:w}=lu(p?.show||!1,p?.referencePos||null,2e3,{placement:"bottom-start",middleware:[Zi(10),As({mainAxis:!0,crossAxis:!1}),au(),Sh({apply({availableHeight:S,elements:E}){Object.assign(E.floating.style,{maxHeight:`${S-10}px`})}})],onOpenChange(S){S||t.suggestionMenus.closeMenu()},...a});return!m||!p||!(p!=null&&p.ignoreQueryLength)&&o&&(p.query.startsWith(" ")||p.query.length<o)?null:v.jsx("div",{ref:y,style:b,...w(),children:v.jsx(E_e,{query:p.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:c,suggestionMenuComponent:r||S_e,onItemClick:l})})}const __e=(e,t=.3)=>{const n=Math.floor(e)+t,r=Math.ceil(e)-t;return e>=n&&e<=r?Math.round(e):e<n?Math.floor(e):Math.ceil(e)},A_e=e=>{const t=Qe(),n=k.useRef(!1),[r,o]=k.useState(),i=k.useCallback(a=>{e.onMouseDown(),o({originalContent:e.block.content,originalCroppedContent:{rows:e.editor.tableHandles.cropEmptyRowsOrColumns(e.block,e.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:e.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[e]),s=k.useCallback(()=>{n.current||e.editor.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:e.orientation==="addOrRemoveColumns"?e.editor.tableHandles.addRowsOrColumns(e.block,"columns",1):e.editor.tableHandles.addRowsOrColumns(e.block,"rows",1)}})},[e.block,e.orientation,e.editor]);return k.useEffect(()=>{const a=l=>{var c,u;if(!r)throw new Error("editingState is undefined");n.current=!0;const f=(e.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,p=e.orientation==="addOrRemoveColumns"?((c=r.originalCroppedContent.rows[0])==null?void 0:c.cells.length)??0:r.originalCroppedContent.rows.length,m=e.orientation==="addOrRemoveColumns"?((u=r.originalContent.rows[0])==null?void 0:u.cells.length)??0:r.originalContent.rows.length,y=e.orientation==="addOrRemoveColumns"?e.block.content.rows[0].cells.length:e.block.content.rows.length,b=m+__e(f/(e.orientation==="addOrRemoveColumns"?z4:Hwe),.3);b>=p&&b>0&&b!==y&&(e.editor.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:e.orientation==="addOrRemoveColumns"?e.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",b-p):e.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",b-p)}}),e.block.content&&e.editor.setTextCursorPosition(e.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,e.block,e.editor,e.orientation]),k.useEffect(()=>{const a=e.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,e.onMouseUp]),e.editor.isEditable?v.jsx(t.TableHandle.ExtendButton,{className:Rn("bn-extend-button",e.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:s,onMouseDown:i,children:e.children||v.jsx(gTe,{size:18,"data-test":"extendButton"})}):null},y8=e=>{const t=Qe(),n=Ct(),r=tt().tableHandles;return r?v.jsx(t.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(e.index,e.orientation==="row"?{orientation:"row",side:e.side}:{orientation:"column",side:e.side})},children:n.table_handle[`add_${e.side}_menuitem`]}):null},M_e=e=>{const t=Qe(),n=Ct(),r=tt().tableHandles;return r?v.jsx(t.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(e.index,e.orientation)},children:e.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},N_e=e=>{const t=Qe(),n=Ct(),r=tt(),o=r.tableHandles,i=k.useMemo(()=>!o||!e.block?[]:e.orientation==="row"?o.getCellsAtRowHandle(e.block,e.index):o.getCellsAtColumnHandle(e.block,e.index),[e.block,e.index,e.orientation,o]),s=(l,c)=>{const u=e.block.content.rows.map(f=>({...f,cells:f.cells.map(p=>vd(p))}));i.forEach(({row:f,col:p})=>{c==="text"?u[f].cells[p].props.textColor=l:u[f].cells[p].props.backgroundColor=l}),r.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:u}}),r.setTextCursorPosition(e.block)};if(!i||!i[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=vd(i[0].cell);return v.jsxs(t.Generic.Menu.Root,{position:"right",sub:!0,children:[v.jsx(t.Generic.Menu.Trigger,{sub:!0,children:v.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||n.drag_handle.colors_menuitem})}),v.jsx(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:v.jsx(VC,{iconSize:18,text:r.settings.tables.cellTextColor?{color:i.every(({cell:l})=>xd(l)&&l.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:l=>{s(l,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:i.every(({cell:l})=>xd(l)&&l.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:l=>s(l,"background")}:void 0})})]})},R_e=e=>{const t=Qe(),n=Ct(),r=tt();if(!r.tableHandles||e.index!==0||e.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!e.block.content.headerRows;return v.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(e.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},I_e=e=>{const t=Qe(),n=Ct(),r=tt();if(!r.tableHandles||e.index!==0||e.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!e.block.content.headerCols;return v.jsx(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(e.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},O_e=e=>{const t=Qe();return v.jsx(t.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||v.jsxs(v.Fragment,{children:[v.jsx(M_e,{orientation:e.orientation,block:e.block,index:e.index}),v.jsx(y8,{orientation:e.orientation,block:e.block,index:e.index,side:e.orientation==="row"?"above":"left"}),v.jsx(y8,{orientation:e.orientation,block:e.block,index:e.index,side:e.orientation==="row"?"below":"right"}),v.jsx(R_e,{orientation:e.orientation,block:e.block,index:e.index}),v.jsx(I_e,{orientation:e.orientation,block:e.block,index:e.index}),v.jsx(N_e,{orientation:e.orientation,block:e.block,index:e.index})]})})},P_e=e=>{const t=Qe(),[n,r]=k.useState(!1),o=e.tableHandleMenu||O_e,i=k.useMemo(()=>{const s=e.editor.tableHandles;return!s||!e.block||e.block.type!=="table"?!1:e.orientation==="column"?s.getCellsAtColumnHandle(e.block,e.index).every(({cell:a})=>uh(a)===1):s.getCellsAtRowHandle(e.block,e.index).every(({cell:a})=>Y0(a)===1)},[e.block,e.editor.tableHandles,e.index,e.orientation]);return v.jsxs(t.Generic.Menu.Root,{onOpenChange:s=>{s?(e.freezeHandles(),e.hideOtherSide()):(e.unfreezeHandles(),e.showOtherSide(),e.editor.focus())},position:"right",children:[v.jsx(t.Generic.Menu.Trigger,{children:v.jsx(t.TableHandle.Root,{className:Rn("bn-table-handle",n?"bn-table-handle-dragging":"",i?"":"bn-table-handle-not-draggable"),draggable:i,onDragStart:s=>{r(!0),e.dragStart(s)},onDragEnd:()=>{e.dragEnd(),r(!1)},style:e.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:e.children||v.jsx(CY,{size:24,"data-test":"tableHandle"})})}),Zr.createPortal(v.jsx(o,{orientation:e.orientation,block:e.block,index:e.index}),e.menuContainer)]})};function b8(e,t,n){const{refs:r,update:o,context:i,floatingStyles:s}=kh({open:t,placement:e==="addOrRemoveColumns"?"right":"bottom",middleware:[Sh({apply({rects:c,elements:u}){Object.assign(u.floating.style,e==="addOrRemoveColumns"?{height:`${c.reference.height}px`}:{width:`${c.reference.width}px`})}})]}),{isMounted:a,styles:l}=l3(i);return k.useEffect(()=>{o()},[n,o]),k.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[e,n,r]),k.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...s}}),[s,a,r.setFloating,l])}function D_e(e,t,n){const r=b8("addOrRemoveRows",t,n),o=b8("addOrRemoveColumns",e,n);return k.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function $_e(e,t,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(t.x,n.mousePos,t.width,0):new DOMRect(t.x,e.y,t.width,e.height)}function j_e(e,t,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,t.y,0,t.height):new DOMRect(e.x,t.y,e.width,t.height)}function L_e(e){return new DOMRect(e.x,e.y,e.width,0)}function rA(e,t,n,r,o){const{refs:i,update:s,context:a,floatingStyles:l}=kh({open:t,placement:e==="row"?"left":e==="col"?"top":"bottom-end",middleware:[Zi(e==="row"?-10:e==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:c,styles:u}=l3(a);return k.useEffect(()=>{s()},[n,r,s]),k.useEffect(()=>{n===null||r===null||o&&e==="cell"||i.setReference({getBoundingClientRect:()=>(e==="row"?$_e:e==="col"?j_e:L_e)(n,r,o)})},[o,e,n,r,i]),k.useMemo(()=>({isMounted:c,ref:i.setFloating,style:{display:"flex",...u,...l}}),[l,c,i.setFloating,u])}function z_e(e,t,n,r){const o=rA("row",e,t,n,r),i=rA("col",e,t,n,r),s=rA("cell",e,t,n,r);return k.useMemo(()=>({rowHandle:o,colHandle:i,cellHandle:s}),[i,o,s])}const B_e=e=>{var t,n;const r=Qe(),o=Ct(),i=tt(),s=(l,c)=>{const u=e.block.content.rows.map(f=>({...f,cells:f.cells.map(p=>vd(p))}));c==="text"?u[e.rowIndex].cells[e.colIndex].props.textColor=l:u[e.rowIndex].cells[e.colIndex].props.backgroundColor=l,i.updateBlock(e.block,{type:"table",content:{...e.block.content,rows:u}}),i.setTextCursorPosition(e.block)},a=(n=(t=e.block.content.rows[e.rowIndex])==null?void 0:t.cells)==null?void 0:n[e.colIndex];return!a||i.settings.tables.cellTextColor===!1&&i.settings.tables.cellBackgroundColor===!1?null:v.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[v.jsx(r.Generic.Menu.Trigger,{sub:!0,children:v.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||o.drag_handle.colors_menuitem})}),v.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:v.jsx(VC,{iconSize:18,text:i.settings.tables.cellTextColor?{color:xd(a)?a.props.textColor:"default",setColor:l=>s(l,"text")}:void 0,background:i.settings.tables.cellBackgroundColor?{color:xd(a)?a.props.backgroundColor:"default",setColor:l=>s(l,"background")}:void 0})})]})},F_e=e=>{var t,n;const r=Qe(),o=Ct(),i=tt(),s=(n=(t=e.block.content.rows[e.rowIndex])==null?void 0:t.cells)==null?void 0:n[e.colIndex];return!s||!xd(s)||Y0(s)===1&&uh(s)===1||!i.settings.tables.splitCells?null:v.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=i.tableHandles)==null||a.splitCell({row:e.rowIndex,col:e.colIndex})},children:o.table_handle.split_cell_menuitem})},V_e=e=>{const t=Qe();return v.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||v.jsxs(v.Fragment,{children:[v.jsx(F_e,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),v.jsx(B_e,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex})]})})},H_e=e=>{const t=Qe(),n=e.tableCellMenu||V_e;return!e.editor.settings.tables.splitCells&&!e.editor.settings.tables.cellBackgroundColor&&!e.editor.settings.tables.cellTextColor?null:v.jsxs(t.Generic.Menu.Root,{onOpenChange:r=>{r?e.freezeHandles():(e.unfreezeHandles(),e.editor.focus())},position:"right",children:[v.jsx(t.Generic.Menu.Trigger,{children:v.jsx(t.Generic.Menu.Button,{className:"bn-table-cell-handle",children:e.children||v.jsx(l_e,{size:12,"data-test":"tableCellHandle"})})}),Zr.createPortal(v.jsx(n,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),e.menuContainer)]})},U_e=e=>{var t,n;const r=tt(),[o,i]=k.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const s={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=s,c=k.useCallback(()=>{a(),M(!0),T(!0)},[a]),u=k.useCallback(()=>{l(),M(!1),T(!1)},[l]),f=cu(r.tableHandles.onUpdate.bind(r.tableHandles)),p=k.useMemo(()=>{var L,$;return f!=null&&f.draggingState?{draggedCellOrientation:(L=f?.draggingState)==null?void 0:L.draggedCellOrientation,mousePos:($=f?.draggingState)==null?void 0:$.mousePos}:void 0},[f?.draggingState,(t=f?.draggingState)==null?void 0:t.draggedCellOrientation,(n=f?.draggingState)==null?void 0:n.mousePos]),{rowHandle:m,colHandle:y,cellHandle:b}=z_e(f?.show||!1,f?.referencePosCell||null,f?.referencePosTable||null,p),{addOrRemoveColumnsButton:w,addOrRemoveRowsButton:S}=D_e(f?.showAddOrRemoveColumnsButton||!1,f?.showAddOrRemoveRowsButton||!1,f?.referencePosTable||null),[E,T]=k.useState(!1),[A,M]=k.useState(!1);if(!f)return null;const R=e.tableHandle||P_e,O=e.extendButton||A_e,I=e.tableCellHandle||H_e;return v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:i}),v.jsxs(a2e,{root:f.widgetContainer,children:[!E&&o&&m.isMounted&&f.rowIndex!==void 0&&v.jsx("div",{ref:m.ref,style:m.style,children:v.jsx(R,{editor:r,orientation:"row",showOtherSide:()=>M(!1),hideOtherSide:()=>M(!0),index:f.rowIndex,block:f.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),!A&&o&&y.isMounted&&f.colIndex!==void 0&&v.jsx("div",{ref:y.ref,style:y.style,children:v.jsx(R,{editor:r,orientation:"column",showOtherSide:()=>T(!1),hideOtherSide:()=>T(!0),index:f.colIndex,block:f.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),o&&b.isMounted&&f.colIndex!==void 0&&f.rowIndex!==void 0&&v.jsx("div",{ref:b.ref,style:b.style,children:v.jsx(I,{editor:r,block:f.block,rowIndex:f.rowIndex,colIndex:f.colIndex,menuContainer:o,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles})}),v.jsx("div",{ref:S.ref,style:S.style,children:v.jsx(O,{editor:r,orientation:"addOrRemoveRows",block:f.block,onMouseDown:c,onMouseUp:u})}),v.jsx("div",{ref:w.ref,style:w.style,children:v.jsx(O,{editor:r,orientation:"addOrRemoveColumns",block:f.block,onMouseDown:c,onMouseUp:u})})]})]})};function G_e(e){const t=tt();if(!t)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return v.jsxs(v.Fragment,{children:[e.formattingToolbar!==!1&&v.jsx(v3,{}),e.linkToolbar!==!1&&v.jsx(i_e,{}),e.slashMenu!==!1&&v.jsx(MY,{triggerCharacter:"/"}),e.emojiPicker!==!1&&v.jsx(w_e,{triggerCharacter:":",columns:10,minQueryLength:2}),e.sideMenu!==!1&&v.jsx(g_e,{}),t.filePanel&&e.filePanel!==!1&&v.jsx(PTe,{}),t.tableHandles&&e.tableHandles!==!1&&v.jsx(U_e,{}),t.comments&&e.comments!==!1&&v.jsxs(v.Fragment,{children:[v.jsx(B2e,{}),v.jsx(RTe,{})]})]})}const NY=()=>{const e=k.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: dark)")},[]),t=k.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: light)")},[]),n=e?.matches,r=t?.matches,[o,i]=k.useState(n?"dark":r?"light":"no-preference");return k.useEffect(()=>{i(n?"dark":r?"light":"no-preference")},[n,r]),k.useEffect(()=>{if(typeof e?.addEventListener=="function"){const s=({matches:l})=>l&&i("dark"),a=({matches:l})=>l&&i("light");return e?.addEventListener("change",s),t?.addEventListener("change",a),()=>{e?.removeEventListener("change",s),t?.removeEventListener("change",a)}}else{const s=()=>i(e.matches?"dark":t.matches?"light":"no-preference");return e?.addEventListener("change",s),t?.addEventListener("change",s),()=>{e?.removeEventListener("change",s),t?.removeEventListener("change",s)}}},[e,t]),o},RY=k.createContext(void 0);function q_e(){return k.useContext(RY)}function Z_e(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Zr.createPortal(r.reactElement,r.element,n)},e.forEach(o=>o())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(o=>o())}}}const W_e=({contentComponent:e})=>{const t=k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return v.jsx(v.Fragment,{children:Object.values(t)})},K_e=k.forwardRef((e,t)=>{const[n,r]=k.useState();return k.useImperativeHandle(t,()=>(o,i)=>{Zr.flushSync(()=>{r({node:o,container:i})}),r(void 0)},[]),v.jsx(v.Fragment,{children:n&&Zr.createPortal(n.node,n.container)})}),v8=()=>{};function Y_e(e,t){const{editor:n,className:r,theme:o,children:i,editable:s,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:u,slashMenu:f,emojiPicker:p,sideMenu:m,filePanel:y,tableHandles:b,comments:w,autoFocus:S,renderEditor:E=!n.headless,...T}=e,[A,M]=k.useState(),R=ol(),O=NY(),I=R?.colorSchemePreference||O,L=o||(I==="dark"?"dark":"light");u3(l||v8,n),c3(a||v8,n),k.useEffect(()=>{n.isEditable=s!==!1},[s,n]);const $=k.useCallback(V=>{n.elementRenderer=V},[n]),B=k.useMemo(()=>({...R,editor:n,setContentEditableProps:M}),[R,n]),G=k.useMemo(()=>({editorProps:{autoFocus:S,contentEditableProps:A},defaultUIProps:{formattingToolbar:c,linkToolbar:u,slashMenu:f,emojiPicker:p,sideMenu:m,filePanel:y,tableHandles:b,comments:w}}),[S,A,c,u,f,p,m,y,b,w]);return v.jsx(iY.Provider,{value:B,children:v.jsxs(RY.Provider,{value:G,children:[v.jsx(K_e,{ref:$}),v.jsx(J_e,{className:r,renderEditor:E,editorColorScheme:L,ref:t,...T,children:i})]})})}const J_e=se.forwardRef(({className:e,renderEditor:t,editorColorScheme:n,children:r,...o},i)=>v.jsx("div",{className:Rn("bn-container",n,e),"data-color-scheme":n,...o,ref:i,children:t?v.jsx(Q_e,{children:r}):r})),X_e=se.forwardRef(Y_e),Q_e=e=>{const t=q_e(),n=tt(),r=k.useMemo(()=>Z_e(),[]),o=k.useCallback(i=>{n.mount(i,r)},[n,r]);return v.jsxs(v.Fragment,{children:[v.jsx(W_e,{contentComponent:r}),v.jsx(eAe,{...t.editorProps,...e,mount:o}),v.jsx(G_e,{...t.defaultUIProps}),e.children]})},eAe=e=>{const{autoFocus:t,mount:n,contentEditableProps:r}=e;return v.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":t,ref:n,...r})};function x8(e,t){let n;const r=document.createElement("div");let o;if(t!=null&&t.elementRenderer)t.elementRenderer(e(l=>n=l||void 0),r);else{if(!(t!=null&&t.headless))throw new Error("elementRenderer not available, expected headless editor");o=ZU.createRoot(r),Zr.flushSync(()=>{o.render(e(l=>n=l||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n?.setAttribute("data-tmp-find","true");const i=r.cloneNode(!0),s=i.firstElementChild,a=i.querySelector("[data-tmp-find]");return a?.removeAttribute("data-tmp-find"),o?.unmount(),{dom:s,contentDOM:a||void 0}}function oA(e){var t;return v.jsx(A2e,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(e.domAttributes||{}).filter(([n])=>n!=="class")),className:Rn("bn-block-content",((t=e.domAttributes)==null?void 0:t.class)||""),"data-content-type":e.blockType,...Object.fromEntries(Object.entries(e.blockProps).filter(([n,r])=>{const o=e.propSchema[n];return!_4.includes(n)&&r!==o.default}).map(([n,r])=>[IS(n),r])),"data-file-block":e.isFileBlock===!0||void 0,children:e.children})}function HC(e,t){const n=Os({name:e.type,content:e.content==="inline"?"inline*":"",group:"blockContent",selectable:e.isSelectable??!0,isolating:!0,addAttributes(){return Yb(e.propSchema)},parseHTML(){return AW(e,t.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Ly({dom:o,contentDOM:e.content==="inline"?o:void 0},e.type,{},e.propSchema,e.isFileBlock,r)},addNodeView(){return r=>{const o=P2e(i=>{var s;const a=this.options.editor,l=AC(i.getPos,a,this.editor,e.type),c=((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},u=oY().nodeViewContentRef;if(!u)throw new Error("nodeViewContentRef is not set");const f=t.render;return v.jsx(oA,{blockType:l.type,blockProps:l.props,propSchema:e.propSchema,isFileBlock:e.isFileBlock,domAttributes:c,children:v.jsx(f,{block:l,editor:a,contentRef:p=>{u(p),p&&(p.className=Rn("bn-inline-content",p.className))}})})},{className:"bn-react-node-view-renderer"})(r);return e.isSelectable===!1&&_W(o,this.editor),o}}});return A4(e,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=t.render;return x8(l=>v.jsx(oA,{blockType:r.type,blockProps:r.props,propSchema:e.propSchema,domAttributes:s,children:v.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Rn("bn-inline-content",c.className))}})}),o)},toExternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=t.toExternalHTML||t.render;return x8(l=>v.jsx(oA,{blockType:r.type,blockProps:r.props,propSchema:e.propSchema,domAttributes:s,children:v.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Rn("bn-inline-content",c.className))}})}),o)}})}function x3(e){const t=tt(),[n,r]=k.useState("loading"),[o,i]=k.useState();if(k.useEffect(()=>{let s=!0;return(async()=>{let a="";r("loading");try{a=t.resolveFileUrl?await t.resolveFileUrl(e):e}catch{r("error");return}s&&(r("loaded"),i(a))})(),()=>{s=!1}},[t,e]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const w3=e=>v.jsxs("figure",{children:[e.children,v.jsx("figcaption",{children:e.caption})]});function tAe(e){const t=tt();k.useEffect(()=>t.onUploadEnd(e),[e,t])}function nAe(e){const t=tt();k.useEffect(()=>t.onUploadStart(e),[e,t])}function IY(e){const[t,n]=k.useState(!1);return nAe(r=>{r===e&&n(!0)}),tAe(r=>{r===e&&n(!1)}),t}const rAe=e=>{const t=Ct(),n=k.useCallback(o=>{o.preventDefault()},[]),r=k.useCallback(()=>{e.editor.transact(o=>o.setMeta(e.editor.filePanel.plugins[0],{block:e.block}))},[e.block,e.editor]);return v.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[v.jsx("div",{className:"bn-add-file-button-icon",children:e.buttonIcon||v.jsx(h3,{size:24})}),v.jsx("div",{className:"bn-add-file-button-text",children:e.buttonText||t.file_blocks.file.add_button_text})]})},oAe=e=>v.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[v.jsx("div",{className:"bn-file-icon",children:v.jsx(h3,{size:24})}),v.jsx("p",{className:"bn-file-name",children:e.block.props.name})]}),S3=e=>{const t=IY(e.block.id);return v.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style,children:t?v.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):e.block.props.url===""?v.jsx(rAe,{...e}):v.jsxs(v.Fragment,{children:[e.block.props.showPreview===!1||!e.children?v.jsx(oAe,{...e}):e.children,e.block.props.caption&&v.jsx("p",{className:"bn-file-caption",children:e.block.props.caption})]})})},UC=e=>v.jsxs("div",{children:[e.children,v.jsx("p",{children:e.caption})]}),iAe=e=>{const t=x3(e.block.props.url);return v.jsx("audio",{className:"bn-audio",src:t.loadingState==="loading"?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},sAe=e=>{if(!e.block.props.url)return v.jsx("p",{children:"Add audio"});const t=e.block.props.showPreview?v.jsx("audio",{src:e.block.props.url}):v.jsx("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?v.jsx(w3,{caption:e.block.props.caption,children:t}):v.jsx(UC,{caption:e.block.props.caption,children:t}):t},aAe=e=>v.jsx(S3,{...e,buttonText:e.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:v.jsx(xY,{size:24}),children:v.jsx(iAe,{...e})});HC(UW,{render:aAe,parse:GW,toExternalHTML:sAe});const lAe=e=>{if(!e.block.props.url)return v.jsx("p",{children:"Add file"});const t=v.jsx("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?v.jsx(UC,{caption:e.block.props.caption,children:t}):t},cAe=e=>v.jsx(S3,{...e});HC(qW,{render:cAe,parse:ZW,toExternalHTML:lAe});const OY=e=>{const[t,n]=k.useState(void 0),[r,o]=k.useState(e.block.props.previewWidth),[i,s]=k.useState(!1),a=k.useRef(null);k.useEffect(()=>{const m=b=>{var w,S;let E;e.block.props.textAlignment==="center"?t.handleUsed==="left"?E=t.initialWidth+(t.initialClientX-b.clientX)*2:E=t.initialWidth+(b.clientX-t.initialClientX)*2:t.handleUsed==="left"?E=t.initialWidth+t.initialClientX-b.clientX:E=t.initialWidth+b.clientX-t.initialClientX,o(Math.min(Math.max(E,64),((S=(w=e.editor.domElement)==null?void 0:w.firstElementChild)==null?void 0:S.clientWidth)||Number.MAX_VALUE))},y=()=>{n(void 0),e.editor.updateBlock(e.block,{props:{previewWidth:r}})};return t&&(window.addEventListener("mousemove",m),window.addEventListener("mouseup",y)),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y)}},[e,t,r]);const l=k.useCallback(()=>{e.editor.isEditable&&s(!0)},[e.editor.isEditable]),c=k.useCallback(()=>{s(!1)},[]),u=k.useCallback(m=>{m.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:m.clientX})},[]),f=k.useCallback(m=>{m.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:m.clientX})},[]),p=IY(e.block.id);return v.jsx(S3,{...e,onMouseEnter:l,onMouseLeave:c,style:e.block.props.url&&!p&&e.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:v.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[e.children,(i||t)&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:u}),v.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:f})]})]})})},uAe=e=>{const t=x3(e.block.props.url);return v.jsx("img",{className:"bn-visual-media",src:t.loadingState==="loading"?e.block.props.url:t.downloadUrl,alt:e.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},dAe=e=>{if(!e.block.props.url)return v.jsx("p",{children:"Add image"});const t=e.block.props.showPreview?v.jsx("img",{src:e.block.props.url,alt:e.block.props.name||e.block.props.caption||"BlockNote image",width:e.block.props.previewWidth}):v.jsx("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?v.jsx(w3,{caption:e.block.props.caption,children:t}):v.jsx(UC,{caption:e.block.props.caption,children:t}):t},fAe=e=>v.jsx(OY,{...e,buttonText:e.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:v.jsx(bY,{size:24}),children:v.jsx(uAe,{...e})});HC(JW,{render:fAe,parse:XW,toExternalHTML:dAe});const hAe=e=>{const t=x3(e.block.props.url);return v.jsx("video",{className:"bn-visual-media",src:t.loadingState==="loading"?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},pAe=e=>{if(!e.block.props.url)return v.jsx("p",{children:"Add video"});const t=e.block.props.showPreview?v.jsx("video",{src:e.block.props.url}):v.jsx("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?v.jsx(w3,{caption:e.block.props.caption,children:t}):v.jsx(UC,{caption:e.block.props.caption,children:t}):t},mAe=e=>v.jsx(OY,{...e,buttonText:e.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:v.jsx(mTe,{size:24}),children:v.jsx(hAe,{...e})});HC(nK,{render:mAe,parse:rK,toExternalHTML:pAe});se.memo(({thread:e,selectedThreadId:t,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const i=k.useCallback(a=>{var l;a.target.closest(".bn-action-toolbar")||(l=n.comments)==null||l.selectThread(e.id)},[n.comments,e.id]),s=k.useCallback(a=>{var l;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const c=a.target instanceof Node?a.target:null,u=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!c||!u||!u.contains(c))&&((l=n.comments)==null||l.selectThread(void 0))},[n.comments]);return v.jsx(wY,{thread:e,selected:e.id===t,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:i,onBlur:s,tabIndex:0})});function PY(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}var Pl=function(){return Pl=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pl.apply(this,arguments)};function DY(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function gAe(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var yw="right-scroll-bar-position",bw="width-before-scroll-bar",yAe="with-scroll-bars-hidden",bAe="--removed-body-scroll-bar-size";function iA(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vAe(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var xAe=typeof window<"u"?k.useLayoutEffect:k.useEffect,w8=new WeakMap;function wAe(e,t){var n=vAe(null,function(r){return e.forEach(function(o){return iA(o,r)})});return xAe(function(){var r=w8.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(a){i.has(a)||iA(a,null)}),i.forEach(function(a){o.has(a)||iA(a,s)})}w8.set(n,e)},[e]),n}function SAe(e){return e}function kAe(e,t){t===void 0&&(t=SAe);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var l=function(){var u=s;s=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return o}function CAe(e){e===void 0&&(e={});var t=kAe(null);return t.options=Pl({async:!0,ssr:!1},e),t}var $Y=function(e){var t=e.sideCar,n=DY(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,Pl({},n))};$Y.isSideCarExport=!0;function EAe(e,t){return e.useMedium(t),$Y}var jY=CAe(),sA=function(){},GC=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:sA,onWheelCapture:sA,onTouchMoveCapture:sA}),o=r[0],i=r[1],s=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,f=e.shards,p=e.sideCar,m=e.noRelative,y=e.noIsolation,b=e.inert,w=e.allowPinchZoom,S=e.as,E=S===void 0?"div":S,T=e.gapMode,A=DY(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=p,R=wAe([n,t]),O=Pl(Pl({},A),o);return k.createElement(k.Fragment,null,u&&k.createElement(M,{sideCar:jY,removeScrollBar:c,shards:f,noRelative:m,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:T}),s?k.cloneElement(k.Children.only(a),Pl(Pl({},O),{ref:R})):k.createElement(E,Pl({},O,{className:l,ref:R}),a))});GC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};GC.classNames={fullWidth:bw,zeroRight:yw};var TAe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _Ae(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=TAe();return t&&e.setAttribute("nonce",t),e}function AAe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function MAe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var NAe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=_Ae())&&(AAe(t,n),MAe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},RAe=function(){var e=NAe();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},LY=function(){var e=RAe(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},IAe={left:0,top:0,right:0,gap:0},aA=function(e){return parseInt(e||"",10)||0},OAe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[aA(n),aA(r),aA(o)]},PAe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return IAe;var t=OAe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},DAe=LY(),lm="data-scroll-locked",$Ae=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(yAe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(lm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yw,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(bw,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yw," .").concat(yw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(bw," .").concat(bw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lm,`] {
    `).concat(bAe,": ").concat(a,`px;
  }
`)},S8=function(){var e=parseInt(document.body.getAttribute(lm)||"0",10);return isFinite(e)?e:0},jAe=function(){k.useEffect(function(){return document.body.setAttribute(lm,(S8()+1).toString()),function(){var e=S8()-1;e<=0?document.body.removeAttribute(lm):document.body.setAttribute(lm,e.toString())}},[])},LAe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;jAe();var i=k.useMemo(function(){return PAe(o)},[o]);return k.createElement(DAe,{styles:$Ae(i,!t,o,n?"":"!important")})},mR=!1;if(typeof window<"u")try{var ux=Object.defineProperty({},"passive",{get:function(){return mR=!0,!0}});window.addEventListener("test",ux,ux),window.removeEventListener("test",ux,ux)}catch{mR=!1}var gp=mR?{passive:!1}:!1,zAe=function(e){return e.tagName==="TEXTAREA"},zY=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!zAe(e)&&n[t]==="visible")},BAe=function(e){return zY(e,"overflowY")},FAe=function(e){return zY(e,"overflowX")},k8=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=BY(e,r);if(o){var i=FY(e,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},VAe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},HAe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},BY=function(e,t){return e==="v"?BAe(t):FAe(t)},FY=function(e,t){return e==="v"?VAe(t):HAe(t)},UAe=function(e,t){return e==="h"&&t==="rtl"?-1:1},GAe=function(e,t,n,r,o){var i=UAe(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,l=t.contains(a),c=!1,u=s>0,f=0,p=0;do{if(!a)break;var m=FY(e,a),y=m[0],b=m[1],w=m[2],S=b-w-i*y;(y||S)&&BY(e,a)&&(f+=S,p+=y);var E=a.parentNode;a=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(f)<1||!u&&Math.abs(p)<1)&&(c=!0),c},dx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},C8=function(e){return[e.deltaX,e.deltaY]},E8=function(e){return e&&"current"in e?e.current:e},qAe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ZAe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},WAe=0,yp=[];function KAe(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),o=k.useState(WAe++)[0],i=k.useState(LY)[0],s=k.useRef(e);k.useEffect(function(){s.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var b=gAe([e.lockRef.current],(e.shards||[]).map(E8),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var S=dx(b),E=n.current,T="deltaX"in b?b.deltaX:E[0]-S[0],A="deltaY"in b?b.deltaY:E[1]-S[1],M,R=b.target,O=Math.abs(T)>Math.abs(A)?"h":"v";if("touches"in b&&O==="h"&&R.type==="range")return!1;var I=k8(O,R);if(!I)return!0;if(I?M=O:(M=O==="v"?"h":"v",I=k8(O,R)),!I)return!1;if(!r.current&&"changedTouches"in b&&(T||A)&&(r.current=M),!M)return!0;var L=r.current||M;return GAe(L,w,b,L==="h"?T:A)},[]),l=k.useCallback(function(b){var w=b;if(!(!yp.length||yp[yp.length-1]!==i)){var S="deltaY"in w?C8(w):dx(w),E=t.current.filter(function(M){return M.name===w.type&&(M.target===w.target||w.target===M.shadowParent)&&qAe(M.delta,S)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var T=(s.current.shards||[]).map(E8).filter(Boolean).filter(function(M){return M.contains(w.target)}),A=T.length>0?a(w,T[0]):!s.current.noIsolation;A&&w.cancelable&&w.preventDefault()}}},[]),c=k.useCallback(function(b,w,S,E){var T={name:b,delta:w,target:S,should:E,shadowParent:YAe(S)};t.current.push(T),setTimeout(function(){t.current=t.current.filter(function(A){return A!==T})},1)},[]),u=k.useCallback(function(b){n.current=dx(b),r.current=void 0},[]),f=k.useCallback(function(b){c(b.type,C8(b),b.target,a(b,e.lockRef.current))},[]),p=k.useCallback(function(b){c(b.type,dx(b),b.target,a(b,e.lockRef.current))},[]);k.useEffect(function(){return yp.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,gp),document.addEventListener("touchmove",l,gp),document.addEventListener("touchstart",u,gp),function(){yp=yp.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,gp),document.removeEventListener("touchmove",l,gp),document.removeEventListener("touchstart",u,gp)}},[]);var m=e.removeScrollBar,y=e.inert;return k.createElement(k.Fragment,null,y?k.createElement(i,{styles:ZAe(o)}):null,m?k.createElement(LAe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function YAe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const JAe=EAe(jY,KAe);var VY=k.forwardRef(function(e,t){return k.createElement(GC,Pl({},e,{ref:t,sideCar:JAe}))});VY.classNames=GC.classNames;function Hl(e){return Object.keys(e)}function lA(e){return e&&typeof e=="object"&&!Array.isArray(e)}function k3(e,t){const n={...e},r=t;return lA(e)&&lA(t)&&Object.keys(t).forEach(o=>{lA(r[o])&&o in e?n[o]=k3(n[o],r[o]):n[o]=r[o]}),n}function XAe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function QAe(e){return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:e.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function eMe(e){const t=QAe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function cA(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function HY(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const o=`${r/16}${e}`;return t?cA(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(i=>n(i)).join(",");if(r.includes(" "))return r.split(" ").map(i=>n(i)).join(" ");if(r.includes(e))return t?cA(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const i=`${Number(o)/16}${e}`;return t?cA(i):i}}return r}return n}const Ce=HY("rem",{shouldScale:!0}),T8=HY("em");function qC(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function UY(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function ov(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==k.Fragment:!1}function ZC(e){const t=k.createContext(null);return[({children:o,value:i})=>v.jsx(t.Provider,{value:i,children:o}),()=>{const o=k.useContext(t);if(o===null)throw new Error(e);return o}]}function C3(e=null){const t=k.createContext(e);return[({children:o,value:i})=>v.jsx(t.Provider,{value:i,children:o}),()=>k.useContext(t)]}function _8(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function VS(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function tMe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function nMe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function rMe(e,t,n){return VS(e,n)===VS(t,n)}function GY({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:i="rtl",orientation:s}){return a=>{n?.(a);const l=Array.from(VS(a.currentTarget,e)?.querySelectorAll(t)||[]).filter(y=>rMe(a.currentTarget,y,e)),c=l.findIndex(y=>a.currentTarget===y),u=nMe(c,l,r),f=tMe(c,l,r),p=i==="rtl"?f:u,m=i==="rtl"?u:f;switch(a.key){case"ArrowRight":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),o&&l[p].click());break}case"ArrowLeft":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[m].focus(),o&&l[m].click());break}case"ArrowUp":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"ArrowDown":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[u].focus(),o&&l[u].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const y=l.length-1;!l[y].disabled&&l[y].focus();break}}}}const oMe={app:100,modal:200,popover:300,overlay:400,max:9999};function iv(e){return oMe[e]}const iMe=()=>{};function sMe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||iMe:n=>{n.key==="Escape"&&(e(n),t.onTrigger?.())}}function Fn(e,t="size",n=!0){if(e!==void 0)return UY(e)?n?Ce(e):e:`var(--${t}-${e})`}function sv(e){return Fn(e,"mantine-spacing")}function oi(e){return e===void 0?"var(--mantine-radius-default)":Fn(e,"mantine-radius")}function Hi(e){return Fn(e,"mantine-font-size")}function aMe(e){return Fn(e,"mantine-line-height",!1)}function qY(e){if(e)return Fn(e,"mantine-shadow",!1)}function $l(e,t){return n=>{e?.(n),t?.(n)}}function lMe(e,t,n){return n?Array.from(VS(n,t)?.querySelectorAll(e)||[]).findIndex(r=>r===n):null}function cMe(){const[e,t]=k.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function uMe(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}const A8=["mousedown","touchstart"];function dMe(e,t,n){const r=k.useRef(null);return k.useEffect(()=>{const o=i=>{const{target:s}=i??{};if(Array.isArray(n)){const a=s?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(s)&&s.tagName!=="HTML";n.every(c=>!!c&&!i.composedPath().includes(c))&&!a&&e()}else r.current&&!r.current.contains(s)&&e()};return(t||A8).forEach(i=>document.addEventListener(i,o)),()=>{(t||A8).forEach(i=>document.removeEventListener(i,o))}},[r,e,n]),r}function fMe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function hMe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function pMe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=k.useState(n?t:hMe(e)),i=k.useRef(null);return k.useEffect(()=>{if("matchMedia"in window)return i.current=window.matchMedia(e),o(i.current.matches),fMe(i.current,s=>o(s.matches))},[e]),r}const WC=typeof document<"u"?k.useLayoutEffect:k.useEffect;function kd(e,t){const n=k.useRef(!1);k.useEffect(()=>()=>{n.current=!1},[]),k.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function mMe({opened:e,shouldReturnFocus:t=!0}){const n=k.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return kd(()=>{let o=-1;const i=s=>{s.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",i),e?n.current=document.activeElement:t&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",i)}},[e,t]),r}const gMe=/input|select|textarea|button|object/,ZY="a, input, select, textarea, button, object, [tabindex]";function yMe(e){return e.style.display==="none"}function bMe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(yMe(n))return!1;n=n.parentNode}return!0}function WY(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function gR(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(WY(e));return(gMe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&bMe(e)}function KY(e){const t=WY(e);return(Number.isNaN(t)||t>=0)&&gR(e)}function vMe(e){return Array.from(e.querySelectorAll(ZY)).filter(KY)}function xMe(e,t){const n=vMe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],o=e.getRootNode();let i=r===o.activeElement||e===o.activeElement;const s=o.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(i=n.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===s.getAttribute("name")).includes(r)),!i)return;t.preventDefault();const l=n[t.shiftKey?n.length-1:0];l&&l.focus()}function YY(e=!0){const t=k.useRef(null),n=o=>{let i=o.querySelector("[data-autofocus]");if(!i){const s=Array.from(o.querySelectorAll(ZY));i=s.find(KY)||s.find(gR)||null,!i&&gR(o)&&(i=o)}i&&i.focus({preventScroll:!0})},r=k.useCallback(o=>{e&&o!==null&&t.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),t.current=o):t.current=null)},[e]);return k.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const o=i=>{i.key==="Tab"&&t.current&&xMe(t.current,i)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e]),r}const wMe=se.useId||(()=>{});function SMe(){const e=wMe();return e?`mantine-${e.replace(/:/g,"")}`:""}function av(e){const t=SMe(),[n,r]=k.useState(t);return WC(()=>{r(uMe())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function HS(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function lv(...e){const t=new Map;return n=>{if(e.forEach(r=>{const o=HS(r,n);o&&t.set(r,o)}),t.size>0)return()=>{e.forEach(r=>{const o=t.get(r);o?o():HS(r,null)}),t.clear()}}}function uu(...e){return k.useCallback(lv(...e),e)}function ng({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[o,i]=k.useState(t!==void 0?t:n),s=(a,...l)=>{i(a),r?.(a,...l)};return e!==void 0?[e,r,!0]:[o,s,!1]}function kMe(e,t){return pMe("(prefers-reduced-motion: reduce)",e,t)}function CMe(){const[e,t]=k.useState(!1),n=k.useRef(null),r=k.useCallback(()=>t(!0),[]),o=k.useCallback(()=>t(!1),[]);return k.useEffect(()=>{const i=n.current;if(i)return i.addEventListener("mouseenter",r),i.addEventListener("mouseleave",o),()=>{i?.removeEventListener("mouseenter",r),i?.removeEventListener("mouseleave",o)}},[n.current]),{ref:n,hovered:e}}function EMe(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement?e.currentTarget.contains(e.relatedTarget):!1}function JY({onBlur:e,onFocus:t}={}){const n=k.useRef(null),[r,o]=k.useState(!1),i=k.useRef(!1),s=c=>{o(c),i.current=c},a=c=>{i.current||(s(!0),t?.(c))},l=c=>{i.current&&!EMe(c)&&(s(!1),e?.(c))};return k.useEffect(()=>{const c=n.current;if(c)return c.addEventListener("focusin",a),c.addEventListener("focusout",l),()=>{c?.removeEventListener("focusin",a),c?.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function E3(e){const t=se.version;return typeof se.version!="string"||t.startsWith("18.")?e?.ref:e?.props?.ref}function XY(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=XY(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Li(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=XY(e))&&(r&&(r+=" "),r+=t);return r}const TMe={};function _Me(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,o])=>{t[r]?t[r]=Li(t[r],o):t[r]=o})}),t}function KC({theme:e,classNames:t,props:n,stylesCtx:r}){const i=(Array.isArray(t)?t:[t]).map(s=>typeof s=="function"?s(e,n,r):s||TMe);return _Me(i)}function US({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((i,s)=>typeof s=="function"?{...i,...s(e,n,r)}:{...i,...s},{})}const QY=k.createContext(null);function Dd(){const e=k.useContext(QY);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function AMe(){return Dd().cssVariablesResolver}function MMe(){return Dd().classNamesPrefix}function T3(){return Dd().getStyleNonce}function NMe(){return Dd().withStaticClasses}function RMe(){return Dd().headless}function IMe(){return Dd().stylesTransform?.sx}function OMe(){return Dd().stylesTransform?.styles}function eJ(){return Dd().env||"default"}function PMe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function DMe(e){let t=e.replace("#","");if(t.length===3){const s=t.split("");t=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(t.length===8){const s=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:s}}const n=parseInt(t,16),r=n>>16&255,o=n>>8&255,i=n&255;return{r,g:o,b:i,a:1}}function $Me(e){const[t,n,r,o]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:o===void 0?1:o}}function jMe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,i=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*i-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),u=i-a/2;let f,p,m;return l>=0&&l<1?(f=a,p=c,m=0):l>=1&&l<2?(f=c,p=a,m=0):l>=2&&l<3?(f=0,p=a,m=c):l>=3&&l<4?(f=0,p=c,m=a):l>=4&&l<5?(f=c,p=0,m=a):(f=a,p=0,m=c),{r:Math.round((f+u)*255),g:Math.round((p+u)*255),b:Math.round((m+u)*255),a:s||1}}function _3(e){return PMe(e)?DMe(e):e.startsWith("rgb")?$Me(e):e.startsWith("hsl")?jMe(e):{r:0,g:0,b:0,a:1}}function fx(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:o,a:i}=_3(e),s=1-t,a=l=>Math.round(l*s);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${i})`}function eb(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function uA(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function LMe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function zMe(e){if(e.startsWith("oklch("))return(LMe(e)||0)/100;const{r:t,g:n,b:r}=_3(e),o=t/255,i=n/255,s=r/255,a=uA(o),l=uA(i),c=uA(s);return .2126*a+.7152*l+.0722*c}function wy(e,t=.179){return e.startsWith("var(")?!1:zMe(e)>t}function rg({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:wy(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:wy(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:wy(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,o]=e.split("."),i=o?Number(o):void 0,s=r in t.colors;if(s){const a=i!==void 0?t.colors[r][i]:t.colors[r][eb(t,n||"light")];return{color:r,value:a,shade:i,isThemeColor:s,isLight:wy(a,t.luminanceThreshold),variable:o?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:s,isLight:wy(e,t.luminanceThreshold),shade:i,variable:void 0}}function Yl(e,t){const n=rg({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function yR(e,t){const n={from:e?.from||t.defaultGradient.from,to:e?.to||t.defaultGradient.to,deg:e?.deg??t.defaultGradient.deg??0},r=Yl(n.from,t),o=Yl(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function _l(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const i=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${i}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:o}=_3(e);return`rgba(${n}, ${r}, ${o}, ${t})`}const bp=_l,BMe=({color:e,theme:t,variant:n,gradient:r,autoContrast:o})=>{const i=rg({color:e,theme:t}),s=typeof o=="boolean"?o:t.autoContrast;if(n==="filled"){const a=s&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?i.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ce(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${i.shade===9?8:i.shade+1})`,color:a,border:`${Ce(1)} solid transparent`}:{background:e,hover:fx(e,.1),color:a,border:`${Ce(1)} solid transparent`}}if(n==="light"){if(i.isThemeColor){if(i.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`};const a=t.colors[i.color][i.shade];return{background:_l(a,.1),hover:_l(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ce(1)} solid transparent`}}return{background:_l(e,.1),hover:_l(e,.12),color:e,border:`${Ce(1)} solid transparent`}}if(n==="outline")return i.isThemeColor?i.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ce(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:_l(t.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${Ce(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:_l(e,.05),color:e,border:`${Ce(1)} solid ${e}`};if(n==="subtle"){if(i.isThemeColor){if(i.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`};const a=t.colors[i.color][i.shade];return{background:"transparent",hover:_l(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ce(1)} solid transparent`}}return{background:"transparent",hover:_l(e,.12),color:e,border:`${Ce(1)} solid transparent`}}return n==="transparent"?i.isThemeColor?i.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Ce(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ce(1)} solid transparent`}:n==="white"?i.isThemeColor?i.shade===void 0?{background:"var(--mantine-color-white)",hover:fx(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ce(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:fx(t.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${Ce(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:fx(t.white,.01),color:e,border:`${Ce(1)} solid transparent`}:n==="gradient"?{background:yR(r,t),hover:yR(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ce(1)} solid var(--mantine-color-default-border)`}:{}},FMe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},M8="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",A3={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:FMe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:BMe,autoContrast:!1,luminanceThreshold:.3,fontFamily:M8,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:M8,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ce(34),lineHeight:"1.3"},h2:{fontSize:Ce(26),lineHeight:"1.35"},h3:{fontSize:Ce(22),lineHeight:"1.4"},h4:{fontSize:Ce(18),lineHeight:"1.45"},h5:{fontSize:Ce(16),lineHeight:"1.5"},h6:{fontSize:Ce(14),lineHeight:"1.5"}}},fontSizes:{xs:Ce(12),sm:Ce(14),md:Ce(16),lg:Ce(18),xl:Ce(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ce(2),sm:Ce(4),md:Ce(8),lg:Ce(16),xl:Ce(32)},spacing:{xs:Ce(10),sm:Ce(12),md:Ce(16),lg:Ce(20),xl:Ce(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), 0 ${Ce(1)} ${Ce(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(10)} ${Ce(15)} ${Ce(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ce(7)} ${Ce(7)} ${Ce(-5)}`,md:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(20)} ${Ce(25)} ${Ce(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ce(10)} ${Ce(10)} ${Ce(-5)}`,lg:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(28)} ${Ce(23)} ${Ce(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ce(12)} ${Ce(12)} ${Ce(-7)}`,xl:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(36)} ${Ce(28)} ${Ce(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ce(17)} ${Ce(17)} ${Ce(-7)}`},other:{},components:{}};function N8(e){return e==="auto"||e==="dark"||e==="light"}function VMe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return N8(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&N8(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const HMe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",R8="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function dA(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function I8(e){if(!(e.primaryColor in e.colors))throw new Error(HMe);if(typeof e.primaryShade=="object"&&(!dA(e.primaryShade.dark)||!dA(e.primaryShade.light)))throw new Error(R8);if(typeof e.primaryShade=="number"&&!dA(e.primaryShade))throw new Error(R8)}function UMe(e,t){if(!t)return I8(e),e;const n=k3(e,t);return t.fontFamily&&!t.headings?.fontFamily&&(n.headings.fontFamily=t.fontFamily),I8(n),n}const M3=k.createContext(null),GMe=()=>k.useContext(M3)||A3;function Ps(){const e=k.useContext(M3);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function tJ({theme:e,children:t,inherit:n=!0}){const r=GMe(),o=k.useMemo(()=>UMe(n?r:A3,e),[e,r,n]);return v.jsx(M3.Provider,{value:o,children:t})}tJ.displayName="@mantine/core/MantineThemeProvider";function qMe(){const e=Ps(),t=T3(),n=Hl(e.breakpoints).reduce((r,o)=>{const i=e.breakpoints[o].includes("px"),s=eMe(e.breakpoints[o]),a=i?`${s-.1}px`:T8(s-.1),l=i?`${s}px`:T8(s);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return v.jsx("style",{"data-mantine-styles":"classes",nonce:t?.(),dangerouslySetInnerHTML:{__html:n}})}function fA(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Sy(e,t){return(Array.isArray(e)?e:[e]).reduce((r,o)=>`${o}{${r}}`,t)}function ZMe(e,t){const n=fA(e.variables),r=n?Sy(t,n):"",o=fA(e.dark),i=fA(e.light),s=o?Sy(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,o):"",a=i?Sy(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,i):"";return`${r}${s}${a}`}function nJ({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&rg({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function O8(e,t){return nJ({color:e.colors[e.primaryColor][eb(e,t)],theme:e,autoContrast:null})}function hx({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:o=!0}){if(!e.colors[t])return{};if(n==="light"){const a=eb(e,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:bp(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:bp(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:bp(e.colors[t][a],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...l}:l}const i=eb(e,"dark"),s={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${i===9?8:i+1})`,[`--mantine-color-${r}-light`]:bp(e.colors[t][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:bp(e.colors[t][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:bp(e.colors[t][Math.max(i-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...s}:s}function WMe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function vp(e,t,n){Hl(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const rJ=e=>{const t=eb(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ce(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":O8(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":O8(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};vp(r.variables,e.breakpoints,"breakpoint"),vp(r.variables,e.spacing,"spacing"),vp(r.variables,e.fontSizes,"font-size"),vp(r.variables,e.lineHeights,"line-height"),vp(r.variables,e.shadows,"shadow"),vp(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((i,s)=>{r.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${e.primaryColor}-${s})`}),Hl(e.colors).forEach(i=>{const s=e.colors[i];if(WMe(s)){Object.assign(r.light,hx({theme:e,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,hx({theme:e,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((a,l)=>{r.variables[`--mantine-color-${i}-${l}`]=a}),Object.assign(r.light,hx({theme:e,color:i,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,hx({theme:e,color:i,colorScheme:"dark",withColorValues:!1}))});const o=e.headings.sizes;return Hl(o).forEach(i=>{r.variables[`--mantine-${i}-font-size`]=o[i].fontSize,r.variables[`--mantine-${i}-line-height`]=o[i].lineHeight,r.variables[`--mantine-${i}-font-weight`]=o[i].fontWeight||e.headings.fontWeight}),r};function KMe({theme:e,generator:t}){const n=rJ(e),r=t?.(e);return r?k3(n,r):n}const hA=rJ(A3);function YMe(e){const t={variables:{},light:{},dark:{}};return Hl(e.variables).forEach(n=>{hA.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Hl(e.light).forEach(n=>{hA.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Hl(e.dark).forEach(n=>{hA.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function JMe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function oJ({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ps(),r=T3(),o=AMe(),i=KMe({theme:n,generator:o}),s=e===":root"&&t,a=s?YMe(i):i,l=ZMe(a,e);return l?v.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${l}${s?"":JMe(e)}`}}):null}oJ.displayName="@mantine/CssVariables";function XMe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function xp(e,t){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=e!=="auto"?e:n?"dark":"light";t()?.setAttribute("data-mantine-color-scheme",r)}function QMe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const o=k.useRef(null),[i,s]=k.useState(()=>e.get(t)),a=r||i,l=k.useCallback(u=>{r||(xp(u,n),s(u),e.set(u))},[e.set,a,r]),c=k.useCallback(()=>{s(t),xp(t,n),e.clear()},[e.clear,t]);return k.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),WC(()=>{xp(e.get(t),n)},[]),k.useEffect(()=>{if(r)return xp(r,n),()=>{};r===void 0&&xp(i,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const u=f=>{i==="auto"&&xp(f.matches?"dark":"light",n)};return o.current?.addEventListener("change",u),()=>o.current?.removeEventListener("change",u)},[i,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function eNe({respectReducedMotion:e,getRootElement:t}){WC(()=>{e&&t()?.setAttribute("data-respect-reduced-motion","true")},[e])}XMe();function iJ({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:i=!0,withCssVariables:s=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=VMe(),defaultColorScheme:u="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:m,stylesTransform:y,env:b}){const{colorScheme:w,setColorScheme:S,clearColorScheme:E}=QMe({defaultColorScheme:u,forceColorScheme:m,manager:c,getRootElement:f});return eNe({respectReducedMotion:e?.respectReducedMotion||!1,getRootElement:f}),v.jsx(QY.Provider,{value:{colorScheme:w,setColorScheme:S,clearColorScheme:E,getRootElement:f,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:y,env:b},children:v.jsxs(tJ,{theme:e,children:[s&&v.jsx(oJ,{cssVariablesSelector:a,deduplicateCssVariables:i}),o&&v.jsx(qMe,{}),t]})})}iJ.displayName="@mantine/core/MantineProvider";function YC({classNames:e,styles:t,props:n,stylesCtx:r}){const o=Ps();return{resolvedClassNames:KC({theme:o,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:US({theme:o,styles:t,props:n,stylesCtx:r||void 0})}}const tNe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function nNe({theme:e,options:t,unstyled:n}){return Li(t?.focusable&&!n&&(e.focusClassName||tNe[e.focusRing]),t?.active&&!n&&e.activeClassName)}function rNe({selector:e,stylesCtx:t,options:n,props:r,theme:o}){return KC({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:t})[e]}function P8({selector:e,stylesCtx:t,theme:n,classNames:r,props:o}){return KC({theme:n,classNames:r,props:o,stylesCtx:t})[e]}function oNe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function iNe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function sNe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(o=>`${t}-${o}-${n}`)}function aNe({themeName:e,theme:t,selector:n,props:r,stylesCtx:o}){return e.map(i=>KC({theme:t,classNames:t.components[i]?.classNames,props:r,stylesCtx:o})?.[n])}function lNe({options:e,classes:t,selector:n,unstyled:r}){return e?.variant&&!r?t[`${n}--${e.variant}`]:void 0}function cNe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:o,classNames:i,classes:s,unstyled:a,className:l,rootSelector:c,props:u,stylesCtx:f,withStaticClasses:p,headless:m,transformedStyles:y}){return Li(nNe({theme:e,options:t,unstyled:a||m}),aNe({theme:e,themeName:n,selector:r,props:u,stylesCtx:f}),lNe({options:t,classes:s,selector:r,unstyled:a}),P8({selector:r,stylesCtx:f,theme:e,classNames:i,props:u}),P8({selector:r,stylesCtx:f,theme:e,classNames:y,props:u}),rNe({selector:r,stylesCtx:f,options:t,props:u,theme:e}),oNe({rootSelector:c,selector:r,className:l}),iNe({selector:r,classes:s,unstyled:a||m}),p&&!m&&sNe({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:t?.withStaticClass}),t?.className)}function uNe({theme:e,themeName:t,props:n,stylesCtx:r,selector:o}){return t.map(i=>US({theme:e,styles:e.components[i]?.styles,props:n,stylesCtx:r})[o]).reduce((i,s)=>({...i,...s}),{})}function bR({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...bR({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function dNe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...qC(n[r])}}),t),{})}function fNe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:o,selector:i,themeName:s,headless:a}){return dNe([a?{}:t?.(n,r,o),...s.map(l=>n.components?.[l]?.vars?.(n,r,o)),e?.(n,r,o)])?.[i]}function hNe({theme:e,themeName:t,selector:n,options:r,props:o,stylesCtx:i,rootSelector:s,styles:a,style:l,vars:c,varsResolver:u,headless:f,withStylesTransform:p}){return{...!p&&uNe({theme:e,themeName:t,props:o,stylesCtx:i,selector:n}),...!p&&US({theme:e,styles:a,props:o,stylesCtx:i})[n],...!p&&US({theme:e,styles:r?.styles,props:r?.props||o,stylesCtx:i})[n],...fNe({theme:e,props:o,stylesCtx:i,vars:c,varsResolver:u,selector:n,themeName:t,headless:f}),...s===n?bR({style:l,theme:e}):null,...bR({style:r?.style,theme:e})}}function pNe({props:e,stylesCtx:t,themeName:n}){const r=Ps(),o=OMe()?.();return{getTransformedStyles:s=>o?[...s.map(l=>o(l,{props:e,theme:r,ctx:t})),...n.map(l=>o(r.components[l]?.styles,{props:e,theme:r,ctx:t}))].filter(Boolean):[],withStylesTransform:!!o}}function Ut({name:e,classes:t,props:n,stylesCtx:r,className:o,style:i,rootSelector:s="root",unstyled:a,classNames:l,styles:c,vars:u,varsResolver:f}){const p=Ps(),m=MMe(),y=NMe(),b=RMe(),w=(Array.isArray(e)?e:[e]).filter(T=>T),{withStylesTransform:S,getTransformedStyles:E}=pNe({props:n,stylesCtx:r,themeName:w});return(T,A)=>({className:cNe({theme:p,options:A,themeName:w,selector:T,classNamesPrefix:m,classNames:l,classes:t,unstyled:a,className:o,rootSelector:s,props:n,stylesCtx:r,withStaticClasses:y,headless:b,transformedStyles:E([A?.styles,c])}),style:hNe({theme:p,themeName:w,selector:T,options:A,props:n,stylesCtx:r,rootSelector:s,styles:c,style:i,vars:u,varsResolver:f,headless:b,withStylesTransform:S})})}function mNe(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ye(e,t,n){const r=Ps(),o=r.components[e]?.defaultProps,i=typeof o=="function"?o(r):o;return{...t,...i,...qC(n)}}function pA(e){return Hl(e).reduce((t,n)=>e[n]!==void 0?`${t}${XAe(n)}:${e[n]};`:t,"").trim()}function gNe({selector:e,styles:t,media:n,container:r}){const o=t?pA(t):"",i=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${pA(a.styles)}}}`):[],s=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${pA(a.styles)}}}`):[];return`${o?`${e}{${o}}`:""}${i.join("")}${s.join("")}`.trim()}function sJ(e){const t=T3();return v.jsx("style",{"data-mantine-styles":"inline",nonce:t?.(),dangerouslySetInnerHTML:{__html:gNe(e)}})}function JC(e){const{m:t,mx:n,my:r,mt:o,mb:i,ml:s,mr:a,me:l,ms:c,p:u,px:f,py:p,pt:m,pb:y,pl:b,pr:w,pe:S,ps:E,bd:T,bg:A,c:M,opacity:R,ff:O,fz:I,fw:L,lts:$,ta:B,lh:G,fs:V,tt:W,td:K,w:F,miw:q,maw:H,h:z,mih:N,mah:U,bgsz:te,bgp:D,bgr:ce,bga:ae,pos:pe,top:ie,left:ye,bottom:Re,right:$e,inset:Be,display:je,flex:Le,hiddenFrom:Pe,visibleFrom:me,lightHidden:_e,darkHidden:xe,sx:Ie,...Ve}=e;return{styleProps:qC({m:t,mx:n,my:r,mt:o,mb:i,ml:s,mr:a,me:l,ms:c,p:u,px:f,py:p,pt:m,pb:y,pl:b,pr:w,pe:S,ps:E,bd:T,bg:A,c:M,opacity:R,ff:O,fz:I,fw:L,lts:$,ta:B,lh:G,fs:V,tt:W,td:K,w:F,miw:q,maw:H,h:z,mih:N,mah:U,bgsz:te,bgp:D,bgr:ce,bga:ae,pos:pe,top:ie,left:ye,bottom:Re,right:$e,inset:Be,display:je,flex:Le,hiddenFrom:Pe,visibleFrom:me,lightHidden:_e,darkHidden:xe,sx:Ie}),rest:Ve}}const yNe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function N3(e,t){const n=rg({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function bNe(e,t){const n=rg({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:N3(e,t)}function vNe(e,t){if(typeof e=="number")return Ce(e);if(typeof e=="string"){const[n,r,...o]=e.split(" ").filter(s=>s.trim()!=="");let i=`${Ce(n)}`;return r&&(i+=` ${r}`),o.length>0&&(i+=` ${N3(o.join(" "),t)}`),i.trim()}return e}const D8={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function xNe(e){return typeof e=="string"&&e in D8?D8[e]:e}const wNe=["h1","h2","h3","h4","h5","h6"];function SNe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&wNe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ce(e):e}function kNe(e){return e}const CNe=["h1","h2","h3","h4","h5","h6"];function ENe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&CNe.includes(e)?`var(--mantine-${e}-line-height)`:e}function TNe(e){return typeof e=="number"?Ce(e):e}function _Ne(e,t){if(typeof e=="number")return Ce(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ce(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const mA={color:N3,textColor:bNe,fontSize:SNe,spacing:_Ne,identity:kNe,size:TNe,lineHeight:ENe,fontFamily:xNe,border:vNe};function $8(e){return e.replace("(min-width: ","").replace("em)","")}function ANe({media:e,...t}){const r=Object.keys(e).sort((o,i)=>Number($8(o))-Number($8(i))).map(o=>({query:o,styles:e[o]}));return{...t,media:r}}function MNe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function NNe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function RNe(e){return typeof e=="object"&&e!==null?Hl(e).filter(t=>t!=="base"):[]}function INe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function aJ({styleProps:e,data:t,theme:n}){return ANe(Hl(e).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const i=t[o],s=Array.isArray(i.property)?i.property:[i.property],a=NNe(e[o]);if(!MNe(e[o]))return s.forEach(c=>{r.inlineStyles[c]=mA[i.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=RNe(e[o]);return s.forEach(c=>{a&&(r.styles[c]=mA[i.type](a,n)),l.forEach(u=>{const f=`(min-width: ${n.breakpoints[u]})`;r.media[f]={...r.media[f],[c]:mA[i.type](INe(e[o],u),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function lJ(){return`__m__-${k.useId().replace(/:/g,"")}`}function cJ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...cJ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function uJ(e){return e.startsWith("data-")?e:`data-${e}`}function ONe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[uJ(n)]=e[n]),t},{})}function dJ(e){return e?typeof e=="string"?{[uJ(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...dJ(n)}),{}):ONe(e):null}function vR(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...vR(r,t)}),{}):typeof e=="function"?e(t):e??{}}function PNe({theme:e,style:t,vars:n,styleProps:r}){const o=vR(t,e),i=vR(n,e);return{...o,...i,...r}}const fJ=k.forwardRef(({component:e,style:t,__vars:n,className:r,variant:o,mod:i,size:s,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:f,__size:p,...m},y)=>{const b=Ps(),w=e||"div",{styleProps:S,rest:E}=JC(m),A=IMe()?.()?.(S.sx),M=lJ(),R=aJ({styleProps:S,theme:b,data:yNe}),O={ref:y,style:PNe({theme:b,style:t,vars:n,styleProps:R.inlineStyles}),className:Li(r,A,{[M]:R.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":UY(s)?void 0:s||void 0,size:p,...dJ(i),...E};return v.jsxs(v.Fragment,{children:[R.hasResponsiveStyles&&v.jsx(sJ,{selector:`.${M}`,styles:R.styles,media:R.media}),typeof f=="function"?f(O):v.jsx(w,{...O})]})});fJ.displayName="@mantine/core/Box";const ft=fJ;function hJ(e){return e}function DNe(e){const t=e;return n=>{const r=k.forwardRef((o,i)=>v.jsx(t,{...n,...o,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function Wt(e){const t=k.forwardRef(e);return t.extend=hJ,t.withProps=n=>{const r=k.forwardRef((o,i)=>v.jsx(t,{...n,...o,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function wi(e){const t=k.forwardRef(e);return t.withProps=n=>{const r=k.forwardRef((o,i)=>v.jsx(t,{...n,...o,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=hJ,t}const $Ne=k.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function cv(){return k.useContext($Ne)}var pJ={root:"m_87cf2631"};const jNe={__staticSelector:"UnstyledButton"},Ch=wi((e,t)=>{const n=Ye("UnstyledButton",jNe,e),{className:r,component:o="button",__staticSelector:i,unstyled:s,classNames:a,styles:l,style:c,...u}=n,f=Ut({name:i,props:n,classes:pJ,className:r,style:c,classNames:a,styles:l,unstyled:s});return v.jsx(ft,{...f("root",{focusable:!0}),component:o,ref:t,type:o==="button"?"button":void 0,...u})});Ch.classes=pJ;Ch.displayName="@mantine/core/UnstyledButton";var mJ={root:"m_515a97f8"};const LNe={},R3=Wt((e,t)=>{const n=Ye("VisuallyHidden",LNe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,...c}=n,u=Ut({name:"VisuallyHidden",classes:mJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a});return v.jsx(ft,{component:"span",ref:t,...u("root"),...c})});R3.classes=mJ;R3.displayName="@mantine/core/VisuallyHidden";var gJ={root:"m_1b7284a3"};const zNe={},BNe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:oi(t),"--paper-shadow":qY(n)}}),I3=wi((e,t)=>{const n=Ye("Paper",zNe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,withBorder:l,vars:c,radius:u,shadow:f,variant:p,mod:m,...y}=n,b=Ut({name:"Paper",props:n,classes:gJ,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:c,varsResolver:BNe});return v.jsx(ft,{ref:t,mod:[{"data-with-border":l},m],...b("root"),variant:p,...y})});I3.classes=gJ;I3.displayName="@mantine/core/Paper";function yJ(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return t}function j8(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function L8(e,t,n,r,o){return e==="center"||r==="center"?{left:t}:e==="end"?{[o==="ltr"?"right":"left"]:n}:e==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const FNe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function VNe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:i,arrowY:s,dir:a}){const[l,c="center"]=e.split("-"),u={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[FNe[l]]:r},f=-t/2;return l==="left"?{...u,...j8(c,s,n,o),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...u,...j8(c,s,n,o),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...u,...L8(c,i,n,o,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...u,...L8(c,i,n,o,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const O3=k.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:i,arrowX:s,arrowY:a,style:l,...c},u)=>{const{dir:f}=cv();return i?v.jsx("div",{...c,ref:u,style:{...l,...VNe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:f,arrowX:s,arrowY:a})}}):null});O3.displayName="@mantine/core/FloatingArrow";var bJ={root:"m_9814e45f"};const HNe={zIndex:iv("modal")},UNe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:o,radius:i,zIndex:s})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&_l(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${Ce(o)})`:void 0,"--overlay-radius":i===void 0?void 0:oi(i),"--overlay-z-index":s?.toString()}}),tb=wi((e,t)=>{const n=Ye("Overlay",HNe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,fixed:c,center:u,children:f,radius:p,zIndex:m,gradient:y,blur:b,color:w,backgroundOpacity:S,mod:E,...T}=n,A=Ut({name:"Overlay",props:n,classes:bJ,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:UNe});return v.jsx(ft,{ref:t,...A("root"),mod:[{center:u,fixed:c},E],...T,children:f})});tb.classes=bJ;tb.displayName="@mantine/core/Overlay";function gA(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}function GNe({target:e,reuseTargetNode:t,...n}){if(e)return typeof e=="string"?document.querySelector(e)||gA(n):e;if(t){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=gA(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return gA(n)}const qNe={},vJ=Wt((e,t)=>{const{children:n,target:r,reuseTargetNode:o,...i}=Ye("Portal",qNe,e),[s,a]=k.useState(!1),l=k.useRef(null);return WC(()=>(a(!0),l.current=GNe({target:r,reuseTargetNode:o,...i}),HS(t,l.current),!r&&!o&&l.current&&document.body.appendChild(l.current),()=>{!r&&!o&&l.current&&document.body.removeChild(l.current)}),[r]),!s||!l.current?null:Zr.createPortal(v.jsx(v.Fragment,{children:n}),l.current)});vJ.displayName="@mantine/core/Portal";const uv=Wt(({withinPortal:e=!0,children:t,...n},r)=>eJ()==="test"||!e?v.jsx(v.Fragment,{children:t}):v.jsx(vJ,{ref:r,...n,children:t}));uv.displayName="@mantine/core/OptionalPortal";const ky=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),px={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...ky("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...ky("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...ky("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...ky("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...ky("top"),common:{transformOrigin:"top right"}}},z8={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function ZNe({transition:e,state:t,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in px?{transitionProperty:px[e].transitionProperty,...o,...px[e].common,...px[e][z8[t]]}:{}:{transitionProperty:e.transitionProperty,...o,...e.common,...e[z8[t]]}}function WNe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:o,onExit:i,onEntered:s,onExited:a,enterDelay:l,exitDelay:c}){const u=Ps(),f=kMe(),p=u.respectReducedMotion?f:!1,[m,y]=k.useState(p?0:e),[b,w]=k.useState(r?"entered":"exited"),S=k.useRef(-1),E=k.useRef(-1),T=k.useRef(-1);function A(){window.clearTimeout(S.current),window.clearTimeout(E.current),cancelAnimationFrame(T.current)}const M=O=>{A();const I=O?o:i,L=O?s:a,$=p?0:O?e:t;y($),$===0?(typeof I=="function"&&I(),typeof L=="function"&&L(),w(O?"entered":"exited")):T.current=requestAnimationFrame(()=>{e3.flushSync(()=>{w(O?"pre-entering":"pre-exiting")}),T.current=requestAnimationFrame(()=>{typeof I=="function"&&I(),w(O?"entering":"exiting"),S.current=window.setTimeout(()=>{typeof L=="function"&&L(),w(O?"entered":"exited")},$)})})},R=O=>{if(A(),typeof(O?l:c)!="number"){M(O);return}E.current=window.setTimeout(()=>{M(O)},O?l:c)};return kd(()=>{R(r)},[r]),k.useEffect(()=>()=>{A()},[]),{transitionDuration:m,transitionStatus:b,transitionTimingFunction:n||"ease"}}function Eh({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:o,children:i,timingFunction:s="ease",onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:p}){const m=eJ(),{transitionDuration:y,transitionStatus:b,transitionTimingFunction:w}=WNe({mounted:o,exitDuration:r,duration:n,timingFunction:s,onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:p});return y===0||m==="test"?o?v.jsx(v.Fragment,{children:i({})}):e?i({display:"none"}):null:b==="exited"?e?i({display:"none"}):null:v.jsx(v.Fragment,{children:i(ZNe({transition:t,duration:y,state:b,timingFunction:w}))})}Eh.displayName="@mantine/core/Transition";const[KNe,xJ]=ZC("Popover component was not found in the tree");function P3({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const o=YY(t),i=uu(o,r);return ov(e)?k.cloneElement(e,{[n]:i}):e}function wJ(e){return v.jsx(R3,{tabIndex:-1,"data-autofocus":!0,...e})}P3.displayName="@mantine/core/FocusTrap";wJ.displayName="@mantine/core/FocusTrapInitialFocus";P3.InitialFocus=wJ;var SJ={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const YNe={},XC=Wt((e,t)=>{const n=Ye("PopoverDropdown",YNe,e),{className:r,style:o,vars:i,children:s,onKeyDownCapture:a,variant:l,classNames:c,styles:u,...f}=n,p=xJ(),m=mMe({opened:p.opened,shouldReturnFocus:p.returnFocus}),y=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},b=uu(t,p.floating);return p.disabled?null:v.jsx(uv,{...p.portalProps,withinPortal:p.withinPortal,children:v.jsx(Eh,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:typeof p.transitionProps?.exitDuration=="number"?p.transitionProps.exitDuration:p.transitionProps?.duration,children:w=>v.jsx(P3,{active:p.trapFocus&&p.opened,innerRef:b,children:v.jsxs(ft,{...y,...f,variant:l,onKeyDownCapture:sMe(()=>{p.onClose?.(),p.onDismiss?.()},{active:p.closeOnEscape,onTrigger:m,onKeyDown:a}),"data-position":p.placement,"data-fixed":p.floatingStrategy==="fixed"||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:c,styles:u,style:[{...w,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:p.width==="target"?void 0:Ce(p.width)},p.resolvedStyles.dropdown,u?.dropdown,o]}),children:[s,v.jsx(O3,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:c,styles:u})})]})})})})});XC.classes=SJ;XC.displayName="@mantine/core/PopoverDropdown";const JNe={refProp:"ref",popupType:"dialog"},D3=Wt((e,t)=>{const{children:n,refProp:r,popupType:o,...i}=Ye("PopoverTarget",JNe,e);if(!ov(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=i,a=xJ(),l=uu(a.reference,E3(n),t),c=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return k.cloneElement(n,{...s,...c,...a.targetProps,className:Li(a.targetProps.className,s.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});D3.displayName="@mantine/core/PopoverTarget";function kJ({opened:e,floating:t,position:n,positionDependencies:r}){const[o,i]=k.useState(0);k.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return BC(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,o,n]),kd(()=>{t.update()},r),kd(()=>{i(s=>s+1)},[e])}function XNe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function QNe(e,t){const n=XNe(e.middlewares),r=[Zi(e.offset)];return n.shift&&r.push(au(typeof n.shift=="boolean"?{limiter:uR(),padding:5}:{limiter:uR(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?As():As(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?a0():a0(n.inline)),r.push(r3({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Sh({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:i,availableHeight:s,...a}){const c=t().refs.floating.current?.style??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:i,availableHeight:s,...a}):Object.assign(c,{maxWidth:`${i}px`,maxHeight:`${s}px`})),e.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),r}function eRe(e){const[t,n]=ng({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=k.useRef(t),o=()=>{t&&!e.disabled&&n(!1)},i=()=>!e.disabled&&n(!t),s=kh({strategy:e.strategy,placement:e.position,middleware:QNe(e,()=>s)});return kJ({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),kd(()=>{e.onPositionChange?.(s.placement)},[s.placement]),kd(()=>{t!==r.current&&(t?e.onOpen?.():e.onClose?.()),r.current=t},[t,e.onClose,e.onOpen]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:o,onToggle:i}}const tRe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:iv("popover"),__staticSelector:"Popover",width:"max-content"},nRe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:oi(t),"--popover-shadow":qY(n)}});function $d(e){const t=Ye("Popover",tRe,e),{children:n,position:r,offset:o,onPositionChange:i,positionDependencies:s,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:u,width:f,middlewares:p,withArrow:m,arrowSize:y,arrowOffset:b,arrowRadius:w,arrowPosition:S,unstyled:E,classNames:T,styles:A,closeOnClickOutside:M,withinPortal:R,portalProps:O,closeOnEscape:I,clickOutsideEvents:L,trapFocus:$,onClose:B,onDismiss:G,onOpen:V,onChange:W,zIndex:K,radius:F,shadow:q,id:H,defaultOpened:z,__staticSelector:N,withRoles:U,disabled:te,returnFocus:D,variant:ce,keepMounted:ae,vars:pe,floatingStrategy:ie,withOverlay:ye,overlayProps:Re,...$e}=t,Be=Ut({name:N,props:t,classes:SJ,classNames:T,styles:A,unstyled:E,rootSelector:"dropdown",vars:pe,varsResolver:nRe}),{resolvedStyles:je}=YC({classNames:T,styles:A,props:t}),Le=k.useRef(null),[Pe,me]=k.useState(null),[_e,xe]=k.useState(null),{dir:Ie}=cv(),Ve=av(H),nt=eRe({middlewares:p,width:f,position:yJ(Ie,r),offset:typeof o=="number"?o+(m?y/2:0):o,arrowRef:Le,arrowOffset:b,onPositionChange:i,positionDependencies:s,opened:a,defaultOpened:z,onChange:W,onOpen:V,onClose:B,onDismiss:G,strategy:ie,disabled:te});dMe(()=>{M&&(nt.onClose(),G?.())},L,[Pe,_e]);const kn=k.useCallback(Ft=>{me(Ft),nt.floating.refs.setReference(Ft)},[nt.floating.refs.setReference]),Dr=k.useCallback(Ft=>{xe(Ft),nt.floating.refs.setFloating(Ft)},[nt.floating.refs.setFloating]),or=k.useCallback(()=>{l?.onExited?.(),c?.()},[l?.onExited,c]),hr=k.useCallback(()=>{l?.onEntered?.(),u?.()},[l?.onEntered,u]);return v.jsxs(KNe,{value:{returnFocus:D,disabled:te,controlled:nt.controlled,reference:kn,floating:Dr,x:nt.floating.x,y:nt.floating.y,arrowX:nt.floating?.middlewareData?.arrow?.x,arrowY:nt.floating?.middlewareData?.arrow?.y,opened:nt.opened,arrowRef:Le,transitionProps:{...l,onExited:or,onEntered:hr},width:f,withArrow:m,arrowSize:y,arrowOffset:b,arrowRadius:w,arrowPosition:S,placement:nt.floating.placement,trapFocus:$,withinPortal:R,portalProps:O,zIndex:K,radius:F,shadow:q,closeOnEscape:I,onDismiss:G,onClose:nt.onClose,onToggle:nt.onToggle,getTargetId:()=>`${Ve}-target`,getDropdownId:()=>`${Ve}-dropdown`,withRoles:U,targetProps:$e,__staticSelector:N,classNames:T,styles:A,unstyled:E,variant:ce,keepMounted:ae,getStyles:Be,resolvedStyles:je,floatingStrategy:ie},children:[n,ye&&v.jsx(Eh,{transition:"fade",mounted:nt.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:Ft=>v.jsx(uv,{withinPortal:R,children:v.jsx(tb,{...Re,...Be("overlay",{className:Re?.className,style:[Ft,Re?.style]})})})})]})}$d.Target=D3;$d.Dropdown=XC;$d.displayName="@mantine/core/Popover";$d.extend=e=>e;var Ga={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const CJ=k.forwardRef(({className:e,...t},n)=>v.jsxs(ft,{component:"span",className:Li(Ga.barsLoader,e),...t,ref:n,children:[v.jsx("span",{className:Ga.bar}),v.jsx("span",{className:Ga.bar}),v.jsx("span",{className:Ga.bar})]}));CJ.displayName="@mantine/core/Bars";const EJ=k.forwardRef(({className:e,...t},n)=>v.jsxs(ft,{component:"span",className:Li(Ga.dotsLoader,e),...t,ref:n,children:[v.jsx("span",{className:Ga.dot}),v.jsx("span",{className:Ga.dot}),v.jsx("span",{className:Ga.dot})]}));EJ.displayName="@mantine/core/Dots";const TJ=k.forwardRef(({className:e,...t},n)=>v.jsx(ft,{component:"span",className:Li(Ga.ovalLoader,e),...t,ref:n}));TJ.displayName="@mantine/core/Oval";const _J={bars:CJ,oval:TJ,dots:EJ},rRe={loaders:_J,type:"oval"},oRe=(e,{size:t,color:n})=>({root:{"--loader-size":Fn(t,"loader-size"),"--loader-color":n?Yl(n,e):void 0}}),jd=Wt((e,t)=>{const n=Ye("Loader",rRe,e),{size:r,color:o,type:i,vars:s,className:a,style:l,classNames:c,styles:u,unstyled:f,loaders:p,variant:m,children:y,...b}=n,w=Ut({name:"Loader",props:n,classes:Ga,className:a,style:l,classNames:c,styles:u,unstyled:f,vars:s,varsResolver:oRe});return y?v.jsx(ft,{...w("root"),ref:t,...b,children:y}):v.jsx(ft,{...w("root"),ref:t,component:p[i],variant:m,size:r,...b})});jd.defaultLoaders=_J;jd.classes=Ga;jd.displayName="@mantine/core/Loader";var og={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const B8={orientation:"horizontal"},iRe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ce(t)}}),$3=Wt((e,t)=>{const n=Ye("ActionIconGroup",B8,e),{className:r,style:o,classNames:i,styles:s,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:p,...m}=Ye("ActionIconGroup",B8,e),y=Ut({name:"ActionIconGroup",props:n,classes:og,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:c,varsResolver:iRe,rootSelector:"group"});return v.jsx(ft,{...y("group"),ref:t,variant:f,mod:[{"data-orientation":l},p],role:"group",...m})});$3.classes=og;$3.displayName="@mantine/core/ActionIconGroup";const F8={},sRe=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":Fn(s,"section-height"),"--section-padding-x":Fn(s,"section-padding-x"),"--section-fz":Hi(s),"--section-radius":t===void 0?void 0:oi(t),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},j3=Wt((e,t)=>{const n=Ye("ActionIconGroupSection",F8,e),{className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,variant:c,gradient:u,radius:f,autoContrast:p,...m}=Ye("ActionIconGroupSection",F8,e),y=Ut({name:"ActionIconGroupSection",props:n,classes:og,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,varsResolver:sRe,rootSelector:"groupSection"});return v.jsx(ft,{...y("groupSection"),ref:t,variant:c,...m})});j3.classes=og;j3.displayName="@mantine/core/ActionIconGroupSection";const aRe={},lRe=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:s})=>{const a=e.variantColorResolver({color:i||e.primaryColor,theme:e,gradient:o,variant:r||"filled",autoContrast:s});return{root:{"--ai-size":Fn(t,"ai-size"),"--ai-radius":n===void 0?void 0:oi(n),"--ai-bg":i||r?a.background:void 0,"--ai-hover":i||r?a.hover:void 0,"--ai-hover-color":i||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":i||r?a.border:void 0}}},Th=wi((e,t)=>{const n=Ye("ActionIcon",aRe,e),{className:r,unstyled:o,variant:i,classNames:s,styles:a,style:l,loading:c,loaderProps:u,size:f,color:p,radius:m,__staticSelector:y,gradient:b,vars:w,children:S,disabled:E,"data-disabled":T,autoContrast:A,mod:M,...R}=n,O=Ut({name:["ActionIcon",y],props:n,className:r,style:l,classes:og,classNames:s,styles:a,unstyled:o,vars:w,varsResolver:lRe});return v.jsxs(Ch,{...O("root",{active:!E&&!c&&!T}),...R,unstyled:o,variant:i,size:f,disabled:E||c,ref:t,mod:[{loading:c,disabled:E||T},M],children:[v.jsx(Eh,{mounted:!!c,transition:"slide-down",duration:150,children:I=>v.jsx(ft,{component:"span",...O("loader",{style:I}),"aria-hidden":!0,children:v.jsx(jd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),v.jsx(ft,{component:"span",mod:{loading:c},...O("icon"),children:S})]})});Th.classes=og;Th.displayName="@mantine/core/ActionIcon";Th.Group=$3;Th.GroupSection=j3;const AJ=k.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>v.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:v.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));AJ.displayName="@mantine/core/CloseIcon";var MJ={root:"m_86a44da5","root--subtle":"m_220c80f2"};const cRe={variant:"subtle"},uRe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Fn(t,"cb-size"),"--cb-radius":n===void 0?void 0:oi(n),"--cb-icon-size":Ce(r)}}),QC=wi((e,t)=>{const n=Ye("CloseButton",cRe,e),{iconSize:r,children:o,vars:i,radius:s,className:a,classNames:l,style:c,styles:u,unstyled:f,"data-disabled":p,disabled:m,variant:y,icon:b,mod:w,__staticSelector:S,...E}=n,T=Ut({name:S||"CloseButton",props:n,className:a,style:c,classes:MJ,classNames:l,styles:u,unstyled:f,vars:i,varsResolver:uRe});return v.jsxs(Ch,{ref:t,...E,unstyled:f,variant:y,disabled:m,mod:[{disabled:m||p},w],...T("root",{variant:y,active:!m&&!p}),children:[b||v.jsx(AJ,{}),o]})});QC.classes=MJ;QC.displayName="@mantine/core/CloseButton";function dRe(e){return k.Children.toArray(e).filter(Boolean)}var NJ={root:"m_4081bf90"};const fRe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},hRe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:o,justify:i,wrap:s},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":sv(r),"--group-align":o,"--group-justify":i,"--group-wrap":s}}),Do=Wt((e,t)=>{const n=Ye("Group",fRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,children:l,gap:c,align:u,justify:f,wrap:p,grow:m,preventGrowOverflow:y,vars:b,variant:w,__size:S,mod:E,...T}=n,A=dRe(l),M=A.length,R=sv(c??"md"),I={childWidth:`calc(${100/M}% - (${R} - ${R} / ${M}))`},L=Ut({name:"Group",props:n,stylesCtx:I,className:o,style:i,classes:NJ,classNames:r,styles:s,unstyled:a,vars:b,varsResolver:hRe});return v.jsx(ft,{...L("root"),ref:t,variant:w,mod:[{grow:m},E],size:S,...T,children:A})});Do.classes=NJ;Do.displayName="@mantine/core/Group";const[pRe,mRe]=C3({size:"sm"}),gRe={},RJ=Wt((e,t)=>{const n=Ye("InputClearButton",gRe,e),{size:r,variant:o,vars:i,classNames:s,styles:a,...l}=n,c=mRe(),{resolvedClassNames:u,resolvedStyles:f}=YC({classNames:s,styles:a,props:n});return v.jsx(QC,{variant:o||"transparent",ref:t,size:r||c?.size||"sm",classNames:u,styles:f,__staticSelector:"InputClearButton",...l})});RJ.displayName="@mantine/core/InputClearButton";const[yRe,eE]=C3({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var va={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const V8={},bRe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Hi(t)} - ${Ce(2)})`}}),tE=Wt((e,t)=>{const n=Ye("InputDescription",V8,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:p,...m}=Ye("InputDescription",V8,n),y=eE(),b=Ut({name:["InputWrapper",u],props:n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"description",vars:l,varsResolver:bRe}),w=f&&y?.getStyles||b;return v.jsx(ft,{component:"p",ref:t,variant:p,size:c,...w("description",y?.getStyles?{className:o,style:i}:void 0),...m})});tE.classes=va;tE.displayName="@mantine/core/InputDescription";const vRe={},xRe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Hi(t)} - ${Ce(2)})`}}),nE=Wt((e,t)=>{const n=Ye("InputError",vRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:p,...m}=n,y=Ut({name:["InputWrapper",u],props:n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"error",vars:l,varsResolver:xRe}),b=eE(),w=f&&b?.getStyles||y;return v.jsx(ft,{component:"p",ref:t,variant:p,size:c,...w("error",b?.getStyles?{className:o,style:i}:void 0),...m})});nE.classes=va;nE.displayName="@mantine/core/InputError";const H8={labelElement:"label"},wRe=(e,{size:t})=>({label:{"--input-label-size":Hi(t),"--input-asterisk-color":void 0}}),rE=Wt((e,t)=>{const n=Ye("InputLabel",H8,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,labelElement:c,size:u,required:f,htmlFor:p,onMouseDown:m,children:y,__staticSelector:b,variant:w,mod:S,...E}=Ye("InputLabel",H8,n),T=Ut({name:["InputWrapper",b],props:n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"label",vars:l,varsResolver:wRe}),A=eE(),M=A?.getStyles||T;return v.jsxs(ft,{...M("label",A?.getStyles?{className:o,style:i}:void 0),component:c,variant:w,size:u,ref:t,htmlFor:c==="label"?p:void 0,mod:[{required:f},S],onMouseDown:R=>{m?.(R),!R.defaultPrevented&&R.detail>1&&R.preventDefault()},...E,children:[y,f&&v.jsx("span",{...M("required"),"aria-hidden":!0,children:" *"})]})});rE.classes=va;rE.displayName="@mantine/core/InputLabel";const U8={},L3=Wt((e,t)=>{const n=Ye("InputPlaceholder",U8,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,__staticSelector:c,variant:u,error:f,mod:p,...m}=Ye("InputPlaceholder",U8,n),y=Ut({name:["InputPlaceholder",c],props:n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"placeholder"});return v.jsx(ft,{...y("placeholder"),mod:[{error:!!f},p],component:"span",variant:u,ref:t,...m})});L3.classes=va;L3.displayName="@mantine/core/InputPlaceholder";function SRe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),o=e.slice(0,r),i=e.slice(r+1),s=t&&o.includes("description")||n&&o.includes("error");return{offsetBottom:t&&i.includes("description")||n&&i.includes("error"),offsetTop:s}}const kRe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},CRe=(e,{size:t})=>({label:{"--input-label-size":Hi(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Hi(t)} - ${Ce(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Hi(t)} - ${Ce(2)})`}}),z3=Wt((e,t)=>{const n=Ye("InputWrapper",kRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,variant:u,__staticSelector:f,inputContainer:p,inputWrapperOrder:m,label:y,error:b,description:w,labelProps:S,descriptionProps:E,errorProps:T,labelElement:A,children:M,withAsterisk:R,id:O,required:I,__stylesApiProps:L,mod:$,...B}=n,G=Ut({name:["InputWrapper",f],props:L||n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:CRe}),V={size:c,variant:u,__staticSelector:f},W=av(O),K=typeof R=="boolean"?R:I,F=T?.id||`${W}-error`,q=E?.id||`${W}-description`,H=W,z=!!b&&typeof b!="boolean",N=!!w,U=`${z?F:""} ${N?q:""}`,te=U.trim().length>0?U.trim():void 0,D=S?.id||`${W}-label`,ce=y&&v.jsx(rE,{labelElement:A,id:D,htmlFor:H,required:K,...V,...S,children:y},"label"),ae=N&&v.jsx(tE,{...E,...V,size:E?.size||V.size,id:E?.id||q,children:w},"description"),pe=v.jsx(k.Fragment,{children:p(M)},"input"),ie=z&&k.createElement(nE,{...T,...V,size:T?.size||V.size,key:"error",id:T?.id||F},b),ye=m.map(Re=>{switch(Re){case"label":return ce;case"input":return pe;case"description":return ae;case"error":return ie;default:return null}});return v.jsx(yRe,{value:{getStyles:G,describedBy:te,inputId:H,labelId:D,...SRe(m,{hasDescription:N,hasError:z})},children:v.jsx(ft,{ref:t,variant:u,size:c,mod:[{error:!!b},$],...G("root"),...B,children:ye})})});z3.classes=va;z3.displayName="@mantine/core/InputWrapper";const ERe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},TRe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Fn(t.size,"input-height"),"--input-fz":Hi(t.size),"--input-radius":t.radius===void 0?void 0:oi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ce(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ce(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Fn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Ms=wi((e,t)=>{const n=Ye("Input",ERe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:u,size:f,wrapperProps:p,error:m,disabled:y,leftSection:b,leftSectionProps:w,leftSectionWidth:S,rightSection:E,rightSectionProps:T,rightSectionWidth:A,rightSectionPointerEvents:M,leftSectionPointerEvents:R,variant:O,vars:I,pointer:L,multiline:$,radius:B,id:G,withAria:V,withErrorStyles:W,mod:K,inputSize:F,__clearSection:q,__clearable:H,__defaultRightSection:z,...N}=n,{styleProps:U,rest:te}=JC(N),D=eE(),ce={offsetBottom:D?.offsetBottom,offsetTop:D?.offsetTop},ae=Ut({name:["Input",c],props:u||n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,stylesCtx:ce,rootSelector:"wrapper",vars:I,varsResolver:TRe}),pe=V?{required:l,disabled:y,"aria-invalid":!!m,"aria-describedby":D?.describedBy,id:D?.inputId||G}:{},ie=E||H&&q||z;return v.jsx(pRe,{value:{size:f||"sm"},children:v.jsxs(ft,{...ae("wrapper"),...U,...p,mod:[{error:!!m&&W,pointer:L,disabled:y,multiline:$,"data-with-right-section":!!ie,"data-with-left-section":!!b},K],variant:O,size:f,children:[b&&v.jsx("div",{...w,"data-position":"left",...ae("section",{className:w?.className,style:w?.style}),children:b}),v.jsx(ft,{component:"input",...te,...pe,ref:t,required:l,mod:{disabled:y,error:!!m&&W},variant:O,__size:F,...ae("input")}),ie&&v.jsx("div",{...T,"data-position":"right",...ae("section",{className:T?.className,style:T?.style}),children:ie})]})})});Ms.classes=va;Ms.Wrapper=z3;Ms.Label=rE;Ms.Error=nE;Ms.Description=tE;Ms.Placeholder=L3;Ms.ClearButton=RJ;Ms.displayName="@mantine/core/Input";function _Re(e,t,n){const r=Ye(e,t,n),{label:o,description:i,error:s,required:a,classNames:l,styles:c,className:u,unstyled:f,__staticSelector:p,__stylesApiProps:m,errorProps:y,labelProps:b,descriptionProps:w,wrapperProps:S,id:E,size:T,style:A,inputContainer:M,inputWrapperOrder:R,withAsterisk:O,variant:I,vars:L,mod:$,...B}=r,{styleProps:G,rest:V}=JC(B),W={label:o,description:i,error:s,required:a,classNames:l,className:u,__staticSelector:p,__stylesApiProps:m||r,errorProps:y,labelProps:b,descriptionProps:w,unstyled:f,styles:c,size:T,style:A,inputContainer:M,inputWrapperOrder:R,withAsterisk:O,variant:I,id:E,mod:$,...S};return{...V,classNames:l,styles:c,unstyled:f,wrapperProps:{...W,...G},inputProps:{required:a,classNames:l,styles:c,unstyled:f,size:T,__staticSelector:p,__stylesApiProps:m||r,error:s,variant:I,id:E}}}const ARe={__staticSelector:"InputBase",withAria:!0},ig=wi((e,t)=>{const{inputProps:n,wrapperProps:r,...o}=_Re("InputBase",ARe,e);return v.jsx(Ms.Wrapper,{...r,children:v.jsx(Ms,{...n,...o,ref:t})})});ig.classes={...Ms.classes,...Ms.Wrapper.classes};ig.displayName="@mantine/core/InputBase";const MRe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var IJ={root:"m_8bffd616"};const NRe={},B3=wi((e,t)=>{const n=Ye("Flex",NRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,gap:c,rowGap:u,columnGap:f,align:p,justify:m,wrap:y,direction:b,...w}=n,S=Ut({name:"Flex",classes:IJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l}),E=Ps(),T=lJ(),A=aJ({styleProps:{gap:c,rowGap:u,columnGap:f,align:p,justify:m,wrap:y,direction:b},theme:E,data:MRe});return v.jsxs(v.Fragment,{children:[A.hasResponsiveStyles&&v.jsx(sJ,{selector:`.${T}`,styles:A.styles,media:A.media}),v.jsx(ft,{ref:t,...S("root",{className:T,style:qC(A.inlineStyles)}),...w})]})});B3.classes=IJ;B3.displayName="@mantine/core/Flex";var OJ={root:"m_b6d8b162"};function RRe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const IRe={inherit:!1},ORe=(e,{variant:t,lineClamp:n,gradient:r,size:o,color:i})=>({root:{"--text-fz":Hi(o),"--text-lh":aMe(o),"--text-gradient":t==="gradient"?yR(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":i?Yl(i,e):void 0}}),Jl=wi((e,t)=>{const n=Ye("Text",IRe,e),{lineClamp:r,truncate:o,inline:i,inherit:s,gradient:a,span:l,__staticSelector:c,vars:u,className:f,style:p,classNames:m,styles:y,unstyled:b,variant:w,mod:S,size:E,...T}=n,A=Ut({name:["Text",c],props:n,classes:OJ,className:f,style:p,classNames:m,styles:y,unstyled:b,vars:u,varsResolver:ORe});return v.jsx(ft,{...A("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:w,mod:[{"data-truncate":RRe(o),"data-line-clamp":typeof r=="number","data-inline":i,"data-inherit":s},S],size:E,...T})});Jl.classes=OJ;Jl.displayName="@mantine/core/Text";function F3({size:e,style:t,...n}){const r=e!==void 0?{width:Ce(e),height:Ce(e),...t}:t;return v.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:v.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const PJ=k.createContext(null),PRe=PJ.Provider;function DRe(){return{withinGroup:!!k.useContext(PJ)}}var oE={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const $Re={},jRe=(e,{spacing:t})=>({group:{"--ag-spacing":sv(t)}}),V3=Wt((e,t)=>{const n=Ye("AvatarGroup",$Re,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,spacing:c,...u}=n,f=Ut({name:"AvatarGroup",classes:oE,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:jRe,rootSelector:"group"});return v.jsx(PRe,{value:!0,children:v.jsx(ft,{ref:t,...f("group"),...u})})});V3.classes=oE;V3.displayName="@mantine/core/AvatarGroup";function LRe(e){return v.jsx("svg",{...e,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function zRe(e){let t=0;for(let n=0;n<e.length;n+=1){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return t}const BRe=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function FRe(e,t=BRe){const n=zRe(e),r=Math.abs(n)%t.length;return t[r]}function VRe(e,t=2){const n=e.split(" ");return n.length===1?e.slice(0,t).toUpperCase():n.map(r=>r[0]).slice(0,t).join("").toUpperCase()}const HRe={},URe=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:s,name:a,allowedInitialsColors:l})=>{const c=i==="initials"&&typeof a=="string"?FRe(a,l):i,u=e.variantColorResolver({color:c||"gray",theme:e,gradient:o,variant:r||"light",autoContrast:s});return{root:{"--avatar-size":Fn(t,"avatar-size"),"--avatar-radius":n===void 0?void 0:oi(n),"--avatar-bg":c||r?u.background:void 0,"--avatar-color":c||r?u.color:void 0,"--avatar-bd":c||r?u.border:void 0}}},iE=wi((e,t)=>{const n=Ye("Avatar",HRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,src:c,alt:u,radius:f,color:p,gradient:m,imageProps:y,children:b,autoContrast:w,mod:S,name:E,allowedInitialsColors:T,...A}=n,M=DRe(),[R,O]=k.useState(!c),I=Ut({name:"Avatar",props:n,classes:oE,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:URe});return k.useEffect(()=>O(!c),[c]),v.jsx(ft,{...I("root"),mod:[{"within-group":M.withinGroup},S],ref:t,...A,children:R?v.jsx("span",{...I("placeholder"),title:u,children:b||typeof E=="string"&&VRe(E)||v.jsx(LRe,{})}):v.jsx("img",{...y,...I("image"),src:c,alt:u,onError:L=>{O(!0),y?.onError?.(L)}})})});iE.classes=oE;iE.displayName="@mantine/core/Avatar";iE.Group=V3;var DJ={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const GRe={},qRe=(e,{radius:t,color:n,gradient:r,variant:o,size:i,autoContrast:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--badge-height":Fn(i,"badge-height"),"--badge-padding-x":Fn(i,"badge-padding-x"),"--badge-fz":Fn(i,"badge-fz"),"--badge-radius":t===void 0?void 0:oi(t),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?Yl(n,e):void 0}}},H3=wi((e,t)=>{const n=Ye("Badge",GRe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,radius:c,color:u,gradient:f,leftSection:p,rightSection:m,children:y,variant:b,fullWidth:w,autoContrast:S,circle:E,mod:T,...A}=n,M=Ut({name:"Badge",props:n,classes:DJ,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:qRe});return v.jsxs(ft,{variant:b,mod:[{block:w,circle:E,"with-right-section":!!m,"with-left-section":!!p},T],...M("root",{variant:b}),ref:t,...A,children:[p&&v.jsx("span",{...M("section"),"data-position":"left",children:p}),v.jsx("span",{...M("label"),children:y}),m&&v.jsx("span",{...M("section"),"data-position":"right",children:m})]})});H3.classes=DJ;H3.displayName="@mantine/core/Badge";var sg={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const G8={orientation:"horizontal"},ZRe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ce(t)}}),U3=Wt((e,t)=>{const n=Ye("ButtonGroup",G8,e),{className:r,style:o,classNames:i,styles:s,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:p,...m}=Ye("ButtonGroup",G8,e),y=Ut({name:"ButtonGroup",props:n,classes:sg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:c,varsResolver:ZRe,rootSelector:"group"});return v.jsx(ft,{...y("group"),ref:t,variant:f,mod:[{"data-orientation":l},p],role:"group",...m})});U3.classes=sg;U3.displayName="@mantine/core/ButtonGroup";const q8={},WRe=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":Fn(s,"section-height"),"--section-padding-x":Fn(s,"section-padding-x"),"--section-fz":s?.includes("compact")?Hi(s.replace("compact-","")):Hi(s),"--section-radius":t===void 0?void 0:oi(t),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},G3=Wt((e,t)=>{const n=Ye("ButtonGroupSection",q8,e),{className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,variant:c,gradient:u,radius:f,autoContrast:p,...m}=Ye("ButtonGroupSection",q8,e),y=Ut({name:"ButtonGroupSection",props:n,classes:sg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,varsResolver:WRe,rootSelector:"groupSection"});return v.jsx(ft,{...y("groupSection"),ref:t,variant:c,...m})});G3.classes=sg;G3.displayName="@mantine/core/ButtonGroupSection";const KRe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ce(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},YRe={},JRe=(e,{radius:t,color:n,gradient:r,variant:o,size:i,justify:s,autoContrast:a})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":Fn(i,"button-height"),"--button-padding-x":Fn(i,"button-padding-x"),"--button-fz":i?.includes("compact")?Hi(i.replace("compact-","")):Hi(i),"--button-radius":t===void 0?void 0:oi(t),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},il=wi((e,t)=>{const n=Ye("Button",YRe,e),{style:r,vars:o,className:i,color:s,disabled:a,children:l,leftSection:c,rightSection:u,fullWidth:f,variant:p,radius:m,loading:y,loaderProps:b,gradient:w,classNames:S,styles:E,unstyled:T,"data-disabled":A,autoContrast:M,mod:R,...O}=n,I=Ut({name:"Button",props:n,classes:sg,className:i,style:r,classNames:S,styles:E,unstyled:T,vars:o,varsResolver:JRe}),L=!!c,$=!!u;return v.jsxs(Ch,{ref:t,...I("root",{active:!a&&!y&&!A}),unstyled:T,variant:p,disabled:a||y,mod:[{disabled:a||A,loading:y,block:f,"with-left-section":L,"with-right-section":$},R],...O,children:[v.jsx(Eh,{mounted:!!y,transition:KRe,duration:150,children:B=>v.jsx(ft,{component:"span",...I("loader",{style:B}),"aria-hidden":!0,children:v.jsx(jd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...b})})}),v.jsxs("span",{...I("inner"),children:[c&&v.jsx(ft,{component:"span",...I("section"),mod:{position:"left"},children:c}),v.jsx(ft,{component:"span",mod:{loading:y},...I("label"),children:l}),u&&v.jsx(ft,{component:"span",...I("section"),mod:{position:"right"},children:u})]})]})});il.classes=sg;il.displayName="@mantine/core/Button";il.Group=U3;il.GroupSection=G3;const[XRe,QRe]=ZC("Card component was not found in tree");var q3={root:"m_e615b15f",section:"m_599a2148"};const eIe={},sE=wi((e,t)=>{const n=Ye("CardSection",eIe,e),{classNames:r,className:o,style:i,styles:s,vars:a,withBorder:l,inheritPadding:c,mod:u,...f}=n,p=QRe();return v.jsx(ft,{ref:t,mod:[{"with-border":l,"inherit-padding":c},u],...p.getStyles("section",{className:o,style:i,styles:s,classNames:r}),...f})});sE.classes=q3;sE.displayName="@mantine/core/CardSection";const tIe={},nIe=(e,{padding:t})=>({root:{"--card-padding":sv(t)}}),dv=wi((e,t)=>{const n=Ye("Card",tIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,children:c,padding:u,...f}=n,p=Ut({name:"Card",props:n,classes:q3,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:nIe}),m=k.Children.toArray(c),y=m.map((b,w)=>typeof b=="object"&&b&&"type"in b&&b.type===sE?k.cloneElement(b,{"data-first-section":w===0||void 0,"data-last-section":w===m.length-1||void 0}):b);return v.jsx(XRe,{value:{getStyles:p},children:v.jsx(I3,{ref:t,unstyled:a,...p("root"),...f,children:y})})});dv.classes=q3;dv.displayName="@mantine/core/Card";dv.Section=sE;const[rIe,oIe]=C3(),iIe={};function $J(e){const{value:t,defaultValue:n,onChange:r,multiple:o,children:i}=Ye("ChipGroup",iIe,e),[s,a]=ng({value:t,defaultValue:n,finalValue:o?[]:null,onChange:r}),l=u=>Array.isArray(s)?s.includes(u):u===s,c=u=>{const f=u.currentTarget.value;Array.isArray(s)?a(s.includes(f)?s.filter(p=>p!==f):[...s,f]):a(f)};return v.jsx(rIe,{value:{isChipSelected:l,onChange:c,multiple:o},children:i})}$J.displayName="@mantine/core/ChipGroup";var jJ={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const sIe={type:"checkbox"},aIe=(e,{size:t,radius:n,variant:r,color:o,autoContrast:i})=>{const s=e.variantColorResolver({color:o||e.primaryColor,theme:e,variant:r||"filled",autoContrast:i});return{root:{"--chip-fz":Hi(t),"--chip-size":Fn(t,"chip-size"),"--chip-radius":n===void 0?void 0:oi(n),"--chip-checked-padding":Fn(t,"chip-checked-padding"),"--chip-padding":Fn(t,"chip-padding"),"--chip-icon-size":Fn(t,"chip-icon-size"),"--chip-bg":o||r?s.background:void 0,"--chip-hover":o||r?s.hover:void 0,"--chip-color":o||r?s.color:void 0,"--chip-bd":o||r?s.border:void 0,"--chip-spacing":Fn(t,"chip-spacing")}}},aE=Wt((e,t)=>{const n=Ye("Chip",sIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,id:c,checked:u,defaultChecked:f,onChange:p,value:m,wrapperProps:y,type:b,disabled:w,children:S,size:E,variant:T,icon:A,rootRef:M,autoContrast:R,mod:O,...I}=n,L=Ut({name:"Chip",classes:jJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:aIe}),$=oIe(),B=av(c),{styleProps:G,rest:V}=JC(I),[W,K]=ng({value:u,defaultValue:f,finalValue:!1,onChange:p}),F=$?{checked:$.isChipSelected(m),onChange:H=>{$.onChange(H),p?.(H.currentTarget.checked)},type:$.multiple?"checkbox":"radio"}:{},q=F.checked||W;return v.jsxs(ft,{size:E,variant:T,ref:M,mod:O,...L("root"),...G,...y,children:[v.jsx("input",{type:b,...L("input"),checked:q,onChange:H=>K(H.currentTarget.checked),id:B,disabled:w,ref:t,value:m,...F,...V}),v.jsxs("label",{htmlFor:B,"data-checked":q||void 0,"data-disabled":w||void 0,...L("label",{variant:T||"filled"}),children:[q&&v.jsx("span",{...L("iconWrapper"),children:A||v.jsx(F3,{...L("checkIcon")})}),v.jsx("span",{children:S})]})]})});aE.classes=jJ;aE.displayName="@mantine/core/Chip";aE.Group=$J;var LJ={root:"m_3eebeb36",label:"m_9e365f20"};const lIe={orientation:"horizontal"},cIe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Yl(t,e):void 0,"--divider-border-style":n,"--divider-size":Fn(r,"divider-size")}}),Z3=Wt((e,t)=>{const n=Ye("Divider",lIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,color:c,orientation:u,label:f,labelPosition:p,mod:m,...y}=n,b=Ut({name:"Divider",classes:LJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:cIe});return v.jsx(ft,{ref:t,mod:[{orientation:u,"with-label":!!f},m],...b("root"),...y,role:"separator",children:f&&v.jsx(ft,{component:"span",mod:{position:p},...b("label"),children:f})})});Z3.classes=LJ;Z3.displayName="@mantine/core/Divider";const uIe={multiple:!1},zJ=k.forwardRef((e,t)=>{const{onChange:n,children:r,multiple:o,accept:i,name:s,form:a,resetRef:l,disabled:c,capture:u,inputProps:f,...p}=Ye("FileButton",uIe,e),m=k.useRef(null),y=()=>{!c&&m.current?.click()},b=S=>{n(o?Array.from(S.currentTarget.files):S.currentTarget.files[0]||null)};return HS(l,()=>{m.current&&(m.current.value="")}),v.jsxs(v.Fragment,{children:[v.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:o,onChange:b,ref:uu(t,m),name:s,form:a,capture:u,...f}),r({onClick:y,...p})]})});zJ.displayName="@mantine/core/FileButton";const dIe=({value:e})=>v.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e?.name}),fIe={valueComponent:dIe},W3=Wt((e,t)=>{const n=Ye("FileInput",fIe,e),{unstyled:r,vars:o,onChange:i,value:s,defaultValue:a,multiple:l,accept:c,name:u,form:f,valueComponent:p,clearable:m,clearButtonProps:y,readOnly:b,capture:w,fileInputProps:S,rightSection:E,size:T,placeholder:A,component:M,resetRef:R,classNames:O,styles:I,...L}=n,$=k.useRef(null),{resolvedClassNames:B,resolvedStyles:G}=YC({classNames:O,styles:I,props:n}),[V,W]=ng({value:s,defaultValue:a,onChange:i,finalValue:l?[]:null}),K=Array.isArray(V)?V.length!==0:V!==null,F=E||(m&&K&&!b?v.jsx(QC,{...y,variant:"subtle",onClick:()=>W(l?[]:null),size:T,unstyled:r}):null);k.useEffect(()=>{(Array.isArray(V)&&V.length===0||V===null)&&$.current?.()},[V]);const q=p;return v.jsx(zJ,{onChange:W,multiple:l,accept:c,name:u,form:f,resetRef:uu($,R),disabled:b,capture:w,inputProps:S,children:H=>v.jsx(ig,{component:M||"button",ref:t,rightSection:F,...H,...L,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:T,classNames:O,styles:I,children:K?v.jsx(q,{value:V}):v.jsx(Ms.Placeholder,{__staticSelector:"FileInput",classNames:B,styles:G,children:A})})})});W3.classes=ig.classes;W3.displayName="@mantine/core/FileInput";const hIe=W3;function pIe({open:e,close:t,openDelay:n,closeDelay:r}){const o=k.useRef(-1),i=k.useRef(-1),s=()=>{window.clearTimeout(o.current),window.clearTimeout(i.current)},a=()=>{s(),n===0||n===void 0?e():o.current=window.setTimeout(e,n)},l=()=>{s(),r===0||r===void 0?t():i.current=window.setTimeout(t,r)};return k.useEffect(()=>s,[]),{openDropdown:a,closeDropdown:l}}var BJ={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Z8={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:iv("overlay")},mIe=(e,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}}),K3=Wt((e,t)=>{const n=Ye("LoadingOverlay",Z8,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,transitionProps:c,loaderProps:u,overlayProps:f,visible:p,zIndex:m,...y}=n,b=Ps(),w=Ut({name:"LoadingOverlay",classes:BJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:mIe}),S={...Z8.overlayProps,...f};return v.jsx(Eh,{transition:"fade",...c,mounted:!!p,children:E=>v.jsxs(ft,{...w("root",{style:E}),ref:t,...y,children:[v.jsx(jd,{...w("loader"),unstyled:a,...u}),v.jsx(tb,{...S,...w("overlay"),darkHidden:!0,unstyled:a,color:f?.color||b.white}),v.jsx(tb,{...S,...w("overlay"),lightHidden:!0,unstyled:a,color:f?.color||b.colors.dark[5]})]})})});K3.classes=BJ;K3.displayName="@mantine/core/LoadingOverlay";const[gIe,fv]=ZC("Menu component was not found in the tree");var ag={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const yIe={},Y3=Wt((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,...a}=Ye("MenuDivider",yIe,e),l=fv();return v.jsx(ft,{ref:t,...l.getStyles("divider",{className:r,style:o,styles:i,classNames:n}),...a})});Y3.classes=ag;Y3.displayName="@mantine/core/MenuDivider";const bIe={},J3=Wt((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:u,...f}=Ye("MenuDropdown",bIe,e),p=k.useRef(null),m=fv(),y=$l(c,S=>{(S.key==="ArrowUp"||S.key==="ArrowDown")&&(S.preventDefault(),p.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),b=$l(a,()=>(m.trigger==="hover"||m.trigger==="click-hover")&&m.openDropdown()),w=$l(l,()=>(m.trigger==="hover"||m.trigger==="click-hover")&&m.closeDropdown());return v.jsxs($d.Dropdown,{...f,onMouseEnter:b,onMouseLeave:w,role:"menu","aria-orientation":"vertical",ref:uu(t,p),...m.getStyles("dropdown",{className:r,style:o,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:y,children:[m.withInitialFocusPlaceholder&&v.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),u]})});J3.classes=ag;J3.displayName="@mantine/core/MenuDropdown";const vIe={},X3=wi((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,color:a,closeMenuOnClick:l,leftSection:c,rightSection:u,children:f,disabled:p,"data-disabled":m,...y}=Ye("MenuItem",vIe,e),b=fv(),w=Ps(),{dir:S}=cv(),E=k.useRef(null),T=b.getItemIndex(E.current),A=y,M=$l(A.onMouseLeave,()=>b.setHovered(-1)),R=$l(A.onMouseEnter,()=>b.setHovered(b.getItemIndex(E.current))),O=$l(A.onClick,()=>{m||(typeof l=="boolean"?l&&b.closeDropdownImmediately():b.closeOnItemClick&&b.closeDropdownImmediately())}),I=$l(A.onFocus,()=>b.setHovered(b.getItemIndex(E.current))),L=a?w.variantColorResolver({color:a,theme:w,variant:"light"}):void 0,$=a?rg({color:a,theme:w}):null;return v.jsxs(Ch,{...y,unstyled:b.unstyled,tabIndex:b.menuItemTabIndex,onFocus:I,...b.getStyles("item",{className:r,style:o,styles:i,classNames:n}),ref:uu(E,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||m||void 0,"data-hovered":b.hovered===T?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:R,onMouseLeave:M,onClick:O,onKeyDown:GY({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:b.loop,dir:S,orientation:"vertical",onKeyDown:A.onKeyDown}),__vars:{"--menu-item-color":$?.isThemeColor&&$?.shade===void 0?`var(--mantine-color-${$.color}-6)`:L?.color,"--menu-item-hover":L?.hover},children:[c&&v.jsx("div",{...b.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:c}),f&&v.jsx("div",{...b.getStyles("itemLabel",{styles:i,classNames:n}),children:f}),u&&v.jsx("div",{...b.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:u})]})});X3.classes=ag;X3.displayName="@mantine/core/MenuItem";const xIe={},Q3=Wt((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,...a}=Ye("MenuLabel",xIe,e),l=fv();return v.jsx(ft,{ref:t,...l.getStyles("label",{className:r,style:o,styles:i,classNames:n}),...a})});Q3.classes=ag;Q3.displayName="@mantine/core/MenuLabel";const wIe={refProp:"ref"},FJ=k.forwardRef((e,t)=>{const{children:n,refProp:r,...o}=Ye("MenuTarget",wIe,e);if(!ov(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=fv(),s=n.props,a=$l(s.onClick,()=>{i.trigger==="click"?i.toggleDropdown():i.trigger==="click-hover"&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())}),l=$l(s.onMouseEnter,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),c=$l(s.onMouseLeave,()=>{(i.trigger==="hover"||i.trigger==="click-hover"&&!i.openedViaClick)&&i.closeDropdown()});return v.jsx($d.Target,{refProp:r,popupType:"menu",ref:t,...o,children:k.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:c,"data-expanded":i.opened?!0:void 0})})});FJ.displayName="@mantine/core/MenuTarget";const SIe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Sr(e){const t=Ye("Menu",SIe,e),{children:n,onOpen:r,onClose:o,opened:i,defaultOpened:s,trapFocus:a,onChange:l,closeOnItemClick:c,loop:u,closeOnEscape:f,trigger:p,openDelay:m,closeDelay:y,classNames:b,styles:w,unstyled:S,variant:E,vars:T,menuItemTabIndex:A,keepMounted:M,withInitialFocusPlaceholder:R,...O}=t,I=Ut({name:"Menu",classes:ag,props:t,classNames:b,styles:w,unstyled:S}),[L,{setHovered:$,resetHovered:B}]=cMe(),[G,V]=ng({value:i,defaultValue:s,finalValue:!1,onChange:l}),[W,K]=k.useState(!1),F=()=>{V(!1),K(!1),G&&o?.()},q=()=>{V(!0),!G&&r?.()},H=()=>{G?F():q()},{openDropdown:z,closeDropdown:N}=pIe({open:q,close:F,closeDelay:y,openDelay:m}),U=ce=>lMe("[data-menu-item]","[data-menu-dropdown]",ce),{resolvedClassNames:te,resolvedStyles:D}=YC({classNames:b,styles:w,props:t});return kd(()=>{B()},[G]),v.jsx(gIe,{value:{getStyles:I,opened:G,toggleDropdown:H,getItemIndex:U,hovered:L,setHovered:$,openedViaClick:W,setOpenedViaClick:K,closeOnItemClick:c,closeDropdown:p==="click"?F:N,openDropdown:p==="click"?q:z,closeDropdownImmediately:F,loop:u,trigger:p,unstyled:S,menuItemTabIndex:A,withInitialFocusPlaceholder:R},children:v.jsx($d,{...O,opened:G,onChange:H,defaultOpened:s,trapFocus:M?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:te,styles:D,unstyled:S,variant:E,keepMounted:M,children:n})})}Sr.extend=e=>e;Sr.withProps=DNe(Sr);Sr.classes=ag;Sr.displayName="@mantine/core/Menu";Sr.Item=X3;Sr.Label=Q3;Sr.Dropdown=J3;Sr.Target=FJ;Sr.Divider=Y3;const kIe={duration:100,transition:"fade"};function CIe(e,t){return{...kIe,...t,...e}}function EIe({offset:e,position:t,defaultOpened:n}){const[r,o]=k.useState(n),i=k.useRef(null),{x:s,y:a,elements:l,refs:c,update:u,placement:f}=kh({placement:t,middleware:[au({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=f.includes("right")?e:t.includes("left")?e*-1:0,m=f.includes("bottom")?e:t.includes("top")?e*-1:0,y=k.useCallback(({clientX:b,clientY:w})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:b,y:w,left:b+p,top:w+m,right:b,bottom:w}}})},[l.reference]);return k.useEffect(()=>{if(c.floating.current){const b=i.current;b.addEventListener("mousemove",y);const w=Zc(c.floating.current);return w.forEach(S=>{S.addEventListener("scroll",u)}),()=>{b.removeEventListener("mousemove",y),w.forEach(S=>{S.removeEventListener("scroll",u)})}}},[l.reference,c.floating.current,u,y,r]),{handleMouseMove:y,x:s,y:a,opened:r,setOpened:o,boundaryRef:i,floating:c.setFloating}}var lE={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const TIe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:iv("popover")},_Ie=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:oi(t),"--tooltip-bg":n?Yl(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),eP=Wt((e,t)=>{const n=Ye("TooltipFloating",TIe,e),{children:r,refProp:o,withinPortal:i,style:s,className:a,classNames:l,styles:c,unstyled:u,radius:f,color:p,label:m,offset:y,position:b,multiline:w,zIndex:S,disabled:E,defaultOpened:T,variant:A,vars:M,portalProps:R,...O}=n,I=Ps(),L=Ut({name:"TooltipFloating",props:n,classes:lE,className:a,style:s,classNames:l,styles:c,unstyled:u,rootSelector:"tooltip",vars:M,varsResolver:_Ie}),{handleMouseMove:$,x:B,y:G,opened:V,boundaryRef:W,floating:K,setOpened:F}=EIe({offset:y,position:b,defaultOpened:T});if(!ov(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const q=uu(W,E3(r),t),H=r.props,z=U=>{H.onMouseEnter?.(U),$(U),F(!0)},N=U=>{H.onMouseLeave?.(U),F(!1)};return v.jsxs(v.Fragment,{children:[v.jsx(uv,{...R,withinPortal:i,children:v.jsx(ft,{...O,...L("tooltip",{style:{...cJ(s,I),zIndex:S,display:!E&&V?"block":"none",top:(G&&Math.round(G))??"",left:(B&&Math.round(B))??""}}),variant:A,ref:K,mod:{multiline:w},children:m})}),k.cloneElement(r,{...H,[o]:q,onMouseEnter:z,onMouseLeave:N})]})});eP.classes=lE;eP.displayName="@mantine/core/TooltipFloating";const VJ=k.createContext(!1),AIe=VJ.Provider,MIe=()=>k.useContext(VJ),NIe={openDelay:0,closeDelay:0};function tP(e){const{openDelay:t,closeDelay:n,children:r}=Ye("TooltipGroup",NIe,e);return v.jsx(AIe,{value:!0,children:v.jsx(e2e,{delay:{open:t,close:n},children:r})})}tP.displayName="@mantine/core/TooltipGroup";tP.extend=e=>e;function RIe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function IIe(e){const t=RIe(e.middlewares),n=[Zi(e.offset)];return t.shift&&n.push(au(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?As():As(t.flip)),n.push(r3({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?a0():a0(t.inline)):e.inline&&n.push(a0()),n}function OIe(e){const[t,n]=k.useState(e.defaultOpened),o=typeof e.opened=="boolean"?e.opened:t,i=MIe(),s=av(),a=k.useCallback(R=>{n(R),R&&E(s)},[s]),{x:l,y:c,context:u,refs:f,update:p,placement:m,middlewareData:{arrow:{x:y,y:b}={}}}=kh({strategy:e.strategy,placement:e.position,open:o,onOpenChange:a,middleware:IIe(e)}),{delay:w,currentId:S,setCurrentId:E}=t2e(u,{id:s}),{getReferenceProps:T,getFloatingProps:A}=a3([XEe(u,{enabled:e.events?.hover,delay:i?w:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),h2e(u,{enabled:e.events?.focus,visibleOnly:!0}),m2e(u,{role:"tooltip"}),eY(u,{enabled:typeof e.opened>"u"})]);kJ({opened:o,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:f,update:p}}),kd(()=>{e.onPositionChange?.(m)},[m]);const M=o&&S&&S!==s;return{x:l,y:c,arrowX:y,arrowY:b,reference:f.setReference,floating:f.setFloating,getFloatingProps:A,getReferenceProps:T,isGroupPhase:M,opened:o,placement:m}}const W8={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:iv("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},PIe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:oi(t),"--tooltip-bg":n?Yl(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),lg=Wt((e,t)=>{const n=Ye("Tooltip",W8,e),{children:r,position:o,refProp:i,label:s,openDelay:a,closeDelay:l,onPositionChange:c,opened:u,defaultOpened:f,withinPortal:p,radius:m,color:y,classNames:b,styles:w,unstyled:S,style:E,className:T,withArrow:A,arrowSize:M,arrowOffset:R,arrowRadius:O,arrowPosition:I,offset:L,transitionProps:$,multiline:B,events:G,zIndex:V,disabled:W,positionDependencies:K,onClick:F,onMouseEnter:q,onMouseLeave:H,inline:z,variant:N,keepMounted:U,vars:te,portalProps:D,mod:ce,floatingStrategy:ae,middlewares:pe,...ie}=Ye("Tooltip",W8,n),{dir:ye}=cv(),Re=k.useRef(null),$e=OIe({position:yJ(ye,o),closeDelay:l,openDelay:a,onPositionChange:c,opened:u,defaultOpened:f,events:G,arrowRef:Re,arrowOffset:R,offset:typeof L=="number"?L+(A?M/2:0):L,positionDependencies:[...K,r],inline:z,strategy:ae,middlewares:pe}),Be=Ut({name:"Tooltip",props:n,classes:lE,className:T,style:E,classNames:b,styles:w,unstyled:S,rootSelector:"tooltip",vars:te,varsResolver:PIe});if(!ov(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const je=uu($e.reference,E3(r),t),Le=CIe($,{duration:100,transition:"fade"}),Pe=r.props;return v.jsxs(v.Fragment,{children:[v.jsx(uv,{...D,withinPortal:p,children:v.jsx(Eh,{...Le,keepMounted:U,mounted:!W&&!!$e.opened,duration:$e.isGroupPhase?10:Le.duration,children:me=>v.jsxs(ft,{...ie,"data-fixed":ae==="fixed"||void 0,variant:N,mod:[{multiline:B},ce],...$e.getFloatingProps({ref:$e.floating,className:Be("tooltip").className,style:{...Be("tooltip").style,...me,zIndex:V,top:$e.y??0,left:$e.x??0}}),children:[s,v.jsx(O3,{ref:Re,arrowX:$e.arrowX,arrowY:$e.arrowY,visible:A,position:$e.placement,arrowSize:M,arrowOffset:R,arrowRadius:O,arrowPosition:I,...Be("arrow")})]})})}),k.cloneElement(r,$e.getReferenceProps({onClick:F,onMouseEnter:q,onMouseLeave:H,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:Li(T,Pe.className),...Pe,[i]:je}))]})});lg.classes=lE;lg.displayName="@mantine/core/Tooltip";lg.Floating=eP;lg.Group=tP;var HJ={root:"m_18320242","skeleton-fade":"m_299c329c"};const DIe={visible:!0,animate:!0},$Ie=(e,{width:t,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":Ce(n),"--skeleton-width":Ce(o?n:t),"--skeleton-radius":o?"1000px":r===void 0?void 0:oi(r)}}),GS=Wt((e,t)=>{const n=Ye("Skeleton",DIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,width:c,height:u,circle:f,visible:p,radius:m,animate:y,mod:b,...w}=n,S=Ut({name:"Skeleton",classes:HJ,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:$Ie});return v.jsx(ft,{ref:t,...S("root"),mod:[{visible:p,animate:y},b],...w})});GS.classes=HJ;GS.displayName="@mantine/core/Skeleton";var UJ={root:"m_6d731127"};const jIe={gap:"md",align:"stretch",justify:"flex-start"},LIe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":sv(t),"--stack-align":n,"--stack-justify":r}}),hv=Wt((e,t)=>{const n=Ye("Stack",jIe,e),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,align:c,justify:u,gap:f,variant:p,...m}=n,y=Ut({name:"Stack",props:n,classes:UJ,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:LIe});return v.jsx(ft,{ref:t,...y("root"),variant:p,...m})});hv.classes=UJ;hv.displayName="@mantine/core/Stack";const[zIe,nP]=ZC("Tabs component was not found in the tree");var pv={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const BIe={},rP=Wt((e,t)=>{const n=Ye("TabsList",BIe,e),{children:r,className:o,grow:i,justify:s,classNames:a,styles:l,style:c,mod:u,...f}=n,p=nP();return v.jsx(ft,{...f,...p.getStyles("list",{className:o,style:c,classNames:a,styles:l,props:n,variant:p.variant}),ref:t,role:"tablist",variant:p.variant,mod:[{grow:i,orientation:p.orientation,placement:p.orientation==="vertical"&&p.placement,inverted:p.inverted},u],"aria-orientation":p.orientation,__vars:{"--tabs-justify":s},children:r})});rP.classes=pv;rP.displayName="@mantine/core/TabsList";const FIe={},oP=Wt((e,t)=>{const n=Ye("TabsPanel",FIe,e),{children:r,className:o,value:i,classNames:s,styles:a,style:l,mod:c,keepMounted:u,...f}=n,p=nP(),m=p.value===i,y=p.keepMounted||u||m?r:null;return v.jsx(ft,{...f,...p.getStyles("panel",{className:o,classNames:s,styles:a,style:[l,m?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:p.orientation},c],role:"tabpanel",id:p.getPanelId(i),"aria-labelledby":p.getTabId(i),children:y})});oP.classes=pv;oP.displayName="@mantine/core/TabsPanel";const VIe={},iP=Wt((e,t)=>{const n=Ye("TabsTab",VIe,e),{className:r,children:o,rightSection:i,leftSection:s,value:a,onClick:l,onKeyDown:c,disabled:u,color:f,style:p,classNames:m,styles:y,vars:b,mod:w,tabIndex:S,...E}=n,T=Ps(),{dir:A}=cv(),M=nP(),R=a===M.value,O=L=>{M.onChange(M.allowTabDeactivation&&a===M.value?null:a),l?.(L)},I={classNames:m,styles:y,props:n};return v.jsxs(Ch,{...E,...M.getStyles("tab",{className:r,style:p,variant:M.variant,...I}),disabled:u,unstyled:M.unstyled,variant:M.variant,mod:[{active:R,disabled:u,orientation:M.orientation,inverted:M.inverted,placement:M.orientation==="vertical"&&M.placement},w],ref:t,role:"tab",id:M.getTabId(a),"aria-selected":R,tabIndex:S!==void 0?S:R||M.value===null?0:-1,"aria-controls":M.getPanelId(a),onClick:O,__vars:{"--tabs-color":f?Yl(f,T):void 0},onKeyDown:GY({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:M.activateTabWithKeyboard,loop:M.loop,orientation:M.orientation||"horizontal",dir:A,onKeyDown:c}),children:[s&&v.jsx("span",{...M.getStyles("tabSection",I),"data-position":"left",children:s}),o&&v.jsx("span",{...M.getStyles("tabLabel",I),children:o}),i&&v.jsx("span",{...M.getStyles("tabSection",I),"data-position":"right",children:i})]})});iP.classes=pv;iP.displayName="@mantine/core/TabsTab";const K8="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",HIe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},UIe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":oi(t),"--tabs-color":Yl(n,e),"--tabs-text-color":mNe(r,e)?nJ({color:n,theme:e,autoContrast:r}):void 0}}),Bc=Wt((e,t)=>{const n=Ye("Tabs",HIe,e),{defaultValue:r,value:o,onChange:i,orientation:s,children:a,loop:l,id:c,activateTabWithKeyboard:u,allowTabDeactivation:f,variant:p,color:m,radius:y,inverted:b,placement:w,keepMounted:S,classNames:E,styles:T,unstyled:A,className:M,style:R,vars:O,autoContrast:I,mod:L,...$}=n,B=av(c),[G,V]=ng({value:o,defaultValue:r,finalValue:null,onChange:i}),W=Ut({name:"Tabs",props:n,classes:pv,className:M,style:R,classNames:E,styles:T,unstyled:A,vars:O,varsResolver:UIe});return v.jsx(zIe,{value:{placement:w,value:G,orientation:s,id:B,loop:l,activateTabWithKeyboard:u,getTabId:_8(`${B}-tab`,K8),getPanelId:_8(`${B}-panel`,K8),onChange:V,allowTabDeactivation:f,variant:p,color:m,radius:y,inverted:b,keepMounted:S,unstyled:A,getStyles:W},children:v.jsx(ft,{ref:t,id:B,variant:p,mod:[{orientation:s,inverted:s==="horizontal"&&b,placement:s==="vertical"&&w},L],...W("root"),...$,children:a})})});Bc.classes=pv;Bc.displayName="@mantine/core/Tabs";Bc.Tab=iP;Bc.Panel=oP;Bc.List=rP;const GIe={},cE=Wt((e,t)=>{const n=Ye("TextInput",GIe,e);return v.jsx(ig,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});cE.classes=ig.classes;cE.displayName="@mantine/core/TextInput";const GJ=(e,t,n=!1)=>{const r=[];function o(i,s="--bn"){for(const a in i){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${s}-${l}`;typeof i[a]!="object"?(typeof i[a]=="number"&&(i[a]=`${i[a]}px`),n?t.style.removeProperty(c):t.style.setProperty(c,i[a].toString())):o(i[a],c)}}return o(e),r},Y8=(e,t)=>GJ(e,t),qIe={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},ZIe=e=>GJ(qIe,e,!0),qJ=e=>v.jsxs(hv,{gap:0,className:"bn-tooltip",children:[v.jsx(Jl,{size:"sm",lineClamp:5,children:e.mainTooltip}),e.secondaryTooltip&&v.jsx(Jl,{size:"xs",lineClamp:5,children:e.secondaryTooltip})]}),yA=k.forwardRef((e,t)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:i,icon:s,isSelected:a,isDisabled:l,onClick:c,label:u,variant:f,...p}=e;_t(p,!1);const[m,y]=k.useState(!1),b=r?v.jsx(il,{"aria-label":u,className:n,onMouseDown:w=>{VN()&&w.currentTarget.focus()},onClick:w=>{y(!0),c?.(w)},onPointerLeave:()=>y(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:f==="compact"?"compact-xs":"xs",disabled:l||!1,ref:t,...p,children:r}):v.jsx(Th,{className:n,"aria-label":u,onMouseDown:w=>{VN()&&w.currentTarget.focus()},onClick:w=>{y(!0),c?.(w)},onPointerLeave:()=>y(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:f==="compact"?20:30,disabled:l||!1,ref:t,...p,children:s});return o?v.jsx(lg,{disabled:m,withinPortal:!1,label:v.jsx(qJ,{mainTooltip:o,secondaryTooltip:i}),children:b}):b}),WIe=k.forwardRef((e,t)=>{const{className:n,text:r,icon:o,isSelected:i,mainTooltip:s,secondaryTooltip:a,onClick:l,onMouseEnter:c,...u}=e;_t(u,!1);const[f,p]=k.useState(!1),m=v.jsxs(aE,{className:n,checked:i===!0,wrapperProps:{onMouseEnter:c,onMouseLeave:()=>p(!1),onClick:y=>{p(!0),l?.(y)}},variant:"light",icon:null,ref:t,children:[v.jsx("span",{children:o}),v.jsx("span",{children:r})]});return!s||f?m:v.jsx(lg,{refProp:"rootRef",withinPortal:!1,label:v.jsx(qJ,{mainTooltip:s,secondaryTooltip:a}),children:m})}),KIe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return _t(o),v.jsx(Do,{className:n,ref:t,children:r})}),YIe=k.forwardRef((e,t)=>{const{className:n,children:r,headerText:o,selected:i,onFocus:s,onBlur:a,tabIndex:l,...c}=e;_t(c,!1);const u=k.useRef(null);return k.useEffect(()=>{var f;i&&((f=u.current)==null||f.scrollIntoView({behavior:"smooth",block:"center"}))},[i]),v.jsxs(dv,{className:Rn(n,i?"selected":""),onFocus:s,onBlur:a,tabIndex:l,ref:g3([t,u]),children:[o&&v.jsx(Jl,{className:"bn-header-text",children:o}),r]})}),JIe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return _t(o,!1),v.jsx(dv.Section,{className:n,ref:t,children:r})}),XIe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return _t(o,!1),v.jsx(Z3,{className:n,label:v.jsx(Jl,{children:r}),ref:t})}),QIe=k.forwardRef((e,t)=>{const{authorInfo:n,timeString:r,edited:o,...i}=e,s=Ct();return _t(i,!1),n==="loading"?v.jsxs(Do,{children:[v.jsx(GS,{height:24,width:24}),v.jsx("div",{children:v.jsx(GS,{height:12,width:100})})]}):v.jsxs(Do,{children:[v.jsx(iE,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),v.jsxs(Jl,{fz:"sm",fw:"bold",children:[n.username,v.jsxs(Jl,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&`(${s.comments.edited})`]})]})]})}),eOe=k.forwardRef((e,t)=>{const{className:n,showActions:r,authorInfo:o,timeString:i,edited:s,actions:a,children:l,...c}=e,{hovered:u,ref:f}=CMe(),{focused:p,ref:m}=JY(),y=g3([t,f]);return _t(c,!1),v.jsxs(Do,{pos:"relative",ref:y,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&u||p)?v.jsx(Do,{ref:m,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,v.jsx(QIe,{...e}),l]})}),tOe=k.forwardRef((e,t)=>{const{className:n,autoFocus:r,onFocus:o,onBlur:i,editor:s,editable:a,...l}=e;return _t(l,!1),v.jsx(JJ,{autoFocus:r,className:n,editor:e.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:t,onFocus:o,onBlur:i,children:v.jsx(v3,{formattingToolbar:nOe})})}),nOe=()=>{const e=y3([]).filter(t=>t.key!=="nestBlockButton"&&t.key!=="unnestBlockButton");return v.jsx(b3,{blockTypeSelectItems:[],children:e})},rOe=k.forwardRef((e,t)=>{const{className:n,name:r,label:o,variant:i,icon:s,value:a,autoFocus:l,placeholder:c,disabled:u,onKeyDown:f,onChange:p,onSubmit:m,autoComplete:y,rightSection:b,...w}=e;return _t(w),v.jsx(cE,{size:"xs",className:Rn(n||"",i==="large"?"bn-mt-input-large":""),ref:t,name:r,label:o,leftSection:s,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:b,placeholder:c,disabled:u,onKeyDown:f,onChange:p,onSubmit:m,autoComplete:y})});var ZJ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J8=se.createContext&&se.createContext(ZJ),oOe=["attr","size","title"];function iOe(e,t){if(e==null)return{};var n=sOe(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qS.apply(this,arguments)}function X8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ZS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X8(Object(n),!0).forEach(function(r){aOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aOe(e,t,n){return t=lOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lOe(e){var t=cOe(e,"string");return typeof t=="symbol"?t:t+""}function cOe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WJ(e){return e&&e.map((t,n)=>se.createElement(t.tag,ZS({key:n},t.attr),WJ(t.child)))}function KJ(e){return t=>se.createElement(uOe,qS({attr:ZS({},e.attr)},t),WJ(e.child))}function uOe(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=iOe(e,oOe),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),se.createElement("svg",qS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:ZS(ZS({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&se.createElement("title",null,i),e.children)};return J8!==void 0?se.createElement(J8.Consumer,null,n=>t(n)):t(ZJ)}function dOe(e){return KJ({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function fOe(e){return KJ({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}const YJ=k.createContext(void 0),hOe=k.forwardRef((e,t)=>{const{children:n,onOpenChange:r,position:o,sub:i,...s}=e;_t(s);const[a,l]=k.useState(!1),c=k.useRef(null),u=k.useRef(void 0),f=k.useCallback(()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{l(!1)},250)},[]),p=k.useCallback(()=>{u.current&&clearTimeout(u.current),l(!0)},[]);return v.jsx(YJ.Provider,{value:{onMenuMouseOver:p,onMenuMouseLeave:f},children:v.jsx(Sr.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:lv(t,c),onMouseOver:p,onMouseLeave:f,children:v.jsx(Sr,{portalProps:{target:c.current?c.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})}),pOe=e=>{const{children:t,onOpenChange:n,position:r,sub:o,...i}=e;return _t(i),o?v.jsx(hOe,{...e}):v.jsx(Sr,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:t})},mOe=k.forwardRef((e,t)=>{const{className:n,children:r,icon:o,checked:i,subTrigger:s,onClick:a,...l}=e;return _t(l,!1),s?v.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation()},ref:t,...l,children:[r,v.jsx(fOe,{size:15})]}):v.jsx(Sr.Item,{className:n,ref:t,leftSection:o,rightSection:i?v.jsx(F3,{size:10}):i===!1?v.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),gOe=e=>{const{children:t,sub:n,...r}=e;return _t(r),v.jsx(Sr.Target,{children:t})},yOe=k.forwardRef((e,t)=>{const{className:n,children:r,sub:o,...i}=e;_t(i);const s=k.useContext(YJ);return v.jsx(Sr.Dropdown,{className:n,ref:t,onMouseOver:s?.onMenuMouseOver,onMouseLeave:s?.onMenuMouseLeave,children:r})}),bOe=k.forwardRef((e,t)=>{const{className:n,...r}=e;return _t(r),v.jsx(Sr.Divider,{className:n,ref:t})}),vOe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return _t(o),v.jsx(Sr.Label,{className:n,ref:t,children:r})}),xOe=k.forwardRef((e,t)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,label:c,...u}=e;return _t(u,!1),o?v.jsx(Th,{size:24,className:n,ref:t,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...u,children:o}):v.jsx(il,{className:n,ref:t,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...u,children:r})}),wOe=k.forwardRef((e,t)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:i,setOpenTab:s,loading:a,...l}=e;return _t(l),v.jsx(Do,{className:n,ref:t,children:v.jsxs(Bc,{value:i,defaultValue:o,onChange:s,children:[a&&v.jsx(K3,{visible:a}),v.jsx(Bc.List,{children:r.map(c=>v.jsx(Bc.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>v.jsx(Bc.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),SOe=k.forwardRef((e,t)=>{const{className:n,children:r,onClick:o,label:i,...s}=e;return _t(s),v.jsx(il,{size:"xs","aria-label":i,className:n,ref:t,onClick:o,...s,children:r})}),kOe=k.forwardRef((e,t)=>{const{className:n,accept:r,value:o,placeholder:i,onChange:s,...a}=e;return _t(a),v.jsx(hIe,{size:"xs",className:n,ref:t,accept:r,value:o,placeholder:i,onChange:s,...a})}),COe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return _t(o),v.jsx("div",{className:n,ref:t,children:r})}),EOe=k.forwardRef((e,t)=>{const{className:n,value:r,placeholder:o,onKeyDown:i,onChange:s,...a}=e;return _t(a),v.jsx(cE,{size:"xs","data-test":"embed-input",className:n,ref:t,value:r,placeholder:o,onKeyDown:i,onChange:s})}),TOe=e=>{const{opened:t,position:n,children:r,...o}=e;return _t(o),v.jsx($d,{withinPortal:!1,opened:t,position:n,children:r})},_Oe=e=>{const{children:t,...n}=e;return _t(n),v.jsx(D3,{children:t})},AOe=k.forwardRef((e,t)=>{const{className:n,children:r,variant:o,...i}=e;return _t(i),v.jsx(XC,{className:n,ref:t,children:r})}),MOe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return _t(o,!1),v.jsx(Do,{align:"center",gap:0,className:n,ref:t,...o,children:r})}),NOe=k.forwardRef((e,t)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,label:c,...u}=e;return _t(u,!1),o?v.jsx(Th,{size:24,className:n,ref:t,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...u,children:o}):v.jsx(il,{className:n,ref:t,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...u,children:r})}),ROe=k.forwardRef((e,t)=>{const{className:n,children:r,id:o,...i}=e;return _t(i),v.jsx(hv,{gap:0,className:n,ref:t,id:o,role:"listbox",children:r})}),IOe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return _t(o),v.jsx(Do,{className:n,ref:t,children:v.jsx(Do,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),OOe=k.forwardRef((e,t)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=e;_t(a);const l=k.useRef(null);return k.useEffect(()=>{if(!l.current||!r)return;const c=PY(l.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),v.jsxs(Do,{gap:0,className:n,ref:lv(t,l),id:s,role:"option",onMouseDown:c=>c.preventDefault(),onClick:o,"aria-selected":r||void 0,children:[i.icon&&v.jsx(Do,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:i.icon}),v.jsxs(hv,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[v.jsx(Jl,{className:"bn-mt-suggestion-menu-item-title",children:i.title}),v.jsx(Jl,{className:"bn-mt-suggestion-menu-item-subtitle",children:i.subtext})]}),i.badge&&v.jsx(Do,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:v.jsx(H3,{size:"xs",children:i.badge})})]})}),POe=k.forwardRef((e,t)=>{const{className:n,children:r,...o}=e;return _t(o),v.jsx(Do,{className:n,ref:t,children:r})}),DOe=k.forwardRef((e,t)=>{const{className:n,...r}=e;return _t(r),v.jsx(jd,{className:n,type:"dots",size:16,ref:t})}),$Oe=k.forwardRef((e,t)=>{const{className:n,children:r,id:o,columns:i,...s}=e;return _t(s),v.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${i}, 1fr)`},ref:t,id:o,role:"grid",children:r})}),jOe=k.forwardRef((e,t)=>{const{className:n,children:r,columns:o,...i}=e;return _t(i),v.jsx(Do,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:t,children:v.jsx(Do,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),LOe=k.forwardRef((e,t)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=e;_t(a);const l=k.useRef(null);return k.useEffect(()=>{if(!l.current||!r)return;const c=PY(l.current,document.querySelector(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),v.jsx("div",{className:n,ref:lv(t,l),id:s,role:"option",onClick:o,"aria-selected":r||void 0,children:i.icon})}),zOe=k.forwardRef((e,t)=>{const{className:n,children:r,columns:o,...i}=e;return _t(i),v.jsx(jd,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:t})}),BOe=k.forwardRef((e,t)=>{const{children:n,className:r,onMouseDown:o,onClick:i,...s}=e;return _t(s,!1),v.jsx(il,{className:r,ref:t,onMouseDown:o,onClick:i,...s,children:n})}),FOe=k.forwardRef((e,t)=>{const{className:n,children:r,draggable:o,onDragStart:i,onDragEnd:s,style:a,label:l,...c}=e;return _t(c,!1),v.jsx(il,{className:n,ref:t,"aria-label":l,draggable:o,onDragStart:i,onDragEnd:s,style:a,...c,children:r})}),bA=k.forwardRef((e,t)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:i,variant:s,...a}=e;_t(a);const{ref:l,focused:c}=JY(),u=YY(c),f=lv(t,l,u);return v.jsx(B3,{className:n,ref:f,role:"toolbar",onMouseEnter:o,onMouseLeave:i,gap:s==="action-toolbar"?2:void 0,children:r})}),vA=k.forwardRef((e,t)=>{const{className:n,items:r,isDisabled:o,...i}=e;_t(i);const s=r.filter(a=>a.isSelected)[0];return s?v.jsxs(Sr,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[v.jsx(Sr.Target,{children:v.jsx(il,{onMouseDown:a=>{VN()&&a.currentTarget.focus()},leftSection:s.icon,rightSection:v.jsx(dOe,{}),size:"xs",variant:"subtle",disabled:o,children:s.text})}),v.jsx(Sr.Dropdown,{className:n,ref:t,children:r.map(a=>v.jsx(Sr.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?v.jsx(F3,{size:10,className:"bn-tick-icon"}):v.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),VOe={FormattingToolbar:{Root:bA,Button:yA,Select:vA},FilePanel:{Root:wOe,Button:SOe,FileInput:kOe,TabPanel:COe,TextInput:EOe},GridSuggestionMenu:{Root:$Oe,Item:LOe,EmptyItem:jOe,Loader:zOe},LinkToolbar:{Root:bA,Button:yA,Select:vA},SideMenu:{Root:MOe,Button:NOe},SuggestionMenu:{Root:ROe,Item:OOe,EmptyItem:IOe,Label:POe,Loader:DOe},TableHandle:{Root:FOe,ExtendButton:BOe},Generic:{Badge:{Root:WIe,Group:KIe},Form:{Root:e=>v.jsx("div",{children:e.children}),TextInput:rOe},Menu:{Root:pOe,Trigger:gOe,Dropdown:yOe,Divider:bOe,Label:vOe,Item:mOe,Button:xOe},Popover:{Root:TOe,Trigger:_Oe,Content:AOe},Toolbar:{Root:bA,Button:yA,Select:vA}},Comments:{Comment:eOe,Editor:tOe,Card:YIe,CardSection:JIe,ExpandSectionsPrompt:XIe}},HOe={activeClassName:""},JJ=e=>{const{className:t,theme:n,...r}=e,o=ol(),i=NY(),s=o?.colorSchemePreference||i,a=k.useCallback(c=>{if(c&&(ZIe(c),typeof n=="object")){if("light"in n&&"dark"in n){Y8(n[s==="dark"?"dark":"light"],c);return}Y8(n,c);return}},[s,n]),l=typeof n=="string"?n:s!=="no-preference"?s:"light";return v.jsx(sY.Provider,{value:VOe,children:v.jsx(iJ,{theme:HOe,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:v.jsx(X_e,{"data-mantine-color-scheme":l,className:Rn("bn-mantine",t||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})};let Hr=class extends Error{constructor(t){super(t),this.name="ShikiError"}};function UOe(e){return sP(e)}function sP(e){return Array.isArray(e)?GOe(e):e instanceof RegExp?e:typeof e=="object"?qOe(e):e}function GOe(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=sP(e[n]);return t}function qOe(e){let t={};for(let n in e)t[n]=sP(e[n]);return t}function XJ(e,...t){return t.forEach(n=>{for(let r in n)e[r]=n[r]}),e}function QJ(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return t===0?e:~t===e.length-1?QJ(e.substring(0,e.length-1)):e.substr(~t+1)}var xA=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,mx=class{static hasCaptures(e){return e===null?!1:(xA.lastIndex=0,xA.test(e))}static replaceCaptures(e,t,n){return e.replace(xA,(r,o,i,s)=>{let a=n[parseInt(o||i,10)];if(a){let l=t.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(s){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function eX(e,t){return e<t?-1:e>t?1:0}function tX(e,t){if(e===null&&t===null)return 0;if(!e)return-1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let o=0;o<n;o++){let i=eX(e[o],t[o]);if(i!==0)return i}return 0}return n-r}function Q8(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function nX(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var rX=class{constructor(e){this.fn=e}cache=new Map;get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},WS=class{constructor(e,t,n){this._colorMap=e,this._defaults=t,this._root=n}static createFromRawTheme(e,t){return this.createFromParsedTheme(KOe(e),t)}static createFromParsedTheme(e,t){return JOe(e,t)}_cachedMatchRoot=new rX(e=>this._root.match(e));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(e===null)return this._defaults;const t=e.scopeName,r=this._cachedMatchRoot.get(t).find(o=>ZOe(e.parent,o.parentScopes));return r?new oX(r.fontStyle,r.foreground,r.background):null}},wA=class vw{constructor(t,n){this.parent=t,this.scopeName=n}static push(t,n){for(const r of n)t=new vw(t,r);return t}static from(...t){let n=null;for(let r=0;r<t.length;r++)n=new vw(n,t[r]);return n}push(t){return new vw(this,t)}getSegments(){let t=this;const n=[];for(;t;)n.push(t.scopeName),t=t.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(t){return this===t?!0:this.parent===null?!1:this.parent.extends(t)}getExtensionIfDefined(t){const n=[];let r=this;for(;r&&r!==t;)n.push(r.scopeName),r=r.parent;return r===t?n.reverse():void 0}};function ZOe(e,t){if(t.length===0)return!0;for(let n=0;n<t.length;n++){let r=t[n],o=!1;if(r===">"){if(n===t.length-1)return!1;r=t[++n],o=!0}for(;e&&!WOe(e.scopeName,r);){if(o)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}function WOe(e,t){return t===e||e.startsWith(t)&&e[t.length]==="."}var oX=class{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}};function KOe(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],r=0;for(let o=0,i=t.length;o<i;o++){let s=t[o];if(!s.settings)continue;let a;if(typeof s.scope=="string"){let f=s.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),a=f.split(",")}else Array.isArray(s.scope)?a=s.scope:a=[""];let l=-1;if(typeof s.settings.fontStyle=="string"){l=0;let f=s.settings.fontStyle.split(" ");for(let p=0,m=f.length;p<m;p++)switch(f[p]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof s.settings.foreground=="string"&&Q8(s.settings.foreground)&&(c=s.settings.foreground);let u=null;typeof s.settings.background=="string"&&Q8(s.settings.background)&&(u=s.settings.background);for(let f=0,p=a.length;f<p;f++){let y=a[f].trim().split(" "),b=y[y.length-1],w=null;y.length>1&&(w=y.slice(0,y.length-1),w.reverse()),n[r++]=new YOe(b,w,o,l,c,u)}}return n}var YOe=class{constructor(e,t,n,r,o,i){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=o,this.background=i}},Ko=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(Ko||{});function JOe(e,t){e.sort((l,c)=>{let u=eX(l.scope,c.scope);return u!==0||(u=tX(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",o="#ffffff";for(;e.length>=1&&e[0].scope==="";){let l=e.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(o=l.background)}let i=new XOe(t),s=new oX(n,i.getId(r),i.getId(o)),a=new e4e(new xR(0,null,-1,0,0),[]);for(let l=0,c=e.length;l<c;l++){let u=e[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,i.getId(u.foreground),i.getId(u.background))}return new WS(i,s,a)}var XOe=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(e===null)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},QOe=Object.freeze([]),xR=class iX{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(t,n,r,o,i){this.scopeDepth=t,this.parentScopes=n||QOe,this.fontStyle=r,this.foreground=o,this.background=i}clone(){return new iX(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(t){let n=[];for(let r=0,o=t.length;r<o;r++)n[r]=t[r].clone();return n}acceptOverwrite(t,n,r,o){this.scopeDepth>t?console.log("how did this happen?"):this.scopeDepth=t,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),o!==0&&(this.background=o)}},e4e=class wR{constructor(t,n=[],r={}){this._mainRule=t,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(t,n){if(t.scopeDepth!==n.scopeDepth)return n.scopeDepth-t.scopeDepth;let r=0,o=0;for(;t.parentScopes[r]===">"&&r++,n.parentScopes[o]===">"&&o++,!(r>=t.parentScopes.length||o>=n.parentScopes.length);){const i=n.parentScopes[o].length-t.parentScopes[r].length;if(i!==0)return i;r++,o++}return n.parentScopes.length-t.parentScopes.length}match(t){if(t!==""){let r=t.indexOf("."),o,i;if(r===-1?(o=t,i=""):(o=t.substring(0,r),i=t.substring(r+1)),this._children.hasOwnProperty(o))return this._children[o].match(i)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(wR._cmpBySpecificity),n}insert(t,n,r,o,i,s){if(n===""){this._doInsertHere(t,r,o,i,s);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new wR(this._mainRule.clone(),xR.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(t+1,c,r,o,i,s)}_doInsertHere(t,n,r,o,i){if(n===null){this._mainRule.acceptOverwrite(t,r,o,i);return}for(let s=0,a=this._rulesWithParentScopes.length;s<a;s++){let l=this._rulesWithParentScopes[s];if(tX(l.parentScopes,n)===0){l.acceptOverwrite(t,r,o,i);return}}r===-1&&(r=this._mainRule.fontStyle),o===0&&(o=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new xR(t,n,r,o,i))}},Rm=class Xs{static toBinaryStr(t){return t.toString(2).padStart(32,"0")}static print(t){const n=Xs.getLanguageId(t),r=Xs.getTokenType(t),o=Xs.getFontStyle(t),i=Xs.getForeground(t),s=Xs.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:i,background:s})}static getLanguageId(t){return(t&255)>>>0}static getTokenType(t){return(t&768)>>>8}static containsBalancedBrackets(t){return(t&1024)!==0}static getFontStyle(t){return(t&30720)>>>11}static getForeground(t){return(t&16744448)>>>15}static getBackground(t){return(t&4278190080)>>>24}static set(t,n,r,o,i,s,a){let l=Xs.getLanguageId(t),c=Xs.getTokenType(t),u=Xs.containsBalancedBrackets(t)?1:0,f=Xs.getFontStyle(t),p=Xs.getForeground(t),m=Xs.getBackground(t);return n!==0&&(l=n),r!==8&&(c=r),o!==null&&(u=o?1:0),i!==-1&&(f=i),s!==0&&(p=s),a!==0&&(m=a),(l<<0|c<<8|u<<10|f<<11|p<<15|m<<24)>>>0}};function KS(e,t){const n=[],r=t4e(e);let o=r.next();for(;o!==null;){let l=0;if(o.length===2&&o.charAt(1)===":"){switch(o.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=r.next()}let c=s();if(n.push({matcher:c,priority:l}),o!==",")break;o=r.next()}return n;function i(){if(o==="-"){o=r.next();const l=i();return c=>!!l&&!l(c)}if(o==="("){o=r.next();const l=a();return o===")"&&(o=r.next()),l}if(e7(o)){const l=[];do l.push(o),o=r.next();while(e7(o));return c=>t(l,c)}return null}function s(){const l=[];let c=i();for(;c;)l.push(c),c=i();return u=>l.every(f=>f(u))}function a(){const l=[];let c=s();for(;c&&(l.push(c),o==="|"||o===",");){do o=r.next();while(o==="|"||o===",");c=s()}return u=>l.some(f=>f(u))}}function e7(e){return!!e&&!!e.match(/[\w\.:]+/)}function t4e(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:()=>{if(!n)return null;const r=n[0];return n=t.exec(e),r}}}function sX(e){typeof e.dispose=="function"&&e.dispose()}var nb=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},n4e=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},r4e=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},o4e=class{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new nb(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const e=this.Q;this.Q=[];const t=new r4e;for(const n of e)i4e(n,this.initialScopeName,this.repo,t);for(const n of t.references)if(n instanceof nb){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function i4e(e,t,n,r){const o=n.lookup(e.scopeName);if(!o){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const i=n.lookup(t);e instanceof nb?xw({baseGrammar:i,selfGrammar:o},r):SR(e.ruleName,{baseGrammar:i,selfGrammar:o,repository:o.repository},r);const s=n.injections(e.scopeName);if(s)for(const a of s)r.add(new nb(a))}function SR(e,t,n){if(t.repository&&t.repository[e]){const r=t.repository[e];YS([r],t,n)}}function xw(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&YS(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&YS(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function YS(e,t,n){for(const r of e){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const o=r.repository?XJ({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&YS(r.patterns,{...t,repository:o},n);const i=r.include;if(!i)continue;const s=aX(i);switch(s.kind){case 0:xw({...t,selfGrammar:t.baseGrammar},n);break;case 1:xw(t,n);break;case 2:SR(s.ruleName,{...t,repository:o},n);break;case 3:case 4:const a=s.scopeName===t.selfGrammar.scopeName?t.selfGrammar:s.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(a){const l={baseGrammar:t.baseGrammar,selfGrammar:a,repository:o};s.kind===4?SR(s.ruleName,l,n):xw(l,n)}else s.kind===4?n.add(new n4e(s.scopeName,s.ruleName)):n.add(new nb(s.scopeName));break}}}var s4e=class{kind=0},a4e=class{kind=1},l4e=class{constructor(e){this.ruleName=e}kind=2},c4e=class{constructor(e){this.scopeName=e}kind=3},u4e=class{constructor(e,t){this.scopeName=e,this.ruleName=t}kind=4};function aX(e){if(e==="$base")return new s4e;if(e==="$self")return new a4e;const t=e.indexOf("#");if(t===-1)return new c4e(e);if(t===0)return new l4e(e.substring(1));{const n=e.substring(0,t),r=e.substring(t+1);return new u4e(n,r)}}var d4e=/\\(\d+)/,t7=/\\(\d+)/g,f4e=-1,lX=-2;var mv=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,t,n,r){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=mx.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=mx.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${QJ(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return!this._nameIsCapturing||this._name===null||e===null||t===null?this._name:mx.replaceCaptures(this._name,e,t)}getContentName(e,t){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:mx.replaceCaptures(this._contentName,e,t)}},h4e=class extends mv{retokenizeCapturedWithRuleId;constructor(e,t,n,r,o){super(e,t,n,r),this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,n,r){throw new Error("Not supported!")}},p4e=class extends mv{_match;captures;_cachedCompiledPatterns;constructor(e,t,n,r,o){super(e,t,n,null),this._match=new rb(r,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ob,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},n7=class extends mv{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,n,r,o){super(e,t,n,r),this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const n of this.patterns)e.getRule(n).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ob,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},kR=class extends mv{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,n,r,o,i,s,a,l,c){super(e,t,n,r),this._begin=new rb(o,this.id),this.beginCaptures=i,this._end=new rb(s||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ob;for(const n of this.patterns)e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}},JS=class extends mv{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(e,t,n,r,o,i,s,a,l){super(e,t,n,r),this._begin=new rb(o,this.id),this.beginCaptures=i,this.whileCaptures=a,this._while=new rb(s,lX),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ob;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new ob,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||""),this._cachedCompiledWhilePatterns}},cX=class Go{static createCaptureRule(t,n,r,o,i){return t.registerRule(s=>new h4e(n,s,r,o,i))}static getCompiledRuleId(t,n,r){return t.id||n.registerRule(o=>{if(t.id=o,t.match)return new p4e(t.$vscodeTextmateLocation,t.id,t.name,t.match,Go._compileCaptures(t.captures,n,r));if(typeof t.begin>"u"){t.repository&&(r=XJ({},r,t.repository));let i=t.patterns;return typeof i>"u"&&t.include&&(i=[{include:t.include}]),new n7(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,Go._compilePatterns(i,n,r))}return t.while?new JS(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,Go._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,Go._compileCaptures(t.whileCaptures||t.captures,n,r),Go._compilePatterns(t.patterns,n,r)):new kR(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,Go._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,Go._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,Go._compilePatterns(t.patterns,n,r))}),t.id}static _compileCaptures(t,n,r){let o=[];if(t){let i=0;for(const s in t){if(s==="$vscodeTextmateLocation")continue;const a=parseInt(s,10);a>i&&(i=a)}for(let s=0;s<=i;s++)o[s]=null;for(const s in t){if(s==="$vscodeTextmateLocation")continue;const a=parseInt(s,10);let l=0;t[s].patterns&&(l=Go.getCompiledRuleId(t[s],n,r)),o[a]=Go.createCaptureRule(n,t[s].$vscodeTextmateLocation,t[s].name,t[s].contentName,l)}}return o}static _compilePatterns(t,n,r){let o=[];if(t)for(let i=0,s=t.length;i<s;i++){const a=t[i];let l=-1;if(a.include){const c=aX(a.include);switch(c.kind){case 0:case 1:l=Go.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=Go.getCompiledRuleId(u,n,r));break;case 3:case 4:const f=c.scopeName,p=c.kind===4?c.ruleName:null,m=n.getExternalGrammar(f,r);if(m)if(p){let y=m.repository[p];y&&(l=Go.getCompiledRuleId(y,n,m.repository))}else l=Go.getCompiledRuleId(m.repository.$self,n,m.repository);break}}else l=Go.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof n7||c instanceof kR||c instanceof JS)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;o.push(l)}}return{patterns:o,hasMissingPatterns:(t?t.length:0)!==o.length}}},rb=class uX{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(t,n){if(t&&typeof t=="string"){const r=t.length;let o=0,i=[],s=!1;for(let a=0;a<r;a++)if(t.charAt(a)==="\\"&&a+1<r){const c=t.charAt(a+1);c==="z"?(i.push(t.substring(o,a)),i.push("$(?!\\n)(?<!\\n)"),o=a+2):(c==="A"||c==="G")&&(s=!0),a++}this.hasAnchor=s,o===0?this.source=t:(i.push(t.substring(o,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=t;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=d4e.test(this.source):this.hasBackReferences=!1}clone(){return new uX(this.source,this.ruleId)}setSource(t){this.source!==t&&(this.source=t,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(t,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(o=>t.substring(o.start,o.end));return t7.lastIndex=0,this.source.replace(t7,(o,i)=>nX(r[parseInt(i,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let t=[],n=[],r=[],o=[],i,s,a,l;for(i=0,s=this.source.length;i<s;i++)a=this.source.charAt(i),t[i]=a,n[i]=a,r[i]=a,o[i]=a,a==="\\"&&i+1<s&&(l=this.source.charAt(i+1),l==="A"?(t[i+1]="",n[i+1]="",r[i+1]="A",o[i+1]="A"):l==="G"?(t[i+1]="",n[i+1]="G",r[i+1]="",o[i+1]="G"):(t[i+1]=l,n[i+1]=l,r[i+1]=l,o[i+1]=l),i++);return{A0_G0:t.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:o.join("")}}resolveAnchors(t,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:t?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},ob=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(n=>n.source);this._cached=new r7(e,t,this._items.map(n=>n.ruleId))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map(o=>o.resolveAnchors(t,n));return new r7(e,r,this._items.map(o=>o.ruleId))}},r7=class{constructor(e,t,n){this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join(`
`)}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},SA=class{constructor(e,t){this.languageId=e,this.tokenType=t}},m4e=class CR{_defaultAttributes;_embeddedLanguagesMatcher;constructor(t,n){this._defaultAttributes=new SA(t,8),this._embeddedLanguagesMatcher=new g4e(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return t===null?CR._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}static _NULL_SCOPE_METADATA=new SA(0,0);_getBasicScopeAttributes=new rX(t=>{const n=this._scopeToLanguage(t),r=this._toStandardTokenType(t);return new SA(n,r)});_scopeToLanguage(t){return this._embeddedLanguagesMatcher.match(t)||0}_toStandardTokenType(t){const n=t.match(CR.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},g4e=class{values;scopesRegExp;constructor(e){if(e.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map(([n,r])=>nX(n));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}},o7=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function dX(e,t,n,r,o,i,s,a){const l=t.content.length;let c=!1,u=-1;if(s){const m=y4e(e,t,n,r,o,i);o=m.stack,r=m.linePos,n=m.isFirstLine,u=m.anchorPosition}const f=Date.now();for(;!c;){if(a!==0&&Date.now()-f>a)return new o7(o,!0);p()}return new o7(o,!1);function p(){const m=b4e(e,t,n,r,o,u);if(!m){i.produce(o,l),c=!0;return}const y=m.captureIndices,b=m.matchedRuleId,w=y&&y.length>0?y[0].end>r:!1;if(b===f4e){const S=o.getRule(e);i.produce(o,y[0].start),o=o.withContentNameScopesList(o.nameScopesList),By(e,t,n,o,i,S.endCaptures,y),i.produce(o,y[0].end);const E=o;if(o=o.parent,u=E.getAnchorPos(),!w&&E.getEnterPos()===r){o=E,i.produce(o,l),c=!0;return}}else{const S=e.getRule(b);i.produce(o,y[0].start);const E=o,T=S.getName(t.content,y),A=o.contentNameScopesList.pushAttributed(T,e);if(o=o.push(b,r,u,y[0].end===l,null,A,A),S instanceof kR){const M=S;By(e,t,n,o,i,M.beginCaptures,y),i.produce(o,y[0].end),u=y[0].end;const R=M.getContentName(t.content,y),O=A.pushAttributed(R,e);if(o=o.withContentNameScopesList(O),M.endHasBackReferences&&(o=o.withEndRule(M.getEndWithResolvedBackReferences(t.content,y))),!w&&E.hasSameRuleAs(o)){o=o.pop(),i.produce(o,l),c=!0;return}}else if(S instanceof JS){const M=S;By(e,t,n,o,i,M.beginCaptures,y),i.produce(o,y[0].end),u=y[0].end;const R=M.getContentName(t.content,y),O=A.pushAttributed(R,e);if(o=o.withContentNameScopesList(O),M.whileHasBackReferences&&(o=o.withEndRule(M.getWhileWithResolvedBackReferences(t.content,y))),!w&&E.hasSameRuleAs(o)){o=o.pop(),i.produce(o,l),c=!0;return}}else if(By(e,t,n,o,i,S.captures,y),i.produce(o,y[0].end),o=o.pop(),!w){o=o.safePop(),i.produce(o,l),c=!0;return}}y[0].end>r&&(r=y[0].end,n=!1)}}function y4e(e,t,n,r,o,i){let s=o.beginRuleCapturedEOL?0:-1;const a=[];for(let l=o;l;l=l.pop()){const c=l.getRule(e);c instanceof JS&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=w4e(l.rule,e,l.stack.endRule,n,r===s),f=c.findNextMatchSync(t,r,u);if(f){if(f.ruleId!==lX){o=l.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(i.produce(l.stack,f.captureIndices[0].start),By(e,t,n,l.stack,i,l.rule.whileCaptures,f.captureIndices),i.produce(l.stack,f.captureIndices[0].end),s=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}else{o=l.stack.pop();break}}return{stack:o,linePos:r,anchorPosition:s,isFirstLine:n}}function b4e(e,t,n,r,o,i){const s=v4e(e,t,n,r,o,i),a=e.getInjections();if(a.length===0)return s;const l=x4e(a,e,t,n,r,o,i);if(!l)return s;if(!s)return l;const c=s.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:s}function v4e(e,t,n,r,o,i){const s=o.getRule(e),{ruleScanner:a,findOptions:l}=fX(s,e,o.endRule,n,r===i),c=a.findNextMatchSync(t,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function x4e(e,t,n,r,o,i,s){let a=Number.MAX_VALUE,l=null,c,u=0;const f=i.contentNameScopesList.getScopeNames();for(let p=0,m=e.length;p<m;p++){const y=e[p];if(!y.matcher(f))continue;const b=t.getRule(y.ruleId),{ruleScanner:w,findOptions:S}=fX(b,t,null,r,o===s),E=w.findNextMatchSync(n,o,S);if(!E)continue;const T=E.captureIndices[0].start;if(!(T>=a)&&(a=T,l=E.captureIndices,c=E.ruleId,u=y.priority,a===o))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function fX(e,t,n,r,o){return{ruleScanner:e.compileAG(t,n,r,o),findOptions:0}}function w4e(e,t,n,r,o){return{ruleScanner:e.compileWhileAG(t,n,r,o),findOptions:0}}function By(e,t,n,r,o,i,s){if(i.length===0)return;const a=t.content,l=Math.min(i.length,s.length),c=[],u=s[0].end;for(let f=0;f<l;f++){const p=i[f];if(p===null)continue;const m=s[f];if(m.length===0)continue;if(m.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=m.start;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?o.produceFromScopes(c[c.length-1].scopes,m.start):o.produce(r,m.start),p.retokenizeCapturedWithRuleId){const b=p.getName(a,s),w=r.contentNameScopesList.pushAttributed(b,e),S=p.getContentName(a,s),E=w.pushAttributed(S,e),T=r.push(p.retokenizeCapturedWithRuleId,m.start,-1,!1,null,w,E),A=e.createOnigString(a.substring(0,m.end));dX(e,A,n&&m.start===0,m.start,T,o,!1,0),sX(A);continue}const y=p.getName(a,s);if(y!==null){const w=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(y,e);c.push(new S4e(w,m.end))}}for(;c.length>0;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var S4e=class{scopes;endPos;constructor(e,t){this.scopes=e,this.endPos=t}};function k4e(e,t,n,r,o,i,s,a){return new E4e(e,t,n,r,o,i,s,a)}function i7(e,t,n,r,o){const i=KS(t,XS),s=cX.getCompiledRuleId(n,r,o.repository);for(const a of i)e.push({debugSelector:t,matcher:a.matcher,ruleId:s,grammar:o,priority:a.priority})}function XS(e,t){if(t.length<e.length)return!1;let n=0;return e.every(r=>{for(let o=n;o<t.length;o++)if(C4e(t[o],r))return n=o+1,!0;return!1})}function C4e(e,t){if(!e)return!1;if(e===t)return!0;const n=t.length;return e.length>n&&e.substr(0,n)===t&&e[n]==="."}var E4e=class{constructor(e,t,n,r,o,i,s,a){if(this._rootScopeName=e,this.balancedBracketSelectors=i,this._onigLib=a,this._basicScopeAttributesProvider=new m4e(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=s7(t,null),this._injections=null,this._tokenTypeMatchers=[],o)for(const l of Object.keys(o)){const c=KS(l,XS);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:o[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e={lookup:o=>o===this._rootScopeName?this._grammar:this.getExternalGrammar(o),injections:o=>this._grammarRepository.injections(o)},t=[],n=this._rootScopeName,r=e.lookup(n);if(r){const o=r.injections;if(o)for(let s in o)i7(t,s,o[s],this,r);const i=this._grammarRepository.injections(n);i&&i.forEach(s=>{const a=this.getExternalGrammar(s);if(a){const l=a.injectionSelector;l&&i7(t,l,a,this,a)}})}return t.sort((o,i)=>o.priority-i.priority),t}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=s7(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){this._rootId===-1&&(this._rootId=cX.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let o;if(!t||t===ER.NULL){o=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),f=Rm.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),p=this.getRule(this._rootId).getName(null,null);let m;p?m=l0.createRootAndLookUpScopeName(p,f,this):m=l0.createRoot("unknown",f),t=new ER(null,this._rootId,-1,-1,!1,null,m,m)}else o=!1,t.reset();e=e+`
`;const i=this.createOnigString(e),s=i.content.length,a=new _4e(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),l=dX(this,i,o,0,t,a,!0,r);return sX(i),{lineLength:s,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function s7(e,t){return e=UOe(e),e.repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var l0=class kl{constructor(t,n,r){this.parent=t,this.scopePath=n,this.tokenAttributes=r}static fromExtension(t,n){let r=t,o=t?.scopePath??null;for(const i of n)o=wA.push(o,i.scopeNames),r=new kl(r,o,i.encodedTokenAttributes);return r}static createRoot(t,n){return new kl(null,new wA(null,t),n)}static createRootAndLookUpScopeName(t,n,r){const o=r.getMetadataForScope(t),i=new wA(null,t),s=r.themeProvider.themeMatch(i),a=kl.mergeAttributes(n,o,s);return new kl(null,i,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return kl.equals(this,t)}static equals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.scopeName!==n.scopeName||t.tokenAttributes!==n.tokenAttributes)return!1;t=t.parent,n=n.parent}while(!0)}static mergeAttributes(t,n,r){let o=-1,i=0,s=0;return r!==null&&(o=r.fontStyle,i=r.foregroundId,s=r.backgroundId),Rm.set(t,n.languageId,n.tokenType,null,o,i,s)}pushAttributed(t,n){if(t===null)return this;if(t.indexOf(" ")===-1)return kl._pushAttributed(this,t,n);const r=t.split(/ /g);let o=this;for(const i of r)o=kl._pushAttributed(o,i,n);return o}static _pushAttributed(t,n,r){const o=r.getMetadataForScope(n),i=t.scopePath.push(n),s=r.themeProvider.themeMatch(i),a=kl.mergeAttributes(t.tokenAttributes,o,s);return new kl(t,i,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(t){const n=[];let r=this;for(;r&&r!==t;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===t?n.reverse():void 0}},ER=class gf{constructor(t,n,r,o,i,s,a,l){this.parent=t,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=s,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=o}_stackElementBrand=void 0;static NULL=new gf(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(t){return t===null?!1:gf._equals(this,t)}static _equals(t,n){return t===n?!0:this._structuralEquals(t,n)?l0.equals(t.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.depth!==n.depth||t.ruleId!==n.ruleId||t.endRule!==n.endRule)return!1;t=t.parent,n=n.parent}while(!0)}clone(){return this}static _reset(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent}reset(){gf._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,n,r,o,i,s,a){return new gf(this,t,n,r,o,i,s,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(t){return t.getRule(this.ruleId)}toString(){const t=[];return this._writeString(t,0),"["+t.join(",")+"]"}_writeString(t,n){return this.parent&&(n=this.parent._writeString(t,n)),t[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)}withEndRule(t){return this.endRule===t?this:new gf(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(t){let n=this;for(;n&&n._enterPos===t._enterPos;){if(n.ruleId===t.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(t,n){const r=l0.fromExtension(t?.nameScopesList??null,n.nameScopesList);return new gf(t,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,l0.fromExtension(r,n.contentNameScopesList))}},T4e=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(e,t){this.balancedBracketScopes=e.flatMap(n=>n==="*"?(this.allowAny=!0,[]):KS(n,XS).map(r=>r.matcher)),this.unbalancedBracketScopes=t.flatMap(n=>KS(n,XS).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}},_4e=class{constructor(e,t,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let r=e?.tokenAttributes??0,o=!1;if(this.balancedBracketSelectors?.matchesAlways&&(o=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=e?.getScopeNames()??[];for(const s of this._tokenTypeOverrides)s.matcher(i)&&(r=Rm.set(r,0,s.type,null,-1,0,0));this.balancedBracketSelectors&&(o=this.balancedBracketSelectors.match(i))}if(o&&(r=Rm.set(r,0,8,o,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=t;return}const n=e?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}},A4e=class{constructor(e,t){this._onigLib=t,this._theme=e}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,n,r,o){if(!this._grammars.has(e)){let i=this._rawGrammars.get(e);if(!i)return null;this._grammars.set(e,k4e(e,i,t,n,r,o,this,this._onigLib))}return this._grammars.get(e)}},M4e=class{_options;_syncRegistry;_ensureGrammarCache;constructor(t){this._options=t,this._syncRegistry=new A4e(WS.createFromRawTheme(t.theme,t.colorMap),t.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(t,n){this._syncRegistry.setTheme(WS.createFromRawTheme(t,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(t,n,r){return this.loadGrammarWithConfiguration(t,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(t,n,r){return this._loadGrammar(t,n,r.embeddedLanguages,r.tokenTypes,new T4e(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(t){return this._loadGrammar(t,0,null,null,null)}_loadGrammar(t,n,r,o,i){const s=new o4e(this._syncRegistry,t);for(;s.Q.length>0;)s.Q.map(a=>this._loadSingleGrammar(a.scopeName)),s.processQueue();return this._grammarForScopeName(t,n,r,o,i)}_loadSingleGrammar(t){this._ensureGrammarCache.has(t)||(this._doLoadSingleGrammar(t),this._ensureGrammarCache.set(t,!0))}_doLoadSingleGrammar(t){const n=this._options.loadGrammar(t);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(t):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(t,n=[],r=0,o=null){return this._syncRegistry.addGrammar(t,n),this._grammarForScopeName(t.scopeName,r,o)}_grammarForScopeName(t,n=0,r=null,o=null,i=null){return this._syncRegistry.grammarForScopeName(t,n,r,o,i)}},TR=ER.NULL;const N4e=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class gv{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}gv.prototype.normal={};gv.prototype.property={};gv.prototype.space=void 0;function hX(e,t){const n={},r={};for(const o of e)Object.assign(n,o.property),Object.assign(r,o.normal);return new gv(n,r,t)}function _R(e){return e.toLowerCase()}class Ki{constructor(t,n){this.attribute=n,this.property=t}}Ki.prototype.attribute="";Ki.prototype.booleanish=!1;Ki.prototype.boolean=!1;Ki.prototype.commaOrSpaceSeparated=!1;Ki.prototype.commaSeparated=!1;Ki.prototype.defined=!1;Ki.prototype.mustUseProperty=!1;Ki.prototype.number=!1;Ki.prototype.overloadedBoolean=!1;Ki.prototype.property="";Ki.prototype.spaceSeparated=!1;Ki.prototype.space=void 0;let R4e=0;const Tt=_h(),zr=_h(),AR=_h(),Ae=_h(),Ln=_h(),cm=_h(),ps=_h();function _h(){return 2**++R4e}const MR=Object.freeze(Object.defineProperty({__proto__:null,boolean:Tt,booleanish:zr,commaOrSpaceSeparated:ps,commaSeparated:cm,number:Ae,overloadedBoolean:AR,spaceSeparated:Ln},Symbol.toStringTag,{value:"Module"})),kA=Object.keys(MR);class aP extends Ki{constructor(t,n,r,o){let i=-1;if(super(t,n),a7(this,"space",o),typeof r=="number")for(;++i<kA.length;){const s=kA[i];a7(this,kA[i],(r&MR[s])===MR[s])}}}aP.prototype.defined=!0;function a7(e,t,n){n&&(e[t]=n)}function cg(e){const t={},n={};for(const[r,o]of Object.entries(e.properties)){const i=new aP(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[_R(r)]=r,n[_R(i.attribute)]=r}return new gv(t,n,e.space)}const pX=cg({properties:{ariaActiveDescendant:null,ariaAtomic:zr,ariaAutoComplete:null,ariaBusy:zr,ariaChecked:zr,ariaColCount:Ae,ariaColIndex:Ae,ariaColSpan:Ae,ariaControls:Ln,ariaCurrent:null,ariaDescribedBy:Ln,ariaDetails:null,ariaDisabled:zr,ariaDropEffect:Ln,ariaErrorMessage:null,ariaExpanded:zr,ariaFlowTo:Ln,ariaGrabbed:zr,ariaHasPopup:null,ariaHidden:zr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ln,ariaLevel:Ae,ariaLive:null,ariaModal:zr,ariaMultiLine:zr,ariaMultiSelectable:zr,ariaOrientation:null,ariaOwns:Ln,ariaPlaceholder:null,ariaPosInSet:Ae,ariaPressed:zr,ariaReadOnly:zr,ariaRelevant:null,ariaRequired:zr,ariaRoleDescription:Ln,ariaRowCount:Ae,ariaRowIndex:Ae,ariaRowSpan:Ae,ariaSelected:zr,ariaSetSize:Ae,ariaSort:null,ariaValueMax:Ae,ariaValueMin:Ae,ariaValueNow:Ae,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function mX(e,t){return t in e?e[t]:t}function gX(e,t){return mX(e,t.toLowerCase())}const I4e=cg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cm,acceptCharset:Ln,accessKey:Ln,action:null,allow:null,allowFullScreen:Tt,allowPaymentRequest:Tt,allowUserMedia:Tt,alt:null,as:null,async:Tt,autoCapitalize:null,autoComplete:Ln,autoFocus:Tt,autoPlay:Tt,blocking:Ln,capture:null,charSet:null,checked:Tt,cite:null,className:Ln,cols:Ae,colSpan:null,content:null,contentEditable:zr,controls:Tt,controlsList:Ln,coords:Ae|cm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Tt,defer:Tt,dir:null,dirName:null,disabled:Tt,download:AR,draggable:zr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Tt,formTarget:null,headers:Ln,height:Ae,hidden:AR,high:Ae,href:null,hrefLang:null,htmlFor:Ln,httpEquiv:Ln,id:null,imageSizes:null,imageSrcSet:null,inert:Tt,inputMode:null,integrity:null,is:null,isMap:Tt,itemId:null,itemProp:Ln,itemRef:Ln,itemScope:Tt,itemType:Ln,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Tt,low:Ae,manifest:null,max:null,maxLength:Ae,media:null,method:null,min:null,minLength:Ae,multiple:Tt,muted:Tt,name:null,nonce:null,noModule:Tt,noValidate:Tt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Tt,optimum:Ae,pattern:null,ping:Ln,placeholder:null,playsInline:Tt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Tt,referrerPolicy:null,rel:Ln,required:Tt,reversed:Tt,rows:Ae,rowSpan:Ae,sandbox:Ln,scope:null,scoped:Tt,seamless:Tt,selected:Tt,shadowRootClonable:Tt,shadowRootDelegatesFocus:Tt,shadowRootMode:null,shape:null,size:Ae,sizes:null,slot:null,span:Ae,spellCheck:zr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ae,step:null,style:null,tabIndex:Ae,target:null,title:null,translate:null,type:null,typeMustMatch:Tt,useMap:null,value:zr,width:Ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ln,axis:null,background:null,bgColor:null,border:Ae,borderColor:null,bottomMargin:Ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Tt,declare:Tt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ae,leftMargin:Ae,link:null,longDesc:null,lowSrc:null,marginHeight:Ae,marginWidth:Ae,noResize:Tt,noHref:Tt,noShade:Tt,noWrap:Tt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ae,rules:null,scheme:null,scrolling:zr,standby:null,summary:null,text:null,topMargin:Ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Tt,disableRemotePlayback:Tt,prefix:null,property:null,results:Ae,security:null,unselectable:null},space:"html",transform:gX}),O4e=cg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ps,accentHeight:Ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ae,amplitude:Ae,arabicForm:null,ascent:Ae,attributeName:null,attributeType:null,azimuth:Ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ae,by:null,calcMode:null,capHeight:Ae,className:Ln,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ae,diffuseConstant:Ae,direction:null,display:null,dur:null,divisor:Ae,dominantBaseline:null,download:Tt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ae,enableBackground:null,end:null,event:null,exponent:Ae,externalResourcesRequired:null,fill:null,fillOpacity:Ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cm,g2:cm,glyphName:cm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ae,horizOriginX:Ae,horizOriginY:Ae,id:null,ideographic:Ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ae,k:Ae,k1:Ae,k2:Ae,k3:Ae,k4:Ae,kernelMatrix:ps,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ae,overlineThickness:Ae,paintOrder:null,panose1:null,path:null,pathLength:Ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ln,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ae,pointsAtY:Ae,pointsAtZ:Ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ps,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ps,rev:ps,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ps,requiredFeatures:ps,requiredFonts:ps,requiredFormats:ps,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ae,specularExponent:Ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ae,strikethroughThickness:Ae,string:null,stroke:null,strokeDashArray:ps,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ae,strokeOpacity:Ae,strokeWidth:null,style:null,surfaceScale:Ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ps,tabIndex:Ae,tableValues:null,target:null,targetX:Ae,targetY:Ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ps,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ae,underlineThickness:Ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ae,values:null,vAlphabetic:Ae,vMathematical:Ae,vectorEffect:null,vHanging:Ae,vIdeographic:Ae,version:null,vertAdvY:Ae,vertOriginX:Ae,vertOriginY:Ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:mX}),yX=cg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),bX=cg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:gX}),vX=cg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),P4e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},D4e=/[A-Z]/g,l7=/-[a-z]/g,$4e=/^data[-\w.:]+$/i;function xX(e,t){const n=_R(t);let r=t,o=Ki;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&$4e.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(l7,L4e);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!l7.test(i)){let s=i.replace(D4e,j4e);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}o=aP}return new o(r,t)}function j4e(e){return"-"+e.toLowerCase()}function L4e(e){return e.charAt(1).toUpperCase()}const wX=hX([pX,I4e,yX,bX,vX],"html"),yv=hX([pX,O4e,yX,bX,vX],"svg"),c7={}.hasOwnProperty;function z4e(e,t){const n=t||{};function r(o,...i){let s=r.invalid;const a=r.handlers;if(o&&c7.call(o,e)){const l=String(o[e]);s=c7.call(a,l)?a[l]:r.unknown}if(s)return s.call(this,o,...i)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const B4e=/["&'<>`]/g,F4e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,V4e=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,H4e=/[|\\{}()[\]^$+*?.]/g,u7=new WeakMap;function U4e(e,t){if(e=e.replace(t.subset?G4e(t.subset):B4e,r),t.subset||t.escapeOnly)return e;return e.replace(F4e,n).replace(V4e,r);function n(o,i,s){return t.format((o.charCodeAt(0)-55296)*1024+o.charCodeAt(1)-56320+65536,s.charCodeAt(i+2),t)}function r(o,i,s){return t.format(o.charCodeAt(0),s.charCodeAt(i+1),t)}}function G4e(e){let t=u7.get(e);return t||(t=q4e(e),u7.set(e,t)),t}function q4e(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(H4e,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const Z4e=/[\dA-Fa-f]/;function W4e(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!Z4e.test(String.fromCharCode(t))?r:r+";"}const K4e=/\d/;function Y4e(e,t,n){const r="&#"+String(e);return n&&t&&!K4e.test(String.fromCharCode(t))?r:r+";"}const J4e=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],CA={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},X4e=["cent","copy","divide","gt","lt","not","para","times"],SX={}.hasOwnProperty,NR={};let gx;for(gx in CA)SX.call(CA,gx)&&(NR[CA[gx]]=gx);const Q4e=/[^\dA-Za-z]/;function e3e(e,t,n,r){const o=String.fromCharCode(e);if(SX.call(NR,o)){const i=NR[o],s="&"+i;return n&&J4e.includes(i)&&!X4e.includes(i)&&(!r||t&&t!==61&&Q4e.test(String.fromCharCode(t)))?s:s+";"}return""}function t3e(e,t,n){let r=W4e(e,t,n.omitOptionalSemicolons),o;if((n.useNamedReferences||n.useShortestReferences)&&(o=e3e(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!o)&&n.useShortestReferences){const i=Y4e(e,t,n.omitOptionalSemicolons);i.length<r.length&&(r=i)}return o&&(!n.useShortestReferences||o.length<r.length)?o:r}function um(e,t){return U4e(e,Object.assign({format:t3e},t))}const n3e=/^>|^->|<!--|-->|--!>|<!-$/g,r3e=[">"],o3e=["<",">"];function i3e(e,t,n,r){return r.settings.bogusComments?"<?"+um(e.value,Object.assign({},r.settings.characterReferences,{subset:r3e}))+">":"<!--"+e.value.replace(n3e,o)+"-->";function o(i){return um(i,Object.assign({},r.settings.characterReferences,{subset:o3e}))}}function s3e(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function QS(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,o=n.indexOf(t);for(;o!==-1;)r++,o=n.indexOf(t,o+t.length);return r}function Ppt(e){const t=[],n=String(e||"");let r=n.indexOf(","),o=0,i=!1;for(;!i;){r===-1&&(r=n.length,i=!0);const s=n.slice(o,r).trim();(s||!i)&&t.push(s),o=r+1,r=n.indexOf(",",o)}return t}function kX(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Dpt(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function CX(e){return e.join(" ").trim()}const a3e=/[ \t\n\f\r]/g;function uE(e){return typeof e=="object"?e.type==="text"?d7(e.value):!1:d7(e)}function d7(e){return e.replace(a3e,"")===""}const ao=TX(1),EX=TX(-1),l3e=[];function TX(e){return t;function t(n,r,o){const i=n?n.children:l3e;let s=(r||0)+e,a=i[s];if(!o)for(;a&&uE(a);)s+=e,a=i[s];return a}}const c3e={}.hasOwnProperty;function _X(e){return t;function t(n,r,o){return c3e.call(e,n.tagName)&&e[n.tagName](n,r,o)}}const lP=_X({body:d3e,caption:EA,colgroup:EA,dd:m3e,dt:p3e,head:EA,html:u3e,li:h3e,optgroup:g3e,option:y3e,p:f3e,rp:f7,rt:f7,tbody:v3e,td:h7,tfoot:x3e,th:h7,thead:b3e,tr:w3e});function EA(e,t,n){const r=ao(n,t,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&uE(r.value.charAt(0)))}function u3e(e,t,n){const r=ao(n,t);return!r||r.type!=="comment"}function d3e(e,t,n){const r=ao(n,t);return!r||r.type!=="comment"}function f3e(e,t,n){const r=ao(n,t);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function h3e(e,t,n){const r=ao(n,t);return!r||r.type==="element"&&r.tagName==="li"}function p3e(e,t,n){const r=ao(n,t);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function m3e(e,t,n){const r=ao(n,t);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function f7(e,t,n){const r=ao(n,t);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function g3e(e,t,n){const r=ao(n,t);return!r||r.type==="element"&&r.tagName==="optgroup"}function y3e(e,t,n){const r=ao(n,t);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function b3e(e,t,n){const r=ao(n,t);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function v3e(e,t,n){const r=ao(n,t);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function x3e(e,t,n){return!ao(n,t)}function w3e(e,t,n){const r=ao(n,t);return!r||r.type==="element"&&r.tagName==="tr"}function h7(e,t,n){const r=ao(n,t);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const S3e=_X({body:E3e,colgroup:T3e,head:C3e,html:k3e,tbody:_3e});function k3e(e){const t=ao(e,-1);return!t||t.type!=="comment"}function C3e(e){const t=new Set;for(const r of e.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||n.type==="element"}function E3e(e){const t=ao(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&uE(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function T3e(e,t,n){const r=EX(n,t),o=ao(e,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&lP(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="col")}function _3e(e,t,n){const r=EX(n,t),o=ao(e,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&lP(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="tr")}const yx={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function A3e(e,t,n,r){const o=r.schema,i=o.space==="svg"?!1:r.settings.omitOptionalTags;let s=o.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const a=[];let l;o.space==="html"&&e.tagName==="svg"&&(r.schema=yv);const c=M3e(r,e.properties),u=r.all(o.space==="html"&&e.tagName==="template"?e.content:e);return r.schema=o,u&&(s=!1),(c||!i||!S3e(e,t,n))&&(a.push("<",e.tagName,c?" "+c:""),s&&(o.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!s&&(!i||!lP(e,t,n))&&a.push("</"+e.tagName+">"),a.join("")}function M3e(e,t){const n=[];let r=-1,o;if(t){for(o in t)if(t[o]!==null&&t[o]!==void 0){const i=N3e(e,o,t[o]);i&&n.push(i)}}for(;++r<n.length;){const i=e.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&i!=='"'&&i!=="'"&&(n[r]+=" ")}return n.join("")}function N3e(e,t,n){const r=xX(e.schema,t),o=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,i=e.settings.allowDangerousCharacters?0:1;let s=e.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=um(r.attribute,Object.assign({},e.settings.characterReferences,{subset:yx.name[o][i]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?kX:CX)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?l:(e.settings.preferUnquoted&&(a=um(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:yx.unquoted[o][i]}))),a!==n&&(e.settings.quoteSmart&&QS(n,s)>QS(n,e.alternative)&&(s=e.alternative),a=s+um(n,Object.assign({},e.settings.characterReferences,{subset:(s==="'"?yx.single:yx.double)[o][i],attribute:!0}))+s),l+(a&&"="+a))}const R3e=["<","&"];function AX(e,t,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:um(e.value,Object.assign({},r.settings.characterReferences,{subset:R3e}))}function I3e(e,t,n,r){return r.settings.allowDangerousHtml?e.value:AX(e,t,n,r)}function O3e(e,t,n,r){return r.all(e)}const P3e=z4e("type",{invalid:D3e,unknown:$3e,handlers:{comment:i3e,doctype:s3e,element:A3e,raw:I3e,root:O3e,text:AX}});function D3e(e){throw new Error("Expected node, not `"+e+"`")}function $3e(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const j3e={},L3e={},z3e=[];function B3e(e,t){const n=t||j3e,r=n.quote||'"',o=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:F3e,all:V3e,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||N4e,characterReferences:n.characterReferences||L3e,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?yv:wX,quote:r,alternative:o}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function F3e(e,t,n){return P3e(e,t,n,this)}function V3e(e){const t=[],n=e&&e.children||z3e;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function ek(e,t){const n=typeof e=="string"?{}:{...e.colorReplacements},r=typeof e=="string"?e:e.name;for(const[o,i]of Object.entries(t?.colorReplacements||{}))typeof i=="string"?n[o]=i:o===r&&Object.assign(n,i);return n}function fd(e,t){return e&&(t?.[e?.toLowerCase()]||e)}function H3e(e){return Array.isArray(e)?e:[e]}async function MX(e){return Promise.resolve(typeof e=="function"?e():e).then(t=>t.default||t)}function cP(e){return!e||["plaintext","txt","text","plain"].includes(e)}function NX(e){return e==="ansi"||cP(e)}function uP(e){return e==="none"}function RX(e){return uP(e)}function IX(e,t){if(!t)return e;e.properties||={},e.properties.class||=[],typeof e.properties.class=="string"&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const r of n)r&&!e.properties.class.includes(r)&&e.properties.class.push(r);return e}function dE(e,t=!1){const n=e.split(/(\r?\n)/g);let r=0;const o=[];for(let i=0;i<n.length;i+=2){const s=t?n[i]+(n[i+1]||""):n[i];o.push([s,r]),r+=n[i].length,r+=n[i+1]?.length||0}return o}function U3e(e){const t=dE(e,!0).map(([o])=>o);function n(o){if(o===e.length)return{line:t.length-1,character:t[t.length-1].length};let i=o,s=0;for(const a of t){if(i<a.length)break;i-=a.length,s++}return{line:s,character:i}}function r(o,i){let s=0;for(let a=0;a<o;a++)s+=t[a].length;return s+=i,s}return{lines:t,indexToPos:n,posToIndex:r}}const dP="light-dark()",G3e=["color","background-color"];function q3e(e,t){let n=0;const r=[];for(const o of t)o>n&&r.push({...e,content:e.content.slice(n,o),offset:e.offset+n}),n=o;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}function Z3e(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort((r,o)=>r-o);return n.length?e.map(r=>r.flatMap(o=>{const i=n.filter(s=>o.offset<s&&s<o.offset+o.content.length).map(s=>s-o.offset).sort((s,a)=>s-a);return i.length?q3e(o,i):o})):e}function W3e(e,t,n,r,o="css-vars"){const i={content:e.content,explanation:e.explanation,offset:e.offset},s=t.map(u=>tk(e.variants[u])),a=new Set(s.flatMap(u=>Object.keys(u))),l={},c=(u,f)=>{const p=f==="color"?"":f==="background-color"?"-bg":`-${f}`;return n+t[u]+(f==="color"?"":p)};return s.forEach((u,f)=>{for(const p of a){const m=u[p]||"inherit";if(f===0&&r&&G3e.includes(p))if(r===dP&&s.length>1){const y=t.findIndex(E=>E==="light"),b=t.findIndex(E=>E==="dark");if(y===-1||b===-1)throw new Hr('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const w=s[y][p]||"inherit",S=s[b][p]||"inherit";l[p]=`light-dark(${w}, ${S})`,o==="css-vars"&&(l[c(f,p)]=m)}else l[p]=m;else o==="css-vars"&&(l[c(f,p)]=m)}}),i.htmlStyle=l,i}function tk(e){const t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&Ko.Italic&&(t["font-style"]="italic"),e.fontStyle&Ko.Bold&&(t["font-weight"]="bold");const n=[];e.fontStyle&Ko.Underline&&n.push("underline"),e.fontStyle&Ko.Strikethrough&&n.push("line-through"),n.length&&(t["text-decoration"]=n.join(" "))}return t}function RR(e){return typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t}:${n}`).join(";")}const OX=new WeakMap;function fE(e,t){OX.set(e,t)}function ib(e){return OX.get(e)}class ug{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(t,n){return new ug(Object.fromEntries(H3e(n).map(r=>[r,TR])),t)}constructor(...t){if(t.length===2){const[n,r]=t;this.lang=r,this._stacks=n}else{const[n,r,o]=t;this.lang=r,this._stacks={[o]:n}}}getInternalStack(t=this.theme){return this._stacks[t]}getScopes(t=this.theme){return K3e(this._stacks[t])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function K3e(e){const t=[],n=new Set;function r(o){if(n.has(o))return;n.add(o);const i=o?.nameScopesList?.scopeName;i&&t.push(i),o.parent&&r(o.parent)}return r(e),t}function Y3e(e,t){if(!(e instanceof ug))throw new Hr("Invalid grammar state");return e.getInternalStack(t)}function J3e(){const e=new WeakMap;function t(n){if(!e.has(n.meta)){let r=function(s){if(typeof s=="number"){if(s<0||s>n.source.length)throw new Hr(`Invalid decoration offset: ${s}. Code length: ${n.source.length}`);return{...o.indexToPos(s),offset:s}}else{const a=o.lines[s.line];if(a===void 0)throw new Hr(`Invalid decoration position ${JSON.stringify(s)}. Lines length: ${o.lines.length}`);let l=s.character;if(l<0&&(l=a.length+l),l<0||l>a.length)throw new Hr(`Invalid decoration position ${JSON.stringify(s)}. Line ${s.line} length: ${a.length}`);return{...s,character:l,offset:o.posToIndex(s.line,l)}}};const o=U3e(n.source),i=(n.options.decorations||[]).map(s=>({...s,start:r(s.start),end:r(s.end)}));X3e(i),e.set(n.meta,{decorations:i,converter:o,source:n.source})}return e.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const o=t(this).decorations.flatMap(s=>[s.start.offset,s.end.offset]);return Z3e(n,o)},code(n){if(!this.options.decorations?.length)return;const r=t(this),o=Array.from(n.children).filter(u=>u.type==="element"&&u.tagName==="span");if(o.length!==r.converter.lines.length)throw new Hr(`Number of lines in code element (${o.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function i(u,f,p,m){const y=o[u];let b="",w=-1,S=-1;if(f===0&&(w=0),p===0&&(S=0),p===Number.POSITIVE_INFINITY&&(S=y.children.length),w===-1||S===-1)for(let T=0;T<y.children.length;T++)b+=PX(y.children[T]),w===-1&&b.length===f&&(w=T+1),S===-1&&b.length===p&&(S=T+1);if(w===-1)throw new Hr(`Failed to find start index for decoration ${JSON.stringify(m.start)}`);if(S===-1)throw new Hr(`Failed to find end index for decoration ${JSON.stringify(m.end)}`);const E=y.children.slice(w,S);if(!m.alwaysWrap&&E.length===y.children.length)a(y,m,"line");else if(!m.alwaysWrap&&E.length===1&&E[0].type==="element")a(E[0],m,"token");else{const T={type:"element",tagName:"span",properties:{},children:E};a(T,m,"wrapper"),y.children.splice(w,E.length,T)}}function s(u,f){o[u]=a(o[u],f,"line")}function a(u,f,p){const m=f.properties||{},y=f.transform||(b=>b);return u.tagName=f.tagName||"span",u.properties={...u.properties,...m,class:u.properties.class},f.properties?.class&&IX(u,f.properties.class),u=y(u,p)||u,u}const l=[],c=r.decorations.sort((u,f)=>f.start.offset-u.start.offset||u.end.offset-f.end.offset);for(const u of c){const{start:f,end:p}=u;if(f.line===p.line)i(f.line,f.character,p.character,u);else if(f.line<p.line){i(f.line,f.character,Number.POSITIVE_INFINITY,u);for(let m=f.line+1;m<p.line;m++)l.unshift(()=>s(m,u));i(p.line,0,p.character,u)}}l.forEach(u=>u())}}}function X3e(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new Hr(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){const o=e[r],i=n.start.offset<=o.start.offset&&o.start.offset<n.end.offset,s=n.start.offset<o.end.offset&&o.end.offset<=n.end.offset,a=o.start.offset<=n.start.offset&&n.start.offset<o.end.offset,l=o.start.offset<n.end.offset&&n.end.offset<=o.end.offset;if(i||s||a||l){if(i&&s||a&&l||a&&n.start.offset===n.end.offset||s&&o.start.offset===o.end.offset)continue;throw new Hr(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(o.start)} intersect.`)}}}}function PX(e){return e.type==="text"?e.value:e.type==="element"?e.children.map(PX).join(""):""}const Q3e=[J3e()];function nk(e){return[...e.transformers||[],...Q3e]}var Of=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],TA={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function ePe(e,t){const n=e.indexOf("\x1B",t);if(n!==-1&&e[n+1]==="["){const r=e.indexOf("m",n);if(r!==-1)return{sequence:e.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:e.length}}function p7(e){const t=e.shift();if(t==="2"){const n=e.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(t==="5"){const n=e.shift();if(n)return{type:"table",index:Number(n)}}}function tPe(e){const t=[];for(;e.length>0;){const n=e.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)t.push({type:"resetAll"});else if(r<=9)TA[r]&&t.push({type:"setDecoration",value:TA[r]});else if(r<=29){const o=TA[r-20];o&&(t.push({type:"resetDecoration",value:o}),o==="dim"&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:Of[r-30]}});else if(r===38){const o=p7(e);o&&t.push({type:"setForegroundColor",value:o})}else if(r===39)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:Of[r-40]}});else if(r===48){const o=p7(e);o&&t.push({type:"setBackgroundColor",value:o})}else r===49?t.push({type:"resetBackgroundColor"}):r===53?t.push({type:"setDecoration",value:"overline"}):r===55?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:Of[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:Of[r-100+8]}})}return t}function nPe(){let e=null,t=null,n=new Set;return{parse(r){const o=[];let i=0;do{const s=ePe(r,i),a=s.sequence?r.substring(i,s.startPosition):r.substring(i);if(a.length>0&&o.push({value:a,foreground:e,background:t,decorations:new Set(n)}),s.sequence){const l=tPe(s.sequence);for(const c of l)c.type==="resetAll"?(e=null,t=null,n.clear()):c.type==="resetForegroundColor"?e=null:c.type==="resetBackgroundColor"?t=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?e=c.value:c.type==="setBackgroundColor"?t=c.value:c.type==="setDecoration"&&n.add(c.value)}i=s.position}while(i<r.length);return o}}}var rPe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function oPe(e=rPe){function t(a){return e[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function o(){if(r)return r;r=[];for(let c=0;c<Of.length;c++)r.push(t(Of[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let f=0;f<6;f++)r.push(n([a[c],a[u],a[f]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function i(a){return o()[a]}function s(a){switch(a.type){case"named":return t(a.name);case"rgb":return n(a.rgb);case"table":return i(a.index)}}return{value:s}}function iPe(e,t,n){const r=ek(e,n),o=dE(t),i=oPe(Object.fromEntries(Of.map(a=>[a,e.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),s=nPe();return o.map(a=>s.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?i.value(l.background):e.bg,u=l.foreground?i.value(l.foreground):e.fg):(c=l.foreground?i.value(l.foreground):e.fg,u=l.background?i.value(l.background):void 0),c=fd(c,r),u=fd(u,r),l.decorations.has("dim")&&(c=sPe(c));let f=Ko.None;return l.decorations.has("bold")&&(f|=Ko.Bold),l.decorations.has("italic")&&(f|=Ko.Italic),l.decorations.has("underline")&&(f|=Ko.Underline),l.decorations.has("strikethrough")&&(f|=Ko.Strikethrough),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:f}}))}function sPe(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(t)if(t[3]){const r=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${r}`}else return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map(r=>`${r}${r}`).join("")}80`;const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}function fP(e,t,n={}){const{lang:r="text",theme:o=e.getLoadedThemes()[0]}=n;if(cP(r)||uP(o))return dE(t).map(l=>[{content:l[0],offset:l[1]}]);const{theme:i,colorMap:s}=e.setTheme(o);if(r==="ansi")return iPe(i,t,n);const a=e.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new Hr(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(i.name))throw new Hr(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return lPe(t,a,i,s,n)}function aPe(...e){if(e.length===2)return ib(e[1]);const[t,n,r={}]=e,{lang:o="text",theme:i=t.getLoadedThemes()[0]}=r;if(cP(o)||uP(i))throw new Hr("Plain language does not have grammar state");if(o==="ansi")throw new Hr("ANSI language does not have grammar state");const{theme:s,colorMap:a}=t.setTheme(i),l=t.getLanguage(o);return new ug(rk(n,l,s,a,r).stateStack,l.name,s.name)}function lPe(e,t,n,r,o){const i=rk(e,t,n,r,o),s=new ug(rk(e,t,n,r,o).stateStack,t.name,n.name);return fE(i.tokens,s),i.tokens}function rk(e,t,n,r,o){const i=ek(n,o),{tokenizeMaxLineLength:s=0,tokenizeTimeLimit:a=500}=o,l=dE(e);let c=o.grammarState?Y3e(o.grammarState,n.name)??TR:o.grammarContextCode!=null?rk(o.grammarContextCode,t,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:TR,u=[];const f=[];for(let p=0,m=l.length;p<m;p++){const[y,b]=l[p];if(y===""){u=[],f.push([]);continue}if(s>0&&y.length>=s){u=[],f.push([{content:y,offset:b,color:"",fontStyle:0}]);continue}let w,S,E;o.includeExplanation&&(w=t.tokenizeLine(y,c,a),S=w.tokens,E=0);const T=t.tokenizeLine2(y,c,a),A=T.tokens.length/2;for(let M=0;M<A;M++){const R=T.tokens[2*M],O=M+1<A?T.tokens[2*M+2]:y.length;if(R===O)continue;const I=T.tokens[2*M+1],L=fd(r[Rm.getForeground(I)],i),$=Rm.getFontStyle(I),B={content:y.substring(R,O),offset:b+R,color:L,fontStyle:$};if(o.includeExplanation){const G=[];if(o.includeExplanation!=="scopeName")for(const W of n.settings){let K;switch(typeof W.scope){case"string":K=W.scope.split(/,/).map(F=>F.trim());break;case"object":K=W.scope;break;default:continue}G.push({settings:W,selectors:K.map(F=>F.split(/ /))})}B.explanation=[];let V=0;for(;R+V<O;){const W=S[E],K=y.substring(W.startIndex,W.endIndex);V+=K.length,B.explanation.push({content:K,scopes:o.includeExplanation==="scopeName"?cPe(W.scopes):uPe(G,W.scopes)}),E+=1}}u.push(B)}f.push(u),u=[],c=T.ruleStack}return{tokens:f,stateStack:c}}function cPe(e){return e.map(t=>({scopeName:t}))}function uPe(e,t){const n=[];for(let r=0,o=t.length;r<o;r++){const i=t[r];n[r]={scopeName:i,themeMatches:fPe(e,i,t.slice(0,r))}}return n}function m7(e,t){return e===t||t.substring(0,e.length)===e&&t[e.length]==="."}function dPe(e,t,n){if(!m7(e[e.length-1],t))return!1;let r=e.length-2,o=n.length-1;for(;r>=0&&o>=0;)m7(e[r],n[o])&&(r-=1),o-=1;return r===-1}function fPe(e,t,n){const r=[];for(const{selectors:o,settings:i}of e)for(const s of o)if(dPe(s,t,n)){r.push(i);break}return r}function DX(e,t,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),o=r.map(l=>{const c=fP(e,t,{...n,theme:l.theme}),u=ib(c),f=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:f}}),i=hPe(...o.map(l=>l.tokens)),s=i[0].map((l,c)=>l.map((u,f)=>{const p={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(p.explanation=u.explanation),i.forEach((m,y)=>{const{content:b,explanation:w,offset:S,...E}=m[c][f];p.variants[r[y].color]=E}),p})),a=o[0].state?new ug(Object.fromEntries(o.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),o[0].state.lang):void 0;return a&&fE(s,a),s}function hPe(...e){const t=e.map(()=>[]),n=e.length;for(let r=0;r<e[0].length;r++){const o=e.map(l=>l[r]),i=t.map(()=>[]);t.forEach((l,c)=>l.push(i[c]));const s=o.map(()=>0),a=o.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(i[c].push(u),s[c]+=1,a[c]=o[c][s[c]]):(i[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return t}function ok(e,t,n){let r,o,i,s,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-",colorsRendering:f="css-vars"}=n,p=Object.entries(n.themes).filter(S=>S[1]).map(S=>({color:S[0],theme:S[1]})).sort((S,E)=>S.color===c?-1:E.color===c?1:0);if(p.length===0)throw new Hr("`themes` option must not be empty");const m=DX(e,t,n);if(l=ib(m),c&&dP!==c&&!p.find(S=>S.color===c))throw new Hr(`\`themes\` option must contain the defaultColor key \`${c}\``);const y=p.map(S=>e.getTheme(S.theme)),b=p.map(S=>S.color);i=m.map(S=>S.map(E=>W3e(E,b,u,c,f))),l&&fE(i,l);const w=p.map(S=>ek(S.theme,n));o=g7(p,y,w,u,c,"fg",f),r=g7(p,y,w,u,c,"bg",f),s=`shiki-themes ${y.map(S=>S.name).join(" ")}`,a=c?void 0:[o,r].join(";")}else if("theme"in n){const c=ek(n.theme,n);i=fP(e,t,n);const u=e.getTheme(n.theme);r=fd(u.bg,c),o=fd(u.fg,c),s=u.name,l=ib(i)}else throw new Hr("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:o,bg:r,themeName:s,rootStyle:a,grammarState:l}}function g7(e,t,n,r,o,i,s){return e.map((a,l)=>{const c=fd(t[l][i],n[l])||"inherit",u=`${r+a.color}${i==="bg"?"-bg":""}:${c}`;if(l===0&&o){if(o===dP&&e.length>1){const f=e.findIndex(b=>b.color==="light"),p=e.findIndex(b=>b.color==="dark");if(f===-1||p===-1)throw new Hr('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const m=fd(t[f][i],n[f])||"inherit",y=fd(t[p][i],n[p])||"inherit";return`light-dark(${m}, ${y});${u}`}return c}return s==="css-vars"?u:null}).filter(a=>!!a).join(";")}function ik(e,t,n,r={meta:{},options:n,codeToHast:(o,i)=>ik(e,o,i),codeToTokens:(o,i)=>ok(e,o,i)}){let o=t;for(const y of nk(n))o=y.preprocess?.call(r,o,n)||o;let{tokens:i,fg:s,bg:a,themeName:l,rootStyle:c,grammarState:u}=ok(e,o,n);const{mergeWhitespaces:f=!0,mergeSameStyleTokens:p=!1}=n;f===!0?i=mPe(i):f==="never"&&(i=gPe(i)),p&&(i=yPe(i));const m={...r,get source(){return o}};for(const y of nk(n))i=y.tokens?.call(m,i)||i;return pPe(i,{...n,fg:s,bg:a,themeName:l,rootStyle:c},m,u)}function pPe(e,t,n,r=ib(e)){const o=nk(t),i=[],s={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=t;let c={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter(([y])=>!y.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:i};const f=[],p={...n,structure:a,addClassToHast:IX,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return s},get pre(){return c},get code(){return u},get lines(){return f}};if(e.forEach((y,b)=>{b&&(a==="inline"?s.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&i.push({type:"text",value:`
`}));let w={type:"element",tagName:"span",properties:{class:"line"},children:[]},S=0;for(const E of y){let T={type:"element",tagName:"span",properties:{...E.htmlAttrs},children:[{type:"text",value:E.content}]};const A=RR(E.htmlStyle||tk(E));A&&(T.properties.style=A);for(const M of o)T=M?.span?.call(p,T,b+1,S,w,E)||T;a==="inline"?s.children.push(T):a==="classic"&&w.children.push(T),S+=E.content.length}if(a==="classic"){for(const E of o)w=E?.line?.call(p,w,b+1)||w;f.push(w),i.push(w)}}),a==="classic"){for(const y of o)u=y?.code?.call(p,u)||u;c.children.push(u);for(const y of o)c=y?.pre?.call(p,c)||c;s.children.push(c)}let m=s;for(const y of o)m=y?.root?.call(p,m)||m;return r&&fE(m,r),m}function mPe(e){return e.map(t=>{const n=[];let r="",o=0;return t.forEach((i,s)=>{const l=!(i.fontStyle&&(i.fontStyle&Ko.Underline||i.fontStyle&Ko.Strikethrough));l&&i.content.match(/^\s+$/)&&t[s+1]?(o||(o=i.offset),r+=i.content):r?(l?n.push({...i,offset:o,content:r+i.content}):n.push({content:r,offset:o},i),o=0,r=""):n.push(i)}),n})}function gPe(e){return e.map(t=>t.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,o,i,s]=r;if(!o&&!s)return n;const a=[{...n,offset:n.offset+o.length,content:i}];return o&&a.unshift({content:o,offset:n.offset}),s&&a.push({content:s,offset:n.offset+o.length+i.length}),a}))}function yPe(e){return e.map(t=>{const n=[];for(const r of t){if(n.length===0){n.push({...r});continue}const o=n[n.length-1],i=RR(o.htmlStyle||tk(o)),s=RR(r.htmlStyle||tk(r)),a=o.fontStyle&&(o.fontStyle&Ko.Underline||o.fontStyle&Ko.Strikethrough),l=r.fontStyle&&(r.fontStyle&Ko.Underline||r.fontStyle&Ko.Strikethrough);!a&&!l&&i===s?o.content+=r.content:n.push({...r})}return n})}const bPe=B3e;function vPe(e,t,n){const r={meta:{},options:n,codeToHast:(i,s)=>ik(e,i,s),codeToTokens:(i,s)=>ok(e,i,s)};let o=bPe(ik(e,t,n,r));for(const i of nk(n))o=i.postprocess?.call(r,o,n)||o;return o}const y7={light:"#333333",dark:"#bbbbbb"},b7={light:"#fffffe",dark:"#1e1e1e"},v7="__shiki_resolved";function hP(e){if(e?.[v7])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||="dark",t.colorReplacements={...t.colorReplacements},t.settings||=[];let{bg:n,fg:r}=t;if(!n||!r){const a=t.settings?t.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&t?.colors?.["editor.foreground"]&&(r=t.colors["editor.foreground"]),!n&&t?.colors?.["editor.background"]&&(n=t.colors["editor.background"]),r||(r=t.type==="light"?y7.light:y7.dark),n||(n=t.type==="light"?b7.light:b7.dark),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let o=0;const i=new Map;function s(a){if(i.has(a))return i.get(a);o+=1;const l=`#${o.toString(16).padStart(8,"0").toLowerCase()}`;return t.colorReplacements?.[`#${l}`]?s(a):(i.set(a,l),l)}t.settings=t.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const u={...a,settings:{...a.settings}};if(l){const f=s(a.settings.foreground);t.colorReplacements[f]=a.settings.foreground,u.settings.foreground=f}if(c){const f=s(a.settings.background);t.colorReplacements[f]=a.settings.background,u.settings.background=f}return u});for(const a of Object.keys(t.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!t.colors[a]?.startsWith("#")){const l=s(t.colors[a]);t.colorReplacements[l]=t.colors[a],t.colors[a]=l}return Object.defineProperty(t,v7,{enumerable:!1,writable:!1,value:!0}),t}async function $X(e){return Array.from(new Set((await Promise.all(e.filter(t=>!NX(t)).map(async t=>await MX(t).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function jX(e){return(await Promise.all(e.map(async n=>RX(n)?null:hP(await MX(n))))).filter(n=>!!n)}let xPe=3;function wPe(e,t=3){t>xPe||console.trace(`[SHIKI DEPRECATE]: ${e}`)}class Hp extends Error{constructor(t){super(t),this.name="ShikiError"}}class SPe extends M4e{constructor(t,n,r,o={}){super(t),this._resolver=t,this._themes=n,this._langs=r,this._alias=o,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(t){return typeof t=="string"?this._resolvedThemes.get(t):this.loadTheme(t)}loadTheme(t){const n=hP(t);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(t){let n=this._textmateThemeCache.get(t);n||(n=WS.createFromRawTheme(t),this._textmateThemeCache.set(t,n)),this._syncRegistry.setTheme(n)}getGrammar(t){if(this._alias[t]){const n=new Set([t]);for(;this._alias[t];){if(t=this._alias[t],n.has(t))throw new Hp(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return this._resolvedGrammars.get(t)}loadLanguage(t){if(this.getGrammar(t.name))return;const n=new Set([...this._langMap.values()].filter(i=>i.embeddedLangsLazy?.includes(t.name)));this._resolver.addLanguage(t);const r={balancedBracketSelectors:t.balancedBracketSelectors||["*"],unbalancedBracketSelectors:t.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(t.scopeName,t);const o=this.loadGrammarWithConfiguration(t.scopeName,1,r);if(o.name=t.name,this._resolvedGrammars.set(t.name,o),t.aliases&&t.aliases.forEach(i=>{this._alias[i]=t.name}),this._loadedLanguagesCache=null,n.size)for(const i of n)this._resolvedGrammars.delete(i.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(i.scopeName),this._syncRegistry?._grammars?.delete(i.scopeName),this.loadLanguage(this._langMap.get(i.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(t){for(const o of t)this.resolveEmbeddedLanguages(o);const n=Array.from(this._langGraph.entries()),r=n.filter(([o,i])=>!i);if(r.length){const o=n.filter(([i,s])=>s&&s.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(i=>!r.includes(i));throw new Hp(`Missing languages ${r.map(([i])=>`\`${i}\``).join(", ")}, required by ${o.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[o,i]of n)this._resolver.addLanguage(i);for(const[o,i]of n)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(t){if(this._langMap.set(t.name,t),this._langGraph.set(t.name,t),t.embeddedLangs)for(const n of t.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class kPe{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(t,n){this._onigLib={createOnigScanner:r=>t.createScanner(r),createOnigString:r=>t.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(t){return this._langs.get(t)}loadGrammar(t){return this._scopeToLang.get(t)}addLanguage(t){this._langs.set(t.name,t),t.aliases&&t.aliases.forEach(n=>{this._langs.set(n,t)}),this._scopeToLang.set(t.scopeName,t),t.injectTo&&t.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(t.scopeName)})}getInjections(t){const n=t.split(".");let r=[];for(let o=1;o<=n.length;o++){const i=n.slice(0,o).join(".");r=[...r,...this._injections.get(i)||[]]}return r}}let Cy=0;function CPe(e){Cy+=1,e.warnings!==!1&&Cy>=10&&Cy%10===0&&console.warn(`[Shiki] ${Cy} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new Hp("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(hP),o=new kPe(e.engine,n),i=new SPe(o,r,n,e.langAlias);let s;function a(E){w();const T=i.getGrammar(typeof E=="string"?E:E.name);if(!T)throw new Hp(`Language \`${E}\` not found, you may need to load it first`);return T}function l(E){if(E==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};w();const T=i.getTheme(E);if(!T)throw new Hp(`Theme \`${E}\` not found, you may need to load it first`);return T}function c(E){w();const T=l(E);s!==E&&(i.setTheme(T),s=E);const A=i.getColorMap();return{theme:T,colorMap:A}}function u(){return w(),i.getLoadedThemes()}function f(){return w(),i.getLoadedLanguages()}function p(...E){w(),i.loadLanguages(E.flat(1))}async function m(...E){return p(await $X(E))}function y(...E){w();for(const T of E.flat(1))i.loadTheme(T)}async function b(...E){return w(),y(await jX(E))}function w(){if(t)throw new Hp("Shiki instance has been disposed")}function S(){t||(t=!0,i.dispose(),Cy-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:f,loadLanguage:m,loadLanguageSync:p,loadTheme:b,loadThemeSync:y,dispose:S,[Symbol.dispose]:S}}async function EPe(e){e.engine||wPe("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,n,r]=await Promise.all([jX(e.themes||[]),$X(e.langs||[]),e.engine]);return CPe({...e,themes:t,langs:n,engine:r})}async function TPe(e){const t=await EPe(e);return{getLastGrammarState:(...n)=>aPe(t,...n),codeToTokensBase:(n,r)=>fP(t,n,r),codeToTokensWithThemes:(n,r)=>DX(t,n,r),codeToTokens:(n,r)=>ok(t,n,r),codeToHast:(n,r)=>ik(t,n,r),codeToHtml:(n,r)=>vPe(t,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function _Pe(e){const t=e.langs,n=e.themes,r=e.engine;async function o(i){function s(f){if(typeof f=="string"){if(NX(f))return[];f=i.langAlias?.[f]||f;const p=t[f];if(!p)throw new Hr(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return p}return f}function a(f){if(RX(f))return"none";if(typeof f=="string"){const p=n[f];if(!p)throw new Hr(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return p}return f}const l=(i.themes??[]).map(f=>a(f)),c=(i.langs??[]).map(f=>s(f)),u=await TPe({engine:i.engine??r(),...i,themes:l,langs:c});return{...u,loadLanguage(...f){return u.loadLanguage(...f.map(s))},loadTheme(...f){return u.loadTheme(...f.map(a))},getBundledLanguages(){return t},getBundledThemes(){return n}}}return o}function dg(e){if([...e].length!==1)throw new Error(`Expected "${e}" to be a single code point`);return e.codePointAt(0)}function APe(e,t,n){return e.has(t)||e.set(t,n),e.get(t)}const pP=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),xo=String.raw;function fg(e,t){if(e==null)throw new Error(t??"Value expected");return e}const LX=xo`\[\^?`,zX=`c.? | C(?:-.?)?|${xo`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${xo`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${xo`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${xo`o\{[^\}]*\}?`}|${xo`\d{1,3}`}`,mP=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,bx=new RegExp(xo`
  \\ (?:
    ${zX}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*[^\)]*\)?
  )?
  | (?:${mP.source})+
  | ${LX}
  | .
`.replace(/\s+/g,""),"gsu"),_A=new RegExp(xo`
  \\ (?:
    ${zX}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${LX}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function MPe(e,t={}){const n={flags:"",...t,rules:{captureGroup:!1,singleline:!1,...t.rules}};if(typeof e!="string")throw new Error("String expected as pattern");const r=WPe(n.flags),o=[r.extended],i={captureGroup:n.rules.captureGroup,getCurrentModX(){return o.at(-1)},numOpenGroups:0,popModX(){o.pop()},pushModX(f){o.push(f)},replaceCurrentModX(f){o[o.length-1]=f},singleline:n.rules.singleline};let s=[],a;for(bx.lastIndex=0;a=bx.exec(e);){const f=NPe(i,e,a[0],bx.lastIndex);f.tokens?s.push(...f.tokens):f.token&&s.push(f.token),f.lastIndex!==void 0&&(bx.lastIndex=f.lastIndex)}const l=[];let c=0;s.filter(f=>f.type==="GroupOpen").forEach(f=>{f.kind==="capturing"?f.number=++c:f.raw==="("&&l.push(f)}),c||l.forEach((f,p)=>{f.kind="capturing",f.number=p+1});const u=c||l.length;return{tokens:s.map(f=>f.type==="EscapedNumber"?YPe(f,u):f).flat(),flags:r}}function NPe(e,t,n,r){const[o,i]=n;if(n==="["||n==="[^"){const s=RPe(t,n,r);return{tokens:s.tokens,lastIndex:s.lastIndex}}if(o==="\\"){if("AbBGyYzZ".includes(i))return{token:x7(n,n)};if(/^\\g[<']/.test(n)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(n))throw new Error(`Invalid group name "${n}"`);return{token:FPe(n)}}if(/^\\k[<']/.test(n)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(n))throw new Error(`Invalid group name "${n}"`);return{token:FX(n)}}if(i==="K")return{token:VX("keep",n)};if(i==="N"||i==="R")return{token:Pf("newline",n,{negate:i==="N"})};if(i==="O")return{token:Pf("any",n)};if(i==="X")return{token:Pf("text_segment",n)};const s=BX(n,{inCharClass:!1});return Array.isArray(s)?{tokens:s}:{token:s}}if(o==="("){if(i==="*")return{token:GPe(n)};if(n==="(?{")throw new Error(`Unsupported callout "${n}"`);if(n.startsWith("(?#")){if(t[r]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:r+1}}if(/^\(\?[-imx]+[:)]$/.test(n))return{token:UPe(n,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,n==="("&&!e.captureGroup||n==="(?:")return{token:$p("group",n)};if(n==="(?>")return{token:$p("atomic",n)};if(n==="(?="||n==="(?!"||n==="(?<="||n==="(?<!")return{token:$p(n[2]==="<"?"lookbehind":"lookahead",n,{negate:n.endsWith("!")})};if(n==="("&&e.captureGroup||n.startsWith("(?<")&&n.endsWith(">")||n.startsWith("(?'")&&n.endsWith("'"))return{token:$p("capturing",n,{...n!=="("&&{name:n.slice(3,-1)}})};if(n.startsWith("(?~")){if(n==="(?~|")throw new Error(`Unsupported absence function kind "${n}"`);return{token:$p("absence_repeater",n)}}throw n==="(?("?new Error(`Unsupported conditional "${n}"`):new Error(`Invalid or unsupported group option "${n}"`)}if(n===")"){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:LPe(n)}}if(e.getCurrentModX()){if(n==="#"){const s=t.indexOf(`
`,r);return{lastIndex:s===-1?t.length:s}}if(/^\s$/.test(n)){const s=/\s+/y;return s.lastIndex=r,{lastIndex:s.exec(t)?s.lastIndex:r}}}if(n===".")return{token:Pf("dot",n)};if(n==="^"||n==="$"){const s=e.singleline?{"^":xo`\A`,$:xo`\Z`}[n]:n;return{token:x7(s,n)}}return n==="|"?{token:OPe(n)}:mP.test(n)?{tokens:JPe(n)}:{token:Fc(dg(n),n)}}function RPe(e,t,n){const r=[w7(t[1]==="^",t)];let o=1,i;for(_A.lastIndex=n;i=_A.exec(e);){const s=i[0];if(s[0]==="["&&s[1]!==":")o++,r.push(w7(s[1]==="^",s));else if(s==="]"){if(r.at(-1).type==="CharacterClassOpen")r.push(Fc(93,s));else if(o--,r.push(PPe(s)),!o)break}else{const a=IPe(s);Array.isArray(a)?r.push(...a):r.push(a)}}return{tokens:r,lastIndex:_A.lastIndex||e.length}}function IPe(e){if(e[0]==="\\")return BX(e,{inCharClass:!0});if(e[0]==="["){const t=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(e);if(!t||!pP.has(t.groups.name))throw new Error(`Invalid POSIX class "${e}"`);return Pf("posix",e,{value:t.groups.name,negate:!!t.groups.negate})}return e==="-"?DPe(e):e==="&&"?$Pe(e):Fc(dg(e),e)}function BX(e,{inCharClass:t}){const n=e[1];if(n==="c"||n==="C")return HPe(e);if("dDhHsSwW".includes(n))return qPe(e);if(e.startsWith(xo`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${e}"`);if(/^\\[pP]\{/.test(e)){if(e.length===3)throw new Error(`Incomplete or invalid Unicode property "${e}"`);return ZPe(e)}if(new RegExp("^\\\\x[89A-Fa-f]\\p{AHex}","u").test(e))try{const r=e.split(/\\x/).slice(1).map(s=>parseInt(s,16)),o=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(r)),i=new TextEncoder;return[...o].map(s=>{const a=[...i.encode(s)].map(l=>`\\x${l.toString(16)}`).join("");return Fc(dg(s),a)})}catch{throw new Error(`Multibyte code "${e}" incomplete or invalid in Oniguruma`)}if(n==="u"||n==="x")return Fc(KPe(e),e);if(S7.has(n))return Fc(S7.get(n),e);if(/\d/.test(n))return jPe(t,e);if(e==="\\")throw new Error(xo`Incomplete escape "\"`);if(n==="M")throw new Error(`Unsupported meta "${e}"`);if([...e].length===2)return Fc(e.codePointAt(1),e);throw new Error(`Unexpected escape "${e}"`)}function OPe(e){return{type:"Alternator",raw:e}}function x7(e,t){return{type:"Assertion",kind:e,raw:t}}function FX(e){return{type:"Backreference",raw:e}}function Fc(e,t){return{type:"Character",value:e,raw:t}}function PPe(e){return{type:"CharacterClassClose",raw:e}}function DPe(e){return{type:"CharacterClassHyphen",raw:e}}function $Pe(e){return{type:"CharacterClassIntersector",raw:e}}function w7(e,t){return{type:"CharacterClassOpen",negate:e,raw:t}}function Pf(e,t,n={}){return{type:"CharacterSet",kind:e,...n,raw:t}}function VX(e,t,n={}){return e==="keep"?{type:"Directive",kind:e,raw:t}:{type:"Directive",kind:e,flags:fg(n.flags),raw:t}}function jPe(e,t){return{type:"EscapedNumber",inCharClass:e,raw:t}}function LPe(e){return{type:"GroupClose",raw:e}}function $p(e,t,n={}){return{type:"GroupOpen",kind:e,...n,raw:t}}function zPe(e,t,n,r){return{type:"NamedCallout",kind:e,tag:t,arguments:n,raw:r}}function BPe(e,t,n,r){return{type:"Quantifier",kind:e,min:t,max:n,raw:r}}function FPe(e){return{type:"Subroutine",raw:e}}const VPe=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),S7=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function HPe(e){const t=e[1]==="c"?e[2]:e[3];if(!t||!/[A-Za-z]/.test(t))throw new Error(`Unsupported control character "${e}"`);return Fc(dg(t.toUpperCase())-64,e)}function UPe(e,t){let{on:n,off:r}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(e).groups;r??="";const o=(t.getCurrentModX()||n.includes("x"))&&!r.includes("x"),i=C7(n),s=C7(r),a={};if(i&&(a.enable=i),s&&(a.disable=s),e.endsWith(")"))return t.replaceCurrentModX(o),VX("flags",e,{flags:a});if(e.endsWith(":"))return t.pushModX(o),t.numOpenGroups++,$p("group",e,{...(i||s)&&{flags:a}});throw new Error(`Unexpected flag modifier "${e}"`)}function GPe(e){const t=/\(\*(?<name>[A-Za-z_]\w*)?(?:\[(?<tag>(?:[A-Za-z_]\w*)?)\])?(?:\{(?<args>[^}]*)\})?\)/.exec(e);if(!t)throw new Error(`Incomplete or invalid named callout "${e}"`);const{name:n,tag:r,args:o}=t.groups;if(!n)throw new Error(`Invalid named callout "${e}"`);if(r==="")throw new Error(`Named callout tag with empty value not allowed "${e}"`);const i=o?o.split(",").filter(u=>u!=="").map(u=>/^[+-]?\d+$/.test(u)?+u:u):[],[s,a,l]=i,c=VPe.has(n)?n.toLowerCase():"custom";switch(c){case"fail":case"mismatch":case"skip":if(i.length>0)throw new Error(`Named callout arguments not allowed "${i}"`);break;case"error":if(i.length>1)throw new Error(`Named callout allows only one argument "${i}"`);if(typeof s=="string")throw new Error(`Named callout argument must be a number "${s}"`);break;case"max":if(!i.length||i.length>2)throw new Error(`Named callout must have one or two arguments "${i}"`);if(typeof s=="string"&&!/^[A-Za-z_]\w*$/.test(s))throw new Error(`Named callout argument one must be a tag or number "${s}"`);if(i.length===2&&(typeof a=="number"||!/^[<>X]$/.test(a)))throw new Error(`Named callout optional argument two must be '<', '>', or 'X' "${a}"`);break;case"count":case"total_count":if(i.length>1)throw new Error(`Named callout allows only one argument "${i}"`);if(i.length===1&&(typeof s=="number"||!/^[<>X]$/.test(s)))throw new Error(`Named callout optional argument must be '<', '>', or 'X' "${s}"`);break;case"cmp":if(i.length!==3)throw new Error(`Named callout must have three arguments "${i}"`);if(typeof s=="string"&&!/^[A-Za-z_]\w*$/.test(s))throw new Error(`Named callout argument one must be a tag or number "${s}"`);if(typeof a=="number"||!/^(?:[<>!=]=|[<>])$/.test(a))throw new Error(`Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' "${a}"`);if(typeof l=="string"&&!/^[A-Za-z_]\w*$/.test(l))throw new Error(`Named callout argument three must be a tag or number "${l}"`);break;case"custom":throw new Error(`Undefined callout name "${n}"`);default:throw new Error(`Unexpected named callout kind "${c}"`)}return zPe(c,r??null,o?.split(",")??null,e)}function k7(e){let t=null,n,r;if(e[0]==="{"){const{minStr:o,maxStr:i}=/^\{(?<minStr>\d*)(?:,(?<maxStr>\d*))?/.exec(e).groups,s=1e5;if(+o>s||i&&+i>s)throw new Error("Quantifier value unsupported in Oniguruma");if(n=+o,r=i===void 0?+o:i===""?1/0:+i,n>r&&(t="possessive",[n,r]=[r,n]),e.endsWith("?")){if(t==="possessive")throw new Error('Unsupported possessive interval quantifier chain with "?"');t="lazy"}else t||(t="greedy")}else n=e[0]==="+"?1:0,r=e[0]==="?"?1:1/0,t=e[1]==="+"?"possessive":e[1]==="?"?"lazy":"greedy";return BPe(t,n,r,e)}function qPe(e){const t=e[1].toLowerCase();return Pf({d:"digit",h:"hex",s:"space",w:"word"}[t],e,{negate:e[1]!==t})}function ZPe(e){const{p:t,neg:n,value:r}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(e).groups;return Pf("property",e,{value:r,negate:t==="P"&&!n||t==="p"&&!!n})}function C7(e){const t={};return e.includes("i")&&(t.ignoreCase=!0),e.includes("m")&&(t.dotAll=!0),e.includes("x")&&(t.extended=!0),Object.keys(t).length?t:null}function WPe(e){const t={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null};for(let n=0;n<e.length;n++){const r=e[n];if(!"imxDPSWy".includes(r))throw new Error(`Invalid flag "${r}"`);if(r==="y"){if(!/^y{[gw]}/.test(e.slice(n)))throw new Error('Invalid or unspecified flag "y" mode');t.textSegmentMode=e[n+2]==="g"?"grapheme":"word",n+=3;continue}t[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[r]]=!0}return t}function KPe(e){if(new RegExp("^(?:\\\\u(?!\\p{AHex}{4})|\\\\x(?!\\p{AHex}{1,2}|\\{\\p{AHex}{1,8}\\}))","u").test(e))throw new Error(`Incomplete or invalid escape "${e}"`);const t=e[2]==="{"?new RegExp("^\\\\x\\{\\s*(?<hex>\\p{AHex}+)","u").exec(e).groups.hex:e.slice(2);return parseInt(t,16)}function YPe(e,t){const{raw:n,inCharClass:r}=e,o=n.slice(1);if(!r&&(o!=="0"&&o.length===1||o[0]!=="0"&&+o<=t))return[FX(n)];const i=[],s=o.match(/^[0-7]+|\d/g);for(let a=0;a<s.length;a++){const l=s[a];let c;if(a===0&&l!=="8"&&l!=="9"){if(c=parseInt(l,8),c>127)throw new Error(xo`Octal encoded byte above 177 unsupported "${n}"`)}else c=dg(l);i.push(Fc(c,(a===0?"\\":"")+l))}return i}function JPe(e){const t=[],n=new RegExp(mP,"gy");let r;for(;r=n.exec(e);){const o=r[0];if(o[0]==="{"){const i=/^\{(?<min>\d+),(?<max>\d+)\}\??$/.exec(o);if(i){const{min:s,max:a}=i.groups;if(+s>+a&&o.endsWith("?")){n.lastIndex--,t.push(k7(o.slice(0,-1)));continue}}}t.push(k7(o))}return t}function HX(e,t){if(!Array.isArray(e.body))throw new Error("Expected node with body array");if(e.body.length!==1)return!1;const n=e.body[0];return!t||Object.keys(t).every(r=>t[r]===n[r])}function XPe(e){return QPe.has(e.type)}const QPe=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function UX(e,t={}){const n={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t,rules:{captureGroup:!1,singleline:!1,...t.rules}},r=MPe(e,{flags:n.flags,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline}}),o=(p,m)=>{const y=r.tokens[i.nextIndex];switch(i.parent=p,i.nextIndex++,y.type){case"Alternator":return hh();case"Assertion":return eDe(y);case"Backreference":return tDe(y,i);case"Character":return hE(y.value,{useLastValid:!!m.isCheckingRangeEnd});case"CharacterClassHyphen":return nDe(y,i,m);case"CharacterClassOpen":return rDe(y,i,m);case"CharacterSet":return oDe(y,i);case"Directive":return uDe(y.kind,{flags:y.flags});case"GroupOpen":return iDe(y,i,m);case"NamedCallout":return fDe(y.kind,y.tag,y.arguments);case"Quantifier":return sDe(y,i);case"Subroutine":return aDe(y,i);default:throw new Error(`Unexpected token type "${y.type}"`)}},i={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:n.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:n.skipBackrefValidation,skipLookbehindValidation:n.skipLookbehindValidation,skipPropertyNameValidation:n.skipPropertyNameValidation,subroutines:[],tokens:r.tokens,unicodePropertyMap:n.unicodePropertyMap,walk:o},s=pDe(dDe(r.flags));let a=s.body[0];for(;i.nextIndex<r.tokens.length;){const p=o(a,{});p.type==="Alternative"?(s.body.push(p),a=p):a.body.push(p)}const{capturingGroups:l,hasNumberedRef:c,namedGroupsByName:u,subroutines:f}=i;if(c&&u.size&&!n.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(const{ref:p}of f)if(typeof p=="number"){if(p>l.length)throw new Error("Subroutine uses a group number that's not defined");p&&(l[p-1].isSubroutined=!0)}else if(u.has(p)){if(u.get(p).length>1)throw new Error(xo`Subroutine uses a duplicate group name "\g<${p}>"`);u.get(p)[0].isSubroutined=!0}else throw new Error(xo`Subroutine uses a group name that's not defined "\g<${p}>"`);return s}function eDe({kind:e}){return IR(fg({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[e],`Unexpected assertion kind "${e}"`),{negate:e===xo`\B`||e===xo`\Y`})}function tDe({raw:e},t){const n=/^\\k[<']/.test(e),r=n?e.slice(3,-1):e.slice(1),o=(i,s=!1)=>{const a=t.capturingGroups.length;let l=!1;if(i>a)if(t.skipBackrefValidation)l=!0;else throw new Error(`Not enough capturing groups defined to the left "${e}"`);return t.hasNumberedRef=!0,OR(s?a+1-i:i,{orphan:l})};if(n){const i=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(r);if(i)return o(+i.groups.num,!!i.groups.sign);if(/[-+]/.test(r))throw new Error(`Invalid backref name "${e}"`);if(!t.namedGroupsByName.has(r))throw new Error(`Group name not defined to the left "${e}"`);return OR(r)}return o(+r)}function nDe(e,t,n){const{tokens:r,walk:o}=t,i=t.parent,s=i.body.at(-1),a=r[t.nextIndex];if(!n.isCheckingRangeEnd&&s&&s.type!=="CharacterClass"&&s.type!=="CharacterClassRange"&&a&&a.type!=="CharacterClassOpen"&&a.type!=="CharacterClassClose"&&a.type!=="CharacterClassIntersector"){const l=o(i,{...n,isCheckingRangeEnd:!0});if(s.type==="Character"&&l.type==="Character")return i.body.pop(),cDe(s,l);throw new Error("Invalid character class range")}return hE(dg("-"))}function rDe({negate:e},t,n){const{tokens:r,walk:o}=t,i=r[t.nextIndex],s=[ww()];let a=_7(i);for(;a.type!=="CharacterClassClose";){if(a.type==="CharacterClassIntersector")s.push(ww()),t.nextIndex++;else{const c=s.at(-1);c.body.push(o(c,n))}a=_7(r[t.nextIndex],i)}const l=ww({negate:e});return s.length===1?l.body=s[0].body:(l.kind="intersection",l.body=s.map(c=>c.body.length===1?c.body[0]:c)),t.nextIndex++,l}function oDe({kind:e,negate:t,value:n},r){const{normalizeUnknownPropertyNames:o,skipPropertyNameValidation:i,unicodePropertyMap:s}=r;if(e==="property"){const a=pE(n);if(pP.has(a)&&!s?.has(a))e="posix",n=a;else return jp(n,{negate:t,normalizeUnknownPropertyNames:o,skipPropertyNameValidation:i,unicodePropertyMap:s})}return e==="posix"?hDe(n,{negate:t}):PR(e,{negate:t})}function iDe(e,t,n){const{tokens:r,capturingGroups:o,namedGroupsByName:i,skipLookbehindValidation:s,walk:a}=t,l=mDe(e),c=l.type==="AbsenceFunction",u=T7(l),f=u&&l.negate;if(l.type==="CapturingGroup"&&(o.push(l),l.name&&APe(i,l.name,[]).push(l)),c&&n.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");let p=A7(r[t.nextIndex]);for(;p.type!=="GroupClose";){if(p.type==="Alternator")l.body.push(hh()),t.nextIndex++;else{const m=l.body.at(-1),y=a(m,{...n,isInAbsenceFunction:n.isInAbsenceFunction||c,isInLookbehind:n.isInLookbehind||u,isInNegLookbehind:n.isInNegLookbehind||f});if(m.body.push(y),(u||n.isInLookbehind)&&!s){const b="Lookbehind includes a pattern not allowed by Oniguruma";if(f||n.isInNegLookbehind){if(E7(y)||y.type==="CapturingGroup")throw new Error(b)}else if(E7(y)||T7(y)&&y.negate)throw new Error(b)}}p=A7(r[t.nextIndex])}return t.nextIndex++,l}function sDe({kind:e,min:t,max:n},r){const o=r.parent,i=o.body.at(-1);if(!i||!XPe(i))throw new Error("Quantifier requires a repeatable token");const s=qX(e,t,n,i);return o.body.pop(),s}function aDe({raw:e},t){const{capturingGroups:n,subroutines:r}=t;let o=e.slice(3,-1);const i=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(o);if(i){const a=+i.groups.num,l=n.length;if(t.hasNumberedRef=!0,o={"":a,"+":l+a,"-":l+1-a}[i.groups.sign],o<1)throw new Error("Invalid subroutine number")}else o==="0"&&(o=0);const s=ZX(o);return r.push(s),s}function lDe(e,t){return{type:"AbsenceFunction",kind:e,body:bv(t?.body)}}function hh(e){return{type:"Alternative",body:WX(e?.body)}}function IR(e,t){const n={type:"Assertion",kind:e};return(e==="word_boundary"||e==="text_segment_boundary")&&(n.negate=!!t?.negate),n}function OR(e,t){const n=!!t?.orphan;return{type:"Backreference",ref:e,...n&&{orphan:n}}}function GX(e,t){const n={name:void 0,isSubroutined:!1,...t};if(n.name!==void 0&&!gDe(n.name))throw new Error(`Group name "${n.name}" invalid in Oniguruma`);return{type:"CapturingGroup",number:e,...n.name&&{name:n.name},...n.isSubroutined&&{isSubroutined:n.isSubroutined},body:bv(t?.body)}}function hE(e,t){const n={useLastValid:!1,...t};if(e>1114111){const r=e.toString(16);if(n.useLastValid)e=1114111;else throw e>1310719?new Error(`Invalid code point out of range "\\x{${r}}"`):new Error(`Invalid code point out of range in JS "\\x{${r}}"`)}return{type:"Character",value:e}}function ww(e){const t={kind:"union",negate:!1,...e};return{type:"CharacterClass",kind:t.kind,negate:t.negate,body:WX(e?.body)}}function cDe(e,t){if(t.value<e.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:t}}function PR(e,t){const n=!!t?.negate,r={type:"CharacterSet",kind:e};return(e==="digit"||e==="hex"||e==="newline"||e==="space"||e==="word")&&(r.negate=n),(e==="text_segment"||e==="newline"&&!n)&&(r.variableLength=!0),r}function uDe(e,t={}){if(e==="keep")return{type:"Directive",kind:e};if(e==="flags")return{type:"Directive",kind:e,flags:fg(t.flags)};throw new Error(`Unexpected directive kind "${e}"`)}function dDe(e){return{type:"Flags",...e}}function Fa(e){const t=e?.atomic,n=e?.flags;if(t&&n)throw new Error("Atomic group cannot have flags");return{type:"Group",...t&&{atomic:t},...n&&{flags:n},body:bv(e?.body)}}function Cf(e){const t={behind:!1,negate:!1,...e};return{type:"LookaroundAssertion",kind:t.behind?"lookbehind":"lookahead",negate:t.negate,body:bv(e?.body)}}function fDe(e,t,n){return{type:"NamedCallout",kind:e,tag:t,arguments:n}}function hDe(e,t){const n=!!t?.negate;if(!pP.has(e))throw new Error(`Invalid POSIX class "${e}"`);return{type:"CharacterSet",kind:"posix",value:e,negate:n}}function qX(e,t,n,r){if(t>n)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:t,max:n,body:r}}function pDe(e,t){return{type:"Regex",body:bv(t?.body),flags:e}}function ZX(e){return{type:"Subroutine",ref:e}}function jp(e,t){const n={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t};let r=n.unicodePropertyMap?.get(pE(e));if(!r){if(n.normalizeUnknownPropertyNames)r=yDe(e);else if(n.unicodePropertyMap&&!n.skipPropertyNameValidation)throw new Error(xo`Invalid Unicode property "\p{${e}}"`)}return{type:"CharacterSet",kind:"property",value:r??e,negate:n.negate}}function mDe({flags:e,kind:t,name:n,negate:r,number:o}){switch(t){case"absence_repeater":return lDe("repeater");case"atomic":return Fa({atomic:!0});case"capturing":return GX(o,{name:n});case"group":return Fa({flags:e});case"lookahead":case"lookbehind":return Cf({behind:t==="lookbehind",negate:r});default:throw new Error(`Unexpected group kind "${t}"`)}}function bv(e){if(e===void 0)e=[hh()];else if(!Array.isArray(e)||!e.length||!e.every(t=>t.type==="Alternative"))throw new Error("Invalid body; expected array of one or more Alternative nodes");return e}function WX(e){if(e===void 0)e=[];else if(!Array.isArray(e)||!e.every(t=>!!t.type))throw new Error("Invalid body; expected array of nodes");return e}function E7(e){return e.type==="LookaroundAssertion"&&e.kind==="lookahead"}function T7(e){return e.type==="LookaroundAssertion"&&e.kind==="lookbehind"}function gDe(e){return/^[\p{Alpha}\p{Pc}][^)]*$/u.test(e)}function yDe(e){return e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,t=>t[0].toUpperCase()+t.slice(1).toLowerCase())}function pE(e){return e.replace(/[- _]+/g,"").toLowerCase()}function _7(e,t){return fg(e,`${t?.type==="Character"&&t.value===93?"Empty":"Unclosed"} character class`)}function A7(e){return fg(e,"Unclosed group")}function c0(e,t,n=null){function r(i,s){for(let a=0;a<i.length;a++){const l=o(i[a],s,a,i);a=Math.max(-1,a+l)}}function o(i,s=null,a=null,l=null){let c=0,u=!1;const f={node:i,parent:s,key:a,container:l,root:e,remove(){vx(l).splice(Math.max(0,wp(a)+c),1),c--,u=!0},removeAllNextSiblings(){return vx(l).splice(wp(a)+1)},removeAllPrevSiblings(){const S=wp(a)+c;return c-=S,vx(l).splice(0,Math.max(0,S))},replaceWith(S,E={}){const T=!!E.traverse;l?l[Math.max(0,wp(a)+c)]=S:fg(s,"Can't replace root node")[a]=S,T&&o(S,s,a,l),u=!0},replaceWithMultiple(S,E={}){const T=!!E.traverse;if(vx(l).splice(Math.max(0,wp(a)+c),1,...S),c+=S.length-1,T){let A=0;for(let M=0;M<S.length;M++)A+=o(S[M],s,wp(a)+M+A,l)}u=!0},skip(){u=!0}},{type:p}=i,m=t["*"],y=t[p],b=typeof m=="function"?m:m?.enter,w=typeof y=="function"?y:y?.enter;if(b?.(f,n),w?.(f,n),!u)switch(p){case"AbsenceFunction":case"CapturingGroup":case"Group":r(i.body,i);break;case"Alternative":case"CharacterClass":r(i.body,i);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":o(i.min,i,"min"),o(i.max,i,"max");break;case"LookaroundAssertion":r(i.body,i);break;case"Quantifier":o(i.body,i,"body");break;case"Regex":r(i.body,i),o(i.flags,i,"flags");break;default:throw new Error(`Unexpected node type "${p}"`)}return y?.exit?.(f,n),m?.exit?.(f,n),c}return o(e),e}function vx(e){if(!Array.isArray(e))throw new Error("Container expected");return e}function wp(e){if(typeof e!="number")throw new Error("Numeric key expected");return e}const bDe=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`;function vDe(e,t){for(let n=0;n<e.length;n++)e[n]>=t&&e[n]++}function xDe(e,t,n,r){return e.slice(0,t)+r+e.slice(t+n.length)}const la=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function gP(e,t,n,r){const o=new RegExp(String.raw`${t}|(?<$skip>\[\^?|\\?.)`,"gsu"),i=[!1];let s=0,a="";for(const l of e.matchAll(o)){const{0:c,groups:{$skip:u}}=l;if(!u&&(!r||r===la.DEFAULT==!s)){n instanceof Function?a+=n(l,{context:s?la.CHAR_CLASS:la.DEFAULT,negated:i[i.length-1]}):a+=n;continue}c[0]==="["?(s++,i.push(c[1]==="^")):c==="]"&&s&&(s--,i.pop()),a+=c}return a}function KX(e,t,n,r){gP(e,t,n,r)}function wDe(e,t,n=0,r){if(!new RegExp(t,"su").test(e))return null;const o=new RegExp(`${t}|(?<$skip>\\\\?.)`,"gsu");o.lastIndex=n;let i=0,s;for(;s=o.exec(e);){const{0:a,groups:{$skip:l}}=s;if(!l&&(!r||r===la.DEFAULT==!i))return s;a==="["?i++:a==="]"&&i&&i--,o.lastIndex==s.index&&o.lastIndex++}return null}function xx(e,t,n){return!!wDe(e,t,0,n)}function SDe(e,t){const n=/\\?./gsu;n.lastIndex=t;let r=e.length,o=0,i=1,s;for(;s=n.exec(e);){const[a]=s;if(a==="[")o++;else if(o)a==="]"&&o--;else if(a==="(")i++;else if(a===")"&&(i--,!i)){r=s.index;break}}return e.slice(t,r)}const M7=new RegExp(String.raw`(?<noncapturingStart>${bDe})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu");function kDe(e,t){const n=t?.hiddenCaptures??[];let r=t?.captureTransfers??new Map;if(!/\(\?>/.test(e))return{pattern:e,captureTransfers:r,hiddenCaptures:n};const o="(?>",i="(?:(?=(",s=[0],a=[];let l=0,c=0,u=NaN,f;do{f=!1;let p=0,m=0,y=!1,b;for(M7.lastIndex=Number.isNaN(u)?0:u+i.length;b=M7.exec(e);){const{0:w,index:S,groups:{capturingStart:E,noncapturingStart:T}}=b;if(w==="[")p++;else if(p)w==="]"&&p--;else if(w===o&&!y)u=S,y=!0;else if(y&&T)m++;else if(E)y?m++:(l++,s.push(l+c));else if(w===")"&&y){if(!m){c++;const A=l+c;if(e=`${e.slice(0,u)}${i}${e.slice(u+o.length,S)}))<$$${A}>)${e.slice(S+1)}`,f=!0,a.push(A),vDe(n,A),r.size){const M=new Map;r.forEach((R,O)=>{M.set(O>=A?O+1:O,R.map(I=>I>=A?I+1:I))}),r=M}break}m--}}}while(f);return n.push(...a),e=gP(e,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:p,groups:{backrefNum:m,wrappedBackrefNum:y}})=>{if(m){const b=+m;if(b>s.length-1)throw new Error(`Backref "${p}" greater than number of captures`);return`\\${s[b]}`}return`\\${y}`},la.DEFAULT),{pattern:e,captureTransfers:r,hiddenCaptures:n}}const YX=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,AA=new RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${YX})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu");function CDe(e){if(!new RegExp(`${YX}\\+`).test(e))return{pattern:e};const t=[];let n=null,r=null,o="",i=0,s;for(AA.lastIndex=0;s=AA.exec(e);){const{0:a,index:l,groups:{qBase:c,qMod:u,invalidQ:f}}=s;if(a==="[")i||(r=l),i++;else if(a==="]")i?i--:r=null;else if(!i)if(u==="+"&&o&&!o.startsWith("(")){if(f)throw new Error(`Invalid quantifier "${a}"`);let p=-1;if(/^\{\d+\}$/.test(c))e=xDe(e,l+c.length,u,"");else{if(o===")"||o==="]"){const m=o===")"?n:r;if(m===null)throw new Error(`Invalid unmatched "${o}"`);e=`${e.slice(0,m)}(?>${e.slice(m,l)}${c})${e.slice(l+a.length)}`}else e=`${e.slice(0,l-o.length)}(?>${o}${c})${e.slice(l+a.length)}`;p+=4}AA.lastIndex+=p}else a[0]==="("?t.push(l):a===")"&&(n=t.length?t.pop():null);o=a}return{pattern:e}}const sa=String.raw,EDe=sa`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,DR=sa`\(\?R=(?<rDepth>[^\)]+)\)|${EDe}`,mE=sa`\(\?<(?![=!])(?<captureName>[^>]+)>`,JX=sa`${mE}|(?<unnamed>\()(?!\?)`,uf=new RegExp(sa`${mE}|${DR}|\(\?|\\?.`,"gsu"),MA="Cannot use multiple overlapping recursions";function TDe(e,t){const{hiddenCaptures:n,mode:r}={hiddenCaptures:[],mode:"plugin",...t};let o=t?.captureTransfers??new Map;if(!new RegExp(DR,"su").test(e))return{pattern:e,captureTransfers:o,hiddenCaptures:n};if(r==="plugin"&&xx(e,sa`\(\?\(DEFINE\)`,la.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");const i=[],s=xx(e,sa`\\[1-9]`,la.DEFAULT),a=new Map,l=[];let c=!1,u=0,f=0,p;for(uf.lastIndex=0;p=uf.exec(e);){const{0:m,groups:{captureName:y,rDepth:b,gRNameOrNum:w,gRDepth:S}}=p;if(m==="[")u++;else if(u)m==="]"&&u--;else if(b){if(N7(b),c)throw new Error(MA);if(s)throw new Error(`${r==="external"?"Backrefs":"Numbered backrefs"} cannot be used with global recursion`);const E=e.slice(0,p.index),T=e.slice(uf.lastIndex);if(xx(T,DR,la.DEFAULT))throw new Error(MA);const A=+b-1;e=R7(E,T,A,!1,n,i,f),o=O7(o,E,A,i.length,0,f);break}else if(w){N7(S);let E=!1;for(const G of l)if(G.name===w||G.num===+w){if(E=!0,G.hasRecursedWithin)throw new Error(MA);break}if(!E)throw new Error(sa`Recursive \g cannot be used outside the referenced group "${r==="external"?w:sa`\g<${w}&R=${S}>`}"`);const T=a.get(w),A=SDe(e,T);if(s&&xx(A,sa`${mE}|\((?!\?)`,la.DEFAULT))throw new Error(`${r==="external"?"Backrefs":"Numbered backrefs"} cannot be used with recursion of capturing groups`);const M=e.slice(T,p.index),R=A.slice(M.length+m.length),O=i.length,I=+S-1,L=R7(M,R,I,!0,n,i,f);o=O7(o,M,I,i.length-O,O,f);const $=e.slice(0,T),B=e.slice(T+A.length);e=`${$}${L}${B}`,uf.lastIndex+=L.length-m.length-M.length-R.length,l.forEach(G=>G.hasRecursedWithin=!0),c=!0}else if(y)f++,a.set(String(f),uf.lastIndex),a.set(y,uf.lastIndex),l.push({num:f,name:y});else if(m[0]==="("){const E=m==="(";E&&(f++,a.set(String(f),uf.lastIndex)),l.push(E?{num:f}:{})}else m===")"&&l.pop()}return n.push(...i),{pattern:e,captureTransfers:o,hiddenCaptures:n}}function N7(e){const t=`Max depth must be integer between 2 and 100; used ${e}`;if(!/^[1-9]\d*$/.test(e))throw new Error(t);if(e=+e,e<2||e>100)throw new Error(t)}function R7(e,t,n,r,o,i,s){const a=new Set;r&&KX(e+t,mE,({groups:{captureName:c}})=>{a.add(c)},la.DEFAULT);const l=[n,r?a:null,o,i,s];return`${e}${I7(`(?:${e}`,"forward",...l)}(?:)${I7(`${t})`,"backward",...l)}${t}`}function I7(e,t,n,r,o,i,s){const l=u=>t==="forward"?u+2:n-u+2-1;let c="";for(let u=0;u<n;u++){const f=l(u);c+=gP(e,sa`${JX}|\\k<(?<backref>[^>]+)>`,({0:p,groups:{captureName:m,unnamed:y,backref:b}})=>{if(b&&r&&!r.has(b))return p;const w=`_$${f}`;if(y||m){const S=s+i.length+1;return i.push(S),_De(o,S),y?p:`(?<${m}${w}>`}return sa`\k<${b}${w}>`},la.DEFAULT)}return c}function _De(e,t){for(let n=0;n<e.length;n++)e[n]>=t&&e[n]++}function O7(e,t,n,r,o,i){if(e.size&&r){let s=0;KX(t,JX,()=>s++,la.DEFAULT);const a=i-s+o,l=new Map;return e.forEach((c,u)=>{const f=(r-s*n)/n,p=s*n,m=u>a+s?u+r:u,y=[];for(const b of c)if(b<=a)y.push(b);else if(b>a+s+f)y.push(b+r);else if(b<=a+s)for(let w=0;w<=n;w++)y.push(b+s*w);else for(let w=0;w<=n;w++)y.push(b+p+f*w);l.set(m,y)}),l}return e}var no=String.fromCodePoint,vt=String.raw,Wc={flagGroups:(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})(),unicodeSets:(()=>{try{new RegExp("","v")}catch{return!1}return!0})()};Wc.bugFlagVLiteralHyphenIsRange=Wc.unicodeSets?(()=>{try{new RegExp(vt`[\d\-a]`,"v")}catch{return!0}return!1})():!1;Wc.bugNestedClassIgnoresNegation=Wc.unicodeSets&&new RegExp("[[^a]]","v").test("a");function sk(e,{enable:t,disable:n}){return{dotAll:!n?.dotAll&&!!(t?.dotAll||e.dotAll),ignoreCase:!n?.ignoreCase&&!!(t?.ignoreCase||e.ignoreCase)}}function sb(e,t,n){return e.has(t)||e.set(t,n),e.get(t)}function $R(e,t){return P7[e]>=P7[t]}function ADe(e,t){if(e==null)throw new Error(t??"Value expected");return e}var P7={ES2025:2025,ES2024:2024,ES2018:2018},MDe={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function XX(e={}){if({}.toString.call(e)!=="[object Object]")throw new Error("Unexpected options");if(e.target!==void 0&&!MDe[e.target])throw new Error(`Unexpected target "${e.target}"`);const t={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1,...e,rules:{allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1,...e.rules}};return t.target==="auto"&&(t.target=Wc.flagGroups?"ES2025":Wc.unicodeSets?"ES2024":"ES2018"),t}var NDe="[	-\r ]",RDe=new Set([no(304),no(305)]),Nc=vt`[\p{L}\p{M}\p{N}\p{Pc}]`;function QX(e){if(RDe.has(e))return[e];const t=new Set,n=e.toLowerCase(),r=n.toUpperCase(),o=PDe.get(n),i=IDe.get(n),s=ODe.get(n);return[...r].length===1&&t.add(r),s&&t.add(s),o&&t.add(o),t.add(n),i&&t.add(i),[...t]}var yP=new Map(`C Other
Cc Control cntrl
Cf Format
Cn Unassigned
Co Private_Use
Cs Surrogate
L Letter
LC Cased_Letter
Ll Lowercase_Letter
Lm Modifier_Letter
Lo Other_Letter
Lt Titlecase_Letter
Lu Uppercase_Letter
M Mark Combining_Mark
Mc Spacing_Mark
Me Enclosing_Mark
Mn Nonspacing_Mark
N Number
Nd Decimal_Number digit
Nl Letter_Number
No Other_Number
P Punctuation punct
Pc Connector_Punctuation
Pd Dash_Punctuation
Pe Close_Punctuation
Pf Final_Punctuation
Pi Initial_Punctuation
Po Other_Punctuation
Ps Open_Punctuation
S Symbol
Sc Currency_Symbol
Sk Modifier_Symbol
Sm Math_Symbol
So Other_Symbol
Z Separator
Zl Line_Separator
Zp Paragraph_Separator
Zs Space_Separator
ASCII
ASCII_Hex_Digit AHex
Alphabetic Alpha
Any
Assigned
Bidi_Control Bidi_C
Bidi_Mirrored Bidi_M
Case_Ignorable CI
Cased
Changes_When_Casefolded CWCF
Changes_When_Casemapped CWCM
Changes_When_Lowercased CWL
Changes_When_NFKC_Casefolded CWKCF
Changes_When_Titlecased CWT
Changes_When_Uppercased CWU
Dash
Default_Ignorable_Code_Point DI
Deprecated Dep
Diacritic Dia
Emoji
Emoji_Component EComp
Emoji_Modifier EMod
Emoji_Modifier_Base EBase
Emoji_Presentation EPres
Extended_Pictographic ExtPict
Extender Ext
Grapheme_Base Gr_Base
Grapheme_Extend Gr_Ext
Hex_Digit Hex
IDS_Binary_Operator IDSB
IDS_Trinary_Operator IDST
ID_Continue IDC
ID_Start IDS
Ideographic Ideo
Join_Control Join_C
Logical_Order_Exception LOE
Lowercase Lower
Math
Noncharacter_Code_Point NChar
Pattern_Syntax Pat_Syn
Pattern_White_Space Pat_WS
Quotation_Mark QMark
Radical
Regional_Indicator RI
Sentence_Terminal STerm
Soft_Dotted SD
Terminal_Punctuation Term
Unified_Ideograph UIdeo
Uppercase Upper
Variation_Selector VS
White_Space space
XID_Continue XIDC
XID_Start XIDS`.split(/\s/).map(e=>[pE(e),e])),IDe=new Map([["s",no(383)],[no(383),"s"]]),ODe=new Map([[no(223),no(7838)],[no(107),no(8490)],[no(229),no(8491)],[no(969),no(8486)]]),PDe=new Map([Hu(453),Hu(456),Hu(459),Hu(498),...NA(8072,8079),...NA(8088,8095),...NA(8104,8111),Hu(8124),Hu(8140),Hu(8188)]),DDe=new Map([["alnum",vt`[\p{Alpha}\p{Nd}]`],["alpha",vt`\p{Alpha}`],["ascii",vt`\p{ASCII}`],["blank",vt`[\p{Zs}\t]`],["cntrl",vt`\p{Cc}`],["digit",vt`\p{Nd}`],["graph",vt`[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]`],["lower",vt`\p{Lower}`],["print",vt`[[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",vt`[\p{P}\p{S}]`],["space",vt`\p{space}`],["upper",vt`\p{Upper}`],["word",vt`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",vt`\p{AHex}`]]);function $De(e,t){const n=[];for(let r=e;r<=t;r++)n.push(r);return n}function Hu(e){const t=no(e);return[t.toLowerCase(),t]}function NA(e,t){return $De(e,t).map(n=>Hu(n))}var eQ=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]);function jDe(e,t){const n={accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025",...t};tQ(e);const r={accuracy:n.accuracy,asciiWordBoundaries:n.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:$R(n.bestEffortTarget,"ES2024"),passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:e.flags.digitIsAscii,spaceIsAscii:e.flags.spaceIsAscii,wordIsAscii:e.flags.wordIsAscii};c0(e,LDe,r);const o={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},i={currentFlags:o,prevFlags:null,globalFlags:o,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:r.subroutineRefMap};c0(e,zDe,i);const s={groupsByName:i.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:i.reffedNodesByReferencer};return c0(e,BDe,s),e._originMap=i.groupOriginByCopy,e._strategy=r.strategy,e}var LDe={AbsenceFunction({node:e,parent:t,replaceWith:n}){const{body:r,kind:o}=e;if(o==="repeater"){const i=Fa();i.body[0].body.push(Cf({negate:!0,body:r}),jp("Any"));const s=Fa();s.body[0].body.push(qX("greedy",0,1/0,i)),n(Rr(s,t),{traverse:!0})}else throw new Error('Unsupported absence function "(?~|"')},Alternative:{enter({node:e,parent:t,key:n},{flagDirectivesByAlt:r}){const o=e.body.filter(i=>i.kind==="flags");for(let i=n+1;i<t.body.length;i++){const s=t.body[i];sb(r,s,[]).push(...o)}},exit({node:e},{flagDirectivesByAlt:t}){if(t.get(e)?.length){const n=rQ(t.get(e));if(n){const r=Fa({flags:n});r.body[0].body=e.body,e.body=[Rr(r,e)]}}}},Assertion({node:e,parent:t,key:n,container:r,root:o,remove:i,replaceWith:s},a){const{kind:l,negate:c}=e,{asciiWordBoundaries:u,avoidSubclass:f,supportedGNodes:p,wordIsAscii:m}=a;if(l==="text_segment_boundary")throw new Error(`Unsupported text segment boundary "\\${c?"Y":"y"}"`);if(l==="line_end")s(Rr(Cf({body:[hh({body:[IR("string_end")]}),hh({body:[hE(10)]})]}),t));else if(l==="line_start")s(Rr(Rc(vt`(?<=\A|\n(?!\z))`,{skipLookbehindValidation:!0}),t));else if(l==="search_start")if(p.has(e))o.flags.sticky=!0,i();else{const y=r[n-1];if(y&&qDe(y))s(Rr(Cf({negate:!0}),t));else{if(f)throw new Error(vt`Uses "\G" in a way that requires a subclass`);s(Uu(IR("string_start"),t)),a.strategy="clip_search"}}else if(!(l==="string_end"||l==="string_start"))if(l==="string_end_newline")s(Rr(Rc(vt`(?=\n?\z)`),t));else if(l==="word_boundary"){if(!m&&!u){const y=`(?:(?<=${Nc})(?!${Nc})|(?<!${Nc})(?=${Nc}))`,b=`(?:(?<=${Nc})(?=${Nc})|(?<!${Nc})(?!${Nc}))`;s(Rr(Rc(c?b:y),t))}}else throw new Error(`Unexpected assertion kind "${l}"`)},Backreference({node:e},{jsGroupNameMap:t}){let{ref:n}=e;typeof n=="string"&&!IA(n)&&(n=RA(n,t),e.ref=n)},CapturingGroup({node:e},{jsGroupNameMap:t,subroutineRefMap:n}){let{name:r}=e;r&&!IA(r)&&(r=RA(r,t),e.name=r),n.set(e.number,e),r&&n.set(r,e)},CharacterClassRange({node:e,parent:t,replaceWith:n}){if(t.kind==="intersection"){const r=ww({body:[e]});n(Rr(r,t),{traverse:!0})}},CharacterSet({node:e,parent:t,replaceWith:n},{accuracy:r,minTargetEs2024:o,digitIsAscii:i,spaceIsAscii:s,wordIsAscii:a}){const{kind:l,negate:c,value:u}=e;if(i&&(l==="digit"||u==="digit")){n(Uu(PR("digit",{negate:c}),t));return}if(s&&(l==="space"||u==="space")){n(Rr(OA(Rc(NDe),c),t));return}if(a&&(l==="word"||u==="word")){n(Uu(PR("word",{negate:c}),t));return}if(l==="any")n(Uu(jp("Any"),t));else if(l==="digit")n(Uu(jp("Nd",{negate:c}),t));else if(l!=="dot")if(l==="text_segment"){if(r==="strict")throw new Error(vt`Use of "\X" requires non-strict accuracy`);const f="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",p=vt`\p{RI}{2}|${f}(?:\u200D${f})*`;n(Rr(Rc(vt`(?>\r\n|${o?vt`\p{RGI_Emoji}`:p}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}),t))}else if(l==="hex")n(Uu(jp("AHex",{negate:c}),t));else if(l==="newline")n(Rr(Rc(c?`[^
]`:`(?>\r
?|[
\v\f\u2028\u2029])`),t));else if(l==="posix")if(!o&&(u==="graph"||u==="print")){if(r==="strict")throw new Error(`POSIX class "${u}" requires min target ES2024 or non-strict accuracy`);let f={graph:"!-~",print:" -~"}[u];c&&(f=`\0-${no(f.codePointAt(0)-1)}${no(f.codePointAt(2)+1)}-`),n(Rr(Rc(`[${f}]`),t))}else n(Rr(OA(Rc(DDe.get(u)),c),t));else if(l==="property")yP.has(pE(u))||(e.key="sc");else if(l==="space")n(Uu(jp("space",{negate:c}),t));else if(l==="word")n(Rr(OA(Rc(Nc),c),t));else throw new Error(`Unexpected character set kind "${l}"`)},Directive({node:e,parent:t,root:n,remove:r,replaceWith:o,removeAllPrevSiblings:i,removeAllNextSiblings:s}){const{kind:a,flags:l}=e;if(a==="flags")if(!l.enable&&!l.disable)r();else{const c=Fa({flags:l});c.body[0].body=s(),o(Rr(c,t),{traverse:!0})}else if(a==="keep"){const c=n.body[0],f=n.body.length===1&&HX(c,{type:"Group"})&&c.body[0].body.length===1?c.body[0]:n;if(t.parent!==f||f.body.length>1)throw new Error(vt`Uses "\K" in a way that's unsupported`);const p=Cf({behind:!0});p.body[0].body=i(),o(Rr(p,t))}else throw new Error(`Unexpected directive kind "${a}"`)},Flags({node:e,parent:t}){if(e.posixIsAscii)throw new Error('Unsupported flag "P"');if(e.textSegmentMode==="word")throw new Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach(n=>delete e[n]),Object.assign(e,{global:!1,hasIndices:!1,multiline:!1,sticky:e.sticky??!1}),t.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:e}){if(!e.flags)return;const{enable:t,disable:n}=e.flags;t?.extended&&delete t.extended,n?.extended&&delete n.extended,t?.dotAll&&n?.dotAll&&delete t.dotAll,t?.ignoreCase&&n?.ignoreCase&&delete t.ignoreCase,t&&!Object.keys(t).length&&delete e.flags.enable,n&&!Object.keys(n).length&&delete e.flags.disable,!e.flags.enable&&!e.flags.disable&&delete e.flags},LookaroundAssertion({node:e},t){const{kind:n}=e;n==="lookbehind"&&(t.passedLookbehind=!0)},NamedCallout({node:e,parent:t,replaceWith:n}){const{kind:r}=e;if(r==="fail")n(Rr(Cf({negate:!0}),t));else throw new Error(`Unsupported named callout "(*${r.toUpperCase()}"`)},Quantifier({node:e}){if(e.body.type==="Quantifier"){const t=Fa();t.body[0].body.push(e.body),e.body=Rr(t,e)}},Regex:{enter({node:e},{supportedGNodes:t}){const n=[];let r=!1,o=!1;for(const i of e.body)if(i.body.length===1&&i.body[0].kind==="search_start")i.body.pop();else{const s=iQ(i.body);s?(r=!0,Array.isArray(s)?n.push(...s):n.push(s)):o=!0}r&&!o&&n.forEach(i=>t.add(i))},exit(e,{accuracy:t,passedLookbehind:n,strategy:r}){if(t==="strict"&&n&&r)throw new Error(vt`Uses "\G" in a way that requires non-strict accuracy`)}},Subroutine({node:e},{jsGroupNameMap:t}){let{ref:n}=e;typeof n=="string"&&!IA(n)&&(n=RA(n,t),e.ref=n)}},zDe={Backreference({node:e},{multiplexCapturesToLeftByRef:t,reffedNodesByReferencer:n}){const{orphan:r,ref:o}=e;r||n.set(e,[...t.get(o).map(({node:i})=>i)])},CapturingGroup:{enter({node:e,parent:t,replaceWith:n,skip:r},{groupOriginByCopy:o,groupsByName:i,multiplexCapturesToLeftByRef:s,openRefs:a,reffedNodesByReferencer:l}){const c=o.get(e);if(c&&a.has(e.number)){const f=Uu(D7(e.number),t);l.set(f,a.get(e.number)),n(f);return}a.set(e.number,e),s.set(e.number,[]),e.name&&sb(s,e.name,[]);const u=s.get(e.name??e.number);for(let f=0;f<u.length;f++){const p=u[f];if(c===p.node||c&&c===p.origin||e===p.origin){u.splice(f,1);break}}if(s.get(e.number).push({node:e,origin:c}),e.name&&s.get(e.name).push({node:e,origin:c}),e.name){const f=sb(i,e.name,new Map);let p=!1;if(c)p=!0;else for(const m of f.values())if(!m.hasDuplicateNameToRemove){p=!0;break}i.get(e.name).set(e,{node:e,hasDuplicateNameToRemove:p})}},exit({node:e},{openRefs:t}){t.delete(e.number)}},Group:{enter({node:e},t){t.prevFlags=t.currentFlags,e.flags&&(t.currentFlags=sk(t.currentFlags,e.flags))},exit(e,t){t.currentFlags=t.prevFlags}},Subroutine({node:e,parent:t,replaceWith:n},r){const{isRecursive:o,ref:i}=e;if(o){let u=t;for(;(u=u.parent)&&!(u.type==="CapturingGroup"&&(u.name===i||u.number===i)););r.reffedNodesByReferencer.set(e,u);return}const s=r.subroutineRefMap.get(i),a=i===0,l=a?D7(0):nQ(s,r.groupOriginByCopy,null);let c=l;if(!a){const u=rQ(HDe(s,p=>p.type==="Group"&&!!p.flags)),f=u?sk(r.globalFlags,u):r.globalFlags;FDe(f,r.currentFlags)||(c=Fa({flags:UDe(f)}),c.body[0].body.push(l))}n(Rr(c,t),{traverse:!a})}},BDe={Backreference({node:e,parent:t,replaceWith:n},r){if(e.orphan){r.highestOrphanBackref=Math.max(r.highestOrphanBackref,e.ref);return}const i=r.reffedNodesByReferencer.get(e).filter(s=>VDe(s,e));if(!i.length)n(Rr(Cf({negate:!0}),t));else if(i.length>1){const s=Fa({atomic:!0,body:i.reverse().map(a=>hh({body:[OR(a.number)]}))});n(Rr(s,t))}else e.ref=i[0].number},CapturingGroup({node:e},t){e.number=++t.numCapturesToLeft,e.name&&t.groupsByName.get(e.name).get(e).hasDuplicateNameToRemove&&delete e.name},Regex:{exit({node:e},t){const n=Math.max(t.highestOrphanBackref-t.numCapturesToLeft,0);for(let r=0;r<n;r++){const o=GX();e.body.at(-1).body.push(o)}}},Subroutine({node:e},t){!e.isRecursive||e.ref===0||(e.ref=t.reffedNodesByReferencer.get(e).number)}};function tQ(e){c0(e,{"*"({node:t,parent:n}){t.parent=n}})}function FDe(e,t){return e.dotAll===t.dotAll&&e.ignoreCase===t.ignoreCase}function VDe(e,t){let n=t;do{if(n.type==="Regex")return!1;if(n.type==="Alternative")continue;if(n===e)return!1;const r=oQ(n.parent);for(const o of r){if(o===n)break;if(o===e||sQ(o,e))return!0}}while(n=n.parent);throw new Error("Unexpected path")}function nQ(e,t,n,r){const o=Array.isArray(e)?[]:{};for(const[i,s]of Object.entries(e))i==="parent"?o.parent=Array.isArray(n)?r:n:s&&typeof s=="object"?o[i]=nQ(s,t,o,n):(i==="type"&&s==="CapturingGroup"&&t.set(o,t.get(e)??e),o[i]=s);return o}function D7(e){const t=ZX(e);return t.isRecursive=!0,t}function HDe(e,t){const n=[];for(;e=e.parent;)(!t||t(e))&&n.push(e);return n}function RA(e,t){if(t.has(e))return t.get(e);const n=`$${t.size}_${e.replace(/^[^$_\p{IDS}]|[^$\u200C\u200D\p{IDC}]/ug,"_")}`;return t.set(e,n),n}function rQ(e){const t=["dotAll","ignoreCase"],n={enable:{},disable:{}};return e.forEach(({flags:r})=>{t.forEach(o=>{r.enable?.[o]&&(delete n.disable[o],n.enable[o]=!0),r.disable?.[o]&&(n.disable[o]=!0)})}),Object.keys(n.enable).length||delete n.enable,Object.keys(n.disable).length||delete n.disable,n.enable||n.disable?n:null}function UDe({dotAll:e,ignoreCase:t}){const n={};return(e||t)&&(n.enable={},e&&(n.enable.dotAll=!0),t&&(n.enable.ignoreCase=!0)),(!e||!t)&&(n.disable={},!e&&(n.disable.dotAll=!0),!t&&(n.disable.ignoreCase=!0)),n}function oQ(e){if(!e)throw new Error("Node expected");const{body:t}=e;return Array.isArray(t)?t:t?[t]:null}function iQ(e){const t=e.find(n=>n.kind==="search_start"||ZDe(n,{negate:!1})||!GDe(n));if(!t)return null;if(t.kind==="search_start")return t;if(t.type==="LookaroundAssertion")return t.body[0].body[0];if(t.type==="CapturingGroup"||t.type==="Group"){const n=[];for(const r of t.body){const o=iQ(r.body);if(!o)return null;Array.isArray(o)?n.push(...o):n.push(o)}return n}return null}function sQ(e,t){const n=oQ(e)??[];for(const r of n)if(r===t||sQ(r,t))return!0;return!1}function GDe({type:e}){return e==="Assertion"||e==="Directive"||e==="LookaroundAssertion"}function qDe(e){const t=["Character","CharacterClass","CharacterSet"];return t.includes(e.type)||e.type==="Quantifier"&&e.min&&t.includes(e.body.type)}function ZDe(e,t){const n={negate:null,...t};return e.type==="LookaroundAssertion"&&(n.negate===null||e.negate===n.negate)&&e.body.length===1&&HX(e.body[0],{type:"Assertion",kind:"search_start"})}function IA(e){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(e)}function Rc(e,t){const r=UX(e,{...t,unicodePropertyMap:yP}).body;return r.length>1||r[0].body.length>1?Fa({body:r}):r[0].body[0]}function OA(e,t){return e.negate=t,e}function Uu(e,t){return e.parent=t,e}function Rr(e,t){return tQ(e),e.parent=t,e}function WDe(e,t){const n=XX(t),r=$R(n.target,"ES2024"),o=$R(n.target,"ES2025"),i=n.rules.recursionLimit;if(!Number.isInteger(i)||i<2||i>20)throw new Error("Invalid recursionLimit; use 2-20");let s=null,a=null;if(!o){const m=[e.flags.ignoreCase];c0(e,KDe,{getCurrentModI:()=>m.at(-1),popModI(){m.pop()},pushModI(y){m.push(y)},setHasCasedChar(){m.at(-1)?s=!0:a=!0}})}const l={dotAll:e.flags.dotAll,ignoreCase:!!((e.flags.ignoreCase||s)&&!a)};let c=e;const u={accuracy:n.accuracy,appliedGlobalFlags:l,captureMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},inCharClass:!1,lastNode:c,originMap:e._originMap,recursionLimit:i,useAppliedIgnoreCase:!!(!o&&s&&a),useFlagMods:o,useFlagV:r,verbose:n.verbose};function f(m){return u.lastNode=c,c=m,ADe(YDe[m.type],`Unexpected node type "${m.type}"`)(m,u,f)}const p={pattern:e.body.map(f).join("|"),flags:f(e.flags),options:{...e.options}};return r||(delete p.options.force.v,p.options.disable.v=!0,p.options.unicodeSetsPlugin=null),p._captureTransfers=new Map,p._hiddenCaptures=[],u.captureMap.forEach((m,y)=>{m.hidden&&p._hiddenCaptures.push(y),m.transferTo&&sb(p._captureTransfers,m.transferTo,[]).push(y)}),p}var KDe={"*":{enter({node:e},t){if(j7(e)){const n=t.getCurrentModI();t.pushModI(e.flags?sk({ignoreCase:n},e.flags).ignoreCase:n)}},exit({node:e},t){j7(e)&&t.popModI()}},Backreference(e,t){t.setHasCasedChar()},Character({node:e},t){bP(no(e.value))&&t.setHasCasedChar()},CharacterClassRange({node:e,skip:t},n){t(),aQ(e,{firstOnly:!0}).length&&n.setHasCasedChar()},CharacterSet({node:e},t){e.kind==="property"&&eQ.has(e.value)&&t.setHasCasedChar()}},YDe={Alternative({body:e},t,n){return e.map(n).join("")},Assertion({kind:e,negate:t}){if(e==="string_end")return"$";if(e==="string_start")return"^";if(e==="word_boundary")return t?vt`\B`:vt`\b`;throw new Error(`Unexpected assertion kind "${e}"`)},Backreference({ref:e},t){if(typeof e!="number")throw new Error("Unexpected named backref in transformed AST");if(!t.useFlagMods&&t.accuracy==="strict"&&t.currentFlags.ignoreCase&&!t.captureMap.get(e).ignoreCase)throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+e},CapturingGroup(e,t,n){const{body:r,name:o,number:i}=e,s={ignoreCase:t.currentFlags.ignoreCase},a=t.originMap.get(e);return a&&(s.hidden=!0,i>a.number&&(s.transferTo=a.number)),t.captureMap.set(i,s),`(${o?`?<${o}>`:""}${r.map(n).join("|")})`},Character({value:e},t){const n=no(e),r=Sp(e,{escDigit:t.lastNode.type==="Backreference",inCharClass:t.inCharClass,useFlagV:t.useFlagV});if(r!==n)return r;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&bP(n)){const o=QX(n);return t.inCharClass?o.join(""):o.length>1?`[${o.join("")}]`:o[0]}return n},CharacterClass(e,t,n){const{kind:r,negate:o,parent:i}=e;let{body:s}=e;if(r==="intersection"&&!t.useFlagV)throw new Error("Use of class intersection requires min target ES2024");Wc.bugFlagVLiteralHyphenIsRange&&t.useFlagV&&s.some(L7)&&(s=[hE(45),...s.filter(c=>!L7(c))]);const a=()=>`[${o?"^":""}${s.map(n).join(r==="intersection"?"&&":"")}]`;if(!t.inCharClass){if((!t.useFlagV||Wc.bugNestedClassIgnoresNegation)&&!o){const u=s.filter(f=>f.type==="CharacterClass"&&f.kind==="union"&&f.negate);if(u.length){const f=Fa(),p=f.body[0];return f.parent=i,p.parent=f,s=s.filter(m=>!u.includes(m)),e.body=s,s.length?(e.parent=p,p.body.push(e)):f.body.pop(),u.forEach(m=>{const y=hh({body:[m]});m.parent=y,y.parent=f,f.body.push(y)}),n(f)}}t.inCharClass=!0;const c=a();return t.inCharClass=!1,c}const l=s[0];if(r==="union"&&!o&&l&&((!t.useFlagV||!t.verbose)&&i.kind==="union"&&!(Wc.bugFlagVLiteralHyphenIsRange&&t.useFlagV)||!t.verbose&&i.kind==="intersection"&&s.length===1&&l.type!=="CharacterClassRange"))return s.map(n).join("");if(!t.useFlagV&&i.type==="CharacterClass")throw new Error("Use of nested character class requires min target ES2024");return a()},CharacterClassRange(e,t){const n=e.min.value,r=e.max.value,o={escDigit:!1,inCharClass:!0,useFlagV:t.useFlagV},i=Sp(n,o),s=Sp(r,o),a=new Set;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase){const l=aQ(e);t5e(l).forEach(u=>{a.add(Array.isArray(u)?`${Sp(u[0],o)}-${Sp(u[1],o)}`:Sp(u,o))})}return`${i}-${s}${[...a].join("")}`},CharacterSet({kind:e,negate:t,value:n,key:r},o){if(e==="dot")return o.currentFlags.dotAll?o.appliedGlobalFlags.dotAll||o.useFlagMods?".":"[^]":vt`[^\n]`;if(e==="digit")return t?vt`\D`:vt`\d`;if(e==="property"){if(o.useAppliedIgnoreCase&&o.currentFlags.ignoreCase&&eQ.has(n))throw new Error(`Unicode property "${n}" can't be case-insensitive when other chars have specific case`);return`${t?vt`\P`:vt`\p`}{${r?`${r}=`:""}${n}}`}if(e==="word")return t?vt`\W`:vt`\w`;throw new Error(`Unexpected character set kind "${e}"`)},Flags(e,t){return(t.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":"")},Group({atomic:e,body:t,flags:n,parent:r},o,i){const s=o.currentFlags;n&&(o.currentFlags=sk(s,n));const a=t.map(i).join("|"),l=!o.verbose&&t.length===1&&r.type!=="Quantifier"&&!e&&(!o.useFlagMods||!n)?a:`(?${n5e(e,n,o.useFlagMods)}${a})`;return o.currentFlags=s,l},LookaroundAssertion({body:e,kind:t,negate:n},r,o){return`(?${`${t==="lookahead"?"":"<"}${n?"!":"="}`}${e.map(o).join("|")})`},Quantifier(e,t,n){return n(e.body)+r5e(e)},Subroutine({isRecursive:e,ref:t},n){if(!e)throw new Error("Unexpected non-recursive subroutine in transformed AST");const r=n.recursionLimit;return t===0?`(?R=${r})`:vt`\g<${t}&R=${r}>`}},JDe=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),XDe=new Set(["-","\\","]","^","["]),QDe=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),$7=new Map([[9,vt`\t`],[10,vt`\n`],[11,vt`\v`],[12,vt`\f`],[13,vt`\r`],[8232,vt`\u2028`],[8233,vt`\u2029`],[65279,vt`\uFEFF`]]),e5e=new RegExp("^\\p{Cased}$","u");function bP(e){return e5e.test(e)}function aQ(e,t){const n=!!t?.firstOnly,r=e.min.value,o=e.max.value,i=[];if(r<65&&(o===65535||o>=131071)||r===65536&&o>=131071)return i;for(let s=r;s<=o;s++){const a=no(s);if(!bP(a))continue;const l=QX(a).filter(c=>{const u=c.codePointAt(0);return u<r||u>o});if(l.length&&(i.push(...l),n))break}return i}function Sp(e,{escDigit:t,inCharClass:n,useFlagV:r}){if($7.has(e))return $7.get(e);if(e<32||e>126&&e<160||e>262143||t&&o5e(e))return e>255?`\\u{${e.toString(16).toUpperCase()}}`:`\\x${e.toString(16).toUpperCase().padStart(2,"0")}`;const o=n?r?QDe:XDe:JDe,i=no(e);return(o.has(i)?"\\":"")+i}function t5e(e){const t=e.map(o=>o.codePointAt(0)).sort((o,i)=>o-i),n=[];let r=null;for(let o=0;o<t.length;o++)t[o+1]===t[o]+1?r??=t[o]:r===null?n.push(t[o]):(n.push([r,t[o]]),r=null);return n}function n5e(e,t,n){if(e)return">";let r="";if(t&&n){const{enable:o,disable:i}=t;r=(o?.ignoreCase?"i":"")+(o?.dotAll?"s":"")+(i?"-":"")+(i?.ignoreCase?"i":"")+(i?.dotAll?"s":"")}return`${r}:`}function r5e({kind:e,max:t,min:n}){let r;return!n&&t===1?r="?":!n&&t===1/0?r="*":n===1&&t===1/0?r="+":n===t?r=`{${n}}`:r=`{${n},${t===1/0?"":t}}`,r+{greedy:"",lazy:"?",possessive:"+"}[e]}function j7({type:e}){return e==="CapturingGroup"||e==="Group"||e==="LookaroundAssertion"}function o5e(e){return e>47&&e<58}function L7({type:e,value:t}){return e==="Character"&&t===45}var i5e=class jR extends RegExp{#t=new Map;#e=null;#r;#n=null;#o=null;rawOptions={};get source(){return this.#r||"(?:)"}constructor(t,n,r){const o=!!r?.lazyCompile;if(t instanceof RegExp){if(r)throw new Error("Cannot provide options when copying a regexp");const i=t;super(i,n),this.#r=i.source,i instanceof jR&&(this.#t=i.#t,this.#n=i.#n,this.#o=i.#o,this.rawOptions=i.rawOptions)}else{const i={hiddenCaptures:[],strategy:null,transfers:[],...r};super(o?"":t,n),this.#r=t,this.#t=a5e(i.hiddenCaptures,i.transfers),this.#o=i.strategy,this.rawOptions=r??{}}o||(this.#e=this)}exec(t){if(!this.#e){const{lazyCompile:o,...i}=this.rawOptions;this.#e=new jR(this.#r,this.flags,i)}const n=this.global||this.sticky,r=this.lastIndex;if(this.#o==="clip_search"&&n&&r){this.lastIndex=0;const o=this.#i(t.slice(r));return o&&(s5e(o,r,t,this.hasIndices),this.lastIndex+=r),o}return this.#i(t)}#i(t){this.#e.lastIndex=this.lastIndex;const n=super.exec.call(this.#e,t);if(this.lastIndex=this.#e.lastIndex,!n||!this.#t.size)return n;const r=[...n];n.length=1;let o;this.hasIndices&&(o=[...n.indices],n.indices.length=1);const i=[0];for(let s=1;s<r.length;s++){const{hidden:a,transferTo:l}=this.#t.get(s)??{};if(a?i.push(null):(i.push(n.length),n.push(r[s]),this.hasIndices&&n.indices.push(o[s])),l&&r[s]!==void 0){const c=i[l];if(!c)throw new Error(`Invalid capture transfer to "${c}"`);if(n[c]=r[s],this.hasIndices&&(n.indices[c]=o[s]),n.groups){this.#n||(this.#n=l5e(this.source));const u=this.#n.get(l);u&&(n.groups[u]=r[s],this.hasIndices&&(n.indices.groups[u]=o[s]))}}}return n}};function s5e(e,t,n,r){if(e.index+=t,e.input=n,r){const o=e.indices;for(let s=0;s<o.length;s++){const a=o[s];a&&(o[s]=[a[0]+t,a[1]+t])}const i=o.groups;i&&Object.keys(i).forEach(s=>{const a=i[s];a&&(i[s]=[a[0]+t,a[1]+t])})}}function a5e(e,t){const n=new Map;for(const r of e)n.set(r,{hidden:!0});for(const[r,o]of t)for(const i of o)sb(n,i,{}).transferTo=r;return n}function l5e(e){const t=/(?<capture>\((?:\?<(?![=!])(?<name>[^>]+)>|(?!\?)))|\\?./gsu,n=new Map;let r=0,o=0,i;for(;i=t.exec(e);){const{0:s,groups:{capture:a,name:l}}=i;s==="["?r++:r?s==="]"&&r--:a&&(o++,l&&n.set(o,l))}return n}function c5e(e,t){const n=u5e(e,t);return n.options?new i5e(n.pattern,n.flags,n.options):new RegExp(n.pattern,n.flags)}function u5e(e,t){const n=XX(t),r=UX(e,{flags:n.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline},skipBackrefValidation:n.rules.allowOrphanBackrefs,unicodePropertyMap:yP}),o=jDe(r,{accuracy:n.accuracy,asciiWordBoundaries:n.rules.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,bestEffortTarget:n.target}),i=WDe(o,n),s=TDe(i.pattern,{captureTransfers:i._captureTransfers,hiddenCaptures:i._hiddenCaptures,mode:"external"}),a=CDe(s.pattern),l=kDe(a.pattern,{captureTransfers:s.captureTransfers,hiddenCaptures:s.hiddenCaptures}),c={pattern:l.pattern,flags:`${n.hasIndices?"d":""}${n.global?"g":""}${i.flags}${i.options.disable.v?"u":"v"}`};if(n.avoidSubclass){if(n.lazyCompileLength!==1/0)throw new Error("Lazy compilation requires subclass")}else{const u=l.hiddenCaptures.sort((y,b)=>y-b),f=Array.from(l.captureTransfers),p=o._strategy,m=c.pattern.length>=n.lazyCompileLength;(u.length||f.length||p||m)&&(c.options={...u.length&&{hiddenCaptures:u},...f.length&&{transfers:f},...p&&{strategy:p},...m&&{lazyCompile:m}})}return c}const z7=4294967295;class d5e{constructor(t,n={}){this.patterns=t,this.options=n;const{forgiving:r=!1,cache:o,regexConstructor:i}=n;if(!i)throw new Error("Option `regexConstructor` is not provided");this.regexps=t.map(s=>{if(typeof s!="string")return s;const a=o?.get(s);if(a){if(a instanceof RegExp)return a;if(r)return null;throw a}try{const l=i(s);return o?.set(s,l),l}catch(l){if(o?.set(s,l),r)return null;throw l}})}regexps;findNextMatchSync(t,n,r){const o=typeof t=="string"?t:t.content,i=[];function s(a,l,c=0){return{index:a,captureIndices:l.indices.map(u=>u==null?{start:z7,end:z7,length:0}:{start:u[0]+c,end:u[1]+c,length:u[1]-u[0]})}}for(let a=0;a<this.regexps.length;a++){const l=this.regexps[a];if(l)try{l.lastIndex=n;const c=l.exec(o);if(!c)continue;if(c.index===n)return s(a,c,0);i.push([a,c,0])}catch(c){if(this.options.forgiving)continue;throw c}}if(i.length){const a=Math.min(...i.map(l=>l[1].index));for(const[l,c,u]of i)if(c.index===a)return s(l,c,u)}return null}}function f5e(e,t){return c5e(e,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...t})}function h5e(e={}){const t=Object.assign({target:"auto",cache:new Map},e);return t.regexConstructor||=n=>f5e(n,{target:t.target}),{createScanner(n){return new d5e(n,t)},createString(n){return{content:n}}}}const p5e={c:()=>Ne(()=>import("./c-DV1nog2v.js"),[]),cpp:()=>Ne(()=>import("./cpp-BozaW9Cj.js"),__vite__mapDeps([6,7,8,9,10])),"c++":()=>Ne(()=>import("./cpp-BozaW9Cj.js"),__vite__mapDeps([6,7,8,9,10])),css:()=>Ne(()=>import("./css--YvLAxwc.js"),[]),glsl:()=>Ne(()=>import("./glsl-C2Ge4J-w.js"),__vite__mapDeps([8,9])),graphql:()=>Ne(()=>import("./graphql-DS66ObS9.js"),__vite__mapDeps([11,12,13,14,15])),gql:()=>Ne(()=>import("./graphql-DS66ObS9.js"),__vite__mapDeps([11,12,13,14,15])),haml:()=>Ne(()=>import("./haml-CYFD70FR.js"),__vite__mapDeps([16,12,17])),html:()=>Ne(()=>import("./html-PAUDa6-L.js"),__vite__mapDeps([18,12,17])),java:()=>Ne(()=>import("./java-DHtigSrd.js"),[]),javascript:()=>Ne(()=>import("./javascript-CfR557FP.js"),[]),js:()=>Ne(()=>import("./javascript-CfR557FP.js"),[]),json:()=>Ne(()=>import("./json-CAhrKACI.js"),[]),jsonc:()=>Ne(()=>import("./jsonc-hsrVBXzx.js"),[]),jsonl:()=>Ne(()=>import("./jsonl-BjDRLQe5.js"),[]),jsx:()=>Ne(()=>import("./jsx-CgO7R6mw.js"),[]),julia:()=>Ne(()=>import("./julia-OQ0LJAOH.js"),__vite__mapDeps([19,6,7,8,9,10,20,12,21])),jl:()=>Ne(()=>import("./julia-OQ0LJAOH.js"),__vite__mapDeps([19,6,7,8,9,10,20,12,21])),less:()=>Ne(()=>import("./less-KEBgJkl4.js"),[]),markdown:()=>Ne(()=>import("./markdown-C8Ba2Be9.js"),[]),md:()=>Ne(()=>import("./markdown-C8Ba2Be9.js"),[]),mdx:()=>Ne(()=>import("./mdx-BaKCMO6a.js"),[]),php:()=>Ne(()=>import("./php-l4A4Uz7C.js"),__vite__mapDeps([22,18,12,17,23,24,10,25])),postcss:()=>Ne(()=>import("./postcss-B6Y8ymK-.js"),[]),pug:()=>Ne(()=>import("./pug-Co6nYc4R.js"),__vite__mapDeps([26,12,17,18])),jade:()=>Ne(()=>import("./pug-Co6nYc4R.js"),__vite__mapDeps([26,12,17,18])),python:()=>Ne(()=>import("./python-n6TwxhBN.js"),[]),py:()=>Ne(()=>import("./python-n6TwxhBN.js"),[]),r:()=>Ne(()=>import("./r-CNly2XdH.js"),[]),regexp:()=>Ne(()=>import("./regexp-YoNQ8D_6.js"),[]),regex:()=>Ne(()=>import("./regexp-YoNQ8D_6.js"),[]),sass:()=>Ne(()=>import("./sass-pz5lImlE.js"),[]),scss:()=>Ne(()=>import("./scss-WW3fv8JG.js"),__vite__mapDeps([27,17])),shellscript:()=>Ne(()=>import("./shellscript-ByttNyBa.js"),[]),bash:()=>Ne(()=>import("./shellscript-ByttNyBa.js"),[]),sh:()=>Ne(()=>import("./shellscript-ByttNyBa.js"),[]),shell:()=>Ne(()=>import("./shellscript-ByttNyBa.js"),[]),zsh:()=>Ne(()=>import("./shellscript-ByttNyBa.js"),[]),sql:()=>Ne(()=>import("./sql-_w3nyLGT.js"),[]),svelte:()=>Ne(()=>import("./svelte-C-8Z18kp.js"),__vite__mapDeps([28,12,13,17,29])),typescript:()=>Ne(()=>import("./typescript-DjQnnWhn.js"),[]),ts:()=>Ne(()=>import("./typescript-DjQnnWhn.js"),[]),vue:()=>Ne(()=>import("./vue-CmUyGiKH.js"),__vite__mapDeps([30,17,12,13,25,18])),"vue-html":()=>Ne(()=>import("./vue-html-CxMnKWH6.js"),__vite__mapDeps([31,30,17,12,13,25,18])),wasm:()=>Ne(()=>import("./wasm-BzdluPJ6.js"),[]),wgsl:()=>Ne(()=>import("./wgsl-BphOKwv5.js"),[]),xml:()=>Ne(()=>import("./xml-B6llhzsJ.js"),__vite__mapDeps([23,24])),yaml:()=>Ne(()=>import("./yaml-C2EE9Uek.js"),[]),yml:()=>Ne(()=>import("./yaml-C2EE9Uek.js"),[]),tsx:()=>Ne(()=>import("./tsx-BTiF23f_.js"),[]),typescriptreact:()=>Ne(()=>import("./tsx-BTiF23f_.js"),[]),haskell:()=>Ne(()=>import("./haskell-BImHAN_G.js"),[]),hs:()=>Ne(()=>import("./haskell-BImHAN_G.js"),[]),"c#":()=>Ne(()=>import("./csharp-TvQMYSLK.js"),[]),csharp:()=>Ne(()=>import("./csharp-TvQMYSLK.js"),[]),cs:()=>Ne(()=>import("./csharp-TvQMYSLK.js"),[]),latex:()=>Ne(()=>import("./latex-BdIqOxd_.js"),__vite__mapDeps([32,21])),lua:()=>Ne(()=>import("./lua-DmCzxb9n.js"),__vite__mapDeps([33,9])),mermaid:()=>Ne(()=>import("./mermaid-lXSfw-fV.js"),[]),mmd:()=>Ne(()=>import("./mermaid-lXSfw-fV.js"),[]),ruby:()=>Ne(()=>import("./ruby-DAbYPlly.js"),__vite__mapDeps([34,18,12,17,16,23,24,10,11,13,14,15,6,7,8,9,35,33,36])),rb:()=>Ne(()=>import("./ruby-DAbYPlly.js"),__vite__mapDeps([34,18,12,17,16,23,24,10,11,13,14,15,6,7,8,9,35,33,36])),rust:()=>Ne(()=>import("./rust-DYFNg61u.js"),[]),rs:()=>Ne(()=>import("./rust-DYFNg61u.js"),[]),scala:()=>Ne(()=>import("./scala-CdXMkZWt.js"),[]),swift:()=>Ne(()=>import("./swift-ByDN_Krv.js"),[]),kotlin:()=>Ne(()=>import("./kotlin-CBzcJtru.js"),[]),kt:()=>Ne(()=>import("./kotlin-CBzcJtru.js"),[]),kts:()=>Ne(()=>import("./kotlin-CBzcJtru.js"),[]),"objective-c":()=>Ne(()=>import("./objective-c-DGHENSS9.js"),[]),objc:()=>Ne(()=>import("./objective-c-DGHENSS9.js"),[])},m5e={"github-dark":()=>Ne(()=>import("./github-dark-DHJKELXO.js"),[]),"github-light":()=>Ne(()=>import("./github-light-DAi9KRSo.js"),[])},g5e=_Pe({langs:p5e,themes:m5e,engine:()=>h5e()}),y5e={defaultLanguage:"javascript",supportedLanguages:{text:{name:"Plain Text",aliases:["text","txt","plain"]},c:{name:"C",aliases:["c"]},cpp:{name:"C++",aliases:["cpp","c++"]},css:{name:"CSS",aliases:["css"]},glsl:{name:"GLSL",aliases:["glsl"]},graphql:{name:"GraphQL",aliases:["graphql","gql"]},haml:{name:"Ruby Haml",aliases:["haml"]},html:{name:"HTML",aliases:["html"]},java:{name:"Java",aliases:["java"]},javascript:{name:"JavaScript",aliases:["javascript","js"]},json:{name:"JSON",aliases:["json"]},jsonc:{name:"JSON with Comments",aliases:["jsonc"]},jsonl:{name:"JSON Lines",aliases:["jsonl"]},jsx:{name:"JSX",aliases:["jsx"]},julia:{name:"Julia",aliases:["julia","jl"]},less:{name:"Less",aliases:["less"]},markdown:{name:"Markdown",aliases:["markdown","md"]},mdx:{name:"MDX",aliases:["mdx"]},php:{name:"PHP",aliases:["php"]},postcss:{name:"PostCSS",aliases:["postcss"]},pug:{name:"Pug",aliases:["pug","jade"]},python:{name:"Python",aliases:["python","py"]},r:{name:"R",aliases:["r"]},regexp:{name:"RegExp",aliases:["regexp","regex"]},sass:{name:"Sass",aliases:["sass"]},scss:{name:"SCSS",aliases:["scss"]},shellscript:{name:"Shell",aliases:["shellscript","bash","sh","shell","zsh"]},sql:{name:"SQL",aliases:["sql"]},svelte:{name:"Svelte",aliases:["svelte"]},typescript:{name:"TypeScript",aliases:["typescript","ts"]},vue:{name:"Vue",aliases:["vue"]},"vue-html":{name:"Vue HTML",aliases:["vue-html"]},wasm:{name:"WebAssembly",aliases:["wasm"]},wgsl:{name:"WGSL",aliases:["wgsl"]},xml:{name:"XML",aliases:["xml"]},yaml:{name:"YAML",aliases:["yaml","yml"]},tsx:{name:"TSX",aliases:["tsx","typescriptreact"]},haskell:{name:"Haskell",aliases:["haskell","hs"]},csharp:{name:"C#",aliases:["c#","csharp","cs"]},latex:{name:"LaTeX",aliases:["latex"]},lua:{name:"Lua",aliases:["lua"]},mermaid:{name:"Mermaid",aliases:["mermaid","mmd"]},ruby:{name:"Ruby",aliases:["ruby","rb"]},rust:{name:"Rust",aliases:["rust","rs"]},scala:{name:"Scala",aliases:["scala"]},swift:{name:"Swift",aliases:["swift"]},kotlin:{name:"Kotlin",aliases:["kotlin","kt","kts"]},"objective-c":{name:"Objective C",aliases:["objective-c","objc"]}},createHighlighter:()=>g5e({themes:["github-dark","github-light"],langs:[]})};function b5e(e,t){const n=(e.nodeAfter??e.nodeBefore)?.marks.find(o=>o.type===t);if(!n)return e.pos;let r=e.pos+(e.nodeAfter?.nodeSize??0);for(;;){const o=e.doc.resolve(r);if(o.depth<1||o.nodeAfter&&!t.isInSet(o.marks()))return o.pos;let i=o.after(),s=e.doc.resolve(i),a=s.nodeAfter;for(;s.depth>0&&!a;)i=o.after(s.depth),s=e.doc.resolve(i),a=s.nodeAfter;let l=i+1,c=a?.firstChild;for(;c&&!c.isLeaf&&!t.isInSet(c.marks);)c=c.firstChild,l++;const u=c?.marks.find(p=>p.type===t);if(!c||!u||u.attrs.id!==n.attrs.id)return o.pos;const f=e.doc.resolve(l);r=f.pos+(f.nodeAfter?.nodeSize??0)}}function B7(){const e=document.createElement("span");return e.appendChild(document.createTextNode("")),e}function v5e(e){const{deletion:t,insertion:n}=e.schema.marks;if(!t)throw new Error("Failed to apply tracked changes to node: schema does not contain deletion mark. Did you forget to add it?");if(!n)throw new Error("Failed to apply tracked changes to node: schema does not contain insertion mark. Did you forget to add it?");const r=[];let o=null,i=null,s=0;return e.doc.descendants((a,l,c)=>{if(a.isTextblock&&a.childCount&&(a.children.every(b=>t.isInSet(b.marks))&&r.push(Zt.node(l,l+a.nodeSize,{"data-node-deletion":"true"})),a.children.every(b=>n.isInSet(b.marks))&&r.push(Zt.node(l,l+a.nodeSize,{"data-node-insertion":"true"}))),a.type.name!=="text")return!0;const u=a.marks.find(b=>b.type===t),f=a.marks.find(b=>b.type===n),p=i?.marks.find(b=>b.type===t),m=i?.marks.find(b=>b.type===n),y=s;return i=a,s=l+a.nodeSize,c===o?(o=c,!0):(o=c,(!u||!p)&&(!f||!m)||u?.attrs.id!==p?.attrs.id&&f?.attrs.id!==m?.attrs.id||(u&&r.push(Zt.widget(y,B7,{key:u.attrs.id,marks:[t.create({id:u.attrs.id})]})),f&&r.push(Zt.widget(y,B7,{key:f.attrs.id,marks:[n.create({id:f.attrs.id})]}))),!0)}),Rt.create(e.doc,r)}const ak=new Ht("@handlewithcare/prosemirror-suggest-changes");function x5e(){return new kt({key:ak,state:{init(){return{enabled:!1}},apply(e,t){const n=e.getMeta(ak);return n&&"enabled"in n?n:t}},props:{decorations:v5e}})}function lQ(e,t,n,r,o){const i=l=>n.isInSet(l),s=l=>r.isInSet(l);i(e.marks)&&(e.isInline?t.removeMark(0,e.nodeSize,n):t.removeNodeMark(0,n)),e.descendants((l,c)=>{const u=s(l.marks),f=i(l.marks);if(!u&&!f)return!0;if(u){const{pos:y,deleted:b}=t.mapping.mapResult(c);if(b)return!1;const w=b5e(t.doc.resolve(y+l.nodeSize),r);return t.deleteRange(y,w),!1}const p=t.mapping.map(c),m=p+l.nodeSize;return l.isInline?t.removeMark(p,m,n):t.removeNodeMark(p,n),!0})}function F7(e,t,n){const r=e.marks.filter(o=>o.type===e.type.schema.marks.modification);for(const o of r)if(o.attrs.type==="attr"&&typeof o.attrs.attrName=="string")n.setNodeAttribute(t,o.attrs.attrName,o.attrs.previousValue);else if(o.attrs.type==="mark")o.attrs.previousValue?n.addNodeMark(0,e.type.schema.markFromJSON(o.attrs.previousValue)):n.removeNodeMark(t,e.type.schema.markFromJSON(o.attrs.previousValue));else if(o.attrs.type==="nodeType")n.setNodeMarkup(t,e.type.schema.nodes[o.attrs.previousValue],null);else throw new Error("Unknown modification type")}function cQ(e,t,n,r){const{modification:o}=e.type.schema.marks;if(!o)throw new Error("Failed to apply modifications to node: schema does not contain modification mark. Did you forget to add it?");const i=a=>o.isInSet(a);if(i(e.marks)){let a;do a=t.steps.length,t.removeNodeMark(0,o);while(t.steps.length>a);n<0&&F7(e,0,t)}e.descendants((a,l)=>{if(!i(a.marks))return!0;let u;do u=t.steps.length,t.removeNodeMark(l,o);while(t.steps.length>u);return n<0&&F7(a,l,t),!0})}function uQ(e,t){const{deletion:n,insertion:r}=e.schema.marks;if(!n)throw new Error("Failed to apply tracked changes to node: schema does not contain deletion mark. Did you forget to add it?");if(!r)throw new Error("Failed to apply tracked changes to node: schema does not contain insertion mark. Did you forget to add it?");const o=e.tr;return lQ(e.doc,o,r,n),cQ(o.doc,o,1),o.setMeta(ak,{skip:!0}),t?.(o),!0}function V7(e,t){const{deletion:n,insertion:r}=e.schema.marks;if(!n)throw new Error("Failed to apply tracked changes to node: schema does not contain deletion mark. Did you forget to add it?");if(!r)throw new Error("Failed to apply tracked changes to node: schema does not contain insertion mark. Did you forget to add it?");const o=e.tr;return lQ(e.doc,o,n,r),cQ(o.doc,o,-1),o.setMeta(ak,{skip:!0}),t?.(o),!0}var dQ="vercel.ai.error",w5e=Symbol.for(dQ),fQ,S5e=class hQ extends Error{constructor({name:t,message:n,cause:r}){super(n),this[fQ]=!0,this.name=t,this.cause=r}static isInstance(t){return hQ.hasMarker(t,dQ)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};fQ=w5e;var Pn=S5e,pQ="AI_APICallError",mQ=`vercel.ai.error.${pQ}`,k5e=Symbol.for(mQ),gQ,yQ=class extends Pn{constructor({message:t,url:n,requestBodyValues:r,statusCode:o,responseHeaders:i,responseBody:s,cause:a,isRetryable:l=o!=null&&(o===408||o===409||o===429||o>=500),data:c}){super({name:pQ,message:t,cause:a}),this[gQ]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=c}static isInstance(t){return Pn.hasMarker(t,mQ)}};gQ=k5e;function bQ(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var vQ="AI_InvalidArgumentError",xQ=`vercel.ai.error.${vQ}`,C5e=Symbol.for(xQ),wQ,E5e=class extends Pn{constructor({message:t,cause:n,argument:r}){super({name:vQ,message:t,cause:n}),this[wQ]=!0,this.argument=r}static isInstance(t){return Pn.hasMarker(t,xQ)}};wQ=C5e;var SQ="AI_InvalidPromptError",kQ=`vercel.ai.error.${SQ}`,T5e=Symbol.for(kQ),CQ,Yu=class extends Pn{constructor({prompt:t,message:n,cause:r}){super({name:SQ,message:`Invalid prompt: ${n}`,cause:r}),this[CQ]=!0,this.prompt=t}static isInstance(t){return Pn.hasMarker(t,kQ)}};CQ=T5e;var EQ="AI_JSONParseError",TQ=`vercel.ai.error.${EQ}`,_5e=Symbol.for(TQ),_Q,LR=class extends Pn{constructor({text:t,cause:n}){super({name:EQ,message:`JSON parsing failed: Text: ${t}.
Error message: ${bQ(n)}`,cause:n}),this[_Q]=!0,this.text=t}static isInstance(t){return Pn.hasMarker(t,TQ)}};_Q=_5e;var AQ="AI_TypeValidationError",MQ=`vercel.ai.error.${AQ}`,A5e=Symbol.for(MQ),NQ,M5e=class zR extends Pn{constructor({value:t,cause:n}){super({name:AQ,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${bQ(n)}`,cause:n}),this[NQ]=!0,this.value=t}static isInstance(t){return Pn.hasMarker(t,MQ)}static wrap({value:t,cause:n}){return zR.isInstance(n)&&n.value===t?n:new zR({value:t,cause:n})}};NQ=A5e;var ph=M5e,RQ="AI_UnsupportedFunctionalityError",IQ=`vercel.ai.error.${RQ}`,N5e=Symbol.for(IQ),OQ,lk=class extends Pn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:RQ,message:n}),this[OQ]=!0,this.functionality=t}static isInstance(t){return Pn.hasMarker(t,IQ)}};OQ=N5e;function ck(e){return e===null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"?!0:Array.isArray(e)?e.every(ck):typeof e=="object"?Object.entries(e).every(([t,n])=>typeof t=="string"&&ck(n)):!1}function H7(e){return Array.isArray(e)&&e.every(ck)}function BR(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,n])=>typeof t=="string"&&ck(n))}let R5e=(e,t=21)=>(n=t)=>{let r="",o=n|0;for(;o--;)r+=e[Math.random()*e.length|0];return r};var df={exports:{}},U7;function I5e(){if(U7)return df.exports;U7=1;const e=typeof Buffer<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(a,l,c){c==null&&l!==null&&typeof l=="object"&&(c=l,l=void 0),e&&Buffer.isBuffer(a)&&(a=a.toString()),a&&a.charCodeAt(0)===65279&&(a=a.slice(1));const u=JSON.parse(a,l);if(u===null||typeof u!="object")return u;const f=c&&c.protoAction||"error",p=c&&c.constructorAction||"error";if(f==="ignore"&&p==="ignore")return u;if(f!=="ignore"&&p!=="ignore"){if(t.test(a)===!1&&n.test(a)===!1)return u}else if(f!=="ignore"&&p==="ignore"){if(t.test(a)===!1)return u}else if(n.test(a)===!1)return u;return o(u,{protoAction:f,constructorAction:p,safe:c&&c.safe})}function o(a,{protoAction:l="error",constructorAction:c="error",safe:u}={}){let f=[a];for(;f.length;){const p=f;f=[];for(const m of p){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"__proto__")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"constructor")&&Object.prototype.hasOwnProperty.call(m.constructor,"prototype")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.constructor}for(const y in m){const b=m[y];b&&typeof b=="object"&&f.push(b)}}}return a}function i(a,l,c){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(a,l,c)}finally{Error.stackTraceLimit=u}}function s(a,l){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(a,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return df.exports=i,df.exports.default=i,df.exports.parse=i,df.exports.safeParse=s,df.exports.scan=o,df.exports}var O5e=I5e();const P5e=Md(O5e);function D5e(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function $5e(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}var Ah=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=R5e(n,t);if(e==null)return o;if(n.includes(r))throw new E5e({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${o(i)}`};Ah();function j5e(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function L5e(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var FR=Symbol.for("vercel.ai.validator");function z5e(e){return{[FR]:!0,validate:e}}function B5e(e){return typeof e=="object"&&e!==null&&FR in e&&e[FR]===!0&&"validate"in e}function F5e(e){return B5e(e)?e:V5e(e)}function V5e(e){return z5e(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Im({value:e,schema:t}){const n=F5e(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ph.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ph.wrap({value:e,cause:r})}}}function PQ({text:e,schema:t}){try{const n=P5e.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Im({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:LR.isInstance(n)?n:new LR({text:e,cause:n})}}}var{btoa:H5e,atob:U5e}=globalThis;function DQ(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=U5e(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function G7(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return H5e(t)}var $Q="vercel.ai.error",G5e=Symbol.for($Q),jQ,q5e=class LQ extends Error{constructor({name:t,message:n,cause:r}){super(n),this[jQ]=!0,this.name=t,this.cause=r}static isInstance(t){return LQ.hasMarker(t,$Q)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};jQ=G5e;var Om=q5e;function zQ(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var BQ="AI_InvalidArgumentError",FQ=`vercel.ai.error.${BQ}`,Z5e=Symbol.for(FQ),VQ,W5e=class extends Om{constructor({message:t,cause:n,argument:r}){super({name:BQ,message:t,cause:n}),this[VQ]=!0,this.argument=r}static isInstance(t){return Om.hasMarker(t,FQ)}};VQ=Z5e;var HQ="AI_JSONParseError",UQ=`vercel.ai.error.${HQ}`,K5e=Symbol.for(UQ),GQ,q7=class extends Om{constructor({text:t,cause:n}){super({name:HQ,message:`JSON parsing failed: Text: ${t}.
Error message: ${zQ(n)}`,cause:n}),this[GQ]=!0,this.text=t}static isInstance(t){return Om.hasMarker(t,UQ)}};GQ=K5e;var qQ="AI_TypeValidationError",ZQ=`vercel.ai.error.${qQ}`,Y5e=Symbol.for(ZQ),WQ,J5e=class VR extends Om{constructor({value:t,cause:n}){super({name:qQ,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${zQ(n)}`,cause:n}),this[WQ]=!0,this.value=t}static isInstance(t){return Om.hasMarker(t,ZQ)}static wrap({value:t,cause:n}){return VR.isInstance(n)&&n.value===t?n:new VR({value:t,cause:n})}};WQ=Y5e;var Z7=J5e;let X5e=(e,t=21)=>(n=t)=>{let r="",o=n|0;for(;o--;)r+=e[Math.random()*e.length|0];return r};var ff={exports:{}},W7;function Q5e(){if(W7)return ff.exports;W7=1;const e=typeof Buffer<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(a,l,c){c==null&&l!==null&&typeof l=="object"&&(c=l,l=void 0),e&&Buffer.isBuffer(a)&&(a=a.toString()),a&&a.charCodeAt(0)===65279&&(a=a.slice(1));const u=JSON.parse(a,l);if(u===null||typeof u!="object")return u;const f=c&&c.protoAction||"error",p=c&&c.constructorAction||"error";if(f==="ignore"&&p==="ignore")return u;if(f!=="ignore"&&p!=="ignore"){if(t.test(a)===!1&&n.test(a)===!1)return u}else if(f!=="ignore"&&p==="ignore"){if(t.test(a)===!1)return u}else if(n.test(a)===!1)return u;return o(u,{protoAction:f,constructorAction:p,safe:c&&c.safe})}function o(a,{protoAction:l="error",constructorAction:c="error",safe:u}={}){let f=[a];for(;f.length;){const p=f;f=[];for(const m of p){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"__proto__")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"constructor")&&Object.prototype.hasOwnProperty.call(m.constructor,"prototype")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.constructor}for(const y in m){const b=m[y];b&&typeof b=="object"&&f.push(b)}}}return a}function i(a,l,c){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(a,l,c)}finally{Error.stackTraceLimit=u}}function s(a,l){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(a,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return ff.exports=i,ff.exports.default=i,ff.exports.parse=i,ff.exports.safeParse=s,ff.exports.scan=o,ff.exports}var e$e=Q5e();const t$e=Md(e$e);var n$e=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=X5e(n,t);if(e==null)return o;if(n.includes(r))throw new W5e({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${o(i)}`};n$e();var uk=Symbol.for("vercel.ai.validator");function r$e(e){return{[uk]:!0,validate:e}}function o$e(e){return typeof e=="object"&&e!==null&&uk in e&&e[uk]===!0&&"validate"in e}function i$e(e){return o$e(e)?e:s$e(e)}function s$e(e){return r$e(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function a$e({value:e,schema:t}){const n=i$e(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Z7.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Z7.wrap({value:e,cause:r})}}}function K7({text:e,schema:t}){try{const n=t$e.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=a$e({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:q7.isInstance(n)?n:new q7({text:e,cause:n})}}}const l$e=Symbol("Let zodToJsonSchema decide on which parser to use"),Y7={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},c$e=e=>typeof e=="string"?{...Y7,name:e}:{...Y7,...e},u$e=e=>{const t=c$e(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,o])=>[o._def,{def:o._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function KQ(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function hn(e,t,n,r,o){e[t]=n,KQ(e,t,r,o)}const YQ=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function be(e,t,n){function r(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in s.prototype)u in a||Object.defineProperty(a,u,{value:s.prototype[u].bind(a)});a._zod.constr=s,a._zod.def=l}const o=n?.Parent??Object;class i extends o{}Object.defineProperty(i,"name",{value:e});function s(a){var l;const c=n?.Parent?new i:this;r(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class ab extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const JQ={};function Cd(e){return JQ}function XQ(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function HR(e,t){return typeof t=="bigint"?t.toString():t}function vP(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function xP(e){return e==null}function wP(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function d$e(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const l=r.match(/\d?e-(\d?)/);l?.[1]&&(o=Number.parseInt(l[1]))}const i=n>o?n:o,s=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return s%a/10**i}const J7=Symbol("evaluating");function nn(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==J7)return r===void 0&&(r=J7,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function SP(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function du(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function hg(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function X7(e){return JSON.stringify(e)}const QQ="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function dk(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const f$e=vP(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function lb(e){if(dk(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(dk(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function eee(e){return lb(e)?{...e}:e}const h$e=new Set(["string","number","symbol"]);function Pm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Mh(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function Je(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function p$e(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const m$e={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function g$e(e,t){const n=e._zod.def,r=hg(e._zod.def,{get shape(){const o={};for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(o[i]=n.shape[i])}return du(this,"shape",o),o},checks:[]});return Mh(e,r)}function y$e(e,t){const n=e._zod.def,r=hg(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete o[i]}return du(this,"shape",o),o},checks:[]});return Mh(e,r)}function b$e(e,t){if(!lb(t))throw new Error("Invalid input to extend: expected a plain object");const n=hg(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return du(this,"shape",r),r},checks:[]});return Mh(e,n)}function v$e(e,t){const n=hg(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return du(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return Mh(e,n)}function x$e(e,t,n){const r=hg(t._zod.def,{get shape(){const o=t._zod.def.shape,i={...o};if(n)for(const s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(i[s]=e?new e({type:"optional",innerType:o[s]}):o[s])}else for(const s in o)i[s]=e?new e({type:"optional",innerType:o[s]}):o[s];return du(this,"shape",i),i},checks:[]});return Mh(t,r)}function w$e(e,t,n){const r=hg(t._zod.def,{get shape(){const o=t._zod.def.shape,i={...o};if(n)for(const s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(i[s]=new e({type:"nonoptional",innerType:o[s]}))}else for(const s in o)i[s]=new e({type:"nonoptional",innerType:o[s]});return du(this,"shape",i),i},checks:[]});return Mh(t,r)}function u0(e,t=0){for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Up(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function wx(e){return typeof e=="string"?e:e?.message}function Ed(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=wx(e.inst?._zod.def?.error?.(e))??wx(t?.error?.(e))??wx(n.customError?.(e))??wx(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function kP(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function cb(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const tee=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,HR,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},nee=be("$ZodError",tee),ree=be("$ZodError",tee,{Parent:Error});function S$e(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function k$e(e,t){const n=t||function(i){return i.message},r={_errors:[]},o=i=>{for(const s of i.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>o({issues:a}));else if(s.code==="invalid_key")o({issues:s.issues});else if(s.code==="invalid_element")o({issues:s.issues});else if(s.path.length===0)r._errors.push(n(s));else{let a=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(s))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return o(e),r}const C$e=e=>(t,n,r,o)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new ab;if(s.issues.length){const a=new(o?.Err??e)(s.issues.map(l=>Ed(l,i,Cd())));throw QQ(a,o?.callee),a}return s.value},E$e=e=>async(t,n,r,o)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const a=new(o?.Err??e)(s.issues.map(l=>Ed(l,i,Cd())));throw QQ(a,o?.callee),a}return s.value},oee=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new ab;return i.issues.length?{success:!1,error:new(e??nee)(i.issues.map(s=>Ed(s,o,Cd())))}:{success:!0,data:i.value}},T$e=oee(ree),iee=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(s=>Ed(s,o,Cd())))}:{success:!0,data:i.value}},_$e=iee(ree),A$e=/^[cC][^\s-]{8,}$/,M$e=/^[0-9a-z]+$/,N$e=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,R$e=/^[0-9a-vA-V]{20}$/,I$e=/^[A-Za-z0-9]{27}$/,O$e=/^[a-zA-Z0-9_-]{21}$/,P$e=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,D$e=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Q7=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,$$e=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,j$e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function L$e(){return new RegExp(j$e,"u")}const z$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,B$e=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,F$e=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,V$e=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,H$e=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,see=/^[A-Za-z0-9_-]*$/,U$e=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,G$e=/^\+(?:[0-9]){6,14}[0-9]$/,aee="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",q$e=new RegExp(`^${aee}$`);function lee(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Z$e(e){return new RegExp(`^${lee(e)}$`)}function W$e(e){const t=lee({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${aee}T(?:${r})$`)}const K$e=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Y$e=/^\d+$/,J$e=/^-?\d+(?:\.\d+)?/i,X$e=/true|false/i,Q$e=/null/i,eje=/^[^A-Z]*$/,tje=/^[^a-z]*$/,Yi=be("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),cee={number:"number",bigint:"bigint",object:"date"},uee=be("$ZodCheckLessThan",(e,t)=>{Yi.init(e,t);const n=cee[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,i=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),dee=be("$ZodCheckGreaterThan",(e,t)=>{Yi.init(e,t);const n=cee[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,i=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),nje=be("$ZodCheckMultipleOf",(e,t)=>{Yi.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):d$e(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),rje=be("$ZodCheckNumberFormat",(e,t)=>{Yi.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[o,i]=m$e[t.format];e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,a.minimum=o,a.maximum=i,n&&(a.pattern=Y$e)}),e._zod.check=s=>{const a=s.value;if(n){if(!Number.isInteger(a)){s.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}a<o&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>i&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:e})}}),oje=be("$ZodCheckMaxLength",(e,t)=>{var n;Yi.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!xP(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const s=kP(o);r.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),ije=be("$ZodCheckMinLength",(e,t)=>{var n;Yi.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!xP(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const s=kP(o);r.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),sje=be("$ZodCheckLengthEquals",(e,t)=>{var n;Yi.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!xP(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,i=o.length;if(i===t.length)return;const s=kP(o),a=i>t.length;r.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),gE=be("$ZodCheckStringFormat",(e,t)=>{var n,r;Yi.init(e,t),e._zod.onattach.push(o=>{const i=o._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),aje=be("$ZodCheckRegex",(e,t)=>{gE.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),lje=be("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=eje),gE.init(e,t)}),cje=be("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=tje),gE.init(e,t)}),uje=be("$ZodCheckIncludes",(e,t)=>{Yi.init(e,t);const n=Pm(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),dje=be("$ZodCheckStartsWith",(e,t)=>{Yi.init(e,t);const n=new RegExp(`^${Pm(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),fje=be("$ZodCheckEndsWith",(e,t)=>{Yi.init(e,t);const n=new RegExp(`.*${Pm(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),hje=be("$ZodCheckOverwrite",(e,t)=>{Yi.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class pje{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(s=>s),o=Math.min(...r.map(s=>s.length-s.trimStart().length)),i=r.map(s=>s.slice(o)).map(s=>" ".repeat(this.indent*2)+s);for(const s of i)this.content.push(s)}compile(){const t=Function,n=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...n,o.join(`
`))}}const mje={major:4,minor:0,patch:17},Hn=be("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=mje;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const i of o._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,s,a)=>{let l=u0(i),c;for(const u of s){if(u._zod.def.when){if(!u._zod.def.when(i))continue}else if(l)continue;const f=i.issues.length,p=u._zod.check(i);if(p instanceof Promise&&a?.async===!1)throw new ab;if(c||p instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await p,i.issues.length!==f&&(l||(l=u0(i,f)))});else{if(i.issues.length===f)continue;l||(l=u0(i,f))}}return c?c.then(()=>i):i};e._zod.run=(i,s)=>{const a=e._zod.parse(i,s);if(a instanceof Promise){if(s.async===!1)throw new ab;return a.then(l=>o(l,r,s))}return o(a,r,s)}}e["~standard"]={validate:o=>{try{const i=T$e(e,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return _$e(e,o).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),CP=be("$ZodString",(e,t)=>{Hn.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??K$e(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),rr=be("$ZodStringFormat",(e,t)=>{gE.init(e,t),CP.init(e,t)}),gje=be("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=D$e),rr.init(e,t)}),yje=be("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Q7(r))}else t.pattern??(t.pattern=Q7());rr.init(e,t)}),bje=be("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=$$e),rr.init(e,t)}),vje=be("$ZodURL",(e,t)=>{rr.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:U$e.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),xje=be("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=L$e()),rr.init(e,t)}),wje=be("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=O$e),rr.init(e,t)}),Sje=be("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=A$e),rr.init(e,t)}),kje=be("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=M$e),rr.init(e,t)}),Cje=be("$ZodULID",(e,t)=>{t.pattern??(t.pattern=N$e),rr.init(e,t)}),Eje=be("$ZodXID",(e,t)=>{t.pattern??(t.pattern=R$e),rr.init(e,t)}),Tje=be("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=I$e),rr.init(e,t)}),_je=be("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=W$e(t)),rr.init(e,t)}),Aje=be("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=q$e),rr.init(e,t)}),Mje=be("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Z$e(t)),rr.init(e,t)}),Nje=be("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=P$e),rr.init(e,t)}),Rje=be("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=z$e),rr.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),Ije=be("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=B$e),rr.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Oje=be("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=F$e),rr.init(e,t)}),Pje=be("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=V$e),rr.init(e,t),e._zod.check=n=>{const[r,o]=n.value.split("/");try{if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function fee(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Dje=be("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=H$e),rr.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{fee(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function $je(e){if(!see.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return fee(n)}const jje=be("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=see),rr.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{$je(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Lje=be("$ZodE164",(e,t)=>{t.pattern??(t.pattern=G$e),rr.init(e,t)});function zje(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const Bje=be("$ZodJWT",(e,t)=>{rr.init(e,t),e._zod.check=n=>{zje(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),hee=be("$ZodNumber",(e,t)=>{Hn.init(e,t),e._zod.pattern=e._zod.bag.pattern??J$e,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...i?{received:i}:{}}),n}}),Fje=be("$ZodNumber",(e,t)=>{rje.init(e,t),hee.init(e,t)}),Vje=be("$ZodBoolean",(e,t)=>{Hn.init(e,t),e._zod.pattern=X$e,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),Hje=be("$ZodNull",(e,t)=>{Hn.init(e,t),e._zod.pattern=Q$e,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const o=n.value;return o===null||n.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),n}}),Uje=be("$ZodAny",(e,t)=>{Hn.init(e,t),e._zod.parse=n=>n}),Gje=be("$ZodUnknown",(e,t)=>{Hn.init(e,t),e._zod.parse=n=>n}),qje=be("$ZodNever",(e,t)=>{Hn.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function eB(e,t,n){e.issues.length&&t.issues.push(...Up(n,e.issues)),t.value[n]=e.value}const Zje=be("$ZodArray",(e,t)=>{Hn.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const i=[];for(let s=0;s<o.length;s++){const a=o[s],l=t.element._zod.run({value:a,issues:[]},r);l instanceof Promise?i.push(l.then(c=>eB(c,n,s))):eB(l,n,s)}return i.length?Promise.all(i).then(()=>n):n}});function Sx(e,t,n,r){e.issues.length&&t.issues.push(...Up(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const Wje=be("$ZodObject",(e,t)=>{Hn.init(e,t);const n=vP(()=>{const f=Object.keys(t.shape);for(const m of f)if(!t.shape[m]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${m}": expected a Zod schema`);const p=p$e(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(p)}});nn(e._zod,"propValues",()=>{const f=t.shape,p={};for(const m in f){const y=f[m]._zod;if(y.values){p[m]??(p[m]=new Set);for(const b of y.values)p[m].add(b)}}return p});const r=f=>{const p=new pje(["shape","payload","ctx"]),m=n.value,y=E=>{const T=X7(E);return`shape[${T}]._zod.run({ value: input[${T}], issues: [] }, ctx)`};p.write("const input = payload.value;");const b=Object.create(null);let w=0;for(const E of m.keys)b[E]=`key_${w++}`;p.write("const newResult = {}");for(const E of m.keys){const T=b[E],A=X7(E);p.write(`const ${T} = ${y(E)};`),p.write(`
        if (${T}.issues.length) {
          payload.issues = payload.issues.concat(${T}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${A}, ...iss.path] : [${A}]
          })));
        }
        
        if (${T}.value === undefined) {
          if (${A} in input) {
            newResult[${A}] = undefined;
          }
        } else {
          newResult[${A}] = ${T}.value;
        }
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const S=p.compile();return(E,T)=>S(f,E,T)};let o;const i=dk,s=!JQ.jitless,l=s&&f$e.value,c=t.catchall;let u;e._zod.parse=(f,p)=>{u??(u=n.value);const m=f.value;if(!i(m))return f.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),f;const y=[];if(s&&l&&p?.async===!1&&p.jitless!==!0)o||(o=r(t.shape)),f=o(f,p);else{f.value={};const T=u.shape;for(const A of u.keys){const R=T[A]._zod.run({value:m[A],issues:[]},p);R instanceof Promise?y.push(R.then(O=>Sx(O,f,A,m))):Sx(R,f,A,m)}}if(!c)return y.length?Promise.all(y).then(()=>f):f;const b=[],w=u.keySet,S=c._zod,E=S.def.type;for(const T of Object.keys(m)){if(w.has(T))continue;if(E==="never"){b.push(T);continue}const A=S.run({value:m[T],issues:[]},p);A instanceof Promise?y.push(A.then(M=>Sx(M,f,T,m))):Sx(A,f,T,m)}return b.length&&f.issues.push({code:"unrecognized_keys",keys:b,input:m,inst:e}),y.length?Promise.all(y).then(()=>f):f}});function tB(e,t,n,r){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const o=e.filter(i=>!u0(i));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(i=>i.issues.map(s=>Ed(s,r,Cd())))}),t)}const pee=be("$ZodUnion",(e,t)=>{Hn.init(e,t),nn(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),nn(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),nn(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),nn(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${o.map(i=>wP(i.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,i)=>{if(n)return r(o,i);let s=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:o.value,issues:[]},i);if(c instanceof Promise)a.push(c),s=!0;else{if(c.issues.length===0)return c;a.push(c)}}return s?Promise.all(a).then(l=>tB(l,o,e,i)):tB(a,o,e,i)}}),Kje=be("$ZodDiscriminatedUnion",(e,t)=>{pee.init(e,t);const n=e._zod.parse;nn(e._zod,"propValues",()=>{const o={};for(const i of t.options){const s=i._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const[a,l]of Object.entries(s)){o[a]||(o[a]=new Set);for(const c of l)o[a].add(c)}}return o});const r=vP(()=>{const o=t.options,i=new Map;for(const s of o){const a=s._zod.propValues?.[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(const l of a){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,s)}}return i});e._zod.parse=(o,i)=>{const s=o.value;if(!dk(s))return o.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),o;const a=r.value.get(s?.[t.discriminator]);return a?a._zod.run(o,i):t.unionFallback?n(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),o)}}),Yje=be("$ZodIntersection",(e,t)=>{Hn.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,i=t.left._zod.run({value:o,issues:[]},r),s=t.right._zod.run({value:o,issues:[]},r);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([l,c])=>nB(n,l,c)):nB(n,i,s)}});function UR(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(lb(e)&&lb(t)){const n=Object.keys(t),r=Object.keys(e).filter(i=>n.indexOf(i)!==-1),o={...e,...t};for(const i of r){const s=UR(e[i],t[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};o[i]=s.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],i=t[r],s=UR(o,i);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function nB(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),u0(e))return e;const r=UR(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const Jje=be("$ZodRecord",(e,t)=>{Hn.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!lb(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const i=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const l of s)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:o[l],issues:[]},r);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&n.issues.push(...Up(l,u.issues)),n.value[l]=u.value})):(c.issues.length&&n.issues.push(...Up(l,c.issues)),n.value[l]=c.value)}let a;for(const l in o)s.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:a})}else{n.value={};for(const s of Reflect.ownKeys(o)){if(s==="__proto__")continue;const a=t.keyType._zod.run({value:s,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(c=>Ed(c,r,Cd())),input:s,path:[s],inst:e}),n.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:o[s],issues:[]},r);l instanceof Promise?i.push(l.then(c=>{c.issues.length&&n.issues.push(...Up(s,c.issues)),n.value[a.value]=c.value})):(l.issues.length&&n.issues.push(...Up(s,l.issues)),n.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>n):n}}),Xje=be("$ZodEnum",(e,t)=>{Hn.init(e,t);const n=XQ(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>h$e.has(typeof o)).map(o=>typeof o=="string"?Pm(o):o.toString()).join("|")})$`),e._zod.parse=(o,i)=>{const s=o.value;return r.has(s)||o.issues.push({code:"invalid_value",values:n,input:s,inst:e}),o}}),Qje=be("$ZodLiteral",(e,t)=>{if(Hn.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?Pm(n):n?Pm(n.toString()):String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}}),eLe=be("$ZodTransform",(e,t)=>{Hn.init(e,t),e._zod.parse=(n,r)=>{const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(s=>(n.value=s,n));if(o instanceof Promise)throw new ab;return n.value=o,n}});function rB(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const tLe=be("$ZodOptional",(e,t)=>{Hn.init(e,t),e._zod.optin="optional",e._zod.optout="optional",nn(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),nn(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${wP(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>rB(i,n.value)):rB(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),nLe=be("$ZodNullable",(e,t)=>{Hn.init(e,t),nn(e._zod,"optin",()=>t.innerType._zod.optin),nn(e._zod,"optout",()=>t.innerType._zod.optout),nn(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${wP(n.source)}|null)$`):void 0}),nn(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),rLe=be("$ZodDefault",(e,t)=>{Hn.init(e,t),e._zod.optin="optional",nn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>oB(i,t)):oB(o,t)}});function oB(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const oLe=be("$ZodPrefault",(e,t)=>{Hn.init(e,t),e._zod.optin="optional",nn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),iLe=be("$ZodNonOptional",(e,t)=>{Hn.init(e,t),nn(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>iB(i,e)):iB(o,e)}});function iB(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const sLe=be("$ZodCatch",(e,t)=>{Hn.init(e,t),nn(e._zod,"optin",()=>t.innerType._zod.optin),nn(e._zod,"optout",()=>t.innerType._zod.optout),nn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(s=>Ed(s,r,Cd()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(i=>Ed(i,r,Cd()))},input:n.value}),n.issues=[]),n)}}),aLe=be("$ZodPipe",(e,t)=>{Hn.init(e,t),nn(e._zod,"values",()=>t.in._zod.values),nn(e._zod,"optin",()=>t.in._zod.optin),nn(e._zod,"optout",()=>t.out._zod.optout),nn(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(i=>sB(i,t,r)):sB(o,t,r)}});function sB(e,t,n){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const lLe=be("$ZodReadonly",(e,t)=>{Hn.init(e,t),nn(e._zod,"propValues",()=>t.innerType._zod.propValues),nn(e._zod,"values",()=>t.innerType._zod.values),nn(e._zod,"optin",()=>t.innerType._zod.optin),nn(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(aB):aB(o)}});function aB(e){return e.value=Object.freeze(e.value),e}const cLe=be("$ZodLazy",(e,t)=>{Hn.init(e,t),nn(e._zod,"innerType",()=>t.getter()),nn(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),nn(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),nn(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),nn(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),uLe=be("$ZodCustom",(e,t)=>{Yi.init(e,t),Hn.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(i=>lB(i,n,r,e));lB(o,n,r,e)}});function lB(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(cb(o))}}class mee{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function dLe(){return new mee}const Fy=dLe();function fLe(e,t){return new e({type:"string",...Je(t)})}function hLe(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Je(t)})}function cB(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Je(t)})}function pLe(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Je(t)})}function mLe(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Je(t)})}function gLe(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Je(t)})}function yLe(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Je(t)})}function bLe(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Je(t)})}function vLe(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Je(t)})}function xLe(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Je(t)})}function wLe(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Je(t)})}function SLe(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Je(t)})}function kLe(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Je(t)})}function CLe(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Je(t)})}function ELe(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Je(t)})}function TLe(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Je(t)})}function _Le(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Je(t)})}function ALe(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Je(t)})}function MLe(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Je(t)})}function gee(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Je(t)})}function NLe(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Je(t)})}function RLe(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Je(t)})}function ILe(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Je(t)})}function OLe(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Je(t)})}function PLe(e,t){return new e({type:"string",format:"date",check:"string_format",...Je(t)})}function DLe(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Je(t)})}function $Le(e,t){return new e({type:"string",format:"duration",check:"string_format",...Je(t)})}function jLe(e,t){return new e({type:"number",checks:[],...Je(t)})}function LLe(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Je(t)})}function zLe(e,t){return new e({type:"boolean",...Je(t)})}function BLe(e,t){return new e({type:"null",...Je(t)})}function FLe(e){return new e({type:"any"})}function VLe(e){return new e({type:"unknown"})}function HLe(e,t){return new e({type:"never",...Je(t)})}function uB(e,t){return new uee({check:"less_than",...Je(t),value:e,inclusive:!1})}function PA(e,t){return new uee({check:"less_than",...Je(t),value:e,inclusive:!0})}function dB(e,t){return new dee({check:"greater_than",...Je(t),value:e,inclusive:!1})}function DA(e,t){return new dee({check:"greater_than",...Je(t),value:e,inclusive:!0})}function fB(e,t){return new nje({check:"multiple_of",...Je(t),value:e})}function yee(e,t){return new oje({check:"max_length",...Je(t),maximum:e})}function fk(e,t){return new ije({check:"min_length",...Je(t),minimum:e})}function bee(e,t){return new sje({check:"length_equals",...Je(t),length:e})}function ULe(e,t){return new aje({check:"string_format",format:"regex",...Je(t),pattern:e})}function GLe(e){return new lje({check:"string_format",format:"lowercase",...Je(e)})}function qLe(e){return new cje({check:"string_format",format:"uppercase",...Je(e)})}function ZLe(e,t){return new uje({check:"string_format",format:"includes",...Je(t),includes:e})}function WLe(e,t){return new dje({check:"string_format",format:"starts_with",...Je(t),prefix:e})}function KLe(e,t){return new fje({check:"string_format",format:"ends_with",...Je(t),suffix:e})}function vv(e){return new hje({check:"overwrite",tx:e})}function YLe(e){return vv(t=>t.normalize(e))}function JLe(){return vv(e=>e.trim())}function XLe(){return vv(e=>e.toLowerCase())}function QLe(){return vv(e=>e.toUpperCase())}function e6e(e,t,n){return new e({type:"array",element:t,...Je(n)})}function t6e(e,t,n){const r=Je(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function n6e(e,t,n){return new e({type:"custom",check:"custom",fn:t,...Je(n)})}function r6e(e){const t=o6e(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(cb(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(cb(o))}},e(n.value,n)));return t}function o6e(e,t){const n=new Yi({check:"custom",...Je(t)});return n._zod.check=e,n}class hB{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??Fy,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var r;const o=t._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(t);if(s)return s.count++,n.schemaPath.includes(t)&&(s.cycle=n.path),s.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,a);const l=t._zod.toJSONSchema?.();if(l)a.schema=l;else{const f={...n,schemaPath:[...n.schemaPath,t],path:n.path},p=t._zod.parent;if(p)a.ref=p,this.process(p,f),this.seen.get(p).isParent=!0;else{const m=a.schema;switch(o.type){case"string":{const y=m;y.type="string";const{minimum:b,maximum:w,format:S,patterns:E,contentEncoding:T}=t._zod.bag;if(typeof b=="number"&&(y.minLength=b),typeof w=="number"&&(y.maxLength=w),S&&(y.format=i[S]??S,y.format===""&&delete y.format),T&&(y.contentEncoding=T),E&&E.size>0){const A=[...E];A.length===1?y.pattern=A[0].source:A.length>1&&(a.schema.allOf=[...A.map(M=>({...this.target==="draft-7"||this.target==="draft-4"?{type:"string"}:{},pattern:M.source}))])}break}case"number":{const y=m,{minimum:b,maximum:w,format:S,multipleOf:E,exclusiveMaximum:T,exclusiveMinimum:A}=t._zod.bag;typeof S=="string"&&S.includes("int")?y.type="integer":y.type="number",typeof A=="number"&&(this.target==="draft-4"?(y.minimum=A,y.exclusiveMinimum=!0):y.exclusiveMinimum=A),typeof b=="number"&&(y.minimum=b,typeof A=="number"&&this.target!=="draft-4"&&(A>=b?delete y.minimum:delete y.exclusiveMinimum)),typeof T=="number"&&(this.target==="draft-4"?(y.maximum=T,y.exclusiveMaximum=!0):y.exclusiveMaximum=T),typeof w=="number"&&(y.maximum=w,typeof T=="number"&&this.target!=="draft-4"&&(T<=w?delete y.maximum:delete y.exclusiveMaximum)),typeof E=="number"&&(y.multipleOf=E);break}case"boolean":{const y=m;y.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{m.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{m.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const y=m,{minimum:b,maximum:w}=t._zod.bag;typeof b=="number"&&(y.minItems=b),typeof w=="number"&&(y.maxItems=w),y.type="array",y.items=this.process(o.element,{...f,path:[...f.path,"items"]});break}case"object":{const y=m;y.type="object",y.properties={};const b=o.shape;for(const E in b)y.properties[E]=this.process(b[E],{...f,path:[...f.path,"properties",E]});const w=new Set(Object.keys(b)),S=new Set([...w].filter(E=>{const T=o.shape[E]._zod;return this.io==="input"?T.optin===void 0:T.optout===void 0}));S.size>0&&(y.required=Array.from(S)),o.catchall?._zod.def.type==="never"?y.additionalProperties=!1:o.catchall?o.catchall&&(y.additionalProperties=this.process(o.catchall,{...f,path:[...f.path,"additionalProperties"]})):this.io==="output"&&(y.additionalProperties=!1);break}case"union":{const y=m;y.anyOf=o.options.map((b,w)=>this.process(b,{...f,path:[...f.path,"anyOf",w]}));break}case"intersection":{const y=m,b=this.process(o.left,{...f,path:[...f.path,"allOf",0]}),w=this.process(o.right,{...f,path:[...f.path,"allOf",1]}),S=T=>"allOf"in T&&Object.keys(T).length===1,E=[...S(b)?b.allOf:[b],...S(w)?w.allOf:[w]];y.allOf=E;break}case"tuple":{const y=m;y.type="array";const b=o.items.map((E,T)=>this.process(E,{...f,path:[...f.path,"prefixItems",T]}));if(this.target==="draft-2020-12"?y.prefixItems=b:y.items=b,o.rest){const E=this.process(o.rest,{...f,path:[...f.path,"items"]});this.target==="draft-2020-12"?y.items=E:y.additionalItems=E}o.rest&&(y.items=this.process(o.rest,{...f,path:[...f.path,"items"]}));const{minimum:w,maximum:S}=t._zod.bag;typeof w=="number"&&(y.minItems=w),typeof S=="number"&&(y.maxItems=S);break}case"record":{const y=m;y.type="object",this.target!=="draft-4"&&(y.propertyNames=this.process(o.keyType,{...f,path:[...f.path,"propertyNames"]})),y.additionalProperties=this.process(o.valueType,{...f,path:[...f.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const y=m,b=XQ(o.entries);b.every(w=>typeof w=="number")&&(y.type="number"),b.every(w=>typeof w=="string")&&(y.type="string"),y.enum=b;break}case"literal":{const y=m,b=[];for(const w of o.values)if(w===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof w=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");b.push(Number(w))}else b.push(w);if(b.length!==0)if(b.length===1){const w=b[0];y.type=w===null?"null":typeof w,this.target==="draft-4"?y.enum=[w]:y.const=w}else b.every(w=>typeof w=="number")&&(y.type="number"),b.every(w=>typeof w=="string")&&(y.type="string"),b.every(w=>typeof w=="boolean")&&(y.type="string"),b.every(w=>w===null)&&(y.type="null"),y.enum=b;break}case"file":{const y=m,b={type:"string",format:"binary",contentEncoding:"binary"},{minimum:w,maximum:S,mime:E}=t._zod.bag;w!==void 0&&(b.minLength=w),S!==void 0&&(b.maxLength=S),E?E.length===1?(b.contentMediaType=E[0],Object.assign(y,b)):y.anyOf=E.map(T=>({...b,contentMediaType:T})):Object.assign(y,b);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const y=this.process(o.innerType,f);m.anyOf=[y,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,f),a.ref=o.innerType;break}case"success":{const y=m;y.type="boolean";break}case"default":{this.process(o.innerType,f),a.ref=o.innerType,m.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,f),a.ref=o.innerType,this.io==="input"&&(m._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,f),a.ref=o.innerType;let y;try{y=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}m.default=y;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const y=m,b=t._zod.pattern;if(!b)throw new Error("Pattern not found in template literal");y.type="string",y.pattern=b.source;break}case"pipe":{const y=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(y,f),a.ref=y;break}case"readonly":{this.process(o.innerType,f),a.ref=o.innerType,m.readOnly=!0;break}case"promise":{this.process(o.innerType,f),a.ref=o.innerType;break}case"optional":{this.process(o.innerType,f),a.ref=o.innerType;break}case"lazy":{const y=t._zod.innerType;this.process(y,f),a.ref=y;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(t);return c&&Object.assign(a.schema,c),this.io==="input"&&to(t)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(t).schema}emit(t,n){const r={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},o=this.seen.get(t);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=u=>{const f=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const b=r.external.registry.get(u[0])?.id,w=r.external.uri??(E=>E);if(b)return{ref:w(b)};const S=u[1].defId??u[1].schema.id??`schema${this.counter++}`;return u[1].defId=S,{defId:S,ref:`${w("__shared")}#/${f}/${S}`}}if(u[1]===o)return{ref:"#"};const m=`#/${f}/`,y=u[1].schema.id??`__schema${this.counter++}`;return{defId:y,ref:m+y}},s=u=>{if(u[1].schema.$ref)return;const f=u[1],{ref:p,defId:m}=i(u);f.def={...f.schema},m&&(f.defId=m);const y=f.schema;for(const b in y)delete y[b];y.$ref=p};if(r.cycles==="throw")for(const u of this.seen.entries()){const f=u[1];if(f.cycle)throw new Error(`Cycle detected: #/${f.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of this.seen.entries()){const f=u[1];if(t===u[0]){s(u);continue}if(r.external){const m=r.external.registry.get(u[0])?.id;if(t!==u[0]&&m){s(u);continue}}if(this.metadataRegistry.get(u[0])?.id){s(u);continue}if(f.cycle){s(u);continue}if(f.count>1&&r.reused==="ref"){s(u);continue}}const a=(u,f)=>{const p=this.seen.get(u),m=p.def??p.schema,y={...m};if(p.ref===null)return;const b=p.ref;if(p.ref=null,b){a(b,f);const w=this.seen.get(b).schema;w.$ref&&(f.target==="draft-7"||f.target==="draft-4")?(m.allOf=m.allOf??[],m.allOf.push(w)):(Object.assign(m,w),Object.assign(m,y))}p.isParent||this.override({zodSchema:u,jsonSchema:m,path:p.path??[]})};for(const u of[...this.seen.entries()].reverse())a(u[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":console.warn(`Invalid target: ${this.target}`),r.external?.uri){const u=r.external.registry.get(t)?.id;if(!u)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(u)}Object.assign(l,o.def);const c=r.external?.defs??{};for(const u of this.seen.entries()){const f=u[1];f.def&&f.defId&&(c[f.defId]=f.def)}r.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function vee(e,t){if(e instanceof mee){const r=new hB(t),o={};for(const a of e._idmap.entries()){const[l,c]=a;r.process(c)}const i={},s={registry:e,uri:t?.uri,defs:o};for(const a of e._idmap.entries()){const[l,c]=a;i[l]=r.emit(c,{...t,external:s})}if(Object.keys(o).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[a]:o}}return{schemas:i}}const n=new hB(t);return n.process(e),n.emit(e,t)}function to(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const o=e._zod.def;switch(o.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return to(o.element,n);case"object":{for(const i in o.shape)if(to(o.shape[i],n))return!0;return!1}case"union":{for(const i of o.options)if(to(i,n))return!0;return!1}case"intersection":return to(o.left,n)||to(o.right,n);case"tuple":{for(const i of o.items)if(to(i,n))return!0;return!!(o.rest&&to(o.rest,n))}case"record":return to(o.keyType,n)||to(o.valueType,n);case"map":return to(o.keyType,n)||to(o.valueType,n);case"set":return to(o.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return to(o.innerType,n);case"lazy":return to(o.getter(),n);case"default":return to(o.innerType,n);case"prefault":return to(o.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return to(o.in,n)||to(o.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${o.type}`)}const i6e=be("ZodISODateTime",(e,t)=>{_je.init(e,t),fr.init(e,t)});function s6e(e){return OLe(i6e,e)}const a6e=be("ZodISODate",(e,t)=>{Aje.init(e,t),fr.init(e,t)});function l6e(e){return PLe(a6e,e)}const c6e=be("ZodISOTime",(e,t)=>{Mje.init(e,t),fr.init(e,t)});function u6e(e){return DLe(c6e,e)}const d6e=be("ZodISODuration",(e,t)=>{Nje.init(e,t),fr.init(e,t)});function f6e(e){return $Le(d6e,e)}const h6e=(e,t)=>{nee.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>k$e(e,n)},flatten:{value:n=>S$e(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,HR,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,HR,2)}},isEmpty:{get(){return e.issues.length===0}}})},yE=be("ZodError",h6e,{Parent:Error}),p6e=C$e(yE),m6e=E$e(yE),g6e=oee(yE),EP=iee(yE),Kn=be("ZodType",(e,t)=>(Hn.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>Mh(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>p6e(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>g6e(e,n,r),e.parseAsync=async(n,r)=>m6e(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>EP(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(a9e(n,r)),e.superRefine=n=>e.check(l9e(n)),e.overwrite=n=>e.check(vv(n)),e.optional=()=>Pt(e),e.nullable=()=>gB(e),e.nullish=()=>Pt(gB(e)),e.nonoptional=n=>e9e(e,n),e.array=()=>xt(e),e.or=n=>It([e,n]),e.and=n=>U6e(e,n),e.transform=n=>yB(e,W6e(n)),e.default=n=>J6e(e,n),e.prefault=n=>Q6e(e,n),e.catch=n=>n9e(e,n),e.pipe=n=>yB(e,n),e.readonly=()=>i9e(e),e.describe=n=>{const r=e.clone();return Fy.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return Fy.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Fy.get(e);const r=e.clone();return Fy.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),xee=be("_ZodString",(e,t)=>{CP.init(e,t),Kn.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(ULe(...r)),e.includes=(...r)=>e.check(ZLe(...r)),e.startsWith=(...r)=>e.check(WLe(...r)),e.endsWith=(...r)=>e.check(KLe(...r)),e.min=(...r)=>e.check(fk(...r)),e.max=(...r)=>e.check(yee(...r)),e.length=(...r)=>e.check(bee(...r)),e.nonempty=(...r)=>e.check(fk(1,...r)),e.lowercase=r=>e.check(GLe(r)),e.uppercase=r=>e.check(qLe(r)),e.trim=()=>e.check(JLe()),e.normalize=(...r)=>e.check(YLe(...r)),e.toLowerCase=()=>e.check(XLe()),e.toUpperCase=()=>e.check(QLe())}),y6e=be("ZodString",(e,t)=>{CP.init(e,t),xee.init(e,t),e.email=n=>e.check(hLe(b6e,n)),e.url=n=>e.check(bLe(v6e,n)),e.jwt=n=>e.check(ILe(O6e,n)),e.emoji=n=>e.check(vLe(x6e,n)),e.guid=n=>e.check(cB(pB,n)),e.uuid=n=>e.check(pLe(kx,n)),e.uuidv4=n=>e.check(mLe(kx,n)),e.uuidv6=n=>e.check(gLe(kx,n)),e.uuidv7=n=>e.check(yLe(kx,n)),e.nanoid=n=>e.check(xLe(w6e,n)),e.guid=n=>e.check(cB(pB,n)),e.cuid=n=>e.check(wLe(S6e,n)),e.cuid2=n=>e.check(SLe(k6e,n)),e.ulid=n=>e.check(kLe(C6e,n)),e.base64=n=>e.check(gee(wee,n)),e.base64url=n=>e.check(NLe(R6e,n)),e.xid=n=>e.check(CLe(E6e,n)),e.ksuid=n=>e.check(ELe(T6e,n)),e.ipv4=n=>e.check(TLe(_6e,n)),e.ipv6=n=>e.check(_Le(A6e,n)),e.cidrv4=n=>e.check(ALe(M6e,n)),e.cidrv6=n=>e.check(MLe(N6e,n)),e.e164=n=>e.check(RLe(I6e,n)),e.datetime=n=>e.check(s6e(n)),e.date=n=>e.check(l6e(n)),e.time=n=>e.check(u6e(n)),e.duration=n=>e.check(f6e(n))});function Q(e){return fLe(y6e,e)}const fr=be("ZodStringFormat",(e,t)=>{rr.init(e,t),xee.init(e,t)}),b6e=be("ZodEmail",(e,t)=>{bje.init(e,t),fr.init(e,t)}),pB=be("ZodGUID",(e,t)=>{gje.init(e,t),fr.init(e,t)}),kx=be("ZodUUID",(e,t)=>{yje.init(e,t),fr.init(e,t)}),v6e=be("ZodURL",(e,t)=>{vje.init(e,t),fr.init(e,t)}),x6e=be("ZodEmoji",(e,t)=>{xje.init(e,t),fr.init(e,t)}),w6e=be("ZodNanoID",(e,t)=>{wje.init(e,t),fr.init(e,t)}),S6e=be("ZodCUID",(e,t)=>{Sje.init(e,t),fr.init(e,t)}),k6e=be("ZodCUID2",(e,t)=>{kje.init(e,t),fr.init(e,t)}),C6e=be("ZodULID",(e,t)=>{Cje.init(e,t),fr.init(e,t)}),E6e=be("ZodXID",(e,t)=>{Eje.init(e,t),fr.init(e,t)}),T6e=be("ZodKSUID",(e,t)=>{Tje.init(e,t),fr.init(e,t)}),_6e=be("ZodIPv4",(e,t)=>{Rje.init(e,t),fr.init(e,t)}),A6e=be("ZodIPv6",(e,t)=>{Ije.init(e,t),fr.init(e,t)}),M6e=be("ZodCIDRv4",(e,t)=>{Oje.init(e,t),fr.init(e,t)}),N6e=be("ZodCIDRv6",(e,t)=>{Pje.init(e,t),fr.init(e,t)}),wee=be("ZodBase64",(e,t)=>{Dje.init(e,t),fr.init(e,t)});function See(e){return gee(wee,e)}const R6e=be("ZodBase64URL",(e,t)=>{jje.init(e,t),fr.init(e,t)}),I6e=be("ZodE164",(e,t)=>{Lje.init(e,t),fr.init(e,t)}),O6e=be("ZodJWT",(e,t)=>{Bje.init(e,t),fr.init(e,t)}),kee=be("ZodNumber",(e,t)=>{hee.init(e,t),Kn.init(e,t),e.gt=(r,o)=>e.check(dB(r,o)),e.gte=(r,o)=>e.check(DA(r,o)),e.min=(r,o)=>e.check(DA(r,o)),e.lt=(r,o)=>e.check(uB(r,o)),e.lte=(r,o)=>e.check(PA(r,o)),e.max=(r,o)=>e.check(PA(r,o)),e.int=r=>e.check(mB(r)),e.safe=r=>e.check(mB(r)),e.positive=r=>e.check(dB(0,r)),e.nonnegative=r=>e.check(DA(0,r)),e.negative=r=>e.check(uB(0,r)),e.nonpositive=r=>e.check(PA(0,r)),e.multipleOf=(r,o)=>e.check(fB(r,o)),e.step=(r,o)=>e.check(fB(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Qt(e){return jLe(kee,e)}const P6e=be("ZodNumberFormat",(e,t)=>{Fje.init(e,t),kee.init(e,t)});function mB(e){return LLe(P6e,e)}const D6e=be("ZodBoolean",(e,t)=>{Vje.init(e,t),Kn.init(e,t)});function Jt(e){return zLe(D6e,e)}const $6e=be("ZodNull",(e,t)=>{Hje.init(e,t),Kn.init(e,t)});function Cee(e){return BLe($6e,e)}const j6e=be("ZodAny",(e,t)=>{Uje.init(e,t),Kn.init(e,t)});function Gp(){return FLe(j6e)}const L6e=be("ZodUnknown",(e,t)=>{Gje.init(e,t),Kn.init(e,t)});function tn(){return VLe(L6e)}const z6e=be("ZodNever",(e,t)=>{qje.init(e,t),Kn.init(e,t)});function Di(e){return HLe(z6e,e)}const B6e=be("ZodArray",(e,t)=>{Zje.init(e,t),Kn.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(fk(n,r)),e.nonempty=n=>e.check(fk(1,n)),e.max=(n,r)=>e.check(yee(n,r)),e.length=(n,r)=>e.check(bee(n,r)),e.unwrap=()=>e.element});function xt(e,t){return e6e(B6e,e,t)}const TP=be("ZodObject",(e,t)=>{Wje.init(e,t),Kn.init(e,t),nn(e,"shape",()=>t.shape),e.keyof=()=>$i(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:tn()}),e.loose=()=>e.clone({...e._zod.def,catchall:tn()}),e.strict=()=>e.clone({...e._zod.def,catchall:Di()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>b$e(e,n),e.merge=n=>v$e(e,n),e.pick=n=>g$e(e,n),e.omit=n=>y$e(e,n),e.partial=(...n)=>x$e(Tee,e,n[0]),e.required=(...n)=>w$e(_ee,e,n[0])});function fe(e,t){const n={type:"object",get shape(){return du(this,"shape",e?SP(e):{}),this.shape},...Je(t)};return new TP(n)}function Un(e,t){return new TP({type:"object",get shape(){return du(this,"shape",SP(e)),this.shape},catchall:Di(),...Je(t)})}function qp(e,t){return new TP({type:"object",get shape(){return du(this,"shape",SP(e)),this.shape},catchall:tn(),...Je(t)})}const Eee=be("ZodUnion",(e,t)=>{pee.init(e,t),Kn.init(e,t),e.options=t.options});function It(e,t){return new Eee({type:"union",options:e,...Je(t)})}const F6e=be("ZodDiscriminatedUnion",(e,t)=>{Eee.init(e,t),Kje.init(e,t)});function V6e(e,t,n){return new F6e({type:"union",options:t,discriminator:e,...Je(n)})}const H6e=be("ZodIntersection",(e,t)=>{Yje.init(e,t),Kn.init(e,t)});function U6e(e,t){return new H6e({type:"intersection",left:e,right:t})}const G6e=be("ZodRecord",(e,t)=>{Jje.init(e,t),Kn.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Qc(e,t,n){return new G6e({type:"record",keyType:e,valueType:t,...Je(n)})}const GR=be("ZodEnum",(e,t)=>{Xje.init(e,t),Kn.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const i={};for(const s of r)if(n.has(s))i[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new GR({...t,checks:[],...Je(o),entries:i})},e.exclude=(r,o)=>{const i={...t.entries};for(const s of r)if(n.has(s))delete i[s];else throw new Error(`Key ${s} not found in enum`);return new GR({...t,checks:[],...Je(o),entries:i})}});function $i(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new GR({type:"enum",entries:n,...Je(t)})}const q6e=be("ZodLiteral",(e,t)=>{Qje.init(e,t),Kn.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Me(e,t){return new q6e({type:"literal",values:Array.isArray(e)?e:[e],...Je(t)})}const Z6e=be("ZodTransform",(e,t)=>{eLe.init(e,t),Kn.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(cb(i,n.value,t));else{const s=i;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(cb(s))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(i=>(n.value=i,n)):(n.value=o,n)}});function W6e(e){return new Z6e({type:"transform",transform:e})}const Tee=be("ZodOptional",(e,t)=>{tLe.init(e,t),Kn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Pt(e){return new Tee({type:"optional",innerType:e})}const K6e=be("ZodNullable",(e,t)=>{nLe.init(e,t),Kn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gB(e){return new K6e({type:"nullable",innerType:e})}const Y6e=be("ZodDefault",(e,t)=>{rLe.init(e,t),Kn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function J6e(e,t){return new Y6e({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():eee(t)}})}const X6e=be("ZodPrefault",(e,t)=>{oLe.init(e,t),Kn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Q6e(e,t){return new X6e({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():eee(t)}})}const _ee=be("ZodNonOptional",(e,t)=>{iLe.init(e,t),Kn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function e9e(e,t){return new _ee({type:"nonoptional",innerType:e,...Je(t)})}const t9e=be("ZodCatch",(e,t)=>{sLe.init(e,t),Kn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function n9e(e,t){return new t9e({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const r9e=be("ZodPipe",(e,t)=>{aLe.init(e,t),Kn.init(e,t),e.in=t.in,e.out=t.out});function yB(e,t){return new r9e({type:"pipe",in:e,out:t})}const o9e=be("ZodReadonly",(e,t)=>{lLe.init(e,t),Kn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function i9e(e){return new o9e({type:"readonly",innerType:e})}const s9e=be("ZodLazy",(e,t)=>{cLe.init(e,t),Kn.init(e,t),e.unwrap=()=>e._zod.def.getter()});function Aee(e){return new s9e({type:"lazy",getter:e})}const _P=be("ZodCustom",(e,t)=>{uLe.init(e,t),Kn.init(e,t)});function Mee(e,t){return t6e(_P,e??(()=>!0),t)}function a9e(e,t={}){return n6e(_P,e,t)}function l9e(e){return r6e(e)}function Td(e,t={error:`Input not instance of ${e.name}`}){const n=new _P({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...Je(t)});return n._zod.bag.Class=e,n}var gt;gt||(gt={});function Gi(e){if(e.target!=="openAi")return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?YQ(t,e.currentPath):t.join("/")}}function c9e(e,t){const n={type:"array"};return e.type?._def&&e.type?._def?.typeName!==gt.ZodAny&&(n.items=an(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&hn(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&hn(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(hn(n,"minItems",e.exactLength.value,e.exactLength.message,t),hn(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function u9e(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?hn(n,"minimum",r.value,r.message,t):hn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),hn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?hn(n,"maximum",r.value,r.message,t):hn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),hn(n,"maximum",r.value,r.message,t));break;case"multipleOf":hn(n,"multipleOf",r.value,r.message,t);break}return n}function d9e(){return{type:"boolean"}}function Nee(e,t){return an(e.type._def,t)}const f9e=(e,t)=>an(e.innerType._def,t);function Ree(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((o,i)=>Ree(e,t,o))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return h9e(e,t)}}const h9e=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":hn(n,"minimum",r.value,r.message,t);break;case"max":hn(n,"maximum",r.value,r.message,t);break}return n};function p9e(e,t){return{...an(e.innerType._def,t),default:e.defaultValue()}}function m9e(e,t){return t.effectStrategy==="input"?an(e.schema._def,t):Gi(t)}function g9e(e){return{type:"string",enum:Array.from(e.values)}}const y9e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function b9e(e,t){const n=[an(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),an(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const o=[];return n.forEach(i=>{if(y9e(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...l}=i;s=l}else r=void 0;o.push(s)}}),o.length?{allOf:o,...r}:void 0}function v9e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let $A;const Da={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>($A===void 0&&($A=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),$A),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Iee(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":hn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":hn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":$a(n,"email",r.message,t);break;case"format:idn-email":$a(n,"idn-email",r.message,t);break;case"pattern:zod":ui(n,Da.email,r.message,t);break}break;case"url":$a(n,"uri",r.message,t);break;case"uuid":$a(n,"uuid",r.message,t);break;case"regex":ui(n,r.regex,r.message,t);break;case"cuid":ui(n,Da.cuid,r.message,t);break;case"cuid2":ui(n,Da.cuid2,r.message,t);break;case"startsWith":ui(n,RegExp(`^${jA(r.value,t)}`),r.message,t);break;case"endsWith":ui(n,RegExp(`${jA(r.value,t)}$`),r.message,t);break;case"datetime":$a(n,"date-time",r.message,t);break;case"date":$a(n,"date",r.message,t);break;case"time":$a(n,"time",r.message,t);break;case"duration":$a(n,"duration",r.message,t);break;case"length":hn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),hn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{ui(n,RegExp(jA(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&$a(n,"ipv4",r.message,t),r.version!=="v4"&&$a(n,"ipv6",r.message,t);break}case"base64url":ui(n,Da.base64url,r.message,t);break;case"jwt":ui(n,Da.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&ui(n,Da.ipv4Cidr,r.message,t),r.version!=="v4"&&ui(n,Da.ipv6Cidr,r.message,t);break}case"emoji":ui(n,Da.emoji(),r.message,t);break;case"ulid":{ui(n,Da.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{$a(n,"binary",r.message,t);break}case"contentEncoding:base64":{hn(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{ui(n,Da.base64,r.message,t);break}}break}case"nanoid":ui(n,Da.nanoid,r.message,t)}return n}function jA(e,t){return t.patternStrategy==="escape"?w9e(e):e}const x9e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function w9e(e){let t="";for(let n=0;n<e.length;n++)x9e.has(e[n])||(t+="\\"),t+=e[n];return t}function $a(e,t,n,r){e.format||e.anyOf?.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):hn(e,"format",t,n,r)}function ui(e,t,n,r){e.pattern||e.allOf?.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:bB(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):hn(e,"pattern",bB(t,r),n,r)}function bB(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let o="",i=!1,s=!1,a=!1;for(let l=0;l<r.length;l++){if(i){o+=r[l],i=!1;continue}if(n.i){if(s){if(r[l].match(/[a-z]/)){a?(o+=r[l],o+=`${r[l-2]}-${r[l]}`.toUpperCase(),a=!1):r[l+1]==="-"&&r[l+2]?.match(/[a-z]/)?(o+=r[l],a=!0):o+=`${r[l]}${r[l].toUpperCase()}`;continue}}else if(r[l].match(/[a-z]/)){o+=`[${r[l]}${r[l].toUpperCase()}]`;continue}}if(n.m){if(r[l]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(r[l]==="$"){o+=`($|(?=[\r
]))`;continue}}if(n.s&&r[l]==="."){o+=s?`${r[l]}\r
`:`[${r[l]}\r
]`;continue}o+=r[l],r[l]==="\\"?i=!0:s&&r[l]==="]"?s=!1:!s&&r[l]==="["&&(s=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function Oee(e,t){if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&e.keyType?._def.typeName===gt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,o)=>({...r,[o]:an(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",o]})??Gi(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:an(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===gt.ZodString&&e.keyType._def.checks?.length){const{type:r,...o}=Iee(e.keyType._def,t);return{...n,propertyNames:o}}else{if(e.keyType?._def.typeName===gt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===gt.ZodBranded&&e.keyType._def.type._def.typeName===gt.ZodString&&e.keyType._def.type._def.checks?.length){const{type:r,...o}=Nee(e.keyType._def,t);return{...n,propertyNames:o}}}return n}function S9e(e,t){if(t.mapStrategy==="record")return Oee(e,t);const n=an(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Gi(t),r=an(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Gi(t);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function k9e(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),o=Array.from(new Set(r.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:r}}function C9e(e){return e.target==="openAi"?void 0:{not:Gi({...e,currentPath:[...e.currentPath,"not"]})}}function E9e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const hk={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function T9e(e,t){if(t.target==="openApi3")return vB(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in hk&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((o,i)=>{const s=hk[i._def.typeName];return s&&!o.includes(s)?[...o,s]:o},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((o,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...o,s];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(r.length===n.length){const o=r.filter((i,s,a)=>a.indexOf(i)===s);return{type:o.length>1?o:o[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,o)=>[...r,...o._def.values.filter(i=>!r.includes(i))],[])};return vB(e,t)}const vB=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,o)=>an(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${o}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function _9e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:hk[e.innerType._def.typeName],nullable:!0}:{type:[hk[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=an(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=an(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function A9e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",KQ(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?hn(n,"minimum",r.value,r.message,t):hn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),hn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?hn(n,"maximum",r.value,r.message,t):hn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),hn(n,"maximum",r.value,r.message,t));break;case"multipleOf":hn(n,"multipleOf",r.value,r.message,t);break}return n}function M9e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},o=[],i=e.shape();for(const a in i){let l=i[a];if(l===void 0||l._def===void 0)continue;let c=R9e(l);c&&n&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=an(l._def,{...t,currentPath:[...t.currentPath,"properties",a],propertyPath:[...t.currentPath,"properties",a]});u!==void 0&&(r.properties[a]=u,c||o.push(a))}o.length&&(r.required=o);const s=N9e(e,t);return s!==void 0&&(r.additionalProperties=s),r}function N9e(e,t){if(e.catchall._def.typeName!=="ZodNever")return an(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function R9e(e){try{return e.isOptional()}catch{return!0}}const I9e=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return an(e.innerType._def,t);const n=an(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Gi(t)},n]}:Gi(t)},O9e=(e,t)=>{if(t.pipeStrategy==="input")return an(e.in._def,t);if(t.pipeStrategy==="output")return an(e.out._def,t);const n=an(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=an(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(o=>o!==void 0)}};function P9e(e,t){return an(e.type._def,t)}function D9e(e,t){const r={type:"array",uniqueItems:!0,items:an(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&hn(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&hn(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function $9e(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>an(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:an(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>an(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function j9e(e){return{not:Gi(e)}}function L9e(e){return Gi(e)}const z9e=(e,t)=>an(e.innerType._def,t),B9e=(e,t,n)=>{switch(t){case gt.ZodString:return Iee(e,n);case gt.ZodNumber:return A9e(e,n);case gt.ZodObject:return M9e(e,n);case gt.ZodBigInt:return u9e(e,n);case gt.ZodBoolean:return d9e();case gt.ZodDate:return Ree(e,n);case gt.ZodUndefined:return j9e(n);case gt.ZodNull:return E9e(n);case gt.ZodArray:return c9e(e,n);case gt.ZodUnion:case gt.ZodDiscriminatedUnion:return T9e(e,n);case gt.ZodIntersection:return b9e(e,n);case gt.ZodTuple:return $9e(e,n);case gt.ZodRecord:return Oee(e,n);case gt.ZodLiteral:return v9e(e,n);case gt.ZodEnum:return g9e(e);case gt.ZodNativeEnum:return k9e(e);case gt.ZodNullable:return _9e(e,n);case gt.ZodOptional:return I9e(e,n);case gt.ZodMap:return S9e(e,n);case gt.ZodSet:return D9e(e,n);case gt.ZodLazy:return()=>e.getter()._def;case gt.ZodPromise:return P9e(e,n);case gt.ZodNaN:case gt.ZodNever:return C9e(n);case gt.ZodEffects:return m9e(e,n);case gt.ZodAny:return Gi(n);case gt.ZodUnknown:return L9e(n);case gt.ZodDefault:return p9e(e,n);case gt.ZodBranded:return Nee(e,n);case gt.ZodReadonly:return z9e(e,n);case gt.ZodCatch:return f9e(e,n);case gt.ZodPipeline:return O9e(e,n);case gt.ZodFunction:case gt.ZodVoid:case gt.ZodSymbol:return;default:return(r=>{})()}};function an(e,t,n=!1){const r=t.seen.get(e);if(t.override){const a=t.override?.(e,t,r,n);if(a!==l$e)return a}if(r&&!n){const a=F9e(r,t);if(a!==void 0)return a}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const i=B9e(e,e.typeName,t),s=typeof i=="function"?an(i(),t):i;if(s&&V9e(e,t,s),t.postProcess){const a=t.postProcess(s,e,t);return o.jsonSchema=s,a}return o.jsonSchema=s,s}const F9e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:YQ(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Gi(t)):t.$refStrategy==="seen"?Gi(t):void 0}},V9e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Pee=(e,t)=>{const n=u$e(t);let r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[c,u])=>({...l,[c]:an(u._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??Gi(n)}),{}):void 0;const o=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=an(e._def,o===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,o]},!1)??Gi(n),s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=o===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,o].join("/"),[n.definitionPath]:{...r,[o]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};var ub={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},db={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},fb={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},hb={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},pb={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},H9e=[ub,db,fb,hb,pb];ub.code+"",db.code+"",fb.code+"",hb.code+"",pb.code+"";ub.name+"",ub.code,db.name+"",db.code,fb.name+"",fb.code,hb.name+"",hb.code,pb.name+"",pb.code;H9e.map(e=>e.code);function U9e(e){const t=["ROOT"];let n=-1,r=null;function o(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function s(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":o(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(r,l+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l)):n=l;break}}}let a=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}function Dee(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=K7({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=K7({text:U9e(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var G9e={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},q9e={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Z9e={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},W9e={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},K9e={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Y9e={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},J9e={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},X9e={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Q9e={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},eze={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},tze={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},nze={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},rze={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},oze={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},ize={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},sze={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},bE=[G9e,q9e,Z9e,W9e,K9e,Y9e,J9e,X9e,Q9e,eze,tze,nze,rze,oze,ize,sze];Object.fromEntries(bE.map(e=>[e.code,e]));Object.fromEntries(bE.map(e=>[e.name,e.code]));bE.map(e=>e.code);function $ee(e,t){const n=bE.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function pk(e,t){if(e===t)return!0;if(e==null||t==null)return!1;if(typeof e!="object"&&typeof t!="object")return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!pk(e[o],t[o]))return!1;return!0}const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!r.includes(o)||!pk(e[o],t[o]))return!1;return!0}function aze(e,t){var n;const r=(n=void 0)!=null?n:!1;return AP(Pee(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:o=>{const i=e.safeParse(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var qR=Symbol.for("vercel.ai.schema");function AP(e,{validate:t}={}){return{[qR]:!0,_type:void 0,[uk]:!0,jsonSchema:e,validate:t}}function lze(e){return typeof e=="object"&&e!==null&&qR in e&&e[qR]===!0&&"jsonSchema"in e&&"validate"in e}function ZR(e){return lze(e)?e:aze(e)}var cze=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Df="1.9.0",xB=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function uze(e){var t=new Set([e]),n=new Set,r=e.match(xB);if(!r)return function(){return!1};var o={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(o.prerelease!=null)return function(l){return l===e};function i(a){return n.add(a),!1}function s(a){return t.add(a),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(xB);if(!c)return i(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||o.major!==u.major?i(l):o.major===0?o.minor===u.minor&&o.patch<=u.patch?s(l):i(l):o.minor<=u.minor?s(l):i(l)}}var dze=uze(Df),fze=Df.split(".")[0],mb=Symbol.for("opentelemetry.js.api."+fze),gb=cze;function MP(e,t,n,r){var o;r===void 0&&(r=!1);var i=gb[mb]=(o=gb[mb])!==null&&o!==void 0?o:{version:Df};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==Df){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Df);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Df+"."),!0}function yb(e){var t,n,r=(t=gb[mb])===null||t===void 0?void 0:t.version;if(!(!r||!dze(r)))return(n=gb[mb])===null||n===void 0?void 0:n[e]}function NP(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Df+".");var n=gb[mb];n&&delete n[e]}var hze=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},pze=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},mze=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ey("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ey("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ey("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ey("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ey("verbose",this._namespace,t)},e})();function Ey(e,t,n){var r=yb("diag");if(r)return n.unshift(t),r[e].apply(r,pze([],hze(n),!1))}var bs;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(bs||(bs={}));function gze(e,t){e<bs.NONE?e=bs.NONE:e>bs.ALL&&(e=bs.ALL),t=t||{};function n(r,o){var i=t[r];return typeof i=="function"&&e>=o?i.bind(t):function(){}}return{error:n("error",bs.ERROR),warn:n("warn",bs.WARN),info:n("info",bs.INFO),debug:n("debug",bs.DEBUG),verbose:n("verbose",bs.VERBOSE)}}var yze=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},bze=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},vze="diag",mk=(function(){function e(){function t(o){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=yb("diag");if(a)return a[o].apply(a,bze([],yze(i),!1))}}var n=this,r=function(o,i){var s,a,l;if(i===void 0&&(i={logLevel:bs.INFO}),o===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof i=="number"&&(i={logLevel:i});var u=yb("diag"),f=gze((a=i.logLevel)!==null&&a!==void 0?a:bs.INFO,o);if(u&&!i.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+p),f.warn("Current logger will overwrite one already registered from "+p)}return MP("diag",f,n,!0)};n.setLogger=r,n.disable=function(){NP(vze,n)},n.createComponentLogger=function(o){return new mze(o)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function xze(e){return Symbol.for(e)}var wze=(function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,o){var i=new e(n._currentContext);return i._currentContext.set(r,o),i},n.deleteValue=function(r){var o=new e(n._currentContext);return o._currentContext.delete(r),o}}return e})(),Sze=new wze,kze=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Cze=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Eze=(function(){function e(){}return e.prototype.active=function(){return Sze},e.prototype.with=function(t,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return n.call.apply(n,Cze([r],kze(o),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})(),Tze=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},_ze=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},LA="context",Aze=new Eze,jee=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return MP(LA,t,mk.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var o,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(o=this._getContextManager()).with.apply(o,_ze([t,n,r],Tze(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return yb(LA)||Aze},e.prototype.disable=function(){this._getContextManager().disable(),NP(LA,mk.instance())},e})(),WR;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(WR||(WR={}));var Lee="0000000000000000",zee="00000000000000000000000000000000",Mze={traceId:zee,spanId:Lee,traceFlags:WR.NONE},d0=(function(){function e(t){t===void 0&&(t=Mze),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e})(),RP=xze("OpenTelemetry Context Key SPAN");function IP(e){return e.getValue(RP)||void 0}function Nze(){return IP(jee.getInstance().active())}function OP(e,t){return e.setValue(RP,t)}function Rze(e){return e.deleteValue(RP)}function Ize(e,t){return OP(e,new d0(t))}function Bee(e){var t;return(t=IP(e))===null||t===void 0?void 0:t.spanContext()}var Oze=/^([0-9a-f]{32})$/i,Pze=/^[0-9a-f]{16}$/i;function Dze(e){return Oze.test(e)&&e!==zee}function $ze(e){return Pze.test(e)&&e!==Lee}function Fee(e){return Dze(e.traceId)&&$ze(e.spanId)}function jze(e){return new d0(e)}var zA=jee.getInstance(),Vee=(function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=zA.active());var o=!!n?.root;if(o)return new d0;var i=r&&Bee(r);return Lze(i)&&Fee(i)?new d0(i):new d0},e.prototype.startActiveSpan=function(t,n,r,o){var i,s,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(i=n,a=r):(i=n,s=r,a=o);var l=s??zA.active(),c=this.startSpan(t,i,l),u=OP(l,c);return zA.with(u,a,void 0,c)}},e})();function Lze(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var zze=new Vee,Bze=(function(){function e(t,n,r,o){this._provider=t,this.name=n,this.version=r,this.options=o}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):zze},e})(),Fze=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new Vee},e})(),Vze=new Fze,wB=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){var o;return(o=this.getDelegateTracer(t,n,r))!==null&&o!==void 0?o:new Bze(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Vze},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(t,n,r)},e})(),Dm;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Dm||(Dm={}));var BA="trace",Hze=(function(){function e(){this._proxyTracerProvider=new wB,this.wrapSpanContext=jze,this.isSpanContextValid=Fee,this.deleteSpan=Rze,this.getSpan=IP,this.getActiveSpan=Nze,this.getSpanContext=Bee,this.setSpan=OP,this.setSpanContext=Ize}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=MP(BA,this._proxyTracerProvider,mk.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return yb(BA)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){NP(BA,mk.instance()),this._proxyTracerProvider=new wB},e})(),Hee=Hze.getInstance(),Uze=Object.defineProperty,PP=(e,t)=>{for(var n in t)Uze(e,n,{get:t[n],enumerable:!0})};function vE(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function Gze(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[o,i]of Object.entries(e))r[o]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function qze({response:e,status:t,statusText:n,headers:r,stream:o}){e.writeHead(t??200,n,r);const i=o.getReader();(async()=>{try{for(;;){const{done:a,value:l}=await i.read();if(a)break;e.write(l)}}catch(a){throw a}finally{e.end()}})()}var Uee=class extends Pn{constructor(){super({name:"AI_UnsupportedModelVersionError",message:'Unsupported model version. AI SDK 4 only supports models that implement specification version "v1". Please upgrade to AI SDK 5 to use this model.'})}},Gee="AI_InvalidArgumentError",qee=`vercel.ai.error.${Gee}`,Zze=Symbol.for(qee),Zee,Gn=class extends Pn{constructor({parameter:t,value:n,message:r}){super({name:Gee,message:`Invalid argument for parameter ${t}: ${r}`}),this[Zee]=!0,this.parameter=t,this.value=n}static isInstance(t){return Pn.hasMarker(t,qee)}};Zee=Zze;var Wee="AI_RetryError",Kee=`vercel.ai.error.${Wee}`,Wze=Symbol.for(Kee),Yee,KR=class extends Pn{constructor({message:t,reason:n,errors:r}){super({name:Wee,message:t}),this[Yee]=!0,this.reason=n,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return Pn.hasMarker(t,Kee)}};Yee=Wze;var Kze=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>Jee(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function Jee(e,{maxRetries:t,delayInMs:n,backoffFactor:r},o=[]){try{return await e()}catch(i){if(L5e(i)||t===0)throw i;const s=j5e(i),a=[...o,i],l=a.length;if(l>t)throw new KR({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:a});if(i instanceof Error&&yQ.isInstance(i)&&i.isRetryable===!0&&l<=t)return await $5e(n),Jee(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},a);throw l===1?i:new KR({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:a})}}function Xee({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Gn({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Gn({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:Kze({maxRetries:t})}}function f0({operationId:e,telemetry:t}){return{"operation.name":`${e}${t?.functionId!=null?` ${t.functionId}`:""}`,"resource.name":t?.functionId,"ai.operationId":e,"ai.telemetry.functionId":t?.functionId}}function Qee({model:e,settings:t,telemetry:n,headers:r}){var o;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,a])=>(i[`ai.settings.${s}`]=a,i),{}),...Object.entries((o=n?.metadata)!=null?o:{}).reduce((i,[s,a])=>(i[`ai.telemetry.metadata.${s}`]=a,i),{}),...Object.entries(r??{}).reduce((i,[s,a])=>(a!==void 0&&(i[`ai.request.headers.${s}`]=a),i),{})}}var Yze={startSpan(){return Cx},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Cx);if(typeof n=="function")return n(Cx);if(typeof r=="function")return r(Cx)}},Cx={spanContext(){return Jze},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Jze={traceId:"",spanId:"",traceFlags:0};function ete({isEnabled:e=!1,tracer:t}={}){return e?t||Hee.getTracer("ai"):Yze}function h0({name:e,tracer:t,attributes:n,fn:r,endWhenDone:o=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return o&&i.end(),s}catch(s){try{Xze(i,s)}finally{i.end()}throw s}})}function Xze(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Dm.ERROR,message:t.message})):e.setStatus({code:Dm.ERROR})}function Il({telemetry:e,attributes:t}){return e?.isEnabled!==!0?{}:Object.entries(t).reduce((n,[r,o])=>{if(o===void 0)return n;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if(e?.recordInputs===!1)return n;const i=o.input();return i===void 0?n:{...n,[r]:i}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if(e?.recordOutputs===!1)return n;const i=o.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:o}},{})}var Qze=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],e8e=e=>{const t=typeof e=="string"?DQ(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function t8e(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?e8e(e):e}function n8e({data:e,signatures:t}){const n=t8e(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((o,i)=>n[i]===o))return r.mimeType}var tte="AI_NoObjectGeneratedError",nte=`vercel.ai.error.${tte}`,r8e=Symbol.for(nte),rte,jc=class extends Pn{constructor({message:t="No object generated.",cause:n,text:r,response:o,usage:i,finishReason:s}){super({name:tte,message:t,cause:n}),this[rte]=!0,this.text=r,this.response=o,this.usage=i,this.finishReason=s}static isInstance(t){return Pn.hasMarker(t,nte)}};rte=r8e;var ote="AI_DownloadError",ite=`vercel.ai.error.${ote}`,o8e=Symbol.for(ite),ste,FA=class extends Pn{constructor({url:t,statusCode:n,statusText:r,cause:o,message:i=o==null?`Failed to download ${t}: ${n} ${r}`:`Failed to download ${t}: ${o}`}){super({name:ote,message:i,cause:o}),this[ste]=!0,this.url=t,this.statusCode=n,this.statusText=r}static isInstance(t){return Pn.hasMarker(t,ite)}};ste=o8e;async function i8e({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new FA({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mimeType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw FA.isInstance(r)?r:new FA({url:n,cause:r})}}var ate="AI_InvalidDataContentError",lte=`vercel.ai.error.${ate}`,s8e=Symbol.for(lte),cte,SB=class extends Pn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:ate,message:n,cause:t}),this[cte]=!0,this.content=e}static isInstance(e){return Pn.hasMarker(e,lte)}};cte=s8e;var ute=It([Q(),Td(Uint8Array),Td(ArrayBuffer),Mee(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function DP(e){return typeof e=="string"?e:e instanceof ArrayBuffer?G7(new Uint8Array(e)):G7(e)}function gk(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return DQ(e)}catch(t){throw new SB({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new SB({content:e})}function a8e(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var dte="AI_InvalidMessageRoleError",fte=`vercel.ai.error.${dte}`,l8e=Symbol.for(fte),hte,c8e=class extends Pn{constructor({role:t,message:n=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:dte,message:n}),this[hte]=!0,this.role=t}static isInstance(t){return Pn.hasMarker(t,fte)}};hte=l8e;function u8e(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function yk({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=i8e}){const o=await f8e(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>d8e(i,o))]}function d8e(e,t){var n,r,o,i,s,a;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>h8e(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var u;const f=(u=c.providerOptions)!=null?u:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:DP(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:f};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:f};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:f};case"text":return{type:"text",text:c.text,providerMetadata:f};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:f}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var u;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(u=c.providerOptions)!=null?u:c.experimental_providerMetadata}}),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};default:{const c=l;throw new c8e({role:c})}}}async function f8e(e,t,n,r){const o=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(o.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:a})=>[s.toString(),a]))}function h8e(e,t){var n,r,o,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,a,l,c;const u=e.type;switch(u){case"image":a=e.image;break;case"file":a=e.data;break;default:throw new Error(`Unsupported part type: ${u}`)}try{l=typeof a=="string"?new URL(a):a}catch{l=a}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:f,base64Content:p}=u8e(l.toString());if(f==null||p==null)throw new Error(`Invalid data URL format in part ${u}`);s=f,c=gk(p)}else{const f=t[l.toString()];f?(c=f.data,s??(s=f.mimeType)):c=l}else c=gk(l);switch(u){case"image":return c instanceof Uint8Array&&(s=(r=n8e({data:c,signatures:Qze}))!=null?r:s),{type:"image",image:c,mimeType:s,providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?DP(c):c,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function bk({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:o,frequencyPenalty:i,stopSequences:s,seed:a}){if(e!=null){if(!Number.isInteger(e))throw new Gn({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Gn({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Gn({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Gn({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Gn({parameter:"topK",value:r,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new Gn({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Gn({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(a!=null&&!Number.isInteger(a))throw new Gn({parameter:"seed",value:a,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:o,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:a}}function kB(e){var t,n,r;const o=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))o.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");o.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let a,l,c;try{[a,l]=i.url.split(","),c=a.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))o.push({type:"image",image:gk(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))o.push({type:"text",text:a8e(gk(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");o.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return o}var pte="AI_MessageConversionError",mte=`vercel.ai.error.${pte}`,p8e=Symbol.for(mte),gte,VA=class extends Pn{constructor({originalMessage:e,message:t}){super({name:pte,message:t}),this[gte]=!0,this.originalMessage=e}static isInstance(e){return Pn.hasMarker(e,mte)}};gte=p8e;function m8e(e,t){var n,r;const o=(n=t?.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const a=e[s],l=s===e.length-1,{role:c,content:u,experimental_attachments:f}=a;switch(c){case"system":{i.push({role:"system",content:u});break}case"user":{if(a.parts==null)i.push({role:"user",content:f?[{type:"text",text:u},...kB(f)]:u});else{const p=a.parts.filter(m=>m.type==="text").map(m=>({type:"text",text:m.text}));i.push({role:"user",content:f?[...p,...kB(f)]:p})}break}case"assistant":{if(a.parts!=null){let y=function(){const E=[];for(const A of S)switch(A.type){case"file":case"text":{E.push(A);break}case"reasoning":{for(const M of A.details)switch(M.type){case"text":E.push({type:"reasoning",text:M.text,signature:M.signature});break;case"redacted":E.push({type:"redacted-reasoning",data:M.data});break}break}case"tool-invocation":E.push({type:"tool-call",toolCallId:A.toolInvocation.toolCallId,toolName:A.toolInvocation.toolName,args:A.toolInvocation.args});break;default:{const M=A;throw new Error(`Unsupported part: ${M}`)}}i.push({role:"assistant",content:E});const T=S.filter(A=>A.type==="tool-invocation").map(A=>A.toolInvocation);T.length>0&&i.push({role:"tool",content:T.map(A=>{if(!("result"in A))throw new VA({originalMessage:a,message:"ToolInvocation must have a result: "+JSON.stringify(A)});const{toolCallId:M,toolName:R,result:O}=A,I=o[R];return I?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:M,toolName:R,result:I.experimental_toToolResultContent(O),experimental_content:I.experimental_toToolResultContent(O)}:{type:"tool-result",toolCallId:M,toolName:R,result:O}})}),S=[],w=!1,b++},b=0,w=!1,S=[];for(const E of a.parts)switch(E.type){case"text":{w&&y(),S.push(E);break}case"file":case"reasoning":{S.push(E);break}case"tool-invocation":{((r=E.toolInvocation.step)!=null?r:0)!==b&&y(),S.push(E),w=!0;break}}y();break}const p=a.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:u});break}const m=p.reduce((y,b)=>{var w;return Math.max(y,(w=b.step)!=null?w:0)},0);for(let y=0;y<=m;y++){const b=p.filter(w=>{var S;return((S=w.step)!=null?S:0)===y});b.length!==0&&(i.push({role:"assistant",content:[...l&&u&&y===0?[{type:"text",text:u}]:[],...b.map(({toolCallId:w,toolName:S,args:E})=>({type:"tool-call",toolCallId:w,toolName:S,args:E}))]}),i.push({role:"tool",content:b.map(w=>{if(!("result"in w))throw new VA({originalMessage:a,message:"ToolInvocation must have a result: "+JSON.stringify(w)});const{toolCallId:S,toolName:E,result:T}=w,A=o[E];return A?.experimental_toToolResultContent!=null?{type:"tool-result",toolCallId:S,toolName:E,result:A.experimental_toToolResultContent(T),experimental_content:A.experimental_toToolResultContent(T)}:{type:"tool-result",toolCallId:S,toolName:E,result:T}})}))}u&&!l&&i.push({role:"assistant",content:u});break}case"data":break;default:{const p=c;throw new VA({originalMessage:a,message:`Unsupported role: ${p}`})}}}return i}var YR=Aee(()=>It([Cee(),Q(),Qt(),Jt(),Qc(Q(),YR),xt(YR)])),Cr=Qc(Q(),Qc(Q(),YR)),g8e=xt(It([fe({type:Me("text"),text:Q()}),fe({type:Me("image"),data:Q(),mimeType:Q().optional()})])),yte=fe({type:Me("text"),text:Q(),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),y8e=fe({type:Me("image"),image:It([ute,Td(URL)]),mimeType:Q().optional(),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),bte=fe({type:Me("file"),data:It([ute,Td(URL)]),filename:Q().optional(),mimeType:Q(),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),b8e=fe({type:Me("reasoning"),text:Q(),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),v8e=fe({type:Me("redacted-reasoning"),data:Q(),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),x8e=fe({type:Me("tool-call"),toolCallId:Q(),toolName:Q(),args:tn(),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),w8e=fe({type:Me("tool-result"),toolCallId:Q(),toolName:Q(),result:tn(),content:g8e.optional(),isError:Jt().optional(),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),S8e=fe({role:Me("system"),content:Q(),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),k8e=fe({role:Me("user"),content:It([Q(),xt(It([yte,y8e,bte]))]),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),C8e=fe({role:Me("assistant"),content:It([Q(),xt(It([yte,bte,b8e,v8e,x8e]))]),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),E8e=fe({role:Me("tool"),content:xt(w8e),providerOptions:Cr.optional(),experimental_providerMetadata:Cr.optional()}),T8e=It([S8e,k8e,C8e,E8e]);function vk({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Yu({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Yu({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Yu({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Yu({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const r=_8e(e.messages)==="ui-messages"?m8e(e.messages,{tools:t}):e.messages;if(r.length===0)throw new Yu({prompt:e,message:"messages must not be empty"});const o=Im({value:r,schema:xt(T8e)});if(!o.success)throw new Yu({prompt:e,message:["message must be a CoreMessage or a UI message",`Validation error: ${o.error.message}`].join(`
`),cause:o.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function _8e(e){if(!Array.isArray(e))throw new Yu({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received non-array value: ${JSON.stringify(e)}`].join(`
`),cause:e});if(e.length===0)return"messages";const t=e.map(A8e);if(t.some(r=>r==="has-ui-specific-parts"))return"ui-messages";const n=t.findIndex(r=>r!=="has-core-specific-parts"&&r!=="message");if(n===-1)return"messages";throw new Yu({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received message of type: "${t[n]}" at index ${n}`,`messages[${n}]: ${JSON.stringify(e[n])}`].join(`
`),cause:e})}function A8e(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}function yf({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}var M8e="JSON schema:",N8e="You MUST answer with a JSON object that matches the JSON schema above.",R8e="You MUST answer with JSON.";function bb({prompt:e,schema:t,schemaPrefix:n=t!=null?M8e:void 0,schemaSuffix:r=t!=null?N8e:R8e}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(o=>o!=null).join(`
`)}function Sw(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:o}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:o}}}},t}var I8e={type:"no-schema",jsonSchema:void 0,validatePartialResult({value:e,textDelta:t}){return{success:!0,value:{partial:e,textDelta:t}}},validateFinalResult(e,t){return e===void 0?{success:!1,error:new jc({message:"No object generated: response did not match schema.",text:t.text,response:t.response,usage:t.usage,finishReason:t.finishReason})}:{success:!0,value:e}},createElementStream(){throw new lk({functionality:"element streams in no-schema mode"})}},O8e=e=>({type:"object",jsonSchema:e.jsonSchema,validatePartialResult({value:t,textDelta:n}){return{success:!0,value:{partial:t,textDelta:n}}},validateFinalResult(t){return Im({value:t,schema:e})},createElementStream(){throw new lk({functionality:"element streams in object mode"})}}),P8e=e=>{const{$schema:t,...n}=e.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:n}},required:["elements"],additionalProperties:!1},validatePartialResult({value:r,latestObject:o,isFirstDelta:i,isFinalDelta:s}){var a;if(!BR(r)||!H7(r.elements))return{success:!1,error:new ph({value:r,cause:"value must be an object that contains an array of elements"})};const l=r.elements,c=[];for(let p=0;p<l.length;p++){const m=l[p],y=Im({value:m,schema:e});if(!(p===l.length-1&&!s)){if(!y.success)return y;c.push(y.value)}}const u=(a=o?.length)!=null?a:0;let f="";return i&&(f+="["),u>0&&(f+=","),f+=c.slice(u).map(p=>JSON.stringify(p)).join(","),s&&(f+="]"),{success:!0,value:{partial:c,textDelta:f}}},validateFinalResult(r){if(!BR(r)||!H7(r.elements))return{success:!1,error:new ph({value:r,cause:"value must be an object that contains an array of elements"})};const o=r.elements;for(const i of o){const s=Im({value:i,schema:e});if(!s.success)return s}return{success:!0,value:o}},createElementStream(r){let o=0;return Sw(r.pipeThrough(new TransformStream({transform(i,s){switch(i.type){case"object":{const a=i.object;for(;o<a.length;o++)s.enqueue(a[o]);break}case"text-delta":case"finish":case"error":break;default:{const a=i;throw new Error(`Unsupported chunk type: ${a}`)}}}})))}}},D8e=e=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},validateFinalResult(t){if(!BR(t)||typeof t.result!="string")return{success:!1,error:new ph({value:t,cause:'value must be an object that contains a string in the "result" property.'})};const n=t.result;return e.includes(n)?{success:!0,value:n}:{success:!1,error:new ph({value:t,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new lk({functionality:"partial results in enum mode"})},createElementStream(){throw new lk({functionality:"element streams in enum mode"})}});function vte({output:e,schema:t,enumValues:n}){switch(e){case"object":return O8e(ZR(t));case"array":return P8e(ZR(t));case"enum":return D8e(n);case"no-schema":return I8e;default:{const r=e;throw new Error(`Unsupported output: ${r}`)}}}function xte({output:e,mode:t,schema:n,schemaName:r,schemaDescription:o,enumValues:i}){if(e!=null&&e!=="object"&&e!=="array"&&e!=="enum"&&e!=="no-schema")throw new Gn({parameter:"output",value:e,message:"Invalid output type."});if(e==="no-schema"){if(t==="auto"||t==="tool")throw new Gn({parameter:"mode",value:t,message:'Mode must be "json" for no-schema output.'});if(n!=null)throw new Gn({parameter:"schema",value:n,message:"Schema is not supported for no-schema output."});if(o!=null)throw new Gn({parameter:"schemaDescription",value:o,message:"Schema description is not supported for no-schema output."});if(r!=null)throw new Gn({parameter:"schemaName",value:r,message:"Schema name is not supported for no-schema output."});if(i!=null)throw new Gn({parameter:"enumValues",value:i,message:"Enum values are not supported for no-schema output."})}if(e==="object"){if(n==null)throw new Gn({parameter:"schema",value:n,message:"Schema is required for object output."});if(i!=null)throw new Gn({parameter:"enumValues",value:i,message:"Enum values are not supported for object output."})}if(e==="array"){if(n==null)throw new Gn({parameter:"schema",value:n,message:"Element schema is required for array output."});if(i!=null)throw new Gn({parameter:"enumValues",value:i,message:"Enum values are not supported for array output."})}if(e==="enum"){if(n!=null)throw new Gn({parameter:"schema",value:n,message:"Schema is not supported for enum output."});if(o!=null)throw new Gn({parameter:"schemaDescription",value:o,message:"Schema description is not supported for enum output."});if(r!=null)throw new Gn({parameter:"schemaName",value:r,message:"Schema name is not supported for enum output."});if(i==null)throw new Gn({parameter:"enumValues",value:i,message:"Enum values are required for enum output."});for(const s of i)if(typeof s!="string")throw new Gn({parameter:"enumValues",value:s,message:"Enum values must be strings."})}}function wte(e){const t=e.map(n=>({...n,content:typeof n.content=="string"?n.content:n.content.map($8e)}));return JSON.stringify(t)}function $8e(e){return e.type==="image"?{...e,image:e.image instanceof Uint8Array?DP(e.image):e.image}:e}var j8e=Ah({prefix:"aiobj",size:24});async function L8e({model:e,enum:t,schema:n,schemaName:r,schemaDescription:o,mode:i,output:s="object",system:a,prompt:l,messages:c,maxRetries:u,abortSignal:f,headers:p,experimental_repairText:m,experimental_telemetry:y,experimental_providerMetadata:b,providerOptions:w=b,_internal:{generateId:S=j8e,currentDate:E=()=>new Date}={},...T}){if(typeof e=="string"||e.specificationVersion!=="v1")throw new Uee;xte({output:s,mode:i,schema:n,schemaName:r,schemaDescription:o,enumValues:t});const{maxRetries:A,retry:M}=Xee({maxRetries:u}),R=vte({output:s,schema:n,enumValues:t});R.type==="no-schema"&&i===void 0&&(i="json");const O=Qee({model:e,telemetry:y,headers:p,settings:{...T,maxRetries:A}}),I=ete(y);return h0({name:"ai.generateObject",attributes:Il({telemetry:y,attributes:{...f0({operationId:"ai.generateObject",telemetry:y}),...O,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:l,messages:c})},"ai.schema":R.jsonSchema!=null?{input:()=>JSON.stringify(R.jsonSchema)}:void 0,"ai.schema.name":r,"ai.schema.description":o,"ai.settings.output":R.type,"ai.settings.mode":i}}),tracer:I,fn:async L=>{var $,B,G,V;(i==="auto"||i==null)&&(i=e.defaultObjectGenerationMode);let W,K,F,q,H,z,N,U,te;switch(i){case"json":{const ae=vk({prompt:{system:R.jsonSchema==null?bb({prompt:a}):e.supportsStructuredOutputs?a:bb({prompt:a,schema:R.jsonSchema}),prompt:l,messages:c},tools:void 0}),pe=await yk({prompt:ae,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:($=e.supportsUrl)==null?void 0:$.bind(e)}),ie=await M(()=>h0({name:"ai.generateObject.doGenerate",attributes:Il({telemetry:y,attributes:{...f0({operationId:"ai.generateObject.doGenerate",telemetry:y}),...O,"ai.prompt.format":{input:()=>ae.type},"ai.prompt.messages":{input:()=>JSON.stringify(pe)},"ai.settings.mode":i,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":T.frequencyPenalty,"gen_ai.request.max_tokens":T.maxTokens,"gen_ai.request.presence_penalty":T.presencePenalty,"gen_ai.request.temperature":T.temperature,"gen_ai.request.top_k":T.topK,"gen_ai.request.top_p":T.topP}}),tracer:I,fn:async ye=>{var Re,$e,Be,je,Le,Pe;const me=await e.doGenerate({mode:{type:"object-json",schema:R.jsonSchema,name:r,description:o},...bk(T),inputFormat:ae.type,prompt:pe,providerMetadata:w,abortSignal:f,headers:p}),_e={id:($e=(Re=me.response)==null?void 0:Re.id)!=null?$e:S(),timestamp:(je=(Be=me.response)==null?void 0:Be.timestamp)!=null?je:E(),modelId:(Pe=(Le=me.response)==null?void 0:Le.modelId)!=null?Pe:e.modelId};if(me.text===void 0)throw new jc({message:"No object generated: the model did not return a response.",response:_e,usage:yf(me.usage),finishReason:me.finishReason});return ye.setAttributes(Il({telemetry:y,attributes:{"ai.response.finishReason":me.finishReason,"ai.response.object":{output:()=>me.text},"ai.response.id":_e.id,"ai.response.model":_e.modelId,"ai.response.timestamp":_e.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(me.providerMetadata),"ai.usage.promptTokens":me.usage.promptTokens,"ai.usage.completionTokens":me.usage.completionTokens,"gen_ai.response.finish_reasons":[me.finishReason],"gen_ai.response.id":_e.id,"gen_ai.response.model":_e.modelId,"gen_ai.usage.prompt_tokens":me.usage.promptTokens,"gen_ai.usage.completion_tokens":me.usage.completionTokens}})),{...me,objectText:me.text,responseData:_e}}}));W=ie.objectText,K=ie.finishReason,F=ie.usage,q=ie.warnings,H=ie.rawResponse,U=ie.logprobs,te=ie.providerMetadata,N=(B=ie.request)!=null?B:{},z=ie.responseData;break}case"tool":{const ae=vk({prompt:{system:a,prompt:l,messages:c},tools:void 0}),pe=await yk({prompt:ae,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(G=e.supportsUrl)==null?void 0:G.bind(e)}),ie=ae.type,ye=await M(()=>h0({name:"ai.generateObject.doGenerate",attributes:Il({telemetry:y,attributes:{...f0({operationId:"ai.generateObject.doGenerate",telemetry:y}),...O,"ai.prompt.format":{input:()=>ie},"ai.prompt.messages":{input:()=>wte(pe)},"ai.settings.mode":i,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":T.frequencyPenalty,"gen_ai.request.max_tokens":T.maxTokens,"gen_ai.request.presence_penalty":T.presencePenalty,"gen_ai.request.temperature":T.temperature,"gen_ai.request.top_k":T.topK,"gen_ai.request.top_p":T.topP}}),tracer:I,fn:async Re=>{var $e,Be,je,Le,Pe,me,_e,xe;const Ie=await e.doGenerate({mode:{type:"object-tool",tool:{type:"function",name:r??"json",description:o??"Respond with a JSON object.",parameters:R.jsonSchema}},...bk(T),inputFormat:ie,prompt:pe,providerMetadata:w,abortSignal:f,headers:p}),Ve=(Be=($e=Ie.toolCalls)==null?void 0:$e[0])==null?void 0:Be.args,nt={id:(Le=(je=Ie.response)==null?void 0:je.id)!=null?Le:S(),timestamp:(me=(Pe=Ie.response)==null?void 0:Pe.timestamp)!=null?me:E(),modelId:(xe=(_e=Ie.response)==null?void 0:_e.modelId)!=null?xe:e.modelId};if(Ve===void 0)throw new jc({message:"No object generated: the tool was not called.",response:nt,usage:yf(Ie.usage),finishReason:Ie.finishReason});return Re.setAttributes(Il({telemetry:y,attributes:{"ai.response.finishReason":Ie.finishReason,"ai.response.object":{output:()=>Ve},"ai.response.id":nt.id,"ai.response.model":nt.modelId,"ai.response.timestamp":nt.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(Ie.providerMetadata),"ai.usage.promptTokens":Ie.usage.promptTokens,"ai.usage.completionTokens":Ie.usage.completionTokens,"gen_ai.response.finish_reasons":[Ie.finishReason],"gen_ai.response.id":nt.id,"gen_ai.response.model":nt.modelId,"gen_ai.usage.input_tokens":Ie.usage.promptTokens,"gen_ai.usage.output_tokens":Ie.usage.completionTokens}})),{...Ie,objectText:Ve,responseData:nt}}}));W=ye.objectText,K=ye.finishReason,F=ye.usage,q=ye.warnings,H=ye.rawResponse,U=ye.logprobs,te=ye.providerMetadata,N=(V=ye.request)!=null?V:{},z=ye.responseData;break}case void 0:throw new Error("Model does not have a default object generation mode.");default:{const ae=i;throw new Error(`Unsupported mode: ${ae}`)}}function D(ae){const pe=PQ({text:ae});if(!pe.success)throw new jc({message:"No object generated: could not parse the response.",cause:pe.error,text:ae,response:z,usage:yf(F),finishReason:K});const ie=R.validateFinalResult(pe.value,{text:ae,response:z,usage:yf(F)});if(!ie.success)throw new jc({message:"No object generated: response did not match schema.",cause:ie.error,text:ae,response:z,usage:yf(F),finishReason:K});return ie.value}let ce;try{ce=D(W)}catch(ae){if(m!=null&&jc.isInstance(ae)&&(LR.isInstance(ae.cause)||ph.isInstance(ae.cause))){const pe=await m({text:W,error:ae.cause});if(pe===null)throw ae;ce=D(pe)}else throw ae}return L.setAttributes(Il({telemetry:y,attributes:{"ai.response.finishReason":K,"ai.response.object":{output:()=>JSON.stringify(ce)},"ai.usage.promptTokens":F.promptTokens,"ai.usage.completionTokens":F.completionTokens}})),new z8e({object:ce,finishReason:K,usage:yf(F),warnings:q,request:N,response:{...z,headers:H?.headers,body:H?.body},logprobs:U,providerMetadata:te})}})}var z8e=class{constructor(e){this.object=e.object,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.providerMetadata=e.providerMetadata,this.experimental_providerMetadata=e.providerMetadata,this.response=e.response,this.request=e.request,this.logprobs=e.logprobs}toJsonResponse(e){var t;return new Response(JSON.stringify(this.object),{status:(t=e?.status)!=null?t:200,headers:vE(e?.headers,{contentType:"application/json; charset=utf-8"})})}},kp=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((t,n)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&n(this.status.error),this._resolve=t,this._reject=n}),this.promise)}resolve(t){var n;this.status={type:"resolved",value:t},this.promise&&((n=this._resolve)==null||n.call(this,t))}reject(t){var n;this.status={type:"rejected",error:t},this.promise&&((n=this._reject)==null||n.call(this,t))}};function CB(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function B8e(){let e=[],t=null,n=!1,r=CB();const o=async()=>{if(n&&e.length===0){t?.close();return}if(e.length===0)return r=CB(),await r.promise,o();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await o():n&&t?.close()):t?.enqueue(i)}catch(i){t?.error(i),e.shift(),n&&e.length===0&&t?.close()}};return{stream:new ReadableStream({start(i){t=i},pull:o,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&t?.close()},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t?.close()}}}function F8e(){var e,t;return(t=(e=globalThis?.performance)==null?void 0:e.now())!=null?t:Date.now()}var V8e=Ah({prefix:"aiobj",size:24});function H8e({model:e,schema:t,schemaName:n,schemaDescription:r,mode:o,output:i="object",system:s,prompt:a,messages:l,maxRetries:c,abortSignal:u,headers:f,experimental_telemetry:p,experimental_providerMetadata:m,providerOptions:y=m,onError:b,onFinish:w,_internal:{generateId:S=V8e,currentDate:E=()=>new Date,now:T=F8e}={},...A}){if(typeof e=="string"||e.specificationVersion!=="v1")throw new Uee;xte({output:i,mode:o,schema:t,schemaName:n,schemaDescription:r});const M=vte({output:i,schema:t});return M.type==="no-schema"&&o===void 0&&(o="json"),new U8e({model:e,telemetry:p,headers:f,settings:A,maxRetries:c,abortSignal:u,outputStrategy:M,system:s,prompt:a,messages:l,schemaName:n,schemaDescription:r,providerOptions:y,mode:o,onError:b,onFinish:w,generateId:S,currentDate:E,now:T})}var U8e=class{constructor({model:e,headers:t,telemetry:n,settings:r,maxRetries:o,abortSignal:i,outputStrategy:s,system:a,prompt:l,messages:c,schemaName:u,schemaDescription:f,providerOptions:p,mode:m,onError:y,onFinish:b,generateId:w,currentDate:S,now:E}){this.objectPromise=new kp,this.usagePromise=new kp,this.providerMetadataPromise=new kp,this.warningsPromise=new kp,this.requestPromise=new kp,this.responsePromise=new kp;const{maxRetries:T,retry:A}=Xee({maxRetries:o}),M=Qee({model:e,telemetry:n,headers:t,settings:{...r,maxRetries:T}}),R=ete(n),O=this,I=B8e(),L=new TransformStream({transform($,B){B.enqueue($),$.type==="error"&&y?.({error:$.error})}});this.baseStream=I.stream.pipeThrough(L),h0({name:"ai.streamObject",attributes:Il({telemetry:n,attributes:{...f0({operationId:"ai.streamObject",telemetry:n}),...M,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:l,messages:c})},"ai.schema":s.jsonSchema!=null?{input:()=>JSON.stringify(s.jsonSchema)}:void 0,"ai.schema.name":u,"ai.schema.description":f,"ai.settings.output":s.type,"ai.settings.mode":m}}),tracer:R,endWhenDone:!1,fn:async $=>{var B,G;(m==="auto"||m==null)&&(m=e.defaultObjectGenerationMode);let V,W;switch(m){case"json":{const Pe=vk({prompt:{system:s.jsonSchema==null?bb({prompt:a}):e.supportsStructuredOutputs?a:bb({prompt:a,schema:s.jsonSchema}),prompt:l,messages:c},tools:void 0});V={mode:{type:"object-json",schema:s.jsonSchema,name:u,description:f},...bk(r),inputFormat:Pe.type,prompt:await yk({prompt:Pe,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(B=e.supportsUrl)==null?void 0:B.bind(e)}),providerMetadata:p,abortSignal:i,headers:t},W={transform:(me,_e)=>{switch(me.type){case"text-delta":_e.enqueue(me.textDelta);break;case"response-metadata":case"finish":case"error":_e.enqueue(me);break}}};break}case"tool":{const Pe=vk({prompt:{system:a,prompt:l,messages:c},tools:void 0});V={mode:{type:"object-tool",tool:{type:"function",name:u??"json",description:f??"Respond with a JSON object.",parameters:s.jsonSchema}},...bk(r),inputFormat:Pe.type,prompt:await yk({prompt:Pe,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(G=e.supportsUrl)==null?void 0:G.bind(e)}),providerMetadata:p,abortSignal:i,headers:t},W={transform(me,_e){switch(me.type){case"tool-call-delta":_e.enqueue(me.argsTextDelta);break;case"response-metadata":case"finish":case"error":_e.enqueue(me);break}}};break}case void 0:throw new Error("Model does not have a default object generation mode.");default:{const Pe=m;throw new Error(`Unsupported mode: ${Pe}`)}}const{result:{stream:K,warnings:F,rawResponse:q,request:H},doStreamSpan:z,startTimestampMs:N}=await A(()=>h0({name:"ai.streamObject.doStream",attributes:Il({telemetry:n,attributes:{...f0({operationId:"ai.streamObject.doStream",telemetry:n}),...M,"ai.prompt.format":{input:()=>V.inputFormat},"ai.prompt.messages":{input:()=>wte(V.prompt)},"ai.settings.mode":m,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:R,endWhenDone:!1,fn:async Pe=>({startTimestampMs:E(),doStreamSpan:Pe,result:await e.doStream(V)})}));O.requestPromise.resolve(H??{});let U,te,D,ce,ae,pe="",ie="",ye={id:w(),timestamp:S(),modelId:e.modelId},Re,$e,Be=!0,je=!0;const Le=K.pipeThrough(new TransformStream(W)).pipeThrough(new TransformStream({async transform(Pe,me){var _e,xe,Ie;if(Be){const Ve=E()-N;Be=!1,z.addEvent("ai.stream.firstChunk",{"ai.stream.msToFirstChunk":Ve}),z.setAttributes({"ai.stream.msToFirstChunk":Ve})}if(typeof Pe=="string"){pe+=Pe,ie+=Pe;const{value:Ve,state:nt}=Dee(pe);if(Ve!==void 0&&!pk(Re,Ve)){const kn=s.validatePartialResult({value:Ve,textDelta:ie,latestObject:$e,isFirstDelta:je,isFinalDelta:nt==="successful-parse"});kn.success&&!pk($e,kn.value.partial)&&(Re=Ve,$e=kn.value.partial,me.enqueue({type:"object",object:$e}),me.enqueue({type:"text-delta",textDelta:kn.value.textDelta}),ie="",je=!1)}return}switch(Pe.type){case"response-metadata":{ye={id:(_e=Pe.id)!=null?_e:ye.id,timestamp:(xe=Pe.timestamp)!=null?xe:ye.timestamp,modelId:(Ie=Pe.modelId)!=null?Ie:ye.modelId};break}case"finish":{ie!==""&&me.enqueue({type:"text-delta",textDelta:ie}),te=Pe.finishReason,U=yf(Pe.usage),D=Pe.providerMetadata,me.enqueue({...Pe,usage:U,response:ye}),O.usagePromise.resolve(U),O.providerMetadataPromise.resolve(D),O.responsePromise.resolve({...ye,headers:q?.headers});const Ve=s.validateFinalResult(Re,{text:pe,response:ye,usage:U});Ve.success?(ce=Ve.value,O.objectPromise.resolve(ce)):(ae=new jc({message:"No object generated: response did not match schema.",cause:Ve.error,text:pe,response:ye,usage:U,finishReason:te}),O.objectPromise.reject(ae));break}default:{me.enqueue(Pe);break}}},async flush(Pe){try{const me=U??{promptTokens:NaN,completionTokens:NaN,totalTokens:NaN};z.setAttributes(Il({telemetry:n,attributes:{"ai.response.finishReason":te,"ai.response.object":{output:()=>JSON.stringify(ce)},"ai.response.id":ye.id,"ai.response.model":ye.modelId,"ai.response.timestamp":ye.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(D),"ai.usage.promptTokens":me.promptTokens,"ai.usage.completionTokens":me.completionTokens,"gen_ai.response.finish_reasons":[te],"gen_ai.response.id":ye.id,"gen_ai.response.model":ye.modelId,"gen_ai.usage.input_tokens":me.promptTokens,"gen_ai.usage.output_tokens":me.completionTokens}})),z.end(),$.setAttributes(Il({telemetry:n,attributes:{"ai.usage.promptTokens":me.promptTokens,"ai.usage.completionTokens":me.completionTokens,"ai.response.object":{output:()=>JSON.stringify(ce)},"ai.response.providerMetadata":JSON.stringify(D)}})),await b?.({usage:me,object:ce,error:ae,response:{...ye,headers:q?.headers},warnings:F,providerMetadata:D,experimental_providerMetadata:D})}catch(me){Pe.enqueue({type:"error",error:me})}finally{$.end()}}}));I.addStream(Le)}}).catch($=>{I.addStream(new ReadableStream({start(B){B.enqueue({type:"error",error:$}),B.close()}}))}).finally(()=>{I.close()}),this.outputStrategy=s}get object(){return this.objectPromise.value}get usage(){return this.usagePromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get warnings(){return this.warningsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get partialObjectStream(){return Sw(this.baseStream.pipeThrough(new TransformStream({transform(e,t){switch(e.type){case"object":t.enqueue(e.object);break;case"text-delta":case"finish":case"error":break;default:{const n=e;throw new Error(`Unsupported chunk type: ${n}`)}}}})))}get elementStream(){return this.outputStrategy.createElementStream(this.baseStream)}get textStream(){return Sw(this.baseStream.pipeThrough(new TransformStream({transform(e,t){switch(e.type){case"text-delta":t.enqueue(e.textDelta);break;case"object":case"finish":case"error":break;default:{const n=e;throw new Error(`Unsupported chunk type: ${n}`)}}}})))}get fullStream(){return Sw(this.baseStream)}pipeTextStreamToResponse(e,t){qze({response:e,status:t?.status,statusText:t?.statusText,headers:Gze(t?.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e?.status)!=null?t:200,headers:vE(e?.headers,{contentType:"text/plain; charset=utf-8"})})}};Ah({prefix:"aitxt",size:24});Ah({prefix:"msg",size:24});var G8e={};PP(G8e,{object:()=>Z8e,text:()=>q8e});var q8e=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),Z8e=({schema:e})=>{const t=ZR(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:bb({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=Dee(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const o=r.state;throw new Error(`Unsupported parse state: ${o}`)}}},parseOutput({text:n},r){const o=PQ({text:n});if(!o.success)throw new jc({message:"No object generated: could not parse the response.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const i=Im({value:o.value,schema:t});if(!i.success)throw new jc({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return i.value}}};function Ste(e,t){const n=e.getReader(),r=t.getReader();let o,i,s=!1,a=!1;async function l(u){try{o==null&&(o=n.read());const f=await o;o=void 0,f.done?u.close():u.enqueue(f.value)}catch(f){u.error(f)}}async function c(u){try{i==null&&(i=r.read());const f=await i;i=void 0,f.done?u.close():u.enqueue(f.value)}catch(f){u.error(f)}}return new ReadableStream({async pull(u){try{if(s){await c(u);return}if(a){await l(u);return}o==null&&(o=n.read()),i==null&&(i=r.read());const{result:f,reader:p}=await Promise.race([o.then(m=>({result:m,reader:n})),i.then(m=>({result:m,reader:r}))]);f.done||u.enqueue(f.value),p===n?(o=void 0,f.done&&(await c(u),s=!0)):(i=void 0,f.done&&(a=!0,await l(u)))}catch(f){u.error(f)}},cancel(){n.cancel(),r.cancel()}})}Ah({prefix:"aitxt",size:24});Ah({prefix:"msg",size:24});var W8e=fe({name:Q(),version:Q()}).passthrough(),$P=fe({_meta:Pt(fe({}).passthrough())}).passthrough(),vb=$P,K8e=fe({method:Q(),params:Pt($P)}),Y8e=fe({experimental:Pt(fe({}).passthrough()),logging:Pt(fe({}).passthrough()),prompts:Pt(fe({listChanged:Pt(Jt())}).passthrough()),resources:Pt(fe({subscribe:Pt(Jt()),listChanged:Pt(Jt())}).passthrough()),tools:Pt(fe({listChanged:Pt(Jt())}).passthrough())}).passthrough();vb.extend({protocolVersion:Q(),capabilities:Y8e,serverInfo:W8e,instructions:Pt(Q())});var J8e=vb.extend({nextCursor:Pt(Q())}),X8e=fe({name:Q(),description:Pt(Q()),inputSchema:fe({type:Me("object"),properties:Pt(fe({}).passthrough())}).passthrough()}).passthrough();J8e.extend({tools:xt(X8e)});var Q8e=fe({type:Me("text"),text:Q()}).passthrough(),e7e=fe({type:Me("image"),data:Q().base64(),mimeType:Q()}).passthrough(),kte=fe({uri:Q(),mimeType:Pt(Q())}).passthrough(),t7e=kte.extend({text:Q()}),n7e=kte.extend({blob:Q().base64()}),r7e=fe({type:Me("resource"),resource:It([t7e,n7e])}).passthrough();vb.extend({content:xt(It([Q8e,e7e,r7e])),isError:Jt().default(!1).optional()}).or(vb.extend({toolResult:tn()}));var xE="2.0",o7e=fe({jsonrpc:Me(xE),id:It([Q(),Qt().int()])}).merge(K8e).strict(),i7e=fe({jsonrpc:Me(xE),id:It([Q(),Qt().int()]),result:vb}).strict(),s7e=fe({jsonrpc:Me(xE),id:It([Q(),Qt().int()]),error:fe({code:Qt().int(),message:Q(),data:Pt(tn())})}).strict(),a7e=fe({jsonrpc:Me(xE)}).merge(fe({method:Q(),params:Pt($P)})).strict();It([o7e,a7e,i7e,s7e]);var l7e={};PP(l7e,{mergeIntoDataStream:()=>d7e,toDataStream:()=>c7e,toDataStreamResponse:()=>u7e});function Cte(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,o){o.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function jP(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var o;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&EB((o=n.data)==null?void 0:o.chunk,r);return}EB(n,r)}})).pipeThrough(Cte(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue($ee("text",n))}}))}function c7e(e,t){return jP(e,t).pipeThrough(new TextEncoderStream)}function u7e(e,t){var n;const r=jP(e,t?.callbacks).pipeThrough(new TextEncoderStream),o=t?.data,i=t?.init,s=o?Ste(o.stream,r):r;return new Response(s,{status:(n=i?.status)!=null?n:200,statusText:i?.statusText,headers:vE(i?.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function d7e(e,t){t.dataStream.merge(jP(e,t.callbacks))}function EB(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var f7e={};PP(f7e,{mergeIntoDataStream:()=>m7e,toDataStream:()=>h7e,toDataStreamResponse:()=>p7e});function LP(e,t){const n=g7e();return D5e(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,o){o.enqueue(n(r.delta))}})).pipeThrough(Cte(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,o)=>{o.enqueue($ee("text",r))}}))}function h7e(e,t){return LP(e,t).pipeThrough(new TextEncoderStream)}function p7e(e,t={}){var n;const{init:r,data:o,callbacks:i}=t,s=LP(e,i).pipeThrough(new TextEncoderStream),a=o?Ste(o.stream,s):s;return new Response(a,{status:(n=r?.status)!=null?n:200,statusText:r?.statusText,headers:vE(r?.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function m7e(e,t){t.dataStream.merge(LP(e,t.callbacks))}function g7e(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}var Vy={exports:{}};Vy.exports;var TB;function y7e(){return TB||(TB=1,(function(e,t){var n=200,r="__lodash_hash_undefined__",o=1,i=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Function]",y="[object GeneratorFunction]",b="[object Map]",w="[object Number]",S="[object Null]",E="[object Object]",T="[object Promise]",A="[object Proxy]",M="[object RegExp]",R="[object Set]",O="[object String]",I="[object Symbol]",L="[object Undefined]",$="[object WeakMap]",B="[object ArrayBuffer]",G="[object DataView]",V="[object Float32Array]",W="[object Float64Array]",K="[object Int8Array]",F="[object Int16Array]",q="[object Int32Array]",H="[object Uint8Array]",z="[object Uint8ClampedArray]",N="[object Uint16Array]",U="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,ce=/^(?:0|[1-9]\d*)$/,ae={};ae[V]=ae[W]=ae[K]=ae[F]=ae[q]=ae[H]=ae[z]=ae[N]=ae[U]=!0,ae[a]=ae[l]=ae[B]=ae[u]=ae[G]=ae[f]=ae[p]=ae[m]=ae[b]=ae[w]=ae[E]=ae[M]=ae[R]=ae[O]=ae[$]=!1;var pe=typeof B1=="object"&&B1&&B1.Object===Object&&B1,ie=typeof self=="object"&&self&&self.Object===Object&&self,ye=pe||ie||Function("return this")(),Re=t&&!t.nodeType&&t,$e=Re&&!0&&e&&!e.nodeType&&e,Be=$e&&$e.exports===Re,je=Be&&pe.process,Le=(function(){try{return je&&je.binding&&je.binding("util")}catch{}})(),Pe=Le&&Le.isTypedArray;function me(Z,ee){for(var Se=-1,ze=Z==null?0:Z.length,on=0,yt=[];++Se<ze;){var $n=Z[Se];ee($n,Se,Z)&&(yt[on++]=$n)}return yt}function _e(Z,ee){for(var Se=-1,ze=ee.length,on=Z.length;++Se<ze;)Z[on+Se]=ee[Se];return Z}function xe(Z,ee){for(var Se=-1,ze=Z==null?0:Z.length;++Se<ze;)if(ee(Z[Se],Se,Z))return!0;return!1}function Ie(Z,ee){for(var Se=-1,ze=Array(Z);++Se<Z;)ze[Se]=ee(Se);return ze}function Ve(Z){return function(ee){return Z(ee)}}function nt(Z,ee){return Z.has(ee)}function kn(Z,ee){return Z?.[ee]}function Dr(Z){var ee=-1,Se=Array(Z.size);return Z.forEach(function(ze,on){Se[++ee]=[on,ze]}),Se}function or(Z,ee){return function(Se){return Z(ee(Se))}}function hr(Z){var ee=-1,Se=Array(Z.size);return Z.forEach(function(ze){Se[++ee]=ze}),Se}var Ft=Array.prototype,Y=Function.prototype,he=Object.prototype,De=ye["__core-js_shared__"],Oe=Y.toString,et=he.hasOwnProperty,rn=(function(){var Z=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""})(),Dn=he.toString,mn=RegExp("^"+Oe.call(et).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tr=Be?ye.Buffer:void 0,Cn=ye.Symbol,gn=ye.Uint8Array,Yn=he.propertyIsEnumerable,Jn=Ft.splice,co=Cn?Cn.toStringTag:void 0,Ji=Object.getOwnPropertySymbols,Kr=Tr?Tr.isBuffer:void 0,ir=or(Object.keys,Object),ki=li(ye,"DataView"),uo=li(ye,"Map"),pr=li(ye,"Promise"),Ci=li(ye,"Set"),He=li(ye,"WeakMap"),Kt=li(Object,"create"),jo=_i(ki),sr=_i(uo),ln=_i(pr),Yt=_i(Ci),Lo=_i(He),En=Cn?Cn.prototype:void 0,Xi=En?En.valueOf:void 0;function zo(Z){var ee=-1,Se=Z==null?0:Z.length;for(this.clear();++ee<Se;){var ze=Z[ee];this.set(ze[0],ze[1])}}function hu(){this.__data__=Kt?Kt(null):{},this.size=0}function wa(Z){var ee=this.has(Z)&&delete this.__data__[Z];return this.size-=ee?1:0,ee}function Ds(Z){var ee=this.__data__;if(Kt){var Se=ee[Z];return Se===r?void 0:Se}return et.call(ee,Z)?ee[Z]:void 0}function $s(Z){var ee=this.__data__;return Kt?ee[Z]!==void 0:et.call(ee,Z)}function Qi(Z,ee){var Se=this.__data__;return this.size+=this.has(Z)?0:1,Se[Z]=Kt&&ee===void 0?r:ee,this}zo.prototype.clear=hu,zo.prototype.delete=wa,zo.prototype.get=Ds,zo.prototype.has=$s,zo.prototype.set=Qi;function mr(Z){var ee=-1,Se=Z==null?0:Z.length;for(this.clear();++ee<Se;){var ze=Z[ee];this.set(ze[0],ze[1])}}function es(){this.__data__=[],this.size=0}function Xn(Z){var ee=this.__data__,Se=Ei(ee,Z);if(Se<0)return!1;var ze=ee.length-1;return Se==ze?ee.pop():Jn.call(ee,Se,1),--this.size,!0}function Sa(Z){var ee=this.__data__,Se=Ei(ee,Z);return Se<0?void 0:ee[Se][1]}function ka(Z){return Ei(this.__data__,Z)>-1}function Bo(Z,ee){var Se=this.__data__,ze=Ei(Se,Z);return ze<0?(++this.size,Se.push([Z,ee])):Se[ze][1]=ee,this}mr.prototype.clear=es,mr.prototype.delete=Xn,mr.prototype.get=Sa,mr.prototype.has=ka,mr.prototype.set=Bo;function _r(Z){var ee=-1,Se=Z==null?0:Z.length;for(this.clear();++ee<Se;){var ze=Z[ee];this.set(ze[0],ze[1])}}function dl(){this.size=0,this.__data__={hash:new zo,map:new(uo||mr),string:new zo}}function Ca(Z){var ee=ho(this,Z).delete(Z);return this.size-=ee?1:0,ee}function sc(Z){return ho(this,Z).get(Z)}function Hd(Z){return ho(this,Z).has(Z)}function ts(Z,ee){var Se=ho(this,Z),ze=Se.size;return Se.set(Z,ee),this.size+=Se.size==ze?0:1,this}_r.prototype.clear=dl,_r.prototype.delete=Ca,_r.prototype.get=sc,_r.prototype.has=Hd,_r.prototype.set=ts;function ns(Z){var ee=-1,Se=Z==null?0:Z.length;for(this.__data__=new _r;++ee<Se;)this.add(Z[ee])}function si(Z){return this.__data__.set(Z,r),this}function js(Z){return this.__data__.has(Z)}ns.prototype.add=ns.prototype.push=si,ns.prototype.has=js;function ai(Z){var ee=this.__data__=new mr(Z);this.size=ee.size}function rs(){this.__data__=new mr,this.size=0}function Ls(Z){var ee=this.__data__,Se=ee.delete(Z);return this.size=ee.size,Se}function fl(Z){return this.__data__.get(Z)}function Ud(Z){return this.__data__.has(Z)}function Ea(Z,ee){var Se=this.__data__;if(Se instanceof mr){var ze=Se.__data__;if(!uo||ze.length<n-1)return ze.push([Z,ee]),this.size=++Se.size,this;Se=this.__data__=new _r(ze)}return Se.set(Z,ee),this.size=Se.size,this}ai.prototype.clear=rs,ai.prototype.delete=Ls,ai.prototype.get=fl,ai.prototype.has=Ud,ai.prototype.set=Ea;function Ar(Z,ee){var Se=mu(Z),ze=!Se&&$v(Z),on=!Se&&!ze&&uc(Z),yt=!Se&&!ze&&!on&&Gd(Z),$n=Se||ze||on||yt,gr=$n?Ie(Z.length,String):[],lr=gr.length;for(var yn in Z)et.call(Z,yn)&&!($n&&(yn=="length"||on&&(yn=="offset"||yn=="parent")||yt&&(yn=="buffer"||yn=="byteLength"||yn=="byteOffset")||pu(yn,lr)))&&gr.push(yn);return gr}function Ei(Z,ee){for(var Se=Z.length;Se--;)if(cc(Z[Se][0],ee))return Se;return-1}function hl(Z,ee,Se){var ze=ee(Z);return mu(Z)?ze:_e(ze,Se(Z))}function Co(Z){return Z==null?Z===void 0?L:S:co&&co in Object(Z)?Aa(Z):ml(Z)}function zs(Z){return dc(Z)&&Co(Z)==a}function Ti(Z,ee,Se,ze,on){return Z===ee?!0:Z==null||ee==null||!dc(Z)&&!dc(ee)?Z!==Z&&ee!==ee:pl(Z,ee,Se,ze,Ti,on)}function pl(Z,ee,Se,ze,on,yt){var $n=mu(Z),gr=mu(ee),lr=$n?l:Yr(Z),yn=gr?l:Yr(ee);lr=lr==a?E:lr,yn=yn==a?E:yn;var Fo=lr==E,ss=yn==E,po=lr==yn;if(po&&uc(Z)){if(!uc(ee))return!1;$n=!0,Fo=!1}if(po&&!Fo)return yt||(yt=new ai),$n||Gd(Z)?is(Z,ee,Se,ze,on,yt):Bs(Z,ee,lr,Se,ze,on,yt);if(!(Se&o)){var Ai=Fo&&et.call(Z,"__wrapped__"),Vo=ss&&et.call(ee,"__wrapped__");if(Ai||Vo){var gl=Ai?Z.value():Z,Ra=Vo?ee.value():ee;return yt||(yt=new ai),on(gl,Ra,Se,ze,yt)}}return po?(yt||(yt=new ai),_a(Z,ee,Se,ze,on,yt)):!1}function fo(Z){if(!Na(Z)||ar(Z))return!1;var ee=Ph(Z)?mn:D;return ee.test(_i(Z))}function ac(Z){return dc(Z)&&gu(Z.length)&&!!ae[Co(Z)]}function Ta(Z){if(!Eo(Z))return ir(Z);var ee=[];for(var Se in Object(Z))et.call(Z,Se)&&Se!="constructor"&&ee.push(Se);return ee}function is(Z,ee,Se,ze,on,yt){var $n=Se&o,gr=Z.length,lr=ee.length;if(gr!=lr&&!($n&&lr>gr))return!1;var yn=yt.get(Z);if(yn&&yt.get(ee))return yn==ee;var Fo=-1,ss=!0,po=Se&i?new ns:void 0;for(yt.set(Z,ee),yt.set(ee,Z);++Fo<gr;){var Ai=Z[Fo],Vo=ee[Fo];if(ze)var gl=$n?ze(Vo,Ai,Fo,ee,Z,yt):ze(Ai,Vo,Fo,Z,ee,yt);if(gl!==void 0){if(gl)continue;ss=!1;break}if(po){if(!xe(ee,function(Ra,fc){if(!nt(po,fc)&&(Ai===Ra||on(Ai,Ra,Se,ze,yt)))return po.push(fc)})){ss=!1;break}}else if(!(Ai===Vo||on(Ai,Vo,Se,ze,yt))){ss=!1;break}}return yt.delete(Z),yt.delete(ee),ss}function Bs(Z,ee,Se,ze,on,yt,$n){switch(Se){case G:if(Z.byteLength!=ee.byteLength||Z.byteOffset!=ee.byteOffset)return!1;Z=Z.buffer,ee=ee.buffer;case B:return!(Z.byteLength!=ee.byteLength||!yt(new gn(Z),new gn(ee)));case u:case f:case w:return cc(+Z,+ee);case p:return Z.name==ee.name&&Z.message==ee.message;case M:case O:return Z==ee+"";case b:var gr=Dr;case R:var lr=ze&o;if(gr||(gr=hr),Z.size!=ee.size&&!lr)return!1;var yn=$n.get(Z);if(yn)return yn==ee;ze|=i,$n.set(Z,ee);var Fo=is(gr(Z),gr(ee),ze,on,yt,$n);return $n.delete(Z),Fo;case I:if(Xi)return Xi.call(Z)==Xi.call(ee)}return!1}function _a(Z,ee,Se,ze,on,yt){var $n=Se&o,gr=Fs(Z),lr=gr.length,yn=Fs(ee),Fo=yn.length;if(lr!=Fo&&!$n)return!1;for(var ss=lr;ss--;){var po=gr[ss];if(!($n?po in ee:et.call(ee,po)))return!1}var Ai=yt.get(Z);if(Ai&&yt.get(ee))return Ai==ee;var Vo=!0;yt.set(Z,ee),yt.set(ee,Z);for(var gl=$n;++ss<lr;){po=gr[ss];var Ra=Z[po],fc=ee[po];if(ze)var zv=$n?ze(fc,Ra,po,ee,Z,yt):ze(Ra,fc,po,Z,ee,yt);if(!(zv===void 0?Ra===fc||on(Ra,fc,Se,ze,yt):zv)){Vo=!1;break}gl||(gl=po=="constructor")}if(Vo&&!gl){var jh=Z.constructor,qd=ee.constructor;jh!=qd&&"constructor"in Z&&"constructor"in ee&&!(typeof jh=="function"&&jh instanceof jh&&typeof qd=="function"&&qd instanceof qd)&&(Vo=!1)}return yt.delete(Z),yt.delete(ee),Vo}function Fs(Z){return hl(Z,Lv,lc)}function ho(Z,ee){var Se=Z.__data__;return mt(ee)?Se[typeof ee=="string"?"string":"hash"]:Se.map}function li(Z,ee){var Se=kn(Z,ee);return fo(Se)?Se:void 0}function Aa(Z){var ee=et.call(Z,co),Se=Z[co];try{Z[co]=void 0;var ze=!0}catch{}var on=Dn.call(Z);return ze&&(ee?Z[co]=Se:delete Z[co]),on}var lc=Ji?function(Z){return Z==null?[]:(Z=Object(Z),me(Ji(Z),function(ee){return Yn.call(Z,ee)}))}:Dh,Yr=Co;(ki&&Yr(new ki(new ArrayBuffer(1)))!=G||uo&&Yr(new uo)!=b||pr&&Yr(pr.resolve())!=T||Ci&&Yr(new Ci)!=R||He&&Yr(new He)!=$)&&(Yr=function(Z){var ee=Co(Z),Se=ee==E?Z.constructor:void 0,ze=Se?_i(Se):"";if(ze)switch(ze){case jo:return G;case sr:return b;case ln:return T;case Yt:return R;case Lo:return $}return ee});function pu(Z,ee){return ee=ee??s,!!ee&&(typeof Z=="number"||ce.test(Z))&&Z>-1&&Z%1==0&&Z<ee}function mt(Z){var ee=typeof Z;return ee=="string"||ee=="number"||ee=="symbol"||ee=="boolean"?Z!=="__proto__":Z===null}function ar(Z){return!!rn&&rn in Z}function Eo(Z){var ee=Z&&Z.constructor,Se=typeof ee=="function"&&ee.prototype||he;return Z===Se}function ml(Z){return Dn.call(Z)}function _i(Z){if(Z!=null){try{return Oe.call(Z)}catch{}try{return Z+""}catch{}}return""}function cc(Z,ee){return Z===ee||Z!==Z&&ee!==ee}var $v=zs((function(){return arguments})())?zs:function(Z){return dc(Z)&&et.call(Z,"callee")&&!Yn.call(Z,"callee")},mu=Array.isArray;function jv(Z){return Z!=null&&gu(Z.length)&&!Ph(Z)}var uc=Kr||$h;function Ma(Z,ee){return Ti(Z,ee)}function Ph(Z){if(!Na(Z))return!1;var ee=Co(Z);return ee==m||ee==y||ee==c||ee==A}function gu(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=s}function Na(Z){var ee=typeof Z;return Z!=null&&(ee=="object"||ee=="function")}function dc(Z){return Z!=null&&typeof Z=="object"}var Gd=Pe?Ve(Pe):ac;function Lv(Z){return jv(Z)?Ar(Z):Ta(Z)}function Dh(){return[]}function $h(){return!1}e.exports=Ma})(Vy,Vy.exports)),Vy.exports}var b7e=y7e();const v7e=Md(b7e);function x7e(e){let t=e.schema.cached.changeSetIDs||(e.schema.cached.changeSetIDs=Object.create(null)),n=t[e.name];return n==null&&(t[e.name]=n=Object.keys(e.schema.nodes).indexOf(e.name)+1),n}const Ete={encodeCharacter:e=>e,encodeNodeStart:e=>e.type.name,encodeNodeEnd:e=>-x7e(e.type),compareTokens:(e,t)=>e===t};function JR(e,t,n,r,o){for(let i=0,s=0;i<e.childCount;i++){let a=e.child(i),l=s+a.nodeSize,c=Math.max(s,n),u=Math.min(l,r);if(c<u)if(a.isText)for(let f=c;f<u;f++)o.push(t.encodeCharacter(a.text.charCodeAt(f-s),a.marks));else a.isLeaf?o.push(t.encodeNodeStart(a)):(c==s&&o.push(t.encodeNodeStart(a)),JR(a.content,t,Math.max(s+1,c)-s-1,Math.min(l-1,u)-s-1,o),u==l&&o.push(t.encodeNodeEnd(a)));s=l}return o}const w7e=5e3;function S7e(e,t){return Math.min(15,Math.max(2,Math.floor(Math.max(e,t)/10)))}function Tte(e,t,n,r=Ete){let o=JR(e,r,n.fromA,n.toA,[]),i=JR(t,r,n.fromB,n.toB,[]),s=0,a=o.length,l=i.length,c=r.compareTokens;for(;s<o.length&&s<i.length&&c(o[s],i[s]);)s++;if(s==o.length&&s==i.length)return[];for(;a>s&&l>s&&c(o[a-1],i[l-1]);)a--,l--;if(a==s||l==s||a==l&&a==s+1)return[n.slice(s,a,s,l)];let u=a-s,f=l-s,p=Math.min(w7e,u+f),m=p+1,y=[],b=[];for(let w=m*2,S=0;S<w;S++)b[S]=-1;for(let w=0;w<=p;w++){for(let S=-w;S<=w;S+=2){let E=b[S+1+p],T=b[S-1+p],A=E<T?T:E+1,M=A+S;for(;A<u&&M<f&&c(o[s+A],i[s+M]);)A++,M++;if(b[S+p]=A,A>=u&&M>=f){let R=[],O=S7e(a-s,l-s),I=-1,L=-1,$=-1,B=-1,G=(V,W,K,F)=>{I>-1&&I<W+O?(I=V,$=K):(I>-1&&R.push(n.slice(I,L,$,B)),I=V,L=W,$=K,B=F)};for(let V=w-1;V>=0;V--){let W=b[S+1+p],K=b[S-1+p];W<K?(S--,A=K+s,M=A+S,G(A,A,M,M+1)):(S++,A=W+s,M=A+S,G(A,A+1,M,M)),b=y[V>>1]}return I>-1&&R.push(n.slice(I,L,$,B)),R.reverse()}}w%2==0&&y.push(b.slice())}return[n.slice(s,a,s,l)]}class fn{constructor(t,n){this.length=t,this.data=n}cut(t){return t==this.length?this:new fn(t,this.data)}static slice(t,n,r){if(n==r)return fn.none;if(n==0&&r==fn.len(t))return t;let o=[];for(let i=0,s=0;s<r;i++){let a=t[i],l=s+a.length,c=Math.min(r,l)-Math.max(n,s);c>0&&o.push(a.cut(c)),s=l}return o}static join(t,n,r){if(t.length==0)return n;if(n.length==0)return t;let o=r(t[t.length-1].data,n[0].data);if(o==null)return t.concat(n);let i=t.slice(0,t.length-1);i.push(new fn(t[t.length-1].length+n[0].length,o));for(let s=1;s<n.length;s++)i.push(n[s]);return i}static len(t){let n=0;for(let r=0;r<t.length;r++)n+=t[r].length;return n}}fn.none=[];class qa{constructor(t,n,r,o,i,s){this.fromA=t,this.toA=n,this.fromB=r,this.toB=o,this.deleted=i,this.inserted=s}get lenA(){return this.toA-this.fromA}get lenB(){return this.toB-this.fromB}slice(t,n,r,o){return t==0&&r==0&&n==this.toA-this.fromA&&o==this.toB-this.fromB?this:new qa(this.fromA+t,this.fromA+n,this.fromB+r,this.fromB+o,fn.slice(this.deleted,t,n),fn.slice(this.inserted,r,o))}static merge(t,n,r){if(t.length==0)return n;if(n.length==0)return t;let o=[];for(let i=0,s=0,a=t[0],l=n[0];;){if(!a&&!l)return o;if(a&&(!l||a.toB<l.fromA)){let c=s?n[s-1].toB-n[s-1].toA:0;o.push(c==0?a:new qa(a.fromA,a.toA,a.fromB+c,a.toB+c,a.deleted,a.inserted)),a=i++==t.length?null:t[i]}else if(l&&(!a||l.toA<a.fromB)){let c=i?t[i-1].toB-t[i-1].toA:0;o.push(c==0?l:new qa(l.fromA-c,l.toA-c,l.fromB,l.toB,l.deleted,l.inserted)),l=s++==n.length?null:n[s]}else{let c=Math.min(a.fromB,l.fromA),u=Math.min(a.fromA,l.fromA-(i?t[i-1].toB-t[i-1].toA:0)),f=u,p=Math.min(l.fromB,a.fromB+(s?n[s-1].toB-n[s-1].toA:0)),m=p,y=fn.none,b=fn.none,w=!1,S=!1;for(;;){let E=a?c>=a.fromB?a.toB:a.fromB:2e8,T=l?c>=l.fromA?l.toA:l.fromA:2e8,A=Math.min(E,T),M=a&&c>=a.fromB,R=l&&c>=l.fromA;if(!M&&!R)break;M&&c==a.fromB&&!w&&(y=fn.join(y,a.deleted,r),f+=a.lenA,w=!0),M&&!R&&(b=fn.join(b,fn.slice(a.inserted,c-a.fromB,A-a.fromB),r),m+=A-c),R&&c==l.fromA&&!S&&(b=fn.join(b,l.inserted,r),m+=l.lenB,S=!0),R&&!M&&(y=fn.join(y,fn.slice(l.deleted,c-l.fromA,A-l.fromA),r),f+=A-c),M&&A==a.toB&&(a=i++==t.length?null:t[i],w=!1),R&&A==l.toA&&(l=s++==n.length?null:n[s],S=!1),c=A}(u<f||p<m)&&o.push(new qa(u,f,p,m,y,b))}}}}let XR;try{XR=new RegExp("[\\p{Alphabetic}_]","u")}catch{}const k7e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Cp(e){if(e<128)return e>=48&&e<=57||e>=65&&e<=90||e>=79&&e<=122;let t=String.fromCharCode(e);return XR?XR.test(t):t.toUpperCase()!=t.toLowerCase()||k7e.test(t)}function C7e(e,t,n){let r="";function o(i,s,a){for(let l=0,c=0;l<i.childCount;l++){let u=i.child(l),f=c+u.nodeSize,p=Math.max(c,s),m=Math.min(f,a);p<m&&(u.isText?r+=u.text.slice(Math.max(0,s-c),Math.min(u.text.length,a-c)):u.isLeaf?r+=" ":(p==c&&(r+=" "),o(u.content,Math.max(0,p-c-1),Math.min(u.content.size,a-c)),m==f&&(r+=" "))),c=f}}return o(e,t,n),r}const QR=30;function E7e(e,t){let n=[];for(let r=0;r<e.length;r++){let o=e[r].toB,i=r;for(;r<e.length-1&&e[r+1].fromB<=o+QR;)o=e[++r].toB;T7e(e,i,r+1,t,n)}return n}function T7e(e,t,n,r,o){let i=Math.max(0,e[t].fromB-QR),s=Math.min(r.content.size,e[n-1].toB+QR),a=C7e(r.content,i,s);for(let l=t;l<n;l++){let c=l,u=e[l],f=u.lenA,p=u.lenB;for(;l<n-1;){let m=e[l+1],y=!1,b=u.toB==s?!1:Cp(a.charCodeAt(u.toB-1-i));for(let w=u.toB;!y&&w<m.fromB;w++){let S=w==s?!1:Cp(a.charCodeAt(w-i));(!b||!S)&&w!=e[c].fromB&&(y=!0),b=S}if(y)break;f+=m.lenA,p+=m.lenB,u=m,l++}if(p>0&&f>0&&!(p==1&&f==1)){let m=e[c].fromB,y=e[l].toB;if(m<s&&Cp(a.charCodeAt(m-i)))for(;m>i&&Cp(a.charCodeAt(m-1-i));)m--;if(y>i&&Cp(a.charCodeAt(y-1-i)))for(;y<s&&Cp(a.charCodeAt(y-i));)y++;let b=_7e(e.slice(c,l+1),m,y),w=o.length?o[o.length-1]:null;w&&w.toA==b.fromA?o[o.length-1]=new qa(w.fromA,b.toA,w.fromB,b.toB,w.deleted.concat(b.deleted),w.inserted.concat(b.inserted)):o.push(b)}else for(let m=c;m<=l;m++)o.push(e[m])}return e}function Ex(e,t){return e===t?e:null}function _7e(e,t,n){let r=e[0].fromA-(e[0].fromB-t),o=e[e.length-1],i=o.toA+(n-o.toB),s=fn.none,a=fn.none,l=(e[0].deleted.length?e[0].deleted:e[0].inserted)[0].data,c=(e[0].inserted.length?e[0].inserted:e[0].deleted)[0].data;for(let u=r,f=t,p=0;;p++){let m=p==e.length?null:e[p],y=m?m.fromA:i,b=m?m.fromB:n;if(y>u&&(s=fn.join(s,[new fn(y-u,l)],Ex)),b>f&&(a=fn.join(a,[new fn(b-f,c)],Ex)),!m)break;s=fn.join(s,m.deleted,Ex),a=fn.join(a,m.inserted,Ex),s.length&&(l=s[s.length-1].data),a.length&&(c=a[a.length-1].data),u=m.toA,f=m.toB}return new qa(r,i,t,n,s,a)}class Wf{constructor(t,n){this.config=t,this.changes=n}addSteps(t,n,r){let o=[];for(let l=0;l<n.length;l++){let c=Array.isArray(r)?r[l]:r,u=0;n[l].forEach((f,p,m,y)=>{o.push(new qa(f+u,p+u,m,y,f==p?fn.none:[new fn(p-f,c)],m==y?fn.none:[new fn(y-m,c)])),u=y-m-(p-f)})}if(o.length==0)return this;let i=eI(o,this.config.combine),s=qa.merge(this.changes,i,this.config.combine),a=s;for(let l=0;l<a.length;l++){let c=a[l];if(c.fromA==c.toA||c.fromB==c.toB||!i.some(f=>f.toB>c.fromB&&f.fromB<c.toB))continue;let u=Tte(this.config.doc.content,t.content,c,this.config.encoder);u.length==1&&u[0].fromB==0&&u[0].toB==c.toB-c.fromB||(a==s&&(a=s.slice()),u.length==1?a[l]=u[0]:(a.splice(l,1,...u),l+=u.length-1))}return new Wf(this.config,a)}get startDoc(){return this.config.doc}map(t){let n=r=>{let o=t(r);return o===r.data?r:new fn(r.length,o)};return new Wf(this.config,this.changes.map(r=>new qa(r.fromA,r.toA,r.fromB,r.toB,r.deleted.map(n),r.inserted.map(n))))}changedRange(t,n){if(t==this)return null;let r=n&&A7e(n),o=r?r.toB-r.fromB-(r.toA-r.fromA):0;function i(f){return!r||f<=r.fromA?f:f+o}let s=r?r.fromB:2e8,a=r?r.toB:-2e8;function l(f,p=f){s=Math.min(f,s),a=Math.max(p,a)}let c=this.changes,u=t.changes;for(let f=0,p=0;f<c.length&&p<u.length;){let m=c[f],y=u[p];m&&y&&M7e(m,y,i)?(f++,p++):y&&(!m||i(m.fromB)>=y.fromB)?(l(y.fromB,y.toB),p++):(l(i(m.fromB),i(m.toB)),f++)}return s<=a?{from:s,to:a}:null}static create(t,n=(o,i)=>o===i?o:null,r=Ete){return new Wf({combine:n,doc:t,encoder:r},[])}}Wf.computeDiff=Tte;function eI(e,t,n=0,r=e.length){if(r==n+1)return[e[n]];let o=n+r>>1;return qa.merge(eI(e,t,n,o),eI(e,t,o,r),t)}function _B(e){let t=2e8,n=-2e8;for(let r=0;r<e.length;r++){let o=e[r];t!=2e8&&(t=o.map(t,-1),n=o.map(n,1)),o.forEach((i,s,a,l)=>{t=Math.min(t,a),n=Math.max(n,l)})}return t==2e8?null:{from:t,to:n}}function A7e(e){let t=_B(e);if(!t)return null;let n=_B(e.map(r=>r.invert()).reverse());return{fromA:n.from,toA:n.to,fromB:t.from,toB:t.to}}function M7e(e,t,n){return n(e.fromB)==t.fromB&&n(e.toB)==t.toB&&AB(e.deleted,t.deleted)&&AB(e.inserted,t.inserted)}function AB(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n].length!=t[n].length||e[n].data!==t[n].data)return!1;return!0}const N7e=e=>e;function _te(e,t=N7e){const n=se.useSyncExternalStore(e.subscribe,se.useCallback(()=>t(e.getState()),[e,t]),se.useCallback(()=>t(e.getInitialState()),[e,t]));return se.useDebugValue(n),n}var R7e=Object.defineProperty,I7e=(e,t,n)=>t in e?R7e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HA=(e,t,n)=>I7e(e,typeof t!="symbol"?t+"":t,n);const MB=e=>{let t;const n=new Set,r=(a,l)=>{const c=typeof a=="function"?a(t):a;if(!Object.is(c,t)){const u=t;t=l??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(f=>f(t,u))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>s,subscribe:a=>(n.add(a),()=>n.delete(a))},s=t=e(r,o,i);return i},NB=e=>e?MB(e):MB;function O7e(e){const{properties:t,required:n,$defs:r,...o}=e.parameters;return{schema:{type:"object",description:e.description,properties:{type:{type:"string",enum:[e.name]},...t},required:["type",...n??[]],additionalProperties:!1,...o},$defs:r}}function Ate(e){const t=e.map(r=>O7e(r)),n={};for(const r of t)for(const o in r.$defs){if(n[o]&&!v7e(n[o],r.$defs[o]))throw new Error(`Duplicate, but different definition for ${o}`);n[o]=r.$defs[o]}return{type:"object",properties:{operations:{type:"array",items:{anyOf:t.map(r=>r.schema)}}},additionalProperties:!1,required:["operations"],$defs:Object.keys(n).length>0?n:void 0}}function P7e(e){return new ReadableStream({async start(t){try{for await(const n of e)t.enqueue(n);t.close()}catch(n){t.error(n)}}})}function xb(e){if(e.locked)throw new Error("Stream (source) is already locked and cannot be iterated.");const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{if(t.locked)throw new Error("Stream is already locked and cannot be iterated again.");const n=t.getReader();return{async next(){const{done:r,value:o}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:o}}}},t}function Mte(e){return xb(P7e(e))}async function*D7e(e){var t;let n=0,r=!0,o;for await(const i of e)if((t=i.operations)!=null&&t.length){for(let s=n;s<i.operations.length;s++){const a=i.operations[s];o=a,yield{partialOperation:a,isUpdateToPreviousOperation:s===n&&!r,isPossiblyPartial:s===i.operations.length-1},r=!1}n=i.operations.length-1}if(!o)throw new Error("No operations seen");yield{partialOperation:o,isUpdateToPreviousOperation:!0,isPossiblyPartial:!1}}async function*Nte(e,t){let n=!1;for await(const r of e){const o=r.operation;o.ok?(yield{operation:o.value,isUpdateToPreviousOperation:n?!1:r.isUpdateToPreviousOperation,isPossiblyPartial:r.isPossiblyPartial},n=!1):(n=n||!r.isUpdateToPreviousOperation,t?.({...r,operation:o}))}}async function*Rte(e,t){for await(const n of e){const r=t.find(o=>o.name===n.partialOperation.type);if(!r){yield{operation:{ok:!1,error:`No matching function for ${n.partialOperation.type}`},isUpdateToPreviousOperation:n.isUpdateToPreviousOperation,isPossiblyPartial:n.isPossiblyPartial};continue}yield{operation:r.validate(n.partialOperation),isUpdateToPreviousOperation:n.isUpdateToPreviousOperation,isPossiblyPartial:n.isPossiblyPartial}}}async function*$7e(e,t){const n=Rte(e,t);yield*Nte(n,r=>{if(!r.isPossiblyPartial)throw new Error("invalid operation: "+r.operation.error)})}async function*j7e(e,t){const n=Rte(e,t);yield*Nte(n,r=>{throw new Error("invalid operation: "+r.operation.error)})}async function L7e(e,t){const{_generateObjectOptions:n,...r}=t;if(n&&("output"in n||"schema"in n))throw new Error("Cannot provide output or schema in _generateObjectOptions");const o={output:"object",schema:AP(Ate(e)),mode:r.model.provider==="mistral.chat"||r.model.provider==="google.generative-ai"?"auto":"tool",...r,...n??{}},i=await L8e(o),s=z7e(i.object);if(!s.ok)throw new Error(s.error);let a;return{streamObjectResult:void 0,generateObjectResult:i,get operationsSource(){return a||(a=Mte(j7e(s.value,e))),a},async getGeneratedOperations(){return i.object}}}function z7e(e){if(!e||typeof e!="object"||!("operations"in e)||!Array.isArray(e.operations))return{ok:!1,error:"No operations returned"};const t=e.operations;async function*n(){for(const r of t)yield{partialOperation:r,isUpdateToPreviousOperation:!1,isPossiblyPartial:!1}}return{ok:!0,value:n()}}async function B7e(e,t,n=()=>{}){const{_streamObjectOptions:r,...o}=t;if(r&&("output"in r||"schema"in r))throw new Error("Cannot provide output or schema in _streamObjectOptions");const i={output:"object",schema:AP(Ate(e)),mode:o.model.provider==="mistral.chat"||o.model.provider==="google.generative-ai"?"auto":"tool",...o,...t._streamObjectOptions??{}},s=H8e(i);let a;const[l,c]=s.fullStream.tee(),u=(async()=>{let f={operations:[]};const p=xb(H7e(c));for await(const m of p)m&&typeof m=="object"&&"operations"in m&&(f=m);return f})();return{streamObjectResult:s,generateObjectResult:void 0,get operationsSource(){return a||(a=Mte($7e(D7e(F7e(V7e(xb(l)),n)),e))),a},async getGeneratedOperations(){return u}}}async function*F7e(e,t){let n=!0;for await(const r of e)n&&(t(),n=!1),yield r}function V7e(e){return xb(e.pipeThrough(new TransformStream({transform(t,n){switch(t.type){case"object":n.enqueue(t.object);break;case"text-delta":case"finish":break;case"error":n.error(t.error);break;default:{const r=t;throw new Error(`Unsupported chunk type: ${r}`)}}}})))}function H7e(e){return xb(e.pipeThrough(new TransformStream({transform(t,n){switch(t.type){case"object":n.enqueue(t.object);break;case"text-delta":case"finish":break;case"error":break;default:{const r=t;throw new Error(`Unsupported chunk type: ${r}`)}}}})))}function zP(e){return(e.type==="paragraph"||!e.type)&&!e.content||Array.isArray(e.content)&&e.content.length===0}class U7e{constructor(t,n,r){this.messages=t,this.llmResult=n,this.streamTools=r}async*applyToolCalls(){let t=this.llmResult.operationsSource;for(const n of this.streamTools)t=n.execute(t);yield*t}async execute(){for await(const t of this.applyToolCalls());}async _logToolCalls(){for await(const t of this.llmResult.operationsSource)console.log(JSON.stringify(t,null,2))}}function G7e(e,t,n=!0,r=!0){let o=0,i=e.length;if(n)for(;o<i&&t(e[o]);)o++;if(r)for(;i>o&&t(e[i-1]);)i--;return e.slice(o,i)}function BP(e,t){return G7e(e,n=>zP(n)&&t?.cursorBlockId!==n.id,t?.trimStart??!1,t?.trimEnd??!0)}function q7e(e,t){const n=e.getTextCursorPosition(),r=[];for(const o of t){const i=o.id===n.block.id;r.push({id:o.id,block:o.block}),i&&r.push({cursor:!0})}return r}async function tI(e,t){return await Promise.all(e.map(async n=>({id:n.id,block:await t(n)})))}function xk(e){return e.flatMap(t=>[{...t,children:[]},...xk(t.children)])}function Ite(e){return e.map(t=>typeof t=="object"&&t&&"id"in t?{...t,id:`${t.id}$`}:t)}async function Ote(e,t){const n=e.getTextCursorPosition().block.id,r=BP(e.document,{cursorBlockId:n}),o=await tI(xk(r),async s=>e.blocksToHTMLLossy([s])),i=q7e(e,o).filter(s=>"cursor"in s||!(t.excludeBlockIds||[]).includes(s.id));return{htmlBlocks:Ite(i)}}async function Pte(e,t){const n=await tI(xk(t.selectedBlocks),async r=>e.blocksToHTMLLossy([r]));return{htmlSelectedBlocks:Ite(n),htmlDocument:(await tI(xk(e.document),async r=>e.blocksToHTMLLossy([r]))).map(({block:r})=>({block:r}))}}function Z7e(e){return[{role:"system",content:"You're manipulating a selected part of a text document using HTML blocks. \n      Make sure to follow the json schema provided and always include the trailing $ in ids. \n      List items are 1 block with 1 list item each, so block content `<ul><li>item1</li></ul>` is valid, but `<ul><li>item1</li><li>item2</li></ul>` is invalid. We'll merge them automatically.\n      This is the selection as an array of html blocks:"},{role:"system",content:JSON.stringify(e.htmlSelectedBlocks)},{role:"system",content:"This is the entire document (INCLUDING the selected text), find the selected text in there to understand the context:"},{role:"system",content:JSON.stringify(e.htmlDocument)},{role:"system",content:"The user asks you to do the following:"},{role:"user",content:e.userPrompt}]}function W7e(e){return[{role:"system",content:"You're manipulating a text document using HTML blocks. \n        Make sure to follow the json schema provided. When referencing ids they MUST be EXACTLY the same (including the trailing $). \n        List items are 1 block with 1 list item each, so block content `<ul><li>item1</li></ul>` is valid, but `<ul><li>item1</li><li>item2</li></ul>` is invalid. We'll merge them automatically.\n        For code blocks, you can use the `data-language` attribute on a code block to specify the language.\n        This is the document as an array of html blocks (the cursor is BETWEEN two blocks as indicated by cursor: true):"},{role:"system",content:JSON.stringify(e.htmlBlocks)},{role:"system",content:'First, determine what part of the document the user is talking about. You SHOULD probably take cursor info into account if needed.\n       EXAMPLE: if user says "below" (without pointing to a specific part of the document) he / she probably indicates the block(s) after the cursor. \n       EXAMPLE: If you want to insert content AT the cursor position (UNLESS indicated otherwise by the user), \n       then you need `referenceId` to point to the block before the cursor with position `after` (or block below and `before`).\n      \n      '+(e.isEmptyDocument?"Because the document is empty, first update the empty block before adding new blocks.":"Prefer updating existing blocks over removing and adding (but this also depends on the user's question).")},{role:"system",content:"The user asks you to do the following:"},{role:"user",content:e.userPrompt}]}const K7e=async(e,t)=>{const n=BP(e.document).length===0;if(t.selectedBlocks){const r=await Pte(e,{selectedBlocks:t.selectedBlocks});return t.previousMessages?[...t.previousMessages,{role:"system",content:`After processing the previous response, this is the updated selection.
            Ignore previous documents, you MUST issue operations against this latest version of the document:`},{role:"system",content:JSON.stringify(r.htmlSelectedBlocks)},{role:"system",content:"This is the updated entire document:"},{role:"system",content:JSON.stringify(r.htmlDocument)},{role:"system",content:`You SHOULD use "update" operations to update blocks you added / edited previously 
          (unless the user explicitly asks you otherwise to add or delete other blocks).
          
          The user now asks you to do the following:`},{role:"user",content:t.userPrompt}]:Z7e({...r,userPrompt:t.userPrompt})}else{const r=await Ote(e,t);return t.previousMessages?[...t.previousMessages,{role:"system",content:`After processing the previous response, this is the updated document.
            Ignore previous documents, you MUST issue operations against this latest version of the document:`},{role:"system",content:JSON.stringify(r.htmlBlocks)},{role:"system",content:`You SHOULD use "update" operations to update blocks you added / edited previously 
          (unless the user explicitly asks you otherwise to add or delete other blocks).
          
          The user now asks you to do the following:`},{role:"user",content:t.userPrompt}]:W7e({...r,userPrompt:t.userPrompt,isEmptyDocument:n})}};function Y7e(e){let t,n=!1;return e.descendants((r,o)=>n?!1:(r.isText&&(n=!0,t=o),!0)),t}function wk(e){var t;const n=so(e),{modification:r}=n.marks,o=[],i=new Nd(e.before);for(let s=0;s<e.steps.length;s++){const a=e.steps[s],l=new Qf(e.mapping.maps.slice(0,s)).invert();if(a.structure){if(a instanceof zn){if(a.to!==a.from+1||a.slice.openStart!==0||a.slice.openEnd!==1||a.slice.content.size!==2)throw new Error("Structure change is not in expected format (ReplaceStep)")}else if(a instanceof kr){if(a.insert!==1||a.slice.size!==2||a.gapTo!==a.to-1||a.gapFrom!==a.from+1)throw new Error("Structure change is not in expected format (ReplaceAroundStep)")}else throw new Error("Step is not a ReplaceStep or ReplaceAroundStep");const S=l.map(a.from),E=a.slice.content.firstChild,T=i.doc.resolve(i.mapping.map(S)).nodeAfter;let A=E.marks||[];E.type!==T.type&&(A=r.create({type:"nodeType",previousValue:T.type.name,newValue:E.type.name}).addToSet(A));const M=new Set([...Object.keys(E.attrs),...Object.keys(T.attrs)]);for(const O of M)E.attrs[O]!==T.attrs[O]&&(A=r.create({type:"attr",attrName:O,previousValue:T.attrs[O],newValue:E.attrs[O]}).addToSet(A));const R=i.steps.length;i.setNodeMarkup(i.mapping.map(S),E.type,E.attrs,A),o.push({prosemirrorSteps:i.steps.slice(R),selection:void 0,type:"replace"});continue}if(!(a instanceof zn))throw new Error("Step is not a ReplaceStep");const c=l.map(a.from),u=l.map(a.to);if(a.slice.openStart>0||a.slice.openEnd>0)throw new Error("Slice has openStart or openEnd > 0, but structure=false");o.push({prosemirrorSteps:[],selection:{anchor:i.mapping.map(c),head:i.mapping.map(u)},type:"select"});const f=a.slice.content.textBetween(0,a.slice.size),p=f===i.doc.textBetween(i.mapping.map(c),i.mapping.map(u));let m;if(p)m=a.slice.content.size;else if(f.length===0)m=a.slice.content.size;else{const S=Y7e(a.slice.content);if(S===void 0)throw new Error("unexpected: no first character found");m=S+1}let y=i.mapping.map(u);const b=i.mapping.map(u);let w=!0;for(let S=m;S<=a.slice.content.size;S++){const E=w&&c!==u,T=i.steps.length;if(E){const R=i.doc.resolve(i.mapping.map(c));(t=R.nodeAfter)!=null&&t.isBlock&&i.addNodeMark(R.pos,n.mark("deletion",{})),i.addMark(R.pos,y,n.mark("deletion",{})),y=i.mapping.map(u)}const A=new Ee(a.slice.content.cut(0,S),0,0);i.replace(b,y,A).addMark(b,b+A.content.size,n.mark("insertion",{})),i.doc.nodesBetween(b,b+A.content.size,(R,O)=>O<b||O>b+A.content.size?!0:(R.isBlock&&i.addNodeMark(O,n.mark("insertion",{})),!1)),y=i.mapping.slice(T).map(y);const M=Fe.near(i.doc.resolve(b+A.content.size),-1);o.push({prosemirrorSteps:i.steps.slice(T),selection:{anchor:M.from,head:M.from},type:E?"replace":"insert"}),w=!1}}return o}async function FP(e){const t=Math.random()*.3+.85;if(e.type==="select")await new Promise(n=>setTimeout(n,100*t));else if(e.type==="insert")await new Promise(n=>setTimeout(n,10*t));else if(e.type==="replace")await new Promise(n=>setTimeout(n,200*t));else throw new ga(e.type)}function VP(e,t){e.setMeta("addToHistory",!1),t.selection&&e.setMeta("aiAgent",{selection:{anchor:t.selection.anchor,head:t.selection.head}});for(const n of t.prosemirrorSteps)if(e.maybeStep(n).failed)throw new Error("failed to apply step");return e}function J7e(e,t,n){const r=new Nd(t);for(const s of e){const a=new zn(r.mapping.map(s.fromA),r.mapping.map(s.toA),n.slice(s.fromB,s.toB));r.step(a)}const o=r.mapping.invert();let i=r.doc.content.findDiffStart(n.content);for(;i!==null;){const s=n.resolve(i).nodeAfter,a=r.doc.resolve(i).nodeAfter;if(!s||!a)throw new Error("diffNode not found");const l=!s.isLeaf&&s.content.eq(a.content),c=l?1:Math.min(s.nodeSize,a.nodeSize),u=i+c,f=o.map(i),p=o.map(u);let m=e.length;for(let b=0;b<e.length;b++)if(e[b].fromA>=p){m=b;break}e.splice(m,0,{fromA:f,toA:p,fromB:i,toB:u,deleted:[],inserted:[],type:l?"node-type-or-attr-update":"mark-update"}),r.step(new zn(i,u,n.slice(i,u),l));const y=r.doc.content.findDiffStart(n.content);if(y===i)throw new Error("diffStart not moving");i=y}return e}const RB=(e,t)=>{const n=new Set,r=new Set;e.descendants(i=>{i.type.name==="tableCell"&&n.add(JSON.stringify(i.toJSON()))}),t.descendants(i=>{i.type.name==="tableCell"&&r.add(JSON.stringify(i.toJSON()))});const o=new Set([...n].filter(i=>r.has(i)));return{encodeCharacter:i=>i,encodeNodeStart:i=>{if(i.type.name==="tableCell"){const s=JSON.stringify(i.toJSON());return o.has(s)?s:i.type.name}return i.type.name},encodeNodeEnd:i=>{if(i.type.name==="tableCell"){const s=JSON.stringify(i.toJSON());return o.has(s)?s:-1}return-1},compareTokens:(i,s)=>i===s}};function HP(e,t,n=!1,r,o){const i=Ui(e.id,t),s=new Nd(t);D4(s,i.posBeforeNode,e.block,r,o);let a=s.doc,l=Wf.create(t,void 0,RB(t,a));if(l=l.addSteps(a,s.mapping.maps,0),n&&l.changes.length>0){const f=l.changes[l.changes.length-1],p=f.toA-f.fromA,m=f.toB-f.fromB;if(p>m){const y=t.slice(f.fromA+m,f.toA);s.step(new zn(f.toB,f.toB,y)),a=s.doc,l=Wf.create(l.startDoc,void 0,RB(l.startDoc,a)),l=l.addSteps(a,s.mapping.maps,0)}}const c=[],u=E7e(l.changes,a);for(let f=0;f<u.length;f++){const p=u[f],m=a.slice(p.fromB,p.toB);if(m.openEnd===1&&m.openStart===0&&(p.type="node-type-or-attr-update",m.size>2)){const y={fromA:p.fromA,toA:p.fromA+1,fromB:p.fromB,toB:p.fromB+1,deleted:[],inserted:[],type:"node-type-or-attr-update"},b={fromA:p.fromA+1,toA:p.toA,fromB:p.fromB+1,toB:p.toB,deleted:[],inserted:[]};u.splice(f,1,y,b),f++}}J7e(u,t,a);for(let f=0;f<u.length;f++){const p=u[f],m=a.slice(p.fromB,p.toB);if(m.openEnd>0&&m.size>1)throw new Error("unexpected, openEnd > 0 and size > 1, this should have been split into two steps");f===u.length-1&&n&&p.type==="mark-update"||c.push(new zn(p.fromA,p.toA,m,p.type==="node-type-or-attr-update"))}return c}function X7e(e,t){if(!e||!Array.isArray(e)||e.length===0)return{ok:!1,error:"blocks is required"};const n=[];for(const r of e){const o=t(r);if(!o.ok)return{ok:!1,error:`Invalid block: ${o.error}`};n.push(o.value)}return{ok:!0,value:n}}function Q7e(e){return(t,n)=>{const r=typeof e.schema=="function"?e.schema(t):e.schema;return{name:"add",description:e.description,parameters:{type:"object",properties:{referenceId:{type:"string",description:"MUST be an id of a block in the document"},position:{type:"string",enum:["before","after"],description:"`after` to add blocks AFTER (below) the block with `referenceId`, `before` to add the block BEFORE (above)"},blocks:{items:r.block,type:"array"}},required:["referenceId","position","blocks"],$defs:r.$defs},validate:o=>{if(o.type!=="add")return{ok:!1,error:"invalid operation type"};if(o.position!=="before"&&o.position!=="after")return{ok:!1,error:"invalid position"};if(!o.referenceId||!o.blocks)return{ok:!1,error:"referenceId and blocks are required"};let i=o.referenceId;if(n.idsSuffixed){if(!(i!=null&&i.endsWith("$")))return{ok:!1,error:"referenceId must end with $"};i=i.slice(0,-1)}if(!t.getBlock(i))return{ok:!1,error:"referenceId not found"};const s=X7e(o.blocks,a=>e.validateBlock(a,t));return s.ok?{ok:!0,value:{type:o.type,referenceId:i,position:o.position,blocks:s.value}}:s},execute:async function*(o){var i;let s=[];const a={};for await(const l of o){if(l.isUpdateToPreviousOperation||(s=[]),l.operation.type!=="add"){yield l;continue}const c=l.operation,u=await e.toJSONToolCall(t,{...l,operation:c});if(u&&!(l.isPossiblyPartial&&zP(u.blocks[u.blocks.length-1]))){for(let f=0;f<u.blocks.length;f++){const p=u.blocks[f],m=t.prosemirrorState.tr;let y=[];if(f<s.length){const b=await e.rebaseTool(s[f],t),w=HP({id:s[f],block:p},b.doc,!1).map(S=>S.map(b.invertMap));for(const S of w)m.step(S.map(m.mapping));y=wk(m),y=y.filter(S=>S.type!=="select")}else{const b=c.position==="after"?a[c.referenceId]:void 0,w=LW(m,[p],f>0?s[f-1]:b||c.referenceId,f>0?"after":c.position);s.push(...w.map(S=>S.id)),y=wk(m)}y.find(b=>b.type==="replace");for(const b of y)n.withDelays&&await FP(b),t.transact(w=>{VP(w,b)}),(i=n.onBlockUpdate)==null||i.call(n,s[f])}l.isPossiblyPartial||c.position==="after"&&(a[c.referenceId]=s[s.length-1])}}}}}}function eBe(e){return(t,n)=>{const r=typeof e.schema=="function"?e.schema(t):e.schema;return{name:"update",description:e.description,parameters:{type:"object",properties:{id:{type:"string",description:"id of block to update"},block:r.block},required:["id","block"],$defs:r.$defs},validate:o=>{if(o.type!=="update")return{ok:!1,error:"invalid operation type"};if(!o.id)return{ok:!1,error:"id is required"};let i=o.id;if(n.idsSuffixed){if(!(i!=null&&i.endsWith("$")))return{ok:!1,error:"id must end with $"};i=i.slice(0,-1)}if(!o.block)return{ok:!1,error:"block is required"};const s=t.getBlock(i);if(!s)return console.error("BLOCK NOT FOUND",i),{ok:!1,error:"block not found"};const a=e.validateBlock(o.block,t,s.type);return a.ok?{ok:!0,value:{type:o.type,id:i,block:a.value}}:a},execute:async function*(o){var i;let s=50;const a=n.updateSelection?{from:tR(t,n.updateSelection.from),to:tR(t,n.updateSelection.to)}:void 0;for await(const l of o){if(l.operation.type!=="update"){yield l;continue}const c=l.operation;if(l.isPossiblyPartial){const E=JSON.stringify(c.block).length;if(E<s)continue;s=E+50}else s=50;const u=await e.rebaseTool(c.id,t),f=a?u.invertMap.invert().map(a.from()):void 0,p=a?u.invertMap.invert().map(a.to()):void 0,m=await e.toJSONToolCall(t,l);if(!m)continue;const y=HP(m,u.doc,l.isPossiblyPartial,f,p);if(y.length===1&&l.isPossiblyPartial)continue;const b=y.map(E=>E.map(u.invertMap)),w=new Nd(t.prosemirrorState.doc);for(const E of b)w.step(E.map(w.mapping));const S=wk(w);for(const E of S)n.withDelays&&await FP(E),t.transact(T=>{VP(T,E)}),(i=n.onBlockUpdate)==null||i.call(n,c.id)}}}}}const tBe=(e,t)=>({name:"delete",description:"Delete a block",parameters:{type:"object",properties:{id:{type:"string",description:"id of block to delete"}},required:["id"]},validate:n=>{if(n.type!=="delete")return{ok:!1,error:"invalid operation type"};if(!n.id)return{ok:!1,error:"id is required"};let r=n.id;if(t.idsSuffixed){if(!(r!=null&&r.endsWith("$")))return{ok:!1,error:"id must end with $"};r=r.slice(0,-1)}return e.getBlock(r)?{ok:!0,value:{type:"delete",id:r}}:{ok:!1,error:"block not found"}},execute:async function*(n){var r;for await(const o of n){if(o.operation.type!=="delete"){yield o;continue}const i=o.operation,s=e.prosemirrorState.tr;ZN(s,[i.id],[]);const a=wk(s);for(const l of a)t.withDelays&&await FP(l),e.transact(c=>{VP(c,l)}),(r=t.onBlockUpdate)==null||r.call(t,i.id)}}});function IB(e){const t=e.lastIndexOf("<"),n=e.lastIndexOf(">");let r=e;if(t>n&&(r=e.substring(0,t),!r.trim()))return;const o=r.match(/&[a-zA-Z0-9]*$/);o&&(r=r.substring(0,r.length-o[0].length));const i=new DOMParser().parseFromString(`<div>${r}</div>`,"text/html").body.firstChild;return i?i.innerHTML:""}function nBe(e){let t;if(uQ(e.prosemirrorState,n=>{t=n}),!t)throw new Error("applySuggestionsTr is not set");return t}function rBe(e,t){const n=t.mapping.invert();return{doc:t.doc,tr:()=>new Nd(t.doc),invertMap:n,rebaseTr:r=>{if(r.steps.length===0)throw new Error("No steps to apply");let o=e.prosemirrorState.tr;for(const i of r.steps){const s=i.map(n);if(!s)throw new Error("Step is not mapped");o=o.step(s)}return o}}}async function OB(e,t){var n;const r=nBe(t),o=dK(r.doc,e);if(!o)throw new Error("block not found");const i=await t.blocksToHTMLLossy([{...o,children:[]}]),s=(n=window.__TEST_OPTIONS)==null?void 0:n.mockID,a=await t.tryParseHTMLToBlocks(i);if(window.__TEST_OPTIONS&&(window.__TEST_OPTIONS.mockID=s),a.length!==1)throw new Error("html diff invalid block count");const l=a[0];if(l.id=e,HP({id:e,block:l},r.doc).length)throw new Error("html diff");return rBe(t,r)}function PB(e){return typeof e!="string"?{ok:!1,error:"block must be a string"}:{ok:!0,value:e}}const UA={add:Q7e({description:"Insert new blocks",schema:{block:{type:"string",description:"html of block (MUST be a single HTML element)"}},validateBlock:PB,rebaseTool:OB,toJSONToolCall:async(e,t)=>{var n;const r=(n=window.__TEST_OPTIONS)==null?void 0:n.mockID,o=(await Promise.all(t.operation.blocks.map(async i=>{const s=t.isPossiblyPartial?IB(i):i;return s?(await e.tryParseHTMLToBlocks(s)).map(a=>(delete a.id,a)):[]}))).flat();if(window.__TEST_OPTIONS&&(window.__TEST_OPTIONS.mockID=r),o.length!==0)return{...t.operation,blocks:o}}}),update:eBe({description:"Update a block",schema:{block:{type:"string",description:"html of block (MUST be a single HTML element)"}},validateBlock:PB,rebaseTool:OB,toJSONToolCall:async(e,t)=>{const n=t.isPossiblyPartial?IB(t.operation.block):t.operation.block;if(!n)return;const r=(await e.tryParseHTMLToBlocks(n))[0];return window.__TEST_OPTIONS&&(window.__TEST_OPTIONS.mockID=void 0),delete r.id,{...t.operation,block:r}}}),delete:tBe};function oBe(e,t,n,r,o){const i={add:!0,update:!0,delete:!0,...n};return[...i.update?[UA.update(e,{idsSuffixed:!0,withDelays:t,updateSelection:r,onBlockUpdate:o})]:[],...i.add?[UA.add(e,{idsSuffixed:!0,withDelays:t,onBlockUpdate:o})]:[],...i.delete?[UA.delete(e,{idsSuffixed:!0,withDelays:t,onBlockUpdate:o})]:[]]}const Dte={getStreamTools:oBe,defaultPromptBuilder:K7e,promptHelpers:{getDataForPromptNoSelection:Ote,getDataForPromptWithSelection:Pte}};async function iBe(e,t){const{userPrompt:n,useSelection:r,deleteEmptyCursorBlock:o,stream:i,onStart:s,withDelays:a,dataFormat:l,previousResponse:c,...u}={maxRetries:2,deleteEmptyCursorBlock:!0,stream:!0,withDelays:!0,dataFormat:Dte,...t},f=t.promptBuilder??l.defaultPromptBuilder,p=l.getStreamTools,m=r?void 0:e.getTextCursorPosition().block,y=m&&o&&zP(m)&&BP(e.document).length>0?m.id:void 0,b=r?e.getSelectionCutBlocks():void 0;let w;c&&(w=c.messages.map(A=>A.role==="user"&&typeof A.content=="string"?{role:"system",content:`USER_MESSAGE: ${A.content}`}:A),w.push({role:"system",content:`ASSISTANT_MESSAGE: These are the operations returned by a previous LLM call: 
`+JSON.stringify(await c.llmResult.getGeneratedOperations())}));const S=await f(e,{selectedBlocks:b?.blocks,userPrompt:n,excludeBlockIds:y?[y]:void 0,previousMessages:w}),E=p(e,a,t.defaultStreamTools,b?{from:b._meta.startPos,to:b._meta.endPos}:void 0,t.onBlockUpdate);let T;return i?T=await B7e(E,{messages:S,...u},()=>{y&&e.removeBlocks([y]),s?.()}):(T=await L7e(E,{messages:S,...u}),y&&e.removeBlocks([y]),s?.()),new U7e(S,T,E)}const sBe={html:Dte},DB=new Ht("blocknote-agent-cursor");function aBe(e){return new kt({key:DB,view:t=>({}),state:{init:()=>({selection:void 0}),apply:(t,n)=>{const r=t.getMeta("aiAgent");return r?{selection:r.selection}:{selection:void 0}}},props:{decorations:t=>{const{doc:n}=t,{selection:r}=DB.getState(t),o=[];if(!r)return Rt.create(n,[]);o.push(Zt.widget(r.head,()=>lBe(e),{key:"agent-cursor",side:10}));const i=Math.min(r.anchor,r.head),s=Math.max(r.anchor,r.head);return o.push(Zt.inline(i,s,T4(e),{inclusiveEnd:!0,inclusiveStart:!1})),Rt.create(n,o)}}})}const lBe=e=>{const t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base"),t.setAttribute("data-active","true");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${e.color}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${e.color}`),r.insertBefore(document.createTextNode(e.name),null),n.insertBefore(r,null),t.insertBefore(document.createTextNode(""),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode(""),null),t},cBe=new Ht("blocknote-ai-plugin");let $te=class extends io{constructor(t,n){super(),HA(this,"previousRequestOptions"),HA(this,"_store",NB()(r=>({aiMenuState:"closed"}))),HA(this,"options"),this.editor=t,this.options=NB()(r=>({dataFormat:sBe.html,stream:!0,...n})),this.addProsemirrorPlugin(new kt({key:cBe,filterTransaction:r=>{var o;const i=this.store.getState().aiMenuState;return!(i!=="closed"&&i.status==="ai-writing"&&(o=r.getMeta(Yq))!=null&&o.fixTables)}})),this.addProsemirrorPlugin(x5e()),this.addProsemirrorPlugin(aBe(n.agentCursor||{name:"AI",color:"#8bc6ff"}))}static key(){return"ai"}get store(){return this._store}openAIMenuAtBlock(t){this.editor.setForceSelectionVisible(!0),this.editor.isEditable=!1,this._store.setState({aiMenuState:{blockId:t,status:"user-input"}})}closeAIMenu(){this.previousRequestOptions=void 0,this._store.setState({aiMenuState:"closed",llmResponse:void 0}),this.editor.setForceSelectionVisible(!1),this.editor.isEditable=!0,this.editor.focus()}acceptChanges(){var t;const n=this.editor.prosemirrorState.doc;this.editor.exec((r,o)=>V7(r,i=>{o?.(i.setMeta("addToHistory",!1))})),this.editor.exec((r,o)=>{const i=r.tr;i.replace(0,i.doc.content.size,new Ee(ge.from(n),0,0));const s=r.apply(i);return uQ(s,a=>{o?.(i.replace(0,i.doc.content.size,new Ee(ge.from(a.doc),0,0)))})}),(t=this.editor.forkYDocPlugin)==null||t.merge({keepChanges:!0}),this.closeAIMenu()}rejectChanges(){var t;this.editor.exec((n,r)=>V7(n,o=>{r?.(o.setMeta("addToHistory",!1))})),(t=this.editor.forkYDocPlugin)==null||t.merge({keepChanges:!1}),this.closeAIMenu()}async retry(){const t=this.store.getState().aiMenuState;if(t==="closed"||t.status!=="error"||!this.previousRequestOptions)throw new Error("retry() is only valid when a previous response failed");if(t.error instanceof yQ||t.error instanceof KR)return this.callLLM(this.previousRequestOptions);{const n=t.error instanceof Error?t.error.message:String(t.error);return this.callLLM({userPrompt:`An error occured: ${n}
            Please retry the previous user request.`})}}setAIResponseStatus(t){const n=this.store.getState().aiMenuState;if(n!=="closed")if(t==="ai-writing"&&this.editor.setForceSelectionVisible(!1),typeof t=="object"){if(t.status!=="error")throw new ga(t.status);this._store.setState({aiMenuState:{status:t.status,error:t.error,blockId:n.blockId}})}else this._store.setState({aiMenuState:{status:t,blockId:n.blockId}})}async callLLM(t){var n;this.setAIResponseStatus("thinking"),(n=this.editor.forkYDocPlugin)==null||n.fork();let r;try{const o={...this.options.getState(),...t,previousResponse:this.store.getState().llmResponse};this.previousRequestOptions=o,r=await iBe(this.editor,{...o,onStart:()=>{var i;this.setAIResponseStatus("ai-writing"),(i=t.onStart)==null||i.call(t)},onBlockUpdate:i=>{var s;this._store.setState({aiMenuState:{blockId:i,status:"ai-writing"}}),(s=t.onBlockUpdate)==null||s.call(t,i)}}),this._store.setState({llmResponse:r}),await r.execute(),this.setAIResponseStatus("user-reviewing")}catch(o){this.setAIResponseStatus({status:"error",error:o}),console.warn("Error calling LLM",o)}return r}};function uBe(e){return t=>new $te(t,e)}function Nh(e){return e.extension($te)}var jte={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$B=se.createContext&&se.createContext(jte),dBe=["attr","size","title"];function fBe(e,t){if(e==null)return{};var n=hBe(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hBe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Sk(){return Sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sk.apply(this,arguments)}function jB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function kk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(n),!0).forEach(function(r){pBe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pBe(e,t,n){return t=mBe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mBe(e){var t=gBe(e,"string");return typeof t=="symbol"?t:t+""}function gBe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lte(e){return e&&e.map((t,n)=>se.createElement(t.tag,kk({key:n},t.attr),Lte(t.child)))}function sl(e){return t=>se.createElement(yBe,Sk({attr:kk({},e.attr)},t),Lte(e.child))}function yBe(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=fBe(e,dBe),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),se.createElement("svg",Sk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:kk(kk({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&se.createElement("title",null,i),e.children)};return $B!==void 0?se.createElement($B.Consumer,null,n=>t(n)):t(jte)}function zte(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function LB(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.8492 11.6983L17.1421 10.9912L7.24264 20.8907H3V16.648L14.3137 5.33432L19.9706 10.9912C20.3611 11.3817 20.3611 12.0149 19.9706 12.4054L12.8995 19.4765L11.4853 18.0622L17.8492 11.6983ZM15.7279 9.57696L14.3137 8.16274L5 17.4765V18.8907H6.41421L15.7279 9.57696ZM18.5563 2.50589L21.3848 5.33432C21.7753 5.72484 21.7753 6.35801 21.3848 6.74853L19.9706 8.16274L15.7279 3.9201L17.1421 2.50589C17.5327 2.11537 18.1658 2.11537 18.5563 2.50589Z"},child:[]}]})(e)}function bBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15.1986 9.94447C14.7649 9.5337 14.4859 8.98613 14.4085 8.39384L14.0056 5.31138L11.275 6.79724C10.7503 7.08274 10.1433 7.17888 9.55608 7.06948L6.49998 6.50015L7.06931 9.55625C7.17871 10.1435 7.08257 10.7505 6.79707 11.2751L5.31121 14.0057L8.39367 14.4086C8.98596 14.4861 9.53353 14.7651 9.94431 15.1987L12.0821 17.4557L13.4178 14.6486C13.6745 14.1092 14.109 13.6747 14.6484 13.418L17.4555 12.0823L15.1986 9.94447ZM15.2238 15.5079L13.0111 20.1581C12.8687 20.4573 12.5107 20.5844 12.2115 20.442C12.1448 20.4103 12.0845 20.3665 12.0337 20.3129L8.49229 16.5741C8.39749 16.474 8.27113 16.4096 8.13445 16.3918L3.02816 15.7243C2.69958 15.6814 2.46804 15.3802 2.51099 15.0516C2.52056 14.9784 2.54359 14.9075 2.5789 14.8426L5.04031 10.3192C5.1062 10.1981 5.12839 10.058 5.10314 9.92253L4.16 4.85991C4.09931 4.53414 4.3142 4.22086 4.63997 4.16017C4.7126 4.14664 4.78711 4.14664 4.85974 4.16017L9.92237 5.10331C10.0579 5.12855 10.198 5.10637 10.319 5.04048L14.8424 2.57907C15.1335 2.42068 15.4979 2.52825 15.6562 2.81931C15.6916 2.88421 15.7146 2.95507 15.7241 3.02833L16.3916 8.13462C16.4095 8.2713 16.4739 8.39766 16.5739 8.49245L20.3127 12.0338C20.5533 12.2617 20.5636 12.6415 20.3357 12.8821C20.2849 12.9357 20.2246 12.9795 20.1579 13.0112L15.5078 15.224C15.3833 15.2832 15.283 15.3835 15.2238 15.5079ZM16.0206 17.435L17.4348 16.0208L21.6775 20.2634L20.2633 21.6776L16.0206 17.435Z"},child:[]}]})(e)}function vBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function xBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 18H16.5C17.8807 18 19 16.8807 19 15.5C19 14.1193 17.8807 13 16.5 13H3V11H16.5C18.9853 11 21 13.0147 21 15.5C21 17.9853 18.9853 20 16.5 20H15V22L11 19L15 16V18ZM3 4H21V6H3V4ZM9 18V20H3V18H9Z"},child:[]}]})(e)}function wBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function SBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M6.23509 6.45329C4.85101 7.89148 4 9.84636 4 12C4 16.4183 7.58172 20 12 20C13.0808 20 14.1116 19.7857 15.0521 19.3972C15.1671 18.6467 14.9148 17.9266 14.8116 17.6746C14.582 17.115 13.8241 16.1582 12.5589 14.8308C12.2212 14.4758 12.2429 14.2035 12.3636 13.3943L12.3775 13.3029C12.4595 12.7486 12.5971 12.4209 14.4622 12.1248C15.4097 11.9746 15.6589 12.3533 16.0043 12.8777C16.0425 12.9358 16.0807 12.9928 16.1198 13.0499C16.4479 13.5297 16.691 13.6394 17.0582 13.8064C17.2227 13.881 17.428 13.9751 17.7031 14.1314C18.3551 14.504 18.3551 14.9247 18.3551 15.8472V15.9518C18.3551 16.3434 18.3168 16.6872 18.2566 16.9859C19.3478 15.6185 20 13.8854 20 12C20 8.70089 18.003 5.8682 15.1519 4.64482C14.5987 5.01813 13.8398 5.54726 13.575 5.91C13.4396 6.09538 13.2482 7.04166 12.6257 7.11976C12.4626 7.14023 12.2438 7.12589 12.012 7.11097C11.3905 7.07058 10.5402 7.01606 10.268 7.75495C10.0952 8.2232 10.0648 9.49445 10.6239 10.1543C10.7134 10.2597 10.7307 10.4547 10.6699 10.6735C10.59 10.9608 10.4286 11.1356 10.3783 11.1717C10.2819 11.1163 10.0896 10.8931 9.95938 10.7412C9.64554 10.3765 9.25405 9.92233 8.74797 9.78176C8.56395 9.73083 8.36166 9.68867 8.16548 9.64736C7.6164 9.53227 6.99443 9.40134 6.84992 9.09302C6.74442 8.8672 6.74488 8.55621 6.74529 8.22764C6.74529 7.8112 6.74529 7.34029 6.54129 6.88256C6.46246 6.70541 6.35689 6.56446 6.23509 6.45329ZM12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22Z"},child:[]}]})(e)}function kBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function CBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function EBe(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 4C9.4095 4 7.10606 5.23053 5.64274 7.14274L8 9.5H2V3.5L4.21863 5.71863C6.05061 3.452 8.85558 2 12 2 17.5228 2 22 6.47715 22 12H20C20 7.58172 16.4183 4 12 4ZM4 12C4 16.4183 7.58172 20 12 20 14.5905 20 16.894 18.7695 18.3573 16.8573L16 14.5 22 14.5V20.5L19.7814 18.2814C17.9494 20.548 15.1444 22 12 22 6.47715 22 2 17.5228 2 12H4Z"},child:[]}]})(e)}function Bte(e){return sl({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.0007 1.20825 18.3195 3.68108 20.7923 4.99992 18.3195 6.31876 17.0007 8.79159 15.6818 6.31876 13.209 4.99992 15.6818 3.68108 17.0007 1.20825ZM8.00065 4.33325 10.6673 9.33325 15.6673 11.9999 10.6673 14.6666 8.00065 19.6666 5.33398 14.6666.333984 11.9999 5.33398 9.33325 8.00065 4.33325ZM19.6673 16.3333 18.0007 13.2083 16.334 16.3333 13.209 17.9999 16.334 19.6666 18.0007 22.7916 19.6673 19.6666 22.7923 17.9999 19.6673 16.3333Z"},child:[]}]})(e)}function pg(e){if(!e.dictionary.ai)throw new Error("AI dictionary not found");return e.dictionary.ai}function TBe(){const e=ol();return pg(e.editor)}const _Be=e=>{const t=Qe(),{onManualPromptSubmit:n,promptText:r,onPromptTextChange:o}=e,[i,s]=k.useState(""),a=r||i,l=k.useCallback(async b=>{b.key==="Enter"&&n(a)},[a,n]),c=k.useCallback(b=>{const w=b.currentTarget.value;o&&o(w),r===void 0&&s(w)},[o,s,r]),u=k.useMemo(()=>V4(e.items,a),[a,e.items]),{selectedIndex:f,setSelectedIndex:p,handler:m}=_Y(u,b=>b.onItemClick()),y=k.useCallback(b=>{b.key==="Enter"?u.length>0?m(b):l(b):m(b)},[l,m,u.length]);return k.useEffect(()=>{p(0)},[a,p]),v.jsxs("div",{className:"bn-combobox",children:[v.jsx(t.Generic.Form.Root,{children:v.jsx(t.Generic.Form.TextInput,{className:"bn-combobox-input",name:"ai-prompt",variant:"large",icon:e.icon,value:a||"",autoFocus:!0,placeholder:e.placeholder,disabled:e.disabled,onKeyDown:y,onChange:c,autoComplete:"off",rightSection:e.rightSection},"input-"+e.disabled)}),v.jsx(t.SuggestionMenu.Root,{className:"bn-combobox-items",id:"ai-suggestion-menu",children:u.map((b,w)=>v.jsx(t.SuggestionMenu.Item,{className:Rn("bn-suggestion-menu-item",b.size==="small"?"bn-suggestion-menu-item-small":""),id:`bn-suggestion-menu-item-${w}`,isSelected:w===f,onClick:b.onItemClick,item:b},b.title))})]})};function ABe(e){const t=pg(e),n=Nh(e);return[{key:"continue_writing",title:t.ai_default_commands.continue_writing.title,aliases:t.ai_default_commands.continue_writing.aliases,icon:v.jsx(LB,{size:18}),onItemClick:async()=>{await n.callLLM({userPrompt:"Continue writing at the current cursor position related to the previous text. Add multiple blocks if needed. If the document looks like a template / draft, follow the template. Be extensive if needed.",defaultStreamTools:{add:!0,delete:!1,update:!1}})},size:"small"},{key:"summarize",title:t.ai_default_commands.summarize.title,aliases:t.ai_default_commands.summarize.aliases,icon:v.jsx(xBe,{size:18}),onItemClick:async()=>{await n.callLLM({userPrompt:"Summarize",defaultStreamTools:{add:!0,delete:!1,update:!1}})},size:"small"},{key:"action_items",title:t.ai_default_commands.add_action_items.title,aliases:t.ai_default_commands.add_action_items.aliases,icon:v.jsx(vBe,{size:18}),onItemClick:async()=>{await n.callLLM({userPrompt:"Add action items",defaultStreamTools:{add:!0,delete:!1,update:!1}})},size:"small"},{key:"write_anything",title:t.ai_default_commands.write_anything.title,aliases:t.ai_default_commands.write_anything.aliases,icon:v.jsx(LB,{size:18}),onItemClick:r=>{r(t.ai_default_commands.write_anything.prompt_placeholder)},size:"small"}]}function MBe(e){const t=pg(e),n=Nh(e);return[{key:"improve_writing",title:t.ai_default_commands.improve_writing.title,aliases:t.ai_default_commands.improve_writing.aliases,icon:v.jsx(wBe,{size:18}),onItemClick:async()=>{await n.callLLM({useSelection:!0,userPrompt:"Improve writing",defaultStreamTools:{add:!1,delete:!1,update:!0}})},size:"small"},{key:"fix_spelling",title:t.ai_default_commands.fix_spelling.title,aliases:t.ai_default_commands.fix_spelling.aliases,icon:v.jsx(CBe,{size:18}),onItemClick:async()=>{await n.callLLM({useSelection:!0,userPrompt:"Fix spelling",defaultStreamTools:{add:!1,delete:!1,update:!0}})},size:"small"},{key:"translate",title:t.ai_default_commands.translate.title,aliases:t.ai_default_commands.translate.aliases,icon:v.jsx(SBe,{size:18}),onItemClick:r=>{r(t.ai_default_commands.translate.prompt_placeholder)},size:"small"},{key:"simplify",title:t.ai_default_commands.simplify.title,aliases:t.ai_default_commands.simplify.aliases,icon:v.jsx(bBe,{size:18}),onItemClick:async()=>{await n.callLLM({useSelection:!0,userPrompt:"Simplify",defaultStreamTools:{add:!1,delete:!1,update:!0}})},size:"small"}]}function NBe(e){const t=pg(e),n=Nh(e);return[{key:"accept",title:t.ai_menu.actions.accept.title,aliases:t.ai_menu.actions.accept.aliases,icon:v.jsx(kBe,{size:18}),onItemClick:()=>{n.acceptChanges()},size:"small"},{key:"revert",title:t.ai_menu.actions.revert.title,aliases:t.ai_menu.actions.revert.aliases,icon:v.jsx(zte,{size:18}),onItemClick:()=>{n.rejectChanges()},size:"small"}]}function RBe(e){const t=pg(e),n=Nh(e);return[{key:"retry",title:t.ai_menu.actions.retry.title,aliases:t.ai_menu.actions.retry.aliases,icon:v.jsx(EBe,{size:18}),onItemClick:async()=>{await n.retry()},size:"small"},{key:"cancel",title:t.ai_menu.actions.cancel.title,aliases:t.ai_menu.actions.cancel.aliases,icon:v.jsx(zte,{size:18}),onItemClick:()=>{n.rejectChanges()},size:"small"}]}function IBe(e,t){return t==="user-input"?e.getSelection()?MBe(e):ABe(e):t==="user-reviewing"?NBe(e):t==="error"?RBe(e):[]}const OBe=e=>{const t=tt(),[n,r]=k.useState(""),o=TBe(),i=Qe(),s=Nh(t),a=_te(s.store,m=>m.aiMenuState!=="closed"?m.aiMenuState.status:"closed"),{items:l}=e,c=k.useMemo(()=>{let m=[];return l?m=l(t,a):m=IBe(t,a),m.map(y=>({...y,onItemClick:()=>{y.onItemClick(r)}}))},[l,a,t]),u=k.useCallback(async m=>{await s.callLLM({userPrompt:m,useSelection:t.getSelection()!==void 0})},[s,t]);k.useEffect(()=>{(a==="user-reviewing"||a==="error")&&r("")},[a]);const f=k.useMemo(()=>a==="thinking"?o.ai_menu.status.thinking:a==="ai-writing"?o.ai_menu.status.editing:a==="error"?o.ai_menu.status.error:o.ai_menu.input_placeholder,[a,o]),p=k.useMemo(()=>{if(a==="thinking"||a==="ai-writing")return v.jsx(i.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader bn-combobox-right-section"});if(a==="error")return v.jsx("div",{className:"bn-combobox-right-section bn-combobox-error",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 -960 960 960",width:"1em",fill:"currentColor",children:v.jsx("path",{d:"M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm0-160q17 0 28.5-11.5T520-480v-160q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640v160q0 17 11.5 28.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})})})},[i,a]);return v.jsx(_Be,{onManualPromptSubmit:e.onManualPromptSubmit||u,items:c,promptText:n,onPromptTextChange:r,placeholder:f,disabled:a==="thinking"||a==="ai-writing",icon:v.jsx("div",{className:"bn-combobox-icon",children:v.jsx(Bte,{})}),rightSection:p})},PBe=e=>{const t=e.blockID?document.querySelector(`[data-id="${e.blockID}"]`):void 0,n=k.useMemo(()=>t?{getBoundingClientRect:()=>t.getBoundingClientRect(),contextElement:t}:null,[t]),{isMounted:r,ref:o,style:i,getFloatingProps:s,isPositioned:a}=lu(!!t,n,3e3,{canDismiss:{enabled:!0,escapeKey:!0,outsidePress:e.canDismissViaOutsidePress},placement:"bottom",middleware:[Zi(10),Sh({apply({rects:l,elements:c}){Object.assign(c.floating.style,{width:`${l.reference.width}px`})}})],onOpenChange:e.onOpenChange,whileElementsMounted:(l,c,u)=>BC(l,c,u,{animationFrame:!0}),...e.floatingOptions});return r?v.jsx("div",{ref:o,style:{...i},...s(),children:a&&e.children}):null},DBe=e=>{const t=tt(),n=Nh(t),r=_te(n.store,s=>s.aiMenuState),o=r==="closed"?void 0:r.blockId,i=e.aiMenu||OBe;return v.jsx(PBe,{canDismissViaOutsidePress:r==="closed"||r.status==="user-input",blockID:o,onOpenChange:s=>{s||r==="closed"||(r.status==="user-input"?n.closeAIMenu():(r.status==="user-reviewing"||r.status==="error")&&n.rejectChanges())},children:v.jsx(i,{})})},$Be={AI:Bte};function jBe(e){const t=Nh(e);return[{key:"ai",onItemClick:()=>{const n=e.getTextCursorPosition();n.block.content&&Array.isArray(n.block.content)&&n.block.content.length===0&&n.prevBlock?t.openAIMenuAtBlock(n.prevBlock.id):t.openAIMenuAtBlock(n.block.id)},...pg(e).slash_menu.ai,icon:v.jsx($Be.AI,{})}]}const LBe={formatting_toolbar:{ai:{tooltip:"Edit with AI"}},slash_menu:{ai:{title:"Ask AI",subtext:"Write with AI",aliases:["ai","artificial intelligence","llm","assistant","generate"],group:"AI"}},ai_default_commands:{continue_writing:{title:"Continue Writing",aliases:void 0},summarize:{title:"Summarize",aliases:void 0},add_action_items:{title:"Add Action Items",aliases:void 0},write_anything:{title:"Write Anything",aliases:void 0,prompt_placeholder:"Write about "},simplify:{title:"Simplify",aliases:void 0},translate:{title:"Translate",aliases:void 0,prompt_placeholder:"Translate into "},fix_spelling:{title:"Fix Spelling",aliases:void 0},improve_writing:{title:"Improve Writing",aliases:void 0}},ai_menu:{input_placeholder:"Ask AI anything",status:{thinking:"Thinking",editing:"Editing",error:"Oops! Something went wrong"},actions:{accept:{title:"Accept",aliases:void 0},retry:{title:"Retry",aliases:void 0},cancel:{title:"Cancel",aliases:void 0},revert:{title:"Revert",aliases:void 0}}}};var Fte="vercel.ai.error",zBe=Symbol.for(Fte),Vte,BBe=class Hte extends Error{constructor({name:t,message:n,cause:r}){super(n),this[Vte]=!0,this.name=t,this.cause=r}static isInstance(t){return Hte.hasMarker(t,Fte)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};Vte=zBe;var St=BBe,Ute="AI_APICallError",Gte=`vercel.ai.error.${Ute}`,FBe=Symbol.for(Gte),qte,tr=class extends St{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:o,responseBody:i,cause:s,isRetryable:a=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:Ute,message:e,cause:s}),this[qte]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=o,this.responseBody=i,this.isRetryable=a,this.data=l}static isInstance(e){return St.hasMarker(e,Gte)}};qte=FBe;var Zte="AI_EmptyResponseBodyError",Wte=`vercel.ai.error.${Zte}`,VBe=Symbol.for(Wte),Kte,Yte=class extends St{constructor({message:e="Empty response body"}={}){super({name:Zte,message:e}),this[Kte]=!0}static isInstance(e){return St.hasMarker(e,Wte)}};Kte=VBe;function mg(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Jte="AI_InvalidArgumentError",Xte=`vercel.ai.error.${Jte}`,HBe=Symbol.for(Xte),Qte,wE=class extends St{constructor({message:t,cause:n,argument:r}){super({name:Jte,message:t,cause:n}),this[Qte]=!0,this.argument=r}static isInstance(t){return St.hasMarker(t,Xte)}};Qte=HBe;var ene="AI_InvalidPromptError",tne=`vercel.ai.error.${ene}`,UBe=Symbol.for(tne),nne,Ep=class extends St{constructor({prompt:e,message:t,cause:n}){super({name:ene,message:`Invalid prompt: ${t}`,cause:n}),this[nne]=!0,this.prompt=e}static isInstance(e){return St.hasMarker(e,tne)}};nne=UBe;var rne="AI_JSONParseError",one=`vercel.ai.error.${rne}`,GBe=Symbol.for(one),ine,Xl=class extends St{constructor({text:e,cause:t}){super({name:rne,message:`JSON parsing failed: Text: ${e}.
Error message: ${mg(t)}`,cause:t}),this[ine]=!0,this.text=e}static isInstance(e){return St.hasMarker(e,one)}};ine=GBe;var sne="AI_LoadAPIKeyError",ane=`vercel.ai.error.${sne}`,qBe=Symbol.for(ane),lne,Tx=class extends St{constructor({message:e}){super({name:sne,message:e}),this[lne]=!0}static isInstance(e){return St.hasMarker(e,ane)}};lne=qBe;var cne="AI_NoSuchModelError",une=`vercel.ai.error.${cne}`,ZBe=Symbol.for(une),dne,WBe=class extends St{constructor({errorName:e=cne,modelId:t,modelType:n,message:r=`No such ${n}: ${t}`}){super({name:e,message:r}),this[dne]=!0,this.modelId=t,this.modelType=n}static isInstance(e){return St.hasMarker(e,une)}};dne=ZBe;var fne="AI_TooManyEmbeddingValuesForCallError",hne=`vercel.ai.error.${fne}`,KBe=Symbol.for(hne),pne,YBe=class extends St{constructor(e){super({name:fne,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[pne]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return St.hasMarker(e,hne)}};pne=KBe;var mne="AI_TypeValidationError",gne=`vercel.ai.error.${mne}`,JBe=Symbol.for(gne),yne,XBe=class nI extends St{constructor({value:t,cause:n}){super({name:mne,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${mg(n)}`,cause:n}),this[yne]=!0,this.value=t}static isInstance(t){return St.hasMarker(t,gne)}static wrap({value:t,cause:n}){return nI.isInstance(n)&&n.value===t?n:new nI({value:t,cause:n})}};yne=JBe;var qi=XBe,bne="AI_UnsupportedFunctionalityError",vne=`vercel.ai.error.${bne}`,QBe=Symbol.for(vne),xne,kw=class extends St{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:bne,message:t}),this[xne]=!0,this.functionality=e}static isInstance(e){return St.hasMarker(e,vne)}};xne=QBe;let zB=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function GA(e){}function eFe(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=GA,onError:n=GA,onRetry:r=GA,onComment:o}=e;let i="",s=!0,a,l="",c="";function u(b){const w=s?b.replace(/^\xEF\xBB\xBF/,""):b,[S,E]=tFe(`${i}${w}`);for(const T of S)f(T);i=E,s=!1}function f(b){if(b===""){m();return}if(b.startsWith(":")){o&&o(b.slice(b.startsWith(": ")?2:1));return}const w=b.indexOf(":");if(w!==-1){const S=b.slice(0,w),E=b[w+1]===" "?2:1,T=b.slice(w+E);p(S,T,b);return}p(b,"",b)}function p(b,w,S){switch(b){case"event":c=w;break;case"data":l=`${l}${w}
`;break;case"id":a=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?r(parseInt(w,10)):n(new zB(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:S}));break;default:n(new zB(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:w,line:S}));break}}function m(){l.length>0&&t({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function y(b={}){i&&b.consume&&f(i),s=!0,a=void 0,l="",c="",i=""}return{feed:u,reset:y}}function tFe(e){const t=[];let n="",r=0;for(;r<e.length;){const o=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(o!==-1&&i!==-1?s=Math.min(o,i):o!==-1?o===e.length-1?s=-1:s=o:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const a=e.slice(r,s);t.push(a),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}let nFe=class extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let o;super({start(i){o=eFe({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){o.feed(i)}})}};var bt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(bt||(bt={}));var rFe={};function Ck(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function SE(e){return Object.fromEntries([...e.headers])}var oFe=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=()=>{const i=n.length,s=new Array(t);for(let a=0;a<t;a++)s[a]=n[Math.random()*i|0];return s.join("")};if(e==null)return o;if(n.includes(r))throw new wE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${o()}`},wne=oFe();function rI(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var iFe=["fetch failed","failed to fetch"];function sFe({error:e,url:t,requestBodyValues:n}){if(rI(e))return e;if(e instanceof TypeError&&iFe.includes(e.message.toLowerCase())){const r=e.cause;if(r!=null)return new tr({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function aFe(e=globalThis){var t,n,r;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(r=(n=e.process)==null?void 0:n.versions)!=null&&r.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function lFe(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Sne(e,...t){const n=lFe(e??{}),r=new Headers(n),o=r.get("user-agent")||"";return r.set("user-agent",[o,...t].filter(Boolean).join(" ")),Object.fromEntries(r)}var cFe="3.0.12";function uFe({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Tx({message:`${r} API key must be a string.`});if(typeof process>"u")throw new Tx({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=rFe[t],e==null)throw new Tx({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Tx({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var dFe=/"__proto__"\s*:/,fFe=/"constructor"\s*:/;function hFe(e){const t=JSON.parse(e);return t===null||typeof t!="object"||dFe.test(e)===!1&&fFe.test(e)===!1?t:pFe(t)}function pFe(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const o in r){const i=r[o];i&&typeof i=="object"&&t.push(i)}}}return e}function kne(e){const{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{return hFe(e)}finally{Error.stackTraceLimit=t}}var Ek=Symbol.for("vercel.ai.validator");function mFe(e){return{[Ek]:!0,validate:e}}function gFe(e){return typeof e=="object"&&e!==null&&Ek in e&&e[Ek]===!0&&"validate"in e}function yFe(e){return gFe(e)?e:typeof e=="function"?e():bFe(e)}function bFe(e){return mFe(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new qi({value:t,cause:n.issues})}})}async function vFe({value:e,schema:t}){const n=await UP({value:e,schema:t});if(!n.success)throw qi.wrap({value:e,cause:n.error});return n.value}async function UP({value:e,schema:t}){const n=yFe(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:qi.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:qi.wrap({value:e,cause:r}),rawValue:e}}}async function xFe({text:e,schema:t}){try{const n=kne(e);return t==null?n:vFe({value:n,schema:t})}catch(n){throw Xl.isInstance(n)||qi.isInstance(n)?n:new Xl({text:e,cause:n})}}async function Cne({text:e,schema:t}){try{const n=kne(e);return t==null?{success:!0,value:n,rawValue:n}:await UP({value:n,schema:t})}catch(n){return{success:!1,error:Xl.isInstance(n)?n:new Xl({text:e,cause:n}),rawValue:void 0}}}function wFe({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new nFe).pipeThrough(new TransformStream({async transform({data:n},r){n!=="[DONE]"&&r.enqueue(await Cne({text:n,schema:t}))}}))}async function GP({provider:e,providerOptions:t,schema:n}){if(t?.[e]==null)return;const r=await UP({value:t[e],schema:n});if(!r.success)throw new wE({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var SFe=()=>globalThis.fetch,wb=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:o,abortSignal:i,fetch:s})=>kFe({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:o,abortSignal:i,fetch:s}),kFe=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:o,abortSignal:i,fetch:s=SFe()})=>{try{const a=await s(e,{method:"POST",headers:Sne(t,`ai-sdk/provider-utils/${cFe}`,aFe()),body:n.content,signal:i}),l=SE(a);if(!a.ok){let c;try{c=await o({response:a,url:e,requestBodyValues:n.values})}catch(u){throw rI(u)||tr.isInstance(u)?u:new tr({message:"Failed to process error response",cause:u,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(rI(c)||tr.isInstance(c))?c:new tr({message:"Failed to process successful response",cause:c,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(a){throw sFe({error:a,url:e,requestBodyValues:n.values})}};function Ene({id:e,name:t,inputSchema:n}){return({execute:r,outputSchema:o,toModelOutput:i,onInputStart:s,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:o,execute:r,toModelOutput:i,onInputStart:s,onInputDelta:a,onInputAvailable:l})}function CFe({id:e,name:t,inputSchema:n,outputSchema:r}){return({execute:o,toModelOutput:i,onInputStart:s,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:r,execute:o,toModelOutput:i,onInputStart:s,onInputDelta:a,onInputAvailable:l})}async function Tk(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var EFe=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:o,requestBodyValues:i})=>{const s=await r.text(),a=SE(r);if(s.trim()==="")return{responseHeaders:a,value:new tr({message:r.statusText,url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,isRetryable:n?.(r)})};try{const l=await xFe({text:s,schema:e});return{responseHeaders:a,value:new tr({message:t(l),url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new tr({message:r.statusText,url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,isRetryable:n?.(r)})}}},TFe=e=>async({response:t})=>{const n=SE(t);if(t.body==null)throw new Yte({});return{responseHeaders:n,value:wFe({stream:t.body,schema:e})}},_k=e=>async({response:t,url:n,requestBodyValues:r})=>{const o=await t.text(),i=await Cne({text:o,schema:e}),s=SE(t);if(!i.success)throw new tr({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:o,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},_Fe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},AFe=Symbol("Let zodToJsonSchema decide on which parser to use"),BB={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},MFe=e=>typeof e=="string"?{...BB,name:e}:{...BB,...e};function Ns(){return{}}function NFe(e,t){var n,r,o;const i={type:"array"};return(n=e.type)!=null&&n._def&&((o=(r=e.type)==null?void 0:r._def)==null?void 0:o.typeName)!==bt.ZodAny&&(i.items=pn(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}function RFe(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function IFe(){return{type:"boolean"}}function Tne(e,t){return pn(e.type._def,t)}var OFe=(e,t)=>pn(e.innerType._def,t);function _ne(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((o,i)=>_ne(e,t,o))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return PFe(e)}}var PFe=e=>{const t={type:"integer",format:"unix-time"};for(const n of e.checks)switch(n.kind){case"min":t.minimum=n.value;break;case"max":t.maximum=n.value;break}return t};function DFe(e,t){return{...pn(e.innerType._def,t),default:e.defaultValue()}}function $Fe(e,t){return t.effectStrategy==="input"?pn(e.schema._def,t):Ns()}function jFe(e){return{type:"string",enum:Array.from(e.values)}}var LFe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function zFe(e,t){const n=[pn(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),pn(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(o=>!!o),r=[];return n.forEach(o=>{if(LFe(o))r.push(...o.allOf);else{let i=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:s,...a}=o;i=a}r.push(i)}}),r.length?{allOf:r}:void 0}function BFe(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var qA=void 0,ja={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(qA===void 0&&(qA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),qA),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Ane(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value;break;case"max":n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":La(n,"email",r.message,t);break;case"format:idn-email":La(n,"idn-email",r.message,t);break;case"pattern:zod":di(n,ja.email,r.message,t);break}break;case"url":La(n,"uri",r.message,t);break;case"uuid":La(n,"uuid",r.message,t);break;case"regex":di(n,r.regex,r.message,t);break;case"cuid":di(n,ja.cuid,r.message,t);break;case"cuid2":di(n,ja.cuid2,r.message,t);break;case"startsWith":di(n,RegExp(`^${ZA(r.value,t)}`),r.message,t);break;case"endsWith":di(n,RegExp(`${ZA(r.value,t)}$`),r.message,t);break;case"datetime":La(n,"date-time",r.message,t);break;case"date":La(n,"date",r.message,t);break;case"time":La(n,"time",r.message,t);break;case"duration":La(n,"duration",r.message,t);break;case"length":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"includes":{di(n,RegExp(ZA(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&La(n,"ipv4",r.message,t),r.version!=="v4"&&La(n,"ipv6",r.message,t);break}case"base64url":di(n,ja.base64url,r.message,t);break;case"jwt":di(n,ja.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&di(n,ja.ipv4Cidr,r.message,t),r.version!=="v4"&&di(n,ja.ipv6Cidr,r.message,t);break}case"emoji":di(n,ja.emoji(),r.message,t);break;case"ulid":{di(n,ja.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{La(n,"binary",r.message,t);break}case"contentEncoding:base64":{n.contentEncoding="base64";break}case"pattern:zod":{di(n,ja.base64,r.message,t);break}}break}case"nanoid":di(n,ja.nanoid,r.message,t)}return n}function ZA(e,t){return t.patternStrategy==="escape"?VFe(e):e}var FFe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function VFe(e){let t="";for(let n=0;n<e.length;n++)FFe.has(e[n])||(t+="\\"),t+=e[n];return t}function La(e,t,n,r){var o;e.format||(o=e.anyOf)!=null&&o.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function di(e,t,n,r){var o;e.pattern||(o=e.allOf)!=null&&o.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:FB(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=FB(t,r)}function FB(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},o=r.i?e.source.toLowerCase():e.source;let i="",s=!1,a=!1,l=!1;for(let c=0;c<o.length;c++){if(s){i+=o[c],s=!1;continue}if(r.i){if(a){if(o[c].match(/[a-z]/)){l?(i+=o[c],i+=`${o[c-2]}-${o[c]}`.toUpperCase(),l=!1):o[c+1]==="-"&&((n=o[c+2])!=null&&n.match(/[a-z]/))?(i+=o[c],l=!0):i+=`${o[c]}${o[c].toUpperCase()}`;continue}}else if(o[c].match(/[a-z]/)){i+=`[${o[c]}${o[c].toUpperCase()}]`;continue}}if(r.m){if(o[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&o[c]==="."){i+=a?`${o[c]}\r
`:`[${o[c]}\r
]`;continue}i+=o[c],o[c]==="\\"?s=!0:a&&o[c]==="]"?a=!1:!a&&o[c]==="["&&(a=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function Mne(e,t){var n,r,o,i,s,a;const l={type:"object",additionalProperties:(n=pn(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?n:t.allowedAdditionalProperties};if(((r=e.keyType)==null?void 0:r._def.typeName)===bt.ZodString&&((o=e.keyType._def.checks)!=null&&o.length)){const{type:c,...u}=Ane(e.keyType._def,t);return{...l,propertyNames:u}}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===bt.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===bt.ZodBranded&&e.keyType._def.type._def.typeName===bt.ZodString&&((a=e.keyType._def.type._def.checks)!=null&&a.length)){const{type:c,...u}=Tne(e.keyType._def,t);return{...l,propertyNames:u}}}return l}function HFe(e,t){if(t.mapStrategy==="record")return Mne(e,t);const n=pn(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Ns(),r=pn(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Ns();return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function UFe(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),o=Array.from(new Set(r.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:r}}function GFe(){return{not:Ns()}}function qFe(){return{type:"null"}}var oI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ZFe(e,t){const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in oI&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((o,i)=>{const s=oI[i._def.typeName];return s&&!o.includes(s)?[...o,s]:o},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((o,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...o,s];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(r.length===n.length){const o=r.filter((i,s,a)=>a.indexOf(i)===s);return{type:o.length>1?o:o[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,o)=>[...r,...o._def.values.filter(i=>!r.includes(i))],[])};return WFe(e,t)}var WFe=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,o)=>pn(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${o}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function KFe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[oI[e.innerType._def.typeName],"null"]};const n=pn(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function YFe(e){const t={type:"number"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"int":t.type="integer";break;case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function JFe(e,t){const n={type:"object",properties:{}},r=[],o=e.shape();for(const s in o){let a=o[s];if(a===void 0||a._def===void 0)continue;const l=QFe(a),c=pn(a._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});c!==void 0&&(n.properties[s]=c,l||r.push(s))}r.length&&(n.required=r);const i=XFe(e,t);return i!==void 0&&(n.additionalProperties=i),n}function XFe(e,t){if(e.catchall._def.typeName!=="ZodNever")return pn(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function QFe(e){try{return e.isOptional()}catch{return!0}}var eVe=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return pn(e.innerType._def,t);const r=pn(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:Ns()},r]}:Ns()},tVe=(e,t)=>{if(t.pipeStrategy==="input")return pn(e.in._def,t);if(t.pipeStrategy==="output")return pn(e.out._def,t);const n=pn(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=pn(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(o=>o!==void 0)}};function nVe(e,t){return pn(e.type._def,t)}function rVe(e,t){const r={type:"array",uniqueItems:!0,items:pn(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(r.minItems=e.minSize.value),e.maxSize&&(r.maxItems=e.maxSize.value),r}function oVe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>pn(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:pn(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>pn(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function iVe(){return{not:Ns()}}function sVe(){return Ns()}var aVe=(e,t)=>pn(e.innerType._def,t),lVe=(e,t,n)=>{switch(t){case bt.ZodString:return Ane(e,n);case bt.ZodNumber:return YFe(e);case bt.ZodObject:return JFe(e,n);case bt.ZodBigInt:return RFe(e);case bt.ZodBoolean:return IFe();case bt.ZodDate:return _ne(e,n);case bt.ZodUndefined:return iVe();case bt.ZodNull:return qFe();case bt.ZodArray:return NFe(e,n);case bt.ZodUnion:case bt.ZodDiscriminatedUnion:return ZFe(e,n);case bt.ZodIntersection:return zFe(e,n);case bt.ZodTuple:return oVe(e,n);case bt.ZodRecord:return Mne(e,n);case bt.ZodLiteral:return BFe(e);case bt.ZodEnum:return jFe(e);case bt.ZodNativeEnum:return UFe(e);case bt.ZodNullable:return KFe(e,n);case bt.ZodOptional:return eVe(e,n);case bt.ZodMap:return HFe(e,n);case bt.ZodSet:return rVe(e,n);case bt.ZodLazy:return()=>e.getter()._def;case bt.ZodPromise:return nVe(e,n);case bt.ZodNaN:case bt.ZodNever:return GFe();case bt.ZodEffects:return $Fe(e,n);case bt.ZodAny:return Ns();case bt.ZodUnknown:return sVe();case bt.ZodDefault:return DFe(e,n);case bt.ZodBranded:return Tne(e,n);case bt.ZodReadonly:return aVe(e,n);case bt.ZodCatch:return OFe(e,n);case bt.ZodPipeline:return tVe(e,n);case bt.ZodFunction:case bt.ZodVoid:case bt.ZodSymbol:return;default:return(r=>{})()}};function pn(e,t,n=!1){var r;const o=t.seen.get(e);if(t.override){const l=(r=t.override)==null?void 0:r.call(t,e,t,o,n);if(l!==AFe)return l}if(o&&!n){const l=cVe(o,t);if(l!==void 0)return l}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const s=lVe(e,e.typeName,t),a=typeof s=="function"?pn(s(),t):s;if(a&&uVe(e,t,a),t.postProcess){const l=t.postProcess(a,e,t);return i.jsonSchema=a,l}return i.jsonSchema=a,a}var cVe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:_Fe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Ns()):t.$refStrategy==="seen"?Ns():void 0}},uVe=(e,t,n)=>(e.description&&(n.description=e.description),n),dVe=e=>{const t=MFe(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,o])=>[o._def,{def:o._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}},fVe=(e,t)=>{var n;const r=dVe(t);let o=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((c,[u,f])=>{var p;return{...c,[u]:(p=pn(f._def,{...r,currentPath:[...r.basePath,r.definitionPath,u]},!0))!=null?p:Ns()}},{}):void 0;const i=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,s=(n=pn(e._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1))!=null?n:Ns(),a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(s.title=a);const l=i===void 0?o?{...s,[r.definitionPath]:o}:s:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...o,[i]:s}};return l.$schema="http://json-schema.org/draft-07/schema#",l},hVe=fVe;function pVe(e,t){var n;const r=(n=void 0)!=null?n:!1;return Nne(()=>hVe(e,{$refStrategy:r?"root":"none"}),{validate:async o=>{const i=await e.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function mVe(e,t){var n;const r=(n=void 0)!=null?n:!1;return Nne(()=>vee(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"}),{validate:async o=>{const i=await EP(e,o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function gVe(e){return"_zod"in e}function al(e,t){return gVe(e)?mVe(e):pVe(e)}var yVe=Symbol.for("vercel.ai.schema");function ll(e){let t;return()=>(t==null&&(t=e()),t)}function Nne(e,{validate:t}={}){return{[yVe]:!0,_type:void 0,[Ek]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}var{btoa:bVe}=globalThis;function vVe(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return bVe(t)}function VB(e){return e instanceof Uint8Array?vVe(e):e}function xVe(e){return e?.replace(/\/$/,"")}var wVe="2.0.23",SVe=ll(()=>al(fe({error:fe({code:Qt().nullable(),message:Q(),status:Q()})}))),Sb=EFe({errorSchema:SVe,errorToMessage:e=>e.error.message}),kVe=ll(()=>al(fe({outputDimensionality:Qt().optional(),taskType:$i(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),CVe=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){const o=await GP({provider:"google",providerOptions:r,schema:kVe});if(e.length>this.maxEmbeddingsPerCall)throw new YBe({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const i=Ck(await Tk(this.config.headers),t);if(e.length===1){const{responseHeaders:c,value:u,rawValue:f}=await wb({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType},failedResponseHandler:Sb,successfulResponseHandler:_k(TVe),abortSignal:n,fetch:this.config.fetch});return{embeddings:[u.embedding.values],usage:void 0,response:{headers:c,body:f}}}const{responseHeaders:s,value:a,rawValue:l}=await wb({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:e.map(c=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:c}]},outputDimensionality:o?.outputDimensionality,taskType:o?.taskType}))},failedResponseHandler:Sb,successfulResponseHandler:_k(EVe),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.embeddings.map(c=>c.values),usage:void 0,response:{headers:s,body:l}}}},EVe=ll(()=>al(fe({embeddings:xt(fe({values:xt(Qt())}))}))),TVe=ll(()=>al(fe({embedding:fe({values:xt(Qt())})})));function Al(e){if(e==null||_Ve(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:o,items:i,allOf:s,anyOf:a,oneOf:l,format:c,const:u,minLength:f,enum:p}=e,m={};if(n&&(m.description=n),r&&(m.required=r),c&&(m.format=c),u!==void 0&&(m.enum=[u]),t&&(Array.isArray(t)?t.includes("null")?(m.type=t.filter(y=>y!=="null")[0],m.nullable=!0):m.type=t:t==="null"?m.type="null":m.type=t),p!==void 0&&(m.enum=p),o!=null&&(m.properties=Object.entries(o).reduce((y,[b,w])=>(y[b]=Al(w),y),{})),i&&(m.items=Array.isArray(i)?i.map(Al):Al(i)),s&&(m.allOf=s.map(Al)),a)if(a.some(y=>typeof y=="object"&&y?.type==="null")){const y=a.filter(b=>!(typeof b=="object"&&b?.type==="null"));if(y.length===1){const b=Al(y[0]);typeof b=="object"&&(m.nullable=!0,Object.assign(m,b))}else m.anyOf=y.map(Al),m.nullable=!0}else m.anyOf=a.map(Al);return l&&(m.oneOf=l.map(Al)),f!==void 0&&(m.minLength=f),m}function _Ve(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function AVe(e,t){var n;const r=[],o=[];let i=!0;const s=(n=t?.isGemmaModel)!=null?n:!1;for(const{role:a,content:l}of e)switch(a){case"system":{if(!i)throw new kw({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:l});break}case"user":{i=!1;const c=[];for(const u of l)switch(u.type){case"text":{c.push({text:u.text});break}case"file":{const f=u.mediaType==="image/*"?"image/jpeg":u.mediaType;c.push(u.data instanceof URL?{fileData:{mimeType:f,fileUri:u.data.toString()}}:{inlineData:{mimeType:f,data:VB(u.data)}});break}}o.push({role:"user",parts:c});break}case"assistant":{i=!1,o.push({role:"model",parts:l.map(c=>{var u,f,p,m,y,b;switch(c.type){case"text":return c.text.length===0?void 0:{text:c.text,thoughtSignature:(f=(u=c.providerOptions)==null?void 0:u.google)==null?void 0:f.thoughtSignature};case"reasoning":return c.text.length===0?void 0:{text:c.text,thought:!0,thoughtSignature:(m=(p=c.providerOptions)==null?void 0:p.google)==null?void 0:m.thoughtSignature};case"file":{if(c.mediaType!=="image/png")throw new kw({functionality:"Only PNG images are supported in assistant messages"});if(c.data instanceof URL)throw new kw({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:c.mediaType,data:VB(c.data)}}}case"tool-call":return{functionCall:{name:c.toolName,args:c.input},thoughtSignature:(b=(y=c.providerOptions)==null?void 0:y.google)==null?void 0:b.thoughtSignature}}}).filter(c=>c!==void 0)});break}case"tool":{i=!1;const c=[];for(const u of l){const f=u.output;if(f.type==="content")for(const p of f.value)switch(p.type){case"text":c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:p.text}}});break;case"media":c.push({inlineData:{mimeType:p.mediaType,data:p.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:c.push({text:JSON.stringify(p)});break}else c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:f.value}}})}o.push({role:"user",parts:c});break}}if(s&&r.length>0&&o.length>0&&o[0].role==="user"){const a=r.map(l=>l.text).join(`

`);o[0].parts.unshift({text:a+`

`})}return{systemInstruction:r.length>0&&!s?{parts:r}:void 0,contents:o}}function HB(e){return e.includes("/")?e:`models/${e}`}var MVe=ll(()=>al(fe({responseModalities:xt($i(["TEXT","IMAGE"])).optional(),thinkingConfig:fe({thinkingBudget:Qt().optional(),includeThoughts:Jt().optional()}).optional(),cachedContent:Q().optional(),structuredOutputs:Jt().optional(),safetySettings:xt(fe({category:$i(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:$i(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:$i(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:Jt().optional(),labels:Qc(Q(),Q()).optional(),mediaResolution:$i(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:fe({aspectRatio:$i(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional()}).optional()})));function NVe({tools:e,toolChoice:t,modelId:n}){var r;e=e?.length?e:void 0;const o=[],i=n.includes("gemini-2"),s=n.includes("gemini-1.5-flash")&&!n.includes("-8b");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const a=e.some(f=>f.type==="function"),l=e.some(f=>f.type==="provider-defined");if(a&&l&&o.push({type:"unsupported-tool",tool:e.find(f=>f.type==="function"),details:"Cannot mix function tools with provider-defined tools in the same request. Please use either function tools or provider-defined tools, but not both."}),l){const f=[];return e.filter(m=>m.type==="provider-defined").forEach(m=>{switch(m.id){case"google.google_search":i?f.push({googleSearch:{}}):s?f.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:m.args.mode,dynamicThreshold:m.args.dynamicThreshold}}}):f.push({googleSearchRetrieval:{}});break;case"google.url_context":i?f.push({urlContext:{}}):o.push({type:"unsupported-tool",tool:m,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":i?f.push({codeExecution:{}}):o.push({type:"unsupported-tool",tool:m,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;default:o.push({type:"unsupported-tool",tool:m});break}}),{tools:f.length>0?f:void 0,toolConfig:void 0,toolWarnings:o}}const c=[];for(const f of e)switch(f.type){case"function":c.push({name:f.name,description:(r=f.description)!=null?r:"",parameters:Al(f.inputSchema)});break;default:o.push({type:"unsupported-tool",tool:f});break}if(t==null)return{tools:{functionDeclarations:c},toolConfig:void 0,toolWarnings:o};const u=t.type;switch(u){case"auto":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:o};default:{const f=u;throw new kw({functionality:`tool choice type: ${f}`})}}}function UB({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var RVe=class{constructor(e,t){this.specificationVersion="v2";var n;this.modelId=e,this.config=t,this.generateId=(n=t.generateId)!=null?n:wne}get provider(){return this.config.provider}get supportedUrls(){var e,t,n;return(n=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?n:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,topK:o,frequencyPenalty:i,presencePenalty:s,stopSequences:a,responseFormat:l,seed:c,tools:u,toolChoice:f,providerOptions:p}){var m,y;const b=[],w=await GP({provider:"google",providerOptions:p,schema:MVe});((m=w?.thinkingConfig)==null?void 0:m.includeThoughts)===!0&&!this.config.provider.startsWith("google.vertex.")&&b.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const S=this.modelId.toLowerCase().startsWith("gemma-"),{contents:E,systemInstruction:T}=AVe(e,{isGemmaModel:S}),{tools:A,toolConfig:M,toolWarnings:R}=NVe({tools:u,toolChoice:f,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:n,topK:o,topP:r,frequencyPenalty:i,presencePenalty:s,stopSequences:a,seed:c,responseMimeType:l?.type==="json"?"application/json":void 0,responseSchema:l?.type==="json"&&l.schema!=null&&((y=w?.structuredOutputs)==null||y)?Al(l.schema):void 0,...w?.audioTimestamp&&{audioTimestamp:w.audioTimestamp},responseModalities:w?.responseModalities,thinkingConfig:w?.thinkingConfig,...w?.imageConfig&&{imageConfig:w.imageConfig},...w?.mediaResolution&&{mediaResolution:w.mediaResolution}},contents:E,systemInstruction:S?void 0:T,safetySettings:w?.safetySettings,tools:A,toolConfig:M,cachedContent:w?.cachedContent,labels:w?.labels},warnings:[...b,...R]}}async doGenerate(e){var t,n,r,o,i,s,a,l,c,u,f,p,m;const{args:y,warnings:b}=await this.getArgs(e),w=JSON.stringify(y),S=Ck(await Tk(this.config.headers),e.headers),{responseHeaders:E,value:T,rawValue:A}=await wb({url:`${this.config.baseURL}/${HB(this.modelId)}:generateContent`,headers:S,body:y,failedResponseHandler:Sb,successfulResponseHandler:_k(PVe),abortSignal:e.abortSignal,fetch:this.config.fetch}),M=T.candidates[0],R=[],O=(n=(t=M.content)==null?void 0:t.parts)!=null?n:[],I=T.usageMetadata;let L;for(const B of O)if("executableCode"in B&&((r=B.executableCode)!=null&&r.code)){const G=this.config.generateId();L=G,R.push({type:"tool-call",toolCallId:G,toolName:"code_execution",input:JSON.stringify(B.executableCode),providerExecuted:!0})}else"codeExecutionResult"in B&&B.codeExecutionResult?(R.push({type:"tool-result",toolCallId:L,toolName:"code_execution",result:{outcome:B.codeExecutionResult.outcome,output:B.codeExecutionResult.output},providerExecuted:!0}),L=void 0):"text"in B&&B.text!=null&&B.text.length>0?R.push({type:B.thought===!0?"reasoning":"text",text:B.text,providerMetadata:B.thoughtSignature?{google:{thoughtSignature:B.thoughtSignature}}:void 0}):"functionCall"in B?R.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:B.functionCall.name,input:JSON.stringify(B.functionCall.args),providerMetadata:B.thoughtSignature?{google:{thoughtSignature:B.thoughtSignature}}:void 0}):"inlineData"in B&&R.push({type:"file",data:B.inlineData.data,mediaType:B.inlineData.mimeType});const $=(o=GB({groundingMetadata:M.groundingMetadata,generateId:this.config.generateId}))!=null?o:[];for(const B of $)R.push(B);return{content:R,finishReason:UB({finishReason:M.finishReason,hasToolCalls:R.some(B=>B.type==="tool-call")}),usage:{inputTokens:(i=I?.promptTokenCount)!=null?i:void 0,outputTokens:(s=I?.candidatesTokenCount)!=null?s:void 0,totalTokens:(a=I?.totalTokenCount)!=null?a:void 0,reasoningTokens:(l=I?.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(c=I?.cachedContentTokenCount)!=null?c:void 0},warnings:b,providerMetadata:{google:{promptFeedback:(u=T.promptFeedback)!=null?u:null,groundingMetadata:(f=M.groundingMetadata)!=null?f:null,urlContextMetadata:(p=M.urlContextMetadata)!=null?p:null,safetyRatings:(m=M.safetyRatings)!=null?m:null,usageMetadata:I??null}},request:{body:w},response:{headers:E,body:A}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),o=Ck(await Tk(this.config.headers),e.headers),{responseHeaders:i,value:s}=await wb({url:`${this.config.baseURL}/${HB(this.modelId)}:streamGenerateContent?alt=sse`,headers:o,body:t,failedResponseHandler:Sb,successfulResponseHandler:TFe(DVe),abortSignal:e.abortSignal,fetch:this.config.fetch});let a="unknown";const l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let c;const u=this.config.generateId;let f=!1,p=null,m=null,y=0;const b=new Set;let w;return{stream:s.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:n})},transform(S,E){var T,A,M,R,O,I,L,$,B,G,V,W;if(e.includeRawChunks&&E.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){E.enqueue({type:"error",error:S.error});return}const K=S.value,F=K.usageMetadata;F!=null&&(l.inputTokens=(T=F.promptTokenCount)!=null?T:void 0,l.outputTokens=(A=F.candidatesTokenCount)!=null?A:void 0,l.totalTokens=(M=F.totalTokenCount)!=null?M:void 0,l.reasoningTokens=(R=F.thoughtsTokenCount)!=null?R:void 0,l.cachedInputTokens=(O=F.cachedContentTokenCount)!=null?O:void 0);const q=(I=K.candidates)==null?void 0:I[0];if(q==null)return;const H=q.content,z=GB({groundingMetadata:q.groundingMetadata,generateId:u});if(z!=null)for(const N of z)N.sourceType==="url"&&!b.has(N.url)&&(b.add(N.url),E.enqueue(N));if(H!=null){const N=(L=H.parts)!=null?L:[];for(const D of N)if("executableCode"in D&&(($=D.executableCode)!=null&&$.code)){const ce=u();w=ce,E.enqueue({type:"tool-call",toolCallId:ce,toolName:"code_execution",input:JSON.stringify(D.executableCode),providerExecuted:!0}),f=!0}else if("codeExecutionResult"in D&&D.codeExecutionResult){const ce=w;ce&&(E.enqueue({type:"tool-result",toolCallId:ce,toolName:"code_execution",result:{outcome:D.codeExecutionResult.outcome,output:D.codeExecutionResult.output},providerExecuted:!0}),w=void 0)}else"text"in D&&D.text!=null&&D.text.length>0&&(D.thought===!0?(p!==null&&(E.enqueue({type:"text-end",id:p}),p=null),m===null&&(m=String(y++),E.enqueue({type:"reasoning-start",id:m,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0})),E.enqueue({type:"reasoning-delta",id:m,delta:D.text,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0})):(m!==null&&(E.enqueue({type:"reasoning-end",id:m}),m=null),p===null&&(p=String(y++),E.enqueue({type:"text-start",id:p,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0})),E.enqueue({type:"text-delta",id:p,delta:D.text,providerMetadata:D.thoughtSignature?{google:{thoughtSignature:D.thoughtSignature}}:void 0})));const U=OVe(H.parts);if(U!=null)for(const D of U)E.enqueue({type:"file",mediaType:D.inlineData.mimeType,data:D.inlineData.data});const te=IVe({parts:H.parts,generateId:u});if(te!=null)for(const D of te)E.enqueue({type:"tool-input-start",id:D.toolCallId,toolName:D.toolName,providerMetadata:D.providerMetadata}),E.enqueue({type:"tool-input-delta",id:D.toolCallId,delta:D.args,providerMetadata:D.providerMetadata}),E.enqueue({type:"tool-input-end",id:D.toolCallId,providerMetadata:D.providerMetadata}),E.enqueue({type:"tool-call",toolCallId:D.toolCallId,toolName:D.toolName,input:D.args,providerMetadata:D.providerMetadata}),f=!0}q.finishReason!=null&&(a=UB({finishReason:q.finishReason,hasToolCalls:f}),c={google:{promptFeedback:(B=K.promptFeedback)!=null?B:null,groundingMetadata:(G=q.groundingMetadata)!=null?G:null,urlContextMetadata:(V=q.urlContextMetadata)!=null?V:null,safetyRatings:(W=q.safetyRatings)!=null?W:null}},F!=null&&(c.google.usageMetadata=F))},flush(S){p!==null&&S.enqueue({type:"text-end",id:p}),m!==null&&S.enqueue({type:"reasoning-end",id:m}),S.enqueue({type:"finish",finishReason:a,usage:l,providerMetadata:c})}})),response:{headers:i},request:{body:r}}}};function IVe({parts:e,generateId:t}){const n=e?.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({type:"tool-call",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args),providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0}))}function OVe(e){return e?.filter(t=>"inlineData"in t)}function GB({groundingMetadata:e,generateId:t}){var n;return(n=e?.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({type:"source",sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var Rne=()=>fe({webSearchQueries:xt(Q()).nullish(),retrievalQueries:xt(Q()).nullish(),searchEntryPoint:fe({renderedContent:Q()}).nullish(),groundingChunks:xt(fe({web:fe({uri:Q(),title:Q()}).nullish(),retrievedContext:fe({uri:Q(),title:Q()}).nullish()})).nullish(),groundingSupports:xt(fe({segment:fe({startIndex:Qt().nullish(),endIndex:Qt().nullish(),text:Q().nullish()}),segment_text:Q().nullish(),groundingChunkIndices:xt(Qt()).nullish(),supportChunkIndices:xt(Qt()).nullish(),confidenceScores:xt(Qt()).nullish(),confidenceScore:xt(Qt()).nullish()})).nullish(),retrievalMetadata:It([fe({webDynamicRetrievalScore:Qt()}),fe({})]).nullish()}),Ine=()=>fe({parts:xt(It([fe({functionCall:fe({name:Q(),args:tn()}),thoughtSignature:Q().nullish()}),fe({inlineData:fe({mimeType:Q(),data:Q()})}),fe({executableCode:fe({language:Q(),code:Q()}).nullish(),codeExecutionResult:fe({outcome:Q(),output:Q()}).nullish(),text:Q().nullish(),thought:Jt().nullish(),thoughtSignature:Q().nullish()})])).nullish()}),Ak=()=>fe({category:Q().nullish(),probability:Q().nullish(),probabilityScore:Qt().nullish(),severity:Q().nullish(),severityScore:Qt().nullish(),blocked:Jt().nullish()}),One=fe({cachedContentTokenCount:Qt().nullish(),thoughtsTokenCount:Qt().nullish(),promptTokenCount:Qt().nullish(),candidatesTokenCount:Qt().nullish(),totalTokenCount:Qt().nullish()}),Pne=()=>fe({urlMetadata:xt(fe({retrievedUrl:Q(),urlRetrievalStatus:Q()}))}),PVe=ll(()=>al(fe({candidates:xt(fe({content:Ine().nullish().or(fe({}).strict()),finishReason:Q().nullish(),safetyRatings:xt(Ak()).nullish(),groundingMetadata:Rne().nullish(),urlContextMetadata:Pne().nullish()})),usageMetadata:One.nullish(),promptFeedback:fe({blockReason:Q().nullish(),safetyRatings:xt(Ak()).nullish()}).nullish()}))),DVe=ll(()=>al(fe({candidates:xt(fe({content:Ine().nullish(),finishReason:Q().nullish(),safetyRatings:xt(Ak()).nullish(),groundingMetadata:Rne().nullish(),urlContextMetadata:Pne().nullish()})).nullish(),usageMetadata:One.nullish(),promptFeedback:fe({blockReason:Q().nullish(),safetyRatings:xt(Ak()).nullish()}).nullish()}))),$Ve=CFe({id:"google.code_execution",name:"code_execution",inputSchema:fe({language:Q().describe("The programming language of the code."),code:Q().describe("The code to be executed.")}),outputSchema:fe({outcome:Q().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:Q().describe("The output from the code execution.")})}),jVe=Ene({id:"google.google_search",name:"google_search",inputSchema:ll(()=>al(fe({mode:$i(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:Qt().default(1)})))}),LVe=Ene({id:"google.url_context",name:"url_context",inputSchema:ll(()=>al(fe({})))}),zVe={googleSearch:jVe,urlContext:LVe,codeExecution:$Ve},BVe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,n,r;const{prompt:o,n:i=1,size:s="1024x1024",aspectRatio:a="1:1",seed:l,providerOptions:c,headers:u,abortSignal:f}=e,p=[];s!=null&&p.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&p.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});const m=await GP({provider:"google",providerOptions:c,schema:VVe}),y=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,b={sampleCount:i};a!=null&&(b.aspectRatio=a),m&&Object.assign(b,m);const w={instances:[{prompt:o}],parameters:b},{responseHeaders:S,value:E}=await wb({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:Ck(await Tk(this.config.headers),u),body:w,failedResponseHandler:Sb,successfulResponseHandler:_k(FVe),abortSignal:f,fetch:this.config.fetch});return{images:E.predictions.map(T=>T.bytesBase64Encoded),warnings:p??[],providerMetadata:{google:{images:E.predictions.map(T=>({}))}},response:{timestamp:y,modelId:this.modelId,headers:S}}}},FVe=ll(()=>al(fe({predictions:xt(fe({bytesBase64Encoded:Q()})).default([])}))),VVe=ll(()=>al(fe({personGeneration:$i(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:$i(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function kE(e={}){var t;const n=(t=xVe(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>Sne({"x-goog-api-key":uFe({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${wVe}`),o=l=>{var c;return new RVe(l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:wne,supportedUrls:()=>({"*":[new RegExp(`^${n}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},i=l=>new CVe(l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=(l,c={})=>new BVe(l,c,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),a=function(l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return o(l)};return a.languageModel=o,a.chat=o,a.generativeAI=o,a.embedding=i,a.textEmbedding=i,a.textEmbeddingModel=i,a.image=s,a.imageModel=s,a.tools=zVe,a}kE();function eu(e){return Array.isArray?Array.isArray(e):jne(e)==="[object Array]"}function HVe(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function UVe(e){return e==null?"":HVe(e)}function jl(e){return typeof e=="string"}function Dne(e){return typeof e=="number"}function GVe(e){return e===!0||e===!1||qVe(e)&&jne(e)=="[object Boolean]"}function $ne(e){return typeof e=="object"}function qVe(e){return $ne(e)&&e!==null}function vs(e){return e!=null}function WA(e){return!e.trim().length}function jne(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ZVe="Incorrect 'index' type",WVe=e=>`Invalid value for key ${e}`,KVe=e=>`Pattern length exceeds max of ${e}.`,YVe=e=>`Missing ${e} property in key`,JVe=e=>`Property 'weight' in key '${e}' must be a positive integer`,qB=Object.prototype.hasOwnProperty;class XVe{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let o=Lne(r);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Lne(e){let t=null,n=null,r=null,o=1,i=null;if(jl(e)||eu(e))r=e,t=ZB(e),n=iI(e);else{if(!qB.call(e,"name"))throw new Error(YVe("name"));const s=e.name;if(r=s,qB.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(JVe(s));t=ZB(s),n=iI(s),i=e.getFn}return{path:t,id:n,weight:o,src:r,getFn:i}}function ZB(e){return eu(e)?e:e.split(".")}function iI(e){return eu(e)?e.join("."):e}function QVe(e,t){let n=[],r=!1;const o=(i,s,a)=>{if(vs(i))if(!s[a])n.push(i);else{let l=s[a];const c=i[l];if(!vs(c))return;if(a===s.length-1&&(jl(c)||Dne(c)||GVe(c)))n.push(UVe(c));else if(eu(c)){r=!0;for(let u=0,f=c.length;u<f;u+=1)o(c[u],s,a+1)}else s.length&&o(c,s,a+1)}};return o(e,jl(t)?t.split("."):t,0),r?n:n[0]}const eHe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},tHe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},nHe={location:0,threshold:.6,distance:100},rHe={useExtendedSearch:!1,getFn:QVe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var dt={...tHe,...eHe,...nHe,...rHe};const oHe=/[^ ]+/g;function iHe(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(o){const i=o.match(oHe).length;if(n.has(i))return n.get(i);const s=1/Math.pow(i,.5*e),a=parseFloat(Math.round(s*r)/r);return n.set(i,a),a},clear(){n.clear()}}}class qP{constructor({getFn:t=dt.getFn,fieldNormWeight:n=dt.fieldNormWeight}={}){this.norm=iHe(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,jl(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();jl(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!vs(t)||WA(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((o,i)=>{let s=o.getFn?o.getFn(t):this.getFn(t,o.path);if(vs(s)){if(eu(s)){let a=[];const l=[{nestedArrIndex:-1,value:s}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(vs(u))if(jl(u)&&!WA(u)){let f={v:u,i:c,n:this.norm.get(u)};a.push(f)}else eu(u)&&u.forEach((f,p)=>{l.push({nestedArrIndex:p,value:f})})}r.$[i]=a}else if(jl(s)&&!WA(s)){let a={v:s,n:this.norm.get(s)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function zne(e,t,{getFn:n=dt.getFn,fieldNormWeight:r=dt.fieldNormWeight}={}){const o=new qP({getFn:n,fieldNormWeight:r});return o.setKeys(e.map(Lne)),o.setSources(t),o.create(),o}function sHe(e,{getFn:t=dt.getFn,fieldNormWeight:n=dt.fieldNormWeight}={}){const{keys:r,records:o}=e,i=new qP({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(o),i}function _x(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:o=dt.distance,ignoreLocation:i=dt.ignoreLocation}={}){const s=t/e.length;if(i)return s;const a=Math.abs(r-n);return o?s+a/o:a?1:s}function aHe(e=[],t=dt.minMatchCharLength){let n=[],r=-1,o=-1,i=0;for(let s=e.length;i<s;i+=1){let a=e[i];a&&r===-1?r=i:!a&&r!==-1&&(o=i-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}const Ef=32;function lHe(e,t,n,{location:r=dt.location,distance:o=dt.distance,threshold:i=dt.threshold,findAllMatches:s=dt.findAllMatches,minMatchCharLength:a=dt.minMatchCharLength,includeMatches:l=dt.includeMatches,ignoreLocation:c=dt.ignoreLocation}={}){if(t.length>Ef)throw new Error(KVe(Ef));const u=t.length,f=e.length,p=Math.max(0,Math.min(r,f));let m=i,y=p;const b=a>1||l,w=b?Array(f):[];let S;for(;(S=e.indexOf(t,y))>-1;){let O=_x(t,{currentLocation:S,expectedLocation:p,distance:o,ignoreLocation:c});if(m=Math.min(O,m),y=S+u,b){let I=0;for(;I<u;)w[S+I]=1,I+=1}}y=-1;let E=[],T=1,A=u+f;const M=1<<u-1;for(let O=0;O<u;O+=1){let I=0,L=A;for(;I<L;)_x(t,{errors:O,currentLocation:p+L,expectedLocation:p,distance:o,ignoreLocation:c})<=m?I=L:A=L,L=Math.floor((A-I)/2+I);A=L;let $=Math.max(1,p-L+1),B=s?f:Math.min(p+L,f)+u,G=Array(B+2);G[B+1]=(1<<O)-1;for(let W=B;W>=$;W-=1){let K=W-1,F=n[e.charAt(K)];if(b&&(w[K]=+!!F),G[W]=(G[W+1]<<1|1)&F,O&&(G[W]|=(E[W+1]|E[W])<<1|1|E[W+1]),G[W]&M&&(T=_x(t,{errors:O,currentLocation:K,expectedLocation:p,distance:o,ignoreLocation:c}),T<=m)){if(m=T,y=K,y<=p)break;$=Math.max(1,2*p-y)}}if(_x(t,{errors:O+1,currentLocation:p,expectedLocation:p,distance:o,ignoreLocation:c})>m)break;E=G}const R={isMatch:y>=0,score:Math.max(.001,T)};if(b){const O=aHe(w,a);O.length?l&&(R.indices=O):R.isMatch=!1}return R}function cHe(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}const Mk=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class Bne{constructor(t,{location:n=dt.location,threshold:r=dt.threshold,distance:o=dt.distance,includeMatches:i=dt.includeMatches,findAllMatches:s=dt.findAllMatches,minMatchCharLength:a=dt.minMatchCharLength,isCaseSensitive:l=dt.isCaseSensitive,ignoreDiacritics:c=dt.ignoreDiacritics,ignoreLocation:u=dt.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:o,includeMatches:i,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:c,ignoreLocation:u},t=l?t:t.toLowerCase(),t=c?Mk(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(m,y)=>{this.chunks.push({pattern:m,alphabet:cHe(m),startIndex:y})},p=this.pattern.length;if(p>Ef){let m=0;const y=p%Ef,b=p-y;for(;m<b;)f(this.pattern.substr(m,Ef),m),m+=Ef;if(y){const w=p-Ef;f(this.pattern.substr(w),w)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:o}=this.options;if(t=n?t:t.toLowerCase(),t=r?Mk(t):t,this.pattern===t){let b={isMatch:!0,score:0};return o&&(b.indices=[[0,t.length-1]]),b}const{location:i,distance:s,threshold:a,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let f=[],p=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:w,startIndex:S})=>{const{isMatch:E,score:T,indices:A}=lHe(t,b,w,{location:i+S,distance:s,threshold:a,findAllMatches:l,minMatchCharLength:c,includeMatches:o,ignoreLocation:u});E&&(m=!0),p+=T,E&&A&&(f=[...f,...A])});let y={isMatch:m,score:m?p/this.chunks.length:1};return m&&o&&(y.indices=f),y}}class Ld{constructor(t){this.pattern=t}static isMultiMatch(t){return WB(t,this.multiRegex)}static isSingleMatch(t){return WB(t,this.singleRegex)}search(){}}function WB(e,t){const n=e.match(t);return n?n[1]:null}class uHe extends Ld{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class dHe extends Ld{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class fHe extends Ld{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class hHe extends Ld{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class pHe extends Ld{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class mHe extends Ld{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Fne extends Ld{constructor(t,{location:n=dt.location,threshold:r=dt.threshold,distance:o=dt.distance,includeMatches:i=dt.includeMatches,findAllMatches:s=dt.findAllMatches,minMatchCharLength:a=dt.minMatchCharLength,isCaseSensitive:l=dt.isCaseSensitive,ignoreDiacritics:c=dt.ignoreDiacritics,ignoreLocation:u=dt.ignoreLocation}={}){super(t),this._bitapSearch=new Bne(t,{location:n,threshold:r,distance:o,includeMatches:i,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Vne extends Ld{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const o=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+i,o.push([r,n-1]);const s=!!o.length;return{isMatch:s,score:s?0:1,indices:o}}}const sI=[uHe,Vne,fHe,hHe,mHe,pHe,dHe,Fne],KB=sI.length,gHe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,yHe="|";function bHe(e,t={}){return e.split(yHe).map(n=>{let r=n.trim().split(gHe).filter(i=>i&&!!i.trim()),o=[];for(let i=0,s=r.length;i<s;i+=1){const a=r[i];let l=!1,c=-1;for(;!l&&++c<KB;){const u=sI[c];let f=u.isMultiMatch(a);f&&(o.push(new u(f,t)),l=!0)}if(!l)for(c=-1;++c<KB;){const u=sI[c];let f=u.isSingleMatch(a);if(f){o.push(new u(f,t));break}}}return o})}const vHe=new Set([Fne.type,Vne.type]);class xHe{constructor(t,{isCaseSensitive:n=dt.isCaseSensitive,ignoreDiacritics:r=dt.ignoreDiacritics,includeMatches:o=dt.includeMatches,minMatchCharLength:i=dt.minMatchCharLength,ignoreLocation:s=dt.ignoreLocation,findAllMatches:a=dt.findAllMatches,location:l=dt.location,threshold:c=dt.threshold,distance:u=dt.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:o,minMatchCharLength:i,findAllMatches:a,ignoreLocation:s,location:l,threshold:c,distance:u},t=n?t:t.toLowerCase(),t=r?Mk(t):t,this.pattern=t,this.query=bHe(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:o,ignoreDiacritics:i}=this.options;t=o?t:t.toLowerCase(),t=i?Mk(t):t;let s=0,a=[],l=0;for(let c=0,u=n.length;c<u;c+=1){const f=n[c];a.length=0,s=0;for(let p=0,m=f.length;p<m;p+=1){const y=f[p],{isMatch:b,indices:w,score:S}=y.search(t);if(b){if(s+=1,l+=S,r){const E=y.constructor.type;vHe.has(E)?a=[...a,...w]:a.push(w)}}else{l=0,s=0,a.length=0;break}}if(s){let p={isMatch:!0,score:l/s};return r&&(p.indices=a),p}}return{isMatch:!1,score:1}}}const aI=[];function wHe(...e){aI.push(...e)}function lI(e,t){for(let n=0,r=aI.length;n<r;n+=1){let o=aI[n];if(o.condition(e,t))return new o(e,t)}return new Bne(e,t)}const Nk={AND:"$and",OR:"$or"},cI={PATH:"$path",PATTERN:"$val"},uI=e=>!!(e[Nk.AND]||e[Nk.OR]),SHe=e=>!!e[cI.PATH],kHe=e=>!eu(e)&&$ne(e)&&!uI(e),YB=e=>({[Nk.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Hne(e,t,{auto:n=!0}={}){const r=o=>{let i=Object.keys(o);const s=SHe(o);if(!s&&i.length>1&&!uI(o))return r(YB(o));if(kHe(o)){const l=s?o[cI.PATH]:i[0],c=s?o[cI.PATTERN]:o[l];if(!jl(c))throw new Error(WVe(l));const u={keyId:iI(l),pattern:c};return n&&(u.searcher=lI(c,t)),u}let a={children:[],operator:i[0]};return i.forEach(l=>{const c=o[l];eu(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return uI(e)||(e=YB(e)),r(e)}function CHe(e,{ignoreFieldNorm:t=dt.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:o,norm:i,score:s})=>{const a=o?o.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(t?1:i))}),n.score=r})}function EHe(e,t){const n=e.matches;t.matches=[],vs(n)&&n.forEach(r=>{if(!vs(r.indices)||!r.indices.length)return;const{indices:o,value:i}=r;let s={indices:o,value:i};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),t.matches.push(s)})}function THe(e,t){t.score=e.score}function _He(e,t,{includeMatches:n=dt.includeMatches,includeScore:r=dt.includeScore}={}){const o=[];return n&&o.push(EHe),r&&o.push(THe),e.map(i=>{const{idx:s}=i,a={item:t[s],refIndex:s};return o.length&&o.forEach(l=>{l(i,a)}),a})}class gg{constructor(t,n={},r){this.options={...dt,...n},this.options.useExtendedSearch,this._keyStore=new XVe(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof qP))throw new Error(ZVe);this._myIndex=n||zne(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){vs(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,o=this._docs.length;r<o;r+=1){const i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,o-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:o,shouldSort:i,sortFn:s,ignoreFieldNorm:a}=this.options;let l=jl(t)?jl(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return CHe(l,{ignoreFieldNorm:a}),i&&l.sort(s),Dne(n)&&n>-1&&(l=l.slice(0,n)),_He(l,this._docs,{includeMatches:r,includeScore:o})}_searchStringList(t){const n=lI(t,this.options),{records:r}=this._myIndex,o=[];return r.forEach(({v:i,i:s,n:a})=>{if(!vs(i))return;const{isMatch:l,score:c,indices:u}=n.searchIn(i);l&&o.push({item:i,idx:s,matches:[{score:c,value:i,norm:a,indices:u}]})}),o}_searchLogical(t){const n=Hne(t,this.options),r=(a,l,c)=>{if(!a.children){const{keyId:f,searcher:p}=a,m=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:p});return m&&m.length?[{idx:c,item:l,matches:m}]:[]}const u=[];for(let f=0,p=a.children.length;f<p;f+=1){const m=a.children[f],y=r(m,l,c);if(y.length)u.push(...y);else if(a.operator===Nk.AND)return[]}return u},o=this._myIndex.records,i={},s=[];return o.forEach(({$:a,i:l})=>{if(vs(a)){let c=r(n,a,l);c.length&&(i[l]||(i[l]={idx:l,item:a,matches:[]},s.push(i[l])),c.forEach(({matches:u})=>{i[l].matches.push(...u)}))}}),s}_searchObjectList(t){const n=lI(t,this.options),{keys:r,records:o}=this._myIndex,i=[];return o.forEach(({$:s,i:a})=>{if(!vs(s))return;let l=[];r.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:s[u],searcher:n}))}),l.length&&i.push({idx:a,item:s,matches:l})}),i}_findMatches({key:t,value:n,searcher:r}){if(!vs(n))return[];let o=[];if(eu(n))n.forEach(({v:i,i:s,n:a})=>{if(!vs(i))return;const{isMatch:l,score:c,indices:u}=r.searchIn(i);l&&o.push({score:c,key:t,value:i,idx:s,norm:a,indices:u})});else{const{v:i,n:s}=n,{isMatch:a,score:l,indices:c}=r.searchIn(i);a&&o.push({score:l,key:t,value:i,norm:s,indices:c})}return o}}gg.version="7.1.0";gg.createIndex=zne;gg.parseIndex=sHe;gg.config=dt;gg.parseQuery=Hne;wHe(xHe);const _n=WU(e=>({isSearchActive:!1,searchQuery:"",searchResults:[],isCommandPaletteOpen:!1,toggleSearch:()=>e(t=>({isSearchActive:!t.isSearchActive})),setSearchQuery:(t,n)=>{if(e({searchQuery:t}),t){const o=new gg(n,{keys:["title","content"],includeScore:!0}).search(t);e({searchResults:o.map(i=>i.item)})}else e({searchResults:[]})},openCommandPalette:()=>e({isCommandPaletteOpen:!0}),closeCommandPalette:()=>e({isCommandPaletteOpen:!1,searchQuery:"",searchResults:[]}),loadApiKey:async()=>{try{const t=await zt("get_google_api_key");e({googleApiKey:t})}catch(t){console.error("Failed to load API key:",t)}},deleteConfirmId:null,renamingNoteId:null,renameValue:"",contextMenu:null,isSettingsOpen:!1,isKanbanOpen:!1,isSupportOpen:!1,isRecording:!1,isAiSidebarOpen:!1,isSidebarFloating:!1,expandedFolders:new Set,deleteConfirmFolderId:null,googleApiKey:"",googleDriveConnected:!1,isSyncing:!1,lastSyncedAt:null,editor:null,aiMessages:[],aiStreamingMessage:"",aiIsLoading:!1,isProcessingRecording:!1,recordingStartTime:null,setDeleteConfirmId:t=>e({deleteConfirmId:t}),setDeleteConfirmFolderId:t=>e({deleteConfirmFolderId:t}),startRenaming:(t,n)=>e({renamingNoteId:t,renameValue:n}),finishRenaming:()=>e({renamingNoteId:null,renameValue:""}),setRenameValue:t=>e({renameValue:t}),setContextMenu:t=>e({contextMenu:t}),setIsSettingsOpen:t=>e({isSettingsOpen:t}),setIsKanbanOpen:t=>e({isKanbanOpen:t}),setIsSupportOpen:t=>e({isSupportOpen:t}),setIsRecording:t=>e({isRecording:t,recordingStartTime:t?Date.now():null}),setIsProcessingRecording:t=>e({isProcessingRecording:t}),setIsAiSidebarOpen:t=>e({isAiSidebarOpen:t}),setIsSidebarFloating:t=>e({isSidebarFloating:t}),setExpandedFolders:t=>e({expandedFolders:t}),setGoogleApiKey:t=>e({googleApiKey:t}),setGoogleDriveConnected:t=>e({googleDriveConnected:t}),setIsSyncing:t=>e({isSyncing:t}),setLastSyncedAt:t=>e({lastSyncedAt:t}),setEditor:t=>e({editor:t}),addAiMessage:t=>e(n=>({aiMessages:[...n.aiMessages,{...t,actionStatus:t.role==="assistant"?"pending":void 0}]})),updateLastAiMessage:t=>e(n=>{const r=[...n.aiMessages];return r.length>0&&r[r.length-1].role==="assistant"&&(r[r.length-1].content=t),{aiMessages:r}}),setAiMessageStatus:(t,n)=>e(r=>{const o=[...r.aiMessages];return o[t]&&(o[t].actionStatus=n),{aiMessages:o}}),setAiStreamingMessage:t=>e({aiStreamingMessage:t}),setAiIsLoading:t=>e({aiIsLoading:t}),clearAiChat:()=>e({aiMessages:[],aiStreamingMessage:"",aiIsLoading:!1})})),Une=k.createContext(null);function AHe(){const e=k.useContext(Une);if(!e)throw new Error("useEditorContext must be used within EditorProvider");return e}const MHe=e=>new Promise((t,n)=>{console.log("Starting base64 conversion for:",e.name,e.type,e.size);const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const o=r.result;console.log("Base64 conversion successful. Length:",o.length,"Prefix:",o.substring(0,50)),t(o)},r.onerror=o=>{console.error("Base64 conversion failed:",o),n(o)}});function NHe({children:e,currentNote:t,updateCurrentNoteContent:n,updateCurrentNoteTitle:r}){const{googleApiKey:o,setEditor:i}=_n(),s=k.useMemo(()=>o?kE({apiKey:o})("gemini-2.5-flash"):null,[o]),a=FC({tables:{splitCells:!0,cellBackgroundColor:!0,cellTextColor:!0,headers:!0},codeBlock:y5e,dictionary:{...CW,ai:LBe},extensions:s?[uBe({model:s})]:[],initialContent:t?.content?JSON.parse(t.content):void 0,uploadFile:async u=>{console.log("uploadFile triggered for:",u);try{return await MHe(u)}catch(f){throw console.error("uploadFile failed:",f),f}}}),l=k.useRef(null),c=k.useRef(null);return k.useEffect(()=>{i(a)},[a,i]),k.useEffect(()=>{if(t&&t.id!==l.current){console.log("Switching to note:",t.id),l.current=t.id;try{const u=t.content?JSON.parse(t.content):[];a.replaceBlocks(a.document,u)}catch{console.warn("Invalid JSON content, treating as plain text"),a.replaceBlocks(a.document,[{type:"paragraph",content:t.content||""}])}}},[t?.id,a]),k.useEffect(()=>{const u=()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{if(t){const f=JSON.stringify(a.document);n(f);const p=a.document[0];let m="Untitled";if(p){const y=p.content;typeof y=="string"?m=y||"Untitled":Array.isArray(y)&&(m=y.map(b=>b.text).join("")||"Untitled")}t.title!==m&&r(m)}},500)};return a.onChange(u),()=>{c.current&&clearTimeout(c.current)}},[a,t,n]),v.jsx(Une.Provider,{value:{editor:a,updateCurrentNoteTitle:r},children:e})}function RHe(){return v.jsx(v3,{formattingToolbar:()=>v.jsxs(b3,{children:[...y3()]})})}function IHe(e){const t=ht.c(3),{editor:n}=e,{googleApiKey:r}=_n();let o;return t[0]!==n||t[1]!==r?(o=v.jsx(MY,{triggerCharacter:"/",getItems:async i=>V4([...AY(n),...r?jBe(n):[]],i)}),t[0]=n,t[1]=r,t[2]=o):o=t[2],o}function JB(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function xv(...e){return t=>{let n=!1;const r=e.map(o=>{const i=JB(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():JB(e[o],null)}}}}function xi(...e){return k.useCallback(xv(...e),e)}var OHe=Symbol.for("react.lazy"),Rk=Bb[" use ".trim().toString()];function PHe(e){return typeof e=="object"&&e!==null&&"then"in e}function Gne(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===OHe&&"_payload"in e&&PHe(e._payload)}function DHe(e){const t=jHe(e),n=k.forwardRef((r,o)=>{let{children:i,...s}=r;Gne(i)&&typeof Rk=="function"&&(i=Rk(i._payload));const a=k.Children.toArray(i),l=a.find(zHe);if(l){const c=l.props.children,u=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return v.jsx(t,{...s,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return v.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}var $He=DHe("Slot");function jHe(e){const t=k.forwardRef((n,r)=>{let{children:o,...i}=n;if(Gne(o)&&typeof Rk=="function"&&(o=Rk(o._payload)),k.isValidElement(o)){const s=FHe(o),a=BHe(i,o.props);return o.type!==k.Fragment&&(a.ref=r?xv(r,s):s),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var LHe=Symbol("radix.slottable");function zHe(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===LHe}function BHe(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function FHe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VHe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HHe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),XB=e=>{const t=HHe(e);return t.charAt(0).toUpperCase()+t.slice(1)},qne=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),UHe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GHe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qHe=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>k.createElement("svg",{ref:l,...GHe,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:qne("lucide",o),...!i&&!UHe(a)&&{"aria-hidden":"true"},...a},[...s.map(([c,u])=>k.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(e,t)=>{const n=k.forwardRef(({className:r,...o},i)=>k.createElement(qHe,{ref:i,iconNode:t,className:qne(`lucide-${VHe(XB(e))}`,`lucide-${e}`,r),...o}));return n.displayName=XB(e),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZHe=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],WHe=We("arrow-down",ZHe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KHe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],YHe=We("arrow-right",KHe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JHe=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Zne=We("arrow-up",JHe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XHe=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"m10.852 9.228-.383-.923",key:"1fjppe"}],["path",{d:"m13.148 14.772.382.924",key:"je3va1"}],["path",{d:"m13.531 8.305-.383.923",key:"18epck"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 0 0-5.63-1.446 3 3 0 0 0-.368 1.571 4 4 0 0 0-2.525 5.771",key:"jcbbz1"}],["path",{d:"M17.998 5.125a4 4 0 0 1 2.525 5.771",key:"1kkn7e"}],["path",{d:"M19.505 10.294a4 4 0 0 1-1.5 7.706",key:"18bmuc"}],["path",{d:"M4.032 17.483A4 4 0 0 0 11.464 20c.18-.311.892-.311 1.072 0a4 4 0 0 0 7.432-2.516",key:"uozx0d"}],["path",{d:"M4.5 10.291A4 4 0 0 0 6 18",key:"whdemb"}],["path",{d:"M6.002 5.125a3 3 0 0 0 .4 1.375",key:"1kqy2g"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],QHe=We("brain-cog",XHe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eUe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ax=We("calendar",eUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tUe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],dI=We("check",tUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nUe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],CE=We("chevron-down",nUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rUe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],oUe=We("chevron-left",rUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iUe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ik=We("chevron-right",iUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sUe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],aUe=We("chevron-up",sUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lUe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],QB=We("circle-check-big",lUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cUe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],uUe=We("circle-check",cUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dUe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],Wne=We("circle-stop",dUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fUe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],hUe=We("circle-x",fUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pUe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fI=We("clock",pUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mUe=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],eF=We("cloud-off",mUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gUe=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],kb=We("cloud",gUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yUe=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],tF=We("cpu",yUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bUe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ZP=We("download",bUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vUe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],p0=We("ellipsis",vUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xUe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],wUe=We("external-link",xUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SUe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}]],nF=We("file-minus",SUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kUe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hI=We("file-text",kUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CUe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]],EUe=We("file-type",CUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TUe=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],_Ue=We("files",TUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AUe=[["path",{d:"M10 10.5 8 13l2 2.5",key:"m4t9c1"}],["path",{d:"m14 10.5 2 2.5-2 2.5",key:"14w2eb"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2z",key:"1u1bxd"}]],MUe=We("folder-code",AUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NUe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],RUe=We("folder-open",NUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IUe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],OUe=We("folder",IUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PUe=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],DUe=We("github",PUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],jUe=We("globe",$Ue);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LUe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],zUe=We("hard-drive",LUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BUe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],rF=We("hash",BUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FUe=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],VUe=We("house",FUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HUe=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],pI=We("list-todo",HUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UUe=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],GUe=We("list",UUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qUe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cb=We("loader-circle",qUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZUe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],WUe=We("mic",ZUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KUe=[["path",{d:"M5 12h14",key:"1ays0h"}]],YUe=We("minus",KUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JUe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],XUe=We("panel-left",JUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QUe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],eGe=We("panel-right",QUe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tGe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Ok=We("panels-top-left",tGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nGe=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],rGe=We("paperclip",nGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oGe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],iGe=We("pen-line",oGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sGe=[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],oF=We("pencil-ruler",sGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aGe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Eb=We("plus",aGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lGe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Pk=We("refresh-cw",lGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cGe=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],iF=We("rotate-cw",cGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uGe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dGe=We("search",uGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fGe=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],hGe=We("settings-2",fGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pGe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mGe=We("settings",pGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gGe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],yGe=We("shield",gGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bGe=[["path",{d:"M22 2 2 22",key:"y4kqgn"}]],sF=We("slash",bGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vGe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Lp=We("sparkles",vGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xGe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],wGe=We("square",xGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SGe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Cw=We("star",SGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kGe=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],CGe=We("terminal",kGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EGe=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],aF=We("text-align-start",EGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TGe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lF=We("trash-2",TGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ge=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Kne=We("triangle-alert",_Ge);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AGe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],MGe=We("upload",AGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NGe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cF=We("user",NGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RGe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],IGe=We("wifi-off",RGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OGe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],PGe=We("wifi",OGe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DGe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mh=We("x",DGe),WP="-",$Ge=e=>{const t=LGe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const a=s.split(WP);return a[0]===""&&a.length!==1&&a.shift(),Yne(a,t)||jGe(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},Yne=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?Yne(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const i=e.join(WP);return t.validators.find(({validator:s})=>s(i))?.classGroupId},uF=/^\[(.+)\]$/,jGe=e=>{if(uF.test(e)){const t=uF.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},LGe=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const o in n)mI(n[o],r,o,t);return r},mI=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const i=o===""?t:dF(t,o);i.classGroupId=n;return}if(typeof o=="function"){if(zGe(o)){mI(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{mI(s,dF(t,i),n,r)})})},dF=(e,t)=>{let n=e;return t.split(WP).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},zGe=e=>e.isThemeGetter,BGe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},gI="!",yI=":",FGe=yI.length,VGe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const i=[];let s=0,a=0,l=0,c;for(let y=0;y<o.length;y++){let b=o[y];if(s===0&&a===0){if(b===yI){i.push(o.slice(l,y)),l=y+FGe;continue}if(b==="/"){c=y;continue}}b==="["?s++:b==="]"?s--:b==="("?a++:b===")"&&a--}const u=i.length===0?o:o.substring(l),f=HGe(u),p=f!==u,m=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:m}};if(t){const o=t+yI,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=i=>n({className:i,parseClassName:o})}return r},HGe=e=>e.endsWith(gI)?e.substring(0,e.length-1):e.startsWith(gI)?e.substring(1):e,UGe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},GGe=e=>({cache:BGe(e.cacheSize),parseClassName:VGe(e),sortModifiers:UGe(e),...$Ge(e)}),qGe=/\s+/,ZGe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=t,s=[],a=e.trim().split(qGe);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:p,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:b}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let w=!!b,S=r(w?y.substring(0,b):y);if(!S){if(!w){l=u+(l.length>0?" "+l:l);continue}if(S=r(y),!S){l=u+(l.length>0?" "+l:l);continue}w=!1}const E=i(p).join(":"),T=m?E+gI:E,A=T+S;if(s.includes(A))continue;s.push(A);const M=o(S,w);for(let R=0;R<M.length;++R){const O=M[R];s.push(T+O)}l=u+(l.length>0?" "+l:l)}return l};function WGe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Jne(t))&&(r&&(r+=" "),r+=n);return r}const Jne=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Jne(e[r]))&&(n&&(n+=" "),n+=t);return n};function KGe(e,...t){let n,r,o,i=s;function s(l){const c=t.reduce((u,f)=>f(u),e());return n=GGe(c),r=n.cache.get,o=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=ZGe(l,n);return o(l,u),u}return function(){return i(WGe.apply(null,arguments))}}const eo=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Xne=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Qne=/^\((?:(\w[\w-]*):)?(.+)\)$/i,YGe=/^\d+\/\d+$/,JGe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,XGe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QGe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,eqe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tqe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Tp=e=>YGe.test(e),Nt=e=>!!e&&!Number.isNaN(Number(e)),Bu=e=>!!e&&Number.isInteger(Number(e)),KA=e=>e.endsWith("%")&&Nt(e.slice(0,-1)),Ic=e=>JGe.test(e),nqe=()=>!0,rqe=e=>XGe.test(e)&&!QGe.test(e),ere=()=>!1,oqe=e=>eqe.test(e),iqe=e=>tqe.test(e),sqe=e=>!Ge(e)&&!qe(e),aqe=e=>yg(e,rre,ere),Ge=e=>Xne.test(e),hf=e=>yg(e,ore,rqe),YA=e=>yg(e,fqe,Nt),fF=e=>yg(e,tre,ere),lqe=e=>yg(e,nre,iqe),Mx=e=>yg(e,ire,oqe),qe=e=>Qne.test(e),Ty=e=>bg(e,ore),cqe=e=>bg(e,hqe),hF=e=>bg(e,tre),uqe=e=>bg(e,rre),dqe=e=>bg(e,nre),Nx=e=>bg(e,ire,!0),yg=(e,t,n)=>{const r=Xne.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},bg=(e,t,n=!1)=>{const r=Qne.exec(e);return r?r[1]?t(r[1]):n:!1},tre=e=>e==="position"||e==="percentage",nre=e=>e==="image"||e==="url",rre=e=>e==="length"||e==="size"||e==="bg-size",ore=e=>e==="length",fqe=e=>e==="number",hqe=e=>e==="family-name",ire=e=>e==="shadow",pqe=()=>{const e=eo("color"),t=eo("font"),n=eo("text"),r=eo("font-weight"),o=eo("tracking"),i=eo("leading"),s=eo("breakpoint"),a=eo("container"),l=eo("spacing"),c=eo("radius"),u=eo("shadow"),f=eo("inset-shadow"),p=eo("text-shadow"),m=eo("drop-shadow"),y=eo("blur"),b=eo("perspective"),w=eo("aspect"),S=eo("ease"),E=eo("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...A(),qe,Ge],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],I=()=>[qe,Ge,l],L=()=>[Tp,"full","auto",...I()],$=()=>[Bu,"none","subgrid",qe,Ge],B=()=>["auto",{span:["full",Bu,qe,Ge]},Bu,qe,Ge],G=()=>[Bu,"auto",qe,Ge],V=()=>["auto","min","max","fr",qe,Ge],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],K=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...I()],q=()=>[Tp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],H=()=>[e,qe,Ge],z=()=>[...A(),hF,fF,{position:[qe,Ge]}],N=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",uqe,aqe,{size:[qe,Ge]}],te=()=>[KA,Ty,hf],D=()=>["","none","full",c,qe,Ge],ce=()=>["",Nt,Ty,hf],ae=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>[Nt,KA,hF,fF],ye=()=>["","none",y,qe,Ge],Re=()=>["none",Nt,qe,Ge],$e=()=>["none",Nt,qe,Ge],Be=()=>[Nt,qe,Ge],je=()=>[Tp,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ic],breakpoint:[Ic],color:[nqe],container:[Ic],"drop-shadow":[Ic],ease:["in","out","in-out"],font:[sqe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ic],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ic],shadow:[Ic],spacing:["px",Nt],text:[Ic],"text-shadow":[Ic],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Tp,Ge,qe,w]}],container:["container"],columns:[{columns:[Nt,Ge,qe,a]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[Bu,"auto",qe,Ge]}],basis:[{basis:[Tp,"full","auto",a,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Nt,Tp,"auto","initial","none",Ge]}],grow:[{grow:["",Nt,qe,Ge]}],shrink:[{shrink:["",Nt,qe,Ge]}],order:[{order:[Bu,"first","last","none",qe,Ge]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...K(),"normal"]}],"justify-self":[{"justify-self":["auto",...K()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...K(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...K(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...K(),"baseline"]}],"place-self":[{"place-self":["auto",...K()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[a,"screen",...q()]}],"min-w":[{"min-w":[a,"screen","none",...q()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",n,Ty,hf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,qe,YA]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",KA,Ge]}],"font-family":[{font:[cqe,Ge,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,qe,Ge]}],"line-clamp":[{"line-clamp":[Nt,"none",qe,YA]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",qe,Ge]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",qe,Ge]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[Nt,"from-font","auto",qe,hf]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[Nt,"auto",qe,Ge]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe,Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe,Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:N()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bu,qe,Ge],radial:["",qe,Ge],conic:[Bu,qe,Ge]},dqe,lqe]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Nt,qe,Ge]}],"outline-w":[{outline:["",Nt,Ty,hf]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",u,Nx,Mx]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",f,Nx,Mx]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[Nt,hf]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",p,Nx,Mx]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[Nt,qe,Ge]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Nt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":ie()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":ie()}],"mask-image-t-to-pos":[{"mask-t-to":ie()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":ie()}],"mask-image-r-to-pos":[{"mask-r-to":ie()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":ie()}],"mask-image-b-to-pos":[{"mask-b-to":ie()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":ie()}],"mask-image-l-to-pos":[{"mask-l-to":ie()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":ie()}],"mask-image-x-to-pos":[{"mask-x-to":ie()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":ie()}],"mask-image-y-to-pos":[{"mask-y-to":ie()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[qe,Ge]}],"mask-image-radial-from-pos":[{"mask-radial-from":ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":ie()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Nt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":ie()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:N()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",qe,Ge]}],filter:[{filter:["","none",qe,Ge]}],blur:[{blur:ye()}],brightness:[{brightness:[Nt,qe,Ge]}],contrast:[{contrast:[Nt,qe,Ge]}],"drop-shadow":[{"drop-shadow":["","none",m,Nx,Mx]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",Nt,qe,Ge]}],"hue-rotate":[{"hue-rotate":[Nt,qe,Ge]}],invert:[{invert:["",Nt,qe,Ge]}],saturate:[{saturate:[Nt,qe,Ge]}],sepia:[{sepia:["",Nt,qe,Ge]}],"backdrop-filter":[{"backdrop-filter":["","none",qe,Ge]}],"backdrop-blur":[{"backdrop-blur":ye()}],"backdrop-brightness":[{"backdrop-brightness":[Nt,qe,Ge]}],"backdrop-contrast":[{"backdrop-contrast":[Nt,qe,Ge]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Nt,qe,Ge]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Nt,qe,Ge]}],"backdrop-invert":[{"backdrop-invert":["",Nt,qe,Ge]}],"backdrop-opacity":[{"backdrop-opacity":[Nt,qe,Ge]}],"backdrop-saturate":[{"backdrop-saturate":[Nt,qe,Ge]}],"backdrop-sepia":[{"backdrop-sepia":["",Nt,qe,Ge]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",qe,Ge]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Nt,"initial",qe,Ge]}],ease:[{ease:["linear","initial",S,qe,Ge]}],delay:[{delay:[Nt,qe,Ge]}],animate:[{animate:["none",E,qe,Ge]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,qe,Ge]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:Re()}],"rotate-x":[{"rotate-x":Re()}],"rotate-y":[{"rotate-y":Re()}],"rotate-z":[{"rotate-z":Re()}],scale:[{scale:$e()}],"scale-x":[{"scale-x":$e()}],"scale-y":[{"scale-y":$e()}],"scale-z":[{"scale-z":$e()}],"scale-3d":["scale-3d"],skew:[{skew:Be()}],"skew-x":[{"skew-x":Be()}],"skew-y":[{"skew-y":Be()}],transform:[{transform:[qe,Ge,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:je()}],"translate-x":[{"translate-x":je()}],"translate-y":[{"translate-y":je()}],"translate-z":[{"translate-z":je()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe,Ge]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe,Ge]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[Nt,Ty,hf,YA]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},mqe=KGe(pqe);function vg(...e){return mqe(Li(e))}const gqe=e=>{const t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return`${t}:${n}`};function yqe(e){const t=ht.c(4);let n;t[0]!==e?({...n}=e,t[0]=e,t[1]=n):n=t[1];let r;return t[2]!==n?(r=v.jsx("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...n}),t[2]=n,t[3]=r):r=t[3],r}function bqe(e){const t=ht.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=vg("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",n),t[3]=n,t[4]=o):o=t[4];let i;return t[5]!==r||t[6]!==o?(i=v.jsx("ol",{"data-slot":"breadcrumb-list",className:o,...r}),t[5]=r,t[6]=o,t[7]=i):i=t[7],i}function JA(e){const t=ht.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=vg("inline-flex items-center gap-1.5",n),t[3]=n,t[4]=o):o=t[4];let i;return t[5]!==r||t[6]!==o?(i=v.jsx("li",{"data-slot":"breadcrumb-item",className:o,...r}),t[5]=r,t[6]=o,t[7]=i):i=t[7],i}function pF(e){const t=ht.c(10);let n,r,o;t[0]!==e?({asChild:n,className:r,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);const i=n?$He:"a";let s;t[4]!==r?(s=vg("hover:text-foreground transition-colors",r),t[4]=r,t[5]=s):s=t[5];let a;return t[6]!==i||t[7]!==o||t[8]!==s?(a=v.jsx(i,{"data-slot":"breadcrumb-link",className:s,...o}),t[6]=i,t[7]=o,t[8]=s,t[9]=a):a=t[9],a}function vqe(e){const t=ht.c(8);let n,r;t[0]!==e?({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);let o;t[3]!==n?(o=vg("text-foreground font-normal",n),t[3]=n,t[4]=o):o=t[4];let i;return t[5]!==r||t[6]!==o?(i=v.jsx("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:o,...r}),t[5]=r,t[6]=o,t[7]=i):i=t[7],i}function mF(e){const t=ht.c(12);let n,r,o;t[0]!==e?({children:n,className:r,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);let i;t[4]!==r?(i=vg("[&>svg]:size-3.5",r),t[4]=r,t[5]=i):i=t[5];let s;t[6]!==n?(s=n??v.jsx(Ik,{}),t[6]=n,t[7]=s):s=t[7];let a;return t[8]!==o||t[9]!==i||t[10]!==s?(a=v.jsx("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:i,...o,children:s}),t[8]=o,t[9]=i,t[10]=s,t[11]=a):a=t[11],a}async function xqe(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}async function wqe(e={}){return typeof e=="object"&&Object.freeze(e),await xqe("plugin:dialog|save",{options:e})}var gF;(function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Document=6]="Document",e[e.Download=7]="Download",e[e.Picture=8]="Picture",e[e.Public=9]="Public",e[e.Video=10]="Video",e[e.Resource=11]="Resource",e[e.Temp=12]="Temp",e[e.AppConfig=13]="AppConfig",e[e.AppData=14]="AppData",e[e.AppLocalData=15]="AppLocalData",e[e.AppCache=16]="AppCache",e[e.AppLog=17]="AppLog",e[e.Desktop=18]="Desktop",e[e.Executable=19]="Executable",e[e.Font=20]="Font",e[e.Home=21]="Home",e[e.Runtime=22]="Runtime",e[e.Template=23]="Template"})(gF||(gF={}));var yF;(function(e){e[e.Start=0]="Start",e[e.Current=1]="Current",e[e.End=2]="End"})(yF||(yF={}));async function Sqe(e,t,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=new TextEncoder;await zt("plugin:fs|write_text_file",r.encode(t),{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(n)}})}let kqe={data:""},Cqe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||kqe},Eqe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Tqe=/\/\*[^]*?\*\/|  +/g,bF=/\n+/g,td=(e,t)=>{let n="",r="",o="";for(let i in e){let s=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+s+";":r+=i[1]=="f"?td(s,i):i+"{"+td(s,i[1]=="k"?"":t)+"}":typeof s=="object"?r+=td(s,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):s!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=td.p?td.p(i,s):i+":"+s+";")}return n+(t&&o?t+"{"+o+"}":o)+r},Oc={},sre=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+sre(e[n]);return t}return e},_qe=(e,t,n,r,o)=>{let i=sre(e),s=Oc[i]||(Oc[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Oc[s]){let l=i!==e?e:(c=>{let u,f,p=[{}];for(;u=Eqe.exec(c.replace(Tqe,""));)u[4]?p.shift():u[3]?(f=u[3].replace(bF," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(bF," ").trim();return p[0]})(e);Oc[s]=td(o?{["@keyframes "+s]:l}:l,n?"":"."+s)}let a=n&&Oc.g?Oc.g:null;return n&&(Oc.g=Oc[s]),((l,c,u,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Oc[s],t,r,a),s},Aqe=(e,t,n)=>e.reduce((r,o,i)=>{let s=t[i];if(s&&s.call){let a=s(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;s=l?"."+l:a&&typeof a=="object"?a.props?"":td(a,""):a===!1?"":a}return r+o+(s??"")},"");function EE(e){let t=this||{},n=e.call?e(t.p):e;return _qe(n.unshift?n.raw?Aqe(n,[].slice.call(arguments,1),t.p):n.reduce((r,o)=>Object.assign(r,o&&o.call?o(t.p):o),{}):n,Cqe(t.target),t.g,t.o,t.k)}let are,bI,vI;EE.bind({g:1});let tu=EE.bind({k:1});function Mqe(e,t,n,r){td.p=t,are=e,bI=n,vI=r}function zd(e,t){let n=this||{};return function(){let r=arguments;function o(i,s){let a=Object.assign({},i),l=a.className||o.className;n.p=Object.assign({theme:bI&&bI()},a),n.o=/ *go\d+/.test(l),a.className=EE.apply(n,r)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),vI&&c[0]&&vI(a),are(c,a)}return o}}var Nqe=e=>typeof e=="function",Dk=(e,t)=>Nqe(e)?e(t):e,Rqe=(()=>{let e=0;return()=>(++e).toString()})(),lre=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Iqe=20,KP="default",cre=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:r}=t;return cre(e,{type:e.toasts.find(s=>s.id===r.id)?1:0,toast:r});case 3:let{toastId:o}=t;return{...e,toasts:e.toasts.map(s=>s.id===o||o===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Ew=[],ure={toasts:[],pausedAt:void 0,settings:{toastLimit:Iqe}},Ll={},dre=(e,t=KP)=>{Ll[t]=cre(Ll[t]||ure,e),Ew.forEach(([n,r])=>{n===t&&r(Ll[t])})},fre=e=>Object.keys(Ll).forEach(t=>dre(e,t)),Oqe=e=>Object.keys(Ll).find(t=>Ll[t].toasts.some(n=>n.id===e)),TE=(e=KP)=>t=>{dre(t,e)},Pqe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Dqe=(e={},t=KP)=>{let[n,r]=k.useState(Ll[t]||ure),o=k.useRef(Ll[t]);k.useEffect(()=>(o.current!==Ll[t]&&r(Ll[t]),Ew.push([t,r]),()=>{let s=Ew.findIndex(([a])=>a===t);s>-1&&Ew.splice(s,1)}),[t]);let i=n.toasts.map(s=>{var a,l,c;return{...e,...e[s.type],...s,removeDelay:s.removeDelay||((a=e[s.type])==null?void 0:a.removeDelay)||e?.removeDelay,duration:s.duration||((l=e[s.type])==null?void 0:l.duration)||e?.duration||Pqe[s.type],style:{...e.style,...(c=e[s.type])==null?void 0:c.style,...s.style}}});return{...n,toasts:i}},$qe=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||Rqe()}),wv=e=>(t,n)=>{let r=$qe(t,e,n);return TE(r.toasterId||Oqe(r.id))({type:2,toast:r}),r.id},oo=(e,t)=>wv("blank")(e,t);oo.error=wv("error");oo.success=wv("success");oo.loading=wv("loading");oo.custom=wv("custom");oo.dismiss=(e,t)=>{let n={type:3,toastId:e};t?TE(t)(n):fre(n)};oo.dismissAll=e=>oo.dismiss(void 0,e);oo.remove=(e,t)=>{let n={type:4,toastId:e};t?TE(t)(n):fre(n)};oo.removeAll=e=>oo.remove(void 0,e);oo.promise=(e,t,n)=>{let r=oo.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let i=t.success?Dk(t.success,o):void 0;return i?oo.success(i,{id:r,...n,...n?.success}):oo.dismiss(r),o}).catch(o=>{let i=t.error?Dk(t.error,o):void 0;i?oo.error(i,{id:r,...n,...n?.error}):oo.dismiss(r)}),e};var jqe=1e3,Lqe=(e,t="default")=>{let{toasts:n,pausedAt:r}=Dqe(e,t),o=k.useRef(new Map).current,i=k.useCallback((f,p=jqe)=>{if(o.has(f))return;let m=setTimeout(()=>{o.delete(f),s({type:4,toastId:f})},p);o.set(f,m)},[]);k.useEffect(()=>{if(r)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let y=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(y<0){m.visible&&oo.dismiss(m.id);return}return setTimeout(()=>oo.dismiss(m.id,t),y)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,r,t]);let s=k.useCallback(TE(t),[t]),a=k.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=k.useCallback((f,p)=>{s({type:1,toast:{id:f,height:p}})},[s]),c=k.useCallback(()=>{r&&s({type:6,time:Date.now()})},[r,s]),u=k.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:y=8,defaultPosition:b}=p||{},w=n.filter(T=>(T.position||b)===(f.position||b)&&T.height),S=w.findIndex(T=>T.id===f.id),E=w.filter((T,A)=>A<S&&T.visible).length;return w.filter(T=>T.visible).slice(...m?[E+1]:[0,E]).reduce((T,A)=>T+(A.height||0)+y,0)},[n]);return k.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=o.get(f.id);p&&(clearTimeout(p),o.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},zqe=tu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Bqe=tu`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Fqe=tu`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Vqe=zd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zqe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Bqe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Fqe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Hqe=tu`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Uqe=zd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Hqe} 1s linear infinite;
`,Gqe=tu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qqe=tu`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Zqe=zd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Gqe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qqe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Wqe=zd("div")`
  position: absolute;
`,Kqe=zd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Yqe=tu`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Jqe=zd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Yqe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Xqe=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?k.createElement(Jqe,null,t):t:n==="blank"?null:k.createElement(Kqe,null,k.createElement(Uqe,{...r}),n!=="loading"&&k.createElement(Wqe,null,n==="error"?k.createElement(Vqe,{...r}):k.createElement(Zqe,{...r})))},Qqe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,eZe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,tZe="0%{opacity:0;} 100%{opacity:1;}",nZe="0%{opacity:1;} 100%{opacity:0;}",rZe=zd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,oZe=zd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,iZe=(e,t)=>{let n=e.includes("top")?1:-1,[r,o]=lre()?[tZe,nZe]:[Qqe(n),eZe(n)];return{animation:t?`${tu(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${tu(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},sZe=k.memo(({toast:e,position:t,style:n,children:r})=>{let o=e.height?iZe(e.position||t||"top-center",e.visible):{opacity:0},i=k.createElement(Xqe,{toast:e}),s=k.createElement(oZe,{...e.ariaProps},Dk(e.message,e));return k.createElement(rZe,{className:e.className,style:{...o,...n,...e.style}},typeof r=="function"?r({icon:i,message:s}):k.createElement(k.Fragment,null,i,s))});Mqe(k.createElement);var aZe=({id:e,className:t,style:n,onHeightUpdate:r,children:o})=>{let i=k.useCallback(s=>{if(s){let a=()=>{let l=s.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return k.createElement("div",{ref:i,className:t,style:n},o)},lZe=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:lre()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...o}},cZe=EE`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Rx=16,uZe=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:o,toasterId:i,containerStyle:s,containerClassName:a})=>{let{toasts:l,handlers:c}=Lqe(n,i);return k.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Rx,left:Rx,right:Rx,bottom:Rx,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let f=u.position||t,p=c.calculateOffset(u,{reverseOrder:e,gutter:r,defaultPosition:t}),m=lZe(f,p);return k.createElement(aZe,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?cZe:"",style:m},u.type==="custom"?Dk(u.message,u):o?o(u):k.createElement(sZe,{toast:u,position:f}))}))},pt=oo;function dZe(){const{editor:e}=AHe(),{googleApiKey:t,setEditor:n}=_n(),r=Ur(m=>m.currentNote),o=Ur(m=>m.folders),{toggleStar:i}=Ur.getState(),[s,a]=k.useState(!1),l=k.useRef(null);k.useEffect(()=>(e&&n(e),()=>{n(null)}),[e,n]),k.useEffect(()=>{const m=y=>{l.current&&!l.current.contains(y.target)&&a(!1)};return s&&document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[s]);const c=async()=>{if(!(!e||!r)){a(!1);try{const m=await e.blocksToMarkdownLossy(e.document),y=`${r.title||"Untitled"}.md`,b=await wqe({defaultPath:y,filters:[{name:"Markdown",extensions:["md"]}]});b&&(await Sqe(b,m),pt.success("Exported as Markdown!"))}catch(m){console.error("Export failed:",m),pt.error("Export failed")}}},u=async()=>{if(!(!e||!r)){a(!1);try{const m=await e.blocksToHTMLLossy(e.document),y=r.title||"Untitled",b=document.createElement("iframe");b.style.position="fixed",b.style.right="0",b.style.bottom="0",b.style.width="0",b.style.height="0",b.style.border="none",document.body.appendChild(b);const w=b.contentDocument||b.contentWindow?.document;if(!w){pt.error("Failed to create print preview"),document.body.removeChild(b);return}w.open(),w.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>${y}</title>
            <style>
              body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                line-height: 1.6;
                max-width: 800px;
                margin: 0 auto;
                padding: 40px 20px;
                color: #1a1a1a;
              }
              h1 { font-size: 2em; margin-bottom: 0.5em; border-bottom: 1px solid #eee; padding-bottom: 0.3em; }
              h2 { font-size: 1.5em; margin-top: 1.5em; }
              h3 { font-size: 1.25em; }
              p { margin: 1em 0; }
              ul, ol { padding-left: 2em; }
              li { margin: 0.5em 0; }
              code { background: #f4f4f4; padding: 0.2em 0.4em; border-radius: 3px; font-size: 0.9em; }
              pre { background: #f4f4f4; padding: 1em; border-radius: 5px; overflow-x: auto; }
              blockquote { border-left: 4px solid #ddd; margin: 1em 0; padding-left: 1em; color: #666; }
              img { max-width: 100%; height: auto; }
              table { border-collapse: collapse; width: 100%; margin: 1em 0; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background: #f4f4f4; }
              @media print {
                body { padding: 0; }
              }
            </style>
          </head>
          <body>
            <h1>${y}</h1>
            ${m}
          </body>
        </html>
      `),w.close(),setTimeout(()=>{b.contentWindow?.focus(),b.contentWindow?.print(),setTimeout(()=>{document.body.removeChild(b)},1e3)},250),pt.success("Opening print dialog...")}catch(m){console.error("PDF export failed:",m),pt.error("PDF export failed")}}};if(!e)return v.jsx("div",{className:"flex flex-col w-full h-full bg-zinc-930 items-center justify-center",children:v.jsx("div",{className:"text-zinc-400",children:"Loading editor..."})});const p=(()=>{if(!r?.folder_id)return[];const m=[];let y=r.folder_id,b=0;for(;y&&b<50;){const w=o.find(S=>S.id===y);if(w)m.unshift(w),y=w.parent_id;else break;b++}return m})();return v.jsxs("div",{className:"flex flex-col w-full h-full bg-zinc-930 relative",children:[v.jsxs("div",{className:"absolute top-8 left-24 z-10 w-[calc(100%-8rem)] flex items-center justify-between pointer-events-none",children:[v.jsx("div",{className:"pointer-events-auto overflow-hidden",children:v.jsx(yqe,{children:v.jsxs(bqe,{children:[v.jsx(JA,{children:v.jsx(pF,{className:"text-zinc-500 hover:text-zinc-300 text-xs",children:"Home"})}),p.length>0&&v.jsx(mF,{children:v.jsx(sF,{className:"size-3 text-zinc-600"})}),p.map(m=>v.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2.5",children:[v.jsx(JA,{children:v.jsx(pF,{className:"text-zinc-500 hover:text-zinc-300 text-xs text-nowrap",children:m.name})}),v.jsx(mF,{children:v.jsx(sF,{className:"size-3 text-zinc-600"})})]},m.id)),v.jsx(JA,{children:v.jsx(vqe,{className:"text-zinc-300 text-xs font-medium truncate max-w-[200px]",children:r?.title||"Untitled"})})]})})}),v.jsxs("div",{className:"flex items-center gap-1 pointer-events-auto bg-zinc-930 pl-2",children:[v.jsx("button",{onClick:()=>r&&i(r.id),className:`p-1.5 hover:bg-zinc-800 rounded-md transition-colors ${r?.starred?"text-yellow-400":"text-zinc-500 hover:text-yellow-400"}`,title:r?.starred?"Unstar":"Star",children:v.jsx(Cw,{size:16,className:r?.starred?"fill-yellow-400":""})}),v.jsxs("div",{className:"relative",ref:l,children:[v.jsx("button",{onClick:()=>a(!s),className:"p-1.5 text-zinc-500 hover:text-zinc-200 hover:bg-zinc-800 rounded-md transition-colors",title:"Export",children:v.jsx(ZP,{size:16})}),s&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-zinc-900 border border-zinc-800 rounded-lg shadow-xl py-1 min-w-[160px] z-50",children:[v.jsx("p",{className:"px-3 py-2 text-sm text-zinc-300",children:"Share as:"}),v.jsxs("button",{onClick:c,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:[v.jsx(hI,{size:14}),"Markdown (.md)"]}),v.jsxs("button",{onClick:u,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:[v.jsx(EUe,{size:14}),"PDF (Print)"]})]})]})]})]}),v.jsx("div",{className:"flex-1",children:v.jsxs(JJ,{editor:e,formattingToolbar:!1,slashMenu:!1,className:"h-full bg-zinc-950 pl-24 pt-20 pr-12","data-theming-css-variables-demo":!0,children:[t&&v.jsx(DBe,{}),v.jsx(RHe,{}),v.jsx(IHe,{editor:e})]})})]})}const YP=k.createContext({});function JP(e){const t=k.useRef(null);return t.current===null&&(t.current=e()),t.current}const XP=typeof window<"u",hre=XP?k.useLayoutEffect:k.useEffect,_E=k.createContext(null);function QP(e,t){e.indexOf(t)===-1&&e.push(t)}function eD(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const nu=(e,t,n)=>n>t?t:n<e?e:n;let tD=()=>{};const ru={},pre=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function mre(e){return typeof e=="object"&&e!==null}const gre=e=>/^0[^.\s]+$/u.test(e);function nD(e){let t;return()=>(t===void 0&&(t=e()),t)}const ha=e=>e,fZe=(e,t)=>n=>t(e(n)),Sv=(...e)=>e.reduce(fZe),Tb=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class rD{constructor(){this.subscriptions=[]}add(t){return QP(this.subscriptions,t),()=>eD(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let i=0;i<o;i++){const s=this.subscriptions[i];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ul=e=>e*1e3,ca=e=>e/1e3;function yre(e,t){return t?e*(1e3/t):0}const bre=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,hZe=1e-7,pZe=12;function mZe(e,t,n,r,o){let i,s,a=0;do s=t+(n-t)/2,i=bre(s,r,o)-e,i>0?n=s:t=s;while(Math.abs(i)>hZe&&++a<pZe);return s}function kv(e,t,n,r){if(e===t&&n===r)return ha;const o=i=>mZe(i,0,1,e,n);return i=>i===0||i===1?i:bre(o(i),t,r)}const vre=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xre=e=>t=>1-e(1-t),wre=kv(.33,1.53,.69,.99),oD=xre(wre),Sre=vre(oD),kre=e=>(e*=2)<1?.5*oD(e):.5*(2-Math.pow(2,-10*(e-1))),iD=e=>1-Math.sin(Math.acos(e)),Cre=xre(iD),Ere=vre(iD),gZe=kv(.42,0,1,1),yZe=kv(0,0,.58,1),Tre=kv(.42,0,.58,1),bZe=e=>Array.isArray(e)&&typeof e[0]!="number",_re=e=>Array.isArray(e)&&typeof e[0]=="number",vZe={linear:ha,easeIn:gZe,easeInOut:Tre,easeOut:yZe,circIn:iD,circInOut:Ere,circOut:Cre,backIn:oD,backInOut:Sre,backOut:wre,anticipate:kre},xZe=e=>typeof e=="string",vF=e=>{if(_re(e)){tD(e.length===4);const[t,n,r,o]=e;return kv(t,n,r,o)}else if(xZe(e))return vZe[e];return e},Ix=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function wZe(e,t){let n=new Set,r=new Set,o=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){s.has(u)&&(c.schedule(u),e()),u(a)}const c={schedule:(u,f=!1,p=!1)=>{const y=p&&o?n:r;return f&&s.add(u),y.has(u)||y.add(u),u},cancel:u=>{r.delete(u),s.delete(u)},process:u=>{if(a=u,o){i=!0;return}o=!0,[n,r]=[r,n],n.forEach(l),n.clear(),o=!1,i&&(i=!1,c.process(u))}};return c}const SZe=40;function Are(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=Ix.reduce((T,A)=>(T[A]=wZe(i),T),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:p,render:m,postRender:y}=s,b=()=>{const T=ru.useManualTiming?o.timestamp:performance.now();n=!1,ru.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(T-o.timestamp,SZe),1)),o.timestamp=T,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),u.process(o),f.process(o),p.process(o),m.process(o),y.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(b))},w=()=>{n=!0,r=!0,o.isProcessing||e(b)};return{schedule:Ix.reduce((T,A)=>{const M=s[A];return T[A]=(R,O=!1,I=!1)=>(n||w(),M.schedule(R,O,I)),T},{}),cancel:T=>{for(let A=0;A<Ix.length;A++)s[Ix[A]].cancel(T)},state:o,steps:s}}const{schedule:nr,cancel:_d,state:Ro,steps:XA}=Are(typeof requestAnimationFrame<"u"?requestAnimationFrame:ha,!0);let Tw;function kZe(){Tw=void 0}const zi={now:()=>(Tw===void 0&&zi.set(Ro.isProcessing||ru.useManualTiming?Ro.timestamp:performance.now()),Tw),set:e=>{Tw=e,queueMicrotask(kZe)}},Mre=e=>t=>typeof t=="string"&&t.startsWith(e),sD=Mre("--"),CZe=Mre("var(--"),aD=e=>CZe(e)?EZe.test(e.split("/*")[0].trim()):!1,EZe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xg={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},_b={...xg,transform:e=>nu(0,1,e)},Ox={...xg,default:1},m0=e=>Math.round(e*1e5)/1e5,lD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TZe(e){return e==null}const _Ze=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cD=(e,t)=>n=>!!(typeof n=="string"&&_Ze.test(n)&&n.startsWith(e)||t&&!TZe(n)&&Object.prototype.hasOwnProperty.call(n,t)),Nre=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,i,s,a]=r.match(lD);return{[e]:parseFloat(o),[t]:parseFloat(i),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},AZe=e=>nu(0,255,e),QA={...xg,transform:e=>Math.round(AZe(e))},$f={test:cD("rgb","red"),parse:Nre("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+QA.transform(e)+", "+QA.transform(t)+", "+QA.transform(n)+", "+m0(_b.transform(r))+")"};function MZe(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const xI={test:cD("#"),parse:MZe,transform:$f.transform},Cv=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Gu=Cv("deg"),Gl=Cv("%"),ut=Cv("px"),NZe=Cv("vh"),RZe=Cv("vw"),xF={...Gl,parse:e=>Gl.parse(e)/100,transform:e=>Gl.transform(e*100)},Zp={test:cD("hsl","hue"),parse:Nre("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gl.transform(m0(t))+", "+Gl.transform(m0(n))+", "+m0(_b.transform(r))+")"},Br={test:e=>$f.test(e)||xI.test(e)||Zp.test(e),parse:e=>$f.test(e)?$f.parse(e):Zp.test(e)?Zp.parse(e):xI.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?$f.transform(e):Zp.transform(e),getAnimatableNone:e=>{const t=Br.parse(e);return t.alpha=0,Br.transform(t)}},IZe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function OZe(e){return isNaN(e)&&typeof e=="string"&&(e.match(lD)?.length||0)+(e.match(IZe)?.length||0)>0}const Rre="number",Ire="color",PZe="var",DZe="var(",wF="${}",$Ze=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ab(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let i=0;const a=t.replace($Ze,l=>(Br.test(l)?(r.color.push(i),o.push(Ire),n.push(Br.parse(l))):l.startsWith(DZe)?(r.var.push(i),o.push(PZe),n.push(l)):(r.number.push(i),o.push(Rre),n.push(parseFloat(l))),++i,wF)).split(wF);return{values:n,split:a,indexes:r,types:o}}function Ore(e){return Ab(e).values}function Pre(e){const{split:t,types:n}=Ab(e),r=t.length;return o=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],o[s]!==void 0){const a=n[s];a===Rre?i+=m0(o[s]):a===Ire?i+=Br.transform(o[s]):i+=o[s]}return i}}const jZe=e=>typeof e=="number"?0:Br.test(e)?Br.getAnimatableNone(e):e;function LZe(e){const t=Ore(e);return Pre(e)(t.map(jZe))}const Ad={test:OZe,parse:Ore,createTransformer:Pre,getAnimatableNone:LZe};function eM(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function zZe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,i=0,s=0;if(!t)o=i=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=eM(l,a,e+1/3),i=eM(l,a,e),s=eM(l,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:r}}function $k(e,t){return n=>n>0?t:e}const ur=(e,t,n)=>e+(t-e)*n,tM=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},BZe=[xI,$f,Zp],FZe=e=>BZe.find(t=>t.test(e));function SF(e){const t=FZe(e);if(!t)return!1;let n=t.parse(e);return t===Zp&&(n=zZe(n)),n}const kF=(e,t)=>{const n=SF(e),r=SF(t);if(!n||!r)return $k(e,t);const o={...n};return i=>(o.red=tM(n.red,r.red,i),o.green=tM(n.green,r.green,i),o.blue=tM(n.blue,r.blue,i),o.alpha=ur(n.alpha,r.alpha,i),$f.transform(o))},wI=new Set(["none","hidden"]);function VZe(e,t){return wI.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function HZe(e,t){return n=>ur(e,t,n)}function uD(e){return typeof e=="number"?HZe:typeof e=="string"?aD(e)?$k:Br.test(e)?kF:qZe:Array.isArray(e)?Dre:typeof e=="object"?Br.test(e)?kF:UZe:$k}function Dre(e,t){const n=[...e],r=n.length,o=e.map((i,s)=>uD(i)(i,t[s]));return i=>{for(let s=0;s<r;s++)n[s]=o[s](i);return n}}function UZe(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=uD(e[o])(e[o],t[o]));return o=>{for(const i in r)n[i]=r[i](o);return n}}function GZe(e,t){const n=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const i=t.types[o],s=e.indexes[i][r[i]],a=e.values[s]??0;n[o]=a,r[i]++}return n}const qZe=(e,t)=>{const n=Ad.createTransformer(t),r=Ab(e),o=Ab(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?wI.has(e)&&!o.values.length||wI.has(t)&&!r.values.length?VZe(e,t):Sv(Dre(GZe(r,o),o.values),n):$k(e,t)};function $re(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ur(e,t,n):uD(e)(e,t)}const ZZe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>nr.update(t,n),stop:()=>_d(t),now:()=>Ro.isProcessing?Ro.timestamp:zi.now()}},jre=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let i=0;i<o;i++)r+=Math.round(e(i/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},jk=2e4;function dD(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<jk;)t+=n,r=e.next(t);return t>=jk?1/0:t}function WZe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),o=Math.min(dD(r),jk);return{type:"keyframes",ease:i=>r.next(o*i).value/t,duration:ca(o)}}const KZe=5;function Lre(e,t,n){const r=Math.max(t-KZe,0);return yre(n-e(r),t-r)}const xr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nM=.001;function YZe({duration:e=xr.duration,bounce:t=xr.bounce,velocity:n=xr.velocity,mass:r=xr.mass}){let o,i,s=1-t;s=nu(xr.minDamping,xr.maxDamping,s),e=nu(xr.minDuration,xr.maxDuration,ca(e)),s<1?(o=c=>{const u=c*s,f=u*e,p=u-n,m=SI(c,s),y=Math.exp(-f);return nM-p/m*y},i=c=>{const f=c*s*e,p=f*n+n,m=Math.pow(s,2)*Math.pow(c,2)*e,y=Math.exp(-f),b=SI(Math.pow(c,2),s);return(-o(c)+nM>0?-1:1)*((p-m)*y)/b}):(o=c=>{const u=Math.exp(-c*e),f=(c-n)*e+1;return-nM+u*f},i=c=>{const u=Math.exp(-c*e),f=(n-c)*(e*e);return u*f});const a=5/e,l=XZe(o,i,a);if(e=Ul(e),isNaN(l))return{stiffness:xr.stiffness,damping:xr.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:e}}}const JZe=12;function XZe(e,t,n){let r=n;for(let o=1;o<JZe;o++)r=r-e(r)/t(r);return r}function SI(e,t){return e*Math.sqrt(1-t*t)}const QZe=["duration","bounce"],eWe=["stiffness","damping","mass"];function CF(e,t){return t.some(n=>e[n]!==void 0)}function tWe(e){let t={velocity:xr.velocity,stiffness:xr.stiffness,damping:xr.damping,mass:xr.mass,isResolvedFromDuration:!1,...e};if(!CF(e,eWe)&&CF(e,QZe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,i=2*nu(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:xr.mass,stiffness:o,damping:i}}else{const n=YZe(e);t={...t,...n,mass:xr.mass},t.isResolvedFromDuration=!0}return t}function Lk(e=xr.visualDuration,t=xr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:f,velocity:p,isResolvedFromDuration:m}=tWe({...n,velocity:-ca(n.velocity||0)}),y=p||0,b=c/(2*Math.sqrt(l*u)),w=s-i,S=ca(Math.sqrt(l/u)),E=Math.abs(w)<5;r||(r=E?xr.restSpeed.granular:xr.restSpeed.default),o||(o=E?xr.restDelta.granular:xr.restDelta.default);let T;if(b<1){const M=SI(S,b);T=R=>{const O=Math.exp(-b*S*R);return s-O*((y+b*S*w)/M*Math.sin(M*R)+w*Math.cos(M*R))}}else if(b===1)T=M=>s-Math.exp(-S*M)*(w+(y+S*w)*M);else{const M=S*Math.sqrt(b*b-1);T=R=>{const O=Math.exp(-b*S*R),I=Math.min(M*R,300);return s-O*((y+b*S*w)*Math.sinh(I)+M*w*Math.cosh(I))/M}}const A={calculatedDuration:m&&f||null,next:M=>{const R=T(M);if(m)a.done=M>=f;else{let O=M===0?y:0;b<1&&(O=M===0?Ul(y):Lre(T,M,R));const I=Math.abs(O)<=r,L=Math.abs(s-R)<=o;a.done=I&&L}return a.value=a.done?s:R,a},toString:()=>{const M=Math.min(dD(A),jk),R=jre(O=>A.next(M*O).value,M,30);return M+"ms "+R},toTransition:()=>{}};return A}Lk.applyToOptions=e=>{const t=WZe(e,100,Lk);return e.ease=t.ease,e.duration=Ul(t.duration),e.type="keyframes",e};function kI({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:s,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=e[0],p={done:!1,value:f},m=I=>a!==void 0&&I<a||l!==void 0&&I>l,y=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let b=n*t;const w=f+b,S=s===void 0?w:s(w);S!==w&&(b=S-f);const E=I=>-b*Math.exp(-I/r),T=I=>S+E(I),A=I=>{const L=E(I),$=T(I);p.done=Math.abs(L)<=c,p.value=p.done?S:$};let M,R;const O=I=>{m(p.value)&&(M=I,R=Lk({keyframes:[p.value,y(p.value)],velocity:Lre(T,I,p.value),damping:o,stiffness:i,restDelta:c,restSpeed:u}))};return O(0),{calculatedDuration:null,next:I=>{let L=!1;return!R&&M===void 0&&(L=!0,A(I),O(I)),M!==void 0&&I>=M?R.next(I-M):(!L&&A(I),p)}}}function nWe(e,t,n){const r=[],o=n||ru.mix||$re,i=e.length-1;for(let s=0;s<i;s++){let a=o(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||ha:t;a=Sv(l,a)}r.push(a)}return r}function rWe(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const i=e.length;if(tD(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=nWe(t,r,o),l=a.length,c=u=>{if(s&&u<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const p=Tb(e[f],e[f+1],u);return a[f](p)};return n?u=>c(nu(e[0],e[i-1],u)):c}function oWe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Tb(0,t,r);e.push(ur(n,1,o))}}function iWe(e){const t=[0];return oWe(t,e.length-1),t}function sWe(e,t){return e.map(n=>n*t)}function aWe(e,t){return e.map(()=>t||Tre).splice(0,e.length-1)}function g0({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=bZe(r)?r.map(vF):vF(r),i={done:!1,value:t[0]},s=sWe(n&&n.length===t.length?n:iWe(t),e),a=rWe(s,t,{ease:Array.isArray(o)?o:aWe(t,o)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const lWe=e=>e!==null;function fD(e,{repeat:t,repeatType:n="loop"},r,o=1){const i=e.filter(lWe),a=o<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const cWe={decay:kI,inertia:kI,tween:g0,keyframes:g0,spring:Lk};function zre(e){typeof e.type=="string"&&(e.type=cWe[e.type])}class hD{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const uWe=e=>e/100;class pD extends hD{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==zi.now()&&this.tick(zi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;zre(t);const{type:n=g0,repeat:r=0,repeatDelay:o=0,repeatType:i,velocity:s=0}=t;let{keyframes:a}=t;const l=n||g0;l!==g0&&typeof a[0]!="number"&&(this.mixKeyframes=Sv(uWe,$re(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=dD(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:o,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:p,repeatDelay:m,type:y,onUpdate:b,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const S=this.currentTime-c*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?S<0:S>o;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let T=this.currentTime,A=r;if(f){const I=Math.min(this.currentTime,o)/a;let L=Math.floor(I),$=I%1;!$&&I>=1&&($=1),$===1&&L--,L=Math.min(L,f+1),!!(L%2)&&(p==="reverse"?($=1-$,m&&($-=m/a)):p==="mirror"&&(A=s)),T=nu(0,1,$)*a}const M=E?{done:!1,value:u[0]}:A.next(T);i&&(M.value=i(M.value));let{done:R}=M;!E&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return O&&y!==kI&&(M.value=fD(u,this.options,w,this.speed)),b&&b(M.value),O&&this.finish(),M}then(t,n){return this.finished.then(t,n)}get duration(){return ca(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ca(t)}get time(){return ca(this.currentTime)}set time(t){t=Ul(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(zi.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ca(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=ZZe,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function dWe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const jf=e=>e*180/Math.PI,CI=e=>{const t=jf(Math.atan2(e[1],e[0]));return EI(t)},fWe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:CI,rotateZ:CI,skewX:e=>jf(Math.atan(e[1])),skewY:e=>jf(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},EI=e=>(e=e%360,e<0&&(e+=360),e),EF=CI,TF=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),_F=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),hWe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:TF,scaleY:_F,scale:e=>(TF(e)+_F(e))/2,rotateX:e=>EI(jf(Math.atan2(e[6],e[5]))),rotateY:e=>EI(jf(Math.atan2(-e[2],e[0]))),rotateZ:EF,rotate:EF,skewX:e=>jf(Math.atan(e[4])),skewY:e=>jf(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function TI(e){return e.includes("scale")?1:0}function _I(e,t){if(!e||e==="none")return TI(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=hWe,o=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=fWe,o=a}if(!o)return TI(t);const i=r[t],s=o[1].split(",").map(mWe);return typeof i=="function"?i(s):s[i]}const pWe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return _I(n,t)};function mWe(e){return parseFloat(e.trim())}const wg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sg=new Set(wg),AF=e=>e===xg||e===ut,gWe=new Set(["x","y","z"]),yWe=wg.filter(e=>!gWe.has(e));function bWe(e){const t=[];return yWe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Kf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>_I(t,"x"),y:(e,{transform:t})=>_I(t,"y")};Kf.translateX=Kf.x;Kf.translateY=Kf.y;const Yf=new Set;let AI=!1,MI=!1,NI=!1;function Bre(){if(MI){const e=Array.from(Yf).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=bWe(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([i,s])=>{r.getValue(i)?.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}MI=!1,AI=!1,Yf.forEach(e=>e.complete(NI)),Yf.clear()}function Fre(){Yf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(MI=!0)})}function vWe(){NI=!0,Fre(),Bre(),NI=!1}class mD{constructor(t,n,r,o,i,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Yf.add(this),AI||(AI=!0,nr.read(Fre),nr.resolveKeyframes(Bre))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;if(t[0]===null){const i=o?.get(),s=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,s);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=s),o&&i===void 0&&o.set(t[0])}dWe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Yf.delete(this)}cancel(){this.state==="scheduled"&&(Yf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xWe=e=>e.startsWith("--");function wWe(e,t,n){xWe(t)?e.style.setProperty(t,n):e.style[t]=n}const SWe=nD(()=>window.ScrollTimeline!==void 0),kWe={};function CWe(e,t){const n=nD(e);return()=>kWe[t]??n()}const Vre=CWe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hy=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,MF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hy([0,.65,.55,1]),circOut:Hy([.55,0,1,.45]),backIn:Hy([.31,.01,.66,-.59]),backOut:Hy([.33,1.53,.69,.99])};function Hre(e,t){if(e)return typeof e=="function"?Vre()?jre(e,t):"ease-out":_re(e)?Hy(e):Array.isArray(e)?e.map(n=>Hre(n,t)||MF.easeOut):MF[e]}function EWe(e,t,n,{delay:r=0,duration:o=300,repeat:i=0,repeatType:s="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const f=Hre(a,o);Array.isArray(f)&&(u.easing=f);const p={delay:r,duration:o,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),e.animate(u,p)}function Ure(e){return typeof e=="function"&&"applyToOptions"in e}function TWe({type:e,...t}){return Ure(e)&&Vre()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _We extends hD{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:o,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=t,tD(typeof t.type!="string");const c=TWe(t);this.animation=EWe(n,r,o,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=fD(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):wWe(n,r,u),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ca(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ca(t)}get time(){return ca(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ul(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&SWe()?(this.animation.timeline=t,ha):n(this)}}const Gre={anticipate:kre,backInOut:Sre,circInOut:Ere};function AWe(e){return e in Gre}function MWe(e){typeof e.ease=="string"&&AWe(e.ease)&&(e.ease=Gre[e.ease])}const NF=10;class NWe extends _We{constructor(t){MWe(t),zre(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:o,element:i,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new pD({...s,autoplay:!1}),l=Ul(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-NF).value,a.sample(l).value,NF),a.stop()}}const RF=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ad.test(e)||e==="0")&&!e.startsWith("url("));function RWe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function IWe(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],s=RF(o,t),a=RF(i,t);return!s||!a?!1:RWe(e)||(n==="spring"||Ure(n))&&r}function RI(e){e.duration=0,e.type="keyframes"}const OWe=new Set(["opacity","clipPath","filter","transform"]),PWe=nD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DWe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:o,damping:i,type:s}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return PWe()&&n&&OWe.has(n)&&(n!=="transform"||!c)&&!l&&!r&&o!=="mirror"&&i!==0&&s!=="inertia"}const $We=40;class jWe extends hD{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:s="loop",keyframes:a,name:l,motionValue:c,element:u,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=zi.now();const p={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:i,repeatType:s,name:l,motionValue:c,element:u,...f},m=u?.KeyframeResolver||mD;this.keyframeResolver=new m(a,(y,b,w)=>this.onKeyframesResolved(y,b,p,!w),l,c,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,o){this.keyframeResolver=void 0;const{name:i,type:s,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=zi.now(),IWe(t,i,s,a)||((ru.instantAnimations||!l)&&u?.(fD(t,r,n)),t[0]=t[t.length-1],RI(r),r.repeat=0);const p={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>$We?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!c&&DWe(p)?new NWe({...p,element:p.motionValue.owner.current}):new pD(p);m.finished.then(()=>this.notifyFinished()).catch(ha),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),vWe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const LWe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zWe(e){const t=LWe.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function qre(e,t,n=1){const[r,o]=zWe(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const s=i.trim();return pre(s)?parseFloat(s):s}return aD(o)?qre(o,t,n+1):o}function gD(e,t){return e?.[t]??e?.default??e}const Zre=new Set(["width","height","top","left","right","bottom",...wg]),BWe={test:e=>e==="auto",parse:e=>e},Wre=e=>t=>t.test(e),Kre=[xg,ut,Gl,Gu,RZe,NZe,BWe],IF=e=>Kre.find(Wre(e));function FWe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||gre(e):!0}const VWe=new Set(["brightness","contrast","saturate","opacity"]);function HWe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(lD)||[];if(!r)return e;const o=n.replace(r,"");let i=VWe.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+o+")"}const UWe=/\b([a-z-]*)\(.*?\)/gu,II={...Ad,getAnimatableNone:e=>{const t=e.match(UWe);return t?t.map(HWe).join(" "):e}},OF={...xg,transform:Math.round},GWe={rotate:Gu,rotateX:Gu,rotateY:Gu,rotateZ:Gu,scale:Ox,scaleX:Ox,scaleY:Ox,scaleZ:Ox,skew:Gu,skewX:Gu,skewY:Gu,distance:ut,translateX:ut,translateY:ut,translateZ:ut,x:ut,y:ut,z:ut,perspective:ut,transformPerspective:ut,opacity:_b,originX:xF,originY:xF,originZ:ut},yD={borderWidth:ut,borderTopWidth:ut,borderRightWidth:ut,borderBottomWidth:ut,borderLeftWidth:ut,borderRadius:ut,radius:ut,borderTopLeftRadius:ut,borderTopRightRadius:ut,borderBottomRightRadius:ut,borderBottomLeftRadius:ut,width:ut,maxWidth:ut,height:ut,maxHeight:ut,top:ut,right:ut,bottom:ut,left:ut,padding:ut,paddingTop:ut,paddingRight:ut,paddingBottom:ut,paddingLeft:ut,margin:ut,marginTop:ut,marginRight:ut,marginBottom:ut,marginLeft:ut,backgroundPositionX:ut,backgroundPositionY:ut,...GWe,zIndex:OF,fillOpacity:_b,strokeOpacity:_b,numOctaves:OF},qWe={...yD,color:Br,backgroundColor:Br,outlineColor:Br,fill:Br,stroke:Br,borderColor:Br,borderTopColor:Br,borderRightColor:Br,borderBottomColor:Br,borderLeftColor:Br,filter:II,WebkitFilter:II},Yre=e=>qWe[e];function Jre(e,t){let n=Yre(e);return n!==II&&(n=Ad),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const ZWe=new Set(["auto","none","0"]);function WWe(e,t,n){let r=0,o;for(;r<e.length&&!o;){const i=e[r];typeof i=="string"&&!ZWe.has(i)&&Ab(i).values.length&&(o=e[r]),r++}if(o&&n)for(const i of t)e[i]=Jre(n,o)}class KWe extends mD{constructor(t,n,r,o,i){super(t,n,r,o,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),aD(c))){const u=qre(c,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Zre.has(r)||t.length!==2)return;const[o,i]=t,s=IF(o),a=IF(i);if(s!==a)if(AF(s)&&AF(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Kf[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)(t[o]===null||FWe(t[o]))&&r.push(o);r.length&&WWe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kf[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=Kf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{t.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function YWe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const o=n?.[e]??r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const Xre=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Qre(e){return mre(e)&&"offsetHeight"in e}const PF=30,JWe=e=>!isNaN(parseFloat(e));class XWe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const o=zi.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=zi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=JWe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new rD);const r=this.events[t].add(n);return t==="change"?()=>{r(),nr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=zi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>PF)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,PF);return yre(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $m(e,t){return new XWe(e,t)}const{schedule:bD}=Are(queueMicrotask,!1),za={x:!1,y:!1};function eoe(){return za.x||za.y}function QWe(e){return e==="x"||e==="y"?za[e]?null:(za[e]=!0,()=>{za[e]=!1}):za.x||za.y?null:(za.x=za.y=!0,()=>{za.x=za.y=!1})}function toe(e,t){const n=YWe(e),r=new AbortController,o={passive:!0,...t,signal:r.signal};return[n,o,()=>r.abort()]}function DF(e){return!(e.pointerType==="touch"||eoe())}function eKe(e,t,n={}){const[r,o,i]=toe(e,n),s=a=>{if(!DF(a))return;const{target:l}=a,c=t(l,a);if(typeof c!="function"||!l)return;const u=f=>{DF(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,o)};return r.forEach(a=>{a.addEventListener("pointerenter",s,o)}),i}const noe=(e,t)=>t?e===t?!0:noe(e,t.parentElement):!1,vD=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,tKe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nKe(e){return tKe.has(e.tagName)||e.tabIndex!==-1}const _w=new WeakSet;function $F(e){return t=>{t.key==="Enter"&&e(t)}}function rM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const rKe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=$F(()=>{if(_w.has(n))return;rM(n,"down");const o=$F(()=>{rM(n,"up")}),i=()=>rM(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function jF(e){return vD(e)&&!eoe()}function oKe(e,t,n={}){const[r,o,i]=toe(e,n),s=a=>{const l=a.currentTarget;if(!jF(a))return;_w.add(l);const c=t(l,a),u=(m,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),_w.has(l)&&_w.delete(l),jF(m)&&typeof c=="function"&&c(m,{success:y})},f=m=>{u(m,l===window||l===document||n.useGlobalTarget||noe(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",f,o),window.addEventListener("pointercancel",p,o)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",s,o),Qre(a)&&(a.addEventListener("focus",c=>rKe(c,o)),!nKe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function roe(e){return mre(e)&&"ownerSVGElement"in e}function iKe(e){return roe(e)&&e.tagName==="svg"}const Xo=e=>!!(e&&e.getVelocity),sKe=[...Kre,Br,Ad],aKe=e=>sKe.find(Wre(e)),xD=k.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function LF(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function lKe(...e){return t=>{let n=!1;const r=e.map(o=>{const i=LF(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():LF(e[o],null)}}}}function cKe(...e){return k.useCallback(lKe(...e),e)}class uKe extends k.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=Qre(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=o-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dKe({children:e,isPresent:t,anchorX:n,root:r}){const o=k.useId(),i=k.useRef(null),s=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=k.useContext(xD),l=cKe(i,e?.ref);return k.useInsertionEffect(()=>{const{width:c,height:u,top:f,left:p,right:m}=s.current;if(t||!i.current||!c||!u)return;const y=n==="left"?`left: ${p}`:`right: ${m}`;i.current.dataset.motionPopId=o;const b=document.createElement("style");a&&(b.nonce=a);const w=r??document.head;return w.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{w.contains(b)&&w.removeChild(b)}},[t]),v.jsx(uKe,{isPresent:t,childRef:i,sizeRef:s,children:k.cloneElement(e,{ref:l})})}const fKe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:i,mode:s,anchorX:a,root:l})=>{const c=JP(hKe),u=k.useId();let f=!0,p=k.useMemo(()=>(f=!1,{id:u,initial:t,isPresent:n,custom:o,onExitComplete:m=>{c.set(m,!0);for(const y of c.values())if(!y)return;r&&r()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[n,c,r]);return i&&f&&(p={...p}),k.useMemo(()=>{c.forEach((m,y)=>c.set(y,!1))},[n]),k.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),s==="popLayout"&&(e=v.jsx(dKe,{isPresent:n,anchorX:a,root:l,children:e})),v.jsx(_E.Provider,{value:p,children:e})};function hKe(){return new Map}function ooe(e=!0){const t=k.useContext(_E);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=t,i=k.useId();k.useEffect(()=>{if(e)return o(i)},[e]);const s=k.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const Px=e=>e.key||"";function zF(e){const t=[];return k.Children.forEach(e,n=>{k.isValidElement(n)&&t.push(n)}),t}const pa=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:i="sync",propagate:s=!1,anchorX:a="left",root:l})=>{const[c,u]=ooe(s),f=k.useMemo(()=>zF(e),[e]),p=s&&!c?[]:f.map(Px),m=k.useRef(!0),y=k.useRef(f),b=JP(()=>new Map),[w,S]=k.useState(f),[E,T]=k.useState(f);hre(()=>{m.current=!1,y.current=f;for(let R=0;R<E.length;R++){const O=Px(E[R]);p.includes(O)?b.delete(O):b.get(O)!==!0&&b.set(O,!1)}},[E,p.length,p.join("-")]);const A=[];if(f!==w){let R=[...f];for(let O=0;O<E.length;O++){const I=E[O],L=Px(I);p.includes(L)||(R.splice(O,0,I),A.push(I))}return i==="wait"&&A.length&&(R=A),T(zF(R)),S(f),null}const{forceRender:M}=k.useContext(YP);return v.jsx(v.Fragment,{children:E.map(R=>{const O=Px(R),I=s&&!c?!1:f===E||p.includes(O),L=()=>{if(b.has(O))b.set(O,!0);else return;let $=!0;b.forEach(B=>{B||($=!1)}),$&&(M?.(),T(y.current),s&&u?.(),r&&r())};return v.jsx(fKe,{isPresent:I,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:i,root:l,onExitComplete:I?void 0:L,anchorX:a,children:R},O)})})},ioe=k.createContext({strict:!1}),BF={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jm={};for(const e in BF)jm[e]={isEnabled:t=>BF[e].some(n=>!!t[n])};function pKe(e){for(const t in e)jm[t]={...jm[t],...e[t]}}const mKe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zk(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||mKe.has(e)}let soe=e=>!zk(e);function gKe(e){typeof e=="function"&&(soe=t=>t.startsWith("on")?!zk(t):e(t))}try{gKe(require("@emotion/is-prop-valid").default)}catch{}function yKe(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(soe(o)||n===!0&&zk(o)||!t&&!zk(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}const AE=k.createContext({});function ME(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Mb(e){return typeof e=="string"||Array.isArray(e)}const wD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SD=["initial",...wD];function NE(e){return ME(e.animate)||SD.some(t=>Mb(e[t]))}function aoe(e){return!!(NE(e)||e.variants)}function bKe(e,t){if(NE(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Mb(n)?n:void 0,animate:Mb(r)?r:void 0}}return e.inherit!==!1?t:{}}function vKe(e){const{initial:t,animate:n}=bKe(e,k.useContext(AE));return k.useMemo(()=>({initial:t,animate:n}),[FF(t),FF(n)])}function FF(e){return Array.isArray(e)?e.join(" "):e}const Nb={};function xKe(e){for(const t in e)Nb[t]=e[t],sD(t)&&(Nb[t].isCSSVariable=!0)}function loe(e,{layout:t,layoutId:n}){return Sg.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Nb[e]||e==="opacity")}const wKe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SKe=wg.length;function kKe(e,t,n){let r="",o=!0;for(let i=0;i<SKe;i++){const s=wg[i],a=e[s];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(s.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Xre(a,yD[s]);if(!l){o=!1;const u=wKe[s]||s;r+=`${u}(${c}) `}n&&(t[s]=c)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function kD(e,t,n){const{style:r,vars:o,transformOrigin:i}=e;let s=!1,a=!1;for(const l in t){const c=t[l];if(Sg.has(l)){s=!0;continue}else if(sD(l)){o[l]=c;continue}else{const u=Xre(c,yD[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(t.transform||(s||n?r.transform=kKe(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const CD=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function coe(e,t,n){for(const r in t)!Xo(t[r])&&!loe(r,n)&&(e[r]=t[r])}function CKe({transformTemplate:e},t){return k.useMemo(()=>{const n=CD();return kD(n,t,e),Object.assign({},n.vars,n.style)},[t])}function EKe(e,t){const n=e.style||{},r={};return coe(r,n,e),Object.assign(r,CKe(e,t)),r}function TKe(e,t){const n={},r=EKe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const _Ke={offset:"stroke-dashoffset",array:"stroke-dasharray"},AKe={offset:"strokeDashoffset",array:"strokeDasharray"};function MKe(e,t,n=1,r=0,o=!0){e.pathLength=1;const i=o?_Ke:AKe;e[i.offset]=ut.transform(-r);const s=ut.transform(t),a=ut.transform(n);e[i.array]=`${s} ${a}`}function uoe(e,{attrX:t,attrY:n,attrScale:r,pathLength:o,pathSpacing:i=1,pathOffset:s=0,...a},l,c,u){if(kD(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p}=e;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=u?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&MKe(f,o,i,s,!1)}const doe=()=>({...CD(),attrs:{}}),foe=e=>typeof e=="string"&&e.toLowerCase()==="svg";function NKe(e,t,n,r){const o=k.useMemo(()=>{const i=doe();return uoe(i,t,foe(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};coe(i,e.style,e),o.style={...i,...o.style}}return o}const RKe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ED(e){return typeof e!="string"||e.includes("-")?!1:!!(RKe.indexOf(e)>-1||/[A-Z]/u.test(e))}function IKe(e,t,n,{latestValues:r},o,i=!1){const a=(ED(e)?NKe:TKe)(t,r,o,e),l=yKe(t,typeof e=="string",i),c=e!==k.Fragment?{...l,...a,ref:n}:{},{children:u}=t,f=k.useMemo(()=>Xo(u)?u.get():u,[u]);return k.createElement(e,{...c,children:f})}function VF(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function TD(e,t,n,r){if(typeof t=="function"){const[o,i]=VF(r);t=t(n!==void 0?n:e.custom,o,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,i]=VF(r);t=t(n!==void 0?n:e.custom,o,i)}return t}function Aw(e){return Xo(e)?e.get():e}function OKe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,o){return{latestValues:PKe(n,r,o,e),renderState:t()}}function PKe(e,t,n,r){const o={},i=r(e,{});for(const p in i)o[p]=Aw(i[p]);let{initial:s,animate:a}=e;const l=NE(e),c=aoe(e);t&&c&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let u=n?n.initial===!1:!1;u=u||s===!1;const f=u?a:s;if(f&&typeof f!="boolean"&&!ME(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const y=TD(e,p[m]);if(y){const{transitionEnd:b,transition:w,...S}=y;for(const E in S){let T=S[E];if(Array.isArray(T)){const A=u?T.length-1:0;T=T[A]}T!==null&&(o[E]=T)}for(const E in b)o[E]=b[E]}}}return o}const hoe=e=>(t,n)=>{const r=k.useContext(AE),o=k.useContext(_E),i=()=>OKe(e,t,r,o);return n?i():JP(i)};function _D(e,t,n){const{style:r}=e,o={};for(const i in r)(Xo(r[i])||t.style&&Xo(t.style[i])||loe(i,e)||n?.getValue(i)?.liveStyle!==void 0)&&(o[i]=r[i]);return o}const DKe=hoe({scrapeMotionValuesFromProps:_D,createRenderState:CD});function poe(e,t,n){const r=_D(e,t,n);for(const o in e)if(Xo(e[o])||Xo(t[o])){const i=wg.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[i]=e[o]}return r}const $Ke=hoe({scrapeMotionValuesFromProps:poe,createRenderState:doe}),jKe=Symbol.for("motionComponentSymbol");function Wp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function LKe(e,t,n){return k.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Wp(n)&&(n.current=r))},[t])}const AD=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zKe="framerAppearId",moe="data-"+AD(zKe),goe=k.createContext({});function BKe(e,t,n,r,o){const{visualElement:i}=k.useContext(AE),s=k.useContext(ioe),a=k.useContext(_E),l=k.useContext(xD).reducedMotion,c=k.useRef(null);r=r||s.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,f=k.useContext(goe);u&&!u.projection&&o&&(u.type==="html"||u.type==="svg")&&FKe(c.current,n,o,f);const p=k.useRef(!1);k.useInsertionEffect(()=>{u&&p.current&&u.update(n,a)});const m=n[moe],y=k.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return hre(()=>{u&&(p.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),y.current&&u.animationState&&u.animationState.animateChanges())}),k.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),y.current=!1),u.enteringChildren=void 0)}),u}function FKe(e,t,n,r){const{layoutId:o,layout:i,drag:s,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:yoe(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!s||a&&Wp(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function yoe(e){if(e)return e.options.allowProjection!==!1?e.projection:yoe(e.parent)}function oM(e,{forwardMotionProps:t=!1}={},n,r){n&&pKe(n);const o=ED(e)?$Ke:DKe;function i(a,l){let c;const u={...k.useContext(xD),...a,layoutId:VKe(a)},{isStatic:f}=u,p=vKe(a),m=o(a,f);if(!f&&XP){HKe();const y=UKe(u);c=y.MeasureLayout,p.visualElement=BKe(e,m,u,r,y.ProjectionNode)}return v.jsxs(AE.Provider,{value:p,children:[c&&p.visualElement?v.jsx(c,{visualElement:p.visualElement,...u}):null,IKe(e,a,LKe(m,p.visualElement,l),m,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const s=k.forwardRef(i);return s[jKe]=e,s}function VKe({layoutId:e}){const t=k.useContext(YP).id;return t&&e!==void 0?t+"-"+e:e}function HKe(e,t){k.useContext(ioe).strict}function UKe(e){const{drag:t,layout:n}=jm;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function GKe(e,t){if(typeof Proxy>"u")return oM;const n=new Map,r=(i,s)=>oM(i,s,e,t),o=(i,s)=>r(i,s);return new Proxy(o,{get:(i,s)=>s==="create"?r:(n.has(s)||n.set(s,oM(s,void 0,e,t)),n.get(s))})}function boe({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function qKe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ZKe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function iM(e){return e===void 0||e===1}function OI({scale:e,scaleX:t,scaleY:n}){return!iM(e)||!iM(t)||!iM(n)}function bf(e){return OI(e)||voe(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function voe(e){return HF(e.x)||HF(e.y)}function HF(e){return e&&e!=="0%"}function Bk(e,t,n){const r=e-n,o=t*r;return n+o}function UF(e,t,n,r,o){return o!==void 0&&(e=Bk(e,o,r)),Bk(e,n,r)+t}function PI(e,t=0,n=1,r,o){e.min=UF(e.min,t,n,r,o),e.max=UF(e.max,t,n,r,o)}function xoe(e,{x:t,y:n}){PI(e.x,t.translate,t.scale,t.originPoint),PI(e.y,n.translate,n.scale,n.originPoint)}const GF=.999999999999,qF=1.0000000000001;function WKe(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let i,s;for(let a=0;a<o;a++){i=n[a],s=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Yp(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,xoe(e,s)),r&&bf(i.latestValues)&&Yp(e,i.latestValues))}t.x<qF&&t.x>GF&&(t.x=1),t.y<qF&&t.y>GF&&(t.y=1)}function Kp(e,t){e.min=e.min+t,e.max=e.max+t}function ZF(e,t,n,r,o=.5){const i=ur(e.min,e.max,o);PI(e,t,n,i,r)}function Yp(e,t){ZF(e.x,t.x,t.scaleX,t.scale,t.originX),ZF(e.y,t.y,t.scaleY,t.scale,t.originY)}function woe(e,t){return boe(ZKe(e.getBoundingClientRect(),t))}function KKe(e,t,n){const r=woe(e,n),{scroll:o}=t;return o&&(Kp(r.x,o.offset.x),Kp(r.y,o.offset.y)),r}const WF=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jp=()=>({x:WF(),y:WF()}),KF=()=>({min:0,max:0}),Ir=()=>({x:KF(),y:KF()}),DI={current:null},Soe={current:!1};function YKe(){if(Soe.current=!0,!!XP)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>DI.current=e.matches;e.addEventListener("change",t),t()}else DI.current=!1}const JKe=new WeakMap;function XKe(e,t,n){for(const r in t){const o=t[r],i=n[r];if(Xo(o))e.addValue(r,o);else if(Xo(i))e.addValue(r,$m(o,{owner:e}));else if(i!==o)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(o):s.hasAnimated||s.set(o)}else{const s=e.getStaticValue(r);e.addValue(r,$m(s!==void 0?s:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const YF=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class QKe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=zi.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,nr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=NE(n),this.isVariantNode=aoe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&Xo(m)&&m.set(l[p])}}mount(t){this.current=t,JKe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Soe.current||YKe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:DI.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_d(this.notifyUpdate),_d(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Sg.has(t);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&nr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in jm){const n=jm[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ir()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<YF.length;r++){const o=YF[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const i="on"+o,s=t[i];s&&(this.propEventSubscriptions[o]=this.on(o,s))}this.prevMotionValues=XKe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=$m(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(pre(r)||gre(r))?r=parseFloat(r):!aKe(r)&&Ad.test(n)&&(r=Jre(t,n)),this.setBaseTarget(t,Xo(r)?r.get():r)),Xo(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=TD(this.props,n,this.presenceContext?.custom);i&&(r=i[t])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Xo(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new rD),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){bD.render(this.render)}}class koe extends QKe{constructor(){super(...arguments),this.KeyframeResolver=KWe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Xo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Coe(e,{style:t,vars:n},r,o){const i=e.style;let s;for(s in t)i[s]=t[s];o?.applyProjectionStyles(i,r);for(s in n)i.setProperty(s,n[s])}function eYe(e){return window.getComputedStyle(e)}class tYe extends koe{constructor(){super(...arguments),this.type="html",this.renderInstance=Coe}readValueFromInstance(t,n){if(Sg.has(n))return this.projection?.isProjecting?TI(n):pWe(t,n);{const r=eYe(t),o=(sD(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return woe(t,n)}build(t,n,r){kD(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return _D(t,n,r)}}const Eoe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nYe(e,t,n,r){Coe(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(Eoe.has(o)?o:AD(o),t.attrs[o])}class rYe extends koe{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ir}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Sg.has(n)){const r=Yre(n);return r&&r.default||0}return n=Eoe.has(n)?n:AD(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return poe(t,n,r)}build(t,n,r){uoe(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,o){nYe(t,n,r,o)}mount(t){this.isSVGTag=foe(t.tagName),super.mount(t)}}const oYe=(e,t)=>ED(e)?new rYe(t):new tYe(t,{allowProjection:e!==k.Fragment});function dm(e,t,n){const r=e.getProps();return TD(r,t,n!==void 0?n:r.custom,e)}const $I=e=>Array.isArray(e);function iYe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,$m(n))}function sYe(e){return $I(e)?e[e.length-1]||0:e}function aYe(e,t){const n=dm(e,t);let{transitionEnd:r={},transition:o={},...i}=n||{};i={...i,...r};for(const s in i){const a=sYe(i[s]);iYe(e,s,a)}}function lYe(e){return!!(Xo(e)&&e.add)}function jI(e,t){const n=e.getValue("willChange");if(lYe(n))return n.add(t);if(!n&&ru.WillChange){const r=new ru.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Toe(e){return e.props[moe]}const cYe=e=>e!==null;function uYe(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(cYe),i=t&&n!=="loop"&&t%2===1?0:o.length-1;return o[i]}const dYe={type:"spring",stiffness:500,damping:25,restSpeed:10},fYe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),hYe={type:"keyframes",duration:.8},pYe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mYe=(e,{keyframes:t})=>t.length>2?hYe:Sg.has(e)?e.startsWith("scale")?fYe(t[1]):dYe:pYe;function gYe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:i,repeatType:s,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const MD=(e,t,n,r={},o,i)=>s=>{const a=gD(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Ul(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:o};gYe(a)||Object.assign(u,mYe(e,u)),u.duration&&(u.duration=Ul(u.duration)),u.repeatDelay&&(u.repeatDelay=Ul(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(RI(u),u.delay===0&&(f=!0)),(ru.instantAnimations||ru.skipAnimations)&&(f=!0,RI(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,f&&!i&&t.get()!==void 0){const p=uYe(u.keyframes,a);if(p!==void 0){nr.update(()=>{u.onUpdate(p),u.onComplete()});return}}return a.isSync?new pD(u):new jWe(u)};function yYe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function _oe(e,t,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...a}=t;r&&(i=r);const l=[],c=o&&e.animationState&&e.animationState.getState()[o];for(const u in a){const f=e.getValue(u,e.latestValues[u]??null),p=a[u];if(p===void 0||c&&yYe(c,u))continue;const m={delay:n,...gD(i||{},u)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===y&&!m.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const S=Toe(e);if(S){const E=window.MotionHandoffAnimation(S,u,nr);E!==null&&(m.startTime=E,b=!0)}}jI(e,u),f.start(MD(u,f,p,e.shouldReduceMotion&&Zre.has(u)?{type:!1}:m,e,b));const w=f.animation;w&&l.push(w)}return s&&Promise.all(l).then(()=>{nr.update(()=>{s&&aYe(e,s)})}),l}function Aoe(e,t,n,r=0,o=1){const i=Array.from(e).sort((c,u)=>c.sortNodePosition(u)).indexOf(t),s=e.size,a=(s-1)*r;return typeof n=="function"?n(i,s):o===1?i*r:a-i*r}function LI(e,t,n={}){const r=dm(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const i=r?()=>Promise.all(_oe(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:f}=o;return bYe(e,t,l,c,u,f,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[l,c]=a==="beforeChildren"?[i,s]:[s,i];return l().then(()=>c())}else return Promise.all([i(),s(n.delay)])}function bYe(e,t,n=0,r=0,o=0,i=1,s){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(LI(l,t,{...s,delay:n+(typeof r=="function"?0:r)+Aoe(e.variantChildren,l,r,o,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function vYe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(i=>LI(e,i,n));r=Promise.all(o)}else if(typeof t=="string")r=LI(e,t,n);else{const o=typeof t=="function"?dm(e,t,n.custom):t;r=Promise.all(_oe(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Moe(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const xYe=SD.length;function Noe(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Noe(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<xYe;n++){const r=SD[n],o=e.props[r];(Mb(o)||o===!1)&&(t[r]=o)}return t}const wYe=[...wD].reverse(),SYe=wD.length;function kYe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>vYe(e,n,r)))}function CYe(e){let t=kYe(e),n=JF(),r=!0;const o=l=>(c,u)=>{const f=dm(e,u,l==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:p,transitionEnd:m,...y}=f;c={...c,...y,...m}}return c};function i(l){t=l(e)}function s(l){const{props:c}=e,u=Noe(e.parent)||{},f=[],p=new Set;let m={},y=1/0;for(let w=0;w<SYe;w++){const S=wYe[w],E=n[S],T=c[S]!==void 0?c[S]:u[S],A=Mb(T),M=S===l?E.isActive:null;M===!1&&(y=w);let R=T===u[S]&&T!==c[S]&&A;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),E.protectedKeys={...m},!E.isActive&&M===null||!T&&!E.prevProp||ME(T)||typeof T=="boolean")continue;const O=EYe(E.prevProp,T);let I=O||S===l&&E.isActive&&!R&&A||w>y&&A,L=!1;const $=Array.isArray(T)?T:[T];let B=$.reduce(o(S),{});M===!1&&(B={});const{prevResolvedValues:G={}}=E,V={...G,...B},W=q=>{I=!0,p.has(q)&&(L=!0,p.delete(q)),E.needsAnimating[q]=!0;const H=e.getValue(q);H&&(H.liveStyle=!1)};for(const q in V){const H=B[q],z=G[q];if(m.hasOwnProperty(q))continue;let N=!1;$I(H)&&$I(z)?N=!Moe(H,z):N=H!==z,N?H!=null?W(q):p.add(q):H!==void 0&&p.has(q)?W(q):E.protectedKeys[q]=!0}E.prevProp=T,E.prevResolvedValues=B,E.isActive&&(m={...m,...B}),r&&e.blockInitialAnimation&&(I=!1);const K=R&&O;I&&(!K||L)&&f.push(...$.map(q=>{const H={type:S};if(typeof q=="string"&&r&&!K&&e.manuallyAnimateOnMount&&e.parent){const{parent:z}=e,N=dm(z,q);if(z.enteringChildren&&N){const{delayChildren:U}=N.transition||{};H.delay=Aoe(z.enteringChildren,e,U)}}return{animation:q,options:H}}))}if(p.size){const w={};if(typeof c.initial!="boolean"){const S=dm(e,Array.isArray(c.initial)?c.initial[0]:c.initial);S&&S.transition&&(w.transition=S.transition)}p.forEach(S=>{const E=e.getBaseTarget(S),T=e.getValue(S);T&&(T.liveStyle=!0),w[S]=E??null}),f.push({animation:w})}let b=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(f):Promise.resolve()}function a(l,c){if(n[l].isActive===c)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(l,c)),n[l].isActive=c;const u=s(l);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:s,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=JF()}}}function EYe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Moe(t,e):!1}function pf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JF(){return{animate:pf(!0),whileInView:pf(),whileHover:pf(),whileTap:pf(),whileDrag:pf(),whileFocus:pf(),exit:pf()}}class Bd{constructor(t){this.isMounted=!1,this.node=t}update(){}}class TYe extends Bd{constructor(t){super(t),t.animationState||(t.animationState=CYe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ME(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let _Ye=0;class AYe extends Bd{constructor(){super(...arguments),this.id=_Ye++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const MYe={animation:{Feature:TYe},exit:{Feature:AYe}};function Rb(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ev(e){return{point:{x:e.pageX,y:e.pageY}}}const NYe=e=>t=>vD(t)&&e(t,Ev(t));function y0(e,t,n,r){return Rb(e,t,NYe(n),r)}const Roe=1e-4,RYe=1-Roe,IYe=1+Roe,Ioe=.01,OYe=0-Ioe,PYe=0+Ioe;function pi(e){return e.max-e.min}function DYe(e,t,n){return Math.abs(e-t)<=n}function XF(e,t,n,r=.5){e.origin=r,e.originPoint=ur(t.min,t.max,e.origin),e.scale=pi(n)/pi(t),e.translate=ur(n.min,n.max,e.origin)-e.originPoint,(e.scale>=RYe&&e.scale<=IYe||isNaN(e.scale))&&(e.scale=1),(e.translate>=OYe&&e.translate<=PYe||isNaN(e.translate))&&(e.translate=0)}function b0(e,t,n,r){XF(e.x,t.x,n.x,r?r.originX:void 0),XF(e.y,t.y,n.y,r?r.originY:void 0)}function QF(e,t,n){e.min=n.min+t.min,e.max=e.min+pi(t)}function $Ye(e,t,n){QF(e.x,t.x,n.x),QF(e.y,t.y,n.y)}function eV(e,t,n){e.min=t.min-n.min,e.max=e.min+pi(t)}function v0(e,t,n){eV(e.x,t.x,n.x),eV(e.y,t.y,n.y)}function ea(e){return[e("x"),e("y")]}const Ooe=({current:e})=>e?e.ownerDocument.defaultView:null,tV=(e,t)=>Math.abs(e-t);function jYe(e,t){const n=tV(e.x,t.x),r=tV(e.y,t.y);return Math.sqrt(n**2+r**2)}class Poe{constructor(t,n,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=aM(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=jYe(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!y)return;const{point:b}=p,{timestamp:w}=Ro;this.history.push({...b,timestamp:w});const{onStart:S,onMove:E}=this.handlers;m||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=sM(m,this.transformPagePoint),nr.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=aM(p.type==="pointercancel"?this.lastMoveEventInfo:sM(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,S),b&&b(p,S)},!vD(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=o||window;const a=Ev(t),l=sM(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ro;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=n;f&&f(t,aM(l,this.history)),this.removeListeners=Sv(y0(this.contextWindow,"pointermove",this.handlePointerMove),y0(this.contextWindow,"pointerup",this.handlePointerUp),y0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_d(this.updatePoint)}}function sM(e,t){return t?{point:t(e.point)}:e}function nV(e,t){return{x:e.x-t.x,y:e.y-t.y}}function aM({point:e},t){return{point:e,delta:nV(e,Doe(t)),offset:nV(e,LYe(t)),velocity:zYe(t,.1)}}function LYe(e){return e[0]}function Doe(e){return e[e.length-1]}function zYe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=Doe(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>Ul(t)));)n--;if(!r)return{x:0,y:0};const i=ca(o.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const s={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function BYe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ur(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ur(n,e,r.max):Math.min(e,n)),e}function rV(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function FYe(e,{top:t,left:n,bottom:r,right:o}){return{x:rV(e.x,n,o),y:rV(e.y,t,r)}}function oV(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function VYe(e,t){return{x:oV(e.x,t.x),y:oV(e.y,t.y)}}function HYe(e,t){let n=.5;const r=pi(e),o=pi(t);return o>r?n=Tb(t.min,t.max-r,e.min):r>o&&(n=Tb(e.min,e.max-o,t.min)),nu(0,1,n)}function UYe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const zI=.35;function GYe(e=zI){return e===!1?e=0:e===!0&&(e=zI),{x:iV(e,"left","right"),y:iV(e,"top","bottom")}}function iV(e,t,n){return{min:sV(e,t),max:sV(e,n)}}function sV(e,t){return typeof e=="number"?e:e[t]||0}const qYe=new WeakMap;class ZYe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ir(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ev(f).point)},s=(f,p)=>{const{drag:m,dragPropagation:y,onDragStart:b}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=QWe(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ea(S=>{let E=this.getAxisMotionValue(S).get()||0;if(Gl.test(E)){const{projection:T}=this.visualElement;if(T&&T.layout){const A=T.layout.layoutBox[S];A&&(E=pi(A)*(parseFloat(E)/100))}}this.originPoint[S]=E}),b&&nr.postRender(()=>b(f,p)),jI(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:b,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=p;if(y&&this.currentDirection===null){this.currentDirection=WYe(S),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",p.point,S),this.updateAxis("y",p.point,S),this.visualElement.render(),w&&w(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>ea(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Poe(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:Ooe(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!r)return;const{velocity:s}=o;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&nr.postRender(()=>a(r,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!Dx(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=BYe(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;t&&Wp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=FYe(r.layoutBox,t):this.constraints=!1,this.elastic=GYe(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ea(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=UYe(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Wp(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=KKe(r,o.root,this.visualElement.getTransformPagePoint());let s=VYe(o.layout.layoutBox,i);if(n){const a=n(qKe(s));this.hasMutatedConstraints=!!a,a&&(s=boe(a))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ea(u=>{if(!Dx(u,n,this.currentDirection))return;let f=l&&l[u]||{};s&&(f={min:0,max:0});const p=o?200:1e6,m=o?40:1e7,y={type:"inertia",velocity:r?t[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return jI(this.visualElement,t),r.start(MD(t,r,0,n,this.visualElement,!1))}stopAnimation(){ea(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ea(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ea(n=>{const{drag:r}=this.getProps();if(!Dx(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:s,max:a}=o.layout.layoutBox[n];i.set(t[n]-ur(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wp(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};ea(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const l=a.get();o[s]=HYe({min:l,max:l},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ea(s=>{if(!Dx(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:c}=this.constraints[s];a.set(ur(l,c,o[s]))})}addListeners(){if(!this.visualElement.current)return;qYe.set(this.visualElement,this);const t=this.visualElement.current,n=y0(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Wp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),nr.read(r);const s=Rb(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ea(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())}));return()=>{s(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:s=zI,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function Dx(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function WYe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class KYe extends Bd{constructor(t){super(t),this.removeGroupControls=ha,this.removeListeners=ha,this.controls=new ZYe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ha}unmount(){this.removeGroupControls(),this.removeListeners()}}const aV=e=>(t,n)=>{e&&nr.postRender(()=>e(t,n))};class YYe extends Bd{constructor(){super(...arguments),this.removePointerDownListener=ha}onPointerDown(t){this.session=new Poe(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ooe(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:aV(t),onStart:aV(n),onMove:r,onEnd:(i,s)=>{delete this.session,o&&nr.postRender(()=>o(i,s))}}}mount(){this.removePointerDownListener=y0(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Mw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lV(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const _y={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ut.test(e))e=parseFloat(e);else return e;const n=lV(e,t.target.x),r=lV(e,t.target.y);return`${n}% ${r}%`}},JYe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=Ad.parse(e);if(o.length>5)return r;const i=Ad.createTransformer(e),s=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;o[0+s]/=a,o[1+s]/=l;const c=ur(a,l,.5);return typeof o[2+s]=="number"&&(o[2+s]/=c),typeof o[3+s]=="number"&&(o[3+s]/=c),i(o)}};let lM=!1;class XYe extends k.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:i}=t;xKe(QYe),i&&(n.group&&n.group.add(i),r&&r.register&&o&&r.register(i),lM&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Mw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,lM=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||nr.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),bD.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;lM=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function $oe(e){const[t,n]=ooe(),r=k.useContext(YP);return v.jsx(XYe,{...e,layoutGroup:r,switchLayoutGroup:k.useContext(goe),isPresent:t,safeToRemove:n})}const QYe={borderRadius:{..._y,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_y,borderTopRightRadius:_y,borderBottomLeftRadius:_y,borderBottomRightRadius:_y,boxShadow:JYe};function eJe(e,t,n){const r=Xo(e)?e:$m(e);return r.start(MD("",r,t,n)),r.animation}const tJe=(e,t)=>e.depth-t.depth;class nJe{constructor(){this.children=[],this.isDirty=!1}add(t){QP(this.children,t),this.isDirty=!0}remove(t){eD(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(tJe),this.isDirty=!1,this.children.forEach(t)}}function rJe(e,t){const n=zi.now(),r=({timestamp:o})=>{const i=o-n;i>=t&&(_d(r),e(i-t))};return nr.setup(r,!0),()=>_d(r)}const joe=["TopLeft","TopRight","BottomLeft","BottomRight"],oJe=joe.length,cV=e=>typeof e=="string"?parseFloat(e):e,uV=e=>typeof e=="number"||ut.test(e);function iJe(e,t,n,r,o,i){o?(e.opacity=ur(0,n.opacity??1,sJe(r)),e.opacityExit=ur(t.opacity??1,0,aJe(r))):i&&(e.opacity=ur(t.opacity??1,n.opacity??1,r));for(let s=0;s<oJe;s++){const a=`border${joe[s]}Radius`;let l=dV(t,a),c=dV(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||uV(l)===uV(c)?(e[a]=Math.max(ur(cV(l),cV(c),r),0),(Gl.test(c)||Gl.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=ur(t.rotate||0,n.rotate||0,r))}function dV(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const sJe=Loe(0,.5,Cre),aJe=Loe(.5,.95,ha);function Loe(e,t,n){return r=>r<e?0:r>t?1:n(Tb(e,t,r))}function fV(e,t){e.min=t.min,e.max=t.max}function Ys(e,t){fV(e.x,t.x),fV(e.y,t.y)}function hV(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function pV(e,t,n,r,o){return e-=t,e=Bk(e,1/n,r),o!==void 0&&(e=Bk(e,1/o,r)),e}function lJe(e,t=0,n=1,r=.5,o,i=e,s=e){if(Gl.test(t)&&(t=parseFloat(t),t=ur(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=ur(i.min,i.max,r);e===i&&(a-=t),e.min=pV(e.min,t,n,a,o),e.max=pV(e.max,t,n,a,o)}function mV(e,t,[n,r,o],i,s){lJe(e,t[n],t[r],t[o],t.scale,i,s)}const cJe=["x","scaleX","originX"],uJe=["y","scaleY","originY"];function gV(e,t,n,r){mV(e.x,t,cJe,n?n.x:void 0,r?r.x:void 0),mV(e.y,t,uJe,n?n.y:void 0,r?r.y:void 0)}function yV(e){return e.translate===0&&e.scale===1}function zoe(e){return yV(e.x)&&yV(e.y)}function bV(e,t){return e.min===t.min&&e.max===t.max}function dJe(e,t){return bV(e.x,t.x)&&bV(e.y,t.y)}function vV(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Boe(e,t){return vV(e.x,t.x)&&vV(e.y,t.y)}function xV(e){return pi(e.x)/pi(e.y)}function wV(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class fJe{constructor(){this.members=[]}add(t){QP(this.members,t),t.scheduleRender()}remove(t){if(eD(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const i=this.members[o];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hJe(e,t,n){let r="";const o=e.x.translate/t.x,i=e.y.translate/t.y,s=n?.z||0;if((o||i||s)&&(r=`translate3d(${o}px, ${i}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:p,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const cM=["","X","Y","Z"],pJe=1e3;let mJe=0;function uM(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Foe(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Toe(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",nr,!(o||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Foe(r)}function Voe({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(s={},a=t?.()){this.id=mJe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bJe),this.nodes.forEach(SJe),this.nodes.forEach(kJe),this.nodes.forEach(vJe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new nJe)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new rD),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=roe(s)&&!iKe(s),this.instance=s;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let u,f=0;const p=()=>this.root.updateBlockedByResize=!1;nr.read(()=>{f=window.innerWidth}),e(s,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,u&&u(),u=rJe(p,250),Mw.hasAnimatedSinceResize&&(Mw.hasAnimatedSinceResize=!1,this.nodes.forEach(CV)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||AJe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=c.getProps(),S=!this.targetLayout||!Boe(this.targetLayout,m),E=!f&&p;if(this.options.layoutRoot||this.resumeFrom||E||f&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...gD(y,"layout"),onPlay:b,onComplete:w};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(u,E)}else f||CV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_d(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CJe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Foe(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wJe),this.nodes.forEach(gJe),this.nodes.forEach(yJe)):this.nodes.forEach(kV),this.clearAllSnapshots();const a=zi.now();Ro.delta=nu(0,1e3/60,a-Ro.timestamp),Ro.timestamp=a,Ro.isProcessing=!0,XA.update.process(Ro),XA.preRender.process(Ro),XA.render.process(Ro),Ro.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xJe),this.sharedNodes.forEach(EJe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pi(this.snapshot.measuredBox.x)&&!pi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!zoe(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;s&&this.instance&&(a||bf(this.latestValues)||u)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),MJe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Ir();const a=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(NJe))){const{scroll:c}=this.root;c&&(Kp(a.x,c.offset.x),Kp(a.y,c.offset.y))}return a}removeElementScroll(s){const a=Ir();if(Ys(a,s),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:f}=c;c!==this.root&&u&&f.layoutScroll&&(u.wasRoot&&Ys(a,s),Kp(a.x,u.offset.x),Kp(a.y,u.offset.y))}return a}applyTransform(s,a=!1){const l=Ir();Ys(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Yp(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),bf(u.latestValues)&&Yp(l,u.latestValues)}return bf(this.latestValues)&&Yp(l,this.latestValues),l}removeTransform(s){const a=Ir();Ys(a,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!bf(c.latestValues))continue;OI(c.latestValues)&&c.updateSnapshot();const u=Ir(),f=c.measurePageBox();Ys(u,f),gV(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return bf(this.latestValues)&&gV(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ro.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Ro.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ir(),this.relativeTargetOrigin=Ir(),v0(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ys(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ir(),this.targetWithTransforms=Ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$Ye(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ys(this.target,this.layout.layoutBox),xoe(this.target,this.targetDelta)):Ys(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ir(),this.relativeTargetOrigin=Ir(),v0(this.relativeTargetOrigin,this.target,p.target),Ys(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||OI(this.parent.latestValues)||voe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),a=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ro.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Ys(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;WKe(this.layoutCorrected,this.treeScale,this.path,a),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Ir());const{target:m}=s;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hV(this.prevProjectionDelta.x,this.projectionDelta.x),hV(this.prevProjectionDelta.y,this.projectionDelta.y)),b0(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!wV(this.projectionDelta.x,this.prevProjectionDelta.x)||!wV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jp(),this.projectionDelta=Jp(),this.projectionDeltaWithTransform=Jp()}setAnimationOrigin(s,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Jp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ir(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,b=m!==y,w=this.getStack(),S=!w||w.members.length<=1,E=!!(b&&!S&&this.options.crossfade===!0&&!this.path.some(_Je));this.animationProgress=0;let T;this.mixTargetDelta=A=>{const M=A/1e3;EV(f.x,s.x,M),EV(f.y,s.y,M),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(v0(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TJe(this.relativeTarget,this.relativeTargetOrigin,p,M),T&&dJe(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Ir()),Ys(T,this.relativeTarget)),b&&(this.animationValues=u,iJe(u,c,this.latestValues,M,E,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(_d(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nr.update(()=>{Mw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$m(0)),this.currentAnimation=eJe(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pJe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=s;if(!(!a||!l||!c)){if(this!==s&&this.layout&&c&&Hoe(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ir();const f=pi(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const p=pi(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+p}Ys(a,l),Yp(a,u),b0(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new fJe),this.sharedNodes.get(s).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&uM("z",s,c,this.animationValues);for(let u=0;u<cM.length;u++)uM(`rotate${cM[u]}`,s,c,this.animationValues),uM(`skew${cM[u]}`,s,c,this.animationValues);s.render();for(const u in c)s.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);s.scheduleRender()}applyProjectionStyles(s,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Aw(a?.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Aw(a?.pointerEvents)||""),this.hasProjected&&!bf(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=hJe(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),s.transform=f;const{x:p,y:m}=this.projectionDelta;s.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,c.animationValues?s.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:s.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const y in Nb){if(u[y]===void 0)continue;const{correct:b,applyTo:w,isCSSVariable:S}=Nb[y],E=f==="none"?u[y]:b(u[y],c);if(w){const T=w.length;for(let A=0;A<T;A++)s[w[A]]=E}else S?this.options.visualElement.renderState.vars[y]=E:s[y]=E}this.options.layoutId&&(s.pointerEvents=c===this?Aw(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(SV),this.root.sharedNodes.clear()}}}function gJe(e){e.updateLayout()}function yJe(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:o}=e.options,i=t.source!==e.layout.source;o==="size"?ea(u=>{const f=i?t.measuredBox[u]:t.layoutBox[u],p=pi(f);f.min=n[u].min,f.max=f.min+p}):Hoe(o,t.layoutBox,n)&&ea(u=>{const f=i?t.measuredBox[u]:t.layoutBox[u],p=pi(n[u]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const s=Jp();b0(s,n,t.layoutBox);const a=Jp();i?b0(a,e.applyTransform(r,!0),t.measuredBox):b0(a,n,t.layoutBox);const l=!zoe(s);let c=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:p}=u;if(f&&p){const m=Ir();v0(m,t.layoutBox,f.layoutBox);const y=Ir();v0(y,n,p.layoutBox),Boe(m,y)||(c=!0),u.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=m,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:a,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function bJe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function vJe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function xJe(e){e.clearSnapshot()}function SV(e){e.clearMeasurements()}function kV(e){e.isLayoutDirty=!1}function wJe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function CV(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function SJe(e){e.resolveTargetDelta()}function kJe(e){e.calcProjection()}function CJe(e){e.resetSkewAndRotation()}function EJe(e){e.removeLeadSnapshot()}function EV(e,t,n){e.translate=ur(t.translate,0,n),e.scale=ur(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function TV(e,t,n,r){e.min=ur(t.min,n.min,r),e.max=ur(t.max,n.max,r)}function TJe(e,t,n,r){TV(e.x,t.x,n.x,r),TV(e.y,t.y,n.y,r)}function _Je(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const AJe={duration:.45,ease:[.4,0,.1,1]},_V=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),AV=_V("applewebkit/")&&!_V("chrome/")?Math.round:ha;function MV(e){e.min=AV(e.min),e.max=AV(e.max)}function MJe(e){MV(e.x),MV(e.y)}function Hoe(e,t,n){return e==="position"||e==="preserve-aspect"&&!DYe(xV(t),xV(n),.2)}function NJe(e){return e!==e.root&&e.scroll?.wasRoot}const RJe=Voe({attachResizeListener:(e,t)=>Rb(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),dM={current:void 0},Uoe=Voe({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!dM.current){const e=new RJe({});e.mount(window),e.setOptions({layoutScroll:!0}),dM.current=e}return dM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),IJe={pan:{Feature:YYe},drag:{Feature:KYe,ProjectionNode:Uoe,MeasureLayout:$oe}};function NV(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=r[o];i&&nr.postRender(()=>i(t,Ev(t)))}class OJe extends Bd{mount(){const{current:t}=this.node;t&&(this.unmount=eKe(t,(n,r)=>(NV(this.node,r,"Start"),o=>NV(this.node,o,"End"))))}unmount(){}}class PJe extends Bd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sv(Rb(this.node.current,"focus",()=>this.onFocus()),Rb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function RV(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=r[o];i&&nr.postRender(()=>i(t,Ev(t)))}class DJe extends Bd{mount(){const{current:t}=this.node;t&&(this.unmount=oKe(t,(n,r)=>(RV(this.node,r,"Start"),(o,{success:i})=>RV(this.node,o,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const BI=new WeakMap,fM=new WeakMap,$Je=e=>{const t=BI.get(e.target);t&&t(e)},jJe=e=>{e.forEach($Je)};function LJe({root:e,...t}){const n=e||document;fM.has(n)||fM.set(n,{});const r=fM.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(jJe,{root:e,...t})),r[o]}function zJe(e,t,n){const r=LJe(t);return BI.set(e,n),r.observe(e),()=>{BI.delete(e),r.unobserve(e)}}const BJe={some:0,all:1};class FJe extends Bd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:i}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:BJe[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),p=c?u:f;p&&p(l)};return zJe(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(VJe(t,n))&&this.startObserver()}unmount(){}}function VJe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const HJe={inView:{Feature:FJe},tap:{Feature:DJe},focus:{Feature:PJe},hover:{Feature:OJe}},UJe={layout:{ProjectionNode:Uoe,MeasureLayout:$oe}},GJe={...MYe,...HJe,...IJe,...UJe},Wn=GKe(GJe,oYe);function qJe(){const{createNote:e,notes:t}=Ur(),n=t.slice(0,3),{googleDriveConnected:r,setGoogleDriveConnected:o,isSyncing:i,setIsSyncing:s,setLastSyncedAt:a}=_n(),l=[{icon:hI,label:"New Note",description:"Start writing",action:()=>e("text"),color:"blue"},{icon:Ok,label:"New Canvas",description:"Visual workspace",action:()=>e("canvas"),color:"purple"}];return v.jsx("div",{className:"flex-1 flex flex-col items-center bg-zinc-950 h-full overflow-y-auto min-h-0",children:v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-full w-full px-8 py-12",children:[v.jsxs(Wn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[v.jsxs("h1",{className:"text-3xl font-bold text-zinc-100 mb-3 tracking-tight",children:["Welcome to ",v.jsx("span",{className:"text-blue-400",children:"Logia"})]}),v.jsx("p",{className:"text-zinc-500 text-sm max-w-md",children:"Your intelligent notes companion. Create a note or use AI-powered voice capture to summarize your lectures and meetings."})]}),v.jsx(Wn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"flex gap-3 mb-12",children:l.map((c,u)=>v.jsxs("button",{onClick:c.action||void 0,className:"group relative flex flex-col items-center gap-3 p-5 rounded-xl bg-zinc-900/50 border border-zinc-800 hover:border-zinc-700 hover:bg-zinc-800/50 transition-all duration-200 w-36",children:[v.jsx("div",{className:`p-3 rounded-lg transition-colors ${c.color==="blue"?"bg-blue-500/10 text-blue-400 group-hover:bg-blue-500/20":c.color==="purple"?"bg-purple-500/10 text-purple-400 group-hover:bg-purple-500/20":"bg-amber-500/10 text-amber-400 group-hover:bg-amber-500/20"}`,children:v.jsx(c.icon,{size:22})}),v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-sm font-medium text-zinc-200 group-hover:text-zinc-100 transition-colors",children:c.label}),v.jsx("div",{className:"text-xs text-zinc-500",children:c.description})]}),v.jsx("div",{className:"absolute inset-0 rounded-xl ring-1 ring-inset ring-white/5 group-hover:ring-white/10 transition-all"})]},u))}),v.jsx(Wn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.15},className:"w-full max-w-md mb-8",children:v.jsx("div",{className:"bg-gradient-to-br from-zinc-900/80 to-zinc-800/30 rounded-xl border border-zinc-800/50 p-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`p-2 rounded-lg ${r?"bg-green-500/20":"bg-blue-500/10"}`,children:v.jsx(kb,{className:`w-5 h-5 ${r?"text-green-400":"text-blue-400"}`})}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm font-medium text-zinc-200",children:r?"Cloud Backup Active":"Enable Cloud Backup"}),v.jsx("div",{className:"text-xs text-zinc-500",children:r?"Your notes are synced":"Sync notes to Google Drive"})]})]}),v.jsx("button",{onClick:async()=>{if(r){s(!0);try{const c=await zt("sync_all_to_google_drive");if(pt.success(c.message),a(new Date),c.needs_reload){const{loadNotes:u,loadFolders:f}=Ur.getState();await u(),await f()}}catch(c){pt.error(`Sync failed: ${c}`)}finally{s(!1)}}else{const c=pt.loading("Check your browser...");try{await zt("connect_google_drive"),o(!0),pt.success("Connected!",{id:c})}catch(u){pt.error(`Failed: ${u}`,{id:c})}}},disabled:i,className:`px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1.5 transition-all ${r?"bg-zinc-700 text-zinc-200 hover:bg-zinc-600":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50`,children:i?v.jsxs(v.Fragment,{children:[v.jsx(Cb,{className:"w-3 h-3 animate-spin"})," Syncing"]}):r?v.jsxs(v.Fragment,{children:[v.jsx(Pk,{className:"w-3 h-3"})," Sync"]}):v.jsx(v.Fragment,{children:"Connect"})})]})})}),n.length>0&&v.jsxs(Wn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full max-w-md",children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-500 mb-3 px-1",children:[v.jsx(fI,{size:12}),v.jsx("span",{className:"uppercase tracking-wider font-medium",children:"Recent Notes"})]}),v.jsx("div",{className:"bg-zinc-900/30 rounded-lg border border-zinc-800/50 divide-y divide-zinc-800/50",children:n.map(c=>v.jsxs("button",{onClick:()=>Ur.getState().selectNote(c),className:"w-full flex items-center justify-between p-3 hover:bg-zinc-800/30 transition-colors group text-left",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"p-1.5 rounded-md bg-zinc-800",children:c.note_type==="canvas"?v.jsx(Ok,{size:14,className:"text-purple-400"}):v.jsx(hI,{size:14,className:"text-blue-400"})}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-zinc-300 group-hover:text-zinc-100 transition-colors truncate max-w-[200px]",children:c.title||"Untitled"}),v.jsx("div",{className:"text-xs text-zinc-600",children:new Date(c.updated_at).toLocaleDateString()})]})]}),v.jsx(YHe,{size:14,className:"text-zinc-600 group-hover:text-zinc-400 transition-colors"})]},c.id))})]}),v.jsx(Wn.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"mt-12 text-center",children:v.jsxs("p",{className:"text-xs text-zinc-600",children:["Press"," ",v.jsx("kbd",{className:"px-1.5 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-zinc-400 font-mono text-[10px]",children:""})," ",v.jsx("kbd",{className:"px-1.5 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-zinc-400 font-mono text-[10px]",children:"P"})," ","to search notes"]})})]})})}const ZJe=k.lazy(()=>Ne(()=>import("./Canvas-DNMIPTxK.js"),__vite__mapDeps([37,38])));function WJe(){const e=ht.c(7),{currentNote:t,updateCurrentNoteContent:n,updateCurrentNoteTitle:r}=Ur();if(!t){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=v.jsx(qJe,{}),e[0]=s):s=e[0],s}if(t.note_type==="canvas"){let s;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=v.jsx("div",{className:"h-full w-full",children:v.jsx(k.Suspense,{fallback:v.jsx("div",{className:"h-full w-full flex items-center justify-center bg-zinc-950",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),children:v.jsx(ZJe,{})})}),e[1]=s):s=e[1],s}let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=v.jsx(dZe,{}),e[2]=o):o=e[2];let i;return e[3]!==t||e[4]!==n||e[5]!==r?(i=v.jsx(NHe,{currentNote:t,updateCurrentNoteContent:n,updateCurrentNoteTitle:r,children:o}),e[3]=t,e[4]=n,e[5]=r,e[6]=i):i=e[6],i}function KJe(){const e=ht.c(18),{isAiSidebarOpen:t,setIsAiSidebarOpen:n,isSidebarFloating:r,setIsSidebarFloating:o}=_n();let i;e[0]!==r||e[1]!==o?(i=()=>o(!r),e[0]=r,e[1]=o,e[2]=i):i=e[2];const s=`p-2 rounded-md transition-all duration-200 ${r?"text-blue-400 bg-blue-400/10":"text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800"}`,a=r?"Pin Sidebar":"Float Sidebar";let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=v.jsx(XUe,{size:18}),e[3]=l):l=e[3];let c;e[4]!==i||e[5]!==s||e[6]!==a?(c=v.jsx("div",{className:"flex items-center gap-2",children:v.jsx("button",{onClick:i,className:s,title:a,children:l})}),e[4]=i,e[5]=s,e[6]=a,e[7]=c):c=e[7];let u;e[8]!==t||e[9]!==n?(u=()=>n(!t),e[8]=t,e[9]=n,e[10]=u):u=e[10];const f=`p-2 rounded-md transition-all duration-200 ${t?"text-blue-400 bg-blue-400/10":"text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800"}`;let p;e[11]===Symbol.for("react.memo_cache_sentinel")?(p=v.jsx(eGe,{size:18}),e[11]=p):p=e[11];let m;e[12]!==u||e[13]!==f?(m=v.jsx("div",{className:"flex items-center",children:v.jsx("button",{onClick:u,className:f,title:"Toggle AI Sidebar",children:p})}),e[12]=u,e[13]=f,e[14]=m):m=e[14];let y;return e[15]!==c||e[16]!==m?(y=v.jsxs("header",{className:"h-10 bg-zinc-950/90 px-4 border-b border-zinc-300/20 flex items-center justify-between flex-shrink-0",children:[c,m]}),e[15]=c,e[16]=m,e[17]=y):y=e[17],y}var Lr=function(){return Lr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Lr.apply(this,arguments)},IV={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},OV={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},$x={width:"20px",height:"20px",position:"absolute",zIndex:1},YJe={top:Lr(Lr({},IV),{top:"-5px"}),right:Lr(Lr({},OV),{left:void 0,right:"-5px"}),bottom:Lr(Lr({},IV),{top:void 0,bottom:"-5px"}),left:Lr(Lr({},OV),{left:"-5px"}),topRight:Lr(Lr({},$x),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Lr(Lr({},$x),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Lr(Lr({},$x),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Lr(Lr({},$x),{left:"-10px",top:"-10px",cursor:"nw-resize"})},JJe=k.memo(function(e){var t=e.onResizeStart,n=e.direction,r=e.children,o=e.replaceStyles,i=e.className,s=k.useCallback(function(c){t(c,n)},[t,n]),a=k.useCallback(function(c){t(c,n)},[t,n]),l=k.useMemo(function(){return Lr(Lr({position:"absolute",userSelect:"none"},YJe[n]),o??{})},[o,n]);return v.jsx("div",{className:i||void 0,style:l,onMouseDown:s,onTouchStart:a,children:r})}),XJe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ml=function(){return Ml=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ml.apply(this,arguments)},QJe={width:"auto",height:"auto"},jx=function(e,t,n){return Math.max(Math.min(e,n),t)},PV=function(e,t,n){var r=Math.round(e/t);return r*t+n*(r-1)},_p=function(e,t){return new RegExp(e,"i").test(t)},Lx=function(e){return!!(e.touches&&e.touches.length)},eXe=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},DV=function(e,t,n){n===void 0&&(n=0);var r=t.reduce(function(i,s,a){return Math.abs(s-e)<Math.abs(t[i]-e)?a:i},0),o=Math.abs(t[r]-e);return n===0||o<n?t[r]:e},hM=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},zx=function(e,t,n,r){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var o=Number(e.replace("%",""))/100;return t*o}if(e.endsWith("vw")){var o=Number(e.replace("vw",""))/100;return n*o}if(e.endsWith("vh")){var o=Number(e.replace("vh",""))/100;return r*o}}return e},tXe=function(e,t,n,r,o,i,s){return r=zx(r,e.width,t,n),o=zx(o,e.height,t,n),i=zx(i,e.width,t,n),s=zx(s,e.height,t,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof o>"u"?void 0:Number(o),minWidth:typeof i>"u"?void 0:Number(i),minHeight:typeof s>"u"?void 0:Number(s)}},nXe=function(e){return Array.isArray(e)?e:[e,e]},rXe=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],$V="__resizable_base__",Goe=(function(e){XJe(t,e);function t(n){var r,o,i,s,a=e.call(this,n)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var l=a.parentNode;if(!l)return null;var c=a.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add($V):c.className+=$V,l.appendChild(c),c},a.removeBase=function(l){var c=a.parentNode;c&&c.removeChild(l)},a.state={isResizing:!1,width:(o=(r=a.propsSize)===null||r===void 0?void 0:r.width)!==null&&o!==void 0?o:"auto",height:(s=(i=a.propsSize)===null||i===void 0?void 0:i.height)!==null&&s!==void 0?s:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||QJe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var n=0,r=0;if(this.resizable&&this.window){var o=this.resizable.offsetWidth,i=this.resizable.offsetHeight,s=this.resizable.style.position;s!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:o,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:i,this.resizable.style.position=s}return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var n=this,r=this.props.size,o=function(a){var l;if(typeof n.state[a]>"u"||n.state[a]==="auto")return"auto";if(n.propsSize&&n.propsSize[a]&&(!((l=n.propsSize[a])===null||l===void 0)&&l.toString().endsWith("%"))){if(n.state[a].toString().endsWith("%"))return n.state[a].toString();var c=n.getParentSize(),u=Number(n.state[a].toString().replace("px","")),f=u/c[a]*100;return"".concat(f,"%")}return hM(n.state[a])},i=r&&typeof r.width<"u"&&!this.state.isResizing?hM(r.width):o("width"),s=r&&typeof r.height<"u"&&!this.state.isResizing?hM(r.height):o("height");return{width:i,height:s}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var r=!1,o=this.parentNode.style.flexWrap;o!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var i={width:n.offsetWidth,height:n.offsetHeight};return r&&(this.parentNode.style.flexWrap=o),this.removeBase(n),i},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(n,r){var o=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===n&&(typeof o>"u"||o==="auto")?"auto":n},t.prototype.calculateNewMaxFromBoundary=function(n,r){var o=this.props.boundsByDirection,i=this.state.direction,s=o&&_p("left",i),a=o&&_p("top",i),l,c;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(l=s?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),c=a?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=s?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=s?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(n=n&&n<l?n:l),c&&Number.isFinite(c)&&(r=r&&r<c?r:c),{maxWidth:n,maxHeight:r}},t.prototype.calculateNewSizeFromDirection=function(n,r){var o=this.props.scale||1,i=nXe(this.props.resizeRatio||1),s=i[0],a=i[1],l=this.state,c=l.direction,u=l.original,f=this.props,p=f.lockAspectRatio,m=f.lockAspectRatioExtraHeight,y=f.lockAspectRatioExtraWidth,b=u.width,w=u.height,S=m||0,E=y||0;return _p("right",c)&&(b=u.width+(n-u.x)*s/o,p&&(w=(b-E)/this.ratio+S)),_p("left",c)&&(b=u.width-(n-u.x)*s/o,p&&(w=(b-E)/this.ratio+S)),_p("bottom",c)&&(w=u.height+(r-u.y)*a/o,p&&(b=(w-S)*this.ratio+E)),_p("top",c)&&(w=u.height-(r-u.y)*a/o,p&&(b=(w-S)*this.ratio+E)),{newWidth:b,newHeight:w}},t.prototype.calculateNewSizeFromAspectRatio=function(n,r,o,i){var s=this.props,a=s.lockAspectRatio,l=s.lockAspectRatioExtraHeight,c=s.lockAspectRatioExtraWidth,u=typeof i.width>"u"?10:i.width,f=typeof o.width>"u"||o.width<0?n:o.width,p=typeof i.height>"u"?10:i.height,m=typeof o.height>"u"||o.height<0?r:o.height,y=l||0,b=c||0;if(a){var w=(p-y)*this.ratio+b,S=(m-y)*this.ratio+b,E=(u-b)/this.ratio+y,T=(f-b)/this.ratio+y,A=Math.max(u,w),M=Math.min(f,S),R=Math.max(p,E),O=Math.min(m,T);n=jx(n,A,M),r=jx(r,R,O)}else n=jx(n,u,f),r=jx(r,p,m);return{newWidth:n,newHeight:r}},t.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var o=r.getBoundingClientRect();this.parentLeft=o.left*n,this.parentTop=o.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var i=this.props.bounds.getBoundingClientRect();this.targetLeft=i.left*n,this.targetTop=i.top*n}if(this.resizable){var s=this.resizable.getBoundingClientRect(),a=s.left,l=s.top,c=s.right,u=s.bottom;this.resizableLeft=a*n,this.resizableRight=c*n,this.resizableTop=l*n,this.resizableBottom=u*n}},t.prototype.onResizeStart=function(n,r){if(!(!this.resizable||!this.window)){var o=0,i=0;if(n.nativeEvent&&eXe(n.nativeEvent)?(o=n.nativeEvent.clientX,i=n.nativeEvent.clientY):n.nativeEvent&&Lx(n.nativeEvent)&&(o=n.nativeEvent.touches[0].clientX,i=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var s=this.props.onResizeStart(n,r,this.resizable);if(s===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var c=this.parentNode;if(c){var u=this.window.getComputedStyle(c).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",a=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var f={original:{x:o,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Ml(Ml({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:r,flexBasis:a};this.setState(f)}},t.prototype.onMouseMove=function(n){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Lx(n))try{n.preventDefault(),n.stopPropagation()}catch{}var o=this.props,i=o.maxWidth,s=o.maxHeight,a=o.minWidth,l=o.minHeight,c=Lx(n)?n.touches[0].clientX:n.clientX,u=Lx(n)?n.touches[0].clientY:n.clientY,f=this.state,p=f.direction,m=f.original,y=f.width,b=f.height,w=this.getParentSize(),S=tXe(w,this.window.innerWidth,this.window.innerHeight,i,s,a,l);i=S.maxWidth,s=S.maxHeight,a=S.minWidth,l=S.minHeight;var E=this.calculateNewSizeFromDirection(c,u),T=E.newHeight,A=E.newWidth,M=this.calculateNewMaxFromBoundary(i,s);this.props.snap&&this.props.snap.x&&(A=DV(A,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(T=DV(T,this.props.snap.y,this.props.snapGap));var R=this.calculateNewSizeFromAspectRatio(A,T,{width:M.maxWidth,height:M.maxHeight},{width:a,height:l});if(A=R.newWidth,T=R.newHeight,this.props.grid){var O=PV(A,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),I=PV(T,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),L=this.props.snapGap||0,$=L===0||Math.abs(O-A)<=L?O:A,B=L===0||Math.abs(I-T)<=L?I:T;A=$,T=B}var G={width:A-m.width,height:T-m.height};if(this.delta=G,y&&typeof y=="string"){if(y.endsWith("%")){var V=A/w.width*100;A="".concat(V,"%")}else if(y.endsWith("vw")){var W=A/this.window.innerWidth*100;A="".concat(W,"vw")}else if(y.endsWith("vh")){var K=A/this.window.innerHeight*100;A="".concat(K,"vh")}}if(b&&typeof b=="string"){if(b.endsWith("%")){var V=T/w.height*100;T="".concat(V,"%")}else if(b.endsWith("vw")){var W=T/this.window.innerWidth*100;T="".concat(W,"vw")}else if(b.endsWith("vh")){var K=T/this.window.innerHeight*100;T="".concat(K,"vh")}}var F={width:this.createSizeForCssProperty(A,"width"),height:this.createSizeForCssProperty(T,"height")};this.flexDir==="row"?F.flexBasis=F.width:this.flexDir==="column"&&(F.flexBasis=F.height);var q=this.state.width!==F.width,H=this.state.height!==F.height,z=this.state.flexBasis!==F.flexBasis,N=q||H||z;N&&Zr.flushSync(function(){r.setState(F)}),this.props.onResize&&N&&this.props.onResize(n,p,this.resizable,G)}},t.prototype.onMouseUp=function(n){var r,o,i=this.state,s=i.isResizing,a=i.direction;i.original,!(!s||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,a,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(o=this.props.size.height)!==null&&o!==void 0?o:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Ml(Ml({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(n){var r,o;this.setState({width:(r=n.width)!==null&&r!==void 0?r:"auto",height:(o=n.height)!==null&&o!==void 0?o:"auto"})},t.prototype.renderResizer=function(){var n=this,r=this.props,o=r.enable,i=r.handleStyles,s=r.handleClasses,a=r.handleWrapperStyle,l=r.handleWrapperClass,c=r.handleComponent;if(!o)return null;var u=Object.keys(o).map(function(f){return o[f]!==!1?v.jsx(JJe,{direction:f,onResizeStart:n.onResizeStart,replaceStyles:i&&i[f],className:s&&s[f],children:c&&c[f]?c[f]:null},f):null});return v.jsx("div",{className:l,style:a,children:u})},t.prototype.render=function(){var n=this,r=Object.keys(this.props).reduce(function(s,a){return rXe.indexOf(a)!==-1||(s[a]=n.props[a]),s},{}),o=Ml(Ml(Ml({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(o.flexBasis=this.state.flexBasis);var i=this.props.as||"div";return v.jsxs(i,Ml({style:o,className:this.props.className},r,{ref:function(s){s&&(n.resizable=s)},children:[this.state.isResizing&&v.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t})(k.PureComponent);const qoe=typeof document<"u"?se.useLayoutEffect:()=>{};var pM;const oXe=(pM=se.useInsertionEffect)!==null&&pM!==void 0?pM:qoe;function iXe(e){const t=k.useRef(null);return oXe(()=>{t.current=e},[e]),k.useCallback((...n)=>{const r=t.current;return r?.(...n)},[])}const Fd=e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},Lf=e=>e&&"window"in e&&e.window===e?e:Fd(e).defaultView||window;function sXe(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function aXe(e){return sXe(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let lXe=!1;function ND(){return lXe}function Zoe(e,t){if(!ND())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:aXe(n)?n=n.host:n=n.parentNode}return!1}const FI=(e=document)=>{var t;if(!ND())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function Woe(e){return ND()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function cXe(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function uXe(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Koe(e){let t=null;return()=>(t==null&&(t=e()),t)}const dXe=Koe(function(){return uXe(/^Mac/i)}),fXe=Koe(function(){return cXe(/Android/i)});function Yoe(){let e=k.useRef(new Map),t=k.useCallback((o,i,s,a)=>{let l=a?.once?(...c)=>{e.current.delete(s),s(...c)}:s;e.current.set(s,{type:i,eventTarget:o,fn:l,options:a}),o.addEventListener(i,l,a)},[]),n=k.useCallback((o,i,s,a)=>{var l;let c=((l=e.current.get(s))===null||l===void 0?void 0:l.fn)||s;o.removeEventListener(i,c,a),e.current.delete(s)},[]),r=k.useCallback(()=>{e.current.forEach((o,i)=>{n(o.eventTarget,o.type,i,o.options)})},[n]);return k.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function hXe(e){return e.mozInputSource===0&&e.isTrusted?!0:fXe()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Joe(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function pXe(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function Xoe(e){let t=k.useRef({isFocused:!1,observer:null});qoe(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=iXe(r=>{e?.(r)});return k.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let o=r.target,i=s=>{if(t.current.isFocused=!1,o.disabled){let a=Joe(s);n(a)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&o.disabled){var s;(s=t.current.observer)===null||s===void 0||s.disconnect();let a=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),t.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let mXe=!1,Tv=null,VI=new Set,x0=new Map,gh=!1,HI=!1;const gXe={Tab:!0,Escape:!0};function RD(e,t){for(let n of VI)n(e,t)}function yXe(e){return!(e.metaKey||!dXe()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function Fk(e){gh=!0,yXe(e)&&(Tv="keyboard",RD("keyboard",e))}function fm(e){Tv="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(gh=!0,RD("pointer",e))}function Qoe(e){hXe(e)&&(gh=!0,Tv="virtual")}function eie(e){e.target===window||e.target===document||mXe||!e.isTrusted||(!gh&&!HI&&(Tv="virtual",RD("virtual",e)),gh=!1,HI=!1)}function tie(){gh=!1,HI=!0}function UI(e){if(typeof window>"u"||typeof document>"u"||x0.get(Lf(e)))return;const t=Lf(e),n=Fd(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){gh=!0,r.apply(this,arguments)},n.addEventListener("keydown",Fk,!0),n.addEventListener("keyup",Fk,!0),n.addEventListener("click",Qoe,!0),t.addEventListener("focus",eie,!0),t.addEventListener("blur",tie,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",fm,!0),n.addEventListener("pointermove",fm,!0),n.addEventListener("pointerup",fm,!0)),t.addEventListener("beforeunload",()=>{nie(e)},{once:!0}),x0.set(t,{focus:r})}const nie=(e,t)=>{const n=Lf(e),r=Fd(e);t&&r.removeEventListener("DOMContentLoaded",t),x0.has(n)&&(n.HTMLElement.prototype.focus=x0.get(n).focus,r.removeEventListener("keydown",Fk,!0),r.removeEventListener("keyup",Fk,!0),r.removeEventListener("click",Qoe,!0),n.removeEventListener("focus",eie,!0),n.removeEventListener("blur",tie,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",fm,!0),r.removeEventListener("pointermove",fm,!0),r.removeEventListener("pointerup",fm,!0)),x0.delete(n))};function bXe(e){const t=Fd(e);let n;return t.readyState!=="loading"?UI(e):(n=()=>{UI(e)},t.addEventListener("DOMContentLoaded",n)),()=>nie(e,n)}typeof document<"u"&&bXe();function rie(){return Tv!=="pointer"}const vXe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function xXe(e,t,n){let r=Fd(n?.target);const o=typeof window<"u"?Lf(n?.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?Lf(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,s=typeof window<"u"?Lf(n?.target).HTMLElement:HTMLElement,a=typeof window<"u"?Lf(n?.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!vXe.has(r.activeElement.type)||r.activeElement instanceof i||r.activeElement instanceof s&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof a&&!gXe[n.key])}function wXe(e,t,n){UI(),k.useEffect(()=>{let r=(o,i)=>{xXe(!!n?.isTextInput,o,i)&&e(rie())};return VI.add(r),()=>{VI.delete(r)}},t)}function SXe(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:o}=e;const i=k.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),o&&o(!1),!0},[r,o]),s=Xoe(i),a=k.useCallback(l=>{const c=Fd(l.target),u=c?FI(c):FI();l.target===l.currentTarget&&u===Woe(l.nativeEvent)&&(n&&n(l),o&&o(!0),s(l))},[o,n,s]);return{focusProps:{onFocus:!t&&(n||o||r)?a:void 0,onBlur:!t&&(r||o)?i:void 0}}}function kXe(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:o}=e,i=k.useRef({isFocusWithin:!1}),{addGlobalListener:s,removeAllGlobalListeners:a}=Yoe(),l=k.useCallback(f=>{f.currentTarget.contains(f.target)&&i.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(i.current.isFocusWithin=!1,a(),n&&n(f),o&&o(!1))},[n,o,i,a]),c=Xoe(l),u=k.useCallback(f=>{if(!f.currentTarget.contains(f.target))return;const p=Fd(f.target),m=FI(p);if(!i.current.isFocusWithin&&m===Woe(f.nativeEvent)){r&&r(f),o&&o(!0),i.current.isFocusWithin=!0,c(f);let y=f.currentTarget;s(p,"focus",b=>{if(i.current.isFocusWithin&&!Zoe(y,b.target)){let w=new p.defaultView.FocusEvent("blur",{relatedTarget:b.target});pXe(w,y);let S=Joe(w);l(S)}},{capture:!0})}},[r,o,c,s,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:l}}}let GI=!1,Bx=0;function CXe(){GI=!0,setTimeout(()=>{GI=!1},50)}function jV(e){e.pointerType==="touch"&&CXe()}function EXe(){if(!(typeof document>"u"))return Bx===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",jV),Bx++,()=>{Bx--,!(Bx>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",jV)}}function TXe(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:o}=e,[i,s]=k.useState(!1),a=k.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;k.useEffect(EXe,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=Yoe(),{hoverProps:u,triggerHoverEnd:f}=k.useMemo(()=>{let p=(b,w)=>{if(a.pointerType=w,o||w==="touch"||a.isHovered||!b.currentTarget.contains(b.target))return;a.isHovered=!0;let S=b.currentTarget;a.target=S,l(Fd(b.target),"pointerover",E=>{a.isHovered&&a.target&&!Zoe(a.target,E.target)&&m(E,E.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:S,pointerType:w}),n&&n(!0),s(!0)},m=(b,w)=>{let S=a.target;a.pointerType="",a.target=null,!(w==="touch"||!a.isHovered||!S)&&(a.isHovered=!1,c(),r&&r({type:"hoverend",target:S,pointerType:w}),n&&n(!1),s(!1))},y={};return typeof PointerEvent<"u"&&(y.onPointerEnter=b=>{GI&&b.pointerType==="mouse"||p(b,b.pointerType)},y.onPointerLeave=b=>{!o&&b.currentTarget.contains(b.target)&&m(b,b.pointerType)}),{hoverProps:y,triggerHoverEnd:m}},[t,n,r,o,a,l,c]);return k.useEffect(()=>{o&&f({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:u,isHovered:i}}function _Xe(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,o=k.useRef({isFocused:!1,isFocusVisible:t||rie()}),[i,s]=k.useState(!1),[a,l]=k.useState(()=>o.current.isFocused&&o.current.isFocusVisible),c=k.useCallback(()=>l(o.current.isFocused&&o.current.isFocusVisible),[]),u=k.useCallback(m=>{o.current.isFocused=m,s(m),c()},[c]);wXe(m=>{o.current.isFocusVisible=m,c()},[],{isTextInput:n});let{focusProps:f}=SXe({isDisabled:r,onFocusChange:u}),{focusWithinProps:p}=kXe({isDisabled:!r,onFocusWithinChange:u});return{isFocused:i,isFocusVisible:a,focusProps:r?p:f}}var AXe=Object.defineProperty,MXe=(e,t,n)=>t in e?AXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mM=(e,t,n)=>(MXe(e,typeof t!="symbol"?t+"":t,n),n);let NXe=class{constructor(){mM(this,"current",this.detect()),mM(this,"handoffState","pending"),mM(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ql=new NXe;function Rh(e){var t,n;return ql.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?(n=(t=e.current)==null?void 0:t.ownerDocument)!=null?n:document:null:document}function RE(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function xa(){let e=[],t={addEventListener(n,r,o,i){return n.addEventListener(r,o,i),t.add(()=>n.removeEventListener(r,o,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return RE(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,o){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=xa();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let o of e.splice(r,1))o()}},dispose(){for(let n of e.splice(0))n()}};return t}function kg(){let[e]=k.useState(xa);return k.useEffect(()=>()=>e.dispose(),[e]),e}let Sn=(e,t)=>{ql.isServer?k.useEffect(e,t):k.useLayoutEffect(e,t)};function Ih(e){let t=k.useRef(e);return Sn(()=>{t.current=e},[e]),t}let lt=function(e){let t=Ih(e);return se.useCallback((...n)=>t.current(...n),[t])};function RXe(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function IXe(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function OXe({disabled:e=!1}={}){let t=k.useRef(null),[n,r]=k.useState(!1),o=kg(),i=lt(()=>{t.current=null,r(!1),o.dispose()}),s=lt(a=>{if(o.dispose(),t.current===null){t.current=a.currentTarget,r(!0);{let l=Rh(a.currentTarget);o.addEventListener(l,"pointerup",i,!1),o.addEventListener(l,"pointermove",c=>{if(t.current){let u=RXe(c);r(IXe(u,t.current.getBoundingClientRect()))}},!1),o.addEventListener(l,"pointercancel",i,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:s,onPointerUp:i,onClick:i}}}let PXe=k.createContext(void 0);function oie(){return k.useContext(PXe)}function qI(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function nl(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,nl),r}var Lm=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Lm||{}),ld=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ld||{});function Wr(){let e=$Xe();return k.useCallback(t=>DXe({mergeRefs:e,...t}),[e])}function DXe({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:s,mergeRefs:a}){a=a??jXe;let l=iie(t,e);if(i)return Fx(l,n,r,s,a);let c=o??0;if(c&2){let{static:u=!1,...f}=l;if(u)return Fx(f,n,r,s,a)}if(c&1){let{unmount:u=!0,...f}=l;return nl(u?0:1,{0(){return null},1(){return Fx({...f,hidden:!0,style:{display:"none"}},n,r,s,a)}})}return Fx(l,n,r,s,a)}function Fx(e,t={},n,r,o){let{as:i=n,children:s,refName:a="ref",...l}=gM(e,["unmount","static"]),c=e.ref!==void 0?{[a]:e.ref}:{},u=typeof s=="function"?s(t):s;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let p=!1,m=[];for(let[y,b]of Object.entries(t))typeof b=="boolean"&&(p=!0),b===!0&&m.push(y.replace(/([A-Z])/g,w=>`-${w.toLowerCase()}`));if(p){f["data-headlessui-state"]=m.join(" ");for(let y of m)f[`data-${y}`]=""}}if(i===k.Fragment&&(Object.keys(vf(l)).length>0||Object.keys(vf(f)).length>0))if(!k.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(vf(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(vf(l)).concat(Object.keys(vf(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,m=p?.className,y=typeof m=="function"?(...S)=>qI(m(...S),l.className):qI(m,l.className),b=y?{className:y}:{},w=iie(u.props,vf(gM(l,["ref"])));for(let S in f)S in w&&delete f[S];return k.cloneElement(u,Object.assign({},w,f,c,{ref:o(LXe(u),c.ref)},b))}return k.createElement(i,Object.assign({},gM(l,["ref"]),i!==k.Fragment&&c,i!==k.Fragment&&f),u)}function $Xe(){let e=k.useRef([]),t=k.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function jXe(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function iie(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[o=>{var i;return(i=o?.preventDefault)==null?void 0:i.call(o)}]);for(let r in n)Object.assign(t,{[r](o,...i){let s=n[r];for(let a of s){if((o instanceof Event||o?.nativeEvent instanceof Event)&&o.defaultPrevented)return;a(o,...i)}}});return t}function sie(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];for(let r in n)Object.assign(t,{[r](...o){let i=n[r];for(let s of i)s?.(...o)}});return t}function Er(e){var t;return Object.assign(k.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function vf(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function gM(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function LXe(e){return se.version.split(".")[0]>="19"?e.props.ref:e.ref}let zXe="span";var Vk=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Vk||{});function BXe(e,t){var n;let{features:r=1,...o}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Wr()({ourProps:i,theirProps:o,slot:{},defaultTag:zXe,name:"Hidden"})}let ZI=Er(BXe),FXe=k.createContext(void 0);function VXe(){return k.useContext(FXe)}function ID(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function Kc(e){return ID(e)&&"tagName"in e}function Rs(e){return Kc(e)&&"accessKey"in e}function zl(e){return Kc(e)&&"tabIndex"in e}function HXe(e){return Kc(e)&&"style"in e}function UXe(e){return Rs(e)&&e.nodeName==="IFRAME"}function aie(e){return Rs(e)&&e.nodeName==="INPUT"}function LV(e){return Rs(e)&&e.nodeName==="LABEL"}function GXe(e){return Rs(e)&&e.nodeName==="FIELDSET"}function lie(e){return Rs(e)&&e.nodeName==="LEGEND"}function qXe(e){return Kc(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function ZXe(e){let t=e.parentElement,n=null;for(;t&&!GXe(t);)lie(t)&&(n=t),t=t.parentElement;let r=t?.getAttribute("disabled")==="";return r&&WXe(n)?!1:r}function WXe(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(lie(t))return!1;t=t.previousElementSibling}return!0}let cie=Symbol();function KXe(e,t=!0){return Object.assign(e,{[cie]:t})}function Si(...e){let t=k.useRef(e);k.useEffect(()=>{t.current=e},[e]);let n=lt(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||r?.[cie])?void 0:n}let OD=k.createContext(null);OD.displayName="DescriptionContext";function uie(){let e=k.useContext(OD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,uie),t}return e}function die(){let[e,t]=k.useState([]);return[e.length>0?e.join(" "):void 0,k.useMemo(()=>function(n){let r=lt(i=>(t(s=>[...s,i]),()=>t(s=>{let a=s.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),o=k.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return se.createElement(OD.Provider,{value:o},n.children)},[t])]}let YXe="p";function JXe(e,t){let n=k.useId(),r=oie(),{id:o=`headlessui-description-${n}`,...i}=e,s=uie(),a=Si(t);Sn(()=>s.register(o),[o,s.register]);let l=r||!1,c=k.useMemo(()=>({...s.slot,disabled:l}),[s.slot,l]),u={ref:a,...s.props,id:o};return Wr()({ourProps:u,theirProps:i,slot:c,defaultTag:YXe,name:s.name||"Description"})}let XXe=Er(JXe),hm=Object.assign(XXe,{});var vo=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(vo||{});let IE=k.createContext(null);IE.displayName="LabelContext";function PD(){let e=k.useContext(IE);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,PD),t}return e}function QXe(e){var t,n,r;let o=(n=(t=k.useContext(IE))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[o,...e].filter(Boolean).join(" "):o}function fie({inherit:e=!1}={}){let t=QXe(),[n,r]=k.useState([]),o=e?[t,...n].filter(Boolean):n;return[o.length>0?o.join(" "):void 0,k.useMemo(()=>function(i){let s=lt(l=>(r(c=>[...c,l]),()=>r(c=>{let u=c.slice(),f=u.indexOf(l);return f!==-1&&u.splice(f,1),u}))),a=k.useMemo(()=>({register:s,slot:i.slot,name:i.name,props:i.props,value:i.value}),[s,i.slot,i.name,i.props,i.value]);return se.createElement(IE.Provider,{value:a},i.children)},[r])]}let eQe="label";function tQe(e,t){var n;let r=k.useId(),o=PD(),i=VXe(),s=oie(),{id:a=`headlessui-label-${r}`,htmlFor:l=i??((n=o.props)==null?void 0:n.htmlFor),passive:c=!1,...u}=e,f=Si(t);Sn(()=>o.register(a),[a,o.register]);let p=lt(w=>{let S=w.currentTarget;if(!(w.target!==w.currentTarget&&qXe(w.target))&&(LV(S)&&w.preventDefault(),o.props&&"onClick"in o.props&&typeof o.props.onClick=="function"&&o.props.onClick(w),LV(S))){let E=document.getElementById(S.htmlFor);if(E){let T=E.getAttribute("disabled");if(T==="true"||T==="")return;let A=E.getAttribute("aria-disabled");if(A==="true"||A==="")return;(aie(E)&&(E.type==="file"||E.type==="radio"||E.type==="checkbox")||E.role==="radio"||E.role==="checkbox"||E.role==="switch")&&E.click(),E.focus({preventScroll:!0})}}}),m=s||!1,y=k.useMemo(()=>({...o.slot,disabled:m}),[o.slot,m]),b={ref:f,...o.props,id:a,htmlFor:l,onClick:p};return c&&("onClick"in b&&(delete b.htmlFor,delete b.onClick),"onClick"in u&&delete u.onClick),Wr()({ourProps:b,theirProps:u,slot:y,defaultTag:l?eQe:"div",name:o.name||"Label"})}let nQe=Er(tQe);Object.assign(nQe,{});let rQe=k.createContext(()=>{});function oQe({value:e,children:t}){return se.createElement(rQe.Provider,{value:e},t)}function iQe(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function sQe(e,t=!1){let[n,r]=k.useReducer(()=>({}),{}),o=k.useMemo(()=>iQe(e),[e,n]);return Sn(()=>{if(!e)return;let i=new ResizeObserver(r);return i.observe(e),()=>{i.disconnect()}},[e]),t?{width:`${o.width}px`,height:`${o.height}px`}:o}let hie=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var aQe=Object.defineProperty,lQe=(e,t,n)=>t in e?aQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cQe=(e,t,n)=>(lQe(e,t+"",n),n),pie=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Js=(e,t,n)=>(pie(e,t,"read from private field"),n?n.call(e):t.get(e)),yM=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},zV=(e,t,n,r)=>(pie(e,t,"write to private field"),t.set(e,n),n),Cl,Uy,Gy;let mie=class{constructor(t){yM(this,Cl,{}),yM(this,Uy,new hie(()=>new Set)),yM(this,Gy,new Set),cQe(this,"disposables",xa()),zV(this,Cl,t),ql.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Js(this,Cl)}subscribe(t,n){if(ql.isServer)return()=>{};let r={selector:t,callback:n,current:t(Js(this,Cl))};return Js(this,Gy).add(r),this.disposables.add(()=>{Js(this,Gy).delete(r)})}on(t,n){return ql.isServer?()=>{}:(Js(this,Uy).get(t).add(n),this.disposables.add(()=>{Js(this,Uy).get(t).delete(n)}))}send(t){let n=this.reduce(Js(this,Cl),t);if(n!==Js(this,Cl)){zV(this,Cl,n);for(let r of Js(this,Gy)){let o=r.selector(Js(this,Cl));gie(r.current,o)||(r.current=o,r.callback(o))}for(let r of Js(this,Uy).get(t.type))r(Js(this,Cl),t)}}};Cl=new WeakMap,Uy=new WeakMap,Gy=new WeakMap;function gie(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:bM(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:bM(e.entries(),t.entries()):BV(e)&&BV(t)?bM(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function bM(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function BV(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function FV(e){let[t,n]=e(),r=xa();return(...o)=>{t(...o),r.dispose(),r.microTask(n)}}var uQe=Object.defineProperty,dQe=(e,t,n)=>t in e?uQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VV=(e,t,n)=>(dQe(e,typeof t!="symbol"?t+"":t,n),n),yie=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(yie||{});let fQe={0(e,t){let n=t.id,r=e.stack,o=e.stack.indexOf(n);if(o!==-1){let i=e.stack.slice();return i.splice(o,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let o=e.stack.slice();return o.splice(r,1),{...e,stack:o}}},hQe=class bie extends mie{constructor(){super(...arguments),VV(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),VV(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new bie({stack:[]})}reduce(t,n){return nl(n.type,fQe,t,n)}};const OE=new hie(()=>hQe.new());var vM={exports:{}},xM={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HV;function pQe(){if(HV)return xM;HV=1;var e=zb();function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,o=e.useRef,i=e.useEffect,s=e.useMemo,a=e.useDebugValue;return xM.useSyncExternalStoreWithSelector=function(l,c,u,f,p){var m=o(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=s(function(){function w(M){if(!S){if(S=!0,E=M,M=f(M),p!==void 0&&y.hasValue){var R=y.value;if(p(R,M))return T=R}return T=M}if(R=T,n(E,M))return R;var O=f(M);return p!==void 0&&p(R,O)?(E=M,R):(E=M,T=O)}var S=!1,E,T,A=u===void 0?null:u;return[function(){return w(c())},A===null?void 0:function(){return w(A())}]},[c,u,f,p]);var b=r(l,m[0],m[1]);return i(function(){y.hasValue=!0,y.value=b},[b]),a(b),b},xM}var UV;function mQe(){return UV||(UV=1,vM.exports=pQe()),vM.exports}var gQe=mQe();function Za(e,t,n=gie){return gQe.useSyncExternalStoreWithSelector(lt(r=>e.subscribe(yQe,r)),lt(()=>e.state),lt(()=>e.state),lt(t),n)}function yQe(e){return e}function _v(e,t){let n=k.useId(),r=OE.get(t),[o,i]=Za(r,k.useCallback(s=>[r.selectors.isTop(s,n),r.selectors.inStack(s,n)],[r,n]));return Sn(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?o:!0:!1}let WI=new Map,w0=new Map;function GV(e){var t;let n=(t=w0.get(e))!=null?t:0;return w0.set(e,n+1),n!==0?()=>qV(e):(WI.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>qV(e))}function qV(e){var t;let n=(t=w0.get(e))!=null?t:1;if(n===1?w0.delete(e):w0.set(e,n-1),n!==1)return;let r=WI.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,WI.delete(e))}function vie(e,{allowed:t,disallowed:n}={}){let r=_v(e,"inert-others");Sn(()=>{var o,i;if(!r)return;let s=xa();for(let l of(o=n?.())!=null?o:[])l&&s.add(GV(l));let a=(i=t?.())!=null?i:[];for(let l of a){if(!l)continue;let c=Rh(l);if(!c)continue;let u=l.parentElement;for(;u&&u!==c.body;){for(let f of u.children)a.some(p=>f.contains(p))||s.add(GV(f));u=u.parentElement}}return s.dispose},[r,t,n])}function xie(e,t,n){let r=Ih(o=>{let i=o.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});k.useEffect(()=>{if(!e)return;let o=t===null?null:Rs(t)?t:t.current;if(!o)return;let i=xa();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}return()=>i.dispose()},[t,r,e])}let Hk=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),bQe=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Va=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Va||{}),KI=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(KI||{}),vQe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(vQe||{});function wie(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Hk)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function xQe(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(bQe)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var DD=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(DD||{});function $D(e,t=0){var n;return e===((n=Rh(e))==null?void 0:n.body)?!1:nl(t,{0(){return e.matches(Hk)},1(){let r=e;for(;r!==null;){if(r.matches(Hk))return!0;r=r.parentElement}return!1}})}function Sie(e){let t=Rh(e);xa().nextFrame(()=>{t&&zl(t.activeElement)&&!$D(t.activeElement,0)&&Zl(e)})}var wQe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(wQe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Zl(e){e?.focus({preventScroll:!0})}let SQe=["textarea","input"].join(",");function kQe(e){var t,n;return(n=(t=e?.matches)==null?void 0:t.call(e,SQe))!=null?n:!1}function kie(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let s=o.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function CQe(e,t){return pm(wie(),t,{relativeTo:e})}function pm(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?n?kie(e):e:t&64?xQe(e):wie(e);o.length>0&&s.length>1&&(s=s.filter(m=>!o.some(y=>y!=null&&"current"in y?y?.current===m:y===m))),r=r??i.activeElement;let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=t&32?{preventScroll:!0}:{},u=0,f=s.length,p;do{if(u>=f||u+f<=0)return 0;let m=l+u;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}p=s[m],p?.focus(c),u+=a}while(p!==i.activeElement);return t&6&&kQe(p)&&p.select(),2}function Cie(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function EQe(){return/Android/gi.test(window.navigator.userAgent)}function ZV(){return Cie()||EQe()}function Xp(e,t,n,r){let o=Ih(n);k.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function Eie(e,t,n,r){let o=Ih(n);k.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const WV=30;function Tie(e,t,n){let r=Ih(n),o=k.useCallback(function(a,l){if(a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of u)if(f!==null&&(f.contains(c)||a.composed&&a.composedPath().includes(f)))return;return!$D(c,DD.Loose)&&c.tabIndex!==-1&&a.preventDefault(),r.current(a,c)},[r,t]),i=k.useRef(null);Xp(e,"pointerdown",a=>{var l,c;ZV()||(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Xp(e,"pointerup",a=>{if(ZV()||!i.current)return;let l=i.current;return i.current=null,o(a,()=>l)},!0);let s=k.useRef({x:0,y:0});Xp(e,"touchstart",a=>{s.current.x=a.touches[0].clientX,s.current.y=a.touches[0].clientY},!0),Xp(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-s.current.x)>=WV||Math.abs(l.y-s.current.y)>=WV))return o(a,()=>zl(a.target)?a.target:null)},!0),Eie(e,"blur",a=>o(a,()=>UXe(window.document.activeElement)?window.document.activeElement:null),!0)}function zm(...e){return k.useMemo(()=>Rh(...e),[...e])}var TQe=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(TQe||{});const Vx={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},_Qe=200,KV=5;function AQe(e,{trigger:t,action:n,close:r,select:o}){let i=k.useRef(null),s=k.useRef(null),a=k.useRef(null);Xp(e&&t!==null,"pointerdown",l=>{ID(l?.target)&&t!=null&&t.contains(l.target)&&(s.current=l.x,a.current=l.y,i.current=l.timeStamp)}),Xp(e&&t!==null,"pointerup",l=>{var c,u;let f=i.current;if(f===null||(i.current=null,!zl(l.target))||Math.abs(l.x-((c=s.current)!=null?c:l.x))<KV&&Math.abs(l.y-((u=a.current)!=null?u:l.y))<KV)return;let p=n(l);switch(p.kind){case 0:return;case 1:{l.timeStamp-f>_Qe&&(o(p.target),r());break}case 2:{r();break}}},{capture:!0})}function _ie(e,t,n,r){let o=Ih(n);k.useEffect(()=>{e=e??window;function i(s){o.current(s)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function MQe(e,t){return k.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||t?.tagName==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function NQe(e){return k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function RQe(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...i){let s=t[o].call(n,...i);s&&(n=s,r.forEach(a=>a()))}}}function IQe(){let e;return{before({doc:t}){var n;let r=t.documentElement,o=(n=t.defaultView)!=null?n:window;e=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-o);n.style(r,"paddingRight",`${i}px`)}}}function OQe(){return Cie()?{before({doc:e,d:t,meta:n}){function r(o){return n.containers.flatMap(i=>i()).some(i=>i.contains(o))}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=xa();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let i=(o=window.scrollY)!=null?o:window.pageYOffset,s=null;t.addEventListener(e,"click",a=>{if(zl(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),u=e.querySelector(c);zl(u)&&!r(u)&&(s=u)}catch{}},!0),t.addEventListener(e,"touchstart",a=>{if(zl(a.target)&&HXe(a.target))if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;t.style(l,"overscrollBehavior","contain")}else t.style(a.target,"touchAction","none")}),t.addEventListener(e,"touchmove",a=>{if(zl(a.target)){if(aie(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function PQe(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function DQe(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let zf=RQe(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:xa(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:DQe(n)},o=[OQe(),IQe(),PQe()];o.forEach(({before:i})=>i?.(r)),o.forEach(({after:i})=>i?.(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});zf.subscribe(()=>{let e=zf.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&zf.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&zf.dispatch("TEARDOWN",n)}});function $Qe(e,t,n=()=>({containers:[]})){let r=NQe(zf),o=t?r.get(t):void 0,i=o?o.count>0:!1;return Sn(()=>{if(!(!t||!e))return zf.dispatch("PUSH",t,n),()=>zf.dispatch("POP",t,n)},[e,t]),i}function Aie(e,t,n=()=>[document.body]){let r=_v(e,"scroll-lock");$Qe(r,t,o=>{var i;return{containers:[...(i=o.containers)!=null?i:[],n]}})}function YV(e){return[e.screenX,e.screenY]}function jQe(){let e=k.useRef([-1,-1]);return{wasMoved(t){let n=YV(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=YV(t)}}}function LQe(e=0){let[t,n]=k.useState(e),r=k.useCallback(l=>n(l),[t]),o=k.useCallback(l=>n(c=>c|l),[t]),i=k.useCallback(l=>(t&l)===l,[t]),s=k.useCallback(l=>n(c=>c&~l),[n]),a=k.useCallback(l=>n(c=>c^l),[n]);return{flags:t,setFlag:r,addFlag:o,hasFlag:i,removeFlag:s,toggleFlag:a}}var zQe={},JV,XV;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((JV=process==null?void 0:zQe)==null?void 0:JV.NODE_ENV)==="test"&&typeof((XV=Element?.prototype)==null?void 0:XV.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var BQe=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(BQe||{});function Mie(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function Nie(e,t,n,r){let[o,i]=k.useState(n),{hasFlag:s,addFlag:a,removeFlag:l}=LQe(e&&o?3:0),c=k.useRef(!1),u=k.useRef(!1),f=kg();return Sn(()=>{var p;if(e){if(n&&i(!0),!t){n&&a(3);return}return(p=r?.start)==null||p.call(r,n),FQe(t,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){u.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var m;u.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(c.current=!1,l(7),n||i(!1),(m=r?.end)==null||m.call(r,n))}})}},[e,n,t,f]),e?[o,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function FQe(e,{prepare:t,run:n,done:r,inFlight:o}){let i=xa();return HQe(e,{prepare:t,inFlight:o}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(VQe(e,r))})}),i.dispose}function VQe(e,t){var n,r;let o=xa();if(!e)return o.dispose;let i=!1;o.add(()=>{i=!0});let s=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return s.length===0?(t(),o.dispose):(Promise.allSettled(s.map(a=>a.finished)).then(()=>{i||t()}),o.dispose)}function HQe(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function UQe(e,{container:t,accept:n,walk:r}){let o=k.useRef(n),i=k.useRef(r);k.useEffect(()=>{o.current=n,i.current=r},[n,r]),Sn(()=>{if(!t||!e)return;let s=Rh(t);if(!s)return;let a=o.current,l=i.current,c=Object.assign(f=>a(f),{acceptNode:a}),u=s.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,c,!1);for(;u.nextNode();)l(u.currentNode)},[t,e,o,i])}function jD(e,t){let n=k.useRef([]),r=lt(e);k.useEffect(()=>{let o=[...n.current];for(let[i,s]of t.entries())if(n.current[i]!==s){let a=r(t,o);return n.current=t,a}},[r,...t])}let Cg=k.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Cg.displayName="FloatingContext";let LD=k.createContext(null);LD.displayName="PlacementContext";function GQe(e){return k.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function qQe(){return k.useContext(Cg).setReference}function ZQe(){return k.useContext(Cg).getReferenceProps}function WQe(){let{getFloatingProps:e,slot:t}=k.useContext(Cg);return k.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function KQe(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=k.useContext(LD),n=k.useMemo(()=>e,[JSON.stringify(e,(o,i)=>{var s;return(s=i?.outerHTML)!=null?s:i})]);Sn(()=>{t?.(n??null)},[t,n]);let r=k.useContext(Cg);return k.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let QV=4;function YQe({children:e,enabled:t=!0}){let[n,r]=k.useState(null),[o,i]=k.useState(0),s=k.useRef(null),[a,l]=k.useState(null);JQe(a);let c=t&&n!==null&&a!==null,{to:u="bottom",gap:f=0,offset:p=0,padding:m=0,inner:y}=XQe(n,a),[b,w="center"]=u.split(" ");Sn(()=>{c&&i(0)},[c]);let{refs:S,floatingStyles:E,context:T}=kh({open:c,placement:b==="selection"?w==="center"?"bottom":`bottom-${w}`:w==="center"?`${b}`:`${b}-${w}`,strategy:"absolute",transform:!1,middleware:[Zi({mainAxis:b==="selection"?0:f,crossAxis:p}),au({padding:m}),b!=="selection"&&As({padding:m}),b==="selection"&&y?b2e({...y,padding:m,overflowRef:s,offset:o,minItemsVisible:QV,referenceOverflowThreshold:m,onFallbackChange(B){var G,V;if(!B)return;let W=T.elements.floating;if(!W)return;let K=parseFloat(getComputedStyle(W).scrollPaddingBottom)||0,F=Math.min(QV,W.childElementCount),q=0,H=0;for(let z of(V=(G=T.elements.floating)==null?void 0:G.childNodes)!=null?V:[])if(Rs(z)){let N=z.offsetTop,U=N+z.clientHeight+K,te=W.scrollTop,D=te+W.clientHeight;if(N>=te&&U<=D)F--;else{H=Math.max(0,Math.min(U,D)-Math.max(N,te)),q=z.clientHeight;break}}F>=1&&i(z=>{let N=q*F-H+K;return z>=N?z:N})}}):null,Sh({padding:m,apply({availableWidth:B,availableHeight:G,elements:V}){Object.assign(V.floating.style,{overflow:"auto",maxWidth:`${B}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${G}px)`})}})].filter(Boolean),whileElementsMounted:BC}),[A=b,M=w]=T.placement.split("-");b==="selection"&&(A="selection");let R=k.useMemo(()=>({anchor:[A,M].filter(Boolean).join(" ")}),[A,M]),O=v2e(T,{overflowRef:s,onChange:i}),{getReferenceProps:I,getFloatingProps:L}=a3([O]),$=lt(B=>{l(B),S.setFloating(B)});return k.createElement(LD.Provider,{value:r},k.createElement(Cg.Provider,{value:{setFloating:$,setReference:S.setReference,styles:E,getReferenceProps:I,getFloatingProps:L,slot:R}},e))}function JQe(e){Sn(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let o=parseInt(n);isNaN(o)||r!==o&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function XQe(e,t){var n,r,o;let i=wM((n=e?.gap)!=null?n:"var(--anchor-gap, 0)",t),s=wM((r=e?.offset)!=null?r:"var(--anchor-offset, 0)",t),a=wM((o=e?.padding)!=null?o:"var(--anchor-padding, 0)",t);return{...e,gap:i,offset:s,padding:a}}function wM(e,t,n=void 0){let r=kg(),o=lt((l,c)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[n,null];let u=eH(l,c);return[u,f=>{let p=Rie(l);{let m=p.map(y=>window.getComputedStyle(c).getPropertyValue(y));r.requestAnimationFrame(function y(){r.nextFrame(y);let b=!1;for(let[S,E]of p.entries()){let T=window.getComputedStyle(c).getPropertyValue(E);if(m[S]!==T){m[S]=T,b=!0;break}}if(!b)return;let w=eH(l,c);u!==w&&(f(w),u=w)})}return r.dispose}]}return[n,null]}),i=k.useMemo(()=>o(e,t)[0],[e,t]),[s=i,a]=k.useState();return Sn(()=>{let[l,c]=o(e,t);if(a(l),!!c)return c(a)},[e,t]),s}function Rie(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),o=t[1].slice(n+1).trim();return o?[r,...Rie(o)]:[r]}return[]}function eH(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let PE=k.createContext(null);PE.displayName="OpenClosedContext";var mi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(mi||{});function Av(){return k.useContext(PE)}function Iie({value:e,children:t}){return se.createElement(PE.Provider,{value:e},t)}function QQe({children:e}){return se.createElement(PE.Provider,{value:null},e)}function eet(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let nd=[];eet(()=>{function e(t){if(!zl(t.target)||t.target===document.body||nd[0]===t.target)return;let n=t.target;n=n.closest(Hk),nd.unshift(n??t.target),nd=nd.filter(r=>r!=null&&r.isConnected),nd.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function tet(e){throw new Error("Unexpected object: "+e)}var Vr=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Vr||{});function Hx(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),o=r??-1;switch(e.focus){case 0:{for(let i=0;i<n.length;++i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 1:{o===-1&&(o=n.length);for(let i=o-1;i>=0;--i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 2:{for(let i=o+1;i<n.length;++i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 3:{for(let i=n.length-1;i>=0;--i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 4:{for(let i=0;i<n.length;++i)if(t.resolveId(n[i],i,n)===e.id)return i;return r}case 5:return null;default:tet(e)}}var Oie=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Oie||{});function zD(e){let t=lt(e),n=k.useRef(!1);k.useEffect(()=>(n.current=!1,()=>{n.current=!0,RE(()=>{n.current&&t()})}),[t])}function net(){let e=typeof document>"u";return(t=>t.useSyncExternalStore)(Bb)(()=>()=>{},()=>!1,()=>!e)}function Mv(){let e=net(),[t,n]=k.useState(ql.isHandoffComplete);return t&&ql.isHandoffComplete===!1&&n(!1),k.useEffect(()=>{t!==!0&&n(!0)},[t]),k.useEffect(()=>ql.handoff(),[]),e?!1:t}let Pie=k.createContext(!1);function ret(){return k.useContext(Pie)}function tH(e){return se.createElement(Pie.Provider,{value:e.force},e.children)}function oet(e){let t=ret(),n=k.useContext($ie),[r,o]=k.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(ql.isServer)return null;let s=e?.getElementById("headlessui-portal-root");if(s)return s;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return k.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),k.useEffect(()=>{t||n!==null&&o(n.current)},[n,o,t]),r}let Die=k.Fragment,iet=Er(function(e,t){let{ownerDocument:n=null,...r}=e,o=k.useRef(null),i=Si(KXe(m=>{o.current=m}),t),s=zm(o),a=n??s,l=oet(a),[c]=k.useState(()=>{var m;return ql.isServer?null:(m=a?.createElement("div"))!=null?m:null}),u=k.useContext(YI),f=Mv();Sn(()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))},[l,c]),Sn(()=>{if(c&&u)return u.register(c)},[u,c]),zD(()=>{var m;!l||!c||(ID(c)&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&((m=l.parentElement)==null||m.removeChild(l)))});let p=Wr();return f?!l||!c?null:Zr.createPortal(p({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:Die,name:"Portal"}),c):null});function set(e,t){let n=Si(t),{enabled:r=!0,ownerDocument:o,...i}=e,s=Wr();return r?se.createElement(iet,{...i,ownerDocument:o,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:Die,name:"Portal"})}let aet=k.Fragment,$ie=k.createContext(null);function cet(e,t){let{target:n,...r}=e,o={ref:Si(t)},i=Wr();return se.createElement($ie.Provider,{value:n},i({ourProps:o,theirProps:r,defaultTag:aet,name:"Popover.Group"}))}let YI=k.createContext(null);function uet(){let e=k.useContext(YI),t=k.useRef([]),n=lt(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=lt(i=>{let s=t.current.indexOf(i);s!==-1&&t.current.splice(s,1),e&&e.unregister(i)}),o=k.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,k.useMemo(()=>function({children:i}){return se.createElement(YI.Provider,{value:o},i)},[o])]}let det=Er(set),jie=Er(cet),Lie=Object.assign(det,{Group:jie});function fet(e,t=typeof document<"u"?document.defaultView:null,n){let r=_v(e,"escape");_ie(t,"keydown",o=>{r&&(o.defaultPrevented||o.key===vo.Escape&&n(o))})}function het(){var e;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=k.useState((e=t?.matches)!=null?e:!1);return Sn(()=>{if(!t)return;function o(i){r(i.matches)}return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),n}function pet({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=zm(n),o=lt(()=>{var i,s;let a=[];for(let l of e)l!==null&&(Kc(l)?a.push(l):"current"in l&&Kc(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(i=r?.querySelectorAll("html > *, body > *"))!=null?i:[])l!==document.body&&l!==document.head&&Kc(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((s=n?.getRootNode())==null?void 0:s.host))||a.some(c=>l.contains(c))||a.push(l));return a});return{resolveContainers:o,contains:lt(i=>o().some(s=>s.contains(i)))}}let zie=k.createContext(null);function nH({children:e,node:t}){let[n,r]=k.useState(null),o=Bie(t??n);return se.createElement(zie.Provider,{value:o},e,o===null&&se.createElement(ZI,{features:Vk.Hidden,ref:i=>{var s,a;if(i){for(let l of(a=(s=Rh(i))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&Kc(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function Bie(e=null){var t;return(t=k.useContext(zie))!=null?t:e}function BD(){let e=k.useRef(!1);return Sn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var qy=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(qy||{});function met(){let e=k.useRef(0);return Eie(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Fie(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)Kc(n.current)&&t.add(n.current);return t}let get="div";var Tf=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Tf||{});function yet(e,t){let n=k.useRef(null),r=Si(n,t),{initialFocus:o,initialFocusFallback:i,containers:s,features:a=15,...l}=e;Mv()||(a=0);let c=zm(n);wet(a,{ownerDocument:c});let u=ket(a,{ownerDocument:c,container:n,initialFocus:o,initialFocusFallback:i});Cet(a,{ownerDocument:c,container:n,containers:s,previousActiveElement:u});let f=met(),p=lt(E=>{if(!Rs(n.current))return;let T=n.current;(A=>A())(()=>{nl(f.current,{[qy.Forwards]:()=>{pm(T,Va.First,{skipElements:[E.relatedTarget,i]})},[qy.Backwards]:()=>{pm(T,Va.Last,{skipElements:[E.relatedTarget,i]})}})})}),m=_v(!!(a&2),"focus-trap#tab-lock"),y=kg(),b=k.useRef(!1),w={ref:r,onKeyDown(E){E.key=="Tab"&&(b.current=!0,y.requestAnimationFrame(()=>{b.current=!1}))},onBlur(E){if(!(a&4))return;let T=Fie(s);Rs(n.current)&&T.add(n.current);let A=E.relatedTarget;zl(A)&&A.dataset.headlessuiFocusGuard!=="true"&&(Vie(T,A)||(b.current?pm(n.current,nl(f.current,{[qy.Forwards]:()=>Va.Next,[qy.Backwards]:()=>Va.Previous})|Va.WrapAround,{relativeTo:E.target}):zl(E.target)&&Zl(E.target)))}},S=Wr();return se.createElement(se.Fragment,null,m&&se.createElement(ZI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Vk.Focusable}),S({ourProps:w,theirProps:l,defaultTag:get,name:"FocusTrap"}),m&&se.createElement(ZI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Vk.Focusable}))}let bet=Er(yet),vet=Object.assign(bet,{features:Tf});function xet(e=!0){let t=k.useRef(nd.slice());return jD(([n],[r])=>{r===!0&&n===!1&&RE(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=nd.slice())},[e,nd,t]),lt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function wet(e,{ownerDocument:t}){let n=!!(e&8),r=xet(n);jD(()=>{n||t?.activeElement===t?.body&&Zl(r())},[n]),zD(()=>{n&&Zl(r())})}function ket(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:o}){let i=k.useRef(null),s=_v(!!(e&1),"focus-trap#initial-focus"),a=BD();return jD(()=>{if(e===0)return;if(!s){o!=null&&o.current&&Zl(o.current);return}let l=n.current;l&&RE(()=>{if(!a.current)return;let c=t?.activeElement;if(r!=null&&r.current){if(r?.current===c){i.current=c;return}}else if(l.contains(c)){i.current=c;return}if(r!=null&&r.current)Zl(r.current);else{if(e&16){if(pm(l,Va.First|Va.AutoFocus)!==KI.Error)return}else if(pm(l,Va.First)!==KI.Error)return;if(o!=null&&o.current&&(Zl(o.current),t?.activeElement===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[o,s,e]),i}function Cet(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:o}){let i=BD(),s=!!(e&4);_ie(t?.defaultView,"focus",a=>{if(!s||!i.current)return;let l=Fie(r);Rs(n.current)&&l.add(n.current);let c=o.current;if(!c)return;let u=a.target;Rs(u)?Vie(l,u)?(o.current=u,Zl(u)):(a.preventDefault(),a.stopPropagation(),Zl(c)):Zl(o.current)},!0)}function Vie(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Hie(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:Gie)!==k.Fragment||se.Children.count(e.children)===1}let DE=k.createContext(null);DE.displayName="TransitionContext";var Eet=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Eet||{});function Tet(){let e=k.useContext(DE);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function _et(){let e=k.useContext($E);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let $E=k.createContext(null);$E.displayName="NestingContext";function jE(e){return"children"in e?jE(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Uie(e,t){let n=Ih(e),r=k.useRef([]),o=BD(),i=kg(),s=lt((m,y=ld.Hidden)=>{let b=r.current.findIndex(({el:w})=>w===m);b!==-1&&(nl(y,{[ld.Unmount](){r.current.splice(b,1)},[ld.Hidden](){r.current[b].state="hidden"}}),i.microTask(()=>{var w;!jE(r)&&o.current&&((w=n.current)==null||w.call(n))}))}),a=lt(m=>{let y=r.current.find(({el:b})=>b===m);return y?y.state!=="visible"&&(y.state="visible"):r.current.push({el:m,state:"visible"}),()=>s(m,ld.Unmount)}),l=k.useRef([]),c=k.useRef(Promise.resolve()),u=k.useRef({enter:[],leave:[]}),f=lt((m,y,b)=>{l.current.splice(0),t&&(t.chains.current[y]=t.chains.current[y].filter(([w])=>w!==m)),t?.chains.current[y].push([m,new Promise(w=>{l.current.push(w)})]),t?.chains.current[y].push([m,new Promise(w=>{Promise.all(u.current[y].map(([S,E])=>E)).then(()=>w())})]),y==="enter"?c.current=c.current.then(()=>t?.wait.current).then(()=>b(y)):b(y)}),p=lt((m,y,b)=>{Promise.all(u.current[y].splice(0).map(([w,S])=>S)).then(()=>{var w;(w=l.current.shift())==null||w()}).then(()=>b(y))});return k.useMemo(()=>({children:r,register:a,unregister:s,onStart:f,onStop:p,wait:c,chains:u}),[a,s,r,f,p,u,c])}let Gie=k.Fragment,qie=Lm.RenderStrategy;function Aet(e,t){var n,r;let{transition:o=!0,beforeEnter:i,afterEnter:s,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:f,entered:p,leave:m,leaveFrom:y,leaveTo:b,...w}=e,[S,E]=k.useState(null),T=k.useRef(null),A=Hie(e),M=Si(...A?[T,t,E]:t===null?[]:[t]),R=(n=w.unmount)==null||n?ld.Unmount:ld.Hidden,{show:O,appear:I,initial:L}=Tet(),[$,B]=k.useState(O?"visible":"hidden"),G=_et(),{register:V,unregister:W}=G;Sn(()=>V(T),[V,T]),Sn(()=>{if(R===ld.Hidden&&T.current){if(O&&$!=="visible"){B("visible");return}return nl($,{hidden:()=>W(T),visible:()=>V(T)})}},[$,T,V,W,O,R]);let K=Mv();Sn(()=>{if(A&&K&&$==="visible"&&T.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[T,$,K,A]);let F=L&&!I,q=I&&O&&L,H=k.useRef(!1),z=Uie(()=>{H.current||(B("hidden"),W(T))},G),N=lt(ie=>{H.current=!0;let ye=ie?"enter":"leave";z.onStart(T,ye,Re=>{Re==="enter"?i?.():Re==="leave"&&a?.()})}),U=lt(ie=>{let ye=ie?"enter":"leave";H.current=!1,z.onStop(T,ye,Re=>{Re==="enter"?s?.():Re==="leave"&&l?.()}),ye==="leave"&&!jE(z)&&(B("hidden"),W(T))});k.useEffect(()=>{A&&o||(N(O),U(O))},[O,A,o]);let te=!(!o||!A||!K||F),[,D]=Nie(te,S,O,{start:N,end:U}),ce=vf({ref:M,className:((r=qI(w.className,q&&c,q&&u,D.enter&&c,D.enter&&D.closed&&u,D.enter&&!D.closed&&f,D.leave&&m,D.leave&&!D.closed&&y,D.leave&&D.closed&&b,!D.transition&&O&&p))==null?void 0:r.trim())||void 0,...Mie(D)}),ae=0;$==="visible"&&(ae|=mi.Open),$==="hidden"&&(ae|=mi.Closed),O&&$==="hidden"&&(ae|=mi.Opening),!O&&$==="visible"&&(ae|=mi.Closing);let pe=Wr();return se.createElement($E.Provider,{value:z},se.createElement(Iie,{value:ae},pe({ourProps:ce,theirProps:w,defaultTag:Gie,features:qie,visible:$==="visible",name:"Transition.Child"})))}function Met(e,t){let{show:n,appear:r=!1,unmount:o=!0,...i}=e,s=k.useRef(null),a=Hie(e),l=Si(...a?[s,t]:t===null?[]:[t]);Mv();let c=Av();if(n===void 0&&c!==null&&(n=(c&mi.Open)===mi.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=k.useState(n?"visible":"hidden"),p=Uie(()=>{n||f("hidden")}),[m,y]=k.useState(!0),b=k.useRef([n]);Sn(()=>{m!==!1&&b.current[b.current.length-1]!==n&&(b.current.push(n),y(!1))},[b,n]);let w=k.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);Sn(()=>{n?f("visible"):!jE(p)&&s.current!==null&&f("hidden")},[n,p]);let S={unmount:o},E=lt(()=>{var M;m&&y(!1),(M=e.beforeEnter)==null||M.call(e)}),T=lt(()=>{var M;m&&y(!1),(M=e.beforeLeave)==null||M.call(e)}),A=Wr();return se.createElement($E.Provider,{value:p},se.createElement(DE.Provider,{value:w},A({ourProps:{...S,as:k.Fragment,children:se.createElement(Zie,{ref:l,...S,...i,beforeEnter:E,beforeLeave:T})},theirProps:{},defaultTag:k.Fragment,features:qie,visible:u==="visible",name:"Transition"})))}function Net(e,t){let n=k.useContext(DE)!==null,r=Av()!==null;return se.createElement(se.Fragment,null,!n&&r?se.createElement(JI,{ref:t,...e}):se.createElement(Zie,{ref:t,...e}))}let JI=Er(Met),Zie=Er(Aet),FD=Er(Net),Wie=Object.assign(JI,{Child:FD,Root:JI});var Ret=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ret||{}),Iet=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Iet||{});let Oet={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},VD=k.createContext(null);VD.displayName="DialogContext";function LE(e){let t=k.useContext(VD);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,LE),n}return t}function Pet(e,t){return nl(t.type,Oet,e,t)}let rH=Er(function(e,t){let n=k.useId(),{id:r=`headlessui-dialog-${n}`,open:o,onClose:i,initialFocus:s,role:a="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:u=!1,...f}=e,p=k.useRef(!1);a=(function(){return a==="dialog"||a==="alertdialog"?a:(p.current||(p.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let m=Av();o===void 0&&m!==null&&(o=(m&mi.Open)===mi.Open);let y=k.useRef(null),b=Si(y,t),w=zm(y),S=o?0:1,[E,T]=k.useReducer(Pet,{titleId:null,descriptionId:null,panelRef:k.createRef()}),A=lt(()=>i(!1)),M=lt(D=>T({type:0,id:D})),R=Mv()?S===0:!1,[O,I]=uet(),L={get current(){var D;return(D=E.panelRef.current)!=null?D:y.current}},$=Bie(),{resolveContainers:B}=pet({mainTreeNode:$,portals:O,defaultContainers:[L]}),G=m!==null?(m&mi.Closing)===mi.Closing:!1;vie(c||G?!1:R,{allowed:lt(()=>{var D,ce;return[(ce=(D=y.current)==null?void 0:D.closest("[data-headlessui-portal]"))!=null?ce:null]}),disallowed:lt(()=>{var D;return[(D=$?.closest("body > *:not(#headlessui-portal-root)"))!=null?D:null]})});let V=OE.get(null);Sn(()=>{if(R)return V.actions.push(r),()=>V.actions.pop(r)},[V,r,R]);let W=Za(V,k.useCallback(D=>V.selectors.isTop(D,r),[V,r]));Tie(W,B,D=>{D.preventDefault(),A()}),fet(W,w?.defaultView,D=>{D.preventDefault(),D.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),A()}),Aie(c||G?!1:R,w,B),xie(R,y,A);let[K,F]=die(),q=k.useMemo(()=>[{dialogState:S,close:A,setTitleId:M,unmount:u},E],[S,E,A,M,u]),H=k.useMemo(()=>({open:S===0}),[S]),z={ref:b,id:r,role:a,tabIndex:-1,"aria-modal":c?void 0:S===0?!0:void 0,"aria-labelledby":E.titleId,"aria-describedby":K,unmount:u},N=!het(),U=Tf.None;R&&!c&&(U|=Tf.RestoreFocus,U|=Tf.TabLock,l&&(U|=Tf.AutoFocus),N&&(U|=Tf.InitialFocus));let te=Wr();return se.createElement(QQe,null,se.createElement(tH,{force:!0},se.createElement(Lie,null,se.createElement(VD.Provider,{value:q},se.createElement(jie,{target:y},se.createElement(tH,{force:!1},se.createElement(F,{slot:H},se.createElement(I,null,se.createElement(vet,{initialFocus:s,initialFocusFallback:y,containers:B,features:U},se.createElement(oQe,{value:A},te({ourProps:z,theirProps:f,slot:H,defaultTag:Det,features:$et,visible:S===0,name:"Dialog"})))))))))))}),Det="div",$et=Lm.RenderStrategy|Lm.Static;function jet(e,t){let{transition:n=!1,open:r,...o}=e,i=Av(),s=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!s&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!o.static?se.createElement(nH,null,se.createElement(Wie,{show:r,transition:n,unmount:o.unmount},se.createElement(rH,{ref:t,...o}))):se.createElement(nH,null,se.createElement(rH,{ref:t,open:r,...o}))}let Let="div";function zet(e,t){let n=k.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:o=!1,...i}=e,[{dialogState:s,unmount:a},l]=LE("Dialog.Panel"),c=Si(t,l.panelRef),u=k.useMemo(()=>({open:s===0}),[s]),f=lt(w=>{w.stopPropagation()}),p={ref:c,id:r,onClick:f},m=o?FD:k.Fragment,y=o?{unmount:a}:{},b=Wr();return se.createElement(m,{...y},b({ourProps:p,theirProps:i,slot:u,defaultTag:Let,name:"Dialog.Panel"}))}let Bet="div";function Fet(e,t){let{transition:n=!1,...r}=e,[{dialogState:o,unmount:i}]=LE("Dialog.Backdrop"),s=k.useMemo(()=>({open:o===0}),[o]),a={ref:t,"aria-hidden":!0},l=n?FD:k.Fragment,c=n?{unmount:i}:{},u=Wr();return se.createElement(l,{...c},u({ourProps:a,theirProps:r,slot:s,defaultTag:Bet,name:"Dialog.Backdrop"}))}let Vet="h2";function Het(e,t){let n=k.useId(),{id:r=`headlessui-dialog-title-${n}`,...o}=e,[{dialogState:i,setTitleId:s}]=LE("Dialog.Title"),a=Si(t);k.useEffect(()=>(s(r),()=>s(null)),[r,s]);let l=k.useMemo(()=>({open:i===0}),[i]),c={ref:a,id:r};return Wr()({ourProps:c,theirProps:o,slot:l,defaultTag:Vet,name:"Dialog.Title"})}let Uet=Er(jet),Jf=Er(zet);Er(Fet);let mm=Er(Het),gm=Object.assign(Uet,{Panel:Jf,Title:mm,Description:hm});function Get(e,t){let n=k.useRef({left:0,top:0});if(Sn(()=>{if(!t)return;let o=t.getBoundingClientRect();o&&(n.current=o)},[e,t]),t==null||!e||t===document.activeElement)return!1;let r=t.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let oH=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function iH(e){var t,n;let r=(t=e.innerText)!=null?t:"",o=e.cloneNode(!0);if(!Rs(o))return r;let i=!1;for(let a of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),i=!0;let s=i?(n=o.innerText)!=null?n:"":r;return oH.test(s)&&(s=s.replace(oH,"")),s}function qet(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(o=>{let i=document.getElementById(o);if(i){let s=i.getAttribute("aria-label");return typeof s=="string"?s.trim():iH(i).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return iH(e).trim()}function Zet(e){let t=k.useRef(""),n=k.useRef("");return lt(()=>{let r=e.current;if(!r)return"";let o=r.innerText;if(t.current===o)return n.current;let i=qet(r).trim().toLowerCase();return t.current=o,n.current=i,i})}var Wet=Object.defineProperty,Ket=(e,t,n)=>t in e?Wet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sH=(e,t,n)=>(Ket(e,typeof t!="symbol"?t+"":t,n),n),Io=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Io||{}),Uk=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Uk||{}),An=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e))(An||{});function aH(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=kie(t(e.items.slice()),i=>i.dataRef.current.domRef.current),o=n?r.indexOf(n):null;return o===-1&&(o=null),{items:r,activeItemIndex:o}}let Yet={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,pendingFocus:{focus:Vr.Nothing},menuState:1}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0}},2:(e,t)=>{var n,r,o,i,s;if(e.menuState===1)return e;let a={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===Vr.Nothing)return{...a,activeItemIndex:null};if(t.focus===Vr.Specific)return{...a,activeItemIndex:e.items.findIndex(u=>u.id===t.id)};if(t.focus===Vr.Previous){let u=e.activeItemIndex;if(u!==null){let f=e.items[u].dataRef.current.domRef,p=Hx(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(p!==null){let m=e.items[p].dataRef.current.domRef;if(((r=f.current)==null?void 0:r.previousElementSibling)===m.current||((o=m.current)==null?void 0:o.previousElementSibling)===null)return{...a,activeItemIndex:p}}}}else if(t.focus===Vr.Next){let u=e.activeItemIndex;if(u!==null){let f=e.items[u].dataRef.current.domRef,p=Hx(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(p!==null){let m=e.items[p].dataRef.current.domRef;if(((i=f.current)==null?void 0:i.nextElementSibling)===m.current||((s=m.current)==null?void 0:s.nextElementSibling)===null)return{...a,activeItemIndex:p}}}}let l=aH(e),c=Hx(t,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...a,...l,activeItemIndex:c}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(s=>{var a;return((a=s.dataRef.current.textValue)==null?void 0:a.startsWith(r))&&!s.dataRef.current.disabled}),i=o?e.items.indexOf(o):-1;return i===-1||i===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:i,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(o=>o)),r=e.activeItemIndex;return e.pendingFocus.focus!==Vr.Nothing&&(r=Hx(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:Vr.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],o=new Set(t.items);for(let[i,s]of n.entries())if(o.has(s.id)&&(r.push(i),o.delete(s.id),o.size===0))break;if(r.length>0){n=n.slice();for(let i of r.reverse())n.splice(i,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...aH(e),pendingShouldSort:!1}:e};class HD extends mie{constructor(t){super(t),sH(this,"actions",{registerItem:FV(()=>{let n=[],r=new Set;return[(o,i)=>{r.has(i)||(r.add(i),n.push({id:o,dataRef:i}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:FV(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),sH(this,"selectors",{activeDescendantId(n){var r;let o=n.activeItemIndex,i=n.items;return o===null||(r=i[o])==null?void 0:r.id},isActive(n,r){var o;let i=n.activeItemIndex,s=n.items;return i!==null?((o=s[i])==null?void 0:o.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=OE.get(null);this.disposables.add(r.on(yie.Push,o=>{!r.selectors.isTop(o,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}}static new({id:t,__demoMode:n=!1}){return new HD({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Vr.Nothing}})}reduce(t,n){return nl(n.type,Yet,t,n)}}const Kie=k.createContext(null);function UD(e){let t=k.useContext(Kie);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Yie),n}return t}function Yie({id:e,__demoMode:t=!1}){let n=k.useMemo(()=>HD.new({id:e,__demoMode:t}),[]);return zD(()=>n.dispose()),n}let Jet=k.Fragment;function Xet(e,t){let n=k.useId(),{__demoMode:r=!1,...o}=e,i=Yie({id:n,__demoMode:r}),[s,a,l]=Za(i,w=>[w.menuState,w.itemsElement,w.buttonElement]),c=Si(t),u=OE.get(null),f=Za(u,k.useCallback(w=>u.selectors.isTop(w,n),[u,n]));Tie(f,[l,a],(w,S)=>{var E;i.send({type:An.CloseMenu}),$D(S,DD.Loose)||(w.preventDefault(),(E=i.state.buttonElement)==null||E.focus())});let p=lt(()=>{i.send({type:An.CloseMenu})}),m=k.useMemo(()=>({open:s===Io.Open,close:p}),[s,p]),y={ref:c},b=Wr();return se.createElement(YQe,null,se.createElement(Kie.Provider,{value:i},se.createElement(Iie,{value:nl(s,{[Io.Open]:mi.Open,[Io.Closed]:mi.Closed})},b({ourProps:y,theirProps:o,slot:m,defaultTag:Jet,name:"Menu"}))))}let Qet="button";function ett(e,t){let n=UD("Menu.Button"),r=k.useId(),{id:o=`headlessui-menu-button-${r}`,disabled:i=!1,autoFocus:s=!1,...a}=e,l=k.useRef(null),c=ZQe(),u=Si(t,l,qQe(),lt(V=>n.send({type:An.SetButtonElement,element:V}))),f=lt(V=>{switch(V.key){case vo.Space:case vo.Enter:case vo.ArrowDown:V.preventDefault(),V.stopPropagation(),n.send({type:An.OpenMenu,focus:{focus:Vr.First}});break;case vo.ArrowUp:V.preventDefault(),V.stopPropagation(),n.send({type:An.OpenMenu,focus:{focus:Vr.Last}});break}}),p=lt(V=>{switch(V.key){case vo.Space:V.preventDefault();break}}),[m,y,b]=Za(n,V=>[V.menuState,V.buttonElement,V.itemsElement]),w=m===Io.Open;AQe(w,{trigger:y,action:k.useCallback(V=>{if(y!=null&&y.contains(V.target))return Vx.Ignore;let W=V.target.closest('[role="menuitem"]:not([data-disabled])');return Rs(W)?Vx.Select(W):b!=null&&b.contains(V.target)?Vx.Ignore:Vx.Close},[y,b]),close:k.useCallback(()=>n.send({type:An.CloseMenu}),[]),select:k.useCallback(V=>V.click(),[])});let S=lt(V=>{var W;if(V.button===Oie.Left){if(ZXe(V.currentTarget))return V.preventDefault();i||(m===Io.Open?(Zr.flushSync(()=>n.send({type:An.CloseMenu})),(W=l.current)==null||W.focus({preventScroll:!0})):(V.preventDefault(),n.send({type:An.OpenMenu,focus:{focus:Vr.Nothing},trigger:Uk.Pointer})))}}),E=k.useRef(null),T=lt(V=>{E.current=V.pointerType,V.pointerType==="mouse"&&S(V)}),A=lt(V=>{E.current!=="mouse"&&S(V)}),{isFocusVisible:M,focusProps:R}=_Xe({autoFocus:s}),{isHovered:O,hoverProps:I}=TXe({isDisabled:i}),{pressed:L,pressProps:$}=OXe({disabled:i}),B=k.useMemo(()=>({open:m===Io.Open,active:L||m===Io.Open,disabled:i,hover:O,focus:M,autofocus:s}),[m,O,M,L,i,s]),G=sie(c(),{ref:u,id:o,type:MQe(e,l.current),"aria-haspopup":"menu","aria-controls":b?.id,"aria-expanded":m===Io.Open,disabled:i||void 0,autoFocus:s,onKeyDown:f,onKeyUp:p,onPointerDown:T,onClick:A},R,I,$);return Wr()({ourProps:G,theirProps:a,slot:B,defaultTag:Qet,name:"Menu.Button"})}let ttt="div",ntt=Lm.RenderStrategy|Lm.Static;function rtt(e,t){let n=k.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:o,portal:i=!1,modal:s=!0,transition:a=!1,...l}=e,c=GQe(o),u=UD("Menu.Items"),[f,p]=KQe(c),m=WQe(),[y,b]=k.useState(null),w=Si(t,c?f:null,lt(z=>u.send({type:An.SetItemsElement,element:z})),b),[S,E]=Za(u,z=>[z.menuState,z.buttonElement]),T=zm(E),A=zm(y);c&&(i=!0);let M=Av(),[R,O]=Nie(a,y,M!==null?(M&mi.Open)===mi.Open:S===Io.Open);xie(R,E,()=>{u.send({type:An.CloseMenu})});let I=Za(u,z=>z.__demoMode),L=I?!1:s&&S===Io.Open;Aie(L,A);let $=I?!1:s&&S===Io.Open;vie($,{allowed:k.useCallback(()=>[E,y],[E,y])});let B=S!==Io.Open,G=Get(B,E)?!1:R;k.useEffect(()=>{let z=y;z&&S===Io.Open&&z!==A?.activeElement&&z.focus({preventScroll:!0})},[S,y,A]),UQe(S===Io.Open,{container:y,accept(z){return z.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:z.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(z){z.setAttribute("role","none")}});let V=kg(),W=lt(z=>{var N,U,te;switch(V.dispose(),z.key){case vo.Space:if(u.state.searchQuery!=="")return z.preventDefault(),z.stopPropagation(),u.send({type:An.Search,value:z.key});case vo.Enter:if(z.preventDefault(),z.stopPropagation(),u.state.activeItemIndex!==null){let{dataRef:D}=u.state.items[u.state.activeItemIndex];(U=(N=D.current)==null?void 0:N.domRef.current)==null||U.click()}u.send({type:An.CloseMenu}),Sie(u.state.buttonElement);break;case vo.ArrowDown:return z.preventDefault(),z.stopPropagation(),u.send({type:An.GoToItem,focus:Vr.Next});case vo.ArrowUp:return z.preventDefault(),z.stopPropagation(),u.send({type:An.GoToItem,focus:Vr.Previous});case vo.Home:case vo.PageUp:return z.preventDefault(),z.stopPropagation(),u.send({type:An.GoToItem,focus:Vr.First});case vo.End:case vo.PageDown:return z.preventDefault(),z.stopPropagation(),u.send({type:An.GoToItem,focus:Vr.Last});case vo.Escape:z.preventDefault(),z.stopPropagation(),Zr.flushSync(()=>u.send({type:An.CloseMenu})),(te=u.state.buttonElement)==null||te.focus({preventScroll:!0});break;case vo.Tab:z.preventDefault(),z.stopPropagation(),Zr.flushSync(()=>u.send({type:An.CloseMenu})),CQe(u.state.buttonElement,z.shiftKey?Va.Previous:Va.Next);break;default:z.key.length===1&&(u.send({type:An.Search,value:z.key}),V.setTimeout(()=>u.send({type:An.ClearSearch}),350));break}}),K=lt(z=>{switch(z.key){case vo.Space:z.preventDefault();break}}),F=k.useMemo(()=>({open:S===Io.Open}),[S]),q=sie(c?m():{},{"aria-activedescendant":Za(u,u.selectors.activeDescendantId),"aria-labelledby":Za(u,z=>{var N;return(N=z.buttonElement)==null?void 0:N.id}),id:r,onKeyDown:W,onKeyUp:K,role:"menu",tabIndex:S===Io.Open?0:void 0,ref:w,style:{...l.style,...p,"--button-width":sQe(E,!0).width},...Mie(O)}),H=Wr();return se.createElement(Lie,{enabled:i?e.static||R:!1,ownerDocument:T},H({ourProps:q,theirProps:l,slot:F,defaultTag:ttt,features:ntt,visible:G,name:"Menu.Items"}))}let ott=k.Fragment;function itt(e,t){let n=k.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:o=!1,...i}=e,s=UD("Menu.Item"),a=Za(s,B=>s.selectors.isActive(B,r)),l=k.useRef(null),c=Si(t,l),u=Za(s,B=>s.selectors.shouldScrollIntoView(B,r));Sn(()=>{if(u)return xa().requestAnimationFrame(()=>{var B,G;(G=(B=l.current)==null?void 0:B.scrollIntoView)==null||G.call(B,{block:"nearest"})})},[u,l]);let f=Zet(l),p=k.useRef({disabled:o,domRef:l,get textValue(){return f()}});Sn(()=>{p.current.disabled=o},[p,o]),Sn(()=>(s.actions.registerItem(r,p),()=>s.actions.unregisterItem(r)),[p,r]);let m=lt(()=>{s.send({type:An.CloseMenu})}),y=lt(B=>{if(o)return B.preventDefault();s.send({type:An.CloseMenu}),Sie(s.state.buttonElement)}),b=lt(()=>{if(o)return s.send({type:An.GoToItem,focus:Vr.Nothing});s.send({type:An.GoToItem,focus:Vr.Specific,id:r})}),w=jQe(),S=lt(B=>w.update(B)),E=lt(B=>{w.wasMoved(B)&&(o||a||s.send({type:An.GoToItem,focus:Vr.Specific,id:r,trigger:Uk.Pointer}))}),T=lt(B=>{w.wasMoved(B)&&(o||a&&s.state.activationTrigger===Uk.Pointer&&s.send({type:An.GoToItem,focus:Vr.Nothing}))}),[A,M]=fie(),[R,O]=die(),I=k.useMemo(()=>({active:a,focus:a,disabled:o,close:m}),[a,o,m]),L={id:r,ref:c,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-labelledby":A,"aria-describedby":R,disabled:void 0,onClick:y,onFocus:b,onPointerEnter:S,onMouseEnter:S,onPointerMove:E,onMouseMove:E,onPointerLeave:T,onMouseLeave:T},$=Wr();return se.createElement(M,null,se.createElement(O,null,$({ourProps:L,theirProps:i,slot:I,defaultTag:ott,name:"Menu.Item"})))}let stt="div";function att(e,t){let[n,r]=fie(),o=e,i={ref:t,"aria-labelledby":n,role:"group"},s=Wr();return se.createElement(r,null,s({ourProps:i,theirProps:o,slot:{},defaultTag:stt,name:"Menu.Section"}))}let ltt="header";function ctt(e,t){let n=k.useId(),{id:r=`headlessui-menu-heading-${n}`,...o}=e,i=PD();Sn(()=>i.register(r),[r,i.register]);let s={id:r,ref:t,role:"presentation",...i.props};return Wr()({ourProps:s,theirProps:o,slot:{},defaultTag:ltt,name:"Menu.Heading"})}let utt="div";function dtt(e,t){let n=e,r={ref:t,role:"separator"};return Wr()({ourProps:r,theirProps:n,slot:{},defaultTag:utt,name:"Menu.Separator"})}let ftt=Er(Xet),Jie=Er(ett),Xie=Er(rtt),Zy=Er(itt),htt=Er(att),ptt=Er(ctt),mtt=Er(dtt),gtt=Object.assign(ftt,{Button:Jie,Items:Xie,Item:Zy,Section:htt,Heading:ptt,Separator:mtt});function lH(e){const t=ht.c(24);let n,r,o,i,s,a,l,c;t[0]!==e?({text:l,duration:o,transition:c,wave:i,className:n,color:s,shimmeringColor:a,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a,t[7]=l,t[8]=c):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6],l=t[7],c=t[8]);const u=o===void 0?1:o,f=i===void 0?!1:i,p=s===void 0?"var(--color-neutral-500)":s,m=a===void 0?"var(--color-neutral-300)":a;let y;t[9]!==n?(y=vg("relative inline-block [perspective:500px]",n),t[9]=n,t[10]=y):y=t[10];let b;t[11]!==p||t[12]!==m?(b={"--shimmering-color":m,"--color":p,color:"var(--color)"},t[11]=p,t[12]=m,t[13]=b):b=t[13];const w=b;let S;t[14]!==u||t[15]!==l||t[16]!==c||t[17]!==f?(S=l?.split("")?.map((T,A)=>v.jsx(Wn.span,{className:"inline-block whitespace-pre [transform-style:preserve-3d]",initial:{...f?{scale:1,rotateY:0}:{},color:"var(--color)"},animate:{...f?{x:[0,5,0],y:[0,-5,0],scale:[1,1.1,1],rotateY:[0,15,0]}:{},color:["var(--color)","var(--shimmering-color)","var(--color)"]},transition:{duration:u,repeat:1/0,repeatType:"loop",repeatDelay:l.length*.05,delay:A*u/l.length,ease:"easeInOut",...c},children:T},A)),t[14]=u,t[15]=l,t[16]=c,t[17]=f,t[18]=S):S=t[18];let E;return t[19]!==r||t[20]!==y||t[21]!==w||t[22]!==S?(E=v.jsx(Wn.span,{className:y,style:w,...r,children:S}),t[19]=r,t[20]=y,t[21]=w,t[22]=S,t[23]=E):E=t[23],E}const ytt=e=>{const t=ht.c(4),{isRunning:n}=e,r=k.useRef(null),o=k.useRef(void 0),i=k.useRef(0);let s,a;t[0]!==n?(s=()=>{const c=r.current;if(!c)return;const u=c.getContext("2d");if(!u)return;let f=0,p=0;const m=new Map,y=S=>{if(!m.has(S)){const E=p*.08+Math.random()*p*.12;m.set(S,E)}return m.get(S)},b=new ResizeObserver(S=>{const E=S[0];if(E){const{width:T,height:A}=E.contentRect;f=T,p=A;const M=window.devicePixelRatio||1;c.width=f*M,c.height=p*M,u.scale(M,M),m.clear()}});b.observe(c);const w=()=>{u.fillStyle="rgba(0, 0, 0, 0.6)",u.fillRect(0,0,f,p),u.strokeStyle="hsl(230, 15%, 25%)",u.lineWidth=.5,u.globalAlpha=.5,u.beginPath(),u.moveTo(0,p/2),u.lineTo(f,p/2),u.stroke();for(let A=0;A<f;A=A+100,A)u.beginPath(),u.moveTo(A,0),u.lineTo(A,p),u.stroke();u.globalAlpha=1;const S=p/2,E=p*.2,T=u.createLinearGradient(0,S-E,0,S+E);T.addColorStop(0,"hsl(200, 80%, 75%)"),T.addColorStop(.5,"hsl(220, 70%, 80%)"),T.addColorStop(1,"hsl(240, 80%, 75%)"),u.shadowColor="hsl(220, 80%, 70%)",u.shadowBlur=15,u.strokeStyle=T,u.lineWidth=3,u.lineCap="round",u.beginPath();for(let A=0;A<f;A=A+12,A){const M=A*.1+i.current,R=Math.floor(M/(2*Math.PI)),O=y(R),I=Math.abs(Math.sin(M))*O,L=S-I,$=S+I;u.moveTo(A,L),u.lineTo(A,$)}u.stroke(),u.shadowBlur=0,i.current=i.current+.05,o.current=requestAnimationFrame(w)};return n?(m.clear(),w()):(o.current&&(cancelAnimationFrame(o.current),o.current=void 0),u.fillStyle="rgba(0, 0, 0, 0.6)",u.fillRect(0,0,f,p)),()=>{b.disconnect(),o.current&&cancelAnimationFrame(o.current)}},a=[n],t[0]=n,t[1]=s,t[2]=a):(s=t[1],a=t[2]),k.useEffect(s,a);let l;return t[3]===Symbol.for("react.memo_cache_sentinel")?(l=v.jsx("canvas",{ref:r,className:"w-full h-full"}),t[3]=l):l=t[3],l};function btt(e){const t=ht.c(18),{isRecording:n,isProcessing:r,onStop:o}=e,i=_n(vtt),[s,a]=k.useState(0);let l,c;if(t[0]!==n||t[1]!==i?(l=()=>{let w;return n&&i?(a(Math.floor((Date.now()-i)/1e3)),w=setInterval(()=>{a(Math.floor((Date.now()-i)/1e3))},1e3)):a(0),()=>clearInterval(w)},c=[n,i],t[0]=n,t[1]=i,t[2]=l,t[3]=c):(l=t[2],c=t[3]),k.useEffect(l,c),r){let w;return t[4]===Symbol.for("react.memo_cache_sentinel")?(w=v.jsx("div",{className:"flex items-center justify-center gap-3 h-10 px-2 mb-2 bg-black/60 border-y border-zinc-700/50",children:v.jsx(lH,{text:"Transcribing...",shimmeringColor:"#ffffff",className:"font-mono text-sm text-zinc-100"})}),t[4]=w):w=t[4],w}let u;t[5]!==s?(u=gqe(s),t[5]=s,t[6]=u):u=t[6];let f;t[7]!==u?(f=v.jsx("span",{className:"font-mono text-sm text-zinc-100 w-16 text-center",children:v.jsx(lH,{text:u,shimmeringColor:"#ffffff"})}),t[7]=u,t[8]=f):f=t[8];let p;t[9]!==n?(p=v.jsx("div",{className:"flex-1 h-full mx-2",children:v.jsx(ytt,{isRunning:n})}),t[9]=n,t[10]=p):p=t[10];let m;t[11]===Symbol.for("react.memo_cache_sentinel")?(m=v.jsx(Wne,{}),t[11]=m):m=t[11];let y;t[12]!==o?(y=v.jsx("button",{onClick:o,className:"text-sm flex items-center gap-1.5 bg-red-500/40 text-white px-2 py-1 rounded-lg hover:bg-red-600 transition-colors",children:m}),t[12]=o,t[13]=y):y=t[13];let b;return t[14]!==f||t[15]!==p||t[16]!==y?(b=v.jsxs("div",{className:"flex items-center justify-between h-10 px-2 mb-2 bg-black/60 border-y border-zinc-700/50",children:[f,p,y]}),t[14]=f,t[15]=p,t[16]=y,t[17]=b):b=t[17],b}function vtt(e){return e.recordingStartTime}function xtt(e){const t=ht.c(32),{isOpen:n,onClose:r}=e;let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[0]=o):o=t[0];const[i,s]=k.useState(o),[a,l]=k.useState(null),[c,u]=k.useState(""),[f,p]=k.useState("kanban"),[m,y]=k.useState(null),[b,w]=k.useState(null),S=[{id:"todo",name:"Todo"},{id:"in-progress",name:"Doing"},{id:"done",name:"Done"}];let E;t[1]===Symbol.for("react.memo_cache_sentinel")?(E=async()=>{try{const me=await zt("get_kanban_data");s(me)}catch(me){console.error("Failed to load kanban tasks:",me)}},t[1]=E):E=t[1];const T=E,A=Ett;let M,R;t[2]!==n?(M=()=>{n&&T()},R=[n],t[2]=n,t[3]=M,t[4]=R):(M=t[3],R=t[4]),k.useEffect(M,R);const O=me=>{const xe={id:Date.now().toString(),name:"New Task",column:me,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},Ie=[...i,xe];s(Ie),A(Ie)},I=me=>{const _e=i.filter(xe=>xe.id!==me);s(_e),A(_e)},L=(me,_e)=>{l(me),u(_e)},$=()=>{if(a&&c.trim()){const me=i.map(_e=>_e.id===a?{..._e,name:c.trim(),updated_at:new Date().toISOString()}:_e);s(me),A(me)}l(null),u("")},B=()=>{l(null),u("")},G=me=>i.filter(_e=>_e.column===me).length,V=async(me,_e)=>{if(_e==="done"){y(me),await new Promise(Ctt),w(me),await new Promise(ktt);const xe=i.map(Ie=>Ie.id===me?{...Ie,column:_e}:Ie);s(xe),A(xe),y(null),w(null)}else{const xe=i.map(Ie=>Ie.id===me?{...Ie,column:_e}:Ie);s(xe),A(xe)}},W=Stt;if(!n)return null;const K=gm,F="relative z-[99999]";let q;t[5]===Symbol.for("react.memo_cache_sentinel")?(q=v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),t[5]=q):q=t[5];const H="fixed inset-0 flex items-center justify-center p-4",z=Jf,N="bg-zinc-900/70 backdrop-blur-xl border border-zinc-500/50 rounded-xl w-full max-w-6xl h-[85vh] overflow-hidden flex flex-col shadow-2xl",U=wtt;let te;t[6]===Symbol.for("react.memo_cache_sentinel")?(te=()=>p("kanban"),t[6]=te):te=t[6];const D=`flex items-center px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${f==="kanban"?"bg-zinc-800 text-zinc-100":"text-zinc-500 hover:text-zinc-300"}`;let ce;t[7]===Symbol.for("react.memo_cache_sentinel")?(ce=v.jsx(Ok,{size:16,className:"mr-2"}),t[7]=ce):ce=t[7];let ae;t[8]!==D?(ae=v.jsx("div",{className:"flex items-center space-x-6",children:v.jsx("div",{className:"flex items-center space-x-1",children:v.jsxs("button",{onClick:te,className:D,children:[ce,"Kanban View"]})})}),t[8]=D,t[9]=ae):ae=t[9];let pe;t[10]===Symbol.for("react.memo_cache_sentinel")?(pe=v.jsx(mh,{size:20}),t[10]=pe):pe=t[10];let ie;t[11]!==r?(ie=v.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-zinc-300 transition-colors p-2 hover:bg-zinc-800 rounded-md",children:pe}),t[11]=r,t[12]=ie):ie=t[12];let ye;t[13]!==ae||t[14]!==ie?(ye=v.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-200/20",children:[ae,ie]}),t[13]=ae,t[14]=ie,t[15]=ye):ye=t[15];const Re="flex-1 overflow-x-auto p-6",$e=f==="kanban"?v.jsx("div",{className:"flex h-full gap-4",children:S.map(me=>v.jsxs("div",{className:"flex-1 min-w-[300px] flex flex-col h-full rounded-lg bg-zinc-900/40 border border-blue-300/10",children:[v.jsx("div",{className:"flex items-center justify-between p-3 mb-2",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:`px-2 py-0.5 rounded text-xs font-medium flex items-center ${me.id==="todo"?"bg-zinc-800 text-zinc-400":me.id==="in-progress"?"bg-blue-900/30 text-blue-400":"bg-green-900/30 text-green-400"}`,children:[me.id==="todo"&&v.jsx(pI,{size:12,className:"mr-1.5"}),me.id==="in-progress"&&v.jsx(fI,{size:12,className:"mr-1.5"}),me.id==="done"&&v.jsx(QB,{size:12,className:"mr-1.5"}),me.name]}),v.jsx("span",{className:"text-zinc-600 text-xs font-medium px-1.5 bg-zinc-800/50 rounded-sm",children:G(me.id)}),v.jsx("button",{onClick:()=>O(me.id),className:"p-1 text-zinc-500 hover:text-zinc-200 hover:bg-zinc-700/50 rounded transition-colors",title:"Add Task",children:v.jsx(Eb,{size:14})})]})}),v.jsx("div",{className:"flex-1 overflow-y-auto px-2 pb-2 space-y-2",children:v.jsx(pa,{mode:"popLayout",children:i.filter(_e=>_e.column===me.id).map(_e=>v.jsx(Wn.div,{layoutId:_e.column==="done"?void 0:_e.id,initial:{opacity:0,x:me.id==="done"?-10:-20},animate:{opacity:b===_e.id?0:1,x:0,transition:{duration:me.id==="done"?.4:.2}},exit:{opacity:0,scale:.95},transition:{duration:.2},children:v.jsx("div",{className:`group relative rounded-lg p-3 shadow-sm hover:border-zinc-600/50 transition-colors border ${W(_e.column)}`,children:a===_e.id?v.jsx("input",{type:"text",value:c,onChange:xe=>u(xe.target.value),onBlur:$,onKeyDown:xe=>{xe.key==="Enter"&&$(),xe.key==="Escape"&&B()},className:"bg-zinc-900 border border-zinc-700/80 rounded px-2 py-1 text-zinc-300 w-full outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/20 transition-all text-sm placeholder-zinc-600",autoFocus:!0}):v.jsxs("div",{className:"flex gap-3",children:[v.jsx("div",{className:"pt-0.5",children:v.jsxs(gtt,{as:"div",className:"relative",children:[v.jsx(Jie,{className:"flex items-center justify-center p-1 rounded hover:bg-zinc-800 text-zinc-600 hover:text-zinc-300 transition-colors",children:v.jsx(p0,{size:14})}),v.jsx(Wie,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:v.jsx(Xie,{className:"absolute left-0 mt-1 w-32 origin-top-left rounded-md bg-zinc-900 border border-zinc-800 shadow-xl focus:outline-none z-50",children:v.jsxs("div",{className:"p-1",children:[me.id!=="todo"&&v.jsx(Zy,{children:xe=>{const{active:Ie}=xe;return v.jsxs("button",{onClick:()=>V(_e.id,"todo"),className:`${Ie?"bg-zinc-800 text-zinc-200":"text-zinc-400"} group flex w-full items-center rounded-sm px-2 py-1.5 text-xs`,children:[v.jsx(pI,{size:12,className:"mr-2"}),"To Todo"]})}}),me.id!=="in-progress"&&v.jsx(Zy,{children:xe=>{const{active:Ie}=xe;return v.jsxs("button",{onClick:()=>V(_e.id,"in-progress"),className:`${Ie?"bg-zinc-800 text-blue-400":"text-blue-400/80"} group flex w-full items-center rounded-sm px-2 py-1.5 text-xs`,children:[v.jsx(fI,{size:12,className:"mr-2"}),"Doing"]})}}),me.id!=="done"&&v.jsx(Zy,{children:xe=>{const{active:Ie}=xe;return v.jsxs("button",{onClick:()=>V(_e.id,"done"),className:`${Ie?"bg-zinc-800 text-green-400":"text-green-400/80"} group flex w-full items-center rounded-sm px-2 py-1.5 text-xs`,children:[v.jsx(QB,{size:12,className:"mr-2"}),"Done"]})}}),v.jsx("div",{className:"my-1 h-px bg-zinc-800"}),v.jsx(Zy,{children:xe=>{const{active:Ie}=xe;return v.jsx("button",{onClick:()=>I(_e.id),className:`${Ie?"bg-red-900/20 text-red-400":"text-red-400/80"} group flex w-full items-center rounded-sm px-2 py-1.5 text-xs`,children:"Delete"})}})]})})})]})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:`m-0 font-medium text-sm cursor-pointer text-zinc-300 line-clamp-2 transition-all duration-300 ${m===_e.id||_e.column==="done"?"line-through text-zinc-500 opacity-60":""}`,onDoubleClick:()=>L(_e.id,_e.name),children:_e.name}),v.jsxs("div",{className:"flex items-center mt-2.5",children:[v.jsx("div",{className:"w-5 h-5 flex items-center justify-center rounded bg-zinc-900 border border-zinc-800 text-zinc-600 mr-2",children:v.jsx("span",{className:"text-[10px] font-serif",children:"T"})}),v.jsx("div",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium border ${_e.column==="todo"?"border-zinc-800 text-zinc-500":_e.column==="in-progress"?"border-blue-900/30 text-blue-500 bg-blue-900/10":"border-green-900/30 text-green-500 bg-green-900/10"}`,children:_e.column==="todo"?"Todo":_e.column==="in-progress"?"Doing":"Done"})]})]})]})})},_e.id))})})]},me.id))}):v.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:"Table view coming soon"});let Be;t[16]!==$e?(Be=v.jsx("div",{className:Re,children:$e}),t[16]=$e,t[17]=Be):Be=t[17];let je;t[18]!==z||t[19]!==ye||t[20]!==Be||t[21]!==U?(je=v.jsxs(z,{className:N,onClick:U,children:[ye,Be]}),t[18]=z,t[19]=ye,t[20]=Be,t[21]=U,t[22]=je):je=t[22];let Le;t[23]!==r||t[24]!==je?(Le=v.jsx("div",{className:H,onClick:r,children:je}),t[23]=r,t[24]=je,t[25]=Le):Le=t[25];let Pe;return t[26]!==K||t[27]!==n||t[28]!==r||t[29]!==Le||t[30]!==q?(Pe=v.jsxs(K,{open:n,onClose:r,className:F,children:[q,Le]}),t[26]=K,t[27]=n,t[28]=r,t[29]=Le,t[30]=q,t[31]=Pe):Pe=t[31],Pe}function wtt(e){return e.stopPropagation()}function Stt(e){switch(e){case"in-progress":return"bg-gradient-to-br from-zinc-950 to-blue-900/40 border-blue-900/30";case"done":return"bg-gradient-to-br from-zinc-950 to-green-900/40 border-green-900/30";default:return"bg-zinc-950 border-zinc-800/60"}}function ktt(e){return setTimeout(e,120)}function Ctt(e){return setTimeout(e,120)}async function Ett(e){try{await zt("save_kanban_data",{tasks:e})}catch(t){console.error("Failed to save kanban data:",t)}}var Qie={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cH=se.createContext&&se.createContext(Qie),Ttt=["attr","size","title"];function _tt(e,t){if(e==null)return{};var n=Att(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Att(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Gk(){return Gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gk.apply(this,arguments)}function uH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function qk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uH(Object(n),!0).forEach(function(r){Mtt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uH(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mtt(e,t,n){return t=Ntt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ntt(e){var t=Rtt(e,"string");return typeof t=="symbol"?t:t+""}function Rtt(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ese(e){return e&&e.map((t,n)=>se.createElement(t.tag,qk({key:n},t.attr),ese(t.child)))}function Itt(e){return t=>se.createElement(Ott,Gk({attr:qk({},e.attr)},t),ese(e.child))}function Ott(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=_tt(e,Ttt),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),se.createElement("svg",Gk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:qk(qk({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&se.createElement("title",null,i),e.children)};return cH!==void 0?se.createElement(cH.Consumer,null,n=>t(n)):t(Qie)}function SM(e){return Itt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7 4V2H17V4H22V6H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V6H2V4H7ZM6 6V20H18V6H6ZM9 9H11V17H9V9ZM13 9H15V17H13V9Z"},child:[]}]})(e)}k.createContext(void 0);function Ptt(e){const t=Dtt(e),n=k.forwardRef((r,o)=>{const{children:i,...s}=r,a=k.Children.toArray(i),l=a.find(jtt);if(l){const c=l.props.children,u=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return v.jsx(t,{...s,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return v.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function Dtt(e){const t=k.forwardRef((n,r)=>{const{children:o,...i}=n;if(k.isValidElement(o)){const s=ztt(o),a=Ltt(i,o.props);return o.type!==k.Fragment&&(a.ref=r?xv(r,s):s),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $tt=Symbol("radix.slottable");function jtt(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$tt}function Ltt(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function ztt(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Btt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lo=Btt.reduce((e,t)=>{const n=Ptt(`Primitive.${t}`),r=k.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Ftt(e,t){e&&Zr.flushSync(()=>e.dispatchEvent(t))}var Vtt=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Htt="VisuallyHidden",tse=k.forwardRef((e,t)=>v.jsx(lo.span,{...e,ref:t,style:{...Vtt,...e.style}}));tse.displayName=Htt;var Utt=tse;function Gtt(e,t){const n=k.createContext(t),r=i=>{const{children:s,...a}=i,l=k.useMemo(()=>a,Object.values(a));return v.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function o(i){const s=k.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,o]}function Eg(e,t=[]){let n=[];function r(i,s){const a=k.createContext(s),l=n.length;n=[...n,s];const c=f=>{const{scope:p,children:m,...y}=f,b=p?.[e]?.[l]||a,w=k.useMemo(()=>y,Object.values(y));return v.jsx(b.Provider,{value:w,children:m})};c.displayName=i+"Provider";function u(f,p){const m=p?.[e]?.[l]||a,y=k.useContext(m);if(y)return y;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const o=()=>{const i=n.map(s=>k.createContext(s));return function(a){const l=a?.[e]||i;return k.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,qtt(o,...t)]}function qtt(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function dH(e){const t=Ztt(e),n=k.forwardRef((r,o)=>{const{children:i,...s}=r,a=k.Children.toArray(i),l=a.find(Ktt);if(l){const c=l.props.children,u=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return v.jsx(t,{...s,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return v.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function Ztt(e){const t=k.forwardRef((n,r)=>{const{children:o,...i}=n;if(k.isValidElement(o)){const s=Jtt(o),a=Ytt(i,o.props);return o.type!==k.Fragment&&(a.ref=r?xv(r,s):s),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Wtt=Symbol("radix.slottable");function Ktt(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Wtt}function Ytt(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Jtt(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Xtt(e){const t=e+"CollectionProvider",[n,r]=Eg(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:w,children:S}=b,E=se.useRef(null),T=se.useRef(new Map).current;return v.jsx(o,{scope:w,itemMap:T,collectionRef:E,children:S})};s.displayName=t;const a=e+"CollectionSlot",l=dH(a),c=se.forwardRef((b,w)=>{const{scope:S,children:E}=b,T=i(a,S),A=xi(w,T.collectionRef);return v.jsx(l,{ref:A,children:E})});c.displayName=a;const u=e+"CollectionItemSlot",f="data-radix-collection-item",p=dH(u),m=se.forwardRef((b,w)=>{const{scope:S,children:E,...T}=b,A=se.useRef(null),M=xi(w,A),R=i(u,S);return se.useEffect(()=>(R.itemMap.set(A,{ref:A,...T}),()=>void R.itemMap.delete(A))),v.jsx(p,{[f]:"",ref:M,children:E})});m.displayName=u;function y(b){const w=i(e+"CollectionConsumer",b);return se.useCallback(()=>{const E=w.collectionRef.current;if(!E)return[];const T=Array.from(E.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((R,O)=>T.indexOf(R.ref.current)-T.indexOf(O.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:s,Slot:c,ItemSlot:m},y,r]}function Wo(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}var ou=globalThis?.document?k.useLayoutEffect:()=>{},Qtt=Bb[" useInsertionEffect ".trim().toString()]||ou;function Nv({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,i,s]=ent({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:o;{const u=k.useRef(e!==void 0);k.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=k.useCallback(u=>{if(a){const f=tnt(u)?u(e):u;f!==e&&s.current?.(f)}else i(u)},[a,e,i,s]);return[l,c]}function ent({defaultProp:e,onChange:t}){const[n,r]=k.useState(e),o=k.useRef(n),i=k.useRef(t);return Qtt(()=>{i.current=t},[t]),k.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function tnt(e){return typeof e=="function"}function nnt(e,t){return k.useReducer((n,r)=>t[n][r]??n,e)}var Tg=e=>{const{present:t,children:n}=e,r=rnt(t),o=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),i=xi(r.ref,ont(o));return typeof n=="function"||r.isPresent?k.cloneElement(o,{ref:i}):null};Tg.displayName="Presence";function rnt(e){const[t,n]=k.useState(),r=k.useRef(null),o=k.useRef(e),i=k.useRef("none"),s=e?"mounted":"unmounted",[a,l]=nnt(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const c=Ux(r.current);i.current=a==="mounted"?c:"none"},[a]),ou(()=>{const c=r.current,u=o.current;if(u!==e){const p=i.current,m=Ux(c);e?l("MOUNT"):m==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),ou(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,f=m=>{const b=Ux(r.current).includes(CSS.escape(m.animationName));if(m.target===t&&b&&(l("ANIMATION_END"),!o.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=m=>{m.target===t&&(i.current=Ux(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Ux(e){return e?.animationName||"none"}function ont(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var int=Bb[" useId ".trim().toString()]||(()=>{}),snt=0;function ym(e){const[t,n]=k.useState(int());return ou(()=>{n(r=>r??String(snt++))},[e]),t?`radix-${t}`:""}var zE="Collapsible",[ant,nse]=Eg(zE),[lnt,GD]=ant(zE),rse=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:i,onOpenChange:s,...a}=e,[l,c]=Nv({prop:r,defaultProp:o??!1,onChange:s,caller:zE});return v.jsx(lnt,{scope:n,disabled:i,contentId:ym(),open:l,onOpenToggle:k.useCallback(()=>c(u=>!u),[c]),children:v.jsx(lo.div,{"data-state":ZD(l),"data-disabled":i?"":void 0,...a,ref:t})})});rse.displayName=zE;var ose="CollapsibleTrigger",ise=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=GD(ose,n);return v.jsx(lo.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":ZD(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:Wo(e.onClick,o.onOpenToggle)})});ise.displayName=ose;var qD="CollapsibleContent",sse=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=GD(qD,e.__scopeCollapsible);return v.jsx(Tg,{present:n||o.open,children:({present:i})=>v.jsx(cnt,{...r,ref:t,present:i})})});sse.displayName=qD;var cnt=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...i}=e,s=GD(qD,n),[a,l]=k.useState(r),c=k.useRef(null),u=xi(t,c),f=k.useRef(0),p=f.current,m=k.useRef(0),y=m.current,b=s.open||a,w=k.useRef(b),S=k.useRef(void 0);return k.useEffect(()=>{const E=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(E)},[]),ou(()=>{const E=c.current;if(E){S.current=S.current||{transitionDuration:E.style.transitionDuration,animationName:E.style.animationName},E.style.transitionDuration="0s",E.style.animationName="none";const T=E.getBoundingClientRect();f.current=T.height,m.current=T.width,w.current||(E.style.transitionDuration=S.current.transitionDuration,E.style.animationName=S.current.animationName),l(r)}},[s.open,r]),v.jsx(lo.div,{"data-state":ZD(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!b,...i,ref:u,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:b&&o})});function ZD(e){return e?"open":"closed"}var unt=rse,dnt=ise,fnt=sse,hnt=k.createContext(void 0);function pnt(e){const t=k.useContext(hnt);return e||t||"ltr"}var cl="Accordion",mnt=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[WD,gnt,ynt]=Xtt(cl),[BE,omt]=Eg(cl,[ynt,nse]),KD=nse(),ase=se.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,i=r;return v.jsx(WD.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?v.jsx(wnt,{...i,ref:t}):v.jsx(xnt,{...o,ref:t})})});ase.displayName=cl;var[lse,bnt]=BE(cl),[cse,vnt]=BE(cl,{collapsible:!1}),xnt=se.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:i=!1,...s}=e,[a,l]=Nv({prop:n,defaultProp:r??"",onChange:o,caller:cl});return v.jsx(lse,{scope:e.__scopeAccordion,value:se.useMemo(()=>a?[a]:[],[a]),onItemOpen:l,onItemClose:se.useCallback(()=>i&&l(""),[i,l]),children:v.jsx(cse,{scope:e.__scopeAccordion,collapsible:i,children:v.jsx(use,{...s,ref:t})})})}),wnt=se.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...i}=e,[s,a]=Nv({prop:n,defaultProp:r??[],onChange:o,caller:cl}),l=se.useCallback(u=>a((f=[])=>[...f,u]),[a]),c=se.useCallback(u=>a((f=[])=>f.filter(p=>p!==u)),[a]);return v.jsx(lse,{scope:e.__scopeAccordion,value:s,onItemOpen:l,onItemClose:c,children:v.jsx(cse,{scope:e.__scopeAccordion,collapsible:!0,children:v.jsx(use,{...i,ref:t})})})}),[Snt,FE]=BE(cl),use=se.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:i="vertical",...s}=e,a=se.useRef(null),l=xi(a,t),c=gnt(n),f=pnt(o)==="ltr",p=Wo(e.onKeyDown,m=>{if(!mnt.includes(m.key))return;const y=m.target,b=c().filter(I=>!I.ref.current?.disabled),w=b.findIndex(I=>I.ref.current===y),S=b.length;if(w===-1)return;m.preventDefault();let E=w;const T=0,A=S-1,M=()=>{E=w+1,E>A&&(E=T)},R=()=>{E=w-1,E<T&&(E=A)};switch(m.key){case"Home":E=T;break;case"End":E=A;break;case"ArrowRight":i==="horizontal"&&(f?M():R());break;case"ArrowDown":i==="vertical"&&M();break;case"ArrowLeft":i==="horizontal"&&(f?R():M());break;case"ArrowUp":i==="vertical"&&R();break}const O=E%S;b[O].ref.current?.focus()});return v.jsx(Snt,{scope:n,disabled:r,direction:o,orientation:i,children:v.jsx(WD.Slot,{scope:n,children:v.jsx(lo.div,{...s,"data-orientation":i,ref:l,onKeyDown:r?void 0:p})})})}),Zk="AccordionItem",[knt,YD]=BE(Zk),dse=se.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,i=FE(Zk,n),s=bnt(Zk,n),a=KD(n),l=ym(),c=r&&s.value.includes(r)||!1,u=i.disabled||e.disabled;return v.jsx(knt,{scope:n,open:c,disabled:u,triggerId:l,children:v.jsx(unt,{"data-orientation":i.orientation,"data-state":gse(c),...a,...o,ref:t,disabled:u,open:c,onOpenChange:f=>{f?s.onItemOpen(r):s.onItemClose(r)}})})});dse.displayName=Zk;var fse="AccordionHeader",Cnt=se.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=FE(cl,n),i=YD(fse,n);return v.jsx(lo.h3,{"data-orientation":o.orientation,"data-state":gse(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:t})});Cnt.displayName=fse;var XI="AccordionTrigger",hse=se.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=FE(cl,n),i=YD(XI,n),s=vnt(XI,n),a=KD(n);return v.jsx(WD.ItemSlot,{scope:n,children:v.jsx(dnt,{"aria-disabled":i.open&&!s.collapsible||void 0,"data-orientation":o.orientation,id:i.triggerId,...a,...r,ref:t})})});hse.displayName=XI;var pse="AccordionContent",mse=se.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=FE(cl,n),i=YD(pse,n),s=KD(n);return v.jsx(fnt,{role:"region","aria-labelledby":i.triggerId,"data-orientation":o.orientation,...s,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});mse.displayName=pse;function gse(e){return e?"open":"closed"}var Ent=ase,Tnt=dse,_nt=hse,fH=mse;function Bm(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>t.current?.(...n),[])}function Ant(e,t=globalThis?.document){const n=Bm(e);k.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Mnt="DismissableLayer",QI="dismissableLayer.update",Nnt="dismissableLayer.pointerDownOutside",Rnt="dismissableLayer.focusOutside",hH,yse=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),VE=k.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=e,c=k.useContext(yse),[u,f]=k.useState(null),p=u?.ownerDocument??globalThis?.document,[,m]=k.useState({}),y=xi(t,O=>f(O)),b=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=b.indexOf(w),E=u?b.indexOf(u):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,A=E>=S,M=Ont(O=>{const I=O.target,L=[...c.branches].some($=>$.contains(I));!A||L||(o?.(O),s?.(O),O.defaultPrevented||a?.())},p),R=Pnt(O=>{const I=O.target;[...c.branches].some($=>$.contains(I))||(i?.(O),s?.(O),O.defaultPrevented||a?.())},p);return Ant(O=>{E===c.layers.size-1&&(r?.(O),!O.defaultPrevented&&a&&(O.preventDefault(),a()))},p),k.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(hH=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),pH(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=hH)}},[u,p,n,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),pH())},[u,c]),k.useEffect(()=>{const O=()=>m({});return document.addEventListener(QI,O),()=>document.removeEventListener(QI,O)},[]),v.jsx(lo.div,{...l,ref:y,style:{pointerEvents:T?A?"auto":"none":void 0,...e.style},onFocusCapture:Wo(e.onFocusCapture,R.onFocusCapture),onBlurCapture:Wo(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Wo(e.onPointerDownCapture,M.onPointerDownCapture)})});VE.displayName=Mnt;var Int="DismissableLayerBranch",bse=k.forwardRef((e,t)=>{const n=k.useContext(yse),r=k.useRef(null),o=xi(t,r);return k.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),v.jsx(lo.div,{...e,ref:o})});bse.displayName=Int;function Ont(e,t=globalThis?.document){const n=Bm(e),r=k.useRef(!1),o=k.useRef(()=>{});return k.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){vse(Nnt,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Pnt(e,t=globalThis?.document){const n=Bm(e),r=k.useRef(!1);return k.useEffect(()=>{const o=i=>{i.target&&!r.current&&vse(Rnt,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function pH(){const e=new CustomEvent(QI);document.dispatchEvent(e)}function vse(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Ftt(o,i):o.dispatchEvent(i)}var imt=VE,smt=bse,kM="focusScope.autoFocusOnMount",CM="focusScope.autoFocusOnUnmount",mH={bubbles:!1,cancelable:!0},Dnt="FocusScope",xse=k.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[a,l]=k.useState(null),c=Bm(o),u=Bm(i),f=k.useRef(null),p=xi(t,b=>l(b)),m=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let b=function(T){if(m.paused||!a)return;const A=T.target;a.contains(A)?f.current=A:qu(f.current,{select:!0})},w=function(T){if(m.paused||!a)return;const A=T.relatedTarget;A!==null&&(a.contains(A)||qu(f.current,{select:!0}))},S=function(T){if(document.activeElement===document.body)for(const M of T)M.removedNodes.length>0&&qu(a)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const E=new MutationObserver(S);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),E.disconnect()}}},[r,a,m.paused]),k.useEffect(()=>{if(a){yH.add(m);const b=document.activeElement;if(!a.contains(b)){const S=new CustomEvent(kM,mH);a.addEventListener(kM,c),a.dispatchEvent(S),S.defaultPrevented||($nt(Fnt(wse(a)),{select:!0}),document.activeElement===b&&qu(a))}return()=>{a.removeEventListener(kM,c),setTimeout(()=>{const S=new CustomEvent(CM,mH);a.addEventListener(CM,u),a.dispatchEvent(S),S.defaultPrevented||qu(b??document.body,{select:!0}),a.removeEventListener(CM,u),yH.remove(m)},0)}}},[a,c,u,m]);const y=k.useCallback(b=>{if(!n&&!r||m.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,S=document.activeElement;if(w&&S){const E=b.currentTarget,[T,A]=jnt(E);T&&A?!b.shiftKey&&S===A?(b.preventDefault(),n&&qu(T,{select:!0})):b.shiftKey&&S===T&&(b.preventDefault(),n&&qu(A,{select:!0})):S===E&&b.preventDefault()}},[n,r,m.paused]);return v.jsx(lo.div,{tabIndex:-1,...s,ref:p,onKeyDown:y})});xse.displayName=Dnt;function $nt(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(qu(r,{select:t}),document.activeElement!==n)return}function jnt(e){const t=wse(e),n=gH(t,e),r=gH(t.reverse(),e);return[n,r]}function wse(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function gH(e,t){for(const n of e)if(!Lnt(n,{upTo:t}))return n}function Lnt(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function znt(e){return e instanceof HTMLInputElement&&"select"in e}function qu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&znt(e)&&t&&e.select()}}var yH=Bnt();function Bnt(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=bH(e,t),e.unshift(t)},remove(t){e=bH(e,t),e[0]?.resume()}}}function bH(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Fnt(e){return e.filter(t=>t.tagName!=="A")}var Vnt="Portal",Sse=k.forwardRef((e,t)=>{const{container:n,...r}=e,[o,i]=k.useState(!1);ou(()=>i(!0),[]);const s=n||o&&globalThis?.document?.body;return s?e3.createPortal(v.jsx(lo.div,{...r,ref:t}),s):null});Sse.displayName=Vnt;var EM=0;function Hnt(){k.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??vH()),document.body.insertAdjacentElement("beforeend",e[1]??vH()),EM++,()=>{EM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),EM--}},[])}function vH(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Unt=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ap=new WeakMap,Gx=new WeakMap,qx={},TM=0,kse=function(e){return e&&(e.host||kse(e.parentNode))},Gnt=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=kse(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},qnt=function(e,t,n,r){var o=Gnt(t,Array.isArray(e)?e:[e]);qx[n]||(qx[n]=new WeakMap);var i=qx[n],s=[],a=new Set,l=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),y=m!==null&&m!=="false",b=(Ap.get(p)||0)+1,w=(i.get(p)||0)+1;Ap.set(p,b),i.set(p,w),s.push(p),b===1&&y&&Gx.set(p,!0),w===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",p,S)}})};return u(t),a.clear(),TM++,function(){s.forEach(function(f){var p=Ap.get(f)-1,m=i.get(f)-1;Ap.set(f,p),i.set(f,m),p||(Gx.has(f)||f.removeAttribute(r),Gx.delete(f)),m||f.removeAttribute(n)}),TM--,TM||(Ap=new WeakMap,Ap=new WeakMap,Gx=new WeakMap,qx={})}},Znt=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Unt(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),qnt(r,o,n,"aria-hidden")):function(){return null}};function Wnt(e){const t=Knt(e),n=k.forwardRef((r,o)=>{const{children:i,...s}=r,a=k.Children.toArray(i),l=a.find(Jnt);if(l){const c=l.props.children,u=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return v.jsx(t,{...s,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return v.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function Knt(e){const t=k.forwardRef((n,r)=>{const{children:o,...i}=n;if(k.isValidElement(o)){const s=Qnt(o),a=Xnt(i,o.props);return o.type!==k.Fragment&&(a.ref=r?xv(r,s):s),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ynt=Symbol("radix.slottable");function Jnt(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ynt}function Xnt(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Qnt(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var HE="Dialog",[Cse,amt]=Eg(HE),[ert,ul]=Cse(HE),Ese=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=e,a=k.useRef(null),l=k.useRef(null),[c,u]=Nv({prop:r,defaultProp:o??!1,onChange:i,caller:HE});return v.jsx(ert,{scope:t,triggerRef:a,contentRef:l,contentId:ym(),titleId:ym(),descriptionId:ym(),open:c,onOpenChange:u,onOpenToggle:k.useCallback(()=>u(f=>!f),[u]),modal:s,children:n})};Ese.displayName=HE;var Tse="DialogTrigger",trt=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(Tse,n),i=xi(t,o.triggerRef);return v.jsx(lo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":QD(o.open),...r,ref:i,onClick:Wo(e.onClick,o.onOpenToggle)})});trt.displayName=Tse;var JD="DialogPortal",[nrt,_se]=Cse(JD,{forceMount:void 0}),Ase=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=ul(JD,t);return v.jsx(nrt,{scope:t,forceMount:n,children:k.Children.map(r,s=>v.jsx(Tg,{present:n||i.open,children:v.jsx(Sse,{asChild:!0,container:o,children:s})}))})};Ase.displayName=JD;var Wk="DialogOverlay",Mse=k.forwardRef((e,t)=>{const n=_se(Wk,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=ul(Wk,e.__scopeDialog);return i.modal?v.jsx(Tg,{present:r||i.open,children:v.jsx(ort,{...o,ref:t})}):null});Mse.displayName=Wk;var rrt=Wnt("DialogOverlay.RemoveScroll"),ort=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(Wk,n);return v.jsx(VY,{as:rrt,allowPinchZoom:!0,shards:[o.contentRef],children:v.jsx(lo.div,{"data-state":QD(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),yh="DialogContent",Nse=k.forwardRef((e,t)=>{const n=_se(yh,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=ul(yh,e.__scopeDialog);return v.jsx(Tg,{present:r||i.open,children:i.modal?v.jsx(irt,{...o,ref:t}):v.jsx(srt,{...o,ref:t})})});Nse.displayName=yh;var irt=k.forwardRef((e,t)=>{const n=ul(yh,e.__scopeDialog),r=k.useRef(null),o=xi(t,n.contentRef,r);return k.useEffect(()=>{const i=r.current;if(i)return Znt(i)},[]),v.jsx(Rse,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wo(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Wo(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&i.preventDefault()}),onFocusOutside:Wo(e.onFocusOutside,i=>i.preventDefault())})}),srt=k.forwardRef((e,t)=>{const n=ul(yh,e.__scopeDialog),r=k.useRef(!1),o=k.useRef(!1);return v.jsx(Rse,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;n.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),Rse=k.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=e,a=ul(yh,n),l=k.useRef(null),c=xi(t,l);return Hnt(),v.jsxs(v.Fragment,{children:[v.jsx(xse,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:v.jsx(VE,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":QD(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(lrt,{titleId:a.titleId}),v.jsx(urt,{contentRef:l,descriptionId:a.descriptionId})]})]})}),XD="DialogTitle",Ise=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(XD,n);return v.jsx(lo.h2,{id:o.titleId,...r,ref:t})});Ise.displayName=XD;var Ose="DialogDescription",art=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(Ose,n);return v.jsx(lo.p,{id:o.descriptionId,...r,ref:t})});art.displayName=Ose;var Pse="DialogClose",Dse=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ul(Pse,n);return v.jsx(lo.button,{type:"button",...r,ref:t,onClick:Wo(e.onClick,()=>o.onOpenChange(!1))})});Dse.displayName=Pse;function QD(e){return e?"open":"closed"}var $se="DialogTitleWarning",[lmt,jse]=Gtt($se,{contentName:yh,titleName:XD,docsSlug:"dialog"}),lrt=({titleId:e})=>{const t=jse($se),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return k.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},crt="DialogDescriptionWarning",urt=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jse(crt).contentName}}.`;return k.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},drt=Ese,frt=Ase,Lse=Mse,zse=Nse,Bse=Ise,hrt=Dse;function prt(e){const[t,n]=k.useState(void 0);return ou(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var mrt="Arrow",Fse=k.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...i}=e;return v.jsx(lo.svg,{...i,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fse.displayName=mrt;var grt=Fse,e5="Popper",[Vse,Hse]=Eg(e5),[yrt,Use]=Vse(e5),Gse=e=>{const{__scopePopper:t,children:n}=e,[r,o]=k.useState(null);return v.jsx(yrt,{scope:t,anchor:r,onAnchorChange:o,children:n})};Gse.displayName=e5;var qse="PopperAnchor",Zse=k.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,i=Use(qse,n),s=k.useRef(null),a=xi(t,s),l=k.useRef(null);return k.useEffect(()=>{const c=l.current;l.current=r?.current||s.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:v.jsx(lo.div,{...o,ref:a})});Zse.displayName=qse;var t5="PopperContent",[brt,vrt]=Vse(t5),Wse=k.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,...b}=e,w=Use(t5,n),[S,E]=k.useState(null),T=xi(t,ie=>E(ie)),[A,M]=k.useState(null),R=prt(A),O=R?.width??0,I=R?.height??0,L=r+(i!=="center"?"-"+i:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},B=Array.isArray(c)?c:[c],G=B.length>0,V={padding:$,boundary:B.filter(wrt),altBoundary:G},{refs:W,floatingStyles:K,placement:F,isPositioned:q,middlewareData:H}=ZK({strategy:"fixed",placement:L,whileElementsMounted:(...ie)=>BC(...ie,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[Zi({mainAxis:o+I,alignmentAxis:s}),l&&au({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?uR():void 0,...V}),l&&As({...V}),Sh({...V,apply:({elements:ie,rects:ye,availableWidth:Re,availableHeight:$e})=>{const{width:Be,height:je}=ye.reference,Le=ie.floating.style;Le.setProperty("--radix-popper-available-width",`${Re}px`),Le.setProperty("--radix-popper-available-height",`${$e}px`),Le.setProperty("--radix-popper-anchor-width",`${Be}px`),Le.setProperty("--radix-popper-anchor-height",`${je}px`)}}),A&&r3({element:A,padding:a}),Srt({arrowWidth:O,arrowHeight:I}),p&&HEe({strategy:"referenceHidden",...V})]}),[z,N]=Jse(F),U=Bm(y);ou(()=>{q&&U?.()},[q,U]);const te=H.arrow?.x,D=H.arrow?.y,ce=H.arrow?.centerOffset!==0,[ae,pe]=k.useState();return ou(()=>{S&&pe(window.getComputedStyle(S).zIndex)},[S]),v.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:q?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:v.jsx(brt,{scope:n,placedSide:z,onArrowChange:M,arrowX:te,arrowY:D,shouldHideArrow:ce,children:v.jsx(lo.div,{"data-side":z,"data-align":N,...b,ref:T,style:{...b.style,animation:q?void 0:"none"}})})})});Wse.displayName=t5;var Kse="PopperArrow",xrt={top:"bottom",right:"left",bottom:"top",left:"right"},Yse=k.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,i=vrt(Kse,r),s=xrt[i.placedSide];return v.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:v.jsx(grt,{...o,ref:n,style:{...o.style,display:"block"}})})});Yse.displayName=Kse;function wrt(e){return e!==null}var Srt=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,s=o.arrow?.centerOffset!==0,a=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[c,u]=Jse(n),f={start:"0%",center:"50%",end:"100%"}[u],p=(o.arrow?.x??0)+a/2,m=(o.arrow?.y??0)+l/2;let y="",b="";return c==="bottom"?(y=s?f:`${p}px`,b=`${-l}px`):c==="top"?(y=s?f:`${p}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=s?f:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=s?f:`${m}px`),{data:{x:y,y:b}}}});function Jse(e){const[t,n="center"]=e.split("-");return[t,n]}var krt=Gse,Crt=Zse,Ert=Wse,Trt=Yse,_rt=Symbol("radix.slottable");function Art(e){const t=({children:n})=>v.jsx(v.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=_rt,t}var[UE,cmt]=Eg("Tooltip",[Hse]),GE=Hse(),Xse="TooltipProvider",Mrt=700,eO="tooltip.open",[Nrt,n5]=UE(Xse),Qse=e=>{const{__scopeTooltip:t,delayDuration:n=Mrt,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:i}=e,s=k.useRef(!0),a=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),v.jsx(Nrt,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:k.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:i})};Qse.displayName=Xse;var Ib="Tooltip",[Rrt,qE]=UE(Ib),eae=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o,onOpenChange:i,disableHoverableContent:s,delayDuration:a}=e,l=n5(Ib,e.__scopeTooltip),c=GE(t),[u,f]=k.useState(null),p=ym(),m=k.useRef(0),y=s??l.disableHoverableContent,b=a??l.delayDuration,w=k.useRef(!1),[S,E]=Nv({prop:r,defaultProp:o??!1,onChange:O=>{O?(l.onOpen(),document.dispatchEvent(new CustomEvent(eO))):l.onClose(),i?.(O)},caller:Ib}),T=k.useMemo(()=>S?w.current?"delayed-open":"instant-open":"closed",[S]),A=k.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w.current=!1,E(!0)},[E]),M=k.useCallback(()=>{window.clearTimeout(m.current),m.current=0,E(!1)},[E]),R=k.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{w.current=!0,E(!0),m.current=0},b)},[b,E]);return k.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),v.jsx(krt,{...c,children:v.jsx(Rrt,{scope:t,contentId:p,open:S,stateAttribute:T,trigger:u,onTriggerChange:f,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayedRef.current?R():A()},[l.isOpenDelayedRef,R,A]),onTriggerLeave:k.useCallback(()=>{y?M():(window.clearTimeout(m.current),m.current=0)},[M,y]),onOpen:A,onClose:M,disableHoverableContent:y,children:n})})};eae.displayName=Ib;var tO="TooltipTrigger",tae=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=qE(tO,n),i=n5(tO,n),s=GE(n),a=k.useRef(null),l=xi(t,a,o.onTriggerChange),c=k.useRef(!1),u=k.useRef(!1),f=k.useCallback(()=>c.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),v.jsx(Crt,{asChild:!0,...s,children:v.jsx(lo.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:Wo(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:Wo(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:Wo(e.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Wo(e.onFocus,()=>{c.current||o.onOpen()}),onBlur:Wo(e.onBlur,o.onClose),onClick:Wo(e.onClick,o.onClose)})})});tae.displayName=tO;var Irt="TooltipPortal",[umt,Ort]=UE(Irt,{forceMount:void 0}),Fm="TooltipContent",nae=k.forwardRef((e,t)=>{const n=Ort(Fm,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=e,s=qE(Fm,e.__scopeTooltip);return v.jsx(Tg,{present:r||s.open,children:s.disableHoverableContent?v.jsx(rae,{side:o,...i,ref:t}):v.jsx(Prt,{side:o,...i,ref:t})})}),Prt=k.forwardRef((e,t)=>{const n=qE(Fm,e.__scopeTooltip),r=n5(Fm,e.__scopeTooltip),o=k.useRef(null),i=xi(t,o),[s,a]=k.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:f}=r,p=k.useCallback(()=>{a(null),f(!1)},[f]),m=k.useCallback((y,b)=>{const w=y.currentTarget,S={x:y.clientX,y:y.clientY},E=Lrt(S,w.getBoundingClientRect()),T=zrt(S,E),A=Brt(b.getBoundingClientRect()),M=Vrt([...T,...A]);a(M),f(!0)},[f]);return k.useEffect(()=>()=>p(),[p]),k.useEffect(()=>{if(l&&u){const y=w=>m(w,u),b=w=>m(w,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",b)}}},[l,u,m,p]),k.useEffect(()=>{if(s){const y=b=>{const w=b.target,S={x:b.clientX,y:b.clientY},E=l?.contains(w)||u?.contains(w),T=!Frt(S,s);E?p():T&&(p(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,s,c,p]),v.jsx(rae,{...e,ref:i})}),[Drt,$rt]=UE(Ib,{isInside:!1}),jrt=Art("TooltipContent"),rae=k.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:s,...a}=e,l=qE(Fm,n),c=GE(n),{onClose:u}=l;return k.useEffect(()=>(document.addEventListener(eO,u),()=>document.removeEventListener(eO,u)),[u]),k.useEffect(()=>{if(l.trigger){const f=p=>{p.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),v.jsx(VE,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:v.jsxs(Ert,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[v.jsx(jrt,{children:r}),v.jsx(Drt,{scope:n,isInside:!0,children:v.jsx(Utt,{id:l.contentId,role:"tooltip",children:o||r})})]})})});nae.displayName=Fm;var oae="TooltipArrow",iae=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=GE(n);return $rt(oae,n).isInside?null:v.jsx(Trt,{...o,...r,ref:t})});iae.displayName=oae;function Lrt(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function zrt(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Brt(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function Frt(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const a=t[i],l=t[s],c=a.x,u=a.y,f=l.x,p=l.y;u>r!=p>r&&n<(f-c)*(r-u)/(p-u)+c&&(o=!o)}return o}function Vrt(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Hrt(t)}function Hrt(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Urt=Qse,Grt=eae,qrt=tae,sae=nae,dmt=iae;function aae(e){const t=ht.c(8),{value:n,defaultValue:r,onChange:o}=e,[i,s]=k.useState(n!==void 0?n:r);let a,l;t[0]!==n?(a=()=>{n!==void 0&&s(n)},l=[n],t[0]=n,t[1]=a,t[2]=l):(a=t[1],l=t[2]),k.useEffect(a,l);let c;t[3]!==o?(c=(p,...m)=>{const y=m;s(p),o?.(p,...y)},t[3]=o,t[4]=c):c=t[4];const u=c;let f;return t[5]!==u||t[6]!==i?(f=[i,u],t[5]=u,t[6]=i,t[7]=f):f=t[7],f}function ZE(e){const t=k.createContext(void 0);return[o=>{const i=ht.c(3),{value:s,children:a}=o;let l;return i[0]!==a||i[1]!==s?(l=v.jsx(t.Provider,{value:s,children:a}),i[0]=a,i[1]=s,i[2]=l):l=i[2],l},()=>{const o=k.useContext(t);if(o===void 0)throw new Error(`useContext must be used within ${e??"a Provider"}`);return o}]}const[Zrt,Wrt]=ZE("AccordionContext"),[Krt,Yrt]=ZE("AccordionItemContext");function Jrt(e){const t=ht.c(13),n=e?.value,r=e?.defaultValue,o=e?.onValueChange;let i;t[0]!==n||t[1]!==r||t[2]!==o?(i={value:n,defaultValue:r,onChange:o},t[0]=n,t[1]=r,t[2]=o,t[3]=i):i=t[3];const[s,a]=aae(i);let l;t[4]!==a||t[5]!==s?(l={value:s,setValue:a},t[4]=a,t[5]=s,t[6]=l):l=t[6];let c;t[7]!==e||t[8]!==a?(c=v.jsx(Ent,{"data-slot":"accordion",...e,onValueChange:a}),t[7]=e,t[8]=a,t[9]=c):c=t[9];let u;return t[10]!==l||t[11]!==c?(u=v.jsx(Zrt,{value:l,children:c}),t[10]=l,t[11]=c,t[12]=u):u=t[12],u}function Xrt(e){const t=ht.c(17),{value:n}=Wrt();let r;t[0]!==e.value||t[1]!==n?(r=n?.includes(e?.value)??!1,t[0]=e.value,t[1]=n,t[2]=r):r=t[2];const[o,i]=k.useState(r);let s;t[3]!==e.value||t[4]!==n?(s=()=>{i(n?.includes(e?.value)??!1)},t[3]=e.value,t[4]=n,t[5]=s):s=t[5];const a=e?.value;let l;t[6]!==a||t[7]!==n?(l=[n,a],t[6]=a,t[7]=n,t[8]=l):l=t[8],k.useEffect(s,l);let c;t[9]!==o||t[10]!==e.value?(c={isOpen:o,setIsOpen:i,value:e.value},t[9]=o,t[10]=e.value,t[11]=c):c=t[11];let u;t[12]!==e?(u=v.jsx(Tnt,{"data-slot":"accordion-item",...e}),t[12]=e,t[13]=u):u=t[13];let f;return t[14]!==c||t[15]!==u?(f=v.jsx(Krt,{value:c,children:u}),t[14]=c,t[15]=u,t[16]=f):f=t[16],f}function Qrt(e){const t=ht.c(2);let n;return t[0]!==e?(n=v.jsx(_nt,{"data-slot":"accordion-trigger",...e}),t[0]=e,t[1]=n):n=t[1],n}function eot(e){const t=ht.c(13);let n,r,o;t[0]!==e?({keepRendered:r,transition:o,...n}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);const i=r===void 0?!1:r;let s;t[4]!==o?(s=o===void 0?{type:"spring",stiffness:150,damping:22}:o,t[4]=o,t[5]=s):s=t[5];const a=s,{isOpen:l}=Yrt();let c;t[6]!==l||t[7]!==i||t[8]!==n||t[9]!==a?(c=i?v.jsx(fH,{asChild:!0,forceMount:!0,children:v.jsx(Wn.div,{"data-slot":"accordion-content",initial:{height:0,opacity:0,"--mask-stop":"0%"},animate:l?{height:"auto",opacity:1,"--mask-stop":"100%"}:{height:0,opacity:0,"--mask-stop":"0%"},transition:a,style:{maskImage:"linear-gradient(black var(--mask-stop), transparent var(--mask-stop))",WebkitMaskImage:"linear-gradient(black var(--mask-stop), transparent var(--mask-stop))",overflow:"hidden"},...n},"accordion-content")}):l&&v.jsx(fH,{asChild:!0,forceMount:!0,children:v.jsx(Wn.div,{"data-slot":"accordion-content",initial:{height:0,opacity:0,"--mask-stop":"0%"},animate:{height:"auto",opacity:1,"--mask-stop":"100%"},exit:{height:0,opacity:0,"--mask-stop":"0%"},transition:a,style:{maskImage:"linear-gradient(black var(--mask-stop), transparent var(--mask-stop))",WebkitMaskImage:"linear-gradient(black var(--mask-stop), transparent var(--mask-stop))",overflow:"hidden"},...n},"accordion-content")}),t[6]=l,t[7]=i,t[8]=n,t[9]=a,t[10]=c):c=t[10];let u;return t[11]!==c?(u=v.jsx(pa,{children:c}),t[11]=c,t[12]=u):u=t[12],u}const[tot,not]=ZE("FilesContext"),[rot,oot]=ZE("FolderContext");function iot(e){const t=ht.c(29);let n,r,o,i,s,a;t[0]!==e?({children:n,defaultOpen:a,open:o,onOpenChange:r,style:s,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6]);let l;t[7]!==a?(l=a===void 0?[]:a,t[7]=a,t[8]=l):l=t[8];const c=l;let u;t[9]!==c||t[10]!==r||t[11]!==o?(u={value:o,defaultValue:c,onChange:r},t[9]=c,t[10]=r,t[11]=o,t[12]=u):u=t[12];const[f,p]=aae(u);let m;t[13]!==f?(m=f??[],t[13]=f,t[14]=m):m=t[14];let y;t[15]!==m?(y={open:m},t[15]=m,t[16]=y):y=t[16];let b;t[17]!==s?(b={position:"relative",overflow:"auto",...s},t[17]=s,t[18]=b):b=t[18];let w;t[19]!==n||t[20]!==c||t[21]!==o||t[22]!==i||t[23]!==p||t[24]!==b?(w=v.jsx(Jrt,{"data-slot":"files",type:"multiple",defaultValue:c,value:o,onValueChange:p,style:b,...i,children:n}),t[19]=n,t[20]=c,t[21]=o,t[22]=i,t[23]=p,t[24]=b,t[25]=w):w=t[25];let S;return t[26]!==y||t[27]!==w?(S=v.jsx(tot,{value:y,children:w}),t[26]=y,t[27]=w,t[28]=S):S=t[28],S}function sot(e){const t=ht.c(14);let n,r;t[0]!==e?({value:r,...n}=e,t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);const{open:o}=not();let i;t[3]!==o||t[4]!==r?(i=o.includes(r),t[3]=o,t[4]=r,t[5]=i):i=t[5];let s;t[6]!==i?(s={isOpen:i},t[6]=i,t[7]=s):s=t[7];let a;t[8]!==n||t[9]!==r?(a=v.jsx(Xrt,{"data-slot":"folder-item",value:r,...n}),t[8]=n,t[9]=r,t[10]=a):a=t[10];let l;return t[11]!==s||t[12]!==a?(l=v.jsx(rot,{value:s,children:a}),t[11]=s,t[12]=a,t[13]=l):l=t[13],l}function aot(e){const t=ht.c(2);let n;return t[0]!==e?(n=v.jsx(Qrt,{"data-slot":"folder-trigger",...e}),t[0]=e,t[1]=n):n=t[1],n}function lot(e){const t=ht.c(2);let n;return t[0]!==e?(n=v.jsx(eot,{"data-slot":"folder-content",...e}),t[0]=e,t[1]=n):n=t[1],n}function cot(e){const t=ht.c(15);let n,r,o,i;t[0]!==e?({closeIcon:n,openIcon:r,transition:i,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i):(n=t[1],r=t[2],o=t[3],i=t[4]);let s;t[5]!==i?(s=i===void 0?{duration:.15}:i,t[5]=i,t[6]=s):s=t[6];const a=s,{isOpen:l}=oot(),c=l?"open":"close";let u,f,p;t[7]===Symbol.for("react.memo_cache_sentinel")?(u={scale:.9},f={scale:1},p={scale:.9},t[7]=u,t[8]=f,t[9]=p):(u=t[7],f=t[8],p=t[9]);const m=l?r:n;let y;return t[10]!==o||t[11]!==c||t[12]!==m||t[13]!==a?(y=v.jsx(pa,{mode:"wait",children:v.jsx(Wn.span,{"data-slot":"folder-icon",initial:u,animate:f,exit:p,transition:a,...o,children:m},c)}),t[10]=o,t[11]=c,t[12]=m,t[13]=a,t[14]=y):y=t[14],y}function uot(e){const t=ht.c(2);let n;return t[0]!==e?(n=v.jsx("span",{"data-slot":"folder-label",...e}),t[0]=e,t[1]=n):n=t[1],n}function xH(e){const t=ht.c(2);let n;return t[0]!==e?(n=v.jsx("div",{"data-slot":"file",...e}),t[0]=e,t[1]=n):n=t[1],n}function wH(e){const t=ht.c(2);let n;return t[0]!==e?(n=v.jsx("span",{"data-slot":"file-icon",...e}),t[0]=e,t[1]=n):n=t[1],n}function SH(e){const t=ht.c(2);let n;return t[0]!==e?(n=v.jsx("span",{"data-slot":"file-label",...e}),t[0]=e,t[1]=n):n=t[1],n}const dot=e=>{const t=ht.c(44),{onSelectNote:n,onSelectFolder:r,onContextMenu:o,onDeleteFolder:i,onDeleteNote:s,selectedFolderId:a,expandedFolders:l,onExpandedFoldersChange:c,renamingNoteId:u,renamingFolderId:f,renameValue:p,folderRenameValue:m,onRename:y,onFolderRename:b,onRenameValueChange:w,onFolderRenameValueChange:S,onStartRenaming:E,onStartFolderRenaming:T,selectedNoteId:A}=e,M=Ur(fot),R=Ur(hot);let O;t[0]!==R?(O=G=>G===void 0?R.filter(pot):R.filter(V=>V.parent_id===G),t[0]=R,t[1]=O):O=t[1];const I=O;let L;t[2]!==M?(L=G=>G===void 0?M.filter(mot):M.filter(V=>V.folder_id===G),t[2]=M,t[3]=L):L=t[3];const $=L;let B;if(t[4]!==l||t[5]!==m||t[6]!==I||t[7]!==$||t[8]!==o||t[9]!==i||t[10]!==s||t[11]!==c||t[12]!==b||t[13]!==S||t[14]!==y||t[15]!==w||t[16]!==r||t[17]!==n||t[18]!==T||t[19]!==E||t[20]!==p||t[21]!==f||t[22]!==u||t[23]!==a||t[24]!==A){const G=(N,U)=>{const te=U===void 0?0:U,D=I(N.id),ce=$(N.id),ae=a===N.id,pe=D.length>0||ce.length>0;return v.jsxs(sot,{value:N.id,children:[v.jsxs("div",{className:`flex items-center py-1.5 px-1 rounded-md cursor-pointer transition-all duration-200 group
            ${ae?"bg-blue-600/10 text-blue-100 border-l-2 border-blue-500":"hover:bg-zinc-800/70 text-zinc-300"}`,style:{paddingLeft:`${te*8}px`},onClick:ie=>{ie.stopPropagation(),r(N.id)},onContextMenu:ie=>o(ie,{folder:N}),onDoubleClick:()=>T(N.id,N.name),children:[v.jsxs(aot,{className:"flex items-center flex-1",children:[v.jsx("div",{className:"flex items-start mr-0.5",children:pe?v.jsx(cot,{closeIcon:v.jsx(Ik,{size:14,className:ae?"text-blue-300":"text-zinc-500"}),openIcon:v.jsx(CE,{size:14,className:ae?"text-blue-300":"text-zinc-500"})}):v.jsx("div",{className:"w-4"})}),l.has(N.id)?v.jsx(RUe,{size:16,className:ae?"text-blue-200":"text-blue-400"}):v.jsx(OUe,{size:16,className:ae?"text-blue-200":"text-blue-400"}),f===N.id?v.jsx("input",{type:"text",value:m,onChange:ie=>S(ie.target.value),onBlur:b,onKeyDown:ie=>{ie.key==="Enter"&&b(),ie.key},className:"flex-1 bg-zinc-700 text-white text-sm px-1 py-0.5 border-none outline-none focus:ring-0",autoFocus:!0,onClick:got}):v.jsx(uot,{className:ae?"text-blue-100/90 text-sm truncate px-1 py-0.5":"text-zinc-300 text-sm truncate px-1 py-0.5",children:N.name})]}),v.jsx("button",{onClick:ie=>{ie.stopPropagation(),o(ie,{folder:N})},className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-white ml-auto mr-1 active:scale-95 transition-all",title:"More options",children:v.jsx(p0,{size:14})}),v.jsx("button",{onClick:ie=>i(N.id,ie),className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-red-400 active:scale-95 transition-all",title:"Delete folder",children:v.jsx(SM,{size:12})})]}),v.jsxs(lot,{className:"ml-4",children:[D.map(ie=>G(ie,te+1)),ce.map(ie=>v.jsx(xH,{className:`
                group relative font-small px-2 py-1.5 rounded-md cursor-pointer transition-all duration-200 flex items-center
                ${ie.id===u?"bg-zinc-800":ie.id===A?"bg-blue-600/20 text-blue-100 border-l-2 border-blue-500":"hover:bg-zinc-800/50 text-zinc-300"}
              `,style:{paddingLeft:`${(te+1)*16+8}px`},onClick:()=>n(ie),onContextMenu:ye=>o(ye,{note:ie}),onDoubleClick:()=>E(ie.id,ie.title||"Untitled"),children:v.jsxs("div",{className:"flex items-center justify-between w-full",children:[v.jsx("div",{className:"flex-1 min-w-0 pr-2",children:v.jsxs("div",{className:`
                    font-small text-sm truncate flex items-start
                    ${ie.id===u?"text-white":ie.id===A?"text-blue-100":"text-zinc-300"}
                  `,children:[v.jsx(wH,{className:`mr-2 flex-shrink-0 mt-0.5 ${ie.id===A?"text-blue-300":"text-zinc-500"}`,children:ie.note_type==="canvas"?v.jsx(oF,{size:15}):v.jsx(nF,{size:13})}),u===ie.id?v.jsx("input",{type:"text",value:p,onChange:ye=>w(ye.target.value),onBlur:y,onKeyDown:ye=>{ye.key==="Enter"&&y(),ye.key},className:"w-full bg-zinc-700 text-white text-sm p-0 border-none outline-none focus:ring-0",autoFocus:!0,onClick:yot}):v.jsx(SH,{className:ie.id===A?"text-blue-100":"text-zinc-300",children:ie.title||"Untitled"})]})}),v.jsx("button",{onClick:ye=>{ye.stopPropagation(),o(ye,{note:ie})},className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-white hover:bg-zinc-700/50 rounded transition-all duration-200 flex-shrink-0 active:scale-95 ml-auto mr-1",title:"More options",children:v.jsx(p0,{size:14})}),v.jsx("button",{onClick:ye=>s(ie.id,ye),className:`opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-red-400\r
                  hover:bg-zinc-700 rounded transition-all duration-200 flex-shrink-0 active:scale-95`,title:"Delete note",children:v.jsx(SM,{size:12})})]})},ie.id))]})]},N.id)},V=I(void 0),W=$(void 0);let K;t[26]!==l?(K=Array.from(l),t[26]=l,t[27]=K):K=t[27];let F;t[28]!==c?(F=N=>c(new Set(N)),t[28]=c,t[29]=F):F=t[29];const q=V.map(N=>G(N));let H;t[30]!==K||t[31]!==F||t[32]!==q?(H=v.jsx(iot,{open:K,onOpenChange:F,children:q}),t[30]=K,t[31]=F,t[32]=q,t[33]=H):H=t[33];let z;t[34]!==o||t[35]!==s||t[36]!==y||t[37]!==w||t[38]!==n||t[39]!==E||t[40]!==p||t[41]!==u||t[42]!==A?(z=N=>v.jsx(xH,{className:`
            group relative font-small px-2 py-1.5 rounded-lg cursor-pointer transition-all duration-200 flex items-center
            ${N.id===u?"bg-zinc-800 border border-zinc-700":N.id===A?"bg-blue-600/30 text-blue-100 border-l-2 border-blue-500":"hover:bg-zinc-800/50 border border-transparent text-zinc-300"}
          `,onClick:()=>n(N),onContextMenu:U=>o(U,{note:N}),onDoubleClick:()=>E(N.id,N.title||"Untitled"),children:v.jsxs("div",{className:"flex items-center justify-between w-full",children:[v.jsx("div",{className:"flex-1 min-w-0 pr-2",children:v.jsxs("div",{className:`
                font-small text-sm truncate flex items-start
                ${N.id===u?"text-white":N.id===A?"text-blue-100":"text-zinc-300"}
              `,children:[v.jsx(wH,{className:`mr-2 flex-shrink-0 ${N.id===A?"text-blue-300":"text-zinc-500"}`,children:N.note_type==="canvas"?v.jsx(oF,{size:17}):v.jsx(nF,{size:15})}),u===N.id?v.jsx("input",{type:"text",value:p,onChange:U=>w(U.target.value),onBlur:y,onKeyDown:U=>{U.key==="Enter"&&y(),U.key},className:"w-full bg-zinc-700 text-white text-sm p-0 border-none outline-none focus:ring-0",autoFocus:!0,onClick:bot}):v.jsx(SH,{className:N.id===A?"text-blue-100":"text-zinc-300",children:N.title||"Untitled"})]})}),v.jsx("button",{onClick:U=>{U.stopPropagation(),o(U,{note:N})},className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-white hover:bg-zinc-700/50 rounded transition-all duration-200 flex-shrink-0 active:scale-95 ml-auto mr-1",title:"More options",children:v.jsx(p0,{size:14})}),v.jsx("button",{onClick:U=>s(N.id,U),className:`opacity-0 group-hover:opacity-100 p-1 text-zinc-500 hover:text-red-400\r
              hover:bg-zinc-700 rounded transition-all duration-200 flex-shrink-0 active:scale-95`,title:"Delete note",children:v.jsx(SM,{size:12})})]})},N.id),t[34]=o,t[35]=s,t[36]=y,t[37]=w,t[38]=n,t[39]=E,t[40]=p,t[41]=u,t[42]=A,t[43]=z):z=t[43],B=v.jsxs("div",{className:"space-y-1",children:[H,W.map(z)]}),t[4]=l,t[5]=m,t[6]=I,t[7]=$,t[8]=o,t[9]=i,t[10]=s,t[11]=c,t[12]=b,t[13]=S,t[14]=y,t[15]=w,t[16]=r,t[17]=n,t[18]=T,t[19]=E,t[20]=p,t[21]=f,t[22]=u,t[23]=a,t[24]=A,t[25]=B}else B=t[25];return B};function fot(e){return e.notes}function hot(e){return e.folders}function pot(e){return e.parent_id==null}function mot(e){return e.folder_id==null}function got(e){return e.stopPropagation()}function yot(e){return e.stopPropagation()}function bot(e){return e.stopPropagation()}async function vot(e,t){if(e==null)return Promise.resolve();const n=t?.abortSignal;return new Promise((r,o)=>{if(n?.aborted){o(kH());return}const i=setTimeout(()=>{s(),r()},e),s=()=>{clearTimeout(i),n?.removeEventListener("abort",a)},a=()=>{s(),o(kH())};n?.addEventListener("abort",a)})}function kH(){return new DOMException("Delay was aborted","AbortError")}var Rv=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=()=>{const i=n.length,s=new Array(t);for(let a=0;a<t;a++)s[a]=n[Math.random()*i|0];return s.join("")};if(e==null)return o;if(n.includes(r))throw new wE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${o()}`},xot=Rv();function r5(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function lae(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}function wot({mediaType:e,url:t,supportedUrls:n}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(n).map(([r,o])=>{const i=r.toLowerCase();return i==="*"||i==="*/*"?{mediaTypePrefix:"",regexes:o}:{mediaTypePrefix:i.replace(/\*/,""),regexes:o}}).filter(({mediaTypePrefix:r})=>e.startsWith(r)).flatMap(({regexes:r})=>r).some(r=>r.test(t))}var Sot=/"__proto__"\s*:/,kot=/"constructor"\s*:/;function Cot(e){const t=JSON.parse(e);return t===null||typeof t!="object"||Sot.test(e)===!1&&kot.test(e)===!1?t:Eot(t)}function Eot(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const o in r){const i=r[o];i&&typeof i=="object"&&t.push(i)}}}return e}function Tot(e){const{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{return Cot(e)}finally{Error.stackTraceLimit=t}}var Kk=Symbol.for("vercel.ai.validator");function _ot(e){return{[Kk]:!0,validate:e}}function Aot(e){return typeof e=="object"&&e!==null&&Kk in e&&e[Kk]===!0&&"validate"in e}function Mot(e){return Aot(e)?e:Not(e)}function Not(e){return _ot(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new qi({value:t,cause:n.issues})}})}async function CH({value:e,schema:t}){const n=await Iv({value:e,schema:t});if(!n.success)throw qi.wrap({value:e,cause:n.error});return n.value}async function Iv({value:e,schema:t}){const n=Mot(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:qi.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:qi.wrap({value:e,cause:r}),rawValue:e}}}async function Yk({text:e,schema:t}){try{const n=Tot(e);return t==null?{success:!0,value:n,rawValue:n}:await Iv({value:n,schema:t})}catch(n){return{success:!1,error:Xl.isInstance(n)?n:new Xl({text:e,cause:n}),rawValue:void 0}}}function Rot(e,t){var n;const r=(n=void 0)!=null?n:!1;return o5(Pee(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:async o=>{const i=await e.safeParseAsync(o);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function Iot(e,t){var n;const r=(n=void 0)!=null?n:!1,o=vee(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"});return o5(o,{validate:async i=>{const s=await EP(e,i);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Oot(e){return"_zod"in e}function Pot(e,t){return Oot(e)?Iot(e):Rot(e)}var nO=Symbol.for("vercel.ai.schema");function o5(e,{validate:t}={}){return{[nO]:!0,_type:void 0,[Kk]:!0,jsonSchema:e,validate:t}}function Dot(e){return typeof e=="object"&&e!==null&&nO in e&&e[nO]===!0&&"jsonSchema"in e&&"validate"in e}function WE(e){return e==null?o5({properties:{},additionalProperties:!1}):Dot(e)?e:Pot(e)}var{btoa:$ot,atob:jot}=globalThis;function cae(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=jot(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function rO(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return $ot(t)}function Lot(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*uae({execute:e,input:t,options:n}){const r=e(t,n);if(Lot(r)){let o;for await(const i of r)o=i,yield{type:"preliminary",output:i};yield{type:"final",output:o}}else yield{type:"final",output:await r}}class EH extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function _M(e){}function zot(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=_M,onError:n=_M,onRetry:r=_M,onComment:o}=e;let i="",s=!0,a,l="",c="";function u(b){const w=s?b.replace(/^\xEF\xBB\xBF/,""):b,[S,E]=Bot(`${i}${w}`);for(const T of S)f(T);i=E,s=!1}function f(b){if(b===""){m();return}if(b.startsWith(":")){o&&o(b.slice(b.startsWith(": ")?2:1));return}const w=b.indexOf(":");if(w!==-1){const S=b.slice(0,w),E=b[w+1]===" "?2:1,T=b.slice(w+E);p(S,T,b);return}p(b,"",b)}function p(b,w,S){switch(b){case"event":c=w;break;case"data":l=`${l}${w}
`;break;case"id":a=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?r(parseInt(w,10)):n(new EH(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:S}));break;default:n(new EH(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:w,line:S}));break}}function m(){l.length>0&&t({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function y(b={}){i&&b.consume&&f(i),s=!0,a=void 0,l="",c="",i=""}return{feed:u,reset:y}}function Bot(e){const t=[];let n="",r=0;for(;r<e.length;){const o=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(o!==-1&&i!==-1?s=Math.min(o,i):o!==-1?s=o:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const a=e.slice(r,s);t.push(a),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class Fot extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let o;super({start(i){o=zot({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){o.feed(i)}})}}var Vot={};function oO(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Ov(e){return Object.fromEntries([...e.headers])}var Hot=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=()=>{const i=n.length,s=new Array(t);for(let a=0;a<t;a++)s[a]=n[Math.random()*i|0];return s.join("")};if(e==null)return o;if(n.includes(r))throw new wE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${o()}`};Hot();function Ob(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var Uot=["fetch failed","failed to fetch"];function dae({error:e,url:t,requestBodyValues:n}){if(Ob(e))return e;if(e instanceof TypeError&&Uot.includes(e.message.toLowerCase())){const r=e.cause;if(r!=null)return new tr({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function fae(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}var Got=()=>globalThis.fetch,qot=async({url:e,headers:t={},successfulResponseHandler:n,failedResponseHandler:r,abortSignal:o,fetch:i=Got()})=>{try{const s=await i(e,{method:"GET",headers:fae(t),signal:o}),a=Ov(s);if(!s.ok){let l;try{l=await r({response:s,url:e,requestBodyValues:{}})}catch(c){throw Ob(c)||tr.isInstance(c)?c:new tr({message:"Failed to process error response",cause:c,statusCode:s.status,url:e,responseHeaders:a,requestBodyValues:{}})}throw l.value}try{return await n({response:s,url:e,requestBodyValues:{}})}catch(l){throw l instanceof Error&&(Ob(l)||tr.isInstance(l))?l:new tr({message:"Failed to process successful response",cause:l,statusCode:s.status,url:e,responseHeaders:a,requestBodyValues:{}})}}catch(s){throw dae({error:s,url:e,requestBodyValues:{}})}};function Nw({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=Vot[t],!(e==null||typeof e!="string")))return e}var Zot=/"__proto__"\s*:/,Wot=/"constructor"\s*:/;function Kot(e){const t=JSON.parse(e);return t===null||typeof t!="object"||Zot.test(e)===!1&&Wot.test(e)===!1?t:Yot(t)}function Yot(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const o in r){const i=r[o];i&&typeof i=="object"&&t.push(i)}}}return e}function hae(e){const{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{return Kot(e)}finally{Error.stackTraceLimit=t}}var iO=Symbol.for("vercel.ai.validator");function Jot(e){return{[iO]:!0,validate:e}}function Xot(e){return typeof e=="object"&&e!==null&&iO in e&&e[iO]===!0&&"validate"in e}function Qot(e){return Xot(e)?e:eit(e)}function eit(e){return Jot(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new qi({value:t,cause:n.issues})}})}async function tit({value:e,schema:t}){const n=await pae({value:e,schema:t});if(!n.success)throw qi.wrap({value:e,cause:n.error});return n.value}async function pae({value:e,schema:t}){const n=Qot(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:qi.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:qi.wrap({value:e,cause:r}),rawValue:e}}}async function nit({text:e,schema:t}){try{const n=hae(e);return t==null?n:tit({value:n,schema:t})}catch(n){throw Xl.isInstance(n)||qi.isInstance(n)?n:new Xl({text:e,cause:n})}}async function mae({text:e,schema:t}){try{const n=hae(e);return t==null?{success:!0,value:n,rawValue:n}:await pae({value:n,schema:t})}catch(n){return{success:!1,error:Xl.isInstance(n)?n:new Xl({text:e,cause:n}),rawValue:void 0}}}function rit({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Fot).pipeThrough(new TransformStream({async transform({data:n},r){n!=="[DONE]"&&r.enqueue(await mae({text:n,schema:t}))}}))}var oit=()=>globalThis.fetch,sO=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:o,abortSignal:i,fetch:s})=>iit({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:o,abortSignal:i,fetch:s}),iit=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:o,abortSignal:i,fetch:s=oit()})=>{try{const a=await s(e,{method:"POST",headers:fae(t),body:n.content,signal:i}),l=Ov(a);if(!a.ok){let c;try{c=await o({response:a,url:e,requestBodyValues:n.values})}catch(u){throw Ob(u)||tr.isInstance(u)?u:new tr({message:"Failed to process error response",cause:u,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Ob(c)||tr.isInstance(c))?c:new tr({message:"Failed to process successful response",cause:c,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(a){throw dae({error:a,url:e,requestBodyValues:n.values})}};async function Bf(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Jk=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:o,requestBodyValues:i})=>{const s=await r.text(),a=Ov(r);if(s.trim()==="")return{responseHeaders:a,value:new tr({message:r.statusText,url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,isRetryable:n?.(r)})};try{const l=await nit({text:s,schema:e});return{responseHeaders:a,value:new tr({message:t(l),url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new tr({message:r.statusText,url:o,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:s,isRetryable:n?.(r)})}}},sit=e=>async({response:t})=>{const n=Ov(t);if(t.body==null)throw new Yte({});return{responseHeaders:n,value:rit({stream:t.body,schema:e})}},i5=e=>async({response:t,url:n,requestBodyValues:r})=>{const o=await t.text(),i=await mae({text:o,schema:e}),s=Ov(t);if(!i.success)throw new tr({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:o,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}};function ait(e){return e?.replace(/\/$/,"")}var lit={},cit="vercel.ai.gateway.error",AM=Symbol.for(cit),TH,_H,Is=class gae extends(_H=Error,TH=AM,_H){constructor({message:t,statusCode:n=500,cause:r}){super(t),this[TH]=!0,this.statusCode=n,this.cause=r}static isInstance(t){return gae.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&AM in t&&t[AM]===!0}},yae="GatewayAuthenticationError",uit=`vercel.ai.gateway.error.${yae}`,AH=Symbol.for(uit),MH,NH,KE=class bae extends(NH=Is,MH=AH,NH){constructor({message:t="Authentication failed",statusCode:n=401,cause:r}={}){super({message:t,statusCode:n,cause:r}),this[MH]=!0,this.name=yae,this.type="authentication_error"}static isInstance(t){return Is.hasMarker(t)&&AH in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:n,message:r="Authentication failed",statusCode:o=401,cause:i}){let s;return t?s=`AI Gateway authentication failed: Invalid API key provided.

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:n?s=`AI Gateway authentication failed: Invalid OIDC token provided.

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed

Alternative: Provide an API key via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:s=`AI Gateway authentication failed: No authentication provided.

Provide either an API key or OIDC token.

API key instructions:

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

OIDC token instructions:

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed`,new bae({message:s,statusCode:o,cause:i})}},vae="GatewayInvalidRequestError",dit=`vercel.ai.gateway.error.${vae}`,RH=Symbol.for(dit),IH,OH,fit=class extends(OH=Is,IH=RH,OH){constructor({message:e="Invalid request",statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[IH]=!0,this.name=vae,this.type="invalid_request_error"}static isInstance(e){return Is.hasMarker(e)&&RH in e}},xae="GatewayRateLimitError",hit=`vercel.ai.gateway.error.${xae}`,PH=Symbol.for(hit),DH,$H,pit=class extends($H=Is,DH=PH,$H){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[DH]=!0,this.name=xae,this.type="rate_limit_exceeded"}static isInstance(e){return Is.hasMarker(e)&&PH in e}},wae="GatewayModelNotFoundError",mit=`vercel.ai.gateway.error.${wae}`,jH=Symbol.for(mit),git=fe({modelId:Q()}),LH,zH,Sae=class extends(zH=Is,LH=jH,zH){constructor({message:e="Model not found",statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[LH]=!0,this.name=wae,this.type="model_not_found",this.modelId=n}static isInstance(e){return Is.hasMarker(e)&&jH in e}},kae="GatewayInternalServerError",yit=`vercel.ai.gateway.error.${kae}`,BH=Symbol.for(yit),FH,VH,HH=class extends(VH=Is,FH=BH,VH){constructor({message:e="Internal server error",statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[FH]=!0,this.name=kae,this.type="internal_server_error"}static isInstance(e){return Is.hasMarker(e)&&BH in e}},Cae="GatewayResponseError",bit=`vercel.ai.gateway.error.${Cae}`,UH=Symbol.for(bit),GH,qH,vit=class extends(qH=Is,GH=UH,qH){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:n,validationError:r,cause:o}={}){super({message:e,statusCode:t,cause:o}),this[GH]=!0,this.name=Cae,this.type="response_error",this.response=n,this.validationError=r}static isInstance(e){return Is.hasMarker(e)&&UH in e}};function ZH({response:e,statusCode:t,defaultMessage:n="Gateway request failed",cause:r,authMethod:o}){const i=xit.safeParse(e);if(!i.success)return new vit({message:`Invalid error response format: ${n}`,statusCode:t,response:e,validationError:i.error,cause:r});const s=i.data,a=s.error.type,l=s.error.message;switch(a){case"authentication_error":return KE.createContextualError({apiKeyProvided:o==="api-key",oidcTokenProvided:o==="oidc",statusCode:t,cause:r});case"invalid_request_error":return new fit({message:l,statusCode:t,cause:r});case"rate_limit_exceeded":return new pit({message:l,statusCode:t,cause:r});case"model_not_found":{const c=git.safeParse(s.error.param);return new Sae({message:l,statusCode:t,modelId:c.success?c.data.modelId:void 0,cause:r})}case"internal_server_error":return new HH({message:l,statusCode:t,cause:r});default:return new HH({message:l,statusCode:t,cause:r})}}var xit=fe({error:fe({message:Q(),type:Q().nullish(),param:tn().nullish(),code:It([Q(),Qt()]).nullish()})});function Pb(e,t){var n;return Is.isInstance(e)?e:tr.isInstance(e)?ZH({response:wit(e),statusCode:(n=e.statusCode)!=null?n:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):ZH({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function wit(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var Eae="ai-gateway-auth-method";function Xk(e){const t=Sit.safeParse(e[Eae]);return t.success?t.data:void 0}var Sit=It([Me("api-key"),Me("oidc")]),kit=class{constructor(e){this.config=e}async getAvailableModels(){try{const{value:e}=await qot({url:`${this.config.baseURL}/config`,headers:await Bf(this.config.headers()),successfulResponseHandler:i5(_it),failedResponseHandler:Jk({errorSchema:Gp(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw Pb(e)}}},Cit=fe({specificationVersion:Me("v2"),provider:Q(),modelId:Q()}),Eit=fe({input:Q(),output:Q()}),Tit=fe({id:Q(),name:Q(),description:Q().nullish(),pricing:Eit.nullish(),specification:Cit}),_it=fe({models:xt(Tit)}),Ait=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){const{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,o=await Bf(this.config.headers());try{const{responseHeaders:i,value:s,rawValue:a}=await sO({url:this.getUrl(),headers:oO(o,e.headers,this.getModelConfigHeaders(this.modelId,!1),await Bf(this.config.o11yHeaders)),body:t,successfulResponseHandler:i5(Gp()),failedResponseHandler:Jk({errorSchema:Gp(),errorToMessage:l=>l}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...s,request:{body:t},response:{headers:i,body:a},warnings:n}}catch(i){throw Pb(i,Xk(o))}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,o=await Bf(this.config.headers());try{const{value:i,responseHeaders:s}=await sO({url:this.getUrl(),headers:oO(o,e.headers,this.getModelConfigHeaders(this.modelId,!0),await Bf(this.config.o11yHeaders)),body:t,successfulResponseHandler:sit(Gp()),failedResponseHandler:Jk({errorSchema:Gp(),errorToMessage:a=>a}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:i.pipeThrough(new TransformStream({start(a){n.length>0&&a.enqueue({type:"stream-start",warnings:n})},transform(a,l){if(a.success){const c=a.value;if(c.type==="raw"&&!e.includeRawChunks)return;c.type==="response-metadata"&&c.timestamp&&typeof c.timestamp=="string"&&(c.timestamp=new Date(c.timestamp)),l.enqueue(c)}else l.error(a.error)}})),request:{body:t},response:{headers:s}}}catch(i){throw Pb(i,Xk(o))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(const t of e.prompt)for(const n of t.content)if(this.isFilePart(n)){const r=n;if(r.data instanceof Uint8Array){const o=Uint8Array.from(r.data),i=Buffer.from(o).toString("base64");r.data=new URL(`data:${r.mediaType||"application/octet-stream"};base64,${i}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},Mit=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){var o;const i=await Bf(this.config.headers());try{const{responseHeaders:s,value:a,rawValue:l}=await sO({url:this.getUrl(),headers:oO(i,t??{},this.getModelConfigHeaders(),await Bf(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...r??{}},successfulResponseHandler:i5(Nit),failedResponseHandler:Jk({errorSchema:Gp(),errorToMessage:c=>c}),...n&&{abortSignal:n},fetch:this.config.fetch});return{embeddings:a.embeddings,usage:(o=a.usage)!=null?o:void 0,providerMetadata:a.providerMetadata,response:{headers:s,body:l}}}catch(s){throw Pb(s,Xk(i))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},Nit=fe({embeddings:xt(xt(Qt())),usage:fe({tokens:Qt()}).nullish(),providerMetadata:Qc(Q(),Qc(Q(),tn())).optional()});async function Rit(){var e,t;const n=(t=(e=Tae().headers)==null?void 0:e["x-vercel-oidc-token"])!=null?t:lit.VERCEL_OIDC_TOKEN;if(!n)throw new KE({message:"OIDC token not available",statusCode:401});return n}async function Iit(){var e;return(e=Tae().headers)==null?void 0:e["x-vercel-id"]}var Oit=Symbol.for("@vercel/request-context");function Tae(){var e,t,n;return(n=(t=(e=globalThis[Oit])==null?void 0:e.get)==null?void 0:t.call(e))!=null?n:{}}var Pit="0.0.1";function Dit(e={}){var t,n;let r=null,o=null;const i=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5;let s=0;const a=(n=ait(e.baseURL))!=null?n:"https://ai-gateway.vercel.sh/v1/ai",l=async()=>{const m=await jit(e);if(m)return{Authorization:`Bearer ${m.token}`,"ai-gateway-protocol-version":Pit,[Eae]:m.authMethod,...e.headers};throw KE.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},c=()=>{const m=Nw({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),y=Nw({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),b=Nw({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const w=await Iit();return{...m&&{"ai-o11y-deployment-id":m},...y&&{"ai-o11y-environment":y},...b&&{"ai-o11y-region":b},...w&&{"ai-o11y-request-id":w}}}},u=m=>new Ait(m,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),f=async()=>{var m,y,b;const w=(b=(y=(m=e._internal)==null?void 0:m.currentDate)==null?void 0:y.call(m).getTime())!=null?b:Date.now();return(!r||w-s>i)&&(s=w,r=new kit({baseURL:a,headers:l,fetch:e.fetch}).getAvailableModels().then(S=>(o=S,S)).catch(async S=>{throw Pb(S,Xk(await l()))})),o?Promise.resolve(o):r},p=function(m){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return u(m)};return p.getAvailableModels=f,p.imageModel=m=>{throw new WBe({modelId:m,modelType:"imageModel"})},p.languageModel=u,p.textEmbeddingModel=m=>new Mit(m,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),p}var $it=Dit();async function jit(e){const t=Nw({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await Rit(),authMethod:"oidc"}}catch{return null}}var Lit=Object.defineProperty,zit=(e,t)=>{for(var n in t)Lit(e,n,{get:t[n],enumerable:!0})},_ae="AI_NoOutputSpecifiedError",Aae=`vercel.ai.error.${_ae}`,Bit=Symbol.for(Aae),Mae,Nae=class extends St{constructor({message:e="No output specified."}={}){super({name:_ae,message:e}),this[Mae]=!0}static isInstance(e){return St.hasMarker(e,Aae)}};Mae=Bit;var Rae="AI_InvalidArgumentError",Iae=`vercel.ai.error.${Rae}`,Fit=Symbol.for(Iae),Oae,Nl=class extends St{constructor({parameter:e,value:t,message:n}){super({name:Rae,message:`Invalid argument for parameter ${e}: ${n}`}),this[Oae]=!0,this.parameter=e,this.value=t}static isInstance(e){return St.hasMarker(e,Iae)}};Oae=Fit;var Pae="AI_InvalidToolInputError",Dae=`vercel.ai.error.${Pae}`,Vit=Symbol.for(Dae),$ae,jae=class extends St{constructor({toolInput:e,toolName:t,cause:n,message:r=`Invalid input for tool ${t}: ${mg(n)}`}){super({name:Pae,message:r,cause:n}),this[$ae]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return St.hasMarker(e,Dae)}};$ae=Vit;var Lae="AI_NoObjectGeneratedError",zae=`vercel.ai.error.${Lae}`,Hit=Symbol.for(zae),Bae,WH=class extends St{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:o,finishReason:i}){super({name:Lae,message:e,cause:t}),this[Bae]=!0,this.text=n,this.response=r,this.usage=o,this.finishReason=i}static isInstance(e){return St.hasMarker(e,zae)}};Bae=Hit;var Fae="AI_NoOutputGeneratedError",Vae=`vercel.ai.error.${Fae}`,Uit=Symbol.for(Vae),Hae,Git=class extends St{constructor({message:e="No output generated.",cause:t}={}){super({name:Fae,message:e,cause:t}),this[Hae]=!0}static isInstance(e){return St.hasMarker(e,Vae)}};Hae=Uit;var Uae="AI_NoSuchToolError",Gae=`vercel.ai.error.${Uae}`,qit=Symbol.for(Gae),qae,aO=class extends St{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:Uae,message:n}),this[qae]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return St.hasMarker(e,Gae)}};qae=qit;var Zae="AI_ToolCallRepairError",Wae=`vercel.ai.error.${Zae}`,Zit=Symbol.for(Wae),Kae,Wit=class extends St{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${mg(e)}`}){super({name:Zae,message:n,cause:e}),this[Kae]=!0,this.originalError=t}static isInstance(e){return St.hasMarker(e,Wae)}};Kae=Zit;var Kit=class extends St{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},Yae="AI_InvalidMessageRoleError",Jae=`vercel.ai.error.${Yae}`,Yit=Symbol.for(Jae),Xae,Jit=class extends St{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Yae,message:t}),this[Xae]=!0,this.role=e}static isInstance(e){return St.hasMarker(e,Jae)}};Xae=Yit;var Qae="AI_DownloadError",ele=`vercel.ai.error.${Qae}`,Xit=Symbol.for(ele),tle,MM=class extends St{constructor({url:e,statusCode:t,statusText:n,cause:r,message:o=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:Qae,message:o,cause:r}),this[tle]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return St.hasMarker(e,ele)}};tle=Xit;var nle="AI_RetryError",rle=`vercel.ai.error.${nle}`,Qit=Symbol.for(rle),ole,KH=class extends St{constructor({message:e,reason:t,errors:n}){super({name:nle,message:e}),this[ole]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return St.hasMarker(e,rle)}};ole=Qit;function Qk(e){if(typeof e!="string"){if(e.specificationVersion!=="v2")throw new Kit({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return est().languageModel(e)}function est(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:$it}var tst=[{mediaType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mediaType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mediaType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mediaType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mediaType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],nst=e=>{const t=typeof e=="string"?cae(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function rst(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?nst(e):e}function ost({data:e,signatures:t}){const n=rst(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((o,i)=>n[i]===o))return r.mediaType}async function ist({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new MM({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mediaType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw MM.isInstance(r)?r:new MM({url:n,cause:r})}}function sst(e){try{const[t,n]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mediaType:void 0,base64Content:void 0}}}var ile=It([Q(),Td(Uint8Array),Td(ArrayBuffer),Mee(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function sle(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol==="data:"){const{mediaType:t,base64Content:n}=sst(e.toString());if(t==null||n==null)throw new St({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:n,mediaType:t}}return{data:e,mediaType:void 0}}function ast(e){return typeof e=="string"?e:e instanceof ArrayBuffer?rO(new Uint8Array(e)):rO(e)}async function ale({prompt:e,supportedUrls:t,downloadImplementation:n=ist}){const r=await cst(e.messages,n,t);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(o=>lst({message:o,downloadedAssets:r}))]}function lst({message:e,downloadedAssets:t}){const n=e.role;switch(n){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(r=>ust(r,t)).filter(r=>r.type!=="text"||r.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(r=>r.type!=="text"||r.text!=="").map(r=>{const o=r.providerOptions;switch(r.type){case"file":{const{data:i,mediaType:s}=sle(r.data);return{type:"file",data:i,filename:r.filename,mediaType:s??r.mediaType,providerOptions:o}}case"reasoning":return{type:"reasoning",text:r.text,providerOptions:o};case"text":return{type:"text",text:r.text,providerOptions:o};case"tool-call":return{type:"tool-call",toolCallId:r.toolCallId,toolName:r.toolName,input:r.input,providerExecuted:r.providerExecuted,providerOptions:o};case"tool-result":return{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:o}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(r=>({type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:r.providerOptions})),providerOptions:e.providerOptions};default:{const r=n;throw new Jit({role:r})}}}async function cst(e,t,n){const r=e.filter(i=>i.role==="user").map(i=>i.content).filter(i=>Array.isArray(i)).flat().filter(i=>i.type==="image"||i.type==="file").map(i=>{var s;const a=(s=i.mediaType)!=null?s:i.type==="image"?"image/*":void 0;let l=i.type==="image"?i.image:i.data;if(typeof l=="string")try{l=new URL(l)}catch{}return{mediaType:a,data:l}}).filter(i=>i.data instanceof URL&&i.mediaType!=null&&!wot({url:i.data.toString(),mediaType:i.mediaType,supportedUrls:n})).map(i=>i.data),o=await Promise.all(r.map(async i=>({url:i,data:await t({url:i})})));return Object.fromEntries(o.map(({url:i,data:s})=>[i.toString(),s]))}function ust(e,t){var n;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let r;const o=e.type;switch(o){case"image":r=e.image;break;case"file":r=e.data;break;default:throw new Error(`Unsupported part type: ${o}`)}const{data:i,mediaType:s}=sle(r);let a=s??e.mediaType,l=i;if(l instanceof URL){const c=t[l.toString()];c&&(l=c.data,a??(a=c.mediaType))}switch(o){case"image":return(l instanceof Uint8Array||typeof l=="string")&&(a=(n=ost({data:l,signatures:tst}))!=null?n:a),{type:"file",mediaType:a??"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":{if(a==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:a,filename:e.filename,data:l,providerOptions:e.providerOptions}}}}function lO({maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:o,frequencyPenalty:i,seed:s,stopSequences:a}){if(e!=null){if(!Number.isInteger(e))throw new Nl({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new Nl({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Nl({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Nl({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Nl({parameter:"topK",value:r,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new Nl({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Nl({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Nl({parameter:"seed",value:s,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:o,frequencyPenalty:i,stopSequences:a,seed:s}}function dst(e){return e!=null&&Object.keys(e).length>0}function lle({tools:e,toolChoice:t,activeTools:n}){return dst(e)?{tools:(n!=null?Object.entries(e).filter(([o])=>n.includes(o)):Object.entries(e)).map(([o,i])=>{const s=i.type;switch(s){case void 0:case"dynamic":case"function":return{type:"function",name:o,description:i.description,inputSchema:WE(i.inputSchema).jsonSchema,providerOptions:i.providerOptions};case"provider-defined":return{type:"provider-defined",name:o,id:i.id,args:i.args};default:{const a=s;throw new Error(`Unsupported tool type: ${a}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var Db=Aee(()=>It([Cee(),Q(),Qt(),Jt(),Qc(Q(),Db),xt(Db)])),Xt=Qc(Q(),Qc(Q(),Db)),cle=fe({type:Me("text"),text:Q(),providerOptions:Xt.optional()}),fst=fe({type:Me("image"),image:It([ile,Td(URL)]),mediaType:Q().optional(),providerOptions:Xt.optional()}),ule=fe({type:Me("file"),data:It([ile,Td(URL)]),filename:Q().optional(),mediaType:Q(),providerOptions:Xt.optional()}),hst=fe({type:Me("reasoning"),text:Q(),providerOptions:Xt.optional()}),pst=fe({type:Me("tool-call"),toolCallId:Q(),toolName:Q(),input:tn(),providerOptions:Xt.optional(),providerExecuted:Jt().optional()}),mst=V6e("type",[fe({type:Me("text"),value:Q()}),fe({type:Me("json"),value:Db}),fe({type:Me("error-text"),value:Q()}),fe({type:Me("error-json"),value:Db}),fe({type:Me("content"),value:xt(It([fe({type:Me("text"),text:Q()}),fe({type:Me("media"),data:Q(),mediaType:Q()})]))})]),dle=fe({type:Me("tool-result"),toolCallId:Q(),toolName:Q(),output:mst,providerOptions:Xt.optional()}),gst=fe({role:Me("system"),content:Q(),providerOptions:Xt.optional()}),yst=fe({role:Me("user"),content:It([Q(),xt(It([cle,fst,ule]))]),providerOptions:Xt.optional()}),bst=fe({role:Me("assistant"),content:It([Q(),xt(It([cle,ule,hst,pst,dle]))]),providerOptions:Xt.optional()}),vst=fe({role:Me("tool"),content:xt(dle),providerOptions:Xt.optional()}),xst=It([gst,yst,bst,vst]);async function fle(e){if(e.prompt==null&&e.messages==null)throw new Ep({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Ep({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Ep({prompt:e,message:"system must be a string"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new Ep({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new Ep({prompt:e,message:"messages must not be empty"});const n=await Iv({value:t,schema:xt(xst)});if(!n.success)throw new Ep({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:n.error});return{messages:t,system:e.system}}function hle(e){return KE.isInstance(e)||Sae.isInstance(e)?new St({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}function Vm({operationId:e,telemetry:t}){return{"operation.name":`${e}${t?.functionId!=null?` ${t.functionId}`:""}`,"resource.name":t?.functionId,"ai.operationId":e,"ai.telemetry.functionId":t?.functionId}}function ple({model:e,settings:t,telemetry:n,headers:r}){var o;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,a])=>(i[`ai.settings.${s}`]=a,i),{}),...Object.entries((o=n?.metadata)!=null?o:{}).reduce((i,[s,a])=>(i[`ai.telemetry.metadata.${s}`]=a,i),{}),...Object.entries(r??{}).reduce((i,[s,a])=>(a!==void 0&&(i[`ai.request.headers.${s}`]=a),i),{})}}var wst={startSpan(){return Zx},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Zx);if(typeof n=="function")return n(Zx);if(typeof r=="function")return r(Zx)}},Zx={spanContext(){return Sst},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Sst={traceId:"",spanId:"",traceFlags:0};function mle({isEnabled:e=!1,tracer:t}={}){return e?t||Hee.getTracer("ai"):wst}function Hm({name:e,tracer:t,attributes:n,fn:r,endWhenDone:o=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return o&&i.end(),s}catch(s){try{s5(i,s)}finally{i.end()}throw s}})}function s5(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Dm.ERROR,message:t.message})):e.setStatus({code:Dm.ERROR})}function ua({telemetry:e,attributes:t}){return e?.isEnabled!==!0?{}:Object.entries(t).reduce((n,[r,o])=>{if(o==null)return n;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if(e?.recordInputs===!1)return n;const i=o.input();return i==null?n:{...n,[r]:i}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if(e?.recordOutputs===!1)return n;const i=o.output();return i==null?n:{...n,[r]:i}}return{...n,[r]:o}},{})}function gle(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(n=>n.type==="file"?{...n,data:n.data instanceof Uint8Array?ast(n.data):n.data}:n)})))}function yle(e,t){return{inputTokens:Ay(e.inputTokens,t.inputTokens),outputTokens:Ay(e.outputTokens,t.outputTokens),totalTokens:Ay(e.totalTokens,t.totalTokens),reasoningTokens:Ay(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:Ay(e.cachedInputTokens,t.cachedInputTokens)}}function Ay(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function cO(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function kst({error:e,exponentialBackoffDelay:t}){const n=e.responseHeaders;if(!n)return t;let r;const o=n["retry-after-ms"];if(o){const s=parseFloat(o);Number.isNaN(s)||(r=s)}const i=n["retry-after"];if(i&&r===void 0){const s=parseFloat(i);Number.isNaN(s)?r=Date.parse(i)-Date.now():r=s*1e3}return r!=null&&!Number.isNaN(r)&&0<=r&&(r<60*1e3||r<t)?r:t}var Cst=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2,abortSignal:r}={})=>async o=>ble(o,{maxRetries:e,delayInMs:t,backoffFactor:n,abortSignal:r});async function ble(e,{maxRetries:t,delayInMs:n,backoffFactor:r,abortSignal:o},i=[]){try{return await e()}catch(s){if(lae(s)||t===0)throw s;const a=r5(s),l=[...i,s],c=l.length;if(c>t)throw new KH({message:`Failed after ${c} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:l});if(s instanceof Error&&tr.isInstance(s)&&s.isRetryable===!0&&c<=t)return await vot(kst({error:s,exponentialBackoffDelay:n}),{abortSignal:o}),ble(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r,abortSignal:o},l);throw c===1?s:new KH({message:`Failed after ${c} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:l})}}function vle({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new Nl({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Nl({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const n=e??2;return{maxRetries:n,retry:Cst({maxRetries:n,abortSignal:t})}}function YH(e){const t=e.filter(n=>n.type==="text");if(t.length!==0)return t.map(n=>n.text).join("")}var xle=class{constructor({data:e,mediaType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=rO(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=cae(this.base64Data)),this.uint8ArrayData}},Est=class extends xle{constructor(e){super(e),this.type="file"}};async function wle({toolCall:e,tools:t,repairToolCall:n,system:r,messages:o}){try{if(t==null)throw new aO({toolName:e.toolName});try{return await JH({toolCall:e,tools:t})}catch(i){if(n==null||!(aO.isInstance(i)||jae.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,inputSchema:({toolName:a})=>{const{inputSchema:l}=t[a];return WE(l).jsonSchema},system:r,messages:o,error:i})}catch(a){throw new Wit({cause:a,originalError:i})}if(s==null)throw i;return await JH({toolCall:s,tools:t})}}catch(i){return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,dynamic:!0,invalid:!0,error:i}}}async function JH({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new aO({toolName:e.toolName,availableTools:Object.keys(t)});const o=WE(r.inputSchema),i=e.input.trim()===""?await Iv({value:{},schema:o}):await Yk({text:e.input,schema:o});if(i.success===!1)throw new jae({toolName:n,toolInput:e.input,cause:i.error});return r.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:n,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var Sle=class{constructor({content:e,finishReason:t,usage:n,warnings:r,request:o,response:i,providerMetadata:s}){this.content=e,this.finishReason=t,this.usage=n,this.warnings=r,this.request=o,this.response=i,this.providerMetadata=s}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!1)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic===!1)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function kle(e){return({steps:t})=>t.length===e}async function Cle({stopConditions:e,steps:t}){return(await Promise.all(e.map(n=>n({steps:t})))).some(n=>n)}function NM({output:e,tool:t,errorMode:n}){return n==="text"?{type:"error-text",value:mg(e)}:n==="json"?{type:"error-json",value:XH(e)}:t?.toModelOutput?t.toModelOutput(e):typeof e=="string"?{type:"text",value:e}:{type:"json",value:XH(e)}}function XH(e){return e===void 0?null:e}function uO({content:e,tools:t}){const n=[],r=e.filter(i=>i.type!=="source").filter(i=>(i.type!=="tool-result"||i.providerExecuted)&&(i.type!=="tool-error"||i.providerExecuted)).filter(i=>i.type!=="text"||i.text.length>0).map(i=>{switch(i.type){case"text":return{type:"text",text:i.text,providerOptions:i.providerMetadata};case"reasoning":return{type:"reasoning",text:i.text,providerOptions:i.providerMetadata};case"file":return{type:"file",data:i.file.base64,mediaType:i.file.mediaType,providerOptions:i.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,providerExecuted:i.providerExecuted,providerOptions:i.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:NM({tool:t?.[i.toolName],output:i.output,errorMode:"none"}),providerExecuted:!0,providerOptions:i.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:NM({tool:t?.[i.toolName],output:i.error,errorMode:"json"}),providerOptions:i.providerMetadata}}});r.length>0&&n.push({role:"assistant",content:r});const o=e.filter(i=>i.type==="tool-result"||i.type==="tool-error").filter(i=>!i.providerExecuted).map(i=>({type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:NM({tool:t?.[i.toolName],output:i.type==="tool-result"?i.output:i.error,errorMode:i.type==="tool-error"?"text":"none"})}));return o.length>0&&n.push({role:"tool",content:o}),n}var Tst=Rv({prefix:"aitxt",size:24});async function _st({model:e,tools:t,toolChoice:n,system:r,prompt:o,messages:i,maxRetries:s,abortSignal:a,headers:l,stopWhen:c=kle(1),experimental_output:u,experimental_telemetry:f,providerOptions:p,experimental_activeTools:m,activeTools:y=m,experimental_prepareStep:b,prepareStep:w=b,experimental_repairToolCall:S,experimental_context:E,_internal:{generateId:T=Tst,currentDate:A=()=>new Date}={},onStepFinish:M,...R}){const O=Qk(e),I=cO(c),{maxRetries:L,retry:$}=vle({maxRetries:s,abortSignal:a}),B=lO(R),G=ple({model:O,telemetry:f,headers:l,settings:{...B,maxRetries:L}}),V=await fle({system:r,prompt:o,messages:i}),W=mle(f);try{return await Hm({name:"ai.generateText",attributes:ua({telemetry:f,attributes:{...Vm({operationId:"ai.generateText",telemetry:f}),...G,"ai.model.provider":O.provider,"ai.model.id":O.modelId,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:o,messages:i})}}}),tracer:W,fn:async K=>{var F,q,H,z,N,U;const te=lO(R);let D,ce=[],ae=[];const pe=[],ie=[];do{const Re=[...V.messages,...pe],$e=await w?.({model:O,steps:ie,stepNumber:ie.length,messages:Re}),Be=await ale({prompt:{system:(F=$e?.system)!=null?F:V.system,messages:(q=$e?.messages)!=null?q:Re},supportedUrls:await O.supportedUrls}),je=Qk((H=$e?.model)!=null?H:O),{toolChoice:Le,tools:Pe}=lle({tools:t,toolChoice:(z=$e?.toolChoice)!=null?z:n,activeTools:(N=$e?.activeTools)!=null?N:y});D=await $(()=>{var Ve;return Hm({name:"ai.generateText.doGenerate",attributes:ua({telemetry:f,attributes:{...Vm({operationId:"ai.generateText.doGenerate",telemetry:f}),...G,"ai.model.provider":je.provider,"ai.model.id":je.modelId,"ai.prompt.messages":{input:()=>gle(Be)},"ai.prompt.tools":{input:()=>Pe?.map(nt=>JSON.stringify(nt))},"ai.prompt.toolChoice":{input:()=>Le!=null?JSON.stringify(Le):void 0},"gen_ai.system":je.provider,"gen_ai.request.model":je.modelId,"gen_ai.request.frequency_penalty":R.frequencyPenalty,"gen_ai.request.max_tokens":R.maxOutputTokens,"gen_ai.request.presence_penalty":R.presencePenalty,"gen_ai.request.stop_sequences":R.stopSequences,"gen_ai.request.temperature":(Ve=R.temperature)!=null?Ve:void 0,"gen_ai.request.top_k":R.topK,"gen_ai.request.top_p":R.topP}}),tracer:W,fn:async nt=>{var kn,Dr,or,hr,Ft,Y,he,De;const Oe=await je.doGenerate({...te,tools:Pe,toolChoice:Le,responseFormat:u?.responseFormat,prompt:Be,providerOptions:p,abortSignal:a,headers:l}),et={id:(Dr=(kn=Oe.response)==null?void 0:kn.id)!=null?Dr:T(),timestamp:(hr=(or=Oe.response)==null?void 0:or.timestamp)!=null?hr:A(),modelId:(Y=(Ft=Oe.response)==null?void 0:Ft.modelId)!=null?Y:je.modelId,headers:(he=Oe.response)==null?void 0:he.headers,body:(De=Oe.response)==null?void 0:De.body};return nt.setAttributes(ua({telemetry:f,attributes:{"ai.response.finishReason":Oe.finishReason,"ai.response.text":{output:()=>YH(Oe.content)},"ai.response.toolCalls":{output:()=>{const rn=QH(Oe.content);return rn==null?void 0:JSON.stringify(rn)}},"ai.response.id":et.id,"ai.response.model":et.modelId,"ai.response.timestamp":et.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(Oe.providerMetadata),"ai.usage.promptTokens":Oe.usage.inputTokens,"ai.usage.completionTokens":Oe.usage.outputTokens,"gen_ai.response.finish_reasons":[Oe.finishReason],"gen_ai.response.id":et.id,"gen_ai.response.model":et.modelId,"gen_ai.usage.input_tokens":Oe.usage.inputTokens,"gen_ai.usage.output_tokens":Oe.usage.outputTokens}})),{...Oe,response:et}}})});const me=await Promise.all(D.content.filter(Ve=>Ve.type==="tool-call").map(Ve=>wle({toolCall:Ve,tools:t,repairToolCall:S,system:r,messages:Re})));for(const Ve of me){if(Ve.invalid)continue;const nt=t[Ve.toolName];nt?.onInputAvailable!=null&&await nt.onInputAvailable({input:Ve.input,toolCallId:Ve.toolCallId,messages:Re,abortSignal:a,experimental_context:E})}const _e=me.filter(Ve=>Ve.invalid&&Ve.dynamic);ae=[];for(const Ve of _e)ae.push({type:"tool-error",toolCallId:Ve.toolCallId,toolName:Ve.toolName,input:Ve.input,error:r5(Ve.error),dynamic:!0});ce=me.filter(Ve=>!Ve.providerExecuted),t!=null&&ae.push(...await Ast({toolCalls:ce.filter(Ve=>!Ve.invalid),tools:t,tracer:W,telemetry:f,messages:Re,abortSignal:a,experimental_context:E}));const xe=Nst({content:D.content,toolCalls:me,toolOutputs:ae});pe.push(...uO({content:xe,tools:t}));const Ie=new Sle({content:xe,finishReason:D.finishReason,usage:D.usage,warnings:D.warnings,providerMetadata:D.providerMetadata,request:(U=D.request)!=null?U:{},response:{...D.response,messages:structuredClone(pe)}});ie.push(Ie),await M?.(Ie)}while(ce.length>0&&ae.length===ce.length&&!await Cle({stopConditions:I,steps:ie}));K.setAttributes(ua({telemetry:f,attributes:{"ai.response.finishReason":D.finishReason,"ai.response.text":{output:()=>YH(D.content)},"ai.response.toolCalls":{output:()=>{const Re=QH(D.content);return Re==null?void 0:JSON.stringify(Re)}},"ai.response.providerMetadata":JSON.stringify(D.providerMetadata),"ai.usage.promptTokens":D.usage.inputTokens,"ai.usage.completionTokens":D.usage.outputTokens}}));const ye=ie[ie.length-1];return new Mst({steps:ie,resolvedOutput:await u?.parseOutput({text:ye.text},{response:ye.response,usage:ye.usage,finishReason:ye.finishReason})})}})}catch(K){throw hle(K)}}async function Ast({toolCalls:e,tools:t,tracer:n,telemetry:r,messages:o,abortSignal:i,experimental_context:s}){return(await Promise.all(e.map(async({toolCallId:l,toolName:c,input:u})=>{const f=t[c];if(f?.execute!=null)return Hm({name:"ai.toolCall",attributes:ua({telemetry:r,attributes:{...Vm({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":c,"ai.toolCall.id":l,"ai.toolCall.args":{output:()=>JSON.stringify(u)}}}),tracer:n,fn:async p=>{try{const m=uae({execute:f.execute.bind(f),input:u,options:{toolCallId:l,messages:o,abortSignal:i,experimental_context:s}});let y;for await(const b of m)b.type==="final"&&(y=b.output);try{p.setAttributes(ua({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(y)}}}))}catch{}return{type:"tool-result",toolCallId:l,toolName:c,input:u,output:y,dynamic:f.type==="dynamic"}}catch(m){return s5(p,m),{type:"tool-error",toolCallId:l,toolName:c,input:u,error:m,dynamic:f.type==="dynamic"}}}})}))).filter(l=>l!=null)}var Mst=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>yle(e,t.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(this.resolvedOutput==null)throw new Nae;return this.resolvedOutput}};function QH(e){const t=e.filter(n=>n.type==="tool-call");if(t.length!==0)return t.map(n=>({toolCallId:n.toolCallId,toolName:n.toolName,input:n.input}))}function Nst({content:e,toolCalls:t,toolOutputs:n}){return[...e.map(r=>{switch(r.type){case"text":case"reasoning":case"source":return r;case"file":return{type:"file",file:new xle(r)};case"tool-call":return t.find(o=>o.toolCallId===r.toolCallId);case"tool-result":{const o=t.find(i=>i.toolCallId===r.toolCallId);if(o==null)throw new Error(`Tool call ${r.toolCallId} not found.`);return r.isError?{type:"tool-error",toolCallId:r.toolCallId,toolName:r.toolName,input:o.input,error:r.result,providerExecuted:!0,dynamic:o.dynamic}:{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,input:o.input,output:r.result,providerExecuted:!0,dynamic:o.dynamic}}}}),...n]}function YE(e,t){const n=new Headers(e??{});for(const[r,o]of Object.entries(t))n.has(r)||n.set(r,o);return n}function Rst({status:e,statusText:t,headers:n,textStream:r}){return new Response(r.pipeThrough(new TextEncoderStream),{status:e??200,statusText:t,headers:YE(n,{"content-type":"text/plain; charset=utf-8"})})}function Ele({response:e,status:t,statusText:n,headers:r,stream:o}){e.writeHead(t??200,n,r);const i=o.getReader();(async()=>{try{for(;;){const{done:a,value:l}=await i.read();if(a)break;e.write(l)}}catch(a){throw a}finally{e.end()}})()}function Ist({response:e,status:t,statusText:n,headers:r,textStream:o}){Ele({response:e,status:t,statusText:n,headers:Object.fromEntries(YE(r,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:o.pipeThrough(new TextEncoderStream)})}var Tle=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}},_le={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"};function Ost({status:e,statusText:t,headers:n,stream:r,consumeSseStream:o}){let i=r.pipeThrough(new Tle);if(o){const[s,a]=i.tee();i=s,o({stream:a})}return new Response(i.pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:YE(n,_le)})}function Pst({originalMessages:e,responseMessageId:t}){if(e==null)return;const n=e[e.length-1];return n?.role==="assistant"?n.id:typeof t=="function"?t():t}It([Un({type:Me("text-start"),id:Q(),providerMetadata:Xt.optional()}),Un({type:Me("text-delta"),id:Q(),delta:Q(),providerMetadata:Xt.optional()}),Un({type:Me("text-end"),id:Q(),providerMetadata:Xt.optional()}),Un({type:Me("error"),errorText:Q()}),Un({type:Me("tool-input-start"),toolCallId:Q(),toolName:Q(),providerExecuted:Jt().optional(),dynamic:Jt().optional()}),Un({type:Me("tool-input-delta"),toolCallId:Q(),inputTextDelta:Q()}),Un({type:Me("tool-input-available"),toolCallId:Q(),toolName:Q(),input:tn(),providerExecuted:Jt().optional(),providerMetadata:Xt.optional(),dynamic:Jt().optional()}),Un({type:Me("tool-input-error"),toolCallId:Q(),toolName:Q(),input:tn(),providerExecuted:Jt().optional(),providerMetadata:Xt.optional(),dynamic:Jt().optional(),errorText:Q()}),Un({type:Me("tool-output-available"),toolCallId:Q(),output:tn(),providerExecuted:Jt().optional(),dynamic:Jt().optional(),preliminary:Jt().optional()}),Un({type:Me("tool-output-error"),toolCallId:Q(),errorText:Q(),providerExecuted:Jt().optional(),dynamic:Jt().optional()}),Un({type:Me("reasoning"),text:Q(),providerMetadata:Xt.optional()}),Un({type:Me("reasoning-start"),id:Q(),providerMetadata:Xt.optional()}),Un({type:Me("reasoning-delta"),id:Q(),delta:Q(),providerMetadata:Xt.optional()}),Un({type:Me("reasoning-end"),id:Q(),providerMetadata:Xt.optional()}),Un({type:Me("reasoning-part-finish")}),Un({type:Me("source-url"),sourceId:Q(),url:Q(),title:Q().optional(),providerMetadata:Xt.optional()}),Un({type:Me("source-document"),sourceId:Q(),mediaType:Q(),title:Q(),filename:Q().optional(),providerMetadata:Xt.optional()}),Un({type:Me("file"),url:Q(),mediaType:Q(),providerMetadata:Xt.optional()}),Un({type:Q().startsWith("data-"),id:Q().optional(),data:tn(),transient:Jt().optional()}),Un({type:Me("start-step")}),Un({type:Me("finish-step")}),Un({type:Me("start"),messageId:Q().optional(),messageMetadata:tn().optional()}),Un({type:Me("finish"),messageMetadata:tn().optional()}),Un({type:Me("abort")}),Un({type:Me("message-metadata"),messageMetadata:tn()})]);function Dst(e){return e.type.startsWith("data-")}function Ale(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const o=t[r];if(o===void 0)continue;const i=r in e?e[r]:void 0,s=o!==null&&typeof o=="object"&&!Array.isArray(o)&&!(o instanceof Date)&&!(o instanceof RegExp),a=i!=null&&typeof i=="object"&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp);s&&a?n[r]=Ale(i,o):n[r]=o}return n}function $st(e){const t=["ROOT"];let n=-1,r=null;function o(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function s(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":o(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(r,l+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(c,l)):n=l;break}}}let a=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}async function Mle(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Yk({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Yk({text:$st(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}function RM(e){return e.type.startsWith("tool-")}function eU(e){return e.type.split("-").slice(1).join("-")}function jst({lastMessage:e,messageId:t}){return{message:e?.role==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Lst({stream:e,messageMetadataSchema:t,dataPartSchemas:n,runUpdateMessageJob:r,onError:o,onToolCall:i,onData:s}){return e.pipeThrough(new TransformStream({async transform(a,l){await r(async({state:c,write:u})=>{var f,p,m,y;function b(A){const R=c.message.parts.filter(RM).find(O=>O.toolCallId===A);if(R==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return R}function w(A){const R=c.message.parts.filter(O=>O.type==="dynamic-tool").find(O=>O.toolCallId===A);if(R==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return R}function S(A){var M;const R=c.message.parts.find(L=>RM(L)&&L.toolCallId===A.toolCallId),O=A,I=R;R!=null?(R.state=A.state,I.input=O.input,I.output=O.output,I.errorText=O.errorText,I.rawInput=O.rawInput,I.preliminary=O.preliminary,I.providerExecuted=(M=O.providerExecuted)!=null?M:R.providerExecuted,O.providerMetadata!=null&&R.state==="input-available"&&(R.callProviderMetadata=O.providerMetadata)):c.message.parts.push({type:`tool-${A.toolName}`,toolCallId:A.toolCallId,state:A.state,input:O.input,output:O.output,rawInput:O.rawInput,errorText:O.errorText,providerExecuted:O.providerExecuted,preliminary:O.preliminary,...O.providerMetadata!=null?{callProviderMetadata:O.providerMetadata}:{}})}function E(A){var M;const R=c.message.parts.find(L=>L.type==="dynamic-tool"&&L.toolCallId===A.toolCallId),O=A,I=R;R!=null?(R.state=A.state,I.toolName=A.toolName,I.input=O.input,I.output=O.output,I.errorText=O.errorText,I.rawInput=(M=O.rawInput)!=null?M:I.rawInput,I.preliminary=O.preliminary,O.providerMetadata!=null&&R.state==="input-available"&&(R.callProviderMetadata=O.providerMetadata)):c.message.parts.push({type:"dynamic-tool",toolName:A.toolName,toolCallId:A.toolCallId,state:A.state,input:O.input,output:O.output,errorText:O.errorText,preliminary:O.preliminary,...O.providerMetadata!=null?{callProviderMetadata:O.providerMetadata}:{}})}async function T(A){if(A!=null){const M=c.message.metadata!=null?Ale(c.message.metadata,A):A;t!=null&&await CH({value:M,schema:t}),c.message.metadata=M}}switch(a.type){case"text-start":{const A={type:"text",text:"",providerMetadata:a.providerMetadata,state:"streaming"};c.activeTextParts[a.id]=A,c.message.parts.push(A),u();break}case"text-delta":{const A=c.activeTextParts[a.id];A.text+=a.delta,A.providerMetadata=(f=a.providerMetadata)!=null?f:A.providerMetadata,u();break}case"text-end":{const A=c.activeTextParts[a.id];A.state="done",A.providerMetadata=(p=a.providerMetadata)!=null?p:A.providerMetadata,delete c.activeTextParts[a.id],u();break}case"reasoning-start":{const A={type:"reasoning",text:"",providerMetadata:a.providerMetadata,state:"streaming"};c.activeReasoningParts[a.id]=A,c.message.parts.push(A),u();break}case"reasoning-delta":{const A=c.activeReasoningParts[a.id];A.text+=a.delta,A.providerMetadata=(m=a.providerMetadata)!=null?m:A.providerMetadata,u();break}case"reasoning-end":{const A=c.activeReasoningParts[a.id];A.providerMetadata=(y=a.providerMetadata)!=null?y:A.providerMetadata,A.state="done",delete c.activeReasoningParts[a.id],u();break}case"file":{c.message.parts.push({type:"file",mediaType:a.mediaType,url:a.url}),u();break}case"source-url":{c.message.parts.push({type:"source-url",sourceId:a.sourceId,url:a.url,title:a.title,providerMetadata:a.providerMetadata}),u();break}case"source-document":{c.message.parts.push({type:"source-document",sourceId:a.sourceId,mediaType:a.mediaType,title:a.title,filename:a.filename,providerMetadata:a.providerMetadata}),u();break}case"tool-input-start":{const A=c.message.parts.filter(RM);c.partialToolCalls[a.toolCallId]={text:"",toolName:a.toolName,index:A.length,dynamic:a.dynamic},a.dynamic?E({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-streaming",input:void 0}):S({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-streaming",input:void 0,providerExecuted:a.providerExecuted}),u();break}case"tool-input-delta":{const A=c.partialToolCalls[a.toolCallId];A.text+=a.inputTextDelta;const{value:M}=await Mle(A.text);A.dynamic?E({toolCallId:a.toolCallId,toolName:A.toolName,state:"input-streaming",input:M}):S({toolCallId:a.toolCallId,toolName:A.toolName,state:"input-streaming",input:M}),u();break}case"tool-input-available":{a.dynamic?E({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-available",input:a.input,providerMetadata:a.providerMetadata}):S({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-available",input:a.input,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}),u(),i&&!a.providerExecuted&&await i({toolCall:a});break}case"tool-input-error":{a.dynamic?E({toolCallId:a.toolCallId,toolName:a.toolName,state:"output-error",input:a.input,errorText:a.errorText,providerMetadata:a.providerMetadata}):S({toolCallId:a.toolCallId,toolName:a.toolName,state:"output-error",input:void 0,rawInput:a.input,errorText:a.errorText,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}),u();break}case"tool-output-available":{if(a.dynamic){const A=w(a.toolCallId);E({toolCallId:a.toolCallId,toolName:A.toolName,state:"output-available",input:A.input,output:a.output,preliminary:a.preliminary})}else{const A=b(a.toolCallId);S({toolCallId:a.toolCallId,toolName:eU(A),state:"output-available",input:A.input,output:a.output,providerExecuted:a.providerExecuted,preliminary:a.preliminary})}u();break}case"tool-output-error":{if(a.dynamic){const A=w(a.toolCallId);E({toolCallId:a.toolCallId,toolName:A.toolName,state:"output-error",input:A.input,errorText:a.errorText})}else{const A=b(a.toolCallId);S({toolCallId:a.toolCallId,toolName:eU(A),state:"output-error",input:A.input,rawInput:A.rawInput,errorText:a.errorText})}u();break}case"start-step":{c.message.parts.push({type:"step-start"});break}case"finish-step":{c.activeTextParts={},c.activeReasoningParts={};break}case"start":{a.messageId!=null&&(c.message.id=a.messageId),await T(a.messageMetadata),(a.messageId!=null||a.messageMetadata!=null)&&u();break}case"finish":{await T(a.messageMetadata),a.messageMetadata!=null&&u();break}case"message-metadata":{await T(a.messageMetadata),a.messageMetadata!=null&&u();break}case"error":{o?.(new Error(a.errorText));break}default:if(Dst(a)){n?.[a.type]!=null&&await CH({value:a.data,schema:n[a.type]});const A=a;if(A.transient){s?.(A);break}const M=A.id!=null?c.message.parts.find(R=>A.type===R.type&&A.id===R.id):void 0;M!=null?M.data=A.data:c.message.parts.push(A),s?.(A),u()}}l.enqueue(a)})}}))}function zst({messageId:e,originalMessages:t=[],onFinish:n,onError:r,stream:o}){let i=t?.[t.length-1];i?.role!=="assistant"?i=void 0:e=i.id;let s=!1;const a=o.pipeThrough(new TransformStream({transform(u,f){if(u.type==="start"){const p=u;p.messageId==null&&e!=null&&(p.messageId=e)}u.type==="abort"&&(s=!0),f.enqueue(u)}}));if(n==null)return a;const l=jst({lastMessage:i?structuredClone(i):void 0,messageId:e??""});return Lst({stream:a,runUpdateMessageJob:async u=>{await u({state:l,write:()=>{}})},onError:r}).pipeThrough(new TransformStream({transform(u,f){f.enqueue(u)},async flush(){const u=l.message.id===i?.id;await n({isAborted:s,isContinuation:u,responseMessage:l.message,messages:[...u?t.slice(0,-1):t,l.message]})}}))}function Bst({response:e,status:t,statusText:n,headers:r,stream:o,consumeSseStream:i}){let s=o.pipeThrough(new Tle);if(i){const[a,l]=s.tee();s=a,i({stream:l})}Ele({response:e,status:t,statusText:n,headers:Object.fromEntries(YE(r,_le).entries()),stream:s.pipeThrough(new TextEncoderStream)})}function Wx(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:o}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:o}}}},t}async function Fst({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t?.(r)}finally{n.releaseLock()}}function tU(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function Vst(){let e=[],t=null,n=!1,r=tU();const o=()=>{n=!0,r.resolve(),e.forEach(s=>s.cancel()),e=[],t?.close()},i=async()=>{if(n&&e.length===0){t?.close();return}if(e.length===0)return r=tU(),await r.promise,i();try{const{value:s,done:a}=await e[0].read();a?(e.shift(),e.length>0?await i():n&&t?.close()):t?.enqueue(s)}catch(s){t?.error(s),e.shift(),o()}};return{stream:new ReadableStream({start(s){t=s},pull:i,async cancel(){for(const s of e)await s.cancel();e=[],n=!0}}),addStream:s=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(s.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&t?.close()},terminate:o}}var Kx=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise)}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}};function Hst(e,t){return new ReadableStream({async start(n){const r=e.getReader();try{for(;;){const{done:o,value:i}=await r.read();if(o){n.close();break}n.enqueue(i)}}catch(o){await t({error:o,controller:n})}},cancel(n){return e.cancel(n)}})}function Ust(){var e,t;return(t=(e=globalThis?.performance)==null?void 0:e.now())!=null?t:Date.now()}function Gst({tools:e,generatorStream:t,tracer:n,telemetry:r,system:o,messages:i,abortSignal:s,repairToolCall:a,experimental_context:l}){let c=null;const u=new ReadableStream({start(S){c=S}}),f=new Set,p=new Map;let m=!1,y;function b(){m&&f.size===0&&(y!=null&&c.enqueue(y),c.close())}const w=new TransformStream({async transform(S,E){const T=S.type;switch(T){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":{E.enqueue(S);break}case"file":{E.enqueue({type:"file",file:new Est({data:S.data,mediaType:S.mediaType})});break}case"finish":{y={type:"finish",finishReason:S.finishReason,usage:S.usage,providerMetadata:S.providerMetadata};break}case"tool-call":{try{const A=await wle({toolCall:S,tools:e,repairToolCall:a,system:o,messages:i});if(E.enqueue(A),A.invalid){c.enqueue({type:"tool-error",toolCallId:A.toolCallId,toolName:A.toolName,input:A.input,error:r5(A.error),dynamic:!0});break}const M=e[A.toolName];if(p.set(A.toolCallId,A.input),M.onInputAvailable!=null&&await M.onInputAvailable({input:A.input,toolCallId:A.toolCallId,messages:i,abortSignal:s,experimental_context:l}),M.execute!=null&&A.providerExecuted!==!0){const R=xot();f.add(R),Hm({name:"ai.toolCall",attributes:ua({telemetry:r,attributes:{...Vm({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":A.toolName,"ai.toolCall.id":A.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(A.input)}}}),tracer:n,fn:async O=>{let I;try{const L=uae({execute:M.execute.bind(M),input:A.input,options:{toolCallId:A.toolCallId,messages:i,abortSignal:s,experimental_context:l}});for await(const $ of L)c.enqueue({...A,type:"tool-result",output:$.output,...$.type==="preliminary"&&{preliminary:!0}}),$.type==="final"&&(I=$.output)}catch(L){s5(O,L),c.enqueue({...A,type:"tool-error",error:L}),f.delete(R),b();return}f.delete(R),b();try{O.setAttributes(ua({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(I)}}}))}catch{}}})}}catch(A){c.enqueue({type:"error",error:A})}break}case"tool-result":{const A=S.toolName;S.isError?c.enqueue({type:"tool-error",toolCallId:S.toolCallId,toolName:A,input:p.get(S.toolCallId),providerExecuted:S.providerExecuted,error:S.result}):E.enqueue({type:"tool-result",toolCallId:S.toolCallId,toolName:A,input:p.get(S.toolCallId),output:S.result,providerExecuted:S.providerExecuted});break}default:{const A=T;throw new Error(`Unhandled chunk type: ${A}`)}}},flush(){m=!0,b()}});return new ReadableStream({async start(S){return Promise.all([t.pipeThrough(w).pipeTo(new WritableStream({write(E){S.enqueue(E)},close(){}})),u.pipeTo(new WritableStream({write(E){S.enqueue(E)},close(){S.close()}}))])}})}var qst=Rv({prefix:"aitxt",size:24});function Zst({model:e,tools:t,toolChoice:n,system:r,prompt:o,messages:i,maxRetries:s,abortSignal:a,headers:l,stopWhen:c=kle(1),experimental_output:u,experimental_telemetry:f,prepareStep:p,providerOptions:m,experimental_activeTools:y,activeTools:b=y,experimental_repairToolCall:w,experimental_transform:S,includeRawChunks:E=!1,onChunk:T,onError:A=({error:V})=>{console.error(V)},onFinish:M,onAbort:R,onStepFinish:O,experimental_context:I,_internal:{now:L=Ust,generateId:$=qst,currentDate:B=()=>new Date}={},...G}){return new Kst({model:Qk(e),telemetry:f,headers:l,settings:G,maxRetries:s,abortSignal:a,system:r,prompt:o,messages:i,tools:t,toolChoice:n,transforms:cO(S),activeTools:b,repairToolCall:w,stopConditions:cO(c),output:u,providerOptions:m,prepareStep:p,includeRawChunks:E,onChunk:T,onError:A,onFinish:M,onAbort:R,onStepFinish:O,now:L,currentDate:B,generateId:$,experimental_context:I})}function Wst(e){if(!e)return new TransformStream({transform(s,a){a.enqueue({part:s,partialOutput:void 0})}});let t,n="",r="",o="";function i({controller:s,partialOutput:a=void 0}){s.enqueue({part:{type:"text-delta",id:t,text:r},partialOutput:a}),r=""}return new TransformStream({async transform(s,a){if(s.type==="finish-step"&&r.length>0&&i({controller:a}),s.type!=="text-delta"&&s.type!=="text-start"&&s.type!=="text-end"){a.enqueue({part:s,partialOutput:void 0});return}if(t==null)t=s.id;else if(s.id!==t){a.enqueue({part:s,partialOutput:void 0});return}if(s.type==="text-start"){a.enqueue({part:s,partialOutput:void 0});return}if(s.type==="text-end"){r.length>0&&i({controller:a}),a.enqueue({part:s,partialOutput:void 0});return}n+=s.text,r+=s.text;const l=await e.parsePartial({text:n});if(l!=null){const c=JSON.stringify(l.partial);c!==o&&(i({controller:a,partialOutput:l.partial}),o=c)}}})}var Kst=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:o,abortSignal:i,system:s,prompt:a,messages:l,tools:c,toolChoice:u,transforms:f,activeTools:p,repairToolCall:m,stopConditions:y,output:b,providerOptions:w,prepareStep:S,includeRawChunks:E,now:T,currentDate:A,generateId:M,onChunk:R,onError:O,onFinish:I,onAbort:L,onStepFinish:$,experimental_context:B}){this._totalUsage=new Kx,this._finishReason=new Kx,this._steps=new Kx,this.output=b,this.includeRawChunks=E,this.tools=c;let G,V=[];const W=[];let K,F,q={},H=[];const z=[];let N,U={},te={};const D=new TransformStream({async transform(je,Le){var Pe,me,_e;Le.enqueue(je);const{part:xe}=je;if((xe.type==="text-delta"||xe.type==="reasoning-delta"||xe.type==="source"||xe.type==="tool-call"||xe.type==="tool-result"||xe.type==="tool-input-start"||xe.type==="tool-input-delta"||xe.type==="raw")&&await R?.({chunk:xe}),xe.type==="error"&&await O({error:hle(xe.error)}),xe.type==="text-start"&&(U[xe.id]={type:"text",text:"",providerMetadata:xe.providerMetadata},V.push(U[xe.id])),xe.type==="text-delta"){const Ie=U[xe.id];if(Ie==null){Le.enqueue({part:{type:"error",error:`text part ${xe.id} not found`},partialOutput:void 0});return}Ie.text+=xe.text,Ie.providerMetadata=(Pe=xe.providerMetadata)!=null?Pe:Ie.providerMetadata}if(xe.type==="text-end"&&delete U[xe.id],xe.type==="reasoning-start"&&(te[xe.id]={type:"reasoning",text:"",providerMetadata:xe.providerMetadata},V.push(te[xe.id])),xe.type==="reasoning-delta"){const Ie=te[xe.id];if(Ie==null){Le.enqueue({part:{type:"error",error:`reasoning part ${xe.id} not found`},partialOutput:void 0});return}Ie.text+=xe.text,Ie.providerMetadata=(me=xe.providerMetadata)!=null?me:Ie.providerMetadata}if(xe.type==="reasoning-end"){const Ie=te[xe.id];if(Ie==null){Le.enqueue({part:{type:"error",error:`reasoning part ${xe.id} not found`},partialOutput:void 0});return}Ie.providerMetadata=(_e=xe.providerMetadata)!=null?_e:Ie.providerMetadata,delete te[xe.id]}if(xe.type==="file"&&V.push({type:"file",file:xe.file}),xe.type==="source"&&V.push(xe),xe.type==="tool-call"&&V.push(xe),xe.type==="tool-result"&&!xe.preliminary&&V.push(xe),xe.type==="tool-error"&&V.push(xe),xe.type==="start-step"&&(q=xe.request,H=xe.warnings),xe.type==="finish-step"){const Ie=uO({content:V,tools:c}),Ve=new Sle({content:V,finishReason:xe.finishReason,usage:xe.usage,warnings:H,request:q,response:{...xe.response,messages:[...W,...Ie]},providerMetadata:xe.providerMetadata});await $?.(Ve),z.push(Ve),V=[],te={},U={},W.push(...Ie),G.resolve()}xe.type==="finish"&&(F=xe.totalUsage,K=xe.finishReason)},async flush(je){try{if(z.length===0){const _e=new Git({message:"No output generated. Check the stream for errors."});Be._finishReason.reject(_e),Be._totalUsage.reject(_e),Be._steps.reject(_e);return}const Le=K??"unknown",Pe=F??{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};Be._finishReason.resolve(Le),Be._totalUsage.resolve(Pe),Be._steps.resolve(z);const me=z[z.length-1];await I?.({finishReason:Le,totalUsage:Pe,usage:me.usage,content:me.content,text:me.text,reasoningText:me.reasoningText,reasoning:me.reasoning,files:me.files,sources:me.sources,toolCalls:me.toolCalls,staticToolCalls:me.staticToolCalls,dynamicToolCalls:me.dynamicToolCalls,toolResults:me.toolResults,staticToolResults:me.staticToolResults,dynamicToolResults:me.dynamicToolResults,request:me.request,response:me.response,warnings:me.warnings,providerMetadata:me.providerMetadata,steps:z}),N.setAttributes(ua({telemetry:t,attributes:{"ai.response.finishReason":Le,"ai.response.text":{output:()=>me.text},"ai.response.toolCalls":{output:()=>{var _e;return(_e=me.toolCalls)!=null&&_e.length?JSON.stringify(me.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify(me.providerMetadata),"ai.usage.inputTokens":Pe.inputTokens,"ai.usage.outputTokens":Pe.outputTokens,"ai.usage.totalTokens":Pe.totalTokens,"ai.usage.reasoningTokens":Pe.reasoningTokens,"ai.usage.cachedInputTokens":Pe.cachedInputTokens}}))}catch(Le){je.error(Le)}finally{N.end()}}}),ce=Vst();this.addStream=ce.addStream,this.closeStream=ce.close;let ae=ce.stream;ae=Hst(ae,({error:je,controller:Le})=>{lae(je)&&i?.aborted?(L?.({steps:z}),Le.enqueue({type:"abort"}),Le.close()):Le.error(je)}),ae=ae.pipeThrough(new TransformStream({start(je){je.enqueue({type:"start"})}}));for(const je of f)ae=ae.pipeThrough(je({tools:c,stopStream(){ce.terminate()}}));this.baseStream=ae.pipeThrough(Wst(b)).pipeThrough(D);const{maxRetries:pe,retry:ie}=vle({maxRetries:o,abortSignal:i}),ye=mle(t),Re=lO(r),$e=ple({model:e,telemetry:t,headers:n,settings:{...Re,maxRetries:pe}}),Be=this;Hm({name:"ai.streamText",attributes:ua({telemetry:t,attributes:{...Vm({operationId:"ai.streamText",telemetry:t}),...$e,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:a,messages:l})}}}),tracer:ye,endWhenDone:!1,fn:async je=>{N=je;async function Le({currentStep:Pe,responseMessages:me,usage:_e}){var xe,Ie,Ve,nt,kn;const Dr=Be.includeRawChunks;G=new Kx;const or=await fle({system:s,prompt:a,messages:l}),hr=[...or.messages,...me],Ft=await S?.({model:e,steps:z,stepNumber:z.length,messages:hr}),Y=await ale({prompt:{system:(xe=Ft?.system)!=null?xe:or.system,messages:(Ie=Ft?.messages)!=null?Ie:hr},supportedUrls:await e.supportedUrls}),he=Qk((Ve=Ft?.model)!=null?Ve:e),{toolChoice:De,tools:Oe}=lle({tools:c,toolChoice:(nt=Ft?.toolChoice)!=null?nt:u,activeTools:(kn=Ft?.activeTools)!=null?kn:p}),{result:{stream:et,response:rn,request:Dn},doStreamSpan:mn,startTimestampMs:Tr}=await ie(()=>Hm({name:"ai.streamText.doStream",attributes:ua({telemetry:t,attributes:{...Vm({operationId:"ai.streamText.doStream",telemetry:t}),...$e,"ai.model.provider":he.provider,"ai.model.id":he.modelId,"ai.prompt.messages":{input:()=>gle(Y)},"ai.prompt.tools":{input:()=>Oe?.map(He=>JSON.stringify(He))},"ai.prompt.toolChoice":{input:()=>De!=null?JSON.stringify(De):void 0},"gen_ai.system":he.provider,"gen_ai.request.model":he.modelId,"gen_ai.request.frequency_penalty":Re.frequencyPenalty,"gen_ai.request.max_tokens":Re.maxOutputTokens,"gen_ai.request.presence_penalty":Re.presencePenalty,"gen_ai.request.stop_sequences":Re.stopSequences,"gen_ai.request.temperature":Re.temperature,"gen_ai.request.top_k":Re.topK,"gen_ai.request.top_p":Re.topP}}),tracer:ye,endWhenDone:!1,fn:async He=>({startTimestampMs:T(),doStreamSpan:He,result:await he.doStream({...Re,tools:Oe,toolChoice:De,responseFormat:b?.responseFormat,prompt:Y,providerOptions:w,abortSignal:i,headers:n,includeRawChunks:Dr})})})),Cn=Gst({tools:c,generatorStream:et,tracer:ye,telemetry:t,system:s,messages:hr,repairToolCall:m,abortSignal:i,experimental_context:B}),gn=Dn??{},Yn=[],Jn=[];let co;const Ji={};let Kr="unknown",ir={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},ki,uo=!0,pr={id:M(),timestamp:A(),modelId:e.modelId},Ci="";Be.addStream(Cn.pipeThrough(new TransformStream({async transform(He,Kt){var jo,sr,ln,Yt;if(He.type==="stream-start"){co=He.warnings;return}if(uo){const En=T()-Tr;uo=!1,mn.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":En}),mn.setAttributes({"ai.response.msToFirstChunk":En}),Kt.enqueue({type:"start-step",request:gn,warnings:co??[]})}const Lo=He.type;switch(Lo){case"text-start":case"text-end":{Kt.enqueue(He);break}case"text-delta":{He.delta.length>0&&(Kt.enqueue({type:"text-delta",id:He.id,text:He.delta,providerMetadata:He.providerMetadata}),Ci+=He.delta);break}case"reasoning-start":case"reasoning-end":{Kt.enqueue(He);break}case"reasoning-delta":{Kt.enqueue({type:"reasoning-delta",id:He.id,text:He.delta,providerMetadata:He.providerMetadata});break}case"tool-call":{Kt.enqueue(He),Yn.push(He);break}case"tool-result":{Kt.enqueue(He),He.preliminary||Jn.push(He);break}case"tool-error":{Kt.enqueue(He),Jn.push(He);break}case"response-metadata":{pr={id:(jo=He.id)!=null?jo:pr.id,timestamp:(sr=He.timestamp)!=null?sr:pr.timestamp,modelId:(ln=He.modelId)!=null?ln:pr.modelId};break}case"finish":{ir=He.usage,Kr=He.finishReason,ki=He.providerMetadata;const En=T()-Tr;mn.addEvent("ai.stream.finish"),mn.setAttributes({"ai.response.msToFinish":En,"ai.response.avgOutputTokensPerSecond":1e3*((Yt=ir.outputTokens)!=null?Yt:0)/En});break}case"file":{Kt.enqueue(He);break}case"source":{Kt.enqueue(He);break}case"tool-input-start":{Ji[He.id]=He.toolName;const En=c?.[He.toolName];En?.onInputStart!=null&&await En.onInputStart({toolCallId:He.id,messages:hr,abortSignal:i,experimental_context:B}),Kt.enqueue({...He,dynamic:En?.type==="dynamic"});break}case"tool-input-end":{delete Ji[He.id],Kt.enqueue(He);break}case"tool-input-delta":{const En=Ji[He.id],Xi=c?.[En];Xi?.onInputDelta!=null&&await Xi.onInputDelta({inputTextDelta:He.delta,toolCallId:He.id,messages:hr,abortSignal:i,experimental_context:B}),Kt.enqueue(He);break}case"error":{Kt.enqueue(He),Kr="error";break}case"raw":{Dr&&Kt.enqueue(He);break}default:{const En=Lo;throw new Error(`Unknown chunk type: ${En}`)}}},async flush(He){const Kt=Yn.length>0?JSON.stringify(Yn):void 0;try{mn.setAttributes(ua({telemetry:t,attributes:{"ai.response.finishReason":Kr,"ai.response.text":{output:()=>Ci},"ai.response.toolCalls":{output:()=>Kt},"ai.response.id":pr.id,"ai.response.model":pr.modelId,"ai.response.timestamp":pr.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(ki),"ai.usage.inputTokens":ir.inputTokens,"ai.usage.outputTokens":ir.outputTokens,"ai.usage.totalTokens":ir.totalTokens,"ai.usage.reasoningTokens":ir.reasoningTokens,"ai.usage.cachedInputTokens":ir.cachedInputTokens,"gen_ai.response.finish_reasons":[Kr],"gen_ai.response.id":pr.id,"gen_ai.response.model":pr.modelId,"gen_ai.usage.input_tokens":ir.inputTokens,"gen_ai.usage.output_tokens":ir.outputTokens}}))}catch{}finally{mn.end()}He.enqueue({type:"finish-step",finishReason:Kr,usage:ir,providerMetadata:ki,response:{...pr,headers:rn?.headers}});const jo=yle(_e,ir);await G.promise;const sr=Yn.filter(Yt=>Yt.providerExecuted!==!0),ln=Jn.filter(Yt=>Yt.providerExecuted!==!0);if(sr.length>0&&ln.length===sr.length&&!await Cle({stopConditions:y,steps:z})){me.push(...uO({content:z[z.length-1].content,tools:c}));try{await Le({currentStep:Pe+1,responseMessages:me,usage:jo})}catch(Yt){He.enqueue({type:"error",error:Yt}),Be.closeStream()}}else He.enqueue({type:"finish",finishReason:Kr,totalUsage:jo}),Be.closeStream()}})))}await Le({currentStep:0,responseMessages:[],usage:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0}})}}).catch(je=>{Be.addStream(new ReadableStream({start(Le){Le.enqueue({type:"error",error:je}),Le.close()}})),Be.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(e=>e[e.length-1])}get content(){return this.finalStep.then(e=>e.content)}get warnings(){return this.finalStep.then(e=>e.warnings)}get providerMetadata(){return this.finalStep.then(e=>e.providerMetadata)}get text(){return this.finalStep.then(e=>e.text)}get reasoningText(){return this.finalStep.then(e=>e.reasoningText)}get reasoning(){return this.finalStep.then(e=>e.reasoning)}get sources(){return this.finalStep.then(e=>e.sources)}get files(){return this.finalStep.then(e=>e.files)}get toolCalls(){return this.finalStep.then(e=>e.toolCalls)}get staticToolCalls(){return this.finalStep.then(e=>e.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(e=>e.dynamicToolCalls)}get toolResults(){return this.finalStep.then(e=>e.toolResults)}get staticToolResults(){return this.finalStep.then(e=>e.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(e=>e.dynamicToolResults)}get usage(){return this.finalStep.then(e=>e.usage)}get request(){return this.finalStep.then(e=>e.request)}get response(){return this.finalStep.then(e=>e.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return Wx(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.text)}})))}get fullStream(){return Wx(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await Fst({stream:this.fullStream,onError:e?.onError})}catch(n){(t=e?.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new Nae;return Wx(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:o=!0,sendSources:i=!1,sendStart:s=!0,sendFinish:a=!0,onError:l=mg}={}){const c=t!=null?Pst({originalMessages:e,responseMessageId:t}):void 0,u={},f=m=>{var y,b;const w=u[m];return((b=(y=this.tools)==null?void 0:y[w])==null?void 0:b.type)==="dynamic"?!0:void 0},p=this.fullStream.pipeThrough(new TransformStream({transform:async(m,y)=>{const b=r?.({part:m}),w=m.type;switch(w){case"text-start":{y.enqueue({type:"text-start",id:m.id,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"text-delta":{y.enqueue({type:"text-delta",id:m.id,delta:m.text,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"text-end":{y.enqueue({type:"text-end",id:m.id,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"reasoning-start":{y.enqueue({type:"reasoning-start",id:m.id,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"reasoning-delta":{o&&y.enqueue({type:"reasoning-delta",id:m.id,delta:m.text,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"reasoning-end":{y.enqueue({type:"reasoning-end",id:m.id,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"file":{y.enqueue({type:"file",mediaType:m.file.mediaType,url:`data:${m.file.mediaType};base64,${m.file.base64}`});break}case"source":{i&&m.sourceType==="url"&&y.enqueue({type:"source-url",sourceId:m.id,url:m.url,title:m.title,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}}),i&&m.sourceType==="document"&&y.enqueue({type:"source-document",sourceId:m.id,mediaType:m.mediaType,title:m.title,filename:m.filename,...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{}});break}case"tool-input-start":{u[m.id]=m.toolName;const S=f(m.id);y.enqueue({type:"tool-input-start",toolCallId:m.id,toolName:m.toolName,...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...S!=null?{dynamic:S}:{}});break}case"tool-input-delta":{y.enqueue({type:"tool-input-delta",toolCallId:m.id,inputTextDelta:m.delta});break}case"tool-call":{u[m.toolCallId]=m.toolName;const S=f(m.toolCallId);m.invalid?y.enqueue({type:"tool-input-error",toolCallId:m.toolCallId,toolName:m.toolName,input:m.input,...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{},...S!=null?{dynamic:S}:{},errorText:l(m.error)}):y.enqueue({type:"tool-input-available",toolCallId:m.toolCallId,toolName:m.toolName,input:m.input,...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...m.providerMetadata!=null?{providerMetadata:m.providerMetadata}:{},...S!=null?{dynamic:S}:{}});break}case"tool-result":{const S=f(m.toolCallId);y.enqueue({type:"tool-output-available",toolCallId:m.toolCallId,output:m.output,...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...m.preliminary!=null?{preliminary:m.preliminary}:{},...S!=null?{dynamic:S}:{}});break}case"tool-error":{const S=f(m.toolCallId);y.enqueue({type:"tool-output-error",toolCallId:m.toolCallId,errorText:l(m.error),...m.providerExecuted!=null?{providerExecuted:m.providerExecuted}:{},...S!=null?{dynamic:S}:{}});break}case"error":{y.enqueue({type:"error",errorText:l(m.error)});break}case"start-step":{y.enqueue({type:"start-step"});break}case"finish-step":{y.enqueue({type:"finish-step"});break}case"start":{s&&y.enqueue({type:"start",...b!=null?{messageMetadata:b}:{},...c!=null?{messageId:c}:{}});break}case"finish":{a&&y.enqueue({type:"finish",...b!=null?{messageMetadata:b}:{}});break}case"abort":{y.enqueue(m);break}case"tool-input-end":break;case"raw":break;default:{const S=w;throw new Error(`Unknown chunk type: ${S}`)}}b!=null&&w!=="start"&&w!=="finish"&&y.enqueue({type:"message-metadata",messageMetadata:b})}}));return Wx(zst({stream:p,messageId:c??t?.(),originalMessages:e,onFinish:n,onError:l}))}pipeUIMessageStreamToResponse(e,{originalMessages:t,generateMessageId:n,onFinish:r,messageMetadata:o,sendReasoning:i,sendSources:s,sendFinish:a,sendStart:l,onError:c,...u}={}){Bst({response:e,stream:this.toUIMessageStream({originalMessages:t,generateMessageId:n,onFinish:r,messageMetadata:o,sendReasoning:i,sendSources:s,sendFinish:a,sendStart:l,onError:c}),...u})}pipeTextStreamToResponse(e,t){Ist({response:e,textStream:this.textStream,...t})}toUIMessageStreamResponse({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:o,sendSources:i,sendFinish:s,sendStart:a,onError:l,...c}={}){return Ost({stream:this.toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:o,sendSources:i,sendFinish:s,sendStart:a,onError:l}),...c})}toTextStreamResponse(e){return Rst({textStream:this.textStream,...e})}};Rv({prefix:"aiobj",size:24});Rv({prefix:"aiobj",size:24});var Yst={};zit(Yst,{object:()=>Xst,text:()=>Jst});var Jst=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),Xst=({schema:e})=>{const t=WE(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:n}){const r=await Mle(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const o=r.state;throw new Error(`Unsupported parse state: ${o}`)}}},async parseOutput({text:n},r){const o=await Yk({text:n});if(!o.success)throw new WH({message:"No object generated: could not parse the response.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const i=await Iv({value:o.value,schema:t});if(!i.success)throw new WH({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return i.value}}},Qst=qp({name:Q(),version:Q()}),a5=qp({_meta:Pt(fe({}).loose())}),$b=a5,eat=fe({method:Q(),params:Pt(a5)}),tat=qp({experimental:Pt(fe({}).loose()),logging:Pt(fe({}).loose()),prompts:Pt(qp({listChanged:Pt(Jt())})),resources:Pt(qp({subscribe:Pt(Jt()),listChanged:Pt(Jt())})),tools:Pt(qp({listChanged:Pt(Jt())}))});$b.extend({protocolVersion:Q(),capabilities:tat,serverInfo:Qst,instructions:Pt(Q())});var nat=$b.extend({nextCursor:Pt(Q())}),rat=fe({name:Q(),description:Pt(Q()),inputSchema:fe({type:Me("object"),properties:Pt(fe({}).loose())}).loose()}).loose();nat.extend({tools:xt(rat)});var oat=fe({type:Me("text"),text:Q()}).loose(),iat=fe({type:Me("image"),data:See(),mimeType:Q()}).loose(),Nle=fe({uri:Q(),mimeType:Pt(Q())}).loose(),sat=Nle.extend({text:Q()}),aat=Nle.extend({blob:See()}),lat=fe({type:Me("resource"),resource:It([sat,aat])}).loose();$b.extend({content:xt(It([oat,iat,lat])),isError:Jt().default(!1).optional()}).or($b.extend({toolResult:tn()}));var JE="2.0",cat=fe({jsonrpc:Me(JE),id:It([Q(),Qt().int()])}).merge(eat).strict(),uat=fe({jsonrpc:Me(JE),id:It([Q(),Qt().int()]),result:$b}).strict(),dat=fe({jsonrpc:Me(JE),id:It([Q(),Qt().int()]),error:fe({code:Qt().int(),message:Q(),data:Pt(tn())})}).strict(),fat=fe({jsonrpc:Me(JE)}).merge(fe({method:Q(),params:Pt(a5)})).strict();It([cat,fat,uat,dat]);var hat=fe({type:Me("text"),text:Q(),state:$i(["streaming","done"]).optional(),providerMetadata:Xt.optional()}),pat=fe({type:Me("reasoning"),text:Q(),state:$i(["streaming","done"]).optional(),providerMetadata:Xt.optional()}),mat=fe({type:Me("source-url"),sourceId:Q(),url:Q(),title:Q().optional(),providerMetadata:Xt.optional()}),gat=fe({type:Me("source-document"),sourceId:Q(),mediaType:Q(),title:Q(),filename:Q().optional(),providerMetadata:Xt.optional()}),yat=fe({type:Me("file"),mediaType:Q(),filename:Q().optional(),url:Q(),providerMetadata:Xt.optional()}),bat=fe({type:Me("step-start")}),vat=fe({type:Q().startsWith("data-"),id:Q().optional(),data:tn()}),xat=[fe({type:Me("dynamic-tool"),toolName:Q(),toolCallId:Q(),state:Me("input-streaming"),input:tn().optional(),output:Di().optional(),errorText:Di().optional()}),fe({type:Me("dynamic-tool"),toolName:Q(),toolCallId:Q(),state:Me("input-available"),input:tn(),output:Di().optional(),errorText:Di().optional(),callProviderMetadata:Xt.optional()}),fe({type:Me("dynamic-tool"),toolName:Q(),toolCallId:Q(),state:Me("output-available"),input:tn(),output:tn(),errorText:Di().optional(),callProviderMetadata:Xt.optional(),preliminary:Jt().optional()}),fe({type:Me("dynamic-tool"),toolName:Q(),toolCallId:Q(),state:Me("output-error"),input:tn(),output:Di().optional(),errorText:Q(),callProviderMetadata:Xt.optional()})],wat=[fe({type:Q().startsWith("tool-"),toolCallId:Q(),state:Me("input-streaming"),input:tn().optional(),output:Di().optional(),errorText:Di().optional()}),fe({type:Q().startsWith("tool-"),toolCallId:Q(),state:Me("input-available"),input:tn(),output:Di().optional(),errorText:Di().optional(),callProviderMetadata:Xt.optional()}),fe({type:Q().startsWith("tool-"),toolCallId:Q(),state:Me("output-available"),input:tn(),output:tn(),errorText:Di().optional(),callProviderMetadata:Xt.optional(),preliminary:Jt().optional()}),fe({type:Q().startsWith("tool-"),toolCallId:Q(),state:Me("output-error"),input:tn(),output:Di().optional(),errorText:Q(),callProviderMetadata:Xt.optional()})];fe({id:Q(),role:$i(["system","user","assistant"]),metadata:tn().optional(),parts:xt(It([hat,pat,mat,gat,yat,bat,vat,...xat,...wat]))});const Sat=async({transcriptionText:e,googleApiKey:t,editor:n,updateCurrentNoteContent:r,updateCurrentNoteTitle:o,saveCurrentNote:i,currentContent:s})=>{if(!t)return console.warn("Google API Key is missing provided to processTranscription"),pt("API Key missing - Saved raw text",{icon:""}),nU(e,n,r,i,s);const a=pt.loading(" Structuring with AI...");console.log("Starting AI structuring...");try{const c=kE({apiKey:t})("models/gemini-2.5-flash"),u=`You are an expert note-taker. Transform the raw transcription into a highly structured, educational note using BlockNote JSON blocks.

Your goal is to organize the information for effective learning, using the most appropriate block types.

Output MUST be a valid JSON array of blocks. Do not wrap in markdown.

Each block must have: "id" (unique string), "type", "props" (object), "content", "children" (array, usually []).

CRITICAL STRUCTURE RULES:
1. 'content': This is where the text goes. It can be a simple string OR an array of styled text objects.
   - Simple: "content": "Hello world"
   - Styled: "content": [{"type":"text", "text":"Bold", "styles":{"bold":true}}, {"type":"text", "text":" normal", "styles":{}}]
2. 'children': This is ONLY for nested blocks (like sub-bullets). It MUST NOT contain text objects.
   - CORRECT: "children": [{"id": "...", "type": "bulletListItem", ...}]
   - INCORRECT: "children": [{"type":"text", "text":"..."}] -> THIS WILL CRASH THE APP.

AVAILABLE BLOCK STRUCTURES:

1. PARAGRAPHS & QUOTES:
   - {"id": "unique-id-1", "type": "paragraph", "props": {"textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "Simple text", "children": []}
   - {"id": "unique-id-2", "type": "paragraph", "props": {"textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": [{"type":"text", "text":"Bold Text", "styles":{"bold":true}}, {"type":"text", "text":" normal text", "styles":{}}], "children": []}
   - {"id": "unique-id-3", "type": "quote", "props": {}, "content": "Key takeaway or important definition", "children": []}

2. HEADINGS (Use hierarchy):
   - {"id": "unique-id-4", "type": "heading", "props": {"level": 1, "textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "Main Title", "children": []}
   - {"id": "unique-id-5", "type": "heading", "props": {"level": 2, "textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "Section Title", "children": []}
   - {"id": "unique-id-6", "type": "heading", "props": {"level": 3, "textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "Subsection", "children": []}

3. LISTS (Use for steps, features, pros/cons):
   - {"id": "unique-id-8", "type": "bulletListItem", "props": {}, "content": "Point", "children": []}
   - {"id": "unique-id-9", "type": "numberedListItem", "props": {}, "content": "Step 1", "children": []}
   - {"id": "unique-id-10", "type": "checkListItem", "props": {}, "content": "Task", "children": []}
   - {"id": "unique-id-11", "type": "toggleListItem", "props": {}, "content": "Click to reveal detail", "children": []}
   
   *NESTING LISTS*: To nest a list item, put the child list item block inside the 'children' array of the parent.
   - {"id": "parent", "type": "bulletListItem", "content": "Parent", "children": [{"id": "child", "type": "bulletListItem", "content": "Child", "children": []}]}

4. CODE (For technical terms/snippets):
   - {"id": "unique-id-12", "type": "codeBlock", "props": {"language": "javascript", "textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": "console.log('code');", "children": []}

5. TABLES (Use for comparisons/data):
   - {"id": "unique-id-13", "type": "table", "props": {"textColor": "default", "backgroundColor": "default", "textAlignment": "left"}, "content": {"type": "tableContent", "rows": [{"cells": ["Col1", "Col2"]}, {"cells": ["Val1", "Val2"]}]}, "children": []}

RULES:
- Generate unique IDs for each block (e.g., using random strings or sequential numbers).
- Organize content logically with headings.
- Use TABLES for comparisons.
- Use CODE BLOCKS for code.
- Use BOLD text for key terms (using the content array format).
- **CRITICAL RULE: The first block MUST be a Heading Level 1 with a VERY SHORT, concise title (max 3-5 words) summarizing the note. This will be used as the filename.**`,{text:f}=await _st({model:c,system:u,prompt:e});console.log("AI Generation result:",f);const p=f.replace(/```json/g,"").replace(/```/g,"").trim();let m=JSON.parse(p);if(!Array.isArray(m))throw new Error("AI output is not an array");if(m=[{id:Date.now().toString(),type:"heading",props:{level:2},content:"Audio Transcript",children:[]},...m],n)try{const b=n.document[n.document.length-1];n.insertBlocks(m,b,"after"),r(JSON.stringify(n.document)),i()}catch(b){console.warn("Editor insertion failed, falling back to store update",b);const w=[...s,...m];r(JSON.stringify(w)),i()}else{const b=[...s,...m];r(JSON.stringify(b)),i()}pt.success("Processed & Structured!",{id:a})}catch(l){console.error("AI Structuring failed completely:",l);let c="AI structuring failed, using raw text.";return l.message?.includes("API key")?c="Invalid API Key. Using raw text.":l.message?.includes("fetch")&&(c="Network error. Using raw text."),pt.error(c,{id:a}),nU(e,n,r,i,s)}},nU=(e,t,n,r,o)=>{const i={id:Date.now().toString(),type:"paragraph",props:{},content:e,children:[]};if(t)try{const s=t.document[t.document.length-1];t.insertBlocks([i],s,"after"),n(JSON.stringify(t.document)),r()}catch{const a=[...o,i];n(JSON.stringify(a)),r()}else{const s=[...o,i];n(JSON.stringify(s)),r()}},rU=()=>{const e=Ur(Y=>Y.currentNote),t=Ur(Y=>Y.notes),{loadNotes:n,loadFolders:r,selectNote:o,deleteNote:i,createNote:s,createFolder:a,updateNote:l,updateFolder:c,deleteFolder:u,toggleStar:f,updateCurrentNoteContent:p}=Ur.getState(),m=t.filter(Y=>Y.starred),y=_n(Y=>Y.deleteConfirmId),b=_n(Y=>Y.deleteConfirmFolderId),w=_n(Y=>Y.renamingNoteId),S=_n(Y=>Y.renameValue),E=_n(Y=>Y.contextMenu),T=_n(Y=>Y.isKanbanOpen),A=_n(Y=>Y.isRecording),M=_n(Y=>Y.isProcessingRecording),R=_n(Y=>Y.googleDriveConnected),O=_n(Y=>Y.isSyncing),[I,L]=k.useState(null),[$,B]=k.useState(""),[G,V]=k.useState(null),W=_n(Y=>Y.expandedFolders),[K,F]=k.useState(!1),[q,H]=k.useState([]),[z,N]=k.useState(!1),{openCommandPalette:U,setDeleteConfirmId:te,setDeleteConfirmFolderId:D,startRenaming:ce,finishRenaming:ae,setRenameValue:pe,setContextMenu:ie,setIsKanbanOpen:ye,setIsRecording:Re,setIsSettingsOpen:$e,setExpandedFolders:Be,setIsProcessingRecording:je}=_n.getState();k.useEffect(()=>{n(),r()},[n,r]),k.useEffect(()=>{const Y=()=>ie(null);return window.addEventListener("click",Y),()=>window.removeEventListener("click",Y)},[ie]);const Le=async(Y="text",he)=>{try{await s(Y,he||G||void 0)}catch(De){console.error("Error creating note",De)}},Pe=async Y=>{try{await a("New Folder",Y||G||void 0)}catch(he){console.error("Error creating folder",he)}},me=async(Y,he)=>{he.stopPropagation(),D(Y)},_e=async(Y,he)=>{he.stopPropagation(),te(Y)},xe=async()=>{if(b)try{await u(b),D(null)}catch(Y){console.log("Failed to delete folder",Y)}},Ie=async()=>{if(y)try{await i(y),te(null)}catch(Y){console.log("Failed to delete note",Y)}},Ve=()=>{w&&S.trim()&&l(w,{title:S.trim()}),ae()},nt=()=>{I&&$.trim()&&c(I,{name:$.trim()}),L(null),B("")},kn=Y=>{V(Y)},Dr=async()=>{N(!0);try{const Y=await zt("get_trash_items");H(Y)}catch(Y){console.error("Failed to load trash:",Y),pt.error("Failed to load trash items")}finally{N(!1)}},or=async Y=>{try{await zt("restore_from_trash",{itemId:Y.id,itemType:Y.original_type}),pt.success(`${Y.original_type==="note"?"Note":"Folder"} restored!`),await Dr(),n(),r()}catch(he){console.error("Failed to restore:",he),pt.error("Failed to restore item")}},hr=async()=>{try{const Y=await zt("empty_trash");pt.success(`Permanently deleted ${Y} items`),H([])}catch(Y){console.error("Failed to empty trash:",Y),pt.error("Failed to empty trash")}},Ft=()=>{F(!0),Dr()};return v.jsxs(v.Fragment,{children:[v.jsxs(Goe,{as:"aside",className:"bg-zinc-950 pb-2 border-r border-zinc-900 flex flex-col h-full text-zinc-400 select-none",defaultSize:{width:260,height:"100%"},minWidth:240,maxWidth:360,enable:{right:!0},handleClasses:{right:"w-0.5 bg-zinc-900 hover:bg-blue-500/50 transition-colors delay-150"},children:[v.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden px-3 py-2 gap-4",children:[v.jsxs("div",{className:"space-y-0.5",children:[v.jsxs("button",{onClick:U,className:"w-full border border-blue-200/40 flex items-center gap-3 px-2 py-1.5 mb-2 text-sm font-medium hover:bg-zinc-900 text-zinc-400 hover:text-zinc-200 rounded-md transition-colors group",children:[v.jsx(dGe,{size:16}),v.jsx("span",{children:"Search"}),v.jsxs("kbd",{className:"ml-auto pointer-events-none hidden h-5 select-none items-center gap-1 rounded border border-zinc-800 bg-zinc-900 px-1.5 font-mono text-[10px] text-zinc-500 opacity-0 group-hover:opacity-100 font-medium transition-opacity sm:flex",children:[v.jsx("span",{className:"text-xs",children:""}),"P"]})]}),v.jsxs("button",{onClick:()=>{o(null),V(null)},className:"w-full flex items-center gap-3 px-2 py-1.5 mb-2 text-sm font-medium hover:bg-zinc-900 text-zinc-400 hover:text-zinc-200 rounded-md transition-colors",children:[v.jsx(VUe,{size:16}),v.jsx("span",{children:"Home"})]}),v.jsxs("button",{onClick:()=>ye(!0),className:"w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 text-zinc-400 hover:text-zinc-200 rounded-md transition-colors",children:[v.jsx(pI,{size:16}),v.jsx("span",{children:"To-do List"})]}),v.jsxs("button",{disabled:!e||e.note_type==="canvas",onClick:async()=>{if(!(!e||e.note_type==="canvas")&&!A)try{await zt("start_recording"),Re(!0)}catch(Y){console.error("Recording start failed:",Y),pt.error(`Recording failed: ${Y}`)}},className:`w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 rounded-md transition-colors
                     ${A?"text-red-400 animate-pulse":"text-zinc-400 hover:text-zinc-200"}
                     ${!e||e.note_type==="canvas"?"opacity-50 cursor-not-allowed":""}
                    `,children:[v.jsx(Lp,{size:16}),v.jsx("span",{children:"AI Audio Capture"}),A&&v.jsx("span",{className:"ml-auto w-2 h-2 rounded-full bg-red-500"})]}),v.jsxs("button",{onClick:()=>{console.log("Opening Settings via Sidebar"),$e(!0)},className:"w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 text-zinc-400 hover:text-zinc-200 rounded-md transition-colors",children:[v.jsx(mGe,{size:16}),v.jsx("span",{children:"Settings"})]})]}),m.length>0&&v.jsxs("div",{className:"space-y-1",children:[v.jsxs("div",{className:"flex items-center gap-1 px-2 text-xs font-semibold text-yellow-500/80",children:[v.jsx(Cw,{size:12,className:"fill-yellow-500"}),v.jsx("span",{children:"Favorites"})]}),v.jsx("div",{className:"max-h-32 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-800 scrollbar-track-transparent space-y-0.5 px-1",children:m.map(Y=>v.jsxs("button",{onClick:()=>o(Y),className:`w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-md transition-colors text-left ${e?.id===Y.id?"bg-zinc-800 text-zinc-200":"text-zinc-400 hover:bg-zinc-900 hover:text-zinc-200"}`,children:[v.jsx(Cw,{size:12,className:"text-yellow-500 fill-yellow-500 flex-shrink-0"}),v.jsx("span",{className:"truncate",children:Y.title||"Untitled"})]},Y.id))})]}),v.jsxs("div",{className:"flex flex-col flex-1 min-h-0 space-y-1",children:[v.jsxs("div",{className:"flex items-center justify-between px-2 text-xs font-semibold text-zinc-500 group cursor-pointer hover:text-zinc-400 transition-colors mb-1",children:[v.jsxs("span",{className:"flex items-center gap-1",children:["Notes ",v.jsx(CE,{size:10})]}),v.jsxs("div",{className:"flex items-center gap-1 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity",children:[v.jsx("button",{onClick:Y=>{Y.stopPropagation(),Le("text")},className:"hover:bg-zinc-800 p-0.5 rounded text-zinc-500 hover:text-zinc-300",title:"New Note",children:v.jsx(_Ue,{size:16})}),v.jsx("button",{onClick:Y=>{Y.stopPropagation(),Le("canvas")},className:"hover:bg-zinc-800 p-0.5 rounded text-zinc-500 hover:text-zinc-300",title:"New Canvas",children:v.jsx(Ok,{size:16})}),v.jsx("button",{onClick:Y=>{Y.stopPropagation(),Pe()},className:"hover:bg-zinc-800 p-0.5 rounded text-zinc-500 hover:text-zinc-300",title:"New Folder",children:v.jsx(Eb,{size:20})})]})]}),v.jsx("div",{onClick:()=>V(null),className:"flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-zinc-800 scrollbar-track-transparent",children:v.jsx(dot,{onSelectNote:o,onSelectFolder:kn,onContextMenu:(Y,he)=>{Y.preventDefault(),Y.stopPropagation(),ie({x:Y.clientX,y:Y.clientY,...he})},onDeleteFolder:me,onDeleteNote:_e,selectedFolderId:G,selectedNoteId:e?.id||null,expandedFolders:W,onExpandedFoldersChange:Be,renamingNoteId:w,renamingFolderId:I,renameValue:S,folderRenameValue:$,onRename:Ve,onFolderRename:nt,onRenameValueChange:pe,onFolderRenameValueChange:B,onStartRenaming:ce,onStartFolderRenaming:(Y,he)=>{L(Y),B(he)}})})]}),R&&v.jsx("div",{className:"px-3 py-2.5 mx-2 mb-2 rounded-lg bg-gradient-to-r from-zinc-800/50 to-emerald-900/20 border border-zinc-800/50",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{className:"flex items-center gap-2",children:O?v.jsxs(v.Fragment,{children:[v.jsx(iF,{className:"w-3.5 h-3.5 animate-spin text-zinc-400"}),v.jsx("span",{className:"text-xs font-medium bg-gradient-to-r from-zinc-400 to-zinc-600 bg-clip-text text-transparent",children:"Syncing..."})]}):v.jsxs(v.Fragment,{children:[v.jsx(kb,{className:"w-3.5 h-3.5 text-emerald-500"}),v.jsx("span",{className:"text-xs font-medium bg-gradient-to-r from-emerald-400 to-emerald-600 bg-clip-text text-transparent",children:"Synced"})]})}),!O&&v.jsx("span",{className:"text-[10px] text-zinc-500",children:_n.getState().lastSyncedAt?new Date(_n.getState().lastSyncedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]})}),v.jsxs("div",{className:"p-4 border-t border-zinc-900/50 space-y-1 flex-shrink-0",children:[v.jsx("div",{className:"px-2 text-xs font-semibold text-zinc-600 mb-2",children:"Others"}),v.jsxs("button",{onClick:Ft,className:"w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 text-zinc-500 hover:text-zinc-300 rounded-md transition-colors",children:[v.jsx(lF,{size:16}),v.jsx("span",{children:"Trash"})]}),v.jsxs("button",{onClick:async()=>{try{const{openUrl:Y}=await Ne(async()=>{const{openUrl:he}=await import("./index-C7XFINK8.js");return{openUrl:he}},[]);await Y("https://github.com/daschinmoy21/Logia")}catch(Y){console.error("Failed to open URL:",Y)}},className:"w-full flex items-center gap-3 px-2 py-1.5 text-sm font-medium hover:bg-zinc-900 text-zinc-500 hover:text-zinc-300 rounded-md transition-colors",children:[v.jsx(DUe,{size:16}),v.jsx("span",{children:"Star on GitHub"})]})]})]}),v.jsx(pa,{children:(A||M)&&v.jsx(Wn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden border-t border-zinc-800 bg-zinc-900/30",children:v.jsx(btt,{isRecording:A,isProcessing:M,onStop:async()=>{je(!0),Re(!1);try{console.log("[Logia] Stopping recording...");let Y;try{Y=await zt("stop_recording"),console.log("[Logia] stop_recording returned:",Y)}catch(Dn){throw console.error("[Logia] stop_recording invoke failed:",Dn),new Error(`Stop recording failed: ${Dn}`)}let he="";try{he=JSON.parse(Y).text||Y,console.log("[Logia] Parsed transcript text:",he?.substring(0,100))}catch{he=Y,console.log("[Logia] Using raw transcript:",he?.substring(0,100))}if(!he||he.trim()==="")throw new Error("No transcript generated - empty result");let De=e;if(!De)try{await s("text"),De=Ur.getState().currentNote}catch(Dn){console.error("Failed to create note",Dn),pt.error("Could not create new note"),je(!1);return}if(!De){pt.error("No active note found."),je(!1);return}const Oe=_n.getState().googleApiKey,et=_n.getState().editor,rn=JSON.parse(De.content||"[]")||[];await Sat({transcriptionText:he,googleApiKey:Oe,editor:et,updateCurrentNoteContent:p,saveCurrentNote:Ur.getState().saveCurrentNote,currentContent:rn})}catch(Y){console.error("Audio capture process failed",Y);const he=Y instanceof Error?Y.message:String(Y);pt.error(`Recording process failed: ${he}`)}finally{je(!1)}}})})})]}),v.jsxs(gm,{open:y!==null,onClose:()=>te(null),className:"relative z-[1000]",children:[v.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm",onClick:()=>te(null)}),v.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:v.jsxs(Jf,{className:"bg-zinc-800 border border-zinc-700 rounded-xl p-6 max-w-sm w-full",children:[v.jsx(mm,{className:"text-white font-medium mb-2",children:"Delete Note"}),v.jsx(hm,{className:"text-zinc-400 text-sm mb-6",children:"This will move the note to Trash. You can restore it later."}),v.jsxs("div",{className:"flex gap-3 justify-end",children:[v.jsx("button",{onClick:()=>te(null),className:"px-4 py-2 text-sm text-zinc-400 hover:text-white hover:bg-zinc-700 rounded-lg",children:"Cancel"}),v.jsx("button",{onClick:Ie,className:"px-4 py-2 text-sm bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Move to Trash"})]})]})})]}),v.jsxs(gm,{open:b!==null,onClose:()=>D(null),className:"relative z-[1000]",children:[v.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm",onClick:()=>D(null)}),v.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:v.jsxs(Jf,{className:"bg-zinc-800 border border-zinc-700 rounded-xl p-6 max-w-sm w-full",children:[v.jsx(mm,{className:"text-white font-medium mb-2",children:"Delete Folder"}),v.jsx(hm,{className:"text-zinc-400 text-sm mb-6",children:"This will move the folder to Trash. You can restore it later."}),v.jsxs("div",{className:"flex gap-3 justify-end",children:[v.jsx("button",{onClick:()=>D(null),className:"px-4 py-2 text-sm text-zinc-400 hover:text-white hover:bg-zinc-700 rounded-lg",children:"Cancel"}),v.jsx("button",{onClick:xe,className:"px-4 py-2 text-sm bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Move to Trash"})]})]})})]}),v.jsxs(gm,{open:K,onClose:()=>F(!1),className:"relative z-[1000]",children:[v.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm",onClick:()=>F(!1)}),v.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:v.jsxs(Jf,{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6 max-w-md w-full max-h-[70vh] flex flex-col",children:[v.jsxs(mm,{className:"text-white font-medium mb-1 flex items-center gap-2",children:[v.jsx(lF,{size:18}),"Trash"]}),v.jsx(hm,{className:"text-zinc-500 text-sm mb-4",children:"Items are permanently deleted after 14 days."}),v.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent space-y-2 min-h-[100px] max-h-[300px]",children:z?v.jsx("div",{className:"flex items-center justify-center py-8",children:v.jsx(iF,{className:"w-5 h-5 animate-spin text-zinc-500"})}):q.length===0?v.jsx("div",{className:"text-center py-8 text-zinc-500 text-sm",children:"Trash is empty"}):q.map(Y=>v.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-800/50 rounded-lg hover:bg-zinc-800 transition-colors",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Y.original_type==="note"?"bg-blue-900/50 text-blue-400":"bg-amber-900/50 text-amber-400"}`,children:Y.original_type}),v.jsx("span",{className:"text-sm text-zinc-300 truncate",children:Y.title})]}),v.jsxs("div",{className:"text-xs text-zinc-500 mt-1",children:["Deleted ",new Date(Y.deleted_at).toLocaleDateString()]})]}),v.jsx("button",{onClick:()=>or(Y),className:"ml-2 px-3 py-1.5 text-xs bg-zinc-700 hover:bg-zinc-600 text-zinc-200 rounded-md transition-colors",children:"Restore"})]},Y.id))}),v.jsxs("div",{className:"flex gap-3 justify-between mt-4 pt-4 border-t border-zinc-800",children:[v.jsx("button",{onClick:hr,disabled:q.length===0,className:"px-4 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-zinc-800 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Empty Trash"}),v.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 text-sm text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg transition-colors",children:"Close"})]})]})})]}),v.jsx(pa,{children:E&&v.jsxs(Wn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1,ease:"easeOut"},style:{top:E.y,left:E.x},className:"absolute z-50 bg-zinc-900 border border-zinc-800 rounded-lg shadow-xl py-1.5 min-w-[140px] overflow-hidden",children:[E.note&&v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:()=>{f(E.note.id),ie(null)},className:"w-full text-left px-3 py-1.5 text-xs text-yellow-400 hover:bg-zinc-800 hover:text-yellow-300 transition-colors flex items-center gap-2",children:[v.jsx(Cw,{size:12,className:E.note.starred?"fill-yellow-400":""}),E.note.starred?"Unstar":"Star"]}),v.jsx("button",{onClick:()=>{ce(E.note.id,E.note.title||"Untitled"),ie(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"Rename"}),v.jsx("button",{onClick:Y=>{_e(E.note.id,Y),ie(null)},className:"w-full text-left px-3 py-1.5 text-xs text-red-400 hover:bg-zinc-800 hover:text-red-300 transition-colors",children:"Delete"})]}),E.folder&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>{Le("text",E.folder.id),ie(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"New Note"}),v.jsx("button",{onClick:()=>{Le("canvas",E.folder.id),ie(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"New Canvas"}),v.jsx("button",{onClick:()=>{Pe(E.folder.id),ie(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"New Folder"}),v.jsx("div",{className:"h-px bg-zinc-800 my-1 mx-2"}),v.jsx("button",{onClick:()=>{L(E.folder.id),B(E.folder.name),ie(null)},className:"w-full text-left px-3 py-1.5 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100 transition-colors",children:"Rename"}),v.jsx("button",{onClick:Y=>{me(E.folder.id,Y),ie(null)},className:"w-full text-left px-3 py-1.5 text-xs text-red-400 hover:bg-zinc-800 hover:text-red-300 transition-colors",children:"Delete"})]})]})}),v.jsx(xtt,{isOpen:T,onClose:()=>ye(!1)})]})},kat=()=>{const e=ht.c(35),{searchQuery:t,setSearchQuery:n,searchResults:r,isCommandPaletteOpen:o,closeCommandPalette:i}=_n(),{notes:s,selectNote:a}=Ur(),[l,c]=k.useState(0);let u,f;e[0]!==o?(u=()=>{},f=[o],e[0]=o,e[1]=u,e[2]=f):(u=e[1],f=e[2]),k.useEffect(u,f);let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{c(0)},e[3]=p):p=e[3];let m;if(e[4]!==r?(m=[r],e[4]=r,e[5]=m):m=e[5],k.useEffect(p,m),!o)return null;let y;e[6]!==i||e[7]!==r||e[8]!==a||e[9]!==l?(y=R=>{R.key==="ArrowDown"?(R.preventDefault(),c(O=>(O+1)%r.length)):R.key==="ArrowUp"?(R.preventDefault(),c(O=>(O-1+r.length)%r.length)):R.key==="Enter"?(R.preventDefault(),r[l]&&(a(r[l]),i(),setTimeout(Cat,100))):R.key==="Escape"&&(R.preventDefault(),console.log("Escape key pressed in input"),i())},e[6]=i,e[7]=r,e[8]=a,e[9]=l,e[10]=y):y=e[10];const b=y;let w;e[11]!==s||e[12]!==n?(w=R=>n(R.target.value,s),e[11]=s,e[12]=n,e[13]=w):w=e[13];let S;e[14]!==b||e[15]!==t||e[16]!==w?(S=v.jsx("input",{type:"text",placeholder:"Search notes (Esc to close)",value:t,onChange:w,onKeyDown:b,autoFocus:!0}),e[14]=b,e[15]=t,e[16]=w,e[17]=S):S=e[17];let E;if(e[18]!==i||e[19]!==r||e[20]!==a||e[21]!==l){let R;e[23]!==i||e[24]!==a||e[25]!==l?(R=(O,I)=>v.jsx("li",{className:I===l?"selected":"",onClick:()=>{a(O),i(),setTimeout(Tat,100)},children:O.title},O.id),e[23]=i,e[24]=a,e[25]=l,e[26]=R):R=e[26],E=r.map(R),e[18]=i,e[19]=r,e[20]=a,e[21]=l,e[22]=E}else E=e[22];let T;e[27]!==E?(T=v.jsx("ul",{children:E}),e[27]=E,e[28]=T):T=e[28];let A;e[29]!==S||e[30]!==T?(A=v.jsx("div",{className:"command-palette-container",onClick:Eat,children:v.jsxs("div",{className:"command-palette-content",children:[S,T]})}),e[29]=S,e[30]=T,e[31]=A):A=e[31];let M;return e[32]!==i||e[33]!==A?(M=v.jsx("div",{className:"command-palette-overlay",onClick:i,children:A}),e[32]=i,e[33]=A,e[34]=M):M=e[34],M};function Cat(){const e=document.querySelector(".bn-editor");if(e)e.focus();else{const t=document.querySelector('[contenteditable="true"]');t&&t.focus()}}function Eat(e){return e.stopPropagation()}function Tat(){const e=document.querySelector(".bn-editor");if(e)e.focus();else{const t=document.querySelector('[contenteditable="true"]');t&&t.focus()}}function _at(e){const t=ht.c(2),{wordCount:n}=e;let r;return t[0]!==n?(r=v.jsx("footer",{className:"h-8 border-t border-zinc-800 px-6 flex items-center justify-between text-xs text-zinc-400 flex-shrink-0",children:v.jsx("div",{className:"flex items-center space-x-4",children:v.jsxs("span",{children:["Words: ",n]})})}),t[0]=n,t[1]=r):r=t[1],r}const Fr=(...e)=>e.filter(Boolean).join(" "),Aat=`
  *:focus-visible {
    outline-offset: 0 !important;
    --ring-offset: 0 !important;
  }
  textarea::-webkit-scrollbar {
    width: 6px;
  }
  textarea::-webkit-scrollbar-track {
    background: transparent;
  }
  textarea::-webkit-scrollbar-thumb {
    background-color: #444444;
    border-radius: 3px;
  }
  textarea::-webkit-scrollbar-thumb:hover {
    background-color: #555555;
  }
`,Rle=document.createElement("style");Rle.innerText=Aat;document.head.appendChild(Rle);const Ile=se.forwardRef((e,t)=>{const n=ht.c(9);let r,o;n[0]!==e?({className:r,...o}=e,n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]);let i;n[3]!==r?(i=Fr("flex w-full rounded-md border-none bg-transparent px-3 py-2.5 text-base text-gray-100 placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] resize-none scrollbar-thin scrollbar-thumb-[#444444] scrollbar-track-transparent hover:scrollbar-thumb-[#555555]",r),n[3]=r,n[4]=i):i=n[4];let s;return n[5]!==o||n[6]!==t||n[7]!==i?(s=v.jsx("textarea",{className:i,ref:t,rows:1,...o}),n[5]=o,n[6]=t,n[7]=i,n[8]=s):s=n[8],s});Ile.displayName="Textarea";const Mat=Urt,Nat=Grt,Rat=qrt,Ole=se.forwardRef((e,t)=>{const n=ht.c(11);let r,o,i;n[0]!==e?({className:r,sideOffset:i,...o}=e,n[0]=e,n[1]=r,n[2]=o,n[3]=i):(r=n[1],o=n[2],i=n[3]);const s=i===void 0?4:i;let a;n[4]!==r?(a=Fr("z-50 overflow-hidden rounded-md border border-[#333333] bg-[#1F2023] px-3 py-1.5 text-sm text-white shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),n[4]=r,n[5]=a):a=n[5];let l;return n[6]!==o||n[7]!==t||n[8]!==s||n[9]!==a?(l=v.jsx(sae,{ref:t,sideOffset:s,className:a,...o}),n[6]=o,n[7]=t,n[8]=s,n[9]=a,n[10]=l):l=n[10],l});Ole.displayName=sae.displayName;const Iat=drt,Oat=frt,Ple=se.forwardRef((e,t)=>{const n=ht.c(9);let r,o;n[0]!==e?({className:r,...o}=e,n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]);let i;n[3]!==r?(i=Fr("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),n[3]=r,n[4]=i):i=n[4];let s;return n[5]!==o||n[6]!==t||n[7]!==i?(s=v.jsx(Lse,{ref:t,className:i,...o}),n[5]=o,n[6]=t,n[7]=i,n[8]=s):s=n[8],s});Ple.displayName=Lse.displayName;const Dle=se.forwardRef((e,t)=>{const n=ht.c(13);let r,o,i;n[0]!==e?({className:o,children:r,...i}=e,n[0]=e,n[1]=r,n[2]=o,n[3]=i):(r=n[1],o=n[2],i=n[3]);let s;n[4]===Symbol.for("react.memo_cache_sentinel")?(s=v.jsx(Ple,{}),n[4]=s):s=n[4];let a;n[5]!==o?(a=Fr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-[90vw] md:max-w-[800px] translate-x-[-50%] translate-y-[-50%] gap-4 border border-[#333333] bg-[#1F2023] p-0 shadow-xl duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 rounded-2xl",o),n[5]=o,n[6]=a):a=n[6];let l;n[7]===Symbol.for("react.memo_cache_sentinel")?(l=v.jsxs(hrt,{className:"absolute right-4 top-4 z-10 rounded-full bg-[#2E3033]/80 p-2 hover:bg-[#2E3033] transition-all",children:[v.jsx(mh,{className:"h-5 w-5 text-gray-200 hover:text-white"}),v.jsx("span",{className:"sr-only",children:"Close"})]}),n[7]=l):l=n[7];let c;return n[8]!==r||n[9]!==i||n[10]!==t||n[11]!==a?(c=v.jsxs(Oat,{children:[s,v.jsxs(zse,{ref:t,className:a,...i,children:[r,l]})]}),n[8]=r,n[9]=i,n[10]=t,n[11]=a,n[12]=c):c=n[12],c});Dle.displayName=zse.displayName;const $le=se.forwardRef((e,t)=>{const n=ht.c(9);let r,o;n[0]!==e?({className:r,...o}=e,n[0]=e,n[1]=r,n[2]=o):(r=n[1],o=n[2]);let i;n[3]!==r?(i=Fr("text-lg font-semibold leading-none tracking-tight text-gray-100",r),n[3]=r,n[4]=i):i=n[4];let s;return n[5]!==o||n[6]!==t||n[7]!==i?(s=v.jsx(Bse,{ref:t,className:i,...o}),n[5]=o,n[6]=t,n[7]=i,n[8]=s):s=n[8],s});$le.displayName=Bse.displayName;const jle=se.forwardRef((e,t)=>{const n=ht.c(13);let r,o,i,s;n[0]!==e?({className:r,variant:i,size:s,...o}=e,n[0]=e,n[1]=r,n[2]=o,n[3]=i,n[4]=s):(r=n[1],o=n[2],i=n[3],s=n[4]);const a=i===void 0?"default":i,l=s===void 0?"default":s;let c;if(n[5]!==r||n[6]!==l||n[7]!==a){const f={default:"bg-white hover:bg-white/80 text-black",outline:"border border-[#444444] bg-transparent hover:bg-[#3A3A40]",ghost:"bg-transparent hover:bg-[#3A3A40]"},p={default:"h-10 px-4 py-2",sm:"h-8 px-3 text-sm",lg:"h-12 px-6",icon:"h-8 w-8 rounded-full aspect-[1/1]"};c=Fr("inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50",f[a],p[l],r),n[5]=r,n[6]=l,n[7]=a,n[8]=c}else c=n[8];let u;return n[9]!==o||n[10]!==t||n[11]!==c?(u=v.jsx("button",{className:c,ref:t,...o}),n[9]=o,n[10]=t,n[11]=c,n[12]=u):u=n[12],u});jle.displayName="Button";const Pat=e=>{const t=ht.c(17),{isRecording:n,onStartRecording:r,onStopRecording:o,visualizerBars:i}=e,s=i===void 0?32:i,[a,l]=se.useState(0),c=se.useRef(null);let u,f;t[0]!==n||t[1]!==r||t[2]!==o||t[3]!==a?(u=()=>(n?(r(),c.current=setInterval(()=>l(Lat),1e3)):(c.current&&(clearInterval(c.current),c.current=null),o(a),l(0)),()=>{c.current&&clearInterval(c.current)}),f=[n,a,r,o],t[0]=n,t[1]=r,t[2]=o,t[3]=a,t[4]=u,t[5]=f):(u=t[4],f=t[5]),se.useEffect(u,f);const p=zat,m=n?"opacity-100":"opacity-0 h-0";let y;t[6]!==m?(y=Fr("flex flex-col items-center justify-center w-full transition-all duration-300 py-3",m),t[6]=m,t[7]=y):y=t[7];let b;t[8]===Symbol.for("react.memo_cache_sentinel")?(b=v.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500 animate-pulse"}),t[8]=b):b=t[8];const w=p(a);let S;t[9]!==w?(S=v.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[b,v.jsx("span",{className:"font-mono text-sm text-white/80",children:w})]}),t[9]=w,t[10]=S):S=t[10];let E;t[11]!==s?(E=v.jsx("div",{className:"w-full h-10 flex items-center justify-center gap-0.5 px-4",children:[...Array(s)].map(Bat)}),t[11]=s,t[12]=E):E=t[12];let T;return t[13]!==y||t[14]!==S||t[15]!==E?(T=v.jsxs("div",{className:y,children:[S,E]}),t[13]=y,t[14]=S,t[15]=E,t[16]=T):T=t[16],T},Dat=e=>{const t=ht.c(11),{imageUrl:n,onClose:r}=e;if(!n)return null;const o=!!n;let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=v.jsx($le,{className:"sr-only",children:"Image Preview"}),t[0]=i):i=t[0];let s,a,l,c;t[1]===Symbol.for("react.memo_cache_sentinel")?(s={opacity:0,scale:.95},a={opacity:1,scale:1},l={opacity:0,scale:.95},c={duration:.2,ease:"easeOut"},t[1]=s,t[2]=a,t[3]=l,t[4]=c):(s=t[1],a=t[2],l=t[3],c=t[4]);let u;t[5]!==n?(u=v.jsxs(Dle,{className:"p-0 border-none bg-transparent shadow-none max-w-[90vw] md:max-w-[800px]",children:[i,v.jsx(Wn.div,{initial:s,animate:a,exit:l,transition:c,className:"relative bg-[#1F2023] rounded-2xl overflow-hidden shadow-2xl",children:v.jsx("img",{src:n,alt:"Full preview",className:"w-full max-h-[80vh] object-contain rounded-2xl"})})]}),t[5]=n,t[6]=u):u=t[6];let f;return t[7]!==r||t[8]!==o||t[9]!==u?(f=v.jsx(Iat,{open:o,onOpenChange:r,children:u}),t[7]=r,t[8]=o,t[9]=u,t[10]=f):f=t[10],f},Lle=se.createContext({isLoading:!1,value:"",setValue:()=>{},maxHeight:240,onSubmit:void 0,disabled:!1});function zle(){const e=se.useContext(Lle);if(!e)throw new Error("usePromptInput must be used within a PromptInput");return e}const Ble=se.forwardRef((e,t)=>{const n=ht.c(22),{className:r,isLoading:o,maxHeight:i,value:s,onValueChange:a,onSubmit:l,children:c,disabled:u,onDragOver:f,onDragLeave:p,onDrop:m}=e,y=o===void 0?!1:o,b=i===void 0?240:i,w=u===void 0?!1:u,[S,E]=se.useState(s||"");let T;n[0]!==a?(T=G=>{E(G),a?.(G)},n[0]=a,n[1]=T):T=n[1];const A=T,M=s??S,R=a??A;let O;n[2]!==w||n[3]!==y||n[4]!==b||n[5]!==l||n[6]!==M||n[7]!==R?(O={isLoading:y,value:M,setValue:R,maxHeight:b,onSubmit:l,disabled:w},n[2]=w,n[3]=y,n[4]=b,n[5]=l,n[6]=M,n[7]=R,n[8]=O):O=n[8];const I=y&&"border-red-500/70";let L;n[9]!==r||n[10]!==I?(L=Fr("rounded-3xl border border-[#444444] bg-[#1F2023] p-2 shadow-[0_8px_30px_rgba(0,0,0,0.24)] transition-all duration-300",I,r),n[9]=r,n[10]=I,n[11]=L):L=n[11];let $;n[12]!==c||n[13]!==p||n[14]!==f||n[15]!==m||n[16]!==t||n[17]!==L?($=v.jsx("div",{ref:t,className:L,onDragOver:f,onDragLeave:p,onDrop:m,children:c}),n[12]=c,n[13]=p,n[14]=f,n[15]=m,n[16]=t,n[17]=L,n[18]=$):$=n[18];let B;return n[19]!==$||n[20]!==O?(B=v.jsx(Mat,{children:v.jsx(Lle.Provider,{value:O,children:$})}),n[19]=$,n[20]=O,n[21]=B):B=n[21],B});Ble.displayName="PromptInput";const $at=e=>{const t=ht.c(28);let n,r,o,i,s;t[0]!==e?({className:n,onKeyDown:r,disableAutosize:s,placeholder:o,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5]);const a=s===void 0?!1:s,{value:l,setValue:c,maxHeight:u,onSubmit:f,disabled:p}=zle(),m=se.useRef(null);let y;t[6]!==a||t[7]!==u?(y=()=>{a||!m.current||(m.current.style.height="auto",m.current.style.height=typeof u=="number"?`${Math.min(m.current.scrollHeight,u)}px`:`min(${m.current.scrollHeight}px, ${u})`)},t[6]=a,t[7]=u,t[8]=y):y=t[8];let b;t[9]!==a||t[10]!==u||t[11]!==l?(b=[l,u,a],t[9]=a,t[10]=u,t[11]=l,t[12]=b):b=t[12],se.useEffect(y,b);let w;t[13]!==r||t[14]!==f?(w=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),f?.()),r?.(M)},t[13]=r,t[14]=f,t[15]=w):w=t[15];const S=w;let E;t[16]!==c?(E=M=>c(M.target.value),t[16]=c,t[17]=E):E=t[17];let T;t[18]!==n?(T=Fr("text-base",n),t[18]=n,t[19]=T):T=t[19];let A;return t[20]!==p||t[21]!==S||t[22]!==o||t[23]!==i||t[24]!==E||t[25]!==T||t[26]!==l?(A=v.jsx(Ile,{ref:m,value:l,onChange:E,onKeyDown:S,className:T,disabled:p,placeholder:o,...i}),t[20]=p,t[21]=S,t[22]=o,t[23]=i,t[24]=E,t[25]=T,t[26]=l,t[27]=A):A=t[27],A},jat=e=>{const t=ht.c(10);let n,r,o;t[0]!==e?({children:n,className:r,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o):(n=t[1],r=t[2],o=t[3]);let i;t[4]!==r?(i=Fr("flex items-center gap-2",r),t[4]=r,t[5]=i):i=t[5];let s;return t[6]!==n||t[7]!==o||t[8]!==i?(s=v.jsx("div",{className:i,...o,children:n}),t[6]=n,t[7]=o,t[8]=i,t[9]=s):s=t[9],s},oU=e=>{const t=ht.c(17);let n,r,o,i,s;t[0]!==e?({tooltip:s,children:n,className:r,side:i,...o}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s):(n=t[1],r=t[2],o=t[3],i=t[4],s=t[5]);const a=i===void 0?"top":i,{disabled:l}=zle();let c;t[6]!==n||t[7]!==l?(c=v.jsx(Rat,{asChild:!0,disabled:l,children:n}),t[6]=n,t[7]=l,t[8]=c):c=t[8];let u;t[9]!==r||t[10]!==a||t[11]!==s?(u=v.jsx(Ole,{side:a,className:r,children:s}),t[9]=r,t[10]=a,t[11]=s,t[12]=u):u=t[12];let f;return t[13]!==o||t[14]!==c||t[15]!==u?(f=v.jsxs(Nat,{...o,children:[c,u]}),t[13]=o,t[14]=c,t[15]=u,t[16]=f):f=t[16],f},iU=()=>{const e=ht.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=v.jsx("div",{className:"relative h-6 w-[1.5px] mx-1",children:v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-[#9b87f5]/70 to-transparent rounded-full",style:{clipPath:"polygon(0% 0%, 100% 0%, 100% 40%, 140% 50%, 100% 60%, 100% 100%, 0% 100%, 0% 60%, -40% 50%, 0% 40%)"}})}),e[0]=t):t=e[0],t},Fle=se.forwardRef((e,t)=>{const n=ht.c(172),{onSend:r,isLoading:o,placeholder:i,className:s}=e,a=r===void 0?Fat:r,l=o===void 0?!1:o,c=i===void 0?"Type your message here...":i,[u,f]=se.useState("");let p;n[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],n[0]=p):p=n[0];const[m,y]=se.useState(p);let b;n[1]===Symbol.for("react.memo_cache_sentinel")?(b={},n[1]=b):b=n[1];const[w,S]=se.useState(b),[E,T]=se.useState(null),[A,M]=se.useState(!1),[R,O]=se.useState(!1),[I,L]=se.useState(!1),[$,B]=se.useState(!1),G=se.useRef(null),V=se.useRef(null);let W;n[2]===Symbol.for("react.memo_cache_sentinel")?(W=mt=>{mt==="search"?(O(Vat),L(!1)):mt==="think"&&(L(Hat),O(!1))},n[2]=W):W=n[2];const K=W;let F;n[3]===Symbol.for("react.memo_cache_sentinel")?(F=()=>B(Uat),n[3]=F):F=n[3];const q=F,H=Gat;let z;n[4]===Symbol.for("react.memo_cache_sentinel")?(z=mt=>{if(!H(mt)){console.log("Only image files are allowed");return}if(mt.size>10485760){console.log("File too large (max 10MB)");return}y([mt]);const ar=new FileReader;ar.onload=Eo=>S({[mt.name]:Eo.target?.result}),ar.readAsDataURL(mt)},n[4]=z):z=n[4];const N=z,U=qat,te=Zat;let D;n[5]===Symbol.for("react.memo_cache_sentinel")?(D=mt=>{mt.preventDefault(),mt.stopPropagation();const Eo=Array.from(mt.dataTransfer.files).filter(ml=>H(ml));Eo.length>0&&N(Eo[0])},n[5]=D):D=n[5];const ce=D;let ae;n[6]!==w||n[7]!==m?(ae=mt=>{const ar=m[mt];ar&&w[ar.name]&&S({}),y([])},n[6]=w,n[7]=m,n[8]=ae):ae=n[8];const pe=ae;let ie;n[9]===Symbol.for("react.memo_cache_sentinel")?(ie=mt=>T(mt),n[9]=ie):ie=n[9];const ye=ie;let Re;n[10]===Symbol.for("react.memo_cache_sentinel")?(Re=mt=>{const ar=mt.clipboardData?.items;if(ar){for(let Eo=0;Eo<ar.length;Eo++)if(ar[Eo].type.indexOf("image")!==-1){const ml=ar[Eo].getAsFile();if(ml){mt.preventDefault(),N(ml);break}}}},n[10]=Re):Re=n[10];const $e=Re;let Be,je;n[11]===Symbol.for("react.memo_cache_sentinel")?(Be=()=>(document.addEventListener("paste",$e),()=>document.removeEventListener("paste",$e)),je=[$e],n[11]=Be,n[12]=je):(Be=n[11],je=n[12]),se.useEffect(Be,je);let Le;n[13]!==m||n[14]!==u||n[15]!==a||n[16]!==$||n[17]!==R||n[18]!==I?(Le=()=>{if(u.trim()||m.length>0){let mt="";R?mt="[Search: ":I?mt="[Think: ":$&&(mt="[Canvas: ");const ar=mt?`${mt}${u}]`:u;a(ar,m),f(""),y([]),S({})}},n[13]=m,n[14]=u,n[15]=a,n[16]=$,n[17]=R,n[18]=I,n[19]=Le):Le=n[19];const Pe=Le,me=Wat;let _e;n[20]!==a?(_e=mt=>{console.log(`Stopped recording after ${mt} seconds`),M(!1),a(`[Voice message - ${mt} seconds]`,[])},n[20]=a,n[21]=_e):_e=n[21];const xe=_e,Ie=u.trim()!==""||m.length>0,Ve=A&&"border-red-500/70";let nt;n[22]!==s||n[23]!==Ve?(nt=Fr("w-full bg-[#1F2023] border-[#444444] shadow-[0_8px_30px_rgba(0,0,0,0.24)] transition-all duration-300 ease-in-out",Ve,s),n[22]=s,n[23]=Ve,n[24]=nt):nt=n[24];const kn=l||A,Dr=t||V;let or;n[25]!==w||n[26]!==m||n[27]!==pe||n[28]!==A?(or=m.length>0&&!A&&v.jsx("div",{className:"flex flex-wrap gap-2 p-0 pb-1 transition-all duration-300",children:m.map((mt,ar)=>v.jsx("div",{className:"relative group",children:mt.type.startsWith("image/")&&w[mt.name]&&v.jsxs("div",{className:"w-16 h-16 rounded-xl overflow-hidden cursor-pointer transition-all duration-300",onClick:()=>ye(w[mt.name]),children:[v.jsx("img",{src:w[mt.name],alt:mt.name,className:"h-full w-full object-cover"}),v.jsx("button",{onClick:Eo=>{Eo.stopPropagation(),pe(ar)},className:"absolute top-1 right-1 rounded-full bg-black/70 p-0.5 opacity-100 transition-opacity",children:v.jsx(mh,{className:"h-3 w-3 text-white"})})]})},ar))}),n[25]=w,n[26]=m,n[27]=pe,n[28]=A,n[29]=or):or=n[29];const hr=A?"h-0 overflow-hidden opacity-0":"opacity-100";let Ft;n[30]!==hr?(Ft=Fr("transition-all duration-300",hr),n[30]=hr,n[31]=Ft):Ft=n[31];const Y=R?"Search the web...":I?"Think deeply...":$?"Create on canvas...":c;let he;n[32]!==Y?(he=v.jsx($at,{placeholder:Y,className:"text-base"}),n[32]=Y,n[33]=he):he=n[33];let De;n[34]!==Ft||n[35]!==he?(De=v.jsx("div",{className:Ft,children:he}),n[34]=Ft,n[35]=he,n[36]=De):De=n[36];let Oe;n[37]!==xe||n[38]!==A?(Oe=A&&v.jsx(Pat,{isRecording:A,onStartRecording:me,onStopRecording:xe}),n[37]=xe,n[38]=A,n[39]=Oe):Oe=n[39];const et=A?"opacity-0 invisible h-0":"opacity-100 visible";let rn;n[40]!==et?(rn=Fr("flex items-center gap-1 transition-opacity duration-300",et),n[40]=et,n[41]=rn):rn=n[41];let Dn;n[42]===Symbol.for("react.memo_cache_sentinel")?(Dn=()=>G.current?.click(),n[42]=Dn):Dn=n[42];let mn;n[43]===Symbol.for("react.memo_cache_sentinel")?(mn=v.jsx(rGe,{className:"h-5 w-5 transition-colors"}),n[43]=mn):mn=n[43];let Tr;n[44]===Symbol.for("react.memo_cache_sentinel")?(Tr=v.jsx("input",{ref:G,type:"file",className:"hidden",onChange:mt=>{mt.target.files&&mt.target.files.length>0&&N(mt.target.files[0]),mt.target&&(mt.target.value="")},accept:"image/*"}),n[44]=Tr):Tr=n[44];let Cn;n[45]!==A?(Cn=v.jsx(oU,{tooltip:"Upload image",children:v.jsxs("button",{onClick:Dn,className:"flex h-8 w-8 text-[#9CA3AF] cursor-pointer items-center justify-center rounded-full transition-colors hover:bg-gray-600/30 hover:text-[#D1D5DB]",disabled:A,children:[mn,Tr]})}),n[45]=A,n[46]=Cn):Cn=n[46];let gn;n[47]===Symbol.for("react.memo_cache_sentinel")?(gn=()=>K("search"),n[47]=gn):gn=n[47];const Yn=R?"bg-[#1EAEDB]/15 border-[#1EAEDB] text-[#1EAEDB]":"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]";let Jn;n[48]!==Yn?(Jn=Fr("rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8",Yn),n[48]=Yn,n[49]=Jn):Jn=n[49];const co=R?360:0,Ji=R?1.1:1;let Kr;n[50]!==co||n[51]!==Ji?(Kr={rotate:co,scale:Ji},n[50]=co,n[51]=Ji,n[52]=Kr):Kr=n[52];const ir=R?360:15;let ki;n[53]===Symbol.for("react.memo_cache_sentinel")?(ki={type:"spring",stiffness:300,damping:10},n[53]=ki):ki=n[53];let uo;n[54]!==ir?(uo={rotate:ir,scale:1.1,transition:ki},n[54]=ir,n[55]=uo):uo=n[55];let pr;n[56]===Symbol.for("react.memo_cache_sentinel")?(pr={type:"spring",stiffness:260,damping:25},n[56]=pr):pr=n[56];const Ci=R?"text-[#1EAEDB]":"text-inherit";let He;n[57]!==Ci?(He=Fr("w-4 h-4",Ci),n[57]=Ci,n[58]=He):He=n[58];let Kt;n[59]!==He?(Kt=v.jsx(jUe,{className:He}),n[59]=He,n[60]=Kt):Kt=n[60];let jo;n[61]!==Kr||n[62]!==uo||n[63]!==Kt?(jo=v.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:v.jsx(Wn.div,{animate:Kr,whileHover:uo,transition:pr,children:Kt})}),n[61]=Kr,n[62]=uo,n[63]=Kt,n[64]=jo):jo=n[64];let sr;n[65]!==R?(sr=R&&v.jsx(Wn.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-xs overflow-hidden whitespace-nowrap text-[#1EAEDB] flex-shrink-0",children:"Search"}),n[65]=R,n[66]=sr):sr=n[66];let ln;n[67]!==sr?(ln=v.jsx(pa,{children:sr}),n[67]=sr,n[68]=ln):ln=n[68];let Yt;n[69]!==Jn||n[70]!==jo||n[71]!==ln?(Yt=v.jsxs("button",{type:"button",onClick:gn,className:Jn,children:[jo,ln]}),n[69]=Jn,n[70]=jo,n[71]=ln,n[72]=Yt):Yt=n[72];let Lo;n[73]===Symbol.for("react.memo_cache_sentinel")?(Lo=v.jsx(iU,{}),n[73]=Lo):Lo=n[73];let En;n[74]===Symbol.for("react.memo_cache_sentinel")?(En=()=>K("think"),n[74]=En):En=n[74];const Xi=I?"bg-[#8B5CF6]/15 border-[#8B5CF6] text-[#8B5CF6]":"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]";let zo;n[75]!==Xi?(zo=Fr("rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8",Xi),n[75]=Xi,n[76]=zo):zo=n[76];const hu=I?360:0,wa=I?1.1:1;let Ds;n[77]!==hu||n[78]!==wa?(Ds={rotate:hu,scale:wa},n[77]=hu,n[78]=wa,n[79]=Ds):Ds=n[79];const $s=I?360:15;let Qi;n[80]===Symbol.for("react.memo_cache_sentinel")?(Qi={type:"spring",stiffness:300,damping:10},n[80]=Qi):Qi=n[80];let mr;n[81]!==$s?(mr={rotate:$s,scale:1.1,transition:Qi},n[81]=$s,n[82]=mr):mr=n[82];let es;n[83]===Symbol.for("react.memo_cache_sentinel")?(es={type:"spring",stiffness:260,damping:25},n[83]=es):es=n[83];const Xn=I?"text-[#8B5CF6]":"text-inherit";let Sa;n[84]!==Xn?(Sa=Fr("w-4 h-4",Xn),n[84]=Xn,n[85]=Sa):Sa=n[85];let ka;n[86]!==Sa?(ka=v.jsx(QHe,{className:Sa}),n[86]=Sa,n[87]=ka):ka=n[87];let Bo;n[88]!==Ds||n[89]!==mr||n[90]!==ka?(Bo=v.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:v.jsx(Wn.div,{animate:Ds,whileHover:mr,transition:es,children:ka})}),n[88]=Ds,n[89]=mr,n[90]=ka,n[91]=Bo):Bo=n[91];let _r;n[92]!==I?(_r=I&&v.jsx(Wn.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-xs overflow-hidden whitespace-nowrap text-[#8B5CF6] flex-shrink-0",children:"Think"}),n[92]=I,n[93]=_r):_r=n[93];let dl;n[94]!==_r?(dl=v.jsx(pa,{children:_r}),n[94]=_r,n[95]=dl):dl=n[95];let Ca;n[96]!==zo||n[97]!==Bo||n[98]!==dl?(Ca=v.jsxs("button",{type:"button",onClick:En,className:zo,children:[Bo,dl]}),n[96]=zo,n[97]=Bo,n[98]=dl,n[99]=Ca):Ca=n[99];let sc;n[100]===Symbol.for("react.memo_cache_sentinel")?(sc=v.jsx(iU,{}),n[100]=sc):sc=n[100];const Hd=$?"bg-[#F97316]/15 border-[#F97316] text-[#F97316]":"bg-transparent border-transparent text-[#9CA3AF] hover:text-[#D1D5DB]";let ts;n[101]!==Hd?(ts=Fr("rounded-full transition-all flex items-center gap-1 px-2 py-1 border h-8",Hd),n[101]=Hd,n[102]=ts):ts=n[102];const ns=$?360:0,si=$?1.1:1;let js;n[103]!==ns||n[104]!==si?(js={rotate:ns,scale:si},n[103]=ns,n[104]=si,n[105]=js):js=n[105];const ai=$?360:15;let rs;n[106]===Symbol.for("react.memo_cache_sentinel")?(rs={type:"spring",stiffness:300,damping:10},n[106]=rs):rs=n[106];let Ls;n[107]!==ai?(Ls={rotate:ai,scale:1.1,transition:rs},n[107]=ai,n[108]=Ls):Ls=n[108];let fl;n[109]===Symbol.for("react.memo_cache_sentinel")?(fl={type:"spring",stiffness:260,damping:25},n[109]=fl):fl=n[109];const Ud=$?"text-[#F97316]":"text-inherit";let Ea;n[110]!==Ud?(Ea=Fr("w-4 h-4",Ud),n[110]=Ud,n[111]=Ea):Ea=n[111];let Ar;n[112]!==Ea?(Ar=v.jsx(MUe,{className:Ea}),n[112]=Ea,n[113]=Ar):Ar=n[113];let Ei;n[114]!==js||n[115]!==Ls||n[116]!==Ar?(Ei=v.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:v.jsx(Wn.div,{animate:js,whileHover:Ls,transition:fl,children:Ar})}),n[114]=js,n[115]=Ls,n[116]=Ar,n[117]=Ei):Ei=n[117];let hl;n[118]!==$?(hl=$&&v.jsx(Wn.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-xs overflow-hidden whitespace-nowrap text-[#F97316] flex-shrink-0",children:"Canvas"}),n[118]=$,n[119]=hl):hl=n[119];let Co;n[120]!==hl?(Co=v.jsx(pa,{children:hl}),n[120]=hl,n[121]=Co):Co=n[121];let zs;n[122]!==ts||n[123]!==Ei||n[124]!==Co?(zs=v.jsxs("button",{type:"button",onClick:q,className:ts,children:[Ei,Co]}),n[122]=ts,n[123]=Ei,n[124]=Co,n[125]=zs):zs=n[125];let Ti;n[126]!==Yt||n[127]!==Ca||n[128]!==zs?(Ti=v.jsxs("div",{className:"flex items-center",children:[Yt,Lo,Ca,sc,zs]}),n[126]=Yt,n[127]=Ca,n[128]=zs,n[129]=Ti):Ti=n[129];let pl;n[130]!==rn||n[131]!==Cn||n[132]!==Ti?(pl=v.jsxs("div",{className:rn,children:[Cn,Ti]}),n[130]=rn,n[131]=Cn,n[132]=Ti,n[133]=pl):pl=n[133];const fo=l?"Stop generation":A?"Stop recording":Ie?"Send message":"Voice message",ac=A?"bg-transparent hover:bg-gray-600/30 text-red-500 hover:text-red-400":Ie?"bg-white hover:bg-white/80 text-[#1F2023]":"bg-transparent hover:bg-gray-600/30 text-[#9CA3AF] hover:text-[#D1D5DB]";let Ta;n[134]!==ac?(Ta=Fr("h-8 w-8 rounded-full transition-all duration-200",ac),n[134]=ac,n[135]=Ta):Ta=n[135];let is;n[136]!==Pe||n[137]!==Ie||n[138]!==A?(is=()=>{A?M(!1):Ie?Pe():M(!0)},n[136]=Pe,n[137]=Ie,n[138]=A,n[139]=is):is=n[139];const Bs=l&&!Ie;let _a;n[140]!==Ie||n[141]!==l||n[142]!==A?(_a=l?v.jsx(wGe,{className:"h-4 w-4 fill-[#1F2023] animate-pulse"}):A?v.jsx(Wne,{className:"h-5 w-5 text-red-500"}):Ie?v.jsx(Zne,{className:"h-4 w-4 text-[#1F2023]"}):v.jsx(WUe,{className:"h-5 w-5 text-[#1F2023] transition-colors"}),n[140]=Ie,n[141]=l,n[142]=A,n[143]=_a):_a=n[143];let Fs;n[144]!==Ta||n[145]!==is||n[146]!==Bs||n[147]!==_a?(Fs=v.jsx(jle,{variant:"default",size:"icon",className:Ta,onClick:is,disabled:Bs,children:_a}),n[144]=Ta,n[145]=is,n[146]=Bs,n[147]=_a,n[148]=Fs):Fs=n[148];let ho;n[149]!==fo||n[150]!==Fs?(ho=v.jsx(oU,{tooltip:fo,children:Fs}),n[149]=fo,n[150]=Fs,n[151]=ho):ho=n[151];let li;n[152]!==pl||n[153]!==ho?(li=v.jsxs(jat,{className:"flex items-center justify-between gap-2 p-0 pt-2",children:[pl,ho]}),n[152]=pl,n[153]=ho,n[154]=li):li=n[154];let Aa;n[155]!==Pe||n[156]!==u||n[157]!==l||n[158]!==nt||n[159]!==kn||n[160]!==Dr||n[161]!==or||n[162]!==De||n[163]!==Oe||n[164]!==li?(Aa=v.jsxs(Ble,{value:u,onValueChange:f,isLoading:l,onSubmit:Pe,className:nt,disabled:kn,ref:Dr,onDragOver:U,onDragLeave:te,onDrop:ce,children:[or,De,Oe,li]}),n[155]=Pe,n[156]=u,n[157]=l,n[158]=nt,n[159]=kn,n[160]=Dr,n[161]=or,n[162]=De,n[163]=Oe,n[164]=li,n[165]=Aa):Aa=n[165];let lc;n[166]===Symbol.for("react.memo_cache_sentinel")?(lc=()=>T(null),n[166]=lc):lc=n[166];let Yr;n[167]!==E?(Yr=v.jsx(Dat,{imageUrl:E,onClose:lc}),n[167]=E,n[168]=Yr):Yr=n[168];let pu;return n[169]!==Aa||n[170]!==Yr?(pu=v.jsxs(v.Fragment,{children:[Aa,Yr]}),n[169]=Aa,n[170]=Yr,n[171]=pu):pu=n[171],pu});Fle.displayName="PromptInputBox";function Lat(e){return e+1}function zat(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function Bat(e,t){return v.jsx("div",{className:"w-0.5 rounded-full bg-white/50 animate-pulse",style:{height:`${Math.max(15,Math.random()*100)}%`,animationDelay:`${t*.05}s`,animationDuration:`${.5+Math.random()*.5}s`}},t)}function Fat(){}function Vat(e){return!e}function Hat(e){return!e}function Uat(e){return!e}function Gat(e){return e.type.startsWith("image/")}function qat(e){e.preventDefault(),e.stopPropagation()}function Zat(e){e.preventDefault(),e.stopPropagation()}function Wat(){return console.log("Started recording")}const Kat=async(e,t)=>{if(!e)throw console.error("Editor instance not found"),new Error("Editor not connected");console.log("Executing AI Action:",JSON.stringify(t,null,2));try{switch(t.action){case"insertText":Yat(e,t.data);break;case"insertCode":Jat(e,t.data);break;case"insertHeading":Xat(e,t.data);break;case"insertParagraph":Qat(e,t.data);break;case"update":elt(e,t.data);break;case"delete":tlt(e,t.data);break;case"replace":nlt(e,t.data);break;default:const n=Oh(t.data);n&&e.insertInlineContent(n)}console.log("Successfully executed action")}catch(n){throw console.error("Failed to execute AI action:",n),n}},Yat=(e,t)=>{const n=Oh(t);n&&e.insertInlineContent(n)},Jat=(e,t)=>{const n=t.code||t.text||Oh(t),r=t.language||"plaintext",o=c5(e);o&&e.insertBlocks([{type:"codeBlock",props:{language:r},content:n}],o,"after")},Xat=(e,t)=>{const n=t.text||Oh(t),r=t.level||2,o=c5(e);o&&e.insertBlocks([{type:"heading",props:{level:r},content:n}],o,"after")},Qat=(e,t)=>{const n=t.text||Oh(t),r=c5(e);r&&e.insertBlocks([{type:"paragraph",content:n}],r,"after")},elt=(e,t)=>{const{blockId:n,searchText:r,newContent:o,newType:i}=t;let s=n;if(!s&&r&&(s=l5(e,r)),!s)throw console.warn("No block found to update"),new Error("Could not find the block to update. Try specifying the text more precisely.");const a={};o&&(a.content=o),i&&(a.type=i),e.updateBlock(s,a),console.log(`Updated block ${s}`)},tlt=(e,t)=>{const{blockIds:n,searchText:r}=t;let o=n||[];if(o.length===0&&r){const i=l5(e,r);i&&(o=[i])}if(o.length===0)throw console.warn("No blocks found to delete"),new Error("Could not find the block(s) to delete.");e.removeBlocks(o),console.log(`Deleted blocks: ${o.join(", ")}`)},nlt=(e,t)=>{const{blockIds:n,searchText:r,newBlocks:o,newContent:i}=t;let s=n||[];if(s.length===0&&r){const l=l5(e,r);l&&(s=[l])}if(s.length===0)throw console.warn("No blocks found to replace"),new Error("Could not find the block(s) to replace.");let a=[];if(o&&Array.isArray(o)?a=o.map(l=>({type:l.type||"paragraph",content:typeof l.content=="string"?l.content:Oh(l),...l.props?{props:l.props}:{}})):i&&(a=[{type:"paragraph",content:i}]),a.length===0)throw new Error("No replacement content provided.");e.replaceBlocks(s,a),console.log(`Replaced blocks: ${s.join(", ")}`)},l5=(e,t)=>{let n=null;const r=t.toLowerCase().trim();return e.forEachBlock(o=>n?!1:rlt(o).toLowerCase().includes(r)?(n=o.id,!1):!0),n},rlt=e=>e.content?typeof e.content=="string"?e.content:Array.isArray(e.content)?e.content.map(t=>t.text||"").join(""):"":"",c5=e=>{const t=e.document;return t&&t.length>0?t[t.length-1].id:null},Oh=e=>{if(!e)return"";if(typeof e=="string")return e;if(e.text)return e.text;if(e.code)return e.code;if(e.content){if(typeof e.content=="string")return e.content;if(Array.isArray(e.content))return e.content.map(t=>typeof t=="string"?t:t.text?t.text:"").join("")}return e.blocks&&Array.isArray(e.blocks)?e.blocks.map(t=>Oh(t)).join(`

`):""},Vle=e=>{switch(e){case"insertCode":case"insertHeading":case"insertText":case"insertParagraph":return{icon:Eb,label:"Add",color:"green",textClass:"text-green-400"};case"delete":return{icon:YUe,label:"Delete",color:"red",textClass:"text-red-400"};case"update":return{icon:iGe,label:"Update",color:"yellow",textClass:"text-yellow-400"};case"replace":return{icon:Pk,label:"Replace",color:"blue",textClass:"text-blue-400"};default:return{icon:Eb,label:"Edit",color:"zinc",textClass:"text-zinc-400"}}},olt=e=>{const t=e.data||{};return t.text||t.code||t.newContent||t.searchText||""};function ilt(e){const t=ht.c(76),{actionDataList:n,status:r,onStatusChange:o}=e,[i,s]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(0),f=n.length,p=f===1;let m;t[0]!==n||t[1]!==o||t[2]!==f?(m=async()=>{const z=_n.getState().editor;if(!z){pt.error("Editor not connected");return}l(!0);let N=0;for(let U=0;U<n.length;U++){const te=n[U];try{await Kat(z,te),N++,u(U+1)}catch(D){const ce=D;console.error(`Failed action ${U+1}:`,ce),pt.error(`Action ${U+1} failed: ${ce.message||"Unknown error"}`)}}l(!1),N>0&&(o("approved"),N<f&&pt.success(`Applied ${N}/${f} changes`))},t[0]=n,t[1]=o,t[2]=f,t[3]=m):m=t[3];const y=m;if(r==="approved"){let z;t[4]===Symbol.for("react.memo_cache_sentinel")?(z=v.jsx("div",{className:"bg-green-500/20 p-1 rounded",children:v.jsx(dI,{size:14,className:"text-green-400"})}),t[4]=z):z=t[4];const N=f>1?"s":"";let U;t[5]!==N||t[6]!==f?(U=v.jsxs("div",{className:"flex items-center gap-2",children:[z,v.jsxs("span",{className:"text-xs text-green-400 font-medium",children:[f," Change",N," Applied"]})]}),t[5]=N,t[6]=f,t[7]=U):U=t[7];let te;t[8]!==n?(te=n.slice(0,3).map(alt),t[8]=n,t[9]=te):te=t[9];let D;t[10]!==f?(D=f>3&&v.jsxs("p",{className:"text-xs text-zinc-600",children:["...and ",f-3," more"]}),t[10]=f,t[11]=D):D=t[11];let ce;t[12]!==te||t[13]!==D?(ce=v.jsxs("div",{className:"mt-2 space-y-1",children:[te,D]}),t[12]=te,t[13]=D,t[14]=ce):ce=t[14];let ae;return t[15]!==U||t[16]!==ce?(ae=v.jsxs("div",{className:"bg-green-950/30 border border-green-800/40 rounded-lg p-3",children:[U,ce]}),t[15]=U,t[16]=ce,t[17]=ae):ae=t[17],ae}if(r==="refused"){let z;t[18]===Symbol.for("react.memo_cache_sentinel")?(z=v.jsx("div",{className:"bg-zinc-800 p-1 rounded",children:v.jsx(mh,{size:14,className:"text-zinc-500"})}),t[18]=z):z=t[18];const N=f>1?"s":"";let U;return t[19]!==N||t[20]!==f?(U=v.jsx("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-lg p-2 opacity-60",children:v.jsxs("div",{className:"flex items-center gap-2",children:[z,v.jsxs("span",{className:"text-xs text-zinc-500 line-through",children:[f," change",N," refused"]})]})}),t[19]=N,t[20]=f,t[21]=U):U=t[21],U}let b;t[22]!==n?(b=n.slice(0,3).map(slt),t[22]=n,t[23]=b):b=t[23];let w;t[24]!==b?(w=v.jsx("div",{className:"flex -space-x-1",children:b}),t[24]=b,t[25]=w):w=t[25];const S=f>1?"s":"";let E;t[26]!==S||t[27]!==f?(E=v.jsxs("span",{className:"text-xs font-semibold text-zinc-200 uppercase tracking-wider",children:[f," Edit",S]}),t[26]=S,t[27]=f,t[28]=E):E=t[28];let T;t[29]!==w||t[30]!==E?(T=v.jsxs("div",{className:"flex items-center gap-2",children:[w,E]}),t[29]=w,t[30]=E,t[31]=T):T=t[31];let A;t[32]!==i||t[33]!==p?(A=!p&&v.jsxs("button",{onClick:()=>s(!i),className:"flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300",children:[i?v.jsx(aUe,{size:14}):v.jsx(CE,{size:14}),i?"Less":"Details"]}),t[32]=i,t[33]=p,t[34]=A):A=t[34];let M;t[35]!==T||t[36]!==A?(M=v.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-zinc-800 bg-zinc-900/80",children:[T,A]}),t[35]=T,t[36]=A,t[37]=M):M=t[37];let R;if(t[38]!==n||t[39]!==i||t[40]!==p||t[41]!==f){let z;t[43]!==i?(z=(N,U)=>{const te=Vle(N.action),D=te.icon,ce=olt(N);return v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx(D,{size:12,className:`${te.textClass} mt-0.5 flex-shrink-0`}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm text-zinc-300",children:N.description}),i&&ce&&v.jsxs("p",{className:"text-xs text-zinc-500 font-mono truncate mt-0.5",children:[ce.substring(0,60),ce.length>60?"...":""]})]})]},U)},t[43]=i,t[44]=z):z=t[44],R=n.slice(0,i?f:p?1:2).map(z),t[38]=n,t[39]=i,t[40]=p,t[41]=f,t[42]=R}else R=t[42];let O;t[45]!==i||t[46]!==p||t[47]!==f?(O=!p&&!i&&f>2&&v.jsxs("p",{className:"text-xs text-zinc-500 pl-5",children:["+",f-2," more changes"]}),t[45]=i,t[46]=p,t[47]=f,t[48]=O):O=t[48];let I;t[49]!==O||t[50]!==R?(I=v.jsxs("div",{className:"px-3 py-2 border-b border-zinc-800/50 space-y-1.5",children:[R,O]}),t[49]=O,t[50]=R,t[51]=I):I=t[51];let L;t[52]!==a||t[53]!==c||t[54]!==f?(L=a&&v.jsxs("div",{className:"px-3 py-2 bg-blue-950/30 border-b border-blue-900/30",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),v.jsxs("span",{className:"text-xs text-blue-400",children:["Applying changes... ",c,"/",f]})]}),v.jsx("div",{className:"mt-2 h-1 bg-zinc-800 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${c/f*100}%`}})})]}),t[52]=a,t[53]=c,t[54]=f,t[55]=L):L=t[55];let $;t[56]===Symbol.for("react.memo_cache_sentinel")?($=v.jsx(dI,{size:14}),t[56]=$):$=t[56];const B=p?"Approve":`Approve All (${f})`;let G;t[57]!==y||t[58]!==a||t[59]!==B?(G=v.jsxs("button",{onClick:y,disabled:a,className:"flex-1 bg-green-600 hover:bg-green-500 disabled:bg-green-800 disabled:cursor-not-allowed text-white text-xs font-semibold py-2.5 rounded-md transition-all shadow-md hover:shadow-lg active:scale-95 flex items-center justify-center gap-1.5",children:[$,B]}),t[57]=y,t[58]=a,t[59]=B,t[60]=G):G=t[60];let V;t[61]!==o?(V=()=>o("refused"),t[61]=o,t[62]=V):V=t[62];let W;t[63]===Symbol.for("react.memo_cache_sentinel")?(W=v.jsx(mh,{size:14}),t[63]=W):W=t[63];const K=p?"Refuse":"Refuse All";let F;t[64]!==a||t[65]!==V||t[66]!==K?(F=v.jsxs("button",{onClick:V,disabled:a,className:"flex-1 bg-zinc-800 hover:bg-zinc-700 disabled:cursor-not-allowed text-zinc-400 hover:text-zinc-200 text-xs font-medium py-2.5 rounded-md transition-all active:scale-95 flex items-center justify-center gap-1.5",children:[W,K]}),t[64]=a,t[65]=V,t[66]=K,t[67]=F):F=t[67];let q;t[68]!==G||t[69]!==F?(q=v.jsxs("div",{className:"flex gap-2 p-3 bg-zinc-900/50",children:[G,F]}),t[68]=G,t[69]=F,t[70]=q):q=t[70];let H;return t[71]!==I||t[72]!==L||t[73]!==q||t[74]!==M?(H=v.jsxs("div",{className:"bg-zinc-900 border border-zinc-700/50 rounded-lg overflow-hidden shadow-lg",children:[M,I,L,q]}),t[71]=I,t[72]=L,t[73]=q,t[74]=M,t[75]=H):H=t[75],H}function slt(e,t){const n=Vle(e.action),r=n.icon;return v.jsx("div",{className:"w-5 h-5 rounded-full bg-zinc-800 border border-zinc-700 flex items-center justify-center",children:v.jsx(r,{size:10,className:n.textClass})},t)}function alt(e,t){return v.jsxs("p",{className:"text-xs text-zinc-500",children:[" ",e.description]},t)}function fmt(){}const llt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,clt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ult={};function sU(e,t){return(ult.jsx?clt:llt).test(e)}var Mp={},IM,aU;function dlt(){if(aU)return IM;aU=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",p="comment",m="declaration";IM=function(b,w){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];w=w||{};var S=1,E=1;function T(V){var W=V.match(t);W&&(S+=W.length);var K=V.lastIndexOf(l);E=~K?V.length-K:E+V.length}function A(){var V={line:S,column:E};return function(W){return W.position=new M(V),I(),W}}function M(V){this.start=V,this.end={line:S,column:E},this.source=w.source}M.prototype.content=b;function R(V){var W=new Error(w.source+":"+S+":"+E+": "+V);if(W.reason=V,W.filename=w.source,W.line=S,W.column=E,W.source=b,!w.silent)throw W}function O(V){var W=V.exec(b);if(W){var K=W[0];return T(K),b=b.slice(K.length),W}}function I(){O(n)}function L(V){var W;for(V=V||[];W=$();)W!==!1&&V.push(W);return V}function $(){var V=A();if(!(c!=b.charAt(0)||u!=b.charAt(1))){for(var W=2;f!=b.charAt(W)&&(u!=b.charAt(W)||c!=b.charAt(W+1));)++W;if(W+=2,f===b.charAt(W-1))return R("End of comment missing");var K=b.slice(2,W-2);return E+=2,T(K),b=b.slice(W),E+=2,V({type:p,comment:K})}}function B(){var V=A(),W=O(r);if(W){if($(),!O(o))return R("property missing ':'");var K=O(i),F=V({type:m,property:y(W[0].replace(e,f)),value:K?y(K[0].replace(e,f)):f});return O(s),F}}function G(){var V=[];L(V);for(var W;W=B();)W!==!1&&(V.push(W),L(V));return V}return I(),G()};function y(b){return b?b.replace(a,f):f}return IM}var lU;function flt(){if(lU)return Mp;lU=1;var e=Mp&&Mp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.default=n;const t=e(dlt());function n(r,o){let i=null;if(!r||typeof r!="string")return i;const s=(0,t.default)(r),a=typeof o=="function";return s.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?o(c,u,l):u&&(i=i||{},i[c]=u)}),i}return Mp}var My={},cU;function hlt(){if(cU)return My;cU=1,Object.defineProperty(My,"__esModule",{value:!0}),My.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,i=function(c){return!c||n.test(c)||e.test(c)},s=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),i(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(o,a):c=c.replace(r,a),c.replace(t,s))};return My.camelCase=l,My}var Ny,uU;function plt(){if(uU)return Ny;uU=1;var e=Ny&&Ny.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(flt()),n=hlt();function r(o,i){var s={};return!o||typeof o!="string"||(0,t.default)(o,function(a,l){a&&l&&(s[(0,n.camelCase)(a,i)]=l)}),s}return r.default=r,Ny=r,Ny}var mlt=plt();const glt=Md(mlt),Hle=Ule("end"),u5=Ule("start");function Ule(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function ylt(e){const t=u5(e),n=Hle(e);if(t&&n)return{start:t,end:n}}function S0(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?dU(e.position):"start"in e||"end"in e?dU(e):"line"in e||"column"in e?dO(e):""}function dO(e){return fU(e&&e.line)+":"+fU(e&&e.column)}function dU(e){return dO(e&&e.start)+"-"+dO(e&&e.end)}function fU(e){return e&&typeof e=="number"?e:1}class ii extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let o="",i={},s=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?o=t:!i.cause&&t&&(s=!0,o=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?i.ruleId=r:(i.source=r.slice(0,l),i.ruleId=r.slice(l+1))}if(!i.place&&i.ancestors&&i.ancestors){const l=i.ancestors[i.ancestors.length-1];l&&(i.place=l.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=a?a.line:void 0,this.name=S0(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=s&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ii.prototype.file="";ii.prototype.name="";ii.prototype.reason="";ii.prototype.message="";ii.prototype.stack="";ii.prototype.column=void 0;ii.prototype.line=void 0;ii.prototype.ancestors=void 0;ii.prototype.cause=void 0;ii.prototype.fatal=void 0;ii.prototype.place=void 0;ii.prototype.ruleId=void 0;ii.prototype.source=void 0;const d5={}.hasOwnProperty,blt=new Map,vlt=/[A-Z]/g,xlt=new Set(["table","tbody","thead","tfoot","tr"]),wlt=new Set(["td","th"]),Gle="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Slt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Nlt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Mlt(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?yv:wX,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=qle(o,e,void 0);return i&&typeof i!="string"?i:o.create(e,o.Fragment,{children:i||void 0},void 0)}function qle(e,t,n){if(t.type==="element")return klt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Clt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Tlt(e,t,n);if(t.type==="mdxjsEsm")return Elt(e,t);if(t.type==="root")return _lt(e,t,n);if(t.type==="text")return Alt(e,t)}function klt(e,t,n){const r=e.schema;let o=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(o=yv,e.schema=o),e.ancestors.push(t);const i=Wle(e,t.tagName,!1),s=Rlt(e,t);let a=h5(e,t);return xlt.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!uE(l):!0})),Zle(e,s,i,t),f5(s,a),e.ancestors.pop(),e.schema=r,e.create(t,i,s,n)}function Clt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}jb(e,t.position)}function Elt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);jb(e,t.position)}function Tlt(e,t,n){const r=e.schema;let o=r;t.name==="svg"&&r.space==="html"&&(o=yv,e.schema=o),e.ancestors.push(t);const i=t.name===null?e.Fragment:Wle(e,t.name,!0),s=Ilt(e,t),a=h5(e,t);return Zle(e,s,i,t),f5(s,a),e.ancestors.pop(),e.schema=r,e.create(t,i,s,n)}function _lt(e,t,n){const r={};return f5(r,h5(e,t)),e.create(t,e.Fragment,r,n)}function Alt(e,t){return t.value}function Zle(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function f5(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Mlt(e,t,n){return r;function r(o,i,s,a){const c=Array.isArray(s.children)?n:t;return a?c(i,s,a):c(i,s)}}function Nlt(e,t){return n;function n(r,o,i,s){const a=Array.isArray(i.children),l=u5(r);return t(o,i,s,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function Rlt(e,t){const n={};let r,o;for(o in t.properties)if(o!=="children"&&d5.call(t.properties,o)){const i=Olt(e,o,t.properties[o]);if(i){const[s,a]=i;e.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&wlt.has(t.tagName)?r=a:n[s]=a}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Ilt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const s=i.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else jb(e,t.position);else{const o=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,i=e.evaluater.evaluateExpression(a.expression)}else jb(e,t.position);else i=r.value===null?!0:r.value;n[o]=i}return n}function h5(e,t){const n=[];let r=-1;const o=e.passKeys?new Map:blt;for(;++r<t.children.length;){const i=t.children[r];let s;if(e.passKeys){const l=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(l){const c=o.get(l)||0;s=l+"-"+c,o.set(l,c+1)}}const a=qle(e,i,s);a!==void 0&&n.push(a)}return n}function Olt(e,t,n){const r=xX(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?kX(n):CX(n)),r.property==="style"){let o=typeof n=="object"?n:Plt(e,String(n));return e.stylePropertyNameCase==="css"&&(o=Dlt(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&r.space?P4e[r.property]||r.property:r.attribute,n]}}function Plt(e,t){try{return glt(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,o=new ii("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Gle+"#cannot-parse-style-attribute",o}}function Wle(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let i=-1,s;for(;++i<o.length;){const a=sU(o[i])?{type:"Identifier",name:o[i]}:{type:"Literal",value:o[i]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(i&&a.type==="Literal"),optional:!1}:a}r=s}else r=sU(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const o=r.value;return d5.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(r);jb(e)}function jb(e,t){const n=new ii("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Gle+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Dlt(e){const t={};let n;for(n in e)d5.call(e,n)&&(t[$lt(n)]=e[n]);return t}function $lt(e){let t=e.replace(vlt,jlt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function jlt(e){return"-"+e.toLowerCase()}const OM={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Llt={};function p5(e,t){const n=Llt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Kle(e,r,o)}function Kle(e,t,n){if(zlt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return hU(e.children,t,n)}return Array.isArray(e)?hU(e,t,n):""}function hU(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=Kle(e[o],t,n);return r.join("")}function zlt(e){return!!(e&&typeof e=="object")}const pU=document.createElement("i");function m5(e){const t="&"+e+";";pU.innerHTML=t;const n=pU.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ks(e,t,n,r){const o=e.length;let i=0,s;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);i<r.length;)s=r.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function na(e,t){return e.length>0?(ks(e,e.length,0,t),e):t}const mU={}.hasOwnProperty;function Yle(e){const t={};let n=-1;for(;++n<e.length;)Blt(t,e[n]);return t}function Blt(e,t){let n;for(n in t){const o=(mU.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let s;if(i)for(s in i){mU.call(o,s)||(o[s]=[]);const a=i[s];Flt(o[s],Array.isArray(a)?a:a?[a]:[])}}}function Flt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ks(e,0,0,r)}function Jle(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ka(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fi=Vd(/[A-Za-z]/),Qo=Vd(/[\dA-Za-z]/),Vlt=Vd(/[#-'*+\--9=?A-Z^-~]/);function eC(e){return e!==null&&(e<32||e===127)}const fO=Vd(/\d/),Hlt=Vd(/[\dA-Fa-f]/),Ult=Vd(/[!-/:-@[-`{-~]/);function it(e){return e!==null&&e<-2}function In(e){return e!==null&&(e<0||e===32)}function Bt(e){return e===-2||e===-1||e===32}const XE=Vd(new RegExp("\\p{P}|\\p{S}","u")),bh=Vd(/\s/);function Vd(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function _g(e){const t=[];let n=-1,r=0,o=0;for(;++n<e.length;){const i=e.charCodeAt(n);let s="";if(i===37&&Qo(e.charCodeAt(n+1))&&Qo(e.charCodeAt(n+2)))o=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(s=String.fromCharCode(i));else if(i>55295&&i<57344){const a=e.charCodeAt(n+1);i<56320&&a>56319&&a<57344?(s=String.fromCharCode(i,a),o=1):s=""}else s=String.fromCharCode(i);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+o+1,s=""),o&&(n+=o,o=0)}return t.join("")+e.slice(r)}function qt(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let i=0;return s;function s(l){return Bt(l)?(e.enter(n),a(l)):t(l)}function a(l){return Bt(l)&&i++<o?(e.consume(l),a):(e.exit(n),t(l))}}const Glt={tokenize:qlt};function qlt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,o);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),qt(e,t,"linePrefix")}function o(a){return e.enter("paragraph"),i(a)}function i(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return it(a)?(e.consume(a),e.exit("chunkText"),i):(e.consume(a),s)}}const Zlt={tokenize:Wlt},gU={tokenize:Klt};function Wlt(e){const t=this,n=[];let r=0,o,i,s;return a;function a(T){if(r<n.length){const A=n[r];return t.containerState=A[1],e.attempt(A[0].continuation,l,c)(T)}return c(T)}function l(T){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&E();const A=t.events.length;let M=A,R;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){R=t.events[M][1].end;break}S(r);let O=A;for(;O<t.events.length;)t.events[O][1].end={...R},O++;return ks(t.events,M+1,0,t.events.slice(A)),t.events.length=O,c(T)}return a(T)}function c(T){if(r===n.length){if(!o)return p(T);if(o.currentConstruct&&o.currentConstruct.concrete)return y(T);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(gU,u,f)(T)}function u(T){return o&&E(),S(r),p(T)}function f(T){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,y(T)}function p(T){return t.containerState={},e.attempt(gU,m,y)(T)}function m(T){return r++,n.push([t.currentConstruct,t.containerState]),p(T)}function y(T){if(T===null){o&&E(),S(0),e.consume(T);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:i}),b(T)}function b(T){if(T===null){w(e.exit("chunkFlow"),!0),S(0),e.consume(T);return}return it(T)?(e.consume(T),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(T),b)}function w(T,A){const M=t.sliceStream(T);if(A&&M.push(null),T.previous=i,i&&(i.next=T),i=T,o.defineSkip(T.start),o.write(M),t.parser.lazy[T.start.line]){let R=o.events.length;for(;R--;)if(o.events[R][1].start.offset<s&&(!o.events[R][1].end||o.events[R][1].end.offset>s))return;const O=t.events.length;let I=O,L,$;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(L){$=t.events[I][1].end;break}L=!0}for(S(r),R=O;R<t.events.length;)t.events[R][1].end={...$},R++;ks(t.events,I+1,0,t.events.slice(O)),t.events.length=R}}function S(T){let A=n.length;for(;A-- >T;){const M=n[A];t.containerState=M[1],M[0].exit.call(t,e)}n.length=T}function E(){o.write([null]),i=void 0,o=void 0,t.containerState._closeFlow=void 0}}function Klt(e,t,n){return qt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Um(e){if(e===null||In(e)||bh(e))return 1;if(XE(e))return 2}function QE(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const i=e[o].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const hO={name:"attention",resolveAll:Ylt,tokenize:Jlt};function Ylt(e,t){let n=-1,r,o,i,s,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},p={...e[n][1].start};yU(f,-l),yU(p,l),s={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:p},i={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},o={type:l>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},e[r][1].end={...s.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=na(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=na(c,[["enter",o,t],["enter",s,t],["exit",s,t],["enter",i,t]]),c=na(c,QE(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=na(c,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=na(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,ks(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Jlt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=Um(r);let i;return s;function s(l){return i=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===i)return e.consume(l),a;const c=e.exit("attentionSequence"),u=Um(l),f=!u||u===2&&o||n.includes(l),p=!o||o===2&&u||n.includes(r);return c._open=!!(i===42?f:f&&(o||!p)),c._close=!!(i===42?p:p&&(u||!f)),t(l)}}function yU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Xlt={name:"autolink",tokenize:Qlt};function Qlt(e,t,n){let r=0;return o;function o(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(m){return fi(m)?(e.consume(m),s):m===64?n(m):c(m)}function s(m){return m===43||m===45||m===46||Qo(m)?(r=1,a(m)):c(m)}function a(m){return m===58?(e.consume(m),r=0,l):(m===43||m===45||m===46||Qo(m))&&r++<32?(e.consume(m),a):(r=0,c(m))}function l(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||eC(m)?n(m):(e.consume(m),l)}function c(m){return m===64?(e.consume(m),u):Vlt(m)?(e.consume(m),c):n(m)}function u(m){return Qo(m)?f(m):n(m)}function f(m){return m===46?(e.consume(m),r=0,u):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):p(m)}function p(m){if((m===45||Qo(m))&&r++<63){const y=m===45?p:f;return e.consume(m),y}return n(m)}}const Pv={partial:!0,tokenize:ect};function ect(e,t,n){return r;function r(i){return Bt(i)?qt(e,o,"linePrefix")(i):o(i)}function o(i){return i===null||it(i)?t(i):n(i)}}const Xle={continuation:{tokenize:nct},exit:rct,name:"blockQuote",tokenize:tct};function tct(e,t,n){const r=this;return o;function o(s){if(s===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),i}return n(s)}function i(s){return Bt(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function nct(e,t,n){const r=this;return o;function o(s){return Bt(s)?qt(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):i(s)}function i(s){return e.attempt(Xle,t,n)(s)}}function rct(e){e.exit("blockQuote")}const Qle={name:"characterEscape",tokenize:oct};function oct(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),o}function o(i){return Ult(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const ece={name:"characterReference",tokenize:ict};function ict(e,t,n){const r=this;let o=0,i,s;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),l}function l(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),i=31,s=Qo,u(f))}function c(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,s=Hlt,u):(e.enter("characterReferenceValue"),i=7,s=fO,u(f))}function u(f){if(f===59&&o){const p=e.exit("characterReferenceValue");return s===Qo&&!m5(r.sliceSerialize(p))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(f)&&o++<i?(e.consume(f),u):n(f)}}const bU={partial:!0,tokenize:act},vU={concrete:!0,name:"codeFenced",tokenize:sct};function sct(e,t,n){const r=this,o={partial:!0,tokenize:M};let i=0,s=0,a;return l;function l(R){return c(R)}function c(R){const O=r.events[r.events.length-1];return i=O&&O[1].type==="linePrefix"?O[2].sliceSerialize(O[1],!0).length:0,a=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(R)}function u(R){return R===a?(s++,e.consume(R),u):s<3?n(R):(e.exit("codeFencedFenceSequence"),Bt(R)?qt(e,f,"whitespace")(R):f(R))}function f(R){return R===null||it(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(bU,b,A)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(R))}function p(R){return R===null||it(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(R)):Bt(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),qt(e,m,"whitespace")(R)):R===96&&R===a?n(R):(e.consume(R),p)}function m(R){return R===null||it(R)?f(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(R))}function y(R){return R===null||it(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(R)):R===96&&R===a?n(R):(e.consume(R),y)}function b(R){return e.attempt(o,A,w)(R)}function w(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),S}function S(R){return i>0&&Bt(R)?qt(e,E,"linePrefix",i+1)(R):E(R)}function E(R){return R===null||it(R)?e.check(bU,b,A)(R):(e.enter("codeFlowValue"),T(R))}function T(R){return R===null||it(R)?(e.exit("codeFlowValue"),E(R)):(e.consume(R),T)}function A(R){return e.exit("codeFenced"),t(R)}function M(R,O,I){let L=0;return $;function $(K){return R.enter("lineEnding"),R.consume(K),R.exit("lineEnding"),B}function B(K){return R.enter("codeFencedFence"),Bt(K)?qt(R,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):G(K)}function G(K){return K===a?(R.enter("codeFencedFenceSequence"),V(K)):I(K)}function V(K){return K===a?(L++,R.consume(K),V):L>=s?(R.exit("codeFencedFenceSequence"),Bt(K)?qt(R,W,"whitespace")(K):W(K)):I(K)}function W(K){return K===null||it(K)?(R.exit("codeFencedFence"),O(K)):I(K)}}}function act(e,t,n){const r=this;return o;function o(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const PM={name:"codeIndented",tokenize:cct},lct={partial:!0,tokenize:uct};function cct(e,t,n){const r=this;return o;function o(c){return e.enter("codeIndented"),qt(e,i,"linePrefix",5)(c)}function i(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(c):n(c)}function s(c){return c===null?l(c):it(c)?e.attempt(lct,s,l)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||it(c)?(e.exit("codeFlowValue"),s(c)):(e.consume(c),a)}function l(c){return e.exit("codeIndented"),t(c)}}function uct(e,t,n){const r=this;return o;function o(s){return r.parser.lazy[r.now().line]?n(s):it(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):qt(e,i,"linePrefix",5)(s)}function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):it(s)?o(s):n(s)}}const dct={name:"codeText",previous:hct,resolve:fct,tokenize:pct};function fct(e){let t=e.length-4,n=3,r,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)o===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(o=r):(r===t||e[r][1].type==="lineEnding")&&(e[o][1].type="codeTextData",r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),t-=r-o-2,r=o+2),o=void 0);return e}function hct(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function pct(e,t,n){let r=0,o,i;return s;function s(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),l):f===96?(i=e.enter("codeTextSequence"),o=0,u(f)):it(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||it(f)?(e.exit("codeTextData"),l(f)):(e.consume(f),c)}function u(f){return f===96?(e.consume(f),o++,u):o===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(i.type="codeTextData",c(f))}}class mct{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const o=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return r&&Ry(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Ry(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Ry(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Ry(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Ry(this.left,n.reverse())}}}function Ry(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function tce(e){const t={};let n=-1,r,o,i,s,a,l,c;const u=new mct(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,gct(u,n)),n=t[n],c=!0);else if(r[1]._container){for(i=n,o=void 0;i--;)if(s=u.get(i),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(o&&(u.get(o)[1].type="lineEndingBlank"),s[1].type="lineEnding",o=i);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;o&&(r[1].end={...u.get(o)[1].start},a=u.slice(o,n),a.unshift(r),u.splice(o,n-o+1,a))}}return ks(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function gct(e,t){const n=e.get(t)[1],r=e.get(t)[2];let o=t-1;const i=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,l=[],c={};let u,f,p=-1,m=n,y=0,b=0;const w=[b];for(;m;){for(;e.get(++o)[1]!==m;);i.push(o),m._tokenizer||(u=r.sliceStream(m),m.next||u.push(null),f&&s.defineSkip(m.start),m._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),m._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(b=p+1,w.push(b),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(s.events=[],m?(m._tokenizer=void 0,m.previous=void 0):w.pop(),p=w.length;p--;){const S=a.slice(w[p],w[p+1]),E=i.pop();l.push([E,E+S.length-1]),e.splice(E,2,S)}for(l.reverse(),p=-1;++p<l.length;)c[y+l[p][0]]=y+l[p][1],y+=l[p][1]-l[p][0]-1;return c}const yct={resolve:vct,tokenize:xct},bct={partial:!0,tokenize:wct};function vct(e){return tce(e),e}function xct(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(a)}function o(a){return a===null?i(a):it(a)?e.check(bct,s,i)(a):(e.consume(a),o)}function i(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function wct(e,t,n){const r=this;return o;function o(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),qt(e,i,"linePrefix")}function i(s){if(s===null||it(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function nce(e,t,n,r,o,i,s,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(S){return S===60?(e.enter(r),e.enter(o),e.enter(i),e.consume(S),e.exit(i),p):S===null||S===32||S===41||eC(S)?n(S):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),b(S))}function p(S){return S===62?(e.enter(i),e.consume(S),e.exit(i),e.exit(o),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),m(S))}function m(S){return S===62?(e.exit("chunkString"),e.exit(a),p(S)):S===null||S===60||it(S)?n(S):(e.consume(S),S===92?y:m)}function y(S){return S===60||S===62||S===92?(e.consume(S),m):m(S)}function b(S){return!u&&(S===null||S===41||In(S))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(S)):u<c&&S===40?(e.consume(S),u++,b):S===41?(e.consume(S),u--,b):S===null||S===32||S===40||eC(S)?n(S):(e.consume(S),S===92?w:b)}function w(S){return S===40||S===41||S===92?(e.consume(S),b):b(S)}}function rce(e,t,n,r,o,i){const s=this;let a=0,l;return c;function c(m){return e.enter(r),e.enter(o),e.consume(m),e.exit(o),e.enter(i),u}function u(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(m):m===93?(e.exit(i),e.enter(o),e.consume(m),e.exit(o),e.exit(r),t):it(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||it(m)||a++>999?(e.exit("chunkString"),u(m)):(e.consume(m),l||(l=!Bt(m)),m===92?p:f)}function p(m){return m===91||m===92||m===93?(e.consume(m),a++,f):f(m)}}function oce(e,t,n,r,o,i){let s;return a;function a(p){return p===34||p===39||p===40?(e.enter(r),e.enter(o),e.consume(p),e.exit(o),s=p===40?41:p,l):n(p)}function l(p){return p===s?(e.enter(o),e.consume(p),e.exit(o),e.exit(r),t):(e.enter(i),c(p))}function c(p){return p===s?(e.exit(i),l(s)):p===null?n(p):it(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),qt(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(p))}function u(p){return p===s||p===null||it(p)?(e.exit("chunkString"),c(p)):(e.consume(p),p===92?f:u)}function f(p){return p===s||p===92?(e.consume(p),u):u(p)}}function k0(e,t){let n;return r;function r(o){return it(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r):Bt(o)?qt(e,r,n?"linePrefix":"lineSuffix")(o):t(o)}}const Sct={name:"definition",tokenize:Cct},kct={partial:!0,tokenize:Ect};function Cct(e,t,n){const r=this;let o;return i;function i(m){return e.enter("definition"),s(m)}function s(m){return rce.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return o=Ka(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),l):n(m)}function l(m){return In(m)?k0(e,c)(m):c(m)}function c(m){return nce(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function u(m){return e.attempt(kct,f,f)(m)}function f(m){return Bt(m)?qt(e,p,"whitespace")(m):p(m)}function p(m){return m===null||it(m)?(e.exit("definition"),r.parser.defined.push(o),t(m)):n(m)}}function Ect(e,t,n){return r;function r(a){return In(a)?k0(e,o)(a):n(a)}function o(a){return oce(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function i(a){return Bt(a)?qt(e,s,"whitespace")(a):s(a)}function s(a){return a===null||it(a)?t(a):n(a)}}const Tct={name:"hardBreakEscape",tokenize:_ct};function _ct(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),o}function o(i){return it(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const Act={name:"headingAtx",resolve:Mct,tokenize:Nct};function Mct(e,t){let n=e.length-2,r=3,o,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(o={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ks(e,r,n-r+1,[["enter",o,t],["enter",i,t],["exit",i,t],["exit",o,t]])),e}function Nct(e,t,n){let r=0;return o;function o(u){return e.enter("atxHeading"),i(u)}function i(u){return e.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&r++<6?(e.consume(u),s):u===null||In(u)?(e.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||it(u)?(e.exit("atxHeading"),t(u)):Bt(u)?qt(e,a,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||In(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),c)}}const Rct=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],xU=["pre","script","style","textarea"],Ict={concrete:!0,name:"htmlFlow",resolveTo:Dct,tokenize:$ct},Oct={partial:!0,tokenize:Lct},Pct={partial:!0,tokenize:jct};function Dct(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function $ct(e,t,n){const r=this;let o,i,s,a,l;return c;function c(D){return u(D)}function u(D){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(D),f}function f(D){return D===33?(e.consume(D),p):D===47?(e.consume(D),i=!0,b):D===63?(e.consume(D),o=3,r.interrupt?t:N):fi(D)?(e.consume(D),s=String.fromCharCode(D),w):n(D)}function p(D){return D===45?(e.consume(D),o=2,m):D===91?(e.consume(D),o=5,a=0,y):fi(D)?(e.consume(D),o=4,r.interrupt?t:N):n(D)}function m(D){return D===45?(e.consume(D),r.interrupt?t:N):n(D)}function y(D){const ce="CDATA[";return D===ce.charCodeAt(a++)?(e.consume(D),a===ce.length?r.interrupt?t:G:y):n(D)}function b(D){return fi(D)?(e.consume(D),s=String.fromCharCode(D),w):n(D)}function w(D){if(D===null||D===47||D===62||In(D)){const ce=D===47,ae=s.toLowerCase();return!ce&&!i&&xU.includes(ae)?(o=1,r.interrupt?t(D):G(D)):Rct.includes(s.toLowerCase())?(o=6,ce?(e.consume(D),S):r.interrupt?t(D):G(D)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(D):i?E(D):T(D))}return D===45||Qo(D)?(e.consume(D),s+=String.fromCharCode(D),w):n(D)}function S(D){return D===62?(e.consume(D),r.interrupt?t:G):n(D)}function E(D){return Bt(D)?(e.consume(D),E):$(D)}function T(D){return D===47?(e.consume(D),$):D===58||D===95||fi(D)?(e.consume(D),A):Bt(D)?(e.consume(D),T):$(D)}function A(D){return D===45||D===46||D===58||D===95||Qo(D)?(e.consume(D),A):M(D)}function M(D){return D===61?(e.consume(D),R):Bt(D)?(e.consume(D),M):T(D)}function R(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),l=D,O):Bt(D)?(e.consume(D),R):I(D)}function O(D){return D===l?(e.consume(D),l=null,L):D===null||it(D)?n(D):(e.consume(D),O)}function I(D){return D===null||D===34||D===39||D===47||D===60||D===61||D===62||D===96||In(D)?M(D):(e.consume(D),I)}function L(D){return D===47||D===62||Bt(D)?T(D):n(D)}function $(D){return D===62?(e.consume(D),B):n(D)}function B(D){return D===null||it(D)?G(D):Bt(D)?(e.consume(D),B):n(D)}function G(D){return D===45&&o===2?(e.consume(D),F):D===60&&o===1?(e.consume(D),q):D===62&&o===4?(e.consume(D),U):D===63&&o===3?(e.consume(D),N):D===93&&o===5?(e.consume(D),z):it(D)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(Oct,te,V)(D)):D===null||it(D)?(e.exit("htmlFlowData"),V(D)):(e.consume(D),G)}function V(D){return e.check(Pct,W,te)(D)}function W(D){return e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),K}function K(D){return D===null||it(D)?V(D):(e.enter("htmlFlowData"),G(D))}function F(D){return D===45?(e.consume(D),N):G(D)}function q(D){return D===47?(e.consume(D),s="",H):G(D)}function H(D){if(D===62){const ce=s.toLowerCase();return xU.includes(ce)?(e.consume(D),U):G(D)}return fi(D)&&s.length<8?(e.consume(D),s+=String.fromCharCode(D),H):G(D)}function z(D){return D===93?(e.consume(D),N):G(D)}function N(D){return D===62?(e.consume(D),U):D===45&&o===2?(e.consume(D),N):G(D)}function U(D){return D===null||it(D)?(e.exit("htmlFlowData"),te(D)):(e.consume(D),U)}function te(D){return e.exit("htmlFlow"),t(D)}}function jct(e,t,n){const r=this;return o;function o(s){return it(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):n(s)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function Lct(e,t,n){return r;function r(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(Pv,t,n)}}const zct={name:"htmlText",tokenize:Bct};function Bct(e,t,n){const r=this;let o,i,s;return a;function a(N){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(N),l}function l(N){return N===33?(e.consume(N),c):N===47?(e.consume(N),M):N===63?(e.consume(N),T):fi(N)?(e.consume(N),I):n(N)}function c(N){return N===45?(e.consume(N),u):N===91?(e.consume(N),i=0,y):fi(N)?(e.consume(N),E):n(N)}function u(N){return N===45?(e.consume(N),m):n(N)}function f(N){return N===null?n(N):N===45?(e.consume(N),p):it(N)?(s=f,q(N)):(e.consume(N),f)}function p(N){return N===45?(e.consume(N),m):f(N)}function m(N){return N===62?F(N):N===45?p(N):f(N)}function y(N){const U="CDATA[";return N===U.charCodeAt(i++)?(e.consume(N),i===U.length?b:y):n(N)}function b(N){return N===null?n(N):N===93?(e.consume(N),w):it(N)?(s=b,q(N)):(e.consume(N),b)}function w(N){return N===93?(e.consume(N),S):b(N)}function S(N){return N===62?F(N):N===93?(e.consume(N),S):b(N)}function E(N){return N===null||N===62?F(N):it(N)?(s=E,q(N)):(e.consume(N),E)}function T(N){return N===null?n(N):N===63?(e.consume(N),A):it(N)?(s=T,q(N)):(e.consume(N),T)}function A(N){return N===62?F(N):T(N)}function M(N){return fi(N)?(e.consume(N),R):n(N)}function R(N){return N===45||Qo(N)?(e.consume(N),R):O(N)}function O(N){return it(N)?(s=O,q(N)):Bt(N)?(e.consume(N),O):F(N)}function I(N){return N===45||Qo(N)?(e.consume(N),I):N===47||N===62||In(N)?L(N):n(N)}function L(N){return N===47?(e.consume(N),F):N===58||N===95||fi(N)?(e.consume(N),$):it(N)?(s=L,q(N)):Bt(N)?(e.consume(N),L):F(N)}function $(N){return N===45||N===46||N===58||N===95||Qo(N)?(e.consume(N),$):B(N)}function B(N){return N===61?(e.consume(N),G):it(N)?(s=B,q(N)):Bt(N)?(e.consume(N),B):L(N)}function G(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),o=N,V):it(N)?(s=G,q(N)):Bt(N)?(e.consume(N),G):(e.consume(N),W)}function V(N){return N===o?(e.consume(N),o=void 0,K):N===null?n(N):it(N)?(s=V,q(N)):(e.consume(N),V)}function W(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||In(N)?L(N):(e.consume(N),W)}function K(N){return N===47||N===62||In(N)?L(N):n(N)}function F(N){return N===62?(e.consume(N),e.exit("htmlTextData"),e.exit("htmlText"),t):n(N)}function q(N){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),H}function H(N){return Bt(N)?qt(e,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):z(N)}function z(N){return e.enter("htmlTextData"),s(N)}}const g5={name:"labelEnd",resolveAll:Uct,resolveTo:Gct,tokenize:qct},Fct={tokenize:Zct},Vct={tokenize:Wct},Hct={tokenize:Kct};function Uct(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const o=r.type==="labelImage"?4:2;r.type="data",t+=o}}return e.length!==n.length&&ks(e,0,e.length,n),e}function Gct(e,t){let n=e.length,r=0,o,i,s,a;for(;n--;)if(o=e[n][1],i){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(i=n,o.type!=="labelLink")){r=2;break}}else o.type==="labelEnd"&&(s=n);const l={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[i][1].start},end:{...e[s][1].end}},u={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[s-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=na(a,e.slice(i+1,i+r+3)),a=na(a,[["enter",u,t]]),a=na(a,QE(t.parser.constructs.insideSpan.null,e.slice(i+r+4,s-3),t)),a=na(a,[["exit",u,t],e[s-2],e[s-1],["exit",c,t]]),a=na(a,e.slice(s+1)),a=na(a,[["exit",l,t]]),ks(e,i,e.length,a),e}function qct(e,t,n){const r=this;let o=r.events.length,i,s;for(;o--;)if((r.events[o][1].type==="labelImage"||r.events[o][1].type==="labelLink")&&!r.events[o][1]._balanced){i=r.events[o][1];break}return a;function a(p){return i?i._inactive?f(p):(s=r.parser.defined.includes(Ka(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),l):n(p)}function l(p){return p===40?e.attempt(Fct,u,s?u:f)(p):p===91?e.attempt(Vct,u,s?c:f)(p):s?u(p):f(p)}function c(p){return e.attempt(Hct,u,f)(p)}function u(p){return t(p)}function f(p){return i._balanced=!0,n(p)}}function Zct(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),o}function o(f){return In(f)?k0(e,i)(f):i(f)}function i(f){return f===41?u(f):nce(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function s(f){return In(f)?k0(e,l)(f):u(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?oce(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return In(f)?k0(e,u)(f):u(f)}function u(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Wct(e,t,n){const r=this;return o;function o(a){return rce.call(r,e,i,s,"reference","referenceMarker","referenceString")(a)}function i(a){return r.parser.defined.includes(Ka(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function Kct(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),o}function o(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const Yct={name:"labelStartImage",resolveAll:g5.resolveAll,tokenize:Jct};function Jct(e,t,n){const r=this;return o;function o(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),i}function i(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Xct={name:"labelStartLink",resolveAll:g5.resolveAll,tokenize:Qct};function Qct(e,t,n){const r=this;return o;function o(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),i}function i(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const DM={name:"lineEnding",tokenize:eut};function eut(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),qt(e,t,"linePrefix")}}const Rw={name:"thematicBreak",tokenize:tut};function tut(e,t,n){let r=0,o;return i;function i(c){return e.enter("thematicBreak"),s(c)}function s(c){return o=c,a(c)}function a(c){return c===o?(e.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||it(c))?(e.exit("thematicBreak"),t(c)):n(c)}function l(c){return c===o?(e.consume(c),r++,l):(e.exit("thematicBreakSequence"),Bt(c)?qt(e,a,"whitespace")(c):a(c))}}const Ii={continuation:{tokenize:iut},exit:aut,name:"list",tokenize:out},nut={partial:!0,tokenize:lut},rut={partial:!0,tokenize:sut};function out(e,t,n){const r=this,o=r.events[r.events.length-1];let i=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,s=0;return a;function a(m){const y=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:fO(m)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(Rw,n,c)(m):c(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(m)}return n(m)}function l(m){return fO(m)&&++s<10?(e.consume(m),l):(!r.interrupt||s<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),c(m)):n(m)}function c(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Pv,r.interrupt?n:u,e.attempt(nut,p,f))}function u(m){return r.containerState.initialBlankLine=!0,i++,p(m)}function f(m){return Bt(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function iut(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Pv,o,i);function o(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,qt(e,t,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!Bt(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(rut,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,qt(e,e.attempt(Ii,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function sut(e,t,n){const r=this;return qt(e,o,"listItemIndent",r.containerState.size+1);function o(i){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(i):n(i)}}function aut(e){e.exit(this.containerState.type)}function lut(e,t,n){const r=this;return qt(e,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(i){const s=r.events[r.events.length-1];return!Bt(i)&&s&&s[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const wU={name:"setextUnderline",resolveTo:cut,tokenize:uut};function cut(e,t){let n=e.length,r,o,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const s={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",i?(e.splice(o,0,["enter",s,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=s,e.push(["exit",s,t]),e}function uut(e,t,n){const r=this;let o;return i;function i(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),o=c,s(c)):n(c)}function s(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===o?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),Bt(c)?qt(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||it(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const dut={tokenize:fut};function fut(e){const t=this,n=e.attempt(Pv,r,e.attempt(this.parser.constructs.flowInitial,o,qt(e,e.attempt(this.parser.constructs.flow,o,e.attempt(yct,o)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const hut={resolveAll:sce()},put=ice("string"),mut=ice("text");function ice(e){return{resolveAll:sce(e==="text"?gut:void 0),tokenize:t};function t(n){const r=this,o=this.parser.constructs[e],i=n.attempt(o,s,a);return s;function s(u){return c(u)?i(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),i(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=o[u];let p=-1;if(f)for(;++p<f.length;){const m=f[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function sce(e){return t;function t(n,r){let o=-1,i;for(;++o<=n.length;)i===void 0?n[o]&&n[o][1].type==="data"&&(i=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==i+2&&(n[i][1].end=n[o-1][1].end,n.splice(i+2,o-i-2),o=i+2),i=void 0);return e?e(n,r):n}}function gut(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],o=t.sliceStream(r);let i=o.length,s=-1,a=0,l;for(;i--;){const c=o[i];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(c===-2)l=!0,a++;else if(c!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const c={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?s:r.start._bufferIndex+s,_index:r.start._index+i,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const yut={42:Ii,43:Ii,45:Ii,48:Ii,49:Ii,50:Ii,51:Ii,52:Ii,53:Ii,54:Ii,55:Ii,56:Ii,57:Ii,62:Xle},but={91:Sct},vut={[-2]:PM,[-1]:PM,32:PM},xut={35:Act,42:Rw,45:[wU,Rw],60:Ict,61:wU,95:Rw,96:vU,126:vU},wut={38:ece,92:Qle},Sut={[-5]:DM,[-4]:DM,[-3]:DM,33:Yct,38:ece,42:hO,60:[Xlt,zct],91:Xct,92:[Tct,Qle],93:g5,95:hO,96:dct},kut={null:[hO,hut]},Cut={null:[42,95]},Eut={null:[]},Tut=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Cut,contentInitial:but,disable:Eut,document:yut,flow:xut,flowInitial:vut,insideSpan:kut,string:wut,text:Sut},Symbol.toStringTag,{value:"Module"}));function _ut(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},i=[];let s=[],a=[];const l={attempt:O(M),check:O(R),consume:E,enter:T,exit:A,interrupt:O(R,{interrupt:!0})},c={code:null,containerState:{},defineSkip:b,events:[],now:y,parser:e,previous:null,sliceSerialize:p,sliceStream:m,write:f};let u=t.tokenize.call(c,l);return t.resolveAll&&i.push(t),c;function f(B){return s=na(s,B),w(),s[s.length-1]!==null?[]:(I(t,0),c.events=QE(i,c.events,c),c.events)}function p(B,G){return Mut(m(B),G)}function m(B){return Aut(s,B)}function y(){const{_bufferIndex:B,_index:G,line:V,column:W,offset:K}=r;return{_bufferIndex:B,_index:G,line:V,column:W,offset:K}}function b(B){o[B.line]=B.column,$()}function w(){let B;for(;r._index<s.length;){const G=s[r._index];if(typeof G=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<G.length;)S(G.charCodeAt(r._bufferIndex));else S(G)}}function S(B){u=u(B)}function E(B){it(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,$()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=B}function T(B,G){const V=G||{};return V.type=B,V.start=y(),c.events.push(["enter",V,c]),a.push(V),V}function A(B){const G=a.pop();return G.end=y(),c.events.push(["exit",G,c]),G}function M(B,G){I(B,G.from)}function R(B,G){G.restore()}function O(B,G){return V;function V(W,K,F){let q,H,z,N;return Array.isArray(W)?te(W):"tokenize"in W?te([W]):U(W);function U(pe){return ie;function ie(ye){const Re=ye!==null&&pe[ye],$e=ye!==null&&pe.null,Be=[...Array.isArray(Re)?Re:Re?[Re]:[],...Array.isArray($e)?$e:$e?[$e]:[]];return te(Be)(ye)}}function te(pe){return q=pe,H=0,pe.length===0?F:D(pe[H])}function D(pe){return ie;function ie(ye){return N=L(),z=pe,pe.partial||(c.currentConstruct=pe),pe.name&&c.parser.constructs.disable.null.includes(pe.name)?ae():pe.tokenize.call(G?Object.assign(Object.create(c),G):c,l,ce,ae)(ye)}}function ce(pe){return B(z,N),K}function ae(pe){return N.restore(),++H<q.length?D(q[H]):F}}}function I(B,G){B.resolveAll&&!i.includes(B)&&i.push(B),B.resolve&&ks(c.events,G,c.events.length-G,B.resolve(c.events.slice(G),c)),B.resolveTo&&(c.events=B.resolveTo(c.events,c))}function L(){const B=y(),G=c.previous,V=c.currentConstruct,W=c.events.length,K=Array.from(a);return{from:W,restore:F};function F(){r=B,c.previous=G,c.currentConstruct=V,c.events.length=W,a=K,$()}}function $(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function Aut(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,i=t.end._bufferIndex;let s;if(n===o)s=[e[n].slice(r,i)];else{if(s=e.slice(n,o),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}i>0&&s.push(e[o].slice(0,i))}return s}function Mut(e,t){let n=-1;const r=[];let o;for(;++n<e.length;){const i=e[n];let s;if(typeof i=="string")s=i;else switch(i){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&o)continue;s=" ";break}default:s=String.fromCharCode(i)}o=i===-2,r.push(s)}return r.join("")}function Nut(e){const r={constructs:Yle([Tut,...(e||{}).extensions||[]]),content:o(Glt),defined:[],document:o(Zlt),flow:o(dut),lazy:{},string:o(put),text:o(mut)};return r;function o(i){return s;function s(a){return _ut(r,i,a)}}}function Rut(e){for(;!tce(e););return e}const SU=/[\0\t\n\r]/g;function Iut(){let e=1,t="",n=!0,r;return o;function o(i,s,a){const l=[];let c,u,f,p,m;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(s||void 0).decode(i)),f=0,t="",n&&(i.charCodeAt(0)===65279&&f++,n=void 0);f<i.length;){if(SU.lastIndex=f,c=SU.exec(i),p=c&&c.index!==void 0?c.index:i.length,m=i.charCodeAt(p),!c){t=i.slice(f);break}if(m===10&&f===p&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<p&&(l.push(i.slice(f,p)),e+=p-f),m){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}f=p+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Out=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Put(e){return e.replace(Out,Dut)}function Dut(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),i=o===120||o===88;return Jle(n.slice(i?2:1),i?16:10)}return m5(n)||e}const ace={}.hasOwnProperty;function $ut(e,t,n){return typeof t!="string"&&(n=t,t=void 0),jut(n)(Rut(Nut(n).document().write(Iut()(e,t,!0))))}function jut(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Ve),autolinkProtocol:L,autolinkEmail:L,atxHeading:i(me),blockQuote:i($e),characterEscape:L,characterReference:L,codeFenced:i(Be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:i(Be,s),codeText:i(je,s),codeTextData:L,data:L,codeFlowValue:L,definition:i(Le),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:i(Pe),hardBreakEscape:i(_e),hardBreakTrailing:i(_e),htmlFlow:i(xe,s),htmlFlowData:L,htmlText:i(xe,s),htmlTextData:L,image:i(Ie),label:s,link:i(Ve),listItem:i(kn),listItemValue:p,listOrdered:i(nt,f),listUnordered:i(nt),paragraph:i(Dr),reference:D,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:i(me),strong:i(or),thematicBreak:i(Ft)},exit:{atxHeading:l(),atxHeadingSequence:M,autolink:l(),autolinkEmail:Re,autolinkProtocol:ye,blockQuote:l(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:pe,characterReference:ie,codeFenced:l(w),codeFencedFence:b,codeFencedFenceInfo:m,codeFencedFenceMeta:y,codeFlowValue:$,codeIndented:l(S),codeText:l(K),codeTextData:$,data:$,definition:l(),definitionDestinationString:A,definitionLabelString:E,definitionTitleString:T,emphasis:l(),hardBreakEscape:l(G),hardBreakTrailing:l(G),htmlFlow:l(V),htmlFlowData:$,htmlText:l(W),htmlTextData:$,image:l(q),label:z,labelText:H,lineEnding:B,link:l(F),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ce,resourceDestinationString:N,resourceTitleString:U,resource:te,setextHeading:l(I),setextHeadingLineSequence:O,setextHeadingText:R,strong:l(),thematicBreak:l()}};lce(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Y){let he={type:"root",children:[]};const De={stack:[he],tokenStack:[],config:t,enter:a,exit:c,buffer:s,resume:u,data:n},Oe=[];let et=-1;for(;++et<Y.length;)if(Y[et][1].type==="listOrdered"||Y[et][1].type==="listUnordered")if(Y[et][0]==="enter")Oe.push(et);else{const rn=Oe.pop();et=o(Y,rn,et)}for(et=-1;++et<Y.length;){const rn=t[Y[et][0]];ace.call(rn,Y[et][1].type)&&rn[Y[et][1].type].call(Object.assign({sliceSerialize:Y[et][2].sliceSerialize},De),Y[et][1])}if(De.tokenStack.length>0){const rn=De.tokenStack[De.tokenStack.length-1];(rn[1]||kU).call(De,void 0,rn[0])}for(he.position={start:Fu(Y.length>0?Y[0][1].start:{line:1,column:1,offset:0}),end:Fu(Y.length>0?Y[Y.length-2][1].end:{line:1,column:1,offset:0})},et=-1;++et<t.transforms.length;)he=t.transforms[et](he)||he;return he}function o(Y,he,De){let Oe=he-1,et=-1,rn=!1,Dn,mn,Tr,Cn;for(;++Oe<=De;){const gn=Y[Oe];switch(gn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{gn[0]==="enter"?et++:et--,Cn=void 0;break}case"lineEndingBlank":{gn[0]==="enter"&&(Dn&&!Cn&&!et&&!Tr&&(Tr=Oe),Cn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Cn=void 0}if(!et&&gn[0]==="enter"&&gn[1].type==="listItemPrefix"||et===-1&&gn[0]==="exit"&&(gn[1].type==="listUnordered"||gn[1].type==="listOrdered")){if(Dn){let Yn=Oe;for(mn=void 0;Yn--;){const Jn=Y[Yn];if(Jn[1].type==="lineEnding"||Jn[1].type==="lineEndingBlank"){if(Jn[0]==="exit")continue;mn&&(Y[mn][1].type="lineEndingBlank",rn=!0),Jn[1].type="lineEnding",mn=Yn}else if(!(Jn[1].type==="linePrefix"||Jn[1].type==="blockQuotePrefix"||Jn[1].type==="blockQuotePrefixWhitespace"||Jn[1].type==="blockQuoteMarker"||Jn[1].type==="listItemIndent"))break}Tr&&(!mn||Tr<mn)&&(Dn._spread=!0),Dn.end=Object.assign({},mn?Y[mn][1].start:gn[1].end),Y.splice(mn||Oe,0,["exit",Dn,gn[2]]),Oe++,De++}if(gn[1].type==="listItemPrefix"){const Yn={type:"listItem",_spread:!1,start:Object.assign({},gn[1].start),end:void 0};Dn=Yn,Y.splice(Oe,0,["enter",Yn,gn[2]]),Oe++,De++,Tr=void 0,Cn=!0}}}return Y[he][1]._spread=rn,De}function i(Y,he){return De;function De(Oe){a.call(this,Y(Oe),Oe),he&&he.call(this,Oe)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(Y,he,De){this.stack[this.stack.length-1].children.push(Y),this.stack.push(Y),this.tokenStack.push([he,De||void 0]),Y.position={start:Fu(he.start),end:void 0}}function l(Y){return he;function he(De){Y&&Y.call(this,De),c.call(this,De)}}function c(Y,he){const De=this.stack.pop(),Oe=this.tokenStack.pop();if(Oe)Oe[0].type!==Y.type&&(he?he.call(this,Y,Oe[0]):(Oe[1]||kU).call(this,Y,Oe[0]));else throw new Error("Cannot close `"+Y.type+"` ("+S0({start:Y.start,end:Y.end})+"): its not open");De.position.end=Fu(Y.end)}function u(){return p5(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function p(Y){if(this.data.expectingFirstListItemValue){const he=this.stack[this.stack.length-2];he.start=Number.parseInt(this.sliceSerialize(Y),10),this.data.expectingFirstListItemValue=void 0}}function m(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.lang=Y}function y(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.meta=Y}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.value=Y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.value=Y.replace(/(\r?\n|\r)$/g,"")}function E(Y){const he=this.resume(),De=this.stack[this.stack.length-1];De.label=he,De.identifier=Ka(this.sliceSerialize(Y)).toLowerCase()}function T(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.title=Y}function A(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.url=Y}function M(Y){const he=this.stack[this.stack.length-1];if(!he.depth){const De=this.sliceSerialize(Y).length;he.depth=De}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function O(Y){const he=this.stack[this.stack.length-1];he.depth=this.sliceSerialize(Y).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function L(Y){const De=this.stack[this.stack.length-1].children;let Oe=De[De.length-1];(!Oe||Oe.type!=="text")&&(Oe=hr(),Oe.position={start:Fu(Y.start),end:void 0},De.push(Oe)),this.stack.push(Oe)}function $(Y){const he=this.stack.pop();he.value+=this.sliceSerialize(Y),he.position.end=Fu(Y.end)}function B(Y){const he=this.stack[this.stack.length-1];if(this.data.atHardBreak){const De=he.children[he.children.length-1];De.position.end=Fu(Y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(he.type)&&(L.call(this,Y),$.call(this,Y))}function G(){this.data.atHardBreak=!0}function V(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.value=Y}function W(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.value=Y}function K(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.value=Y}function F(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=he,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function q(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=he,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function H(Y){const he=this.sliceSerialize(Y),De=this.stack[this.stack.length-2];De.label=Put(he),De.identifier=Ka(he).toLowerCase()}function z(){const Y=this.stack[this.stack.length-1],he=this.resume(),De=this.stack[this.stack.length-1];if(this.data.inReference=!0,De.type==="link"){const Oe=Y.children;De.children=Oe}else De.alt=he}function N(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.url=Y}function U(){const Y=this.resume(),he=this.stack[this.stack.length-1];he.title=Y}function te(){this.data.inReference=void 0}function D(){this.data.referenceType="collapsed"}function ce(Y){const he=this.resume(),De=this.stack[this.stack.length-1];De.label=he,De.identifier=Ka(this.sliceSerialize(Y)).toLowerCase(),this.data.referenceType="full"}function ae(Y){this.data.characterReferenceType=Y.type}function pe(Y){const he=this.sliceSerialize(Y),De=this.data.characterReferenceType;let Oe;De?(Oe=Jle(he,De==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Oe=m5(he);const et=this.stack[this.stack.length-1];et.value+=Oe}function ie(Y){const he=this.stack.pop();he.position.end=Fu(Y.end)}function ye(Y){$.call(this,Y);const he=this.stack[this.stack.length-1];he.url=this.sliceSerialize(Y)}function Re(Y){$.call(this,Y);const he=this.stack[this.stack.length-1];he.url="mailto:"+this.sliceSerialize(Y)}function $e(){return{type:"blockquote",children:[]}}function Be(){return{type:"code",lang:null,meta:null,value:""}}function je(){return{type:"inlineCode",value:""}}function Le(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Pe(){return{type:"emphasis",children:[]}}function me(){return{type:"heading",depth:0,children:[]}}function _e(){return{type:"break"}}function xe(){return{type:"html",value:""}}function Ie(){return{type:"image",title:null,url:"",alt:null}}function Ve(){return{type:"link",title:null,url:"",children:[]}}function nt(Y){return{type:"list",ordered:Y.type==="listOrdered",start:null,spread:Y._spread,children:[]}}function kn(Y){return{type:"listItem",spread:Y._spread,checked:null,children:[]}}function Dr(){return{type:"paragraph",children:[]}}function or(){return{type:"strong",children:[]}}function hr(){return{type:"text",value:""}}function Ft(){return{type:"thematicBreak"}}}function Fu(e){return{line:e.line,column:e.column,offset:e.offset}}function lce(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?lce(e,r):Lut(e,r)}}function Lut(e,t){let n;for(n in t)if(ace.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function kU(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+S0({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+S0({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+S0({start:t.start,end:t.end})+") is still open")}function cce(e){const t=this;t.parser=n;function n(r){return $ut(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const zut=Object.freeze(Object.defineProperty({__proto__:null,default:cce},Symbol.toStringTag,{value:"Module"}));function But(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Fut(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Vut(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function Hut(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Uut(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Gut(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),o=_g(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=i+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function qut(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Zut(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function uce(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const o=e.all(t),i=o[0];i&&i.type==="text"?i.value="["+i.value:o.unshift({type:"text",value:"["});const s=o[o.length-1];return s&&s.type==="text"?s.value+=r:o.push({type:"text",value:r}),o}function Wut(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uce(e,t);const o={src:_g(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(o.title=r.title);const i={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,i),e.applyData(t,i)}function Kut(e,t){const n={src:_g(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Yut(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Jut(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uce(e,t);const o={href:_g(r.url||"")};r.title!==null&&r.title!==void 0&&(o.title=r.title);const i={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Xut(e,t){const n={href:_g(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Qut(e,t,n){const r=e.all(t),o=n?edt(n):dce(t),i={},s=[];if(typeof t.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(o||a!==0||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!o?s.push(...u.children):s.push(u)}const l=r[r.length-1];l&&(o||l.type!=="element"||l.tagName!=="p")&&s.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:s};return e.patch(t,c),e.applyData(t,c)}function edt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=dce(n[r])}return t}function dce(e){const t=e.spread;return t??e.children.length>1}function tdt(e,t){const n={},r=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<r.length;){const s=r[o];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function ndt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rdt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function odt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function idt(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],s),o.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=u5(t.children[1]),l=Hle(t.children[t.children.length-1]);a&&l&&(s.position={start:a,end:l}),o.push(s)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,i),e.applyData(t,i)}function sdt(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let l=-1;const c=[];for(;++l<a;){const f=t.children[l],p={},m=s?s[l]:void 0;m&&(p.align=m);let y={type:"element",tagName:i,properties:p,children:[]};f&&(y.children=e.all(f),e.patch(f,y),y=e.applyData(f,y)),c.push(y)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,u),e.applyData(t,u)}function adt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const CU=9,EU=32;function ldt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const i=[];for(;r;)i.push(TU(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return i.push(TU(t.slice(o),o>0,!1)),i.join("")}function TU(e,t,n){let r=0,o=e.length;if(t){let i=e.codePointAt(r);for(;i===CU||i===EU;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(o-1);for(;i===CU||i===EU;)o--,i=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}function cdt(e,t){const n={type:"text",value:ldt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function udt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const fce={blockquote:But,break:Fut,code:Vut,delete:Hut,emphasis:Uut,footnoteReference:Gut,heading:qut,html:Zut,imageReference:Wut,image:Kut,inlineCode:Yut,linkReference:Jut,link:Xut,listItem:Qut,list:tdt,paragraph:ndt,root:rdt,strong:odt,table:idt,tableCell:adt,tableRow:sdt,text:cdt,thematicBreak:udt,toml:Yx,yaml:Yx,definition:Yx,footnoteDefinition:Yx};function Yx(){}const hce=-1,e2=0,C0=1,tC=2,y5=3,b5=4,v5=5,x5=6,pce=7,mce=8,_U=typeof self=="object"?self:globalThis,ddt=(e,t)=>{const n=(o,i)=>(e.set(i,o),o),r=o=>{if(e.has(o))return e.get(o);const[i,s]=t[o];switch(i){case e2:case hce:return n(s,o);case C0:{const a=n([],o);for(const l of s)a.push(r(l));return a}case tC:{const a=n({},o);for(const[l,c]of s)a[r(l)]=r(c);return a}case y5:return n(new Date(s),o);case b5:{const{source:a,flags:l}=s;return n(new RegExp(a,l),o)}case v5:{const a=n(new Map,o);for(const[l,c]of s)a.set(r(l),r(c));return a}case x5:{const a=n(new Set,o);for(const l of s)a.add(r(l));return a}case pce:{const{name:a,message:l}=s;return n(new _U[a](l),o)}case mce:return n(BigInt(s),o);case"BigInt":return n(Object(BigInt(s)),o);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return n(new DataView(a),s)}}return n(new _U[i](s),o)};return r},AU=e=>ddt(new Map,e)(0),Np="",{toString:fdt}={},{keys:hdt}=Object,Iy=e=>{const t=typeof e;if(t!=="object"||!e)return[e2,t];const n=fdt.call(e).slice(8,-1);switch(n){case"Array":return[C0,Np];case"Object":return[tC,Np];case"Date":return[y5,Np];case"RegExp":return[b5,Np];case"Map":return[v5,Np];case"Set":return[x5,Np];case"DataView":return[C0,n]}return n.includes("Array")?[C0,n]:n.includes("Error")?[pce,n]:[tC,n]},Jx=([e,t])=>e===e2&&(t==="function"||t==="symbol"),pdt=(e,t,n,r)=>{const o=(s,a)=>{const l=r.push(s)-1;return n.set(a,l),l},i=s=>{if(n.has(s))return n.get(s);let[a,l]=Iy(s);switch(a){case e2:{let u=s;switch(l){case"bigint":a=mce,u=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return o([hce],s)}return o([a,u],s)}case C0:{if(l){let p=s;return l==="DataView"?p=new Uint8Array(s.buffer):l==="ArrayBuffer"&&(p=new Uint8Array(s)),o([l,[...p]],s)}const u=[],f=o([a,u],s);for(const p of s)u.push(i(p));return f}case tC:{if(l)switch(l){case"BigInt":return o([l,s.toString()],s);case"Boolean":case"Number":case"String":return o([l,s.valueOf()],s)}if(t&&"toJSON"in s)return i(s.toJSON());const u=[],f=o([a,u],s);for(const p of hdt(s))(e||!Jx(Iy(s[p])))&&u.push([i(p),i(s[p])]);return f}case y5:return o([a,s.toISOString()],s);case b5:{const{source:u,flags:f}=s;return o([a,{source:u,flags:f}],s)}case v5:{const u=[],f=o([a,u],s);for(const[p,m]of s)(e||!(Jx(Iy(p))||Jx(Iy(m))))&&u.push([i(p),i(m)]);return f}case x5:{const u=[],f=o([a,u],s);for(const p of s)(e||!Jx(Iy(p)))&&u.push(i(p));return f}}const{message:c}=s;return o([a,{name:l,message:c}],s)};return i},MU=(e,{json:t,lossy:n}={})=>{const r=[];return pdt(!(t||n),!!t,new Map,r)(e),r},nC=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?AU(MU(e,t)):structuredClone(e):(e,t)=>AU(MU(e,t));function gce(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function yce(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function mdt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||gce,r=e.options.footnoteBackLabel||yce,o=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;const u=e.all(c),f=String(c.identifier).toUpperCase(),p=_g(f.toLowerCase());let m=0;const y=[],b=e.footnoteCounts.get(f);for(;b!==void 0&&++m<=b;){y.length>0&&y.push({type:"text",value:" "});let E=typeof n=="string"?n:n(l,m);typeof E=="string"&&(E={type:"text",value:E}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,m),className:["data-footnote-backref"]},children:Array.isArray(E)?E:[E]})}const w=u[u.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const E=w.children[w.children.length-1];E&&E.type==="text"?E.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...y)}else u.push(...y);const S={type:"element",tagName:"li",properties:{id:t+"fn-"+p},children:e.wrap(u,!0)};e.patch(c,S),a.push(S)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...nC(s),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const t2=(function(e){if(e==null)return vdt;if(typeof e=="function")return n2(e);if(typeof e=="object")return Array.isArray(e)?gdt(e):ydt(e);if(typeof e=="string")return bdt(e);throw new Error("Expected function, string, or object as test")});function gdt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=t2(e[n]);return n2(r);function r(...o){let i=-1;for(;++i<t.length;)if(t[i].apply(this,o))return!0;return!1}}function ydt(e){const t=e;return n2(n);function n(r){const o=r;let i;for(i in e)if(o[i]!==t[i])return!1;return!0}}function bdt(e){return n2(t);function t(n){return n&&n.type===e}}function n2(e){return t;function t(n,r,o){return!!(xdt(n)&&e.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function vdt(){return!0}function xdt(e){return e!==null&&typeof e=="object"&&"type"in e}const bce=[],wdt=!0,pO=!1,Sdt="skip";function vce(e,t,n,r){let o;typeof t=="function"&&typeof n!="function"?(r=n,n=t):o=t;const i=t2(o),s=r?-1:1;a(e,void 0,[])();function a(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const m=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=bce,y,b,w;if((!t||i(l,c,u[u.length-1]||void 0))&&(m=kdt(n(l,u)),m[0]===pO))return m;if("children"in l&&l.children){const S=l;if(S.children&&m[0]!==Sdt)for(b=(r?S.children.length:-1)+s,w=u.concat(S);b>-1&&b<S.children.length;){const E=S.children[b];if(y=a(E,b,w)(),y[0]===pO)return y;b=typeof y[1]=="number"?y[1]:b+s}}return m}}}function kdt(e){return Array.isArray(e)?e:typeof e=="number"?[wdt,e]:e==null?bce:[e]}function w5(e,t,n,r){let o,i,s;typeof t=="function"&&typeof n!="function"?(i=void 0,s=t,o=n):(i=t,s=n,o=r),vce(e,i,a,o);function a(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return s(l,f,u)}}const mO={}.hasOwnProperty,Cdt={};function Edt(e,t){const n=t||Cdt,r=new Map,o=new Map,i=new Map,s={...fce,...n.handlers},a={all:c,applyData:_dt,definitionById:r,footnoteById:o,footnoteCounts:i,footnoteOrder:[],handlers:s,one:l,options:n,patch:Tdt,wrap:Mdt};return w5(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:o,p=String(u.identifier).toUpperCase();f.has(p)||f.set(p,u)}}),a;function l(u,f){const p=u.type,m=a.handlers[p];if(mO.call(a.handlers,p)&&m)return m(a,u,f);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in u){const{children:b,...w}=u,S=nC(w);return S.children=a.all(u),S}return nC(u)}return(a.options.unknownHandler||Adt)(a,u,f)}function c(u){const f=[];if("children"in u){const p=u.children;let m=-1;for(;++m<p.length;){const y=a.one(p[m],u);if(y){if(m&&p[m-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=NU(y.value)),!Array.isArray(y)&&y.type==="element")){const b=y.children[0];b&&b.type==="text"&&(b.value=NU(b.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function Tdt(e,t){e.position&&(t.position=ylt(e))}function _dt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,o=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&i&&Object.assign(n.properties,nC(i)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function Adt(e,t){const n=t.data||{},r="value"in t&&!(mO.call(n,"hProperties")||mO.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Mdt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function NU(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function RU(e,t){const n=Edt(e,t),r=n.one(e,void 0),o=mdt(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&i.children.push({type:"text",value:`
`},o),i}function xce(e,t){return e&&"run"in e?async function(n,r){const o=RU(n,{file:r,...t});await e.run(o,r)}:function(n,r){return RU(n,{file:r,...e||t})}}const Ndt=Object.freeze(Object.defineProperty({__proto__:null,default:xce,defaultFootnoteBackContent:gce,defaultFootnoteBackLabel:yce,defaultHandlers:fce},Symbol.toStringTag,{value:"Module"}));function IU(e){if(e)throw e}var $M,OU;function Rdt(){if(OU)return $M;OU=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},i=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var u=e.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var p;for(p in c);return typeof p>"u"||e.call(c,p)},s=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(e.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return $M=function l(){var c,u,f,p,m,y,b=arguments[0],w=1,S=arguments.length,E=!1;for(typeof b=="boolean"&&(E=b,b=arguments[1]||{},w=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});w<S;++w)if(c=arguments[w],c!=null)for(u in c)f=a(b,u),p=a(c,u),b!==p&&(E&&p&&(i(p)||(m=o(p)))?(m?(m=!1,y=f&&o(f)?f:[]):y=f&&i(f)?f:{},s(b,{name:u,newValue:l(E,y,p)})):typeof p<"u"&&s(b,{name:u,newValue:p}));return b},$M}var Idt=Rdt();const jM=Md(Idt);function gO(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Odt(){const e=[],t={run:n,use:r};return t;function n(...o){let i=-1;const s=o.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...o);function a(l,...c){const u=e[++i];let f=-1;if(l){s(l);return}for(;++f<o.length;)(c[f]===null||c[f]===void 0)&&(c[f]=o[f]);o=c,u?Pdt(u,a)(...c):s(null,...c)}}function r(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function Pdt(e,t){let n;return r;function r(...s){const a=e.length>s.length;let l;a&&s.push(o);try{l=e.apply(this,s)}catch(c){const u=c;if(a&&n)throw u;return o(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(i,o):l instanceof Error?o(l):i(l))}function o(s,...a){n||(n=!0,t(s,...a))}function i(s){o(null,s)}}const Rl={basename:Ddt,dirname:$dt,extname:jdt,join:Ldt,sep:"/"};function Ddt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Dv(e);let n=0,r=-1,o=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(i){n=o+1;break}}else r<0&&(i=!0,r=o+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,a=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(i){n=o+1;break}}else s<0&&(i=!0,s=o+1),a>-1&&(e.codePointAt(o)===t.codePointAt(a--)?a<0&&(r=o):(a=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function $dt(e){if(Dv(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function jdt(e){Dv(e);let t=e.length,n=-1,r=0,o=-1,i=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?o<0?o=t:i!==1&&(i=1):o>-1&&(i=-1)}return o<0||n<0||i===0||i===1&&o===n-1&&o===r+1?"":e.slice(o,n)}function Ldt(...e){let t=-1,n;for(;++t<e.length;)Dv(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":zdt(n)}function zdt(e){Dv(e);const t=e.codePointAt(0)===47;let n=Bdt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Bdt(e,t){let n="",r=0,o=-1,i=0,s=-1,a,l;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(o===s-1||i===1))if(o!==s-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),o=s,i=0;continue}}else if(n.length>0){n="",r=0,o=s,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),r=s-o-1;o=s,i=0}else a===46&&i>-1?i++:i=-1}return n}function Dv(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Fdt={cwd:Vdt};function Vdt(){return"/"}function yO(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Hdt(e){if(typeof e=="string")e=new URL(e);else if(!yO(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Udt(e)}function Udt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const LM=["history","path","basename","stem","extname","dirname"];class wce{constructor(t){let n;t?yO(t)?n={path:t}:typeof t=="string"||Gdt(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Fdt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<LM.length;){const i=LM[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let o;for(o in n)LM.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?Rl.basename(this.path):void 0}set basename(t){BM(t,"basename"),zM(t,"basename"),this.path=Rl.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Rl.dirname(this.path):void 0}set dirname(t){PU(this.basename,"dirname"),this.path=Rl.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Rl.extname(this.path):void 0}set extname(t){if(zM(t,"extname"),PU(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Rl.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){yO(t)&&(t=Hdt(t)),BM(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Rl.basename(this.path,this.extname):void 0}set stem(t){BM(t,"stem"),zM(t,"stem"),this.path=Rl.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const o=this.message(t,n,r);throw o.fatal=!0,o}info(t,n,r){const o=this.message(t,n,r);return o.fatal=void 0,o}message(t,n,r){const o=new ii(t,n,r);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function zM(e,t){if(e&&e.includes(Rl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Rl.sep+"`")}function BM(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function PU(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Gdt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const qdt=(function(e){const r=this.constructor.prototype,o=r[e],i=function(){return o.apply(i,arguments)};return Object.setPrototypeOf(i,r),i}),Zdt={}.hasOwnProperty;class S5 extends qdt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Odt()}copy(){const t=new S5;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(jM(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(HM("data",this.frozen),this.namespace[t]=n,this):Zdt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(HM("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const o=n.call(t,...r);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Xx(t),r=this.parser||this.Parser;return FM("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),FM("process",this.parser||this.Parser),VM("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(i,s){const a=Xx(t),l=r.parse(a);r.run(l,a,function(u,f,p){if(u||!f||!p)return c(u);const m=f,y=r.stringify(m,p);Kdt(y)?p.value=y:p.result=y,c(u,p)});function c(u,f){u||!f?s(u):i?i(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),FM("processSync",this.parser||this.Parser),VM("processSync",this.compiler||this.Compiler),this.process(t,o),$U("processSync","process",n),r;function o(i,s){n=!0,IU(i),r=s}}run(t,n,r){DU(t),this.freeze();const o=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(s,a){const l=Xx(n);o.run(t,l,c);function c(u,f,p){const m=f||t;u?a(u):s?s(m):r(void 0,m,p)}}}runSync(t,n){let r=!1,o;return this.run(t,n,i),$U("runSync","run",r),o;function i(s,a){IU(s),o=a,r=!0}}stringify(t,n){this.freeze();const r=Xx(n),o=this.compiler||this.Compiler;return VM("stringify",o),DU(t),o(t,r)}use(t,...n){const r=this.attachers,o=this.namespace;if(HM("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(o.settings=jM(!0,o.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];i(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,p=-1;for(;++f<r.length;)if(r[f][0]===c){p=f;break}if(p===-1)r.push([c,...u]);else if(u.length>0){let[m,...y]=u;const b=r[p][1];gO(b)&&gO(m)&&(m=jM(!0,b,m)),r[p]=[c,m,...y]}}}}const Sce=new S5().freeze();function FM(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function VM(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function HM(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function DU(e){if(!gO(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function $U(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Xx(e){return Wdt(e)?e:new wce(e)}function Wdt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Kdt(e){return typeof e=="string"||Ydt(e)}function Ydt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Jdt=Object.freeze(Object.defineProperty({__proto__:null,unified:Sce},Symbol.toStringTag,{value:"Module"})),Xdt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",jU=[],LU={allowDangerousHtml:!0},Qdt=/^(https?|ircs?|mailto|xmpp)$/i,eft=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function zU(e){const t=tft(e),n=nft(e);return rft(t.runSync(t.parse(n),n),e)}function tft(e){const t=e.rehypePlugins||jU,n=e.remarkPlugins||jU,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...LU}:LU;return Sce().use(cce).use(n).use(xce,r).use(t)}function nft(e){const t=e.children||"",n=new wce;return typeof t=="string"&&(n.value=t),n}function rft(e,t){const n=t.allowedElements,r=t.allowElement,o=t.components,i=t.disallowedElements,s=t.skipHtml,a=t.unwrapDisallowed,l=t.urlTransform||oft;for(const u of eft)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+Xdt+u.id,void 0);return w5(e,c),Slt(e,{Fragment:v.Fragment,components:o,ignoreInvalidStyle:!0,jsx:v.jsx,jsxs:v.jsxs,passKeys:!0,passNode:!0});function c(u,f,p){if(u.type==="raw"&&p&&typeof f=="number")return s?p.children.splice(f,1):p.children[f]={type:"text",value:u.value},f;if(u.type==="element"){let m;for(m in OM)if(Object.hasOwn(OM,m)&&Object.hasOwn(u.properties,m)){const y=u.properties[m],b=OM[m];(b===null||b.includes(u.tagName))&&(u.properties[m]=l(String(y||""),m,u))}}if(u.type==="element"){let m=n?!n.includes(u.tagName):i?i.includes(u.tagName):!1;if(!m&&r&&typeof f=="number"&&(m=!r(u,f,p)),m&&p&&typeof f=="number")return a&&u.children?p.children.splice(f,1,...u.children):p.children.splice(f,1),f}}}function oft(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||n!==-1&&t>n||r!==-1&&t>r||Qdt.test(e.slice(0,t))?e:""}function ift(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function sft(e,t,n){const o=t2((n||{}).ignore||[]),i=aft(t);let s=-1;for(;++s<i.length;)vce(e,"text",a);function a(c,u){let f=-1,p;for(;++f<u.length;){const m=u[f],y=p?p.children:void 0;if(o(m,y?y.indexOf(m):void 0,p))return;p=m}if(p)return l(c,u)}function l(c,u){const f=u[u.length-1],p=i[s][0],m=i[s][1];let y=0;const w=f.children.indexOf(c);let S=!1,E=[];p.lastIndex=0;let T=p.exec(c.value);for(;T;){const A=T.index,M={index:T.index,input:T.input,stack:[...u,c]};let R=m(...T,M);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?p.lastIndex=A+1:(y!==A&&E.push({type:"text",value:c.value.slice(y,A)}),Array.isArray(R)?E.push(...R):R&&E.push(R),y=A+T[0].length,S=!0),!p.global)break;T=p.exec(c.value)}return S?(y<c.value.length&&E.push({type:"text",value:c.value.slice(y)}),f.children.splice(w,1,...E)):E=[c],w+E.length}}function aft(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const o=n[r];t.push([lft(o[0]),cft(o[1])])}return t}function lft(e){return typeof e=="string"?new RegExp(ift(e),"g"):e}function cft(e){return typeof e=="function"?e:function(){return e}}const UM="phrasing",GM=["autolink","link","image","label"];function uft(){return{transforms:[yft],enter:{literalAutolink:fft,literalAutolinkEmail:qM,literalAutolinkHttp:qM,literalAutolinkWww:qM},exit:{literalAutolink:gft,literalAutolinkEmail:mft,literalAutolinkHttp:hft,literalAutolinkWww:pft}}}function dft(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:UM,notInConstruct:GM},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:UM,notInConstruct:GM},{character:":",before:"[ps]",after:"\\/",inConstruct:UM,notInConstruct:GM}]}}function fft(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function qM(e){this.config.enter.autolinkProtocol.call(this,e)}function hft(e){this.config.exit.autolinkProtocol.call(this,e)}function pft(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function mft(e){this.config.exit.autolinkEmail.call(this,e)}function gft(e){this.exit(e)}function yft(e){sft(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,bft],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),vft]],{ignore:["link","linkReference"]})}function bft(e,t,n,r,o){let i="";if(!kce(o)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!xft(n)))return!1;const s=wft(n+r);if(!s[0])return!1;const a={type:"link",title:null,url:i+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[a,{type:"text",value:s[1]}]:a}function vft(e,t,n,r){return!kce(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function xft(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function wft(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const o=QS(e,"(");let i=QS(e,")");for(;r!==-1&&o>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function kce(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||bh(n)||XE(n))&&(!t||n!==47)}Cce.peek=Nft;function Sft(){this.buffer()}function kft(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Cft(){this.buffer()}function Eft(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Tft(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ka(this.sliceSerialize(e)).toLowerCase(),n.label=t}function _ft(e){this.exit(e)}function Aft(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ka(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Mft(e){this.exit(e)}function Nft(){return"["}function Cce(e,t,n,r){const o=n.createTracker(r);let i=o.move("[^");const s=n.enter("footnoteReference"),a=n.enter("reference");return i+=o.move(n.safe(n.associationId(e),{after:"]",before:i})),a(),s(),i+=o.move("]"),i}function Rft(){return{enter:{gfmFootnoteCallString:Sft,gfmFootnoteCall:kft,gfmFootnoteDefinitionLabelString:Cft,gfmFootnoteDefinition:Eft},exit:{gfmFootnoteCallString:Tft,gfmFootnoteCall:_ft,gfmFootnoteDefinitionLabelString:Aft,gfmFootnoteDefinition:Mft}}}function Ift(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Cce},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,o,i,s){const a=i.createTracker(s);let l=a.move("[^");const c=i.enter("footnoteDefinition"),u=i.enter("label");return l+=a.move(i.safe(i.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,a.current()),t?Ece:Oft))),c(),l}}function Oft(e,t,n){return t===0?e:Ece(e,t,n)}function Ece(e,t,n){return(n?"":"    ")+e}const Pft=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Tce.peek=zft;function Dft(){return{canContainEols:["delete"],enter:{strikethrough:jft},exit:{strikethrough:Lft}}}function $ft(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Pft}],handlers:{delete:Tce}}}function jft(e){this.enter({type:"delete",children:[]},e)}function Lft(e){this.exit(e)}function Tce(e,t,n,r){const o=n.createTracker(r),i=n.enter("strikethrough");let s=o.move("~~");return s+=n.containerPhrasing(e,{...o.current(),before:s,after:"~"}),s+=o.move("~~"),i(),s}function zft(){return"~"}function Bft(e){return e.length}function Fft(e,t){const n=t||{},r=(n.align||[]).concat(),o=n.stringLength||Bft,i=[],s=[],a=[],l=[];let c=0,u=-1;for(;++u<e.length;){const b=[],w=[];let S=-1;for(e[u].length>c&&(c=e[u].length);++S<e[u].length;){const E=Vft(e[u][S]);if(n.alignDelimiters!==!1){const T=o(E);w[S]=T,(l[S]===void 0||T>l[S])&&(l[S]=T)}b.push(E)}s[u]=b,a[u]=w}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)i[f]=BU(r[f]);else{const b=BU(r);for(;++f<c;)i[f]=b}f=-1;const p=[],m=[];for(;++f<c;){const b=i[f];let w="",S="";b===99?(w=":",S=":"):b===108?w=":":b===114&&(S=":");let E=n.alignDelimiters===!1?1:Math.max(1,l[f]-w.length-S.length);const T=w+"-".repeat(E)+S;n.alignDelimiters!==!1&&(E=w.length+E+S.length,E>l[f]&&(l[f]=E),m[f]=E),p[f]=T}s.splice(1,0,p),a.splice(1,0,m),u=-1;const y=[];for(;++u<s.length;){const b=s[u],w=a[u];f=-1;const S=[];for(;++f<c;){const E=b[f]||"";let T="",A="";if(n.alignDelimiters!==!1){const M=l[f]-(w[f]||0),R=i[f];R===114?T=" ".repeat(M):R===99?M%2?(T=" ".repeat(M/2+.5),A=" ".repeat(M/2-.5)):(T=" ".repeat(M/2),A=T):A=" ".repeat(M)}n.delimiterStart!==!1&&!f&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&E==="")&&(n.delimiterStart!==!1||f)&&S.push(" "),n.alignDelimiters!==!1&&S.push(T),S.push(E),n.alignDelimiters!==!1&&S.push(A),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&S.push("|")}y.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return y.join(`
`)}function Vft(e){return e==null?"":String(e)}function BU(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Hft(e,t,n,r){const o=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const s=n.indentLines(n.containerFlow(e,i.current()),Uft);return o(),s}function Uft(e,t,n){return">"+(n?"":" ")+e}function Gft(e,t){return FU(e,t.inConstruct,!0)&&!FU(e,t.notInConstruct,!1)}function FU(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function VU(e,t,n,r){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&Gft(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function qft(e,t){const n=String(e);let r=n.indexOf(t),o=r,i=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===o?++i>s&&(s=i):i=1,o=r+t.length,r=n.indexOf(t,o);return s}function Zft(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Wft(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Kft(e,t,n,r){const o=Wft(n),i=e.value||"",s=o==="`"?"GraveAccent":"Tilde";if(Zft(e,n)){const f=n.enter("codeIndented"),p=n.indentLines(i,Yft);return f(),p}const a=n.createTracker(r),l=o.repeat(Math.max(qft(i,o)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(e.lang){const f=n.enter(`codeFencedLang${s}`);u+=a.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${s}`);u+=a.move(" "),u+=a.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...a.current()})),f()}return u+=a.move(`
`),i&&(u+=a.move(i+`
`)),u+=a.move(l),c(),u}function Yft(e,t,n){return(n?"":"    ")+e}function k5(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Jft(e,t,n,r){const o=k5(n),i=o==='"'?"Quote":"Apostrophe",s=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=n.enter(`title${i}`),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),a()),s(),c}function Xft(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Lb(e){return"&#x"+e.toString(16).toUpperCase()+";"}function rC(e,t,n){const r=Um(e),o=Um(t);return r===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}_ce.peek=Qft;function _ce(e,t,n,r){const o=Xft(n),i=n.enter("emphasis"),s=n.createTracker(r),a=s.move(o);let l=s.move(n.containerPhrasing(e,{after:o,before:a,...s.current()}));const c=l.charCodeAt(0),u=rC(r.before.charCodeAt(r.before.length-1),c,o);u.inside&&(l=Lb(c)+l.slice(1));const f=l.charCodeAt(l.length-1),p=rC(r.after.charCodeAt(0),f,o);p.inside&&(l=l.slice(0,-1)+Lb(f));const m=s.move(o);return i(),n.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+m}function Qft(e,t,n){return n.options.emphasis||"*"}function eht(e,t){let n=!1;return w5(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,pO}),!!((!e.depth||e.depth<3)&&p5(e)&&(t.options.setext||n))}function tht(e,t,n,r){const o=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(eht(e,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),p=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return f(),u(),p+`
`+(o===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const s="#".repeat(o),a=n.enter("headingAtx"),l=n.enter("phrasing");i.move(s+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=Lb(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,n.options.closeAtx&&(c+=" "+s),l(),a(),c}Ace.peek=nht;function Ace(e){return e.value||""}function nht(){return"<"}Mce.peek=rht;function Mce(e,t,n,r){const o=k5(n),i=o==='"'?"Quote":"Apostrophe",s=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${i}`),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),a()),c+=l.move(")"),s(),c}function rht(){return"!"}Nce.peek=oht;function Nce(e,t,n,r){const o=e.referenceType,i=n.enter("imageReference");let s=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return s(),n.stack=u,i(),o==="full"||!c||c!==f?l+=a.move(f+"]"):o==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function oht(){return"!"}Rce.peek=iht;function Rce(e,t,n){let r=e.value||"",o="`",i=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const s=n.unsafe[i],a=n.compilePattern(s);let l;if(s.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return o+r+o}function iht(){return"`"}function Ice(e,t){const n=p5(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Oce.peek=sht;function Oce(e,t,n,r){const o=k5(n),i=o==='"'?"Quote":"Apostrophe",s=n.createTracker(r);let a,l;if(Ice(e,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let f=s.move("<");return f+=s.move(n.containerPhrasing(e,{before:f,after:">",...s.current()})),f+=s.move(">"),a(),n.stack=u,f}a=n.enter("link"),l=n.enter("label");let c=s.move("[");return c+=s.move(n.containerPhrasing(e,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(e.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=n.enter("destinationRaw"),c+=s.move(n.safe(e.url,{before:c,after:e.title?" ":")",...s.current()}))),l(),e.title&&(l=n.enter(`title${i}`),c+=s.move(" "+o),c+=s.move(n.safe(e.title,{before:c,after:o,...s.current()})),c+=s.move(o),l()),c+=s.move(")"),a(),c}function sht(e,t,n){return Ice(e,n)?"<":"["}Pce.peek=aht;function Pce(e,t,n,r){const o=e.referenceType,i=n.enter("linkReference");let s=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return s(),n.stack=u,i(),o==="full"||!c||c!==f?l+=a.move(f+"]"):o==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function aht(){return"["}function C5(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function lht(e){const t=C5(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function cht(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Dce(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function uht(e,t,n,r){const o=n.enter("list"),i=n.bulletCurrent;let s=e.ordered?cht(n):C5(n);const a=e.ordered?s==="."?")":".":lht(n);let l=t&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Dce(n)===s&&u){let f=-1;for(;++f<e.children.length;){const p=e.children[f];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(s=a),n.bulletCurrent=s;const c=n.containerFlow(e,r);return n.bulletLastUsed=s,n.bulletCurrent=i,o(),c}function dht(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function fht(e,t,n,r){const o=dht(n);let i=n.bulletCurrent||C5(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let s=i.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const a=n.createTracker(r);a.move(i+" ".repeat(s-i.length)),a.shift(s);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),u);return l(),c;function u(f,p,m){return p?(m?"":" ".repeat(s))+f:(m?i:i+" ".repeat(s-i.length))+f}}function hht(e,t,n,r){const o=n.enter("paragraph"),i=n.enter("phrasing"),s=n.containerPhrasing(e,r);return i(),o(),s}const pht=t2(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function mht(e,t,n,r){return(e.children.some(function(s){return pht(s)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function ght(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}$ce.peek=yht;function $ce(e,t,n,r){const o=ght(n),i=n.enter("strong"),s=n.createTracker(r),a=s.move(o+o);let l=s.move(n.containerPhrasing(e,{after:o,before:a,...s.current()}));const c=l.charCodeAt(0),u=rC(r.before.charCodeAt(r.before.length-1),c,o);u.inside&&(l=Lb(c)+l.slice(1));const f=l.charCodeAt(l.length-1),p=rC(r.after.charCodeAt(0),f,o);p.inside&&(l=l.slice(0,-1)+Lb(f));const m=s.move(o+o);return i(),n.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+m}function yht(e,t,n){return n.options.strong||"*"}function bht(e,t,n,r){return n.safe(e.value,r)}function vht(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function xht(e,t,n){const r=(Dce(n)+(n.options.ruleSpaces?" ":"")).repeat(vht(n));return n.options.ruleSpaces?r.slice(0,-1):r}const jce={blockquote:Hft,break:VU,code:Kft,definition:Jft,emphasis:_ce,hardBreak:VU,heading:tht,html:Ace,image:Mce,imageReference:Nce,inlineCode:Rce,link:Oce,linkReference:Pce,list:uht,listItem:fht,paragraph:hht,root:mht,strong:$ce,text:bht,thematicBreak:xht};function wht(){return{enter:{table:Sht,tableData:HU,tableHeader:HU,tableRow:Cht},exit:{codeText:Eht,table:kht,tableData:ZM,tableHeader:ZM,tableRow:ZM}}}function Sht(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function kht(e){this.exit(e),this.data.inTable=void 0}function Cht(e){this.enter({type:"tableRow",children:[]},e)}function ZM(e){this.exit(e)}function HU(e){this.enter({type:"tableCell",children:[]},e)}function Eht(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Tht));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Tht(e,t){return t==="|"?t:e}function _ht(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,o=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:s,tableCell:l,tableRow:a}};function s(m,y,b,w){return c(u(m,b,w),m.align)}function a(m,y,b,w){const S=f(m,b,w),E=c([S]);return E.slice(0,E.indexOf(`
`))}function l(m,y,b,w){const S=b.enter("tableCell"),E=b.enter("phrasing"),T=b.containerPhrasing(m,{...w,before:i,after:i});return E(),S(),T}function c(m,y){return Fft(m,{align:y,alignDelimiters:r,padding:n,stringLength:o})}function u(m,y,b){const w=m.children;let S=-1;const E=[],T=y.enter("table");for(;++S<w.length;)E[S]=f(w[S],y,b);return T(),E}function f(m,y,b){const w=m.children;let S=-1;const E=[],T=y.enter("tableRow");for(;++S<w.length;)E[S]=l(w[S],m,y,b);return T(),E}function p(m,y,b){let w=jce.inlineCode(m,y,b);return b.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function Aht(){return{exit:{taskListCheckValueChecked:UU,taskListCheckValueUnchecked:UU,paragraph:Nht}}}function Mht(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Rht}}}function UU(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Nht(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const o=t.children;let i=-1,s;for(;++i<o.length;){const a=o[i];if(a.type==="paragraph"){s=a;break}}s===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Rht(e,t,n,r){const o=e.children[0],i=typeof e.checked=="boolean"&&o&&o.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);i&&a.move(s);let l=jce.listItem(e,t,n,{...r,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+s}}function Iht(){return[uft(),Rft(),Dft(),wht(),Aht()]}function Oht(e){return{extensions:[dft(),Ift(e),$ft(),_ht(e),Mht()]}}const Pht={tokenize:Bht,partial:!0},Lce={tokenize:Fht,partial:!0},zce={tokenize:Vht,partial:!0},Bce={tokenize:Hht,partial:!0},Dht={tokenize:Uht,partial:!0},Fce={name:"wwwAutolink",tokenize:Lht,previous:Hce},Vce={name:"protocolAutolink",tokenize:zht,previous:Uce},fu={name:"emailAutolink",tokenize:jht,previous:Gce},ic={};function $ht(){return{text:ic}}let mf=48;for(;mf<123;)ic[mf]=fu,mf++,mf===58?mf=65:mf===91&&(mf=97);ic[43]=fu;ic[45]=fu;ic[46]=fu;ic[95]=fu;ic[72]=[fu,Vce];ic[104]=[fu,Vce];ic[87]=[fu,Fce];ic[119]=[fu,Fce];function jht(e,t,n){const r=this;let o,i;return s;function s(f){return!bO(f)||!Gce.call(r,r.previous)||E5(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(f))}function a(f){return bO(f)?(e.consume(f),a):f===64?(e.consume(f),l):n(f)}function l(f){return f===46?e.check(Dht,u,c)(f):f===45||f===95||Qo(f)?(i=!0,e.consume(f),l):u(f)}function c(f){return e.consume(f),o=!0,l}function u(f){return i&&o&&fi(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function Lht(e,t,n){const r=this;return o;function o(s){return s!==87&&s!==119||!Hce.call(r,r.previous)||E5(r.events)?n(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Pht,e.attempt(Lce,e.attempt(zce,i),n),n)(s))}function i(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function zht(e,t,n){const r=this;let o="",i=!1;return s;function s(f){return(f===72||f===104)&&Uce.call(r,r.previous)&&!E5(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(f),e.consume(f),a):n(f)}function a(f){if(fi(f)&&o.length<5)return o+=String.fromCodePoint(f),e.consume(f),a;if(f===58){const p=o.toLowerCase();if(p==="http"||p==="https")return e.consume(f),l}return n(f)}function l(f){return f===47?(e.consume(f),i?c:(i=!0,l)):n(f)}function c(f){return f===null||eC(f)||In(f)||bh(f)||XE(f)?n(f):e.attempt(Lce,e.attempt(zce,u),n)(f)}function u(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function Bht(e,t,n){let r=0;return o;function o(s){return(s===87||s===119)&&r<3?(r++,e.consume(s),o):s===46&&r===3?(e.consume(s),i):n(s)}function i(s){return s===null?n(s):t(s)}}function Fht(e,t,n){let r,o,i;return s;function s(c){return c===46||c===95?e.check(Bce,l,a)(c):c===null||In(c)||bh(c)||c!==45&&XE(c)?l(c):(i=!0,e.consume(c),s)}function a(c){return c===95?r=!0:(o=r,r=void 0),e.consume(c),s}function l(c){return o||r||!i?n(c):t(c)}}function Vht(e,t){let n=0,r=0;return o;function o(s){return s===40?(n++,e.consume(s),o):s===41&&r<n?i(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check(Bce,t,i)(s):s===null||In(s)||bh(s)?t(s):(e.consume(s),o)}function i(s){return s===41&&r++,e.consume(s),o}}function Hht(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),i):a===93?(e.consume(a),o):a===60||a===null||In(a)||bh(a)?t(a):n(a)}function o(a){return a===null||a===40||a===91||In(a)||bh(a)?t(a):r(a)}function i(a){return fi(a)?s(a):n(a)}function s(a){return a===59?(e.consume(a),r):fi(a)?(e.consume(a),s):n(a)}}function Uht(e,t,n){return r;function r(i){return e.consume(i),o}function o(i){return Qo(i)?n(i):t(i)}}function Hce(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||In(e)}function Uce(e){return!fi(e)}function Gce(e){return!(e===47||bO(e))}function bO(e){return e===43||e===45||e===46||e===95||Qo(e)}function E5(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Ght={tokenize:Qht,partial:!0};function qht(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Yht,continuation:{tokenize:Jht},exit:Xht}},text:{91:{name:"gfmFootnoteCall",tokenize:Kht},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Zht,resolveTo:Wht}}}}function Zht(e,t,n){const r=this;let o=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;o--;){const l=r.events[o][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!s||!s._balanced)return n(l);const c=Ka(r.sliceSerialize({start:s.end,end:r.now()}));return c.codePointAt(0)!==94||!i.includes(c.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function Wht(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function Kht(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,s;return a;function a(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(f){if(i>999||f===93&&!s||f===null||f===91||In(f))return n(f);if(f===93){e.exit("chunkString");const p=e.exit("gfmFootnoteCallString");return o.includes(Ka(r.sliceSerialize(p)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return In(f)||(s=!0),i++,e.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(e.consume(f),i++,c):c(f)}}function Yht(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,s=0,a;return l;function l(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(y)}function u(y){if(s>999||y===93&&!a||y===null||y===91||In(y))return n(y);if(y===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return i=Ka(r.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return In(y)||(a=!0),s++,e.consume(y),y===92?f:u}function f(y){return y===91||y===92||y===93?(e.consume(y),s++,u):u(y)}function p(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),o.includes(i)||o.push(i),qt(e,m,"gfmFootnoteDefinitionWhitespace")):n(y)}function m(y){return t(y)}}function Jht(e,t,n){return e.check(Pv,t,e.attempt(Ght,t,n))}function Xht(e){e.exit("gfmFootnoteDefinition")}function Qht(e,t,n){const r=this;return qt(e,o,"gfmFootnoteDefinitionIndent",5);function o(i){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(i):n(i)}}function ept(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:o};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function o(s,a){let l=-1;for(;++l<s.length;)if(s[l][0]==="enter"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._close){let c=l;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[l][1].end.offset-s[l][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[l][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[l][1].end)},f={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[l][1].start)},p=[["enter",u,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",f,a]],m=a.parser.constructs.insideSpan.null;m&&ks(p,p.length,0,QE(m,s.slice(c+1,l),a)),ks(p,p.length,0,[["exit",f,a],["enter",s[l][1],a],["exit",s[l][1],a],["exit",u,a]]),ks(s,c-1,l-c+3,p),l=c+p.length-2;break}}for(l=-1;++l<s.length;)s[l][1].type==="strikethroughSequenceTemporary"&&(s[l][1].type="data");return s}function i(s,a,l){const c=this.previous,u=this.events;let f=0;return p;function p(y){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(y):(s.enter("strikethroughSequenceTemporary"),m(y))}function m(y){const b=Um(c);if(y===126)return f>1?l(y):(s.consume(y),f++,m);if(f<2&&!n)return l(y);const w=s.exit("strikethroughSequenceTemporary"),S=Um(y);return w._open=!S||S===2&&!!b,w._close=!b||b===2&&!!S,a(y)}}}class tpt{constructor(){this.map=[]}add(t,n,r){npt(this,t,n,r)}consume(t){if(this.map.sort(function(i,s){return i[0]-s[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let o=r.pop();for(;o;){for(const i of o)t.push(i);o=r.pop()}this.map.length=0}}function npt(e,t,n,r){let o=0;if(!(n===0&&r.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...r);return}o+=1}e.map.push([t,n,r])}}function rpt(e,t){let n=!1;const r=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function opt(){return{flow:{null:{name:"table",tokenize:ipt,resolveAll:spt}}}}function ipt(e,t,n){const r=this;let o=0,i=0,s;return a;function a($){let B=r.events.length-1;for(;B>-1;){const W=r.events[B][1].type;if(W==="lineEnding"||W==="linePrefix")B--;else break}const G=B>-1?r.events[B][1].type:null,V=G==="tableHead"||G==="tableRow"?R:l;return V===R&&r.parser.lazy[r.now().line]?n($):V($)}function l($){return e.enter("tableHead"),e.enter("tableRow"),c($)}function c($){return $===124||(s=!0,i+=1),u($)}function u($){return $===null?n($):it($)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),m):n($):Bt($)?qt(e,u,"whitespace")($):(i+=1,s&&(s=!1,o+=1),$===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),s=!0,u):(e.enter("data"),f($)))}function f($){return $===null||$===124||In($)?(e.exit("data"),u($)):(e.consume($),$===92?p:f)}function p($){return $===92||$===124?(e.consume($),f):f($)}function m($){return r.interrupt=!1,r.parser.lazy[r.now().line]?n($):(e.enter("tableDelimiterRow"),s=!1,Bt($)?qt(e,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):y($))}function y($){return $===45||$===58?w($):$===124?(s=!0,e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),b):M($)}function b($){return Bt($)?qt(e,w,"whitespace")($):w($)}function w($){return $===58?(i+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),S):$===45?(i+=1,S($)):$===null||it($)?A($):M($)}function S($){return $===45?(e.enter("tableDelimiterFiller"),E($)):M($)}function E($){return $===45?(e.consume($),E):$===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),T):(e.exit("tableDelimiterFiller"),T($))}function T($){return Bt($)?qt(e,A,"whitespace")($):A($)}function A($){return $===124?y($):$===null||it($)?!s||o!==i?M($):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t($)):M($)}function M($){return n($)}function R($){return e.enter("tableRow"),O($)}function O($){return $===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),O):$===null||it($)?(e.exit("tableRow"),t($)):Bt($)?qt(e,O,"whitespace")($):(e.enter("data"),I($))}function I($){return $===null||$===124||In($)?(e.exit("data"),O($)):(e.consume($),$===92?L:I)}function L($){return $===92||$===124?(e.consume($),I):I($)}}function spt(e,t){let n=-1,r=!0,o=0,i=[0,0,0,0],s=[0,0,0,0],a=!1,l=0,c,u,f;const p=new tpt;for(;++n<e.length;){const m=e[n],y=m[1];m[0]==="enter"?y.type==="tableHead"?(a=!1,l!==0&&(GU(p,t,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},p.add(n,0,[["enter",c,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,f=void 0,i=[0,0,0,0],s=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},p.add(n,0,[["enter",u,t]])),o=y.type==="tableDelimiterRow"?2:u?3:1):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(i[1]!==0&&(s[0]=s[1],f=Qx(p,t,i,o,void 0,f),i=[0,0,0,0]),s[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(s[0]=s[1],f=Qx(p,t,i,o,void 0,f)),i=s,s=[i[1],n,0,0])):y.type==="tableHead"?(a=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,i[1]!==0?(s[0]=s[1],f=Qx(p,t,i,o,n,f)):s[1]!==0&&(f=Qx(p,t,s,o,n,f)),o=0):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(s[3]=n)}for(l!==0&&GU(p,t,l,c,u),p.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=rpt(t.events,n))}return e}function Qx(e,t,n,r,o,i){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(i.end=Object.assign({},zp(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const l=zp(t.events,n[1]);if(i={type:s,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const c=zp(t.events,n[2]),u=zp(t.events,n[3]),f={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const p=t.events[n[2]],m=t.events[n[3]];if(p[1].end=Object.assign({},m[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,b=n[3]-n[2]-1;e.add(y,b,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return o!==void 0&&(i.end=Object.assign({},zp(t.events,o)),e.add(o,0,[["exit",i,t]]),i=void 0),i}function GU(e,t,n,r,o){const i=[],s=zp(t.events,n);o&&(o.end=Object.assign({},s),i.push(["exit",o,t])),r.end=Object.assign({},s),i.push(["exit",r,t]),e.add(n+1,0,i)}function zp(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const apt={name:"tasklistCheck",tokenize:cpt};function lpt(){return{text:{91:apt}}}function cpt(e,t,n){const r=this;return o;function o(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),i)}function i(l){return In(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),s):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),s):n(l)}function s(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(l)}function a(l){return it(l)?t(l):Bt(l)?e.check({tokenize:upt},t,n)(l):n(l)}}function upt(e,t,n){return qt(e,r,"whitespace");function r(o){return o===null?n(o):t(o)}}function dpt(e){return Yle([$ht(),qht(),ept(e),opt(),lpt()])}const fpt={};function vO(e){const t=this,n=e||fpt,r=t.data(),o=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);o.push(dpt(n)),i.push(Iht()),s.push(Oht(n))}const hpt=Object.freeze(Object.defineProperty({__proto__:null,default:vO},Symbol.toStringTag,{value:"Module"})),ppt=({isOpen:e,onClose:t})=>{const{currentNote:n}=Ur(),{googleApiKey:r}=_n(),[o,i]=k.useState("chat"),[s,a]=k.useState({}),[l,c]=k.useState(!1),[u,f]=k.useState(""),p=k.useRef(null),[m,y]=k.useState(null),[b,w]=k.useState(new Date),S=n?s[n.id]||[]:[],E=(I,L)=>{n&&a($=>{const B=[...$[n.id]||[]];return B[I]&&(B[I]={...B[I],actionStatus:L}),{...$,[n.id]:B}})};k.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[S,u,o]),k.useEffect(()=>{if(!r){y(null);return}try{const I=kE({apiKey:r});y(()=>I)}catch(I){console.error("Failed to create Google AI client",I),y(null)}},[r]);const T=async I=>{if(!I.trim())return;if(!r||!m){pt.error("Google API key not configured.",{style:{background:"#333",color:"#fff"}});return}if(!n)return;const L={role:"user",content:I};a($=>({...$,[n.id]:[...$[n.id]||[],L]})),c(!0),f("");try{const $=`You are DaddyAI, a helpful AI assistant in a note-taking app called Logia.

CAPABILITIES:
1. Chat: Answer questions normally.
2. Edit: You can ADD, UPDATE, DELETE, or REPLACE content in the note.

=== INSERT ACTIONS ===

FOR CODE BLOCKS:
{ "type": "editor_action", "action": "insertCode", "description": "Adding code example", "data": { "code": "your code here", "language": "rust" } }

FOR HEADINGS:
{ "type": "editor_action", "action": "insertHeading", "description": "Adding section", "data": { "text": "Heading Text", "level": 2 } }

FOR PLAIN TEXT:
{ "type": "editor_action", "action": "insertText", "description": "Adding paragraph", "data": { "text": "Your text here" } }

=== EDIT ACTIONS ===

TO UPDATE EXISTING CONTENT (find by text, then change):
{ "type": "editor_action", "action": "update", "description": "Fixing typo in X", "data": { "searchText": "text to find", "newContent": "corrected text" } }

TO DELETE CONTENT:
{ "type": "editor_action", "action": "delete", "description": "Removing section", "data": { "searchText": "text in block to delete" } }

TO REPLACE CONTENT:
{ "type": "editor_action", "action": "replace", "description": "Replacing X with Y", "data": { "searchText": "old text", "newContent": "new replacement text" } }

=== RULES ===
- Only output JSON when user asks to edit/add/delete/change the note
- Use "searchText" to find existing content (a unique phrase from that block)
- For regular chat, just respond normally without JSON
- Keep descriptions short and clear
`,B=n?`

Context:
---
${n.content}
---`:"",G=await Zst({model:m("gemini-2.5-flash"),system:$+B,messages:[...S,L]});let V="";for await(const K of G.textStream)V+=K,f(V);const W={role:"assistant",content:V};a(K=>({...K,[n.id]:[...K[n.id]||[],W]})),f("")}catch($){console.error("AI error:",$);let B=" An error occurred while processing your request.";const G=$?.message||$?.toString()||"";G.includes("401")||G.includes("API key")||G.includes("authentication")?B=` **API Key Error**

Your API key may be invalid or expired. Please check your API key in Settings.`:G.includes("429")||G.includes("rate")||G.includes("quota")||G.includes("limit")?B=` **Rate Limited**

You've exceeded the API rate limit. Please wait a moment and try again, or check your quota at [Google AI Studio](https://aistudio.google.com/).`:G.includes("403")||G.includes("forbidden")?B=` **Access Denied**

Your API key doesn't have permission for this model. Check your API key settings.`:(G.includes("network")||G.includes("fetch")||G.includes("connect"))&&(B=` **Network Error**

Couldn't connect to the AI service. Please check your internet connection.`),a(V=>({...V,[n.id]:[...V[n.id]||[],{role:"assistant",content:B}]})),f("")}finally{c(!1)}},M=(I=>{const L=I.getFullYear(),$=I.getMonth(),B=new Date(L,$+1,0).getDate(),G=new Date(L,$,1).getDay(),V=[];for(let W=0;W<G;W++)V.push(null);for(let W=1;W<=B;W++)V.push(new Date(L,$,W));return V})(b),R=()=>w(new Date(b.getFullYear(),b.getMonth()-1,1)),O=()=>w(new Date(b.getFullYear(),b.getMonth()+1,1));return v.jsx(pa,{children:e&&v.jsx(Wn.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:1},transition:{duration:.2,ease:"easeInOut"},style:{height:"100%"},children:v.jsx(Goe,{defaultSize:{width:320,height:"100%"},enable:{left:!0},minWidth:300,maxWidth:600,handleClasses:{left:"w-1 bg-zinc-800 hover:bg-zinc-600 transition-colors"},children:v.jsxs("div",{className:"h-full bg-zinc-950 border-l border-zinc-800 flex flex-col shadow-2xl",children:[v.jsx("div",{className:"flex items-center justify-between px-2 py-2 border-b border-zinc-900 bg-zinc-950 sticky top-0 z-10",children:v.jsxs("div",{className:"flex items-center gap-1 bg-zinc-900/50 p-1 rounded-lg",children:[v.jsx("button",{onClick:()=>i("chat"),className:`p-1.5 rounded-md transition-all ${o==="chat"?"bg-zinc-800 text-zinc-100 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"AI Chat",children:v.jsx(Lp,{size:16})}),v.jsx("button",{onClick:()=>i("calendar"),className:`p-1.5 rounded-md transition-all ${o==="calendar"?"bg-zinc-800 text-zinc-100 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Calendar",children:v.jsx(Ax,{size:16})}),v.jsx("button",{onClick:()=>i("tags"),className:`p-1.5 rounded-md transition-all ${o==="tags"?"bg-zinc-800 text-zinc-100 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Tags & Properties",children:v.jsx(rF,{size:16})})]})}),v.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col bg-zinc-950",children:[o==="chat"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{ref:p,className:"flex-1 overflow-y-auto p-4 space-y-6 scrollbar-thin scrollbar-thumb-zinc-800 scrollbar-track-transparent",children:[S.length===0?v.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6 mt-10",children:[v.jsxs("div",{className:"mb-6 relative",children:[v.jsx("div",{className:"absolute inset-0 bg-blue-500/20 blur-xl rounded-full"}),v.jsx("div",{className:"relative bg-zinc-900 p-4 rounded-xl border border-zinc-800 shadow-lg",children:v.jsx(Lp,{size:32,className:"text-blue-400"})})]}),v.jsx("h3",{className:"text-zinc-100 text-lg font-semibold mb-2",children:"What can I help you with?"}),v.jsxs("div",{className:"flex flex-col gap-2 mt-6 w-full max-w-xs",children:[v.jsxs("button",{className:"flex items-center gap-3 w-full p-3 rounded-lg bg-zinc-900/40 hover:bg-zinc-900 border border-zinc-800/50 hover:border-zinc-700 transition-all group text-left",children:[v.jsx("span",{className:"text-zinc-500 group-hover:text-blue-400 transition-colors",children:v.jsx(aF,{size:16})}),v.jsx("span",{className:"text-zinc-400 text-sm group-hover:text-zinc-200",children:"Summarize this note"})]}),v.jsxs("button",{className:"flex items-center gap-3 w-full p-3 rounded-lg bg-zinc-900/40 hover:bg-zinc-900 border border-zinc-800/50 hover:border-zinc-700 transition-all group text-left",children:[v.jsx("span",{className:"text-zinc-500 group-hover:text-blue-400 transition-colors",children:v.jsx(Lp,{size:16})}),v.jsx("span",{className:"text-zinc-400 text-sm group-hover:text-zinc-200",children:"Brainstorm ideas"})]})]})]}):S.map((I,L)=>{let $=[],B=I.content;if(I.role==="assistant"){const G=I.content;let V=0;for(;V<G.length;){let W="",K=-1;const F=G.indexOf("{",V),q=G.indexOf("[",V);if(F!==-1&&(q===-1||F<q)?(K=F,W="{"):q!==-1&&(K=q,W="["),K===-1)break;const H=W==="{"?"}":"]";let z=0,N=-1;for(let U=K;U<G.length;U++)if(G[U]===W)z++;else if(G[U]===H&&(z--,z===0)){N=U;break}if(N!==-1){const U=G.substring(K,N+1);try{const te=JSON.parse(U);Array.isArray(te)?(te.forEach(D=>{D.type==="editor_action"&&$.push(D)}),B=B.replace(U,"").trim()):te.type==="editor_action"&&($.push(te),B=B.replace(U,"").trim())}catch{}V=N+1}else break}B=B.replace(/^\s*[\[\],\s]+\s*$/,"").trim()}return v.jsxs("div",{className:`flex gap-3 ${I.role==="user"?"flex-row-reverse":""}`,children:[v.jsx("div",{className:`flex-shrink-0 mt-1 size-7 rounded-sm flex items-center justify-center ${I.role==="user"?"bg-zinc-800":"bg-transparent"}`,children:I.role==="user"?v.jsx(cF,{size:14,className:"text-zinc-400"}):v.jsx(Lp,{size:16,className:"text-blue-400"})}),v.jsxs("div",{className:`flex-1 text-sm leading-relaxed ${I.role==="user"?"bg-zinc-800 text-zinc-100 px-3 py-2 rounded-lg":"text-zinc-300"}`,children:[B&&v.jsx("div",{className:$.length>0?"mb-3":"",children:v.jsx(zU,{remarkPlugins:[vO],children:B})}),$.length>0&&v.jsx(ilt,{actionDataList:$,status:I.actionStatus||"pending",onStatusChange:G=>E(L,G)})]})]},L)}),l&&v.jsxs("div",{className:"flex gap-3",children:[v.jsx("div",{className:"mt-1",children:v.jsx(Lp,{size:16,className:"text-blue-400 animate-pulse"})}),v.jsx("div",{className:"flex-1 text-sm text-zinc-300",children:u?u.includes('"type": "editor_action"')||u.includes('"type":"editor_action"')?v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"size-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),v.jsx("span",{className:"text-zinc-400 italic",children:"Evaluating action..."})]}):v.jsx(zU,{remarkPlugins:[vO],children:u}):v.jsx("span",{className:"text-zinc-500 italic animate-pulse",children:"Thinking..."})})]})]}),v.jsx("div",{className:"p-4 bg-zinc-950 border-t border-zinc-900/50",children:v.jsx(Fle,{onSend:T,isLoading:l})})]}),o==="calendar"&&v.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsxs("h2",{className:"text-zinc-100 font-semibold text-lg",children:[b.toLocaleString("default",{month:"short"})," ",v.jsx("span",{className:"text-zinc-500",children:b.getFullYear()})]}),v.jsxs("div",{className:"flex gap-1",children:[v.jsx("button",{onClick:R,className:"p-1 text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900 rounded",children:v.jsx(oUe,{size:16})}),v.jsx("button",{onClick:()=>w(new Date),className:"text-xs font-medium text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900 px-2 rounded",children:"TODAY"}),v.jsx("button",{onClick:O,className:"p-1 text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900 rounded",children:v.jsx(Ik,{size:16})})]})]}),v.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(I=>v.jsx("div",{className:"text-xs font-medium text-zinc-600 py-1",children:I},I))}),v.jsx("div",{className:"grid grid-cols-7 gap-1 flex-1 content-start",children:M.map((I,L)=>v.jsx("div",{className:`aspect-square flex items-center justify-center text-sm rounded-md transition-colors
                                    ${I?"":"invisible"}
                                    ${I&&I.toDateString()===new Date().toDateString()?"bg-blue-600 text-white font-medium shadow-lg shadow-blue-500/20":"text-zinc-400 hover:bg-zinc-900 hover:text-zinc-100"}
                                `,children:I?.getDate()},L))})]}),o==="tags"&&v.jsx("div",{className:"flex flex-col h-full bg-zinc-950 overflow-y-auto",children:v.jsxs("div",{className:"p-4",children:[v.jsx("div",{className:"flex items-center justify-between mb-4",children:v.jsx("h3",{className:"text-zinc-400 font-medium text-sm",children:"Properties"})}),v.jsx("div",{className:"space-y-1",children:[{icon:v.jsx(rF,{size:14}),label:"Tags",value:"Always show",action:!0},{icon:v.jsx(aF,{size:14}),label:"Doc mode",value:"Always hide",action:!0},{icon:v.jsx(Ax,{size:14}),label:"Journal",value:"Always hide",action:!0},{icon:v.jsx(GUe,{size:14}),label:"Template",value:"Always hide",action:!0},{icon:v.jsx(Ax,{size:14}),label:"Created",value:"Always show",action:!0},{icon:v.jsx(Ax,{size:14}),label:"Updated",value:"Always show",action:!0},{icon:v.jsx(cF,{size:14}),label:"Created by",value:"Always hide",action:!0}].map((I,L)=>v.jsxs("div",{className:"group flex items-center justify-between py-1.5 px-2 hover:bg-zinc-900/60 rounded-md cursor-pointer transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3 text-zinc-400 group-hover:text-zinc-300",children:[v.jsx("span",{className:"opacity-70",children:I.icon}),v.jsx("span",{className:"text-sm",children:I.label})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-xs text-zinc-600 group-hover:text-zinc-500",children:I.value}),I.action&&v.jsx(p0,{size:14,className:"text-zinc-700 group-hover:text-zinc-500"})]})]},L))}),v.jsxs("div",{className:"mt-8",children:[v.jsxs("button",{className:"flex items-center gap-2 text-zinc-500 hover:text-zinc-300 text-sm font-medium transition-colors px-2",children:[v.jsx("span",{children:"Add more properties"}),v.jsx(Ik,{size:14})]}),v.jsx("div",{className:"mt-4 pl-2 border-l-2 border-zinc-900 ml-3 space-y-3",children:["Text","Number","Checkbox","Date","Person"].map((I,L)=>v.jsxs("div",{className:"flex items-center justify-between group cursor-pointer",children:[v.jsxs("div",{className:"flex items-center gap-3 text-zinc-500 group-hover:text-zinc-300",children:[v.jsx("span",{className:"text-xs opacity-50",children:"T"}),v.jsx("span",{className:"text-sm",children:I})]}),v.jsx(Eb,{size:14,className:"text-zinc-700 opacity-0 group-hover:opacity-100 transition-opacity"})]},L))})]})]})})]})]})})})})};function mpt({isOpen:e,onClose:t,syncPlan:n,onSyncComplete:r}){const[o,i]=k.useState({}),[s,a]=k.useState(!1);if(!n)return null;const l=n.conflicts.length>0,c=n.uploads.length+n.downloads.length+n.deletions_local.length+n.deletions_cloud.length,u=n.conflicts.every(m=>o[m.path]),f=async()=>{if(l&&!u){pt.error("Resolve all conflicts first");return}a(!0);try{const m=Object.entries(o).map(([b,w])=>({path:b,choice:w})),y=await zt("execute_sync_with_resolutions",{resolutions:m});if(pt.success(y.message),y.needs_reload){const{loadNotes:b,loadFolders:w}=Ur.getState();await b(),await w()}r(),t()}catch(m){pt.error(`Sync failed: ${m}`)}finally{a(!1)}},p=m=>m.split("/").pop()?.replace(".json","")||m;return v.jsxs(gm,{open:e,onClose:t,className:"relative z-[1000]",children:[v.jsx("div",{className:"fixed inset-0 bg-black/40","aria-hidden":"true"}),v.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:v.jsxs(Jf,{className:"w-full max-w-sm rounded-lg bg-zinc-900 border border-zinc-800 shadow-lg",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800",children:[v.jsx(mm,{className:"text-sm font-medium text-zinc-100",children:"Sync Changes"}),v.jsx("button",{onClick:t,className:"text-zinc-500 hover:text-zinc-300",children:v.jsx(mh,{size:16})})]}),v.jsxs("div",{className:"px-4 py-3 max-h-[50vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex gap-4 text-xs text-zinc-400 mb-4",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(Zne,{size:12,className:"text-blue-400"}),n.uploads.length," up"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(WHe,{size:12,className:"text-green-400"}),n.downloads.length," down"]}),l&&v.jsxs("span",{className:"text-amber-400",children:[n.conflicts.length," conflicts"]})]}),l&&v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs text-zinc-500",children:"Resolve conflicts"}),v.jsxs("div",{className:"flex gap-1",children:[v.jsx("button",{onClick:()=>{const m={};n.conflicts.forEach(y=>m[y.path]="local"),i(m)},className:"px-2 py-0.5 text-[10px] text-zinc-400 hover:text-zinc-200 border border-zinc-700 rounded",children:"All local"}),v.jsx("button",{onClick:()=>{const m={};n.conflicts.forEach(y=>m[y.path]="cloud"),i(m)},className:"px-2 py-0.5 text-[10px] text-zinc-400 hover:text-zinc-200 border border-zinc-700 rounded",children:"All cloud"})]})]}),n.conflicts.map(m=>v.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-zinc-800/50 last:border-0",children:[v.jsx("span",{className:"text-xs text-zinc-300 truncate max-w-[140px]",title:m.path,children:p(m.path)}),v.jsxs("div",{className:"flex gap-1",children:[v.jsx("button",{onClick:()=>i(y=>({...y,[m.path]:"local"})),className:`p-1.5 rounded ${o[m.path]==="local"?"bg-zinc-700 text-zinc-100":"text-zinc-500 hover:text-zinc-300"}`,title:"Use local",children:v.jsx(zUe,{size:12})}),v.jsx("button",{onClick:()=>i(y=>({...y,[m.path]:"cloud"})),className:`p-1.5 rounded ${o[m.path]==="cloud"?"bg-blue-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Use cloud",children:v.jsx(kb,{size:12})})]})]},m.path))]}),!l&&c>0&&v.jsxs("p",{className:"text-xs text-zinc-500 text-center py-2",children:[c," changes ready to sync"]}),!l&&c===0&&v.jsx("p",{className:"text-xs text-zinc-500 text-center py-2",children:"Everything is in sync"})]}),v.jsxs("div",{className:"flex justify-end gap-2 px-4 py-3 border-t border-zinc-800",children:[v.jsx("button",{onClick:t,className:"px-3 py-1.5 text-xs text-zinc-400 hover:text-zinc-200",children:"Cancel"}),v.jsx("button",{onClick:f,disabled:s||l&&!u,className:"px-3 py-1.5 text-xs font-medium bg-zinc-100 text-zinc-900 rounded hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",children:s?v.jsxs(v.Fragment,{children:[v.jsx(Cb,{size:12,className:"animate-spin"}),"Syncing"]}):"Sync"})]})]})})]})}const gpt=()=>{const{isSettingsOpen:e,setIsSettingsOpen:t,setGoogleApiKey:n,googleDriveConnected:r,setGoogleDriveConnected:o,isSyncing:i,setIsSyncing:s,lastSyncedAt:a,setLastSyncedAt:l}=_n(),[c,u]=k.useState(""),[f,p]=k.useState(!1),[m,y]=k.useState(!1),[b,w]=k.useState("idle"),[S,E]=k.useState(!1),[T,A]=k.useState("idle"),[M,R]=k.useState(""),[O,I]=k.useState(null),[L,$]=k.useState(null),[B,G]=k.useState(!1);k.useEffect(()=>{e&&(K(),V())},[e]);const V=async()=>{try{const z=await zt("get_google_drive_status");o(z.is_authenticated)}catch(z){console.error("Failed to check drive status",z)}},W=async()=>{try{const z=await zt("check_sync_status");z.has_conflict?I({local:z.local_count,remote:z.remote_count}):I(null)}catch(z){console.error("Failed to check sync status",z)}},K=async()=>{try{const z=await zt("get_google_api_key");u(z),n(z)}catch(z){console.error("Failed to load API key:",z)}},F=async()=>{if(!c.trim()){w("error"),pt.error("API Key cannot be empty");return}p(!0),w("saving");try{await zt("save_google_api_key",{key:c}),n(c),w("saved"),pt.success("API Key saved successfully"),setTimeout(()=>w("idle"),2e3)}catch(z){console.error("Failed to save API key:",z),w("error"),pt.error("Failed to save API key")}finally{p(!1)}},q=async()=>{E(!0),A("installing");try{await zt("install_transcription_dependencies"),A("installed"),setTimeout(()=>A("idle"),2e3)}catch(z){console.error("Failed to install transcription dependencies:",z),A("error")}finally{E(!1)}},H=async()=>{p(!0);try{await zt("remove_google_api_key"),u(""),n(""),w("saved"),pt.success("API key removed successfully!"),setTimeout(()=>w("idle"),2e3)}catch(z){console.error("Failed to remove API key:",z),w("error"),pt.error("Failed to remove API key.")}finally{p(!1)}};return k.useEffect(()=>{let z;async function N(){try{const U=await zt("read_install_log");R(U)}catch{}}return S?(N(),z=window.setInterval(N,1e3)):N(),()=>{z&&clearInterval(z)}},[S]),v.jsxs(v.Fragment,{children:[v.jsxs(gm,{open:e,onClose:()=>t(!1),className:"relative z-[1000]",children:[v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm","aria-hidden":"true"}),v.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:v.jsxs(Jf,{className:"w-full max-w-md rounded-xl bg-zinc-900 border border-zinc-800 p-6 shadow-xl",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx(mm,{className:"text-lg font-medium text-white",children:"Settings"}),v.jsx("button",{onClick:()=>t(!1),className:"text-zinc-400 hover:text-white transition-colors",children:v.jsx(mh,{size:20})})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-2",children:"General"}),v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{children:[v.jsx("label",{htmlFor:"apiKey",className:"block text-xs text-zinc-400 mb-1.5",children:"Gemini API Key"}),v.jsx(hm,{className:"text-xs text-zinc-500 mb-2",children:"Required for AI features. The key is stored locally on your device."}),v.jsx("input",{id:"apiKey",type:"password",value:c,onChange:z=>u(z.target.value),placeholder:"Enter your API key",className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-2 text-sm text-zinc-200 placeholder-zinc-600 focus:outline-none focus:border-zinc-600 focus:ring-1 focus:ring-zinc-600 transition-colors"})]})})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-2",children:"Transcription"}),v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{children:[v.jsx(hm,{className:"text-xs text-zinc-500 mb-2",children:"Install Python dependencies required for audio transcription. This will download faster-whisper and other required packages."}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"flex-1",children:v.jsx("button",{onClick:q,disabled:S,className:`
                         px-4 py-2 rounded-lg text-sm font-medium transition-all
                         ${T==="installed"?"bg-green-600 text-white hover:bg-green-700":T==="error"?"bg-red-600 text-white hover:bg-red-700":"bg-zinc-100 text-zinc-900 hover:bg-zinc-200 disabled:opacity-50 disabled:cursor-not-allowed"}
                       `,children:S?"Installing...":T==="installed"?"Installed ":T==="error"?"Error":"Install Dependencies"})}),v.jsx("div",{className:"w-48 text-xs text-zinc-400",children:S?"Downloading / installing...":""})]}),v.jsx("div",{className:"mt-3",children:v.jsx("pre",{className:"max-h-40 overflow-auto text-xs bg-zinc-900 border border-zinc-800 p-2 rounded text-zinc-300",children:M})})]})})]}),v.jsxs("div",{className:"bg-gradient-to-br from-zinc-800/50 to-zinc-900/50 rounded-xl p-4 border border-zinc-700/50",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("div",{className:`p-2 rounded-lg ${r?"bg-green-500/20":"bg-zinc-700/50"}`,children:r?v.jsx(kb,{className:"w-5 h-5 text-green-400"}):v.jsx(eF,{className:"w-5 h-5 text-zinc-400"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-zinc-200",children:"Google Drive Sync"}),v.jsx("p",{className:"text-xs text-zinc-500",children:r?"Your notes are backed up to the cloud":"Connect to backup your notes"})]})]}),r?v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-zinc-800/50 rounded-lg",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(dI,{className:"w-4 h-4 text-green-400"}),v.jsx("span",{className:"text-xs text-zinc-300",children:"Connected"})]}),v.jsx("span",{className:"text-xs text-zinc-500",children:a?`Last sync: ${a.toLocaleTimeString()}`:"Not synced yet"})]}),O&&v.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx(Kne,{className:"w-4 h-4 text-amber-400"}),v.jsx("span",{className:"text-xs font-medium text-amber-400",children:"Sync Conflict Detected"})]}),v.jsxs("p",{className:"text-xs text-zinc-400 mb-3",children:["Local: ",O.local," notes  Cloud: ",O.remote," notes"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:async()=>{try{s(!0);const z=await zt("force_sync_from_cloud");pt.success(z),I(null),l(new Date)}catch(z){pt.error(`Failed: ${z}`)}finally{s(!1)}},disabled:i,className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:[v.jsx(ZP,{className:"w-3 h-3"}),"Use Cloud"]}),v.jsxs("button",{onClick:async()=>{try{s(!0);const z=await zt("force_sync_to_cloud");pt.success(z),I(null),l(new Date)}catch(z){pt.error(`Failed: ${z}`)}finally{s(!1)}},disabled:i,className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium bg-zinc-600 text-white hover:bg-zinc-500 disabled:opacity-50",children:[v.jsx(MGe,{className:"w-3 h-3"}),"Use Local"]})]})]}),v.jsxs("button",{onClick:async()=>{s(!0);try{const z=await zt("get_sync_plan");$(z),z.uploads.length>0||z.downloads.length>0||z.conflicts.length>0||z.deletions_local.length>0||z.deletions_cloud.length>0?G(!0):pt.success("Everything is already in sync!")}catch(z){console.error(z),pt.error(`Failed to check sync status: ${z}`)}finally{s(!1)}},disabled:i,className:"relative w-full overflow-hidden rounded-lg text-sm font-medium bg-zinc-700 text-zinc-200 hover:bg-zinc-600 disabled:cursor-not-allowed transition-all",children:[i&&v.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-zinc-600/30 via-zinc-500/40 to-zinc-600/30 animate-pulse"}),i&&v.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gradient-to-r from-blue-500 to-cyan-400",style:{animation:"progress 2s ease-in-out infinite"}}),v.jsx("style",{children:`
                      @keyframes progress {
                        0% { width: 0%; }
                        50% { width: 80%; }
                        100% { width: 100%; }
                      }
                    `}),v.jsx("div",{className:"relative flex items-center justify-center gap-2 px-4 py-2.5",children:i?v.jsxs(v.Fragment,{children:[v.jsx(Pk,{className:"w-4 h-4 animate-spin"}),v.jsx("span",{children:"Syncing..."})]}):v.jsxs(v.Fragment,{children:[v.jsx(Pk,{className:"w-4 h-4"}),v.jsx("span",{children:"Sync Now"})]})})]}),v.jsxs("button",{onClick:async()=>{try{await zt("disconnect_google_drive"),o(!1),l(null),I(null),pt.success("Disconnected from Google Drive")}catch(z){console.error(z),pt.error(`Failed to disconnect: ${z}`)}},className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-xs font-medium text-zinc-400 hover:text-red-400 hover:bg-red-500/10 transition-all",children:[v.jsx(eF,{className:"w-3 h-3"}),"Disconnect Account"]})]}):v.jsx("button",{onClick:async()=>{y(!0);const z=pt.loading("Check your browser tabs to login...");try{await zt("connect_google_drive"),o(!0),pt.success("Connected to Google Drive!",{id:z}),await W()}catch(N){console.error(N),pt.error(`Connection failed: ${N}`,{id:z})}finally{y(!1)}},disabled:m,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 transition-all",children:m?v.jsxs(v.Fragment,{children:[v.jsx(Cb,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):v.jsxs(v.Fragment,{children:[v.jsx(kb,{className:"w-4 h-4"}),"Connect Google Drive"]})})]}),v.jsxs("div",{className:"flex justify-end pt-4 border-t border-zinc-800",children:[c&&v.jsx("button",{onClick:H,disabled:f,className:`
                    mr-2 px-4 py-2 rounded-lg text-sm font-medium transition-all
                    bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed
                  `,children:"Remove API Key"}),v.jsx("button",{onClick:F,disabled:f||!c,className:`
                  px-4 py-2 rounded-lg text-sm font-medium transition-all
                  ${b==="saved"?"bg-green-600 text-white hover:bg-green-700":b==="error"?"bg-red-600 text-white hover:bg-red-700":"bg-zinc-100 text-zinc-900 hover:bg-zinc-200 disabled:opacity-50 disabled:cursor-not-allowed"}
                `,children:b==="saving"?"Saving...":b==="saved"?"Saved!":b==="error"?"Error":"Save Changes"})]})]})]})})]}),v.jsx(mpt,{isOpen:B,onClose:()=>G(!1),syncPlan:L,onSyncComplete:()=>{l(new Date),$(null)}})]})};function ypt(){const[e,t]=k.useState(null),[n,r]=k.useState(!0),[o,i]=k.useState(!1),[s,a]=k.useState(!1),[l,c]=k.useState(null),[u,f]=k.useState(!1),p=S=>S?!S.python_found||S.platform==="linux"&&!S.ffmpeg_available||typeof S.vcruntime_found<"u"&&!S.vcruntime_found||typeof S.network_ok<"u"&&!S.network_ok||typeof S.windows_helper_present<"u"&&!S.windows_helper_present:!1,m=async()=>{r(!0);try{const S=await zt("prereflight_check");t(S);const E=localStorage.getItem("kortex_preflight_dismissed")==="true";p(S)&&!E&&a(!0)}catch(S){console.error("prereflight_check failed",S)}finally{r(!1)}};k.useEffect(()=>{m()},[]);const y=()=>p(e),b=async()=>{i(!0),c(null);try{await zt("install_transcription_dependencies"),await m()}catch(S){c(String(S))}finally{i(!1)}};if(!s)return null;const w=({icon:S,label:E,status:T,detail:A})=>v.jsxs("div",{className:"group flex items-center justify-between p-3 rounded-md hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:Li("p-1.5 rounded-md",{"bg-emerald-500/10 text-emerald-400":T==="ok","bg-red-500/10 text-red-400":T==="error","bg-amber-500/10 text-amber-400":T==="warning"}),children:v.jsx(S,{size:16,strokeWidth:2})}),v.jsxs("div",{children:[v.jsx("div",{className:"font-medium text-zinc-200 text-sm",children:E}),A&&v.jsx("div",{className:"text-xs text-zinc-500",children:A})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[T==="ok"&&v.jsx("span",{className:"text-xs text-emerald-400 font-medium px-2 py-0.5 bg-emerald-500/10 rounded-full",children:"Ready"}),T==="error"&&v.jsx("span",{className:"text-xs text-red-400 font-medium px-2 py-0.5 bg-red-500/10 rounded-full",children:"Missing"}),T==="warning"&&v.jsx("span",{className:"text-xs text-amber-400 font-medium px-2 py-0.5 bg-amber-500/10 rounded-full",children:"Warning"})]})]});return v.jsx(pa,{children:v.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[v.jsx(Wn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>!y()&&a(!1)}),v.jsxs(Wn.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col max-h-[85vh]",children:[v.jsx("div",{className:"px-5 py-4 border-b border-zinc-800",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:v.jsx(yGe,{className:"text-blue-400",size:20})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-base font-semibold text-zinc-100",children:"System Check"}),v.jsx("p",{className:"text-zinc-500 text-xs",children:"Verifying environment dependencies"})]})]})}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:n?v.jsxs("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-0 bg-blue-500/20 blur-xl rounded-full"}),v.jsx(Cb,{className:"relative animate-spin text-blue-400",size:28})]}),v.jsx("p",{className:"text-zinc-500 text-sm",children:"Scanning system..."})]}):e?v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between text-xs px-1",children:[v.jsxs("span",{className:"text-zinc-600 uppercase tracking-wide font-medium",children:["Platform: ",v.jsx("span",{className:"text-zinc-400",children:e.platform})]}),v.jsxs("span",{className:Li("flex items-center gap-1.5 font-medium",{"text-emerald-400":e.network_ok,"text-red-400":!e.network_ok}),children:[e.network_ok?v.jsx(PGe,{size:12}):v.jsx(IGe,{size:12}),e.network_ok?"Online":"Offline"]})]}),v.jsxs("div",{className:"bg-zinc-800/30 rounded-lg border border-zinc-800/50 divide-y divide-zinc-800/50",children:[v.jsx(w,{icon:CGe,label:"Python Environment",status:e.python_found?"ok":"error",detail:e.python_found?`v${e.python_version||"Detected"}`:"Required for AI"}),e.platform==="linux"&&v.jsx(w,{icon:tF,label:"FFmpeg Framework",status:e.ffmpeg_available?"ok":"error",detail:e.ffmpeg_available?"Installed":"Required for Audio"}),typeof e.vcruntime_found<"u"&&v.jsx(w,{icon:hGe,label:"Visual C++ Runtime",status:e.vcruntime_found?"ok":"error",detail:e.vcruntime_found?"Installed":"Required"}),typeof e.windows_helper_present<"u"&&v.jsx(w,{icon:tF,label:"Audio Helper",status:e.windows_helper_present?"ok":"error",detail:e.windows_helper_present?"Ready":"Missing"})]}),v.jsx("div",{className:Li("p-3 rounded-lg border",{"bg-emerald-500/5 border-emerald-500/20":!y(),"bg-amber-500/5 border-amber-500/20":y()}),children:y()?v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(Kne,{className:"text-amber-400 shrink-0 mt-0.5",size:18}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-medium text-amber-400 text-sm",children:"Missing Dependencies"}),v.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Some components need to be installed."})]})]}):v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(uUe,{className:"text-emerald-400 shrink-0",size:18}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-medium text-emerald-400 text-sm",children:"All Systems Go"}),v.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Your environment is ready for transcription."})]})]})}),y()&&v.jsxs("div",{children:[v.jsxs("button",{onClick:()=>f(!u),className:"flex items-center justify-between w-full text-xs text-zinc-500 hover:text-zinc-300 py-2 transition-colors",children:[v.jsx("span",{children:"Manual Installation Steps"}),v.jsx(CE,{size:14,className:Li("transition-transform",{"rotate-180":u})})]}),v.jsx(pa,{children:u&&v.jsx(Wn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:v.jsx("div",{className:"bg-zinc-800/50 rounded-lg p-3 text-sm text-zinc-400 border border-zinc-700/50",children:v.jsxs("ul",{className:"space-y-2",children:[!e.python_found&&v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-zinc-600 mt-1",children:""}),v.jsxs("span",{children:["Install ",v.jsx("b",{className:"text-zinc-300",children:"Python 3.12+"})," from python.org"]})]}),e.platform==="linux"&&!e.ffmpeg_available&&v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-zinc-600 mt-1",children:""}),v.jsxs("span",{children:["Install ",v.jsx("b",{className:"text-zinc-300",children:"FFmpeg"})," via package manager"]})]}),typeof e.vcruntime_found<"u"&&!e.vcruntime_found&&v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-zinc-600 mt-1",children:""}),v.jsxs("span",{children:["Install"," ",v.jsxs("a",{href:"https://learn.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist",target:"_blank",className:"text-blue-400 hover:underline inline-flex items-center gap-1",children:["VC++ Redistributable ",v.jsx(wUe,{size:10})]})]})]})]})})})})]}),l&&v.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-xs",children:[v.jsx("strong",{children:"Error:"})," ",l]})]}):v.jsxs("div",{className:"text-center py-12 text-red-400",children:[v.jsx(hUe,{size:24,className:"mx-auto mb-2 opacity-50"}),v.jsx("p",{className:"text-sm",children:"Failed to load system checks."}),v.jsx("button",{onClick:m,className:"mt-3 text-blue-400 hover:underline text-sm",children:"Retry"})]})}),v.jsx("div",{className:"px-5 py-3 border-t border-zinc-800 bg-zinc-900/50 flex justify-end gap-2",children:y()?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>a(!1),className:"px-3 py-1.5 rounded-md text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800 transition-colors text-sm font-medium",disabled:o,children:"Ignore"}),v.jsx("button",{onClick:()=>{localStorage.setItem("kortex_preflight_dismissed","true"),a(!1)},className:"px-3 py-1.5 rounded-md text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800 transition-colors text-sm font-medium",children:"Don't Show Again"}),v.jsx("button",{onClick:b,disabled:o,className:"px-4 py-1.5 rounded-md bg-blue-600 hover:bg-blue-500 text-white transition-all flex items-center gap-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:o?v.jsxs(v.Fragment,{children:[v.jsx(Cb,{className:"animate-spin",size:14}),"Installing..."]}):v.jsxs(v.Fragment,{children:[v.jsx(ZP,{size:14}),"Auto-Install"]})})]}):v.jsx("button",{onClick:()=>a(!1),className:"px-4 py-1.5 rounded-md bg-zinc-100 hover:bg-white text-zinc-900 font-medium transition-colors text-sm",children:"Close"})})]})]})})}function bpt(){const e=ht.c(36),{openCommandPalette:t,isAiSidebarOpen:n,setIsAiSidebarOpen:r,isSidebarFloating:o,loadApiKey:i}=_n(),{currentNote:s,saveTimeout:a}=Ur();let l;e[0]!==s?(l=s?s.content.split(/\s+/).filter(vpt).length:0,e[0]=s,e[1]=l):l=e[1];const c=l,u=!a,[f,p]=k.useState(!1);let m,y;e[2]!==i||e[3]!==t?(m=()=>{i();const W=K=>{console.log("Key pressed:",K.key,"metaKey:",K.metaKey,"altKey:",K.altKey,"ctrlKey:",K.ctrlKey),(K.metaKey||K.altKey)&&K.key==="p"&&(K.preventDefault(),t())};return window.addEventListener("keydown",W),()=>{window.removeEventListener("keydown",W)}},y=[t,i],e[2]=i,e[3]=t,e[4]=m,e[5]=y):(m=e[4],y=e[5]),k.useEffect(m,y);let b,w,S,E;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=v.jsx(ypt,{}),w=v.jsx(gpt,{}),S=v.jsx(kat,{}),E=v.jsx(KJe,{}),e[6]=b,e[7]=w,e[8]=S,e[9]=E):(b=e[6],w=e[7],S=e[8],E=e[9]);let T;e[10]!==o?(T=!o&&v.jsx("div",{className:"h-full flex-shrink-0",children:v.jsx(rU,{})}),e[10]=o,e[11]=T):T=e[11];let A;e[12]!==o||e[13]!==f?(A=o&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-10 z-40 hover:bg-transparent",onMouseEnter:()=>p(!0)}),v.jsx(pa,{children:f&&v.jsx(Wn.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"absolute left-0 top-0 bottom-0 z-[9999] h-full border-r border-zinc-800 shadow-2xl",onMouseLeave:()=>p(!1),children:v.jsx(rU,{})})})]}),e[12]=o,e[13]=f,e[14]=A):A=e[14];let M;e[15]===Symbol.for("react.memo_cache_sentinel")?(M=v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx(WJe,{})}),e[15]=M):M=e[15];let R;e[16]!==s||e[17]!==u||e[18]!==c?(R=s&&s.note_type!=="canvas"&&v.jsx(_at,{wordCount:c,isSaved:u}),e[16]=s,e[17]=u,e[18]=c,e[19]=R):R=e[19];let O;e[20]!==R?(O=v.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[M,R]}),e[20]=R,e[21]=O):O=e[21];let I;e[22]!==r?(I=()=>r(!1),e[22]=r,e[23]=I):I=e[23];let L;e[24]!==n||e[25]!==I?(L=v.jsx(ppt,{isOpen:n,onClose:I}),e[24]=n,e[25]=I,e[26]=L):L=e[26];let $;e[27]!==O||e[28]!==L||e[29]!==T||e[30]!==A?($=v.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[T,A,O,L]}),e[27]=O,e[28]=L,e[29]=T,e[30]=A,e[31]=$):$=e[31];let B;e[32]===Symbol.for("react.memo_cache_sentinel")?(B={zIndex:99999},e[32]=B):B=e[32];let G;e[33]===Symbol.for("react.memo_cache_sentinel")?(G=v.jsx(uZe,{containerStyle:B,position:"bottom-center",reverseOrder:!1,toastOptions:{style:{background:"#333",color:"#fff",borderRadius:"10px"}}}),e[33]=G):G=e[33];let V;return e[34]!==$?(V=v.jsxs("div",{className:"bg-zinc-950 flex flex-col h-screen overflow-hidden",children:[b,w,S,E,$,G]}),e[34]=$,e[35]=V):V=e[35],V}function vpt(e){return e.length>0}qde.createRoot(document.getElementById("root")).render(v.jsx(se.StrictMode,{children:v.jsx(bpt,{})}));export{Trt as $,k as A,Eg as B,Xtt as C,v as D,i5e as E,ym as F,Wo as G,xi as H,pnt as I,Nv as J,Bm as K,xv as L,Hse as M,Crt as N,Tg as O,lo as P,Sse as Q,krt as R,Sdt as S,Znt as T,Hnt as U,wce as V,VY as W,xse as X,VE as Y,Ert as Z,Ftt as _,Ppt as a,prt as a0,smt as a1,tse as a2,Zr as a3,imt as a4,ou as a5,se as a6,B1 as a7,Md as a8,v7e as a9,Urt as aA,Grt as aB,qrt as aC,sae as aD,dmt as aE,drt as aF,frt as aG,Lse as aH,zse as aI,Dpe as aJ,R9 as aK,r4 as aL,pZ as aM,L0e as aN,Sxe as aO,a0e as aP,w0e as aQ,KO as aR,WO as aS,Ur as aT,ZU as aa,No as ab,yq as ac,PO as ad,Fpe as ae,Lpe as af,zpe as ag,uq as ah,pq as ai,$pe as aj,jpe as ak,Bpe as al,bq as am,Xpe as an,gq as ao,fq as ap,mq as aq,Upe as ar,Zpe as as,qpe as at,r9 as au,tme as av,Wpe as aw,Kpe as ax,Bse as ay,Dse as az,Zft as b,t2 as c,eht as d,Put as e,xX as f,Lb as g,wX as h,zt as i,Gft as j,jce as k,ii as l,pht as m,_R as n,fmt as o,Dpt as p,nC as q,w5 as r,yv as s,B3e as t,p5 as u,vce as v,uE as w,pO as x,ylt as y,z4e as z};
